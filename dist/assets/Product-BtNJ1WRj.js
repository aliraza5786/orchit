const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-zuTsLcO9.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-DbUp00BK.js","assets/index-CpwqMS23.js","assets/index-FBalhsKL.css","assets/CreateSheetModal-CY54DYsL.js","assets/useOpenAIGeneration-ChtGhco0.js","assets/CreateSheetModal-BPf3BB8o.css","assets/CreateVariableModal-Z8Aox0eE.js","assets/ConfirmDeleteModal-D3_VgqYU.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-JPKJcLNx.js","assets/SidePanel-SyUR4qKD.js","assets/SidePanel-CZIw8fnG.css","assets/KanbanBoard-BR26ohQW.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-BXvH6GDE.js","assets/index-CTkWWtyZ.js","assets/workspace-hO_TK1Fc.js","assets/KanbanBoard-KhpXq64F.css"])))=>i.map(i=>d[i]);
import{d as Te,r as o,W as Pe,X as Ee,a as Ie,Y as Me,Z as Oe,c as D,m as O,a8 as Ue,$ as Re,a0 as Be,a9 as Ne,i as A,e as s,h as i,b as U,j as S,A as oe,w as L,f as R,n as a,C as se,a1 as f,g as T,a4 as Ke,_ as qe,t as ze,B as $e,F as je,a2 as _,p as He,o as v,H as We}from"./index-CpwqMS23.js";import{u as Fe}from"./workspace-hO_TK1Fc.js";import{D as de,K as Qe}from"./KanbanSkeleton-DAV3xmgy.js";import{_ as Ye}from"./SearchBar.vue_vue_type_script_setup_true_lang-CSz4sFNf.js";import"./index-CTkWWtyZ.js";const Xe={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-2xl shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex-col flex scrollbar-visible"},Ze={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1"},Ge={class:"flex gap-3 items-center"},Je={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible"},et={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},tt={key:0,class:"bg-bg-body rounded-lg p-4"},lt={class:"flex items-center mt-3 gap-3"},at=Te({__name:"Product",setup(ot){const ie=f(()=>_(()=>import("./CreateTaskModal-zuTsLcO9.js"),__vite__mapDeps([0,1,2,3]))),re=f(()=>_(()=>import("./CreateSheetModal-CY54DYsL.js"),__vite__mapDeps([4,2,3,5,6]))),ne=f(()=>_(()=>import("./CreateVariableModal-Z8Aox0eE.js"),__vite__mapDeps([7,2,3]))),B=f(()=>_(()=>import("./ConfirmDeleteModal-D3_VgqYU.js"),__vite__mapDeps([8,9,2,3]))),ue=f(()=>_(()=>import("./SidePanel-SyUR4qKD.js"),__vite__mapDeps([10,2,3,11]))),ve=f(()=>_(()=>import("./KanbanBoard-BR26ohQW.js"),__vite__mapDeps([12,2,3,13,14,9,15,16]))),x=o(!1),N=He(),{workspaceId:m,moduleId:n}=Pe(),{data:P}=Ee(m.value,n.value),me=Ie(),{mutate:E,isPending:K}=Me({onSuccess:()=>{me.invalidateQueries({queryKey:["sheet-list"]}),h.value="",p.value=!1,k.value=!1,p.value=!1}}),q=t=>{E({workspace_id:m.value,module_id:n.value,variable_id:d.value,value:t})},{data:g,refetch:pe}=Oe({workspace_id:m,workspace_module_id:n}),I=D(()=>{var t;return g.value?(t=g.value[0])==null?void 0:t._id:""}),r=o(I.value);O(I,()=>{r.value=I.value});const M=D(()=>{var t;return P.value?(t=P.value[0])==null?void 0:t._id:""}),d=o(M.value);O(M,()=>{d.value=M.value});const C=Fe(),{data:ce,isPending:z}=Ue(n,r,D(()=>[...C.selectedLaneIds]),d),V=o(!1),y=o(),$=t=>{y.value=t},b=o(!1),fe=()=>{b.value=!b.value},_e=Re(),be=Be();function we(t){t.type=="column"?_e.mutate({payload:{workspace_id:m.value,workspace_module_id:n.value,variable_id:d.value,moved_value:t.meta.id,new_index:t.meta.newIndex}}):be.mutate({payload:{workspace_id:m.value,card_id:t.meta.moved._id,group_value:t.meta.fromColumnId,group_variable_id:d.value,new_index:t.meta.newIndex,sheet_id:r.value}})}const xe=t=>{},ge=D(()=>(g.value||[]).map(t=>({_id:t._id,title:t.variables["sheet-title"],description:t.variables["sheet-description"],icon:t.icon})));O(g,t=>{var e;(t==null?void 0:t.length)>0&&(r.value=(e=t[0])==null?void 0:e._id)});const k=o(!1),h=o("");function j(){k.value=!k.value}function H(){const t=h.value.trim();t&&q(t)}const Ce=t=>{E({workspace_id:N.params.id,module_id:N.params.module_id,new_value:t.title,value:t.oldTitle,variable_id:d.value})},p=o(!1),u=o(),Ve=()=>{E({value:u.value.title,workspace_id:m.value,module_id:n.value,newValue:u.value.title,variable_id:d.value,is_trash:!0})},ye=t=>{p.value=!0,u.value=t},ke=t=>{V.value=!0,u.value=t},w=o(!1),c=o();function he(t){w.value=!0,c.value=t}const{mutate:De,isPending:Ae}=Ne({onSuccess:()=>{pe(),w.value=!1}});function Se(){var t;De({sheet_id:(t=c.value)==null?void 0:t._id,workspace_module_id:n.value,is_trash:!0})}function Le(t){b.value=!0,c.value=t}return(t,e)=>{var W,F,Q,Y,X,Z,G;return v(),A(je,null,[s("div",Xe,[s("div",Ze,[i(de,{onEditOption:Le,modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l),onDeleteOption:he,options:ge.value,variant:"secondary"},{more:L(()=>[s("div",{onClick:e[0]||(e[0]=l=>fe()),class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[19]||(e[19]=[s("i",{class:"fa-solid fa-plus"},null,-1),R(" Add new ")]))]),_:1},8,["modelValue","options"]),s("div",Ge,[i(de,{actions:!1,prefix:"View by",modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=l=>d.value=l),options:a(P),variant:"secondary"},{more:L(()=>[s("div",{onClick:e[2]||(e[2]=l=>x.value=!0),class:"sticky bottom-0 bg-bg-dropdown shadow-md shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[20]||(e[20]=[s("i",{class:"fa-solid fa-plus"},null,-1),R(" Add new ")]))]),_:1},8,["modelValue","options"]),i(Ye,{placeholder:"Search in Orchit AI space"})])]),oe(i(Qe,null,null,512),[[se,a(z)]]),oe(s("div",Je,[i(a(ve),{onOnPlus:ke,"onDelete:column":e[4]||(e[4]=l=>ye(l)),"onUpdate:column":e[5]||(e[5]=l=>Ce(l)),onReorder:we,onAddColumn:q,"onSelect:ticket":$,board:a(ce),onOnBoardUpdate:xe,variable_id:d.value,sheet_id:r.value},{"column-footer":L(l=>{var J,ee,te,le,ae;return[(ee=(J=a(C))==null?void 0:J.transitions)!=null&&ee.all_allowed&&!((ae=(le=(te=a(C))==null?void 0:te.transitions)==null?void 0:le.all_allowed)!=null&&ae.includes(l.column.title))&&a(C).transitions.currentColumn!=l.column.title?(v(),A("div",et," Disbale ( you can't drop here )")):S("",!0)]}),_:1},8,["board","variable_id","sheet_id"]),s("div",{class:"min-w-[328px]",onClick:e[7]||(e[7]=T(()=>{},["stop"]))},[k.value?(v(),A("div",tt,[i(qe,{autofocus:!0,modelValue:h.value,"onUpdate:modelValue":e[6]||(e[6]=l=>h.value=l),placeholder:"Add New list",onKeyup:Ke(H,["enter"])},null,8,["modelValue"]),e[21]||(e[21]=s("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),s("div",lt,[i($e,{onClick:H,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:L(()=>[R(ze(a(K)?"Adding...":"Add list"),1)]),_:1}),s("i",{class:"fa-solid fa-close",onClick:j})])])):(v(),A("button",{key:1,class:"text-sm text-text-primary py-2.5 cursor-pointer font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",onClick:T(j,["stop"])}," + Add List "))])],512),[[se,!a(z)]])]),i(a(B),{onClick:e[8]||(e[8]=T(()=>{},["stop"])),modelValue:p.value,"onUpdate:modelValue":e[9]||(e[9]=l=>p.value=l),title:"Delete List",itemLabel:"list",itemName:(W=u.value)==null?void 0:W.title,requireMatchText:(F=u.value)==null?void 0:F.title,confirmText:"Delete workspace",cancelText:"Cancel",size:"md",loading:a(K),onConfirm:Ve,onCancel:e[10]||(e[10]=()=>{p.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),V.value?(v(),U(a(ie),{selectedVariable:d.value,listId:(Q=u.value)==null?void 0:Q.title,sheet_id:r.value,key:"createTaskModalKey",modelValue:V.value,"onUpdate:modelValue":e[11]||(e[11]=l=>V.value=l),onSubmit:e[12]||(e[12]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):S("",!0),(Y=y.value)!=null&&Y._id?(v(),U(a(ue),{key:1,details:y.value,onClose:e[13]||(e[13]=()=>{$({variables:{}})}),showPanel:!!((X=y.value)!=null&&X._id)},null,8,["details","showPanel"])):S("",!0),i(a(re),{size:"md",sheet:c.value,modelValue:b.value,"onUpdate:modelValue":e[14]||(e[14]=l=>b.value=l)},null,8,["sheet","modelValue"]),x.value?(v(),U(a(ne),{key:2,modelValue:x.value,"onUpdate:modelValue":e[15]||(e[15]=l=>x.value=l),sheetID:r.value},null,8,["modelValue","sheetID"])):S("",!0),i(a(B),{onClick:e[16]||(e[16]=T(()=>{},["stop"])),modelValue:w.value,"onUpdate:modelValue":e[17]||(e[17]=l=>w.value=l),title:"Delete Sheet",itemLabel:"Sheet",itemName:(Z=c.value)==null?void 0:Z.title,requireMatchText:(G=c.value)==null?void 0:G.title,confirmText:"Delete Sheet",cancelText:"Cancel",size:"md",loading:a(Ae),onConfirm:Se,onCancel:e[18]||(e[18]=()=>{w.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"])],64)}}}),ut=We(at,[["__scopeId","data-v-04c3969c"]]);export{ut as default};
