const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-vLTaG8Dc.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-Ct7ZEl7N.js","assets/index-0GaFUcCF.js","assets/index-jLBwAice.css","assets/CreateSheetModal-H_unAZej.js","assets/IconPicker-Cbbwmttb.js","assets/IconPicker-CIMr_3tu.css","assets/AudioRecorder.vue_vue_type_script_setup_true_lang-DY21Dc6c.js","assets/CreateSheetModal--7RYCgy-.css","assets/CreateVariableModal-CEOPPiOh.js","assets/ConfirmDeleteModal-DCOGbo6t.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-CZgvgk2J.js","assets/SidePanel-GjMvDz59.js","assets/SidePanel-U7OOMI6M.css","assets/KanbanBoard-BeWYfsNB.js","assets/vuedraggable.umd-bJGT3ztU.js","assets/_commonjsHelpers-_d1bhYXs.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-BxRDl7hN.js","assets/KanbanBoard-Dffh696C.css"])))=>i.map(i=>d[i]);
import{d as ol,W as nl,r,M as sl,N as il,c as S,a2 as rl,n as j,a0 as dl,a6 as ul,u as cl,ar as vl,a7 as pl,a8 as fl,a9 as bl,a1 as ml,ac as _,Z as gl,ad as yl,Q as _l,ab as xl,a3 as kl,aa as hl,ae as wl,af as Cl,j as y,f as n,i as h,e as F,k as m,w as H,p as u,z as I,F as se,D as Pe,E as et,h as ie,ah as tt,_ as lt,B as at,ag as xe,t as re,y as ot,P as Sl,q as Vl,ai as nt,aj as Dl,o as c,g as ke,ak as Q,A as Y,T as Tl,U as st,bn as Al,al as El,J as Ll}from"./index-0GaFUcCF.js";import{D as it}from"./Dropdown-D6VjWCGV.js";import{_ as Fl}from"./SearchBar.vue_vue_type_script_setup_true_lang-BXkO4nAt.js";import{K as Il}from"./KanbanSkeleton-6G4NCCuQ.js";import{K as Nl}from"./KanbanTicket-C3PegsnO.js";import{F as rt}from"./fuse-Ch1WBRTM.js";import{l as ql}from"./lodash-CQYOKM_D.js";import{_ as dt,a as Ml,b as Pl,C as zl,c as Bl,T as $l,k as Ul}from"./TimelineView-BjBWCKBK.js";import"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-CZgvgk2J.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-BxRDl7hN.js";import"./_commonjsHelpers-_d1bhYXs.js";const Ol={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-[6px] shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex-col flex scrollbar-visible"},Rl={class:"overflow-x-auto shrink-0 sticky top-0 z-20 bg-bg-card"},Wl={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1 min-w-max h-full"},Kl={class:"flex gap-3 items-center"},jl={class:"flex items-center gap-3 bg-bg-surface/50 h-[32px] px-2 rounded-md"},Hl={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible h-full"},Ql={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},Yl={key:0,class:"bg-bg-body rounded-lg p-4"},Gl={class:"flex items-center mt-3 gap-3"},Jl=["disabled"],Zl={class:"relative w-full h-full flex overflow-hidden"},Xl={key:0,class:"format-sidebar h-full py-4 px-4 w-[320px] border-l bg-bg-card overflow-x-hidden overflow-y-auto flex flex-col"},ea={class:"flex items-center justify-between pb-3 mb-4 border-b"},ta={class:"format-content space-y-6"},la={class:"format-group relative mb-3"},aa={class:"text-xs text-secondary"},oa={key:0,class:"absolute z-50 mt-2 p-3 bg-bg-card rounded-lg shadow-lg border w-[240px]"},na={class:"grid grid-cols-10 gap-1 mb-3"},sa=["onClick"],ia={class:"flex items-center gap-2"},ra=["value"],da=["value"],ua={class:"format-group relative mb-3"},ca={class:"text-xs text-secondary"},va={key:0,class:"absolute z-50 mt-2 p-3 bg-bg-card rounded-lg shadow-lg border w-[240px]"},pa={class:"grid grid-cols-10 gap-1 mb-3"},fa=["onClick"],ba={class:"flex items-center gap-2"},ma=["value"],ga=["value"],ya={class:"grid grid-cols-1 gap-3"},_a=["value"],xa={class:"mt-6 pt-4"},ka=["disabled"],ha={key:0,class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},wa={key:0,class:"fixed inset-0 bg-black/30 flex items-center justify-center"},Ca={class:"bg-white p-6 rounded-xl w-80"},Sa={class:"flex justify-end gap-2 mt-4"},Va=["disabled"],Da={class:"flex items-center mt-3 gap-3"},Ta=ol({__name:"Product",setup(Aa){const{canEditSheet:ut,canDeleteSheet:ct,canCreateVariable:de,canCreateSheet:vt,canCreateCard:pt,canEditCard:ue,canAssignCard:ft}=nl(),G=r(!1),ce=r(null),ve=r(!1),he=r(null),we=r(!1),p=r("kanban"),Ce=r(null),pe=r(null),J=r(!1),ze=Vl(),{workspaceId:w,moduleId:T}=sl(),N=il(),fe=r(!1),Z=r(),q=r(null),M=r(!1),be=r(!1),P=r(""),Se=r(null);function bt(t){P.value="",be.value=!0,Se.value=t}function mt(){Se.value&&Se.value(P.value),be.value=!1}function gt(){be.value=!1}const Ve=r(null),yt=t=>{Ve.value=t},_t=S(()=>{var t;return(t=A.value)==null?void 0:t.find(e=>e._id===k.value)}),U=r(!1),Be=["#FFFFFF","#F2F2F2","#D9D9D9","#BFBFBF","#A6A6A6","#808080","#404040","#000000","#FFE066","#FF9AA2","#8EE4AF","#00EAD3","#90DBF4","#4D96FF","#6C63FF","#C77DFF","#F7A1C4","#FFC300","#FF5733","#2ECC71","#00B894","#17A2B8","#0984E3","#3F51B5","#9C27B0","#E84393","#FF8C00","#E74C3C","#1E8449","#006D6F","#004C6D","#0057A8","#1A237E","#4A148C","#7D3C98"],O=r(!1);j(U,t=>{t&&(O.value=!1)}),j(O,t=>{t&&(U.value=!1)});const xt=async()=>{if(he.value)try{we.value=!0,await Tl({url:`workspace/card/${he.value}`,method:"DELETE"}),ht(he.value),await ge(),ve.value=!1,ce.value=null,st.success("Ticket deleted successfully")}catch(t){st.error(Al(t))}finally{we.value=!1}},kt=async()=>{await xt()},ht=t=>{var e,l;(l=(e=b.value)==null?void 0:e.sheets)==null||l.forEach(a=>{var o;(o=a.sheet_lists)==null||o.forEach(v=>{v.cards=v.cards.filter(f=>f._id!==t)})})},wt=Q(()=>Y(()=>import("./CreateTaskModal-vLTaG8Dc.js"),__vite__mapDeps([0,1,2,3]))),Ct=Q(()=>Y(()=>import("./CreateSheetModal-H_unAZej.js"),__vite__mapDeps([4,2,3,5,6,7,8]))),St=Q(()=>Y(()=>import("./CreateVariableModal-CEOPPiOh.js"),__vite__mapDeps([9,2,3]))),De=Q(()=>Y(()=>import("./ConfirmDeleteModal-DCOGbo6t.js"),__vite__mapDeps([10,11,2,3]))),Vt=Q(()=>Y(()=>import("./SidePanel-GjMvDz59.js"),__vite__mapDeps([12,2,3,13]))),Dt=Q(()=>Y(()=>import("./KanbanBoard-BeWYfsNB.js"),__vite__mapDeps([14,15,16,2,3,17,11,18]))),{data:me,refetch:ge,isPending:$e}=dl({workspace_id:w,workspace_module_id:T}),Te=S(()=>{var t;return me.value?(t=me.value[0])==null?void 0:t._id:""}),x=r(Te.value),{data:A,isPending:Tt}=rl(w.value,T.value,x),{mutate:Ae,isPending:Ee}=ul({onSuccess:()=>{N.invalidateQueries({queryKey:["sheet-list"]}),R.value="",W.value=!1,ee.value=!1,W.value=!1}}),Ue=S(()=>{var t;return((t=_t.value)==null?void 0:t.title)==="Process"&&Ve.value?{variable_slug:"card-type",type_value:Ve.value.title}:{}}),Oe=t=>{const e={workspace_id:w.value,module_id:T.value,variable_id:k.value,value:t,...Ue.value};Ae(e)};j(Te,()=>{x.value=Te.value});const Le=S(()=>{var t;return A!=null&&A.value?(t=A==null?void 0:A.value[0])==null?void 0:t._id:""}),k=r(Le.value);j(Le,()=>{k.value=Le.value});const ye=cl(),{data:b,isPending:Fe,refetch:Re}=vl(T,x,S(()=>[...ye.selectedLaneIds]),k,Ue),L=t=>{t._id||(t._id=t.id),Z.value=t};window.selectCardHandler=L;const X=r(!1),At=()=>{B.value={},X.value=!X.value},Et=pl(),Lt=fl();function Ft(t){t.type==="column"?Et.mutate({payload:{workspace_id:w.value,workspace_module_id:T.value,variable_id:k.value,moved_value:t.meta.id,new_index:t.meta.newIndex}},{onSuccess:()=>{ge(),Re()}}):Lt.mutate({payload:{workspace_id:w.value,card_id:t.meta.moved._id,group_value:t.meta.fromColumnId,group_variable_id:k.value,new_index:t.meta.newIndex,sheet_id:x.value}},{onSuccess:()=>{ge(),Re()}})}const It=t=>{},Nt=S(()=>(me.value||[]).map(t=>({_id:t._id,title:t==null?void 0:t.variables["sheet-title"],description:t==null?void 0:t.variables["sheet-description"],icon:t.icon,status:t==null?void 0:t.generation_status})));j(me,t=>{var e;(t==null?void 0:t.length)>0&&(x.value=(e=t[0])==null?void 0:e._id)});const ee=r(!1),R=r("");function Ie(){ee.value=!ee.value}function _e(){const t=R.value.trim();t&&Oe(t)}const qt=t=>{Ae({workspace_id:ze.params.id,module_id:ze.params.module_id,new_value:t.title,value:t.oldTitle,variable_id:k.value})},W=r(!1),z=r(),Mt=()=>{Ae({value:z.value.title,workspace_id:w.value,module_id:T.value,newValue:z.value.title,variable_id:k.value,is_trash:!0})},Pt=t=>{W.value=!0,z.value=t},zt=t=>{fe.value=!0,z.value=t},B=r();function Bt(t){G.value=!0,B.value=t}const{mutate:We,isPending:$t}=bl({onSuccess:()=>{ge(),G.value=!1}});function Ut(){var t;We({sheet_id:(t=B.value)==null?void 0:t._id,workspace_module_id:T.value,is_trash:!0})}function Ot(t){X.value=!0,B.value=t}const te=r(""),Rt=r("");j(te,ql.debounce(t=>{Rt.value=t},200));const Wt=S(()=>{const t=b.value.flatMap(e=>e.cards.map(l=>({...l,columnId:e.title})));return new rt(t,{keys:["card-title","card-description"],threshold:.3})}),le=S(()=>{var t;if(p.value==="kanban"){if(!te.value)return b.value;const e=Wt.value.search(te.value).map(l=>l.item);return b.value.map(l=>({...l,cards:e.filter(a=>a.columnId===l.title)}))}else{const e=(t=te.value)==null?void 0:t.trim();if(!e){let a=[];return(b.value??[]).forEach(o=>{a=[...a,...o==null?void 0:o.cards]}),a}return new rt(Ht.value,{keys:["card-title","card-description"],threshold:.3}).search(e).map(a=>a.item)}}),{data:Ne}=ml(w),Ke=S(()=>((Ne==null?void 0:Ne.value)??[]).map(t=>{var e;return{_id:t._id,title:((e=t==null?void 0:t.variables)==null?void 0:e["lane-title"])??String(t._id)}})),Kt=S(()=>{var t;return[{key:"card-title",label:"Title",render:({row:e,value:l})=>_("div",{class:"flex items-center gap-1 w-full"},[_("a",{onClick:()=>Z.value=e,class:"text-[12px] underline text-blue-500 shrink-0 overflow-ellipsis cursor-pointer"},e["card-code"]),_("div",{class:"flex-1 min-w-0"},[_("input",{onFocusout:a=>{var o;He(e==null?void 0:e._id,"card-title",(o=a==null?void 0:a.target)==null?void 0:o.value)},class:"text-[12px] w-full overflow-ellipsis capitalize p-1 w-full p-1 focus:border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-transparent focus:bg-bg-body text-[12px] h-8",defaultValue:l,disabled:!ue.value})])])},{key:"end-date",label:"Due Date",render:({row:e,value:l})=>{const a=r(l);return _(gl,{class:" capitalize flex items-center gap-2 text-[12px]",placeholder:"Set start date",tableInputClass:!0,modelValue:a.value,disabled:!ue.value,"onUpdate:modelValue":o=>Gt(e==null?void 0:e._id,o),emptyText:"Date"})}},{key:"lane",label:"Lane",render:({row:e})=>{var l;return _(dt,{options:Ke.value??[],placeholder:"Select lane",modelValue:((l=e.lane)==null?void 0:l._id)||null,disabled:!ue.value,"onUpdate:modelValue":a=>Jt(e==null?void 0:e._id,a),displayField:"title",emptyText:"Lane"})}},{key:"created_by",label:"Owner",render:({value:e})=>_("div",{class:"capitalize flex items-center gap-2  px-3"},[_("div",{class:" rounded-full  "},[e!=null&&e.u_profile_image?_("img",{class:"w-6 h-6 rounded-full",src:e==null?void 0:e.u_profile_image}):_("div",{class:"w-5 h-5 rounded-full flex justify-center items-center text-[11px] ",style:`background:${e!=null&&e.u_full_name?yl({name:e.u_full_name,email:e.u_email}):""}`},_l(e==null?void 0:e.u_full_name))]),_("span",{class:"text-[12px]"},e?e==null?void 0:e.u_full_name:"")])},{key:"seat",label:"Assignee",render:({row:e,value:l})=>_(Ml,{class:"capitalize flex items-center gap-2 ",onAssign:a=>jt(e==null?void 0:e._id,a),assigneeId:l,seat:l,name:!0,disabled:!ft.value,emptyText:"Assignee"})},...((t=A.value)==null?void 0:t.filter(e=>{var l;return((l=e==null?void 0:e.type)==null?void 0:l.title)==="Select"}).map(e=>({key:e==null?void 0:e.slug,label:e==null?void 0:e.slug,render:({row:l,value:a})=>{var v;let o=a;if(Array.isArray(l==null?void 0:l.variables)){const f=l.variables.find(d=>d.slug===e.slug);f&&(o=f.value)}else o=((v=l==null?void 0:l.variables)==null?void 0:v[e.slug])??(l==null?void 0:l[e.slug])??a;return _("div",{class:"capitalize flex items-center gap-2"},[_(dt,{options:Qt(e.data??[]),modelValue:o,disabled:!ue.value,emptyText:e.slug,"onUpdate:modelValue":f=>{He(l==null?void 0:l._id,e.slug,f)},columnName:e.slug})])},visible:e==null?void 0:e.is_visible})))??[]]}),jt=(t,e)=>{qe(t,l=>{l.seat=e}),ae.mutate({card_id:t,seat_id:e==null?void 0:e._id})},Ht=S(()=>{let t=[];return(b.value??[]).forEach(e=>{t=[...t,...e==null?void 0:e.cards]}),t}),Qt=t=>t.map(e=>({_id:e.value??e,title:e.value??e})),ae=xl({onSuccess:()=>{N.invalidateQueries({queryKey:["get-sheets"]}),N.invalidateQueries({queryKey:["sheet-list"]}),N.invalidateQueries({queryKey:["roles"]})}}),qe=(t,e)=>{if(!b.value)return;const l=b.value.findIndex(a=>a.cards.some(o=>o._id===t));if(l!==-1){const a=b.value[l].cards.findIndex(o=>o._id===t);if(a!==-1){const o={...b.value[l].cards[a]};e(o),b.value[l].cards[a]=o,nt(b)}}},{mutate:je}=kl({onSuccess:()=>{N.invalidateQueries({queryKey:["sheet-list"]})}});function He(t,e,l){qe(t,a=>{if(e==="card-title"&&(a[e]=l),Array.isArray(a.variables)){const o=a.variables.find(v=>v.slug===e);o?o.value=l:a.variables.push({slug:e,value:l,type:"Select"})}else a.variables&&typeof a.variables=="object"?a.variables[e]=l:a[e]=l}),ae.mutate({card_id:t,variables:{[e]:l.trim()}})}function Yt(t){if(t["card-title"]){const e={sheet_list_id:"To Do",workspace_id:w.value,sheet_id:x.value,variables:{"card-title":t["card-title"].trim()},createdAt:new Date().toISOString()};je(e)}}const Gt=(t,e)=>{const l=b.value.findIndex(a=>a.cards.some(o=>o._id===t));if(l!==-1){const a=b.value[l].cards.findIndex(o=>o._id===t);a!==-1&&(b.value[l].cards[a]["end-date"]=e)}ae.mutate({card_id:t,variables:{"start-date":e}})};function Jt(t,e){qe(t,l=>{const a=Ke.value.find(o=>o._id===e);a&&(l.lane=a)}),nt(b),ae.mutate({card_id:t,workspace_lane_id:e})}const{mutate:Zt}=hl(),Xt=(t,e)=>{Zt({payload:{sheet_id:x.value,workspace_id:w.value,variable_slug:t,is_visible:e}})},E=S(()=>{var t,e;return(e=(t=q.value)==null?void 0:t.nodeObj)!=null&&e.style?q.value.nodeObj.style:Me(V)});function D(t,e,l){return t!==void 0?t:e!==void 0?e:l}function oe(t,e){var f;if(!((f=q.value)!=null&&f.nodeObj))return;const l=q.value.nodeObj;l.style||(l.style={});const a=e.target,o=a.type==="number"?Number(a.value):a.value;switch(t){case"bg_color":l.style.background=o;break;case"color":l.style.color=o;break;case"font_size":l.style.fontSize=`${o}px`;break;case"font_weight":l.style.fontWeight=o;break;case"font_style":l.style.fontStyle=o;break;case"font_family":l.style.fontFamily=o;break;case"border_color":l.style.borderColor=o;break;case"border_width":l.style.borderWidth=`${o}px`;break;case"border_radius":l.style.borderRadius=`${o}px`;break;case"padding":l.style.padding=`${o}px`;break}const v=document.getElementById(l.id);v&&Ge(l,v)}const V={bg_color:"#ffffff",color:"#000000",font_size:14,font_weight:"normal",font_style:"normal",font_family:"Inter",border_color:"#cccccc",border_width:0,border_radius:0,padding:0},K=r(!1);async function Qe(){var e;const t=(e=q.value)==null?void 0:e.nodeObj;if(!(!t||K.value)){K.value=!0;try{const l=Dl(t);l._originalStyle||(l._originalStyle={});const a=l.style||{},o=l._originalStyle,v={bg_color:D(a.background,o.bg_color,V.bg_color),color:D(a.color,o.color,V.color),font_size:D(a.fontSize?parseInt(a.fontSize):void 0,o.font_size,V.font_size),font_weight:D(a.fontWeight,o.font_weight,V.font_weight),font_style:D(a.fontStyle,o.font_style,V.font_style),font_family:D(a.fontFamily,o.font_family,V.font_family),border_color:D(a.borderColor,o.border_color,V.border_color),border_width:D(a.borderWidth?parseInt(a.borderWidth):void 0,o.border_width,V.border_width),border_radius:D(a.borderRadius?parseInt(a.borderRadius):void 0,o.border_radius,V.border_radius),padding:D(a.padding?parseInt(a.padding):void 0,o.padding,V.padding),hyperLink:P.value||l.hyperLink||""};l._originalStyle={...v};const f=l.unique_name==="sheet"?{sheet_id:l.id,workspace_id:w.value,workspace_module_id:T.value,style:v}:{card_id:l.id,seat_id:l.seat_id,style:v};l.unique_name==="sheet"?await We(f):await ae.mutateAsync(f)}finally{K.value=!1}}}const el=r([]);function tl(t){const e={id:"root",topic:localStorage.getItem("currentName")??"",isRoot:!0,children:[],style:{},_originalStyle:{},unique_name:"root"};if(!Array.isArray(t))return e;const l={};return t.forEach(a=>{var d,i;const o=((d=a.variables)==null?void 0:d["sheet-title"])||"Untitled",v=((i=a.style)==null?void 0:i.hyperLink)||"";l[o]||(l[o]={id:a._id,topic:o,variables:a==null?void 0:a.variables,children:[],style:a==null?void 0:a.style,_originalStyle:(a==null?void 0:a.style)||{},unique_name:"sheet",hyperLink:v||""},e.children.push(l[o]));const f={id:a==null?void 0:a._id,topic:a.title,children:[],style:Me(a==null?void 0:a.style),_originalStyle:a.style||{},unique_name:"List",hyperLink:v||""};(a.cards||[]).forEach((C,$)=>{var ne;const s=((ne=C.style)==null?void 0:ne.hyperLink)||"",g={id:C._id||`card-${$}`,seat_id:C.seat_id,topic:C["card-title"],style:Me(C.style),_originalStyle:C.style||{},children:[],unique_name:"card",hyperLink:s||""};f.children.push(g),el.value=g}),l[o].children.push(f)}),e}const{mutateAsync:ll}=wl({onSuccess:()=>{N.invalidateQueries({queryKey:["sheets"]}),N.invalidateQueries({queryKey:["sheet-list"]}),close()}});Cl(()=>{p.value!=="mindmap"||!Ce.value||!b.value||El(()=>{var v,f;const t=tl(b.value);pe.value&&((f=(v=pe.value).destroy)==null||f.call(v),pe.value=null);const e=new Set,l=new Set,a=new Set,o=new Ul({el:Ce.value,theme:void 0,draggable:!0,contextMenu:!0,toolBar:!0,keypress:!0,locale:"en",overflowHidden:!1,contextMenuOption:{Update:!0,extend:[{name:"Update Node",onclick:()=>{var i;M.value&&(M.value=!1);const d=(i=q.value)==null?void 0:i.nodeObj;d&&L(d)}},{name:"Add Hyperlink",onclick:()=>{bt(async()=>{await Qe()})}}]}});pe.value=o,o.init({nodeData:t}),setTimeout(()=>{o.toCenter()},100),o.bus.addListener("selectNode",d=>{d&&(q.value={nodeObj:d},M.value=!0)}),o.bus.addListener("renderNode",d=>{!(d!=null&&d.nodeObj)||!(d!=null&&d.element)||Ge(d.nodeObj,d.element)}),o.bus.addListener("operation",async d=>{if(d){if(d.name==="addChild"||d.name==="insertSibling"){const i=d.obj;if(!i||!i.id)return;e.add(i.id);return}if(d.name==="beginEdit"){const i=d.obj;console.log("editing node",i);return}if(d.name==="finishEdit"){const i=d.obj;if(!i||!i.id)return;const C=e.has(i.id),$=l.has(i.id);if(!C&&!$||$)return;if(C){e.delete(i.id),l.add(i.id);const s=i.parent;if(!s||!("unique_name"in s)){l.delete(i.id);return}if(s.unique_name==="root"&&!a.has(i.id)){a.add(i.id);try{await ll({variables:{"sheet-title":i.topic??"New Sheet","sheet-description":"This is custom description"},is_ai_generated:!1,workspace_id:w.value,workspace_module_id:T.value})}catch(g){console.error("Error creating workspace sheet:",g),l.delete(i.id),a.delete(i.id)}return}if(s.unique_name==="List"){try{const g=al({topic:i.topic??"New Card",id:i.id},s);g.variables&&(g.variables["card-description"]="This is a default description"),await je(g)}catch(g){console.error("Error creating card:",g),l.delete(i.id)}return}if(s.unique_name==="sheet"){try{console.log("Creating new list under sheet..."),console.log("List creation logic would go here")}catch(g){console.error("Error creating list:",g),l.delete(i.id)}return}}}}})})});function Ye(){const t=document.querySelector(".mind-elixir-toolbar.rb");if(!t){requestAnimationFrame(Ye);return}if(t.querySelector(".open-sidebar-btn"))return;const e=document.createElement("button");e.className="open-sidebar-btn me-toolbar-btn ms-2",e.title="Open Formatting Sidebar",e.innerHTML='<i class="fa-solid fa-sidebar"></i> ',e.addEventListener("click",()=>{M.value=!M.value}),t.appendChild(e)}Ye();function Ge(t,e){if(!t||!e||!t.style)return;const l=e.querySelector(".topic"),a=e.querySelector(".node")??e,o=t.style;o.background&&(a.style.background=o.background),o.color&&l&&(l.style.color=o.color),l&&(o.fontSize&&(l.style.fontSize=o.fontSize),o.fontFamily&&(l.style.fontFamily=o.fontFamily),o.fontWeight&&(l.style.fontWeight=o.fontWeight),o.fontStyle&&(l.style.fontStyle=o.fontStyle)),o.borderColor&&(a.style.borderColor=o.borderColor),o.borderWidth&&(a.style.borderWidth=o.borderWidth),o.borderRadius&&(a.style.borderRadius=o.borderRadius),o.padding&&(a.style.padding=o.padding)}function Me(t={}){return{background:t.bg_color,color:t.color,fontSize:t.font_size!=null?`${t.font_size}px`:void 0,fontWeight:t.font_weight,fontStyle:t.font_style,fontFamily:t.font_family,borderColor:t.border_color,borderWidth:t.border_width!=null?`${t.border_width}px`:void 0,borderRadius:t.border_radius!=null?`${t.border_radius}px`:void 0,padding:t.padding!=null?`${t.padding}px`:void 0,hyperLink:t.hyperLink||void 0}}function al(t,e){const l=new Date,a=l.toISOString().split("T")[0],o=new Date(l.getTime()+3*24*60*60*1e3).toISOString().split("T")[0];return{sheet_list_id:(e==null?void 0:e.topic)||"In Progress",workspace_id:w.value,sheet_id:x.value,workspace_lane_id:(t==null?void 0:t.workspace_lane_id)||null,variables:{"card-status":(e==null?void 0:e.topic)||"In Progress","card-type":null,priority:null,process:null,"card-title":t.topic||"New Card","card-description":"","start-date":a,"end-date":o},createdAt:new Date().toISOString()}}return(t,e)=>{var l,a,o,v,f,d,i,C,$;return c(),y(se,null,[n("div",Ol,[n("div",Rl,[n("div",Wl,[h(it,{onEditOption:Ot,modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=s=>x.value=s),canEdit:u(ut),canDelete:u(ct),onDeleteOption:Bt,options:Nt.value,variant:"secondary",customClasses:"fixed w-auto"},{more:H(()=>[u(vt)?(c(),y("div",{key:0,onClick:e[0]||(e[0]=s=>At()),class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[38]||(e[38]=[n("i",{class:"fa-solid fa-plus"},null,-1),ke(" Add new ")]))):m("",!0)]),_:1},8,["modelValue","canEdit","canDelete","options"]),n("div",Kl,[(p.value=="kanban",c(),F(it,{key:0,actions:!1,modelValue:k.value,"onUpdate:modelValue":e[3]||(e[3]=s=>k.value=s),options:u(A),variant:"secondary",customClasses:"fixed w-auto",onNestedSelect:yt},{more:H(()=>[u(de)?(c(),y("div",{key:0,onClick:e[2]||(e[2]=()=>{J.value=!0}),class:"sticky bottom-0 bg-bg-dropdown shadow-md shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[39]||(e[39]=[n("i",{class:"fa-solid fa-plus"},null,-1),ke(" Add new ")]))):m("",!0)]),_:1},8,["modelValue","options"])),h(Fl,{onOnChange:e[4]||(e[4]=s=>{te.value=s}),placeholder:"Search in Orchit AI space"}),n("div",jl,[n("button",{class:I(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",p.value==="kanban"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"List view",onClick:e[5]||(e[5]=s=>p.value="kanban")},e[40]||(e[40]=[n("i",{class:"fa-solid fa-chart-kanban"},null,-1)]),2),n("button",{onClick:e[6]||(e[6]=s=>p.value="table"),class:I(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",p.value==="table"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gallery view"},e[41]||(e[41]=[n("i",{class:"fa-solid fa-align-left"},null,-1)]),2),n("button",{onClick:e[7]||(e[7]=s=>p.value="mindmap"),class:I(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",p.value==="mindmap"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"MindMap view"},e[42]||(e[42]=[n("i",{class:"fa-solid fa-chart-diagram"},null,-1)]),2),n("button",{onClick:e[8]||(e[8]=s=>p.value="calendar"),class:I(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",p.value==="calendar"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Calendar view"},e[43]||(e[43]=[n("i",{class:"fa-regular fa-calendar"},null,-1)]),2),n("button",{onClick:e[9]||(e[9]=s=>p.value="gantt"),class:I(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",p.value==="gantt"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gantt Chart view"},e[44]||(e[44]=[n("i",{class:"fa-solid fa-chart-gantt"},null,-1)]),2),n("button",{onClick:e[10]||(e[10]=s=>p.value="timeline"),class:I(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",p.value==="timeline"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Timeline view"},e[45]||(e[45]=[n("i",{class:"fa-solid fa-timeline"},null,-1)]),2)])])])]),p.value=="kanban"?(c(),y(se,{key:0},[Pe(h(Il,null,null,512),[[et,u(Fe)||u($e)]]),Pe(n("div",Hl,[h(u(Dt),{onOnPlus:zt,board:le.value,"onDelete:column":e[11]||(e[11]=s=>Pt(s)),"onUpdate:column":e[12]||(e[12]=s=>qt(s)),onReorder:Ft,onAddColumn:Oe,"onSelect:ticket":L,onOnBoardUpdate:It,variable_id:k.value,sheet_id:x.value},{"column-footer":H(s=>{var g,ne,Je,Ze,Xe;return[(ne=(g=u(ye))==null?void 0:g.transitions)!=null&&ne.all_allowed&&!((Xe=(Ze=(Je=u(ye))==null?void 0:Je.transitions)==null?void 0:Ze.all_allowed)!=null&&Xe.includes(s.column.title))&&u(ye).transitions.currentColumn!=s.column.title?(c(),y("div",Ql," Disbale ( you can't drop here ) ")):m("",!0)]}),ticket:H(({ticket:s})=>[h(Nl,{selectedVar:k.value,onSelect:()=>{L(s)},ticket:s},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"]),n("div",{class:"min-w-[270px] sm:min-w-[328px]",onClick:e[14]||(e[14]=ie(()=>{},["stop"]))},[ee.value?(c(),y("div",Yl,[h(lt,{autofocus:!0,modelValue:R.value,"onUpdate:modelValue":e[13]||(e[13]=s=>R.value=s),placeholder:"Add New list",onKeyup:tt(_e,["enter"])},null,8,["modelValue"]),e[46]||(e[46]=n("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),n("div",Gl,[h(at,{onClick:_e,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:H(()=>[ke(re(u(Ee)?"Adding...":"Add list"),1)]),_:1}),n("i",{class:"fa-solid fa-close",onClick:Ie})])])):(c(),y("button",{key:1,disabled:!u(de),class:I(["text-sm text-text-primary py-2.5 font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",u(de)?"cursor-pointer":"cursor-not-allowed"]),onClick:ie(Ie,["stop"])}," + Add List ",10,Jl))])],512),[[et,!u(Fe)&&!u($e)]])],64)):m("",!0),p.value=="table"?(c(),F(Pl,{key:1,onToggleVisibility:Xt,onAddVar:e[15]||(e[15]=()=>{J.value=!0}),isPending:u(Fe)||u(Tt),columns:Kt.value,rows:le.value,canCreate:u(pt),canCreateVariable:u(de),onCreate:Yt},null,8,["isPending","columns","rows","canCreate","canCreateVariable"])):m("",!0),p.value==="mindmap"?(c(),y(se,{key:2},[n("div",Zl,[n("div",{ref_key:"mindMapRef",ref:Ce,class:"flex-1 h-full overflow-hidden rounded-md relative"},null,512),M.value?(c(),y("div",Xl,[n("div",ea,[e[48]||(e[48]=n("h3",{class:"text-sm font-semibold text-secondary"},"Format Node",-1)),n("button",{onClick:e[16]||(e[16]=s=>M.value=!1),class:"text-gray-400 hover:text-gray-700"},e[47]||(e[47]=[n("i",{class:"fa-solid fa-times"},null,-1)]))]),n("div",ta,[n("div",null,[e[51]||(e[51]=n("h4",{class:"text-xs font-semibold text-secondary uppercase mb-3"}," Colors ",-1)),n("div",la,[e[49]||(e[49]=n("label",{class:"block text-xs text-secondary mb-1"},"Background",-1)),n("div",{class:"flex items-center gap-2 cursor-pointer",onClick:e[17]||(e[17]=s=>U.value=!U.value)},[n("div",{class:"w-full h-7 rounded border",style:xe({background:E.value.background})},null,4),n("span",aa,re(E.value.background),1)]),U.value?(c(),y("div",oa,[n("div",na,[(c(),y(se,null,ot(Be,s=>n("button",{key:s,class:"w-5 h-5 rounded border",style:xe({background:s}),onClick:g=>{oe("bg_color",{target:{value:s}}),U.value=!1}},null,12,sa)),64))]),n("div",ia,[n("input",{type:"color",value:E.value.background,class:"w-8 h-8 cursor-pointer",onInput:e[18]||(e[18]=s=>oe("bg_color",s))},null,40,ra),n("input",{type:"text",class:"flex-1 text-xs border rounded px-2 py-1",value:E.value.background,readonly:""},null,8,da)])])):m("",!0)]),n("div",ua,[e[50]||(e[50]=n("label",{class:"block text-xs text-secondary mb-1"},"Text",-1)),n("div",{class:"flex items-center gap-2 cursor-pointer",onClick:e[19]||(e[19]=s=>O.value=!O.value)},[n("div",{class:"w-full h-7 rounded border",style:xe({background:E.value.color})},null,4),n("span",ca,re(E.value.color),1)]),O.value?(c(),y("div",va,[n("div",pa,[(c(),y(se,null,ot(Be,s=>n("button",{key:s,class:"w-5 h-5 rounded border",style:xe({background:s}),onClick:g=>{oe("color",{target:{value:s}}),O.value=!1}},null,12,fa)),64))]),n("div",ba,[n("input",{type:"color",value:E.value.color,class:"w-8 h-8 cursor-pointer",onInput:e[20]||(e[20]=s=>oe("color",s))},null,40,ma),n("input",{type:"text",class:"flex-1 text-xs border rounded px-2 py-1",value:E.value.color,readonly:""},null,8,ga)])])):m("",!0)])]),n("div",null,[n("div",ya,[n("div",null,[e[53]||(e[53]=n("label",{class:"block text-xs text-secondary mb-1"},"Weight",-1)),n("select",{class:"w-full h-8 border rounded px-2 text-sm",value:E.value.fontWeight,onChange:e[21]||(e[21]=s=>oe("font_weight",s))},e[52]||(e[52]=[n("option",{value:"lighter"},"Light",-1),n("option",{value:"normal"},"Normal",-1),n("option",{value:"bold"},"Bold",-1),n("option",{value:"bolder"},"Extra Bold",-1)]),40,_a)])])])]),n("div",xa,[n("button",{class:"w-full cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium hover:shadow-md disabled:opacity-60",disabled:K.value,onClick:Qe},[K.value?(c(),y("span",ha)):m("",!0),n("span",null,re(K.value?"Updating...":"Update"),1)],8,ka)])])):m("",!0)]),be.value?(c(),y("div",wa,[n("div",Ca,[e[54]||(e[54]=n("h3",{class:"text-lg font-semibold mb-4"},"Insert Web Link",-1)),Pe(n("input",{"onUpdate:modelValue":e[22]||(e[22]=s=>P.value=s),type:"text",placeholder:"Enter or paste a URL",class:"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Sl,P.value]]),n("div",Sa,[n("button",{onClick:gt,class:"px-4 py-2 rounded-md bg-gray-200 hover:bg-gray-300"}," Cancel "),n("button",{disabled:!P.value,onClick:mt,class:I(["px-4 py-2 rounded-md text-white",P.value?"bg-blue-500 hover:bg-blue-600":"bg-blue-300 cursor-not-allowed"])}," Insert ",10,Va)])])])):m("",!0),ee.value?(c(),y("div",{key:1,class:"absolute top-40 left-70 bg-bg-body rounded-lg p-4 shadow-lg z-100 min-w-[328px] border",onClick:e[24]||(e[24]=ie(()=>{},["stop"]))},[h(lt,{autofocus:!0,modelValue:R.value,"onUpdate:modelValue":e[23]||(e[23]=s=>R.value=s),placeholder:"Add New list",onKeyup:tt(_e,["enter"])},null,8,["modelValue"]),e[55]||(e[55]=n("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),n("div",Da,[h(at,{onClick:_e,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:H(()=>[ke(re(u(Ee)?"Adding...":"Add list"),1)]),_:1}),n("i",{class:"fa-solid fa-close cursor-pointer",onClick:Ie})])])):m("",!0)],64)):m("",!0),p.value==="calendar"?(c(),F(zl,{key:3,data:le.value,"onSelect:ticket":L},null,8,["data"])):m("",!0),p.value==="gantt"?(c(),F(Bl,{key:4,data:le.value,"onSelect:ticket":L},null,8,["data"])):m("",!0),p.value==="timeline"?(c(),F($l,{key:5,data:le.value,"onSelect:ticket":L},null,8,["data"])):m("",!0)]),h(u(De),{onClick:e[25]||(e[25]=ie(()=>{},["stop"])),modelValue:W.value,"onUpdate:modelValue":e[26]||(e[26]=s=>W.value=s),title:"Delete List",itemLabel:"list",itemName:(l=z.value)==null?void 0:l.title,requireMatchText:(a=z.value)==null?void 0:a.title,confirmText:"Delete List",cancelText:"Cancel",size:"md",loading:u(Ee),onConfirm:Mt,onCancel:e[27]||(e[27]=()=>{W.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),fe.value?(c(),F(u(wt),{selectedVariable:k.value,listId:(o=z.value)==null?void 0:o.title,sheet_id:x.value,key:"createTaskModalKey",modelValue:fe.value,"onUpdate:modelValue":e[28]||(e[28]=s=>fe.value=s),onSubmit:e[29]||(e[29]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):m("",!0),(v=Z.value)!=null&&v._id?(c(),F(u(Vt),{key:1,details:Z.value,onClose:e[30]||(e[30]=()=>{L({variables:{}})}),showPanel:!!((f=Z.value)!=null&&f._id)},null,8,["details","showPanel"])):m("",!0),h(u(Ct),{size:"md",sheet:B.value,modelValue:X.value,"onUpdate:modelValue":e[31]||(e[31]=s=>X.value=s)},null,8,["sheet","modelValue"]),J.value?(c(),F(u(St),{key:2,modelValue:J.value,"onUpdate:modelValue":e[32]||(e[32]=s=>J.value=s),sheetID:x.value},null,8,["modelValue","sheetID"])):m("",!0),h(u(De),{onClick:e[33]||(e[33]=ie(()=>{},["stop"])),modelValue:G.value,"onUpdate:modelValue":e[34]||(e[34]=s=>G.value=s),title:"Delete Sheet",itemLabel:"Sheet",itemName:(d=B.value)==null?void 0:d.title,requireMatchText:(i=B.value)==null?void 0:i.title,confirmText:"Delete Sheet",cancelText:"Cancel",size:"md",loading:u($t),onConfirm:Ut,onCancel:e[35]||(e[35]=()=>{G.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),h(u(De),{modelValue:ve.value,"onUpdate:modelValue":e[36]||(e[36]=s=>ve.value=s),title:"Delete Ticket",itemLabel:"Ticket",itemName:(C=ce.value)==null?void 0:C.title,requireMatchText:($=ce.value)==null?void 0:$.title,confirmText:"Delete Ticket",cancelText:"Cancel",size:"md",loading:we.value,onConfirm:kt,onCancel:e[37]||(e[37]=()=>{ve.value=!1,ce.value=null})},null,8,["modelValue","itemName","requireMatchText","loading"]),e[56]||(e[56]=n("div",null,null,-1))],64)}}}),Ua=Ll(Ta,[["__scopeId","data-v-2d086092"]]);export{Ua as default};
