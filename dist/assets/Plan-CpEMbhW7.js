const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-B5iTV7oF.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-CBnunOdV.js","assets/index-CvqJivzk.js","assets/index-BoW5koMG.css","assets/ConfirmDeleteModal-B6LCr5DZ.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-qPzCEzNp.js","assets/SidePanel-Ed7NJK64.js","assets/sidePanelStore-oB2i4n84.js","assets/SidePanel-Dd1w9Imr.css","assets/KanbanBoard-BoIL9cg9.js","assets/vuedraggable.umd-BLtR3DhK.js","assets/_commonjsHelpers-_d1bhYXs.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-DI3MbRKz.js","assets/index-Sa3RgxgY.js","assets/KanbanBoard-Dffh696C.css","assets/TableSearchCell-Bb8DNEFQ.js","assets/TableAssigneeCell-4KP0DgAH.js","assets/CalendarView-DEEZyl2_.js","assets/CalendarView-DsU6_g0u.css","assets/GanttChartView-DImAa0yK.js","assets/TimelineView-C_CGlAxX.js","assets/TimelineView-BsFP6voT.css","assets/BaseTextField-BfXXzbA1.js"])))=>i.map(i=>d[i]);
import{R as vt,S as Et,q as f,T as Ce,c as D,r as b,p as z,L as ft,U as rt,d as mt,V as Gt,W as ml,X as Ul,j as g,f as t,h as Ie,A as ee,i as q,F as De,z as Be,o as p,t as L,Q as gl,K as Jt,g as re,e as ye,w as ce,Y as bl,_ as yl,B as Ye,J as fl,k as B,Z as Kt,E as nt,P as xl,O as _l,N as jl,$ as zl,a0 as Fl,a1 as Rl,a2 as Hl,a3 as Wl,G as Qt,a4 as Jl,a5 as Zl,a6 as Xl,u as Yl,a7 as ea,a8 as ta,a9 as la,aa,ab as sa,ac as Se,ad as na,ae as Me,af as ra,ag as oa,ah as ke,ai as Wt,v as ia,aj as El,ak as da,C as Ae,al as Ml,am as ua,an as ca,x as Al,ao as pa,ap as Il,aq as fa}from"./index-CvqJivzk.js";import{L as va}from"./Loader-Cvfs7PxD.js";import{_ as ma}from"./BaseTextAreaField.vue_vue_type_script_setup_true_lang-DBNDQnuw.js";import{_ as ga}from"./SearchBar.vue_vue_type_script_setup_true_lang-epnNA8kr.js";import{_ as ba}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-qPzCEzNp.js";import{_ as ya}from"./TableView.vue_vue_type_script_setup_true_lang-Bhmwspnm.js";import{k as Lt}from"./MindElixir-Ch35iPok.js";import Kl from"./KanbanSkeleton-DuIwsYy0.js";import xa from"./KanbanTicket-DmASn1uz.js";import{F as Bl}from"./fuse-Ch1WBRTM.js";import{l as _a}from"./lodash-CQYOKM_D.js";import{o as Rt}from"./index-Sa3RgxgY.js";import"./favicon-BAFXWHLW.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-DI3MbRKz.js";import"./_commonjsHelpers-_d1bhYXs.js";const ha="data:image/svg+xml,%3csvg%20width='60'%20height='46'%20viewBox='0%200%2060%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M59.7443%2034.8967L50.5682%2025.7206C50.4457%2025.5984%2050.2897%2025.5152%2050.1199%2025.4816C49.9501%2025.4479%2049.7742%2025.4653%2049.6143%2025.5315C49.4544%2025.5976%2049.3176%2025.7097%2049.2213%2025.8535C49.125%2025.9973%2049.0734%2026.1664%2049.073%2026.3394V30.517H25.9775V40.5114H49.0755V44.689C49.0759%2044.8621%2049.1275%2045.0312%2049.2238%2045.175C49.3201%2045.3187%2049.4569%2045.4308%2049.6168%2045.497C49.7767%2045.5632%2049.9527%2045.5805%2050.1224%2045.5468C50.2922%2045.5132%2050.4482%2045.43%2050.5708%2045.3078L59.7468%2036.1318C59.9095%2035.9672%2060.0005%2035.7451%2060.0001%2035.5137C59.9996%2035.2823%2059.9076%2035.0605%2059.7443%2034.8967Z'%20fill='%23C6DBA9'/%3e%3cpath%20d='M32.3149%2030.5293C30.664%2031.5967%2028.7394%2032.1633%2026.7734%2032.1609V40.5237H34.7295C39.2829%2038.5638%2042.9649%2035.0102%2045.0851%2030.5293H32.3149Z'%20fill='url(%23paint0_linear_250_16424)'/%3e%3cpath%20d='M46.2209%2020.2832C46.2317%2015.0884%2044.2448%2010.0884%2040.6714%206.3179C37.0981%202.54738%2032.2119%200.295026%2027.024%200.0269855C21.8362%20-0.241055%2016.7439%201.49574%2012.801%204.87791C8.85809%208.26009%206.36647%2013.0287%205.84178%2018.1969L2.46233%2017.8913C2.31055%2017.8782%202.15829%2017.9103%202.02467%2017.9835C1.89106%2018.0566%201.78205%2018.1677%201.71134%2018.3026C1.64063%2018.4376%201.61138%2018.5904%201.62726%2018.7419C1.64313%2018.8934%201.70343%2019.0368%201.80058%2019.1542L9.51927%2028.406C9.79205%2028.7344%2010.277%2028.7773%2010.378%2028.5045L19.6298%2020.7833C20.3876%2020.3413%2020.1173%2019.4825%2019.4328%2019.4194L15.8008%2019.091C16.0297%2017.1283%2016.8213%2015.2735%2018.0802%2013.7503C19.3391%2012.2271%2021.0115%2011.1004%2022.8961%2010.5059C24.7806%209.9114%2026.7969%209.8745%2028.7019%2010.3996C30.6069%2010.9248%2032.3195%2011.9896%2033.6332%2013.4657C34.947%2014.9419%2035.8059%2016.7664%2036.1065%2018.7195C36.4071%2020.6726%2036.1365%2022.6709%2035.3274%2024.4738C34.5183%2026.2766%2033.2051%2027.8071%2031.5462%2028.8807C29.8872%2029.9544%2027.9531%2030.5254%2025.977%2030.5251H25.9283V40.5094C31.2249%2040.4031%2036.7093%2038.2263%2040.4202%2034.4455C44.1311%2030.6648%2046.2134%2025.5808%2046.2209%2020.2832Z'%20fill='%23D7A39E'/%3e%3cpath%20d='M25.9773%2030.5293H0V40.5237H25.9773V30.5293Z'%20fill='url(%23paint1_linear_250_16424)'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_250_16424'%20x1='6.53714'%20y1='35.5252'%20x2='47.0198'%20y2='35.5252'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%236C798F'/%3e%3cstop%20offset='1'%20stop-color='%236C798F'%20stop-opacity='0.1'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_250_16424'%20x1='0'%20y1='36'%20x2='26'%20y2='36'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23E8D4D3'%20stop-opacity='0'/%3e%3cstop%20offset='1'%20stop-color='%23E2A39F'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",ka=(h,y,N={})=>Et({queryKey:D(()=>["sprint-list",f(h),f(y)]),queryFn:({signal:T})=>Ce({url:`sprints/${f(h)}`,method:"GET",signal:T,params:{sprintType:f(y)}}),...N}),wa=(h,y={})=>{const N=D(()=>!!f(h));return Et({queryKey:["sprint-cards",h],queryFn:({signal:T})=>Ce({url:`sprints/${f(h)}/backlog`,method:"GET",signal:T}),enabled:N,...y})},Sa=(h,y={})=>Et({queryKey:["sprint-kanban",h],queryFn:({signal:N})=>Ce({url:"workspace/cards/sprintgrouped",method:"GET",signal:N,params:{sprint_id:f(h),variable_id:"68b6c96e0a95eef7d14e6981"}}),...y}),Ca=(h,y={})=>vt({key:["sprint-complete"]},{mutationFn:N=>Ce({url:`sprints/${f(h)}/complete`,method:"POST",data:N.payload}),...y}),$a=(h,y={})=>{const N=D(()=>!!f(h));return Et({queryKey:["sprint-detail",h],queryFn:({signal:T})=>Ce({url:`sprints/detail/${f(h)}?include_cards=true`,method:"GET",signal:T}),enabled:N,...y})},vl=(h,y,N=null,T={})=>Et({queryKey:["backlog-list",h,f(y),f(N)],queryFn:({signal:Z})=>Ce({url:`sprints/workspace/${f(h)}/cards`,method:"GET",signal:Z,params:{include_sprint_cards:!1,sprintType:f(y),module_id:f(N)}}),...T}),Ta=(h={})=>vt({key:["add-sprint"]},{mutationFn:y=>Ce({url:"/sprints",method:"POST",data:y.payload}),...h}),Ql=(h={})=>vt({key:["move-card-to-sprint"]},{mutationFn:y=>Ce({url:`/sprints/${y.id}/cards`,method:"POST",data:y.payload}),...h}),Ol=(h={})=>vt({key:["add-sprint"]},{mutationFn:y=>Ce({url:`/sprints/${y.id}`,method:"PUT",data:y.payload}),...h}),Da=(h={})=>vt({key:["start-sprint"]},{mutationFn:y=>Ce({url:`/sprints/${y.id}/start`,method:"POST",data:y.payload}),...h}),Va=(h={})=>vt({key:["delete-sprint"]},{mutationFn:y=>Ce({url:`/sprints/${y}`,method:"DELETE"}),...h}),La=(h={})=>vt({key:["remove-card-from-sprint"]},{mutationFn:y=>Ce({url:`sprints/${f(y.sprintId)}/cards/remove `,method:"POST",data:{card_ids:[y.cardId]}}),...h}),Gl="jira-like:";function Nl(h="id"){return`${h}_${Math.random().toString(36).slice(2,9)}`}function Pl(h,y){try{localStorage.setItem(Gl+h,JSON.stringify(y))}catch{}}function ql(h,y){try{const N=localStorage.getItem(Gl+h);return N?JSON.parse(N):y}catch{return y}}function Ea(h){switch(h){case"Highest":return"rounded-md bg-red-50 px-2 py-0.5 text-xs text-red-700";case"High":return"rounded-md bg-orange-50 px-2 py-0.5 text-xs text-orange-700";case"Medium":return"rounded-md bg-amber-50 px-2 py-0.5 text-xs text-amber-700";case"Low":return"rounded-md bg-gray-100 px-2 py-0.5 text-xs text-gray-600"}}function Ma(){const h=b(ql("backlog",[])),y=b(ql("sprints",[]));if(y.value.length===0)y.value.push({id:Nl("sprint"),name:"Sprint 1",goal:"",start:"",end:"",started:!1,tickets:[]});else if(y.value.length>1){for(let m=1;m<y.value.length;m++)h.value.push(...y.value[m].tickets);y.value=[y.value[0]]}const N=b(y.value[0].id);z([h,y],()=>{Pl("backlog",h.value),Pl("sprints",y.value)},{deep:!0});const T=b([]),Z=ft({}),P=D(()=>h.value.length>0&&T.value.length===h.value.length),d=m=>{var r;const v=y.value.find(n=>n.id===m);return!!v&&v.tickets.length>0&&(((r=Z[m])==null?void 0:r.length)||0)===v.tickets.length};function F(m,v,r){const n=v.target.checked;if(m==="backlog")T.value=n?h.value.map(u=>u.id):[];else if(r){const u=y.value.find(k=>k.id===r);Z[r]=n&&u?u.tickets.map(k=>k.id):[]}}function W(m,v,r,n){const u=r.target.checked,k=m==="backlog"?T.value:Z[n]||(Z[n]=[]);if(u&&!k.includes(v)&&k.push(v),!u){const ae=k.indexOf(v);ae>=0&&k.splice(ae,1)}}function X(){return y.value.find(m=>m.id===N.value)||y.value[0]}function K(){const v=[...h.value,...y.value.flatMap(n=>n.tickets)].map(n=>Number(String(n.key).replace(/[^0-9]/g,""))).filter(n=>!Number.isNaN(n));return`PRJ-${v.length?Math.max(...v)+1:1}`}const{mutate:A}=Ql({onSuccess:()=>{rt.success("Cards moved to sprint successfully")},onError:m=>{rt.error("Failed to move cards: "+(m.message||"Unknown error"))}});function Y(){var n,u;const m=X();if(!m||!T.value.length)return;const v=[],r=[];for(const k of h.value)(T.value.includes(k.id)?r:v).push(k);h.value=v,m.tickets.push(...r),T.value=[],r.length>0&&A({id:m.id,payload:{card_ids:r.map(k=>k.id),priority:((u=(n=r[0])==null?void 0:n.priority)==null?void 0:u.toLowerCase())||"medium",story_points:r.reduce((k,ae)=>k+(ae.storyPoints||0),0)}})}function Q(m){const v=y.value.find(k=>k.id===m);if(!v)return;const r=Z[m]||[],n=[],u=[];for(const k of v.tickets)(r.includes(k.id)?u:n).push(k);v.tickets=n,h.value.push(...u),Z[m]=[]}function ie(m,v){if(m==="backlog")h.value=h.value.filter(r=>!T.value.includes(r.id)),T.value=[];else if(v){const r=Z[v]||[],n=y.value.find(u=>u.id===v);if(!n)return;n.tickets=n.tickets.filter(u=>!r.includes(u.id)),Z[v]=[]}}function U(m,v){const r={id:Nl("T"),key:K(),createdAt:new Date().toISOString(),...v};if(m==="backlog")h.value.push(r);else{const n=X();n==null||n.tickets.push(r)}}function R(m){const v=X();v&&(v.name=m.name??v.name,v.goal=m.goal??v.goal,v.start=m.start??v.start,v.end=m.end??v.end)}function I(){const m=X();m&&(m.started=!m.started)}function x(m){return m.tickets.reduce((v,r)=>v+(r.storyPoints||0),0)}return{backlog:h,sprints:y,activeSprintId:N,selectedBacklogIds:T,selectedSprintIds:Z,allBacklogChecked:P,allSprintChecked:d,toggleAll:F,toggleOne:W,getActiveSprint:X,createTicket:U,saveSprintMeta:R,toggleStartSprint:I,sprintPoints:x,moveSelectedToSprint:Y,moveSelectedToBacklog:Q,deleteSelected:ie,priorityClass:Ea}}const Aa={class:"h-full min-h-0 mt-2 overflow-y-hidden"},Ia={key:0,class:"empty-state flex flex-col justify-center items-center h-full"},Ba=["disabled"],Oa={key:1,class:"overflow-y-auto h-[calc(100%-50px)]"},Na={class:"flex flex-col flex-1 gap-[4px] min-w-0 me-1"},Pa={key:0,class:"flex items-center justify-center py-10"},qa=["onDragstart","onClick"],Ua=["checked","onChange"],ja={class:"flex items-center text-[14px] font-sans font-medium capitalize text-text-secondary flex-1 min-w-0"},za={class:"truncate"},Fa={class:"flex-shrink-0"},Ra={key:0,class:"flex justify-center text-gray-500 items-center text-[11px] aspect-square w-[24px] h-[24px] bg-bg-body rounded-full border-border-input border-2"},Ha={key:1,class:"w-6 h-6 rounded-full"},Wa=["src"],Ka={key:2,class:"text-[11px] aspect-square w-[24px] h-[24px] flex justify-center items-center bg-accent/30 text-accent border-accent border rounded-full"},Qa=mt({__name:"BacklogTable",props:{searchQuery:{type:String,default:""},sprintType:{type:String,default:""},checkedAll:{type:Boolean,default:!1},moduleId:{type:String,default:""}},emits:["ticket-dragged-to-sprint","open-ticket","ticket-moved-to-backlog","open-create-ticket"],setup(h,{emit:y}){const{isDark:N}=Gt(),{canCreateCard:T}=ml(),Z=y,P=h,{workspaceId:d}=Ul(),F=b(P.moduleId??null),{data:W,isPending:X}=vl(d,P.sprintType,F),K=b([]),A=b(!1),Y=b([]),Q=b([]);z(W,r=>{r!=null&&r.cards&&(K.value=r.cards.map(n=>{var _,O,ge,te;const u=((_=n.card)==null?void 0:_.variables)??{},k=((O=n.card)==null?void 0:O._id)??n.card_id,ae=String(u["card-status"]??"").trim(),se=String(u.priority??"").trim();return{id:k,key:u["card-code"]||(k==null?void 0:k.slice(-6))||"PRJ-?",summary:u["card-title"]||"(untitled)",type:"Story",status:ae,assignee:((ge=n.card)==null?void 0:ge.assigned_to)??"Unassigned",storyPoints:Number(n.story_points??0)||0,priority:U(se),createdAt:((te=n.card)==null?void 0:te.created_at)??new Date().toISOString(),description:u["card-description"]||""}}))},{immediate:!0}),z(K,r=>{const n=new Set(r.map(u=>u.id));Q.value=Q.value.filter(u=>n.has(u))});const ie=D(()=>{if(console.log(P.searchQuery,"this is query"),!P.searchQuery)return K.value;const r=P.searchQuery.toLowerCase();return K.value.filter(n=>{var k;const u=typeof n.assignee=="string"?n.assignee:((k=n.assignee)==null?void 0:k.u_full_name)||"";return n.key.toLowerCase().includes(r)||n.summary.toLowerCase().includes(r)||u.toLowerCase().includes(r)})});function U(r){const n=String(r??"").toLowerCase();return["highest","blocker","critical"].includes(n)?"Highest":["high","major"].includes(n)?"High":["medium","normal"].includes(n)?"Medium":"Low"}function R(r,n,u){var _;const k=Q.value.includes(n.id)?[...Q.value]:[n.id],ae=k.map(O=>K.value.find(ge=>ge.id===O)).filter(Boolean);Y.value=k;const se=JSON.stringify({id:n.id,ids:k,from:u,tickets:ae});(_=r.dataTransfer)==null||_.setData("text/plain",se),r.dataTransfer&&(r.dataTransfer.effectAllowed="move")}function I(r){var n;A.value=!1,((n=r.dataTransfer)==null?void 0:n.dropEffect)!=="none"&&Y.value.length&&(K.value=K.value.filter(u=>!Y.value.includes(u.id)),Q.value=Q.value.filter(u=>!Y.value.includes(u))),Y.value=[]}function x(r){var n;r.preventDefault(),A.value=!1;try{const u=(n=r.dataTransfer)==null?void 0:n.getData("text/plain");if(!u)return;const k=JSON.parse(u);if(k.from!=="sprint")return;const se=(k.tickets&&k.tickets.length?k.tickets:k.ticket?[k.ticket]:[]).filter(Boolean).filter(O=>!K.value.some(ge=>ge.id===O.id));se.length&&K.value.push(...se);const _=k.ids&&k.ids.length?k.ids:k.id?[k.id]:[];_.length&&Z("ticket-moved-to-backlog",_,k.sprintId),console.log(k.sprintId,"sprintId ....")}catch(u){console.error("Drop error:",u)}}function m(r,n){n?Q.value.includes(r)||Q.value.push(r):Q.value=Q.value.filter(u=>u!==r)}function v(r,n){const u=n.target.checked;m(r,u)}return z(()=>P.checkedAll,r=>{r?(Q.value=K.value.map(n=>n.id),console.log(Q.value)):Q.value=[]}),(r,n)=>(p(),g("section",Aa,[t("div",{class:ee(["rounded-lg flex flex-col h-full",A.value?"ring-2 ring-blue-400":""]),onDragover:n[3]||(n[3]=Ie(()=>{},["prevent"])),onDragenter:n[4]||(n[4]=u=>A.value=!0),onDragleave:n[5]||(n[5]=u=>A.value=!1),onDrop:n[6]||(n[6]=u=>x(u))},[!f(X)&&ie.value.length===0?(p(),g("div",Ia,[n[7]||(n[7]=t("img",{src:ha,class:"mb-4",alt:"backlog-plan"},null,-1)),n[8]||(n[8]=t("h6",{class:"text-sm text-text-primary font-semibold mb-1"}," Get started in the backlog ",-1)),n[9]||(n[9]=t("p",{class:"text-sm text-text-primary/90 mb-4"}," Plan and start a sprint to see issues here. ",-1)),t("button",{disabled:!f(T),onClick:n[0]||(n[0]=u=>r.$emit("open-create-ticket")),class:ee(["relative inline-flex items-center justify-center font-medium py-1.5 px-3 text-sm rounded-md focus:outline-none transition h-[34px] bg-accent text-white hover:bg-accent-hover border-border-input border",f(T)?"cursor-pointer":"cursor-not-allowed"])}," Create Ticket ",10,Ba)])):(p(),g("div",Oa,[t("div",Na,[f(X)?(p(),g("div",Pa,[q(va)])):(p(!0),g(De,{key:1},Be(ie.value,u=>{var k,ae;return p(),g("div",{key:u.id,draggable:"true",class:ee(["flex items-center gap-3 p-[8px] cursor-pointer transition-colors rounded-[8px]",Q.value.includes(u.id)?"border-2 border-[#5a2d7f]":"border border-border-input",f(N)?"bg-bg-body hover:bg-bg-surface":"bg-bg-charcoal hover:bg-bg-body"]),onDragstart:se=>R(se,u,"backlog"),onDragend:n[2]||(n[2]=se=>I(se)),onClick:se=>r.$emit("open-ticket",u)},[t("input",{type:"checkbox",class:"custom-checkbox bg-bg-body border border-border-input flex-shrink-0",checked:Q.value.includes(u.id),onClick:n[1]||(n[1]=Ie(()=>{},["stop"])),onChange:se=>v(u.id,se)},null,40,Ua),t("div",ja,[t("span",za,L(u.summary),1)]),t("div",Fa,[(u==null?void 0:u.assignee)==="Unassigned"?(p(),g("span",Ra," UA ")):(k=u==null?void 0:u.assignee)!=null&&k.u_profile_image?(p(),g("div",Ha,[t("img",{src:u.assignee.u_profile_image,alt:""},null,8,Wa)])):(p(),g("span",Ka,L(f(gl)((ae=u==null?void 0:u.assignee)==null?void 0:ae.u_full_name)),1))])],42,qa)}),128))])]))],34)]))}}),Ga=Jt(Qa,[["__scopeId","data-v-cd65d75f"]]),Ja="data:image/svg+xml,%3csvg%20width='60'%20height='60'%20viewBox='0%200%2060%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M9.375%2030C11.6402%2030%2013.4766%2028.1637%2013.4766%2025.8984C13.4766%2023.6332%2011.6402%2021.7969%209.375%2021.7969C7.10977%2021.7969%205.27344%2023.6332%205.27344%2025.8984C5.27344%2028.1637%207.10977%2030%209.375%2030Z'%20fill='%23AE2A19'/%3e%3cpath%20d='M26.25%2024.375C28.5152%2024.375%2030.3516%2022.5387%2030.3516%2020.2734C30.3516%2018.0082%2028.5152%2016.1719%2026.25%2016.1719C23.9848%2016.1719%2022.1484%2018.0082%2022.1484%2020.2734C22.1484%2022.5387%2023.9848%2024.375%2026.25%2024.375Z'%20fill='%23BF63F3'/%3e%3cpath%20d='M15.3931%2035.8594H11.0159V33.0938C9.93587%2033.3387%208.81469%2033.3387%207.73465%2033.0938V35.8594H1.87528C1.55115%2035.8601%201.2345%2035.9568%200.965283%2036.1373C0.696064%2036.3178%200.486343%2036.574%200.362583%2036.8736C0.238824%2037.1731%200.206573%2037.5027%200.269899%2037.8205C0.333226%2038.1384%200.489292%2038.4304%200.718404%2038.6597L7.05872%2045L0.718404%2051.3403C0.489292%2051.5696%200.333226%2051.8616%200.269899%2052.1795C0.206573%2052.4973%200.238824%2052.8269%200.362583%2053.1264C0.486343%2053.426%200.696064%2053.6822%200.965283%2053.8627C1.2345%2054.0432%201.55115%2054.1399%201.87528%2054.1406H15.3931L21.7503%2045L15.3931%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M34.4562%2035.8594H27.8937V27.4688C26.8137%2027.7138%2025.6925%2027.7138%2024.6125%2027.4688V35.8594H19.3896L25.7487%2045L19.3896%2054.1406H34.4562L40.8143%2045L34.4562%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M43.8281%2019.6875H55.3125C55.7475%2019.6873%2056.1647%2019.5143%2056.4723%2019.2067C56.7799%2018.8991%2056.9529%2018.4819%2056.9531%2018.0469V9.375C56.9529%208.93996%2056.7799%208.5228%2056.4723%208.21518C56.1647%207.90755%2055.7475%207.73462%2055.3125%207.73438H43.8281V7.5C43.8281%207.06488%2043.6553%206.64758%2043.3476%206.3399C43.0399%206.03223%2042.6226%205.85938%2042.1875%205.85938C41.7524%205.85938%2041.3351%206.03223%2041.0274%206.3399C40.7197%206.64758%2040.5469%207.06488%2040.5469%207.5V32.5781H43.8281V19.6875Z'%20fill='%23FCA700'/%3e%3cpath%20d='M59.2843%2043.8403L51.7843%2036.3403C51.6322%2036.1878%2051.4514%2036.0668%2051.2524%2035.9842C51.0534%2035.9017%2050.8401%2035.8593%2050.6246%2035.8594H38.4521L44.8121%2045L38.4531%2054.1406H50.6246C50.8401%2054.1407%2051.0534%2054.0983%2051.2524%2054.0158C51.4514%2053.9332%2051.6322%2053.8122%2051.7843%2053.6597L59.2843%2046.1597C59.4368%2046.0075%2059.5577%2045.8267%2059.6402%2045.6277C59.7228%2045.4287%2059.7652%2045.2154%2059.7652%2045C59.7652%2044.7846%2059.7228%2044.5713%2059.6402%2044.3723C59.5577%2044.1733%2059.4368%2043.9925%2059.2843%2043.8403Z'%20fill='%2382B536'/%3e%3c/g%3e%3c/svg%3e",Za={class:"h-full min-h-0 px-2"},Xa={key:0,class:"overflow-y-auto h-[calc(100%-50px)]"},Ya={class:"flex flex-col flex-1 gap-[4px] min-w-0 me-1"},es=["onDragstart","onClick"],ts=["checked","onChange"],ls={class:"flex items-center text-[14px] font-sans font-medium capitalize text-text-secondary flex-1 min-w-0"},as={class:"truncate"},ss={class:"flex-shrink-0"},ns={key:0,class:"flex justify-center text-gray-500 items-center text-[11px] aspect-square w-[24px] h-[24px] bg-bg-body rounded-full border-border-input border-2"},rs={key:1,class:"w-6 h-6 rounded-full"},os=["src"],is={key:2,class:"text-[11px] aspect-square w-[24px] flex justify-center items-center h-[24px] bg-accent/30 text-accent border-accent border rounded-full"},ds={key:1,class:"empty-state flex flex-col justify-center items-center border-dashed border-3 p-2 border-border h-[calc(100%-50px)] min-h-0"},us={class:"text-sm text-text-primary font-semibold mb-1 text-center"},cs={class:"text-sm text-text-primary/90 mb-3 max-w-120 text-center"},ps={class:"font-bold"},fs=mt({__name:"SprintCard",props:{sprint:{},sprintId:{},searchQuery:{},checkedSprintAll:{type:Boolean},searchedData:{},label:{}},emits:["edit-sprint","toggle-start","open-ticket","move-selected-to-backlog","delete-selected-sprint","refresh"],setup(h,{emit:y}){const{isDark:N}=Gt(),T=h,Z=y,P=b([]),d=b([]);z(()=>T.sprint&&T.sprint.tickets,x=>{P.value=[...x||[]];const m=new Set(P.value.map(v=>v.id));d.value=d.value.filter(v=>m.has(v))},{immediate:!0,deep:!0});const F=D(()=>{var m,v;if((m=T.searchedData)!=null&&m.length)return P.value.filter(r=>T.searchedData.some(n=>n.card_id===r.id));const x=((v=T.searchQuery)==null?void 0:v.toLowerCase())||"";return x?P.value.filter(r=>{var u;const n=((u=r.assignee)==null?void 0:u.u_full_name)??"";return r.key.toLowerCase().includes(x)||r.summary.toLowerCase().includes(x)||n.toLowerCase().includes(x)}):P.value}),W=b(!1),X=b([]),{mutate:K}=Ql({onSuccess:()=>{rt.success("Card moved to sprint successfully"),Z("refresh")},onError:x=>{rt.error("Failed to move card: "+(x.message||"Unknown error"))}});function A(x,m,v,r){var ae;const n=d.value.includes(m.id)?[...d.value]:[m.id],u=n.map(se=>P.value.find(_=>_.id===se)).filter(Boolean);X.value=n;const k=JSON.stringify({id:m.id,ids:n,from:v,sprintId:r,ticket:m,tickets:u});(ae=x.dataTransfer)==null||ae.setData("text/plain",k),x.dataTransfer&&(x.dataTransfer.effectAllowed="move")}function Y(x){var m;W.value=!1,((m=x.dataTransfer)==null?void 0:m.dropEffect)!=="none"&&X.value.length&&(P.value=P.value.filter(v=>!X.value.includes(v.id)),d.value=d.value.filter(v=>!X.value.includes(v))),X.value=[]}function Q(){W.value=!0}function ie(){W.value=!1}function U(x){var m;x.preventDefault(),W.value=!1;try{const v=(m=x.dataTransfer)==null?void 0:m.getData("text/plain");if(!v)return;const r=JSON.parse(v);if(r.from!=="backlog")return;const u=(r.tickets&&r.tickets.length?r.tickets:r.ticket?[r.ticket]:[]).filter(Boolean).filter(k=>!P.value.some(ae=>ae.id===k.id));if(!u.length)return;P.value.push(...u),u.forEach(k=>{K({id:T.sprintId,payload:{card_ids:[k.id],priority:(k.priority||"Medium").toLowerCase(),story_points:k.storyPoints||0}})})}catch(v){console.error("Drop error:",v)}}function R(x,m){m?d.value.includes(x)||d.value.push(x):d.value=d.value.filter(v=>v!==x)}function I(x,m){const v=m.target.checked;R(x,v)}return z(()=>T.checkedSprintAll,x=>{x?(d.value=F.value.map(m=>m.id),console.log(F.value)):d.value=[]}),(x,m)=>(p(),g("div",Za,[t("div",{class:ee([W.value?"ring-2 ring-blue-400 rounded-lg":"","h-full box-border mt-3"]),onDragover:m[2]||(m[2]=Ie(()=>{},["prevent"])),onDragenter:Q,onDragleave:ie,onDrop:U},[F.value.length>0&&x.sprint?(p(),g("div",Xa,[t("div",Ya,[(p(!0),g(De,null,Be(F.value,v=>{var r,n;return p(),g("div",{key:v.id,draggable:"true",class:ee(["flex items-center  gap-3 p-[8px] cursor-pointer transition-colors rounded-[8px]",d.value.includes(v.id)?"border-2 border-[#5a2d7f]":"border border-border-input",f(N)?"bg-bg-body hover:bg-bg-surface":"bg-bg-charcoal hover:bg-bg-body"]),onDragstart:u=>A(u,v,"sprint",x.sprint.id),onDragend:m[1]||(m[1]=u=>Y(u)),onClick:u=>x.$emit("open-ticket",v)},[t("input",{type:"checkbox",class:ee(["custom-checkbox border border-border-input flex-shrink-0",f(N)?"bg-bg-charcoal":"bg-bg-body "]),checked:d.value.includes(v.id),onClick:m[0]||(m[0]=Ie(()=>{},["stop"])),onChange:u=>I(v.id,u)},null,42,ts),t("div",ls,[t("span",as,L(v.summary),1)]),t("div",ss,[(v==null?void 0:v.assignee)=="Unassigned"?(p(),g("span",ns,"UA")):(r=v.assignee)!=null&&r.u_profile_image?(p(),g("div",rs,[t("img",{src:v.assignee.u_profile_image,alt:""},null,8,os)])):(p(),g("span",is,L(f(gl)(((n=v.assignee)==null?void 0:n.u_full_name)??"")),1))])],42,es)}),128))])])):(p(),g("div",ds,[m[6]||(m[6]=t("img",{src:Ja,class:"mb-4",alt:"backlog-plan"},null,-1)),t("h6",us," Plan your "+L(x.label),1),t("p",cs,[m[3]||(m[3]=re(" Drag work items from the ")),m[4]||(m[4]=t("span",{class:"font-bold"},"Backlog",-1)),re(" section or create new ones to plan the work for this "+L(x.label)+". Select ",1),t("span",ps,"Start "+L(x.label),1),m[5]||(m[5]=re(" when you're ready. "))])]))],34)]))}}),vs=Jt(fs,[["__scopeId","data-v-60fe4c29"]]),ms={class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-input pb-4"},gs={class:"text-xl font-semibold"},bs={class:"px-6 gap-4 bg-bg-input pt-5 pb-8"},ys={class:"mt-3"},xs={class:"flex justify-end gap-2 p-6 sticky bottom-0 bg-bg-input border-t border-border"},_s=mt({__name:"SprintModal",props:{modelValue:{type:Boolean,default:!1},lable:{},sprint:{},creatingSprint:{type:Boolean},sprints:{}},emits:["update:modelValue","save","close"],setup(h,{emit:y}){const N=y,T=h,Z=D(()=>T.lable?T.lable.charAt(0).toUpperCase()+T.lable.slice(1):""),P=D({get:()=>T.modelValue,set:R=>N("update:modelValue",R)}),d=ft({name:"",sprintType:"",description:""}),F=ft({name:!1,sprintType:!1,description:!1}),W=D(()=>F.name&&!String(d.name||"").trim()?"Name is required":""),X=D(()=>!!String(d.name||"").trim()&&!W.value);function K(){P.value=!1,N("close")}function A(){F.name=!0,X.value&&N("save",{name:String(d.name||"").trim(),value:String(T.lable||"").trim(),description:String(d.description||"").trim()})}function Y(){F.name=!1,F.sprintType=!1,F.description=!1}z(()=>T.sprint,R=>{if(!R){d.name="",d.sprintType=null;return}d.name="",d.description="",d.sprintType=R.sprintType??null,Y()},{immediate:!0});const Q=[{title:"Milestone",_id:"milestone",dot:"#2e9bda"},{title:"Sprint",_id:"sprint",dot:"#7d68c8"},{title:"Huddle",_id:"huddle",dot:"#eea832"}],ie=D(()=>Q.map(R=>({...R})));z(()=>T.lable,R=>{const I=ie.value.find(x=>x.title===R);d.sprintType=(I==null?void 0:I._id)??""},{immediate:!0});function U(){const R=T.sprints||[],I=T.lable||"Sprint",x=I.charAt(0).toUpperCase()+I.slice(1);d.name=`${x} ${R.length+1}`}return z(()=>T.sprints,()=>{(!d.name||d.name.trim()==="")&&U()},{immediate:!0,deep:!0}),(R,I)=>(p(),ye(bl,{modelValue:P.value,"onUpdate:modelValue":I[3]||(I[3]=x=>P.value=x),modalClass:"!py-0",size:"md"},{default:ce(()=>[t("div",ms,[t("h2",gs,"Add New "+L(R.lable),1)]),t("div",bs,[q(yl,{class:"rounded-1",modelValue:d.name,"onUpdate:modelValue":I[0]||(I[0]=x=>d.name=x),label:"Name",placeholder:R.lable,error:!!W.value,message:W.value,onBlur:I[1]||(I[1]=x=>F.name=!0)},null,8,["modelValue","placeholder","error","message"]),t("div",ys,[q(ma,{modelValue:d.description,"onUpdate:modelValue":I[2]||(I[2]=x=>d.description=x),label:"Description",placeholder:`${Z.value} description...`,type:"textarea",rows:4},null,8,["modelValue","placeholder"])]),I[4]||(I[4]=t("div",null,null,-1))]),t("div",xs,[q(Ye,{variant:"secondary",onClick:K},{default:ce(()=>I[5]||(I[5]=[re("Cancel")])),_:1,__:[5]}),q(Ye,{variant:"primary",disabled:!X.value,onClick:A},{default:ce(()=>[re(L(R.creatingSprint?"Saving...":"Save"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue"]))}}),hs="/assets/filter-JX25xO5j.svg",ks={class:"sticky top-0 z-10 flex justify-between items-center py-6 px-6 border-b border-border bg-bg-input"},ws={class:"text-xl font-semibold"},Ss={class:"px-6 grid grid-cols-2 gap-4 bg-bg-input pt-5"},Cs={class:"flex flex-col col-span-2"},$s={class:"flex flex-col col-span-2"},Ts={class:"flex gap-1 flex-col col-span-2 sm:col-span-1"},Ds={key:0,class:"text-xs text-red-500"},Vs={class:"flex gap-1 flex-col col-span-2 sm:col-span-1"},Ls={key:0,class:"text-xs text-red-500"},Es={class:"flex flex-col col-span-2"},Ms={class:"flex flex-col col-span-2"},As={class:"bg-bg-body wfull px-4 py-3 rounded-lg text-xs text-text-secondary"},Is={class:"flex justify-end gap-2 p-6 sticky bottom-0 bg-bg-input"},Bs=mt({__name:"StartSprintModal",props:{modelValue:{type:Boolean,default:!1},sprint:{},creatingSprint:{type:Boolean},sprintType:{}},emits:["update:modelValue","save","close"],setup(h,{emit:y}){const N=y,T=h,Z=[{_id:1,title:"1 Week"},{_id:2,title:"2 Weeks"},{_id:3,title:"3 Weeks"},{_id:4,title:"4 Weeks"},{_id:5,title:"Custom"}],P=D({get:()=>T.modelValue,set:r=>N("update:modelValue",r)}),d=ft({goal:"",start:new Date().toISOString().slice(0,10),end:"",sprint_name:"",duration:null}),F=D(()=>T.sprintType?T.sprintType.charAt(0).toUpperCase()+T.sprintType.slice(1):""),W=ft({start:!1,end:!1}),X=D(()=>!d.start&&W.start?"Start date is required":""),K=D(()=>{if(!d.end&&W.end)return"End date is required";if(d.start&&d.end){const r=I(d.start),n=I(d.end);if(Number.isFinite(r)&&Number.isFinite(n)&&n<r)return"End date cannot be before start date"}return""}),A=D(()=>!X.value&&!K.value);function Y(r){d.start=r||"",W.start=!0}function Q(r){d.end=r||"",W.end=!0}function ie(){P.value=!1,d.duration=null,N("close")}function U(){W.start=!0,W.end=!0,A.value&&N("save",{title:d.sprint_name||"new sprint",duration:String(v.value)||null,start:d.start||"",end:d.end||"",goal:d.goal??""})}function R(){W.start=!1,W.end=!1}function I(r){return r?new Date(`${r}T00:00:00`).getTime():NaN}const x=D(()=>d.duration===5);z(()=>d.duration,r=>{if(!r)return;const n=typeof r=="object"?r._id:r;if(n!==5&&d.start){const u=m(d.start,n*7);d.end=u}}),z(()=>d.start,r=>{r&&(d.duration&&d.duration!==5&&(d.end=m(d.start,d.duration*7)),d.end&&I(d.end)<I(d.start)&&(d.end=d.start))});function m(r,n){const u=new Date(r);return u.setDate(u.getDate()+n),u.toISOString().slice(0,10)}const v=D(()=>!d.start||!d.end?0:d.duration!==5?d.duration*7:(I(d.end)-I(d.start))/864e5);return z(()=>T.sprint,r=>{if(!r){d.start=new Date().toISOString().slice(0,10),d.end="",d.sprint_name="",d.goal="",R();return}d.goal=r.goal??"",d.start=r.start??new Date().toISOString().slice(0,10),d.end=r.end??"",d.sprint_name=r.title??"",R()},{immediate:!0}),(r,n)=>(p(),ye(bl,{modelValue:P.value,"onUpdate:modelValue":n[3]||(n[3]=u=>P.value=u),modalClass:"!py-0",size:"md"},{default:ce(()=>[t("div",ks,[t("h2",ws,"Start "+L(r.sprintType),1),t("span",{onClick:ie,class:"text-sm text-text-secondary cursor-pointer"},n[4]||(n[4]=[t("i",{class:"fa-solid fa-xmark text-text-primary text-[19px]"},null,-1)]))]),t("div",Ss,[t("div",Cs,[q(yl,{modelValue:d.sprint_name,"onUpdate:modelValue":n[0]||(n[0]=u=>d.sprint_name=u),label:`${F.value} Name`,placeholder:`Enter ${r.sprintType} name`,size:"md",class:"rounded-1"},null,8,["modelValue","label","placeholder"])]),t("div",$s,[q(fl,{modelValue:d.duration,"onUpdate:modelValue":n[1]||(n[1]=u=>d.duration=u),options:Z,label:"Duration",placeholder:"Select duration"},null,8,["modelValue"])]),t("div",Ts,[n[6]||(n[6]=t("label",{class:"text-sm font-medium"},"Start date",-1)),t("div",{class:ee(["border relative flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",X.value?"border-red-500":""])},[q(Kt,{placeholder:"Set start date",class:"w-full z-1","model-value":d.start,"emit-as":"ymd","onUpdate:modelValue":Y},null,8,["model-value"]),n[5]||(n[5]=t("i",{class:"fa-regular fa-calendar absolute right-2 top-3 z-0"},null,-1))],2),X.value?(p(),g("p",Ds,L(X.value),1)):B("",!0)]),t("div",Vs,[n[7]||(n[7]=t("label",{class:"text-sm font-medium"},"End date",-1)),t("div",{class:ee(["border relative flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",K.value?"border-red-500":""])},[q(Kt,{placeholder:"Set end date",class:"w-full","model-value":d.end,"emit-as":"ymd",disabled:!x.value,"onUpdate:modelValue":Q,"min-date":d.start},null,8,["model-value","disabled","min-date"]),t("i",{class:ee(["fa-regular fa-calendar absolute right-2 top-3 z-0",{"text-text-secondary/30 pointer-events-none":!x.value,"text-text-primary":x.value}])},null,2)],2),K.value?(p(),g("p",Ls,L(K.value),1)):B("",!0)]),t("div",Es,[n[8]||(n[8]=t("label",{class:"text-sm font-medium pb-1"},"Goal (optional)",-1)),nt(t("textarea",{"onUpdate:modelValue":n[2]||(n[2]=u=>d.goal=u),class:"w-full text-sm rounded-md border border-border px-3 py-2 bg-bg-input",rows:"2",placeholder:"Ship onboarding flow"},null,512),[[xl,d.goal]])]),t("div",Ms,[t("p",As," Duration: "+L(d.start?v.value+" days":""),1)])]),t("div",Is,[q(Ye,{variant:"secondary",onClick:ie},{default:ce(()=>n[9]||(n[9]=[re("Cancel")])),_:1,__:[9]}),q(Ye,{variant:"primary",disabled:!A.value,onClick:U},{default:ce(()=>[re(L(r.creatingSprint?"Starting...":"Start"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue"]))}}),Os={class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-body pb-4 mb-4"},Ns={class:"text-sm text-text-secondary mt-1"},Ps={class:"flex items-center gap-2 mt-4 w-full"},qs={class:"flex items-center gap-2 flex-1"},Us={class:"px-6 min-h-[400px]"},js={key:0},zs={key:0,class:"flex items-center justify-center py-12"},Fs={key:1,class:"text-center py-12 text-text-secondary"},Rs={key:2,class:"grid grid-cols-2 gap-3"},Hs=["onClick"],Ws={class:"flex items-center gap-3"},Ks={class:"w-10 h-10 rounded-lg bg-bg-input flex items-center justify-center group-hover:bg-primary/10 transition-colors"},Qs={class:"font-medium"},Gs={key:1},Js={key:0,class:"flex items-center justify-center py-12"},Zs={key:1,class:"text-center py-12 text-text-secondary"},Xs={key:2,class:"grid grid-cols-2 gap-3"},Ys=["onClick"],en={class:"flex items-center gap-3"},tn={class:"w-10 h-10 rounded-lg bg-bg-input flex items-center justify-center group-hover:bg-primary/10 transition-colors"},ln={class:"font-medium"},an={key:2},sn={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},nn={key:0,class:"flex flex-col"},rn={class:"flex gap-1 flex-col"},on={key:0,class:"text-xs text-red-500"},dn={class:"flex gap-1 flex-col"},un={key:0,class:"text-xs text-red-500"},cn={class:"flex flex-col gap-1"},pn={class:"mt-2"},fn={class:"mt-4"},vn={key:0,class:"text-xs text-red-500 mt-1 px-1"},mn={class:"flex justify-between gap-2 p-6 mt-8 sticky bottom-0 bg-bg-body border-t border-border"},gn={key:1},bn={class:"flex gap-2"},yn=mt({__name:"CreateBacklogTicketWithModuleSelection",props:{modelValue:{type:Boolean,default:!1},listId:{},selectedVariable:{}},emits:["update:modelValue","created"],setup(h,{emit:y}){const N=y,T=h,Z=_l(),{workspaceId:P}=jl(),d=b(1),F=b(null),W=b(null),{data:X,isLoading:K}=zl(P.value),A=D(()=>{var w;return((w=X.value)==null?void 0:w.modules)||[]}),{data:Y,isFetching:Q,refetch:ie}=Fl({workspace_module_id:F,workspace_id:P},{enabled:D(()=>!!F.value)});z(()=>F.value,()=>{ie()});const U=D(()=>Y.value||[]),{data:R}=Rl(P.value),I=D(()=>F.value??""),{data:x}=Hl(P,I,b("")),{mutate:m,isPending:v}=Wl({onSuccess:()=>{de(),Z.invalidateQueries({queryKey:["sheet-list"]}),Z.invalidateQueries({queryKey:["backlog-list"]}),r.value=!1}}),r=D({get:()=>T.modelValue,set:w=>N("update:modelValue",w)}),n=D(()=>{switch(d.value){case 1:return"Select a module to create the ticket in";case 2:return"Select a sheet within the module";case 3:return"Provide the ticket details below and click Add Ticket";default:return""}}),u=D(()=>((x==null?void 0:x.value)??[]).filter(w=>{var C;return((C=w==null?void 0:w.type)==null?void 0:C.title)==="Select"})),k=w=>w.map(C=>({_id:C,title:C})),ae=D(()=>((R==null?void 0:R.value)??[]).map(w=>{var C;return{_id:w._id,title:((C=w==null?void 0:w.variables)==null?void 0:C["lane-title"])??String(w._id)}})),se=w=>w.slug,_=ft({title:"",description:"",startDate:null,endDate:null,lane_id:null,assignee:null,variables:{}});z(u,w=>{for(const C of w){const V=se(C);V in _.variables||(_.variables[V]=null)}},{immediate:!0});const O=ft({title:!1,description:!1,startDate:!1,endDate:!1,lane:!1}),ge=D(()=>!!_.title.trim()&&!!_.lane_id&&!!_.startDate&&!!_.endDate&&!ot.value&&!et.value&&!je.value&&!Ve.value&&!Pe.value);function te(w){_.startDate=w,O.startDate=!0}function pe(w){_.endDate=w,O.endDate=!0}function Ue(w){_.lane_id=w,O.lane=!0}function Oe(w){_.assignee=w}function gt(w){F.value=w._id,d.value=2}function Ne(w){W.value=w._id,d.value=3}function wt(){d.value>1&&d.value--}function St(){r.value=!1,de()}function de(){d.value=1,F.value=null,W.value=null,_.title="",_.description="",_.startDate=null,_.endDate=null,_.lane_id=null,_.assignee=null,_.variables={},O.title=!1,O.description=!1,O.startDate=!1,O.endDate=!1,O.lane=!1}const We=D(()=>{var w;return(w=x==null?void 0:x.value)==null?void 0:w.find(C=>(C==null?void 0:C._id)==T.selectedVariable)}),ot=D(()=>O.title&&!_.title.trim()?"Title is required":""),et=D(()=>O.startDate?_.startDate?"":"Start date is required":""),je=D(()=>O.endDate?_.endDate?_.startDate&&_.endDate&&_.endDate<_.startDate?"End date cannot be before start date":"":"End date is required":""),Ve=D(()=>O.lane?_.lane_id?"":"Lane is required":""),Pe=D(()=>O.description&&!_.description.trim()?"Description is required":""),it=new Date().toISOString().split("T")[0];function ve(){var C,V;if(O.title=!0,O.lane=!0,O.description=!0,O.startDate=!0,O.endDate=!0,!ge.value||v.value)return;const w={sheet_list_id:T.listId,workspace_id:P.value,sheet_id:W.value,workspace_lane_id:_.lane_id,variables:{..._.variables,[`${(C=We.value)==null?void 0:C.slug}`]:T.listId,"card-title":_.title.trim(),"card-description":_.description.trim(),"start-date":_.startDate,"end-date":_.endDate},seat_id:((V=_.assignee)==null?void 0:V._id)??null,createdAt:new Date().toISOString()};m(w)}return z(()=>_.title,w=>{w!=null&&w.trim()&&O.title&&(O.title=!1)}),z(()=>_.lane_id,w=>{w&&O.lane&&(O.lane=!1)}),z(()=>_.startDate,w=>{w&&O.startDate&&(O.startDate=!1)}),z(()=>_.endDate,w=>{w&&O.endDate&&(O.endDate=!1)}),z(()=>_.description,w=>{w!=null&&w.trim()&&O.description&&(O.description=!1)}),(w,C)=>(p(),ye(bl,{modelValue:r.value,"onUpdate:modelValue":C[5]||(C[5]=V=>r.value=V),modalClass:"!py-0",size:"lg"},{default:ce(()=>[t("div",Os,[C[6]||(C[6]=t("h2",{class:"text-xl font-semibold"},"Create Backlog Ticket",-1)),t("p",Ns,L(n.value),1),t("div",Ps,[(p(),g(De,null,Be(3,V=>t("div",{key:V,class:"flex items-center flex-1"},[t("div",qs,[t("div",{class:ee(["h-1 flex-1 rounded-full transition-colors",d.value>=V?"bg-primary":"bg-border"])},null,2)])])),64))])]),t("div",Us,[d.value===1?(p(),g("div",js,[C[8]||(C[8]=t("h3",{class:"text-lg font-medium mb-4"},"Select Module",-1)),f(K)?(p(),g("div",zs,C[7]||(C[7]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):!A.value||A.value.length===0?(p(),g("div",Fs," No modules available ")):(p(),g("div",Rs,[(p(!0),g(De,null,Be(A.value,V=>{var ue,Ke,be,G,oe;return p(),g("button",{key:V._id,onClick:ne=>gt(V),class:ee(["p-4 border rounded-lg hover:border-primary transition-all text-left group",F.value===V._id?"border-primary bg-primary/5":"border-border"])},[t("div",Ws,[t("div",Ks,[t("i",{class:ee([`${(Ke=(ue=V==null?void 0:V.variables)==null?void 0:ue["module-icon"])==null?void 0:Ke.prefix} ${(G=(be=V==null?void 0:V.variables)==null?void 0:be["module-icon"])==null?void 0:G.iconName}`,"text-lg"])},null,2)]),t("div",null,[t("p",Qs,L(((oe=V.variables)==null?void 0:oe["module-title"])||"Untitled"),1)])])],10,Hs)}),128))]))])):d.value===2?(p(),g("div",Gs,[C[10]||(C[10]=t("h3",{class:"text-lg font-medium mb-4"},"Select Sheet",-1)),f(Q)?(p(),g("div",Js,C[9]||(C[9]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):!U.value||U.value.length===0?(p(),g("div",Zs," No sheets available for this module ")):(p(),g("div",Xs,[(p(!0),g(De,null,Be(U.value,V=>{var ue,Ke;return p(),g("button",{key:V._id,onClick:be=>Ne(V),class:ee(["p-4 border rounded-lg hover:border-primary transition-all text-left group",W.value===V._id?"border-primary bg-primary/5":"border-border"])},[t("div",en,[t("div",tn,[t("i",{class:ee(`${(ue=V==null?void 0:V.variables["sheet-icon"])==null?void 0:ue.prefix} ${(Ke=V==null?void 0:V.variables["sheet-icon"])==null?void 0:Ke.iconName} text-lg`)},null,2)]),t("div",null,[t("p",ln,L((V==null?void 0:V.variables["sheet-title"])||"Untitled Sheet"),1)])])],10,Ys)}),128))]))])):d.value===3?(p(),g("div",an,[C[14]||(C[14]=t("h3",{class:"text-lg font-medium mb-4"},"Ticket Details",-1)),t("div",sn,[q(yl,{modelValue:_.title,"onUpdate:modelValue":C[0]||(C[0]=V=>_.title=V),label:"Ticket Title",placeholder:"e.g., Implement real-time notifications",error:!!ot.value,message:ot.value,onBlur:C[1]||(C[1]=V=>O.title=!0)},null,8,["modelValue","error","message"]),ae.value.length>0?(p(),g("div",nn,[q(fl,{size:"md",label:"Lane",options:ae.value,placeholder:"Select lane",allowCustom:!1,"model-value":_.lane_id,"onUpdate:modelValue":Ue,error:!!Ve.value,message:Ve.value},null,8,["options","model-value","error","message"])])):B("",!0),(p(!0),g(De,null,Be(u.value,V=>nt((p(),ye(fl,{size:"md",key:se(V),modelValue:_.variables[V.slug],"onUpdate:modelValue":ue=>_.variables[V.slug]=ue,options:k(V.data),label:V.title,placeholder:"Select value",allowCustom:!0},null,8,["modelValue","onUpdate:modelValue","options","label"])),[[Qt,(V==null?void 0:V._id)!=w.selectedVariable]])),128)),t("div",rn,[C[11]||(C[11]=t("label",{class:"text-sm"},"Start date",-1)),t("div",{class:ee(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",et.value?"border-red-500":""])},[q(Kt,{placeholder:"Set start date",class:"w-full","model-value":_.startDate,"emit-as":"ymd","onUpdate:modelValue":te,"min-date":f(it)},null,8,["model-value","min-date"])],2),et.value?(p(),g("p",on,L(et.value),1)):B("",!0)]),t("div",dn,[C[12]||(C[12]=t("label",{class:"text-sm"},"End date",-1)),t("div",{class:ee(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",je.value?"border-red-500":""])},[q(Kt,{placeholder:"Set end date",class:"w-full","model-value":_.endDate,"emit-as":"ymd","onUpdate:modelValue":pe,"min-date":_.startDate||f(it)},null,8,["model-value","min-date"])],2),je.value?(p(),g("p",un,L(je.value),1)):B("",!0)]),t("div",cn,[C[13]||(C[13]=t("label",{class:"text-sm"},"Assignee",-1)),t("div",pn,[q(Jl,{name:!0,workspaceId:f(P),onAssign:Oe,onUnassign:C[2]||(C[2]=V=>Oe(null)),assigneeId:_.assignee,seat:null,disabled:!1,skipPermissionCheck:!0,class:"w-full"},null,8,["workspaceId","assigneeId"])])])]),t("div",fn,[q(Zl,{label:"Description",placeholder:"What needs to be done, acceptance criteria, linksâ€¦",modelValue:_.description,"onUpdate:modelValue":C[3]||(C[3]=V=>_.description=V),onBlur:C[4]||(C[4]=V=>O.description=!0)},null,8,["modelValue"]),Pe.value?(p(),g("p",vn,L(Pe.value),1)):B("",!0)])])):B("",!0)]),t("div",mn,[d.value>1?(p(),ye(Ye,{key:0,variant:"secondary",onClick:wt},{default:ce(()=>C[15]||(C[15]=[re("Back")])),_:1,__:[15]})):(p(),g("div",gn)),t("div",bn,[q(Ye,{variant:"secondary",onClick:St},{default:ce(()=>C[16]||(C[16]=[re("Cancel")])),_:1,__:[16]}),d.value===3?(p(),ye(Ye,{key:0,variant:"primary",disabled:!ge.value||f(v),onClick:ve},{default:ce(()=>[re(L(f(v)?"Addingâ€¦":"Add Ticket"),1)]),_:1},8,["disabled"])):B("",!0)])])]),_:1},8,["modelValue"]))}}),xn={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-[6px] shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full border border-border flex flex-col overflow-x-auto overflow-y-auto scrollbar-visible pb-4"},_n={class:"header px-4 py-3 flex items-center justify-between gap-1 w-[100%]"},hn={class:"flex gap-4"},kn={class:"hidden sm:flex"},wn={class:"flex sm:hidden"},Sn={class:"px-4 py-1 h-8 mt-1 rounded-2xl bg-accent text-white font-medium cursor-pointer"},Cn={class:"flex gap-3 items-center"},$n={class:"flex items-center gap-3 bg-bg-surface/50 h-[32px] px-2 rounded-md"},Tn={class:"overflow-x-auto"},Dn={key:0,class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex scrollbar-visible"},Vn={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible"},Ln={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},En={class:"relative w-full h-full flex overflow-hidden"},Mn={key:0,class:"format-sidebar h-full py-4 px-4 w-[320px] border-l bg-bg-card overflow-x-hidden overflow-y-auto flex flex-col"},An={class:"flex items-center justify-between pb-3 mb-4 border-b"},In={class:"format-content space-y-6"},Bn={class:"format-group mb-3"},On={class:"flex items-center gap-2"},Nn=["value"],Pn={class:"format-group mb-3"},qn={class:"flex items-center gap-2"},Un=["value"],jn={class:"grid grid-cols-1 gap-3"},zn=["value"],Fn={class:"mt-6 pt-4"},Rn=["disabled"],Hn={key:0,class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},Wn={key:0,class:"fixed inset-0 bg-black/30 flex items-center justify-center"},Kn={class:"bg-white p-6 rounded-xl w-80"},Qn={class:"flex justify-end gap-2 mt-4"},Gn=["disabled"],Jn={class:"flex items-center mt-3 gap-3"},Zn=mt({__name:"ActiveSprint",props:{sptint_id:{},searchQuery:{},activeSprint:{}},setup(h){const y=h,N=Me(()=>Ae(()=>import("./CreateTaskModal-B5iTV7oF.js"),__vite__mapDeps([0,1,2,3]))),T=Me(()=>Ae(()=>import("./ConfirmDeleteModal-B6LCr5DZ.js"),__vite__mapDeps([4,5,2,3]))),Z=Me(()=>Ae(()=>import("./SidePanel-Ed7NJK64.js"),__vite__mapDeps([6,2,3,7,8]))),P=Me(()=>Ae(()=>import("./KanbanBoard-BoIL9cg9.js"),__vite__mapDeps([9,10,11,2,3,12,13,14]))),d=Me(()=>Ae(()=>import("./index-CvqJivzk.js").then(l=>l.ds),__vite__mapDeps([2,3]))),F=Me(()=>Ae(()=>import("./TableSearchCell-Bb8DNEFQ.js"),__vite__mapDeps([15,2,3]))),W=Me(()=>Ae(()=>import("./TableAssigneeCell-4KP0DgAH.js"),__vite__mapDeps([16,2,3]))),X=Me(()=>Ae(()=>import("./CalendarView-DEEZyl2_.js"),__vite__mapDeps([17,2,3,18]))),K=Me(()=>Ae(()=>import("./GanttChartView-DImAa0yK.js"),__vite__mapDeps([19,2,3]))),A=Me(()=>Ae(()=>import("./TimelineView-C_CGlAxX.js"),__vite__mapDeps([20,2,3,21]))),Y=Me(()=>Ae(()=>import("./index-CvqJivzk.js").then(l=>l.dq),__vite__mapDeps([2,3]))),Q=Me(()=>Ae(()=>import("./BaseTextField-BfXXzbA1.js"),__vite__mapDeps([22,2,3]))),ie=b(!1),U=b(""),R=b(null),I=b(null),x=b(null),m=b(""),{isDark:v}=Gt(),r=b(null),n=b(!1);function u(l){U.value="",ie.value=!0,R.value=l}function k(){R.value&&R.value(U.value),ie.value=!1}function ae(){ie.value=!1}const{mutate:se}=Wl({onSuccess:()=>{}});function _(){const l=xt.value.trim();l&&ve(l)}function O(){yt.value=!yt.value}const ge=ia(),te=b("kanban"),{workspaceId:pe,moduleId:Ue}=jl(),Oe=b(""),gt=b(!1),Ne=b(!1),{canCreateVariable:wt,canCreateCard:St,canEditCard:de,canAssignCard:We}=ml(),{data:ot}=zl(pe.value),et=b(ot.value.modules||[]),je=D(()=>(et.value||[]).map(l=>{var e,s;return{_id:l._id,title:((e=l.variables)==null?void 0:e["module-title"])??"Untitled module",description:((s=l.variables)==null?void 0:s["module-description"])??"",icon:l.icon??null,status:l.status??null}})),Ve=_l(),{mutate:Pe,isPending:it}=Xl({onSuccess:()=>{Ve.invalidateQueries({queryKey:["sheet-list"]}),xt.value="",xe.value=!1,yt.value=!1,xe.value=!1}}),ve=l=>{Pe({workspace_id:pe.value,module_id:Ue.value,variable_id:be.value,value:l})};z(je,l=>{if(l.length&&!Oe.value){const e=l.find(s=>s.title==="Tasks")||l[0];Oe.value=e._id}},{immediate:!0});const{data:w,refetch:C}=Fl({workspace_id:pe.value,workspace_module_id:D(()=>Oe.value)});z(Oe,l=>{l&&C()});const V=D(()=>{var l;return w.value?(l=w.value[0])==null?void 0:l._id:""}),ue=b(V),Ke=D(()=>{var l;return Fe.value?(l=Fe.value[0])==null?void 0:l._id:""}),be=b(Ke),G=Yl(),oe=D(()=>y.sptint_id),{data:ne,isPending:Qe,refetch:Ct}=Sa(oe),bt=b(!1),tt=b(),$e=l=>{tt.value=l},Zt=ea(),Ge=ta();function $t(l){l.type=="column"?Zt.mutate({payload:{workspace_id:pe.value,workspace_module_id:Ue.value,variable_id:be.value,moved_value:l.meta.id,new_index:l.meta.newIndex}}):Ge.mutate({payload:{workspace_id:pe.value,card_id:l.meta.moved._id,group_value:l.meta.fromColumnId,group_variable_id:be.value,new_index:l.meta.newIndex,sheet_id:ue.value}})}const dt=l=>{},{mutate:Xt}=la({onSuccess:()=>{C(),It.value=!1}}),Mt=D(()=>!w.value||!w.value.length?[]:w.value.map(l=>{var e,s;return{_id:l._id,title:((e=l.variables)==null?void 0:e["sheet-title"])||"Untitled Sheet",description:((s=l.variables)==null?void 0:s["sheet-description"])||"",icon:l.icon||null,status:l.generation_status||null}}));z(Mt,l=>{l.length>0&&!ue.value&&(ue.value=l[0]._id)},{immediate:!0}),z(Mt,l=>{l.length>0?m.value=l[0].title:m.value=""},{immediate:!0}),z(w,l=>{var e;(l==null?void 0:l.length)>0&&(ue.value=(e=l[0])==null?void 0:e._id)});const yt=b(!1),xt=b(""),Yt=l=>{Pe({workspace_id:ge.params.id,module_id:ge.params.module_id,new_value:l.title,value:l.oldTitle,variable_id:be.value})},xe=b(!1),ze=b(),el=()=>{Pe({value:ze.value.title,workspace_id:pe.value,module_id:Ue.value,newValue:ze.value.title,variable_id:be.value,is_trash:!0})},tl=l=>{xe.value=!0,ze.value=l},ll=l=>{bt.value=!0,ze.value=l},ut=D(()=>y.searchQuery),al=b("");z(ut,_a.debounce(l=>{al.value=l},200));const sl=D(()=>{var e;const l=(e=ne.value)==null?void 0:e.flatMap(s=>s.cards.map(i=>({...i,columnId:s.title})));return new Bl(l,{keys:["card-title","card-description"],threshold:.3})}),Je=D(()=>{var l,e;if(te.value==="kanban"){if(!ut.value)return ne.value;const s=sl.value.search(ut.value).map(i=>i.item);return ne.value.map(i=>({...i,cards:s.filter(c=>c.columnId===i.title)}))}else{const s=(l=ut.value)==null?void 0:l.trim();if(!s){let c=[];return(e=ne.value??[])==null||e.forEach(j=>{c=[...c,...j==null?void 0:j.cards]}),c}return new Bl(At.value,{keys:["card-title","card-description"],threshold:.3}).search(s).map(c=>c.item)}}),At=D(()=>{let l=[];return(ne.value??[]).forEach(e=>{l=[...l,...e==null?void 0:e.cards]}),l}),It=b(!1),{data:Fe,isPending:nl}=Hl(pe,Oe,ue),{mutate:Tt}=aa(),rl=(l,e)=>{Tt({payload:{sheet_id:ue.value,workspace_id:pe.value,variable_slug:l,is_visible:e}})},{data:Dt}=Rl(pe),Vt=D(()=>((Dt==null?void 0:Dt.value)??[]).map(l=>{var e;return{_id:l._id,title:((e=l==null?void 0:l.variables)==null?void 0:e["lane-title"])??String(l._id)}})),ol=l=>l.map(e=>({_id:e.value??e,title:e.value??e})),Re=sa({onSuccess:()=>{Ve.invalidateQueries({queryKey:["get-sheets"]}),Ve.invalidateQueries({queryKey:["sheet-list"]}),Ve.invalidateQueries({queryKey:["roles"]})}}),_t=(l,e)=>{if(!ne.value)return;const s=ne.value.findIndex(i=>i.cards.some(c=>c._id===l));if(s!==-1){const i=ne.value[s].cards.findIndex(c=>c._id===l);if(i!==-1){const c={...ne.value[s].cards[i]};e(c),ne.value[s].cards[i]=c,El(ne)}}};function il(l,e){_t(l,s=>{const i=Vt.value.find(c=>c._id===e);i&&(s.lane=i)}),El(ne),Re.mutate({card_id:l,workspace_lane_id:e})}const Bt=(l,e)=>{_t(l,s=>{s.seat=e}),Re.mutate({card_id:l,seat_id:e==null?void 0:e._id})},dl=D(()=>{var l;return[{key:"card-title",label:"Title",render:({row:e,value:s})=>Se("div",{class:"flex items-center gap-1 w-full"},[Se("a",{onClick:()=>tt.value=e,class:"text-[12px] underline text-blue-500 shrink-0 overflow-ellipsis cursor-pointer"},e["card-code"]),Se("div",{class:"flex-1 min-w-0"},[Se("input",{onFocusout:i=>{var c;Ot(e==null?void 0:e._id,"card-title",(c=i==null?void 0:i.target)==null?void 0:c.value)},class:"text-[12px] w-full overflow-ellipsis capitalize p-1 w-full p-1 focus:border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-transparent focus:bg-bg-body text-[12px] h-8",defaultValue:s,disabled:!de.value})])])},{key:"end-date",label:"Due Date",render:({row:e,value:s})=>{const i=b(s);return Se(d,{class:" capitalize flex items-center gap-2 text-[12px]",placeholder:"Set start date",tableInputClass:!0,modelValue:i.value,disabled:!de.value,"onUpdate:modelValue":c=>Nt(e==null?void 0:e._id,c),emptyText:"Date"})}},{key:"lane",label:"Lane",render:({row:e})=>{var s;return Se(F,{options:Vt.value??[],placeholder:"Select lane",modelValue:((s=e.lane)==null?void 0:s._id)||null,disabled:!de.value,"onUpdate:modelValue":i=>il(e==null?void 0:e._id,i),displayField:"title",emptyText:"Lane"})}},{key:"created_by",label:"Owner",render:({value:e})=>Se("div",{class:"capitalize flex items-center gap-2  px-3"},[Se("div",{class:" rounded-full  "},[e!=null&&e.u_profile_image?Se("img",{class:"w-6 h-6 rounded-full",src:e==null?void 0:e.u_profile_image}):Se("div",{class:"w-5 h-5 rounded-full flex justify-center items-center text-[11px] ",style:`background:${e!=null&&e.u_full_name?na({name:e.u_full_name,email:e.u_email}):""}`},gl(e==null?void 0:e.u_full_name))]),Se("span",{class:"text-[12px]"},e?e==null?void 0:e.u_full_name:"")])},{key:"seat",label:"Assignee",render:({row:e,value:s})=>Se(W,{class:"capitalize flex items-center gap-2 ",onAssign:i=>Bt(e==null?void 0:e._id,i),assigneeId:s,seat:s,name:!0,disabled:!We.value,emptyText:"Assignee"})},...((l=Fe.value)==null?void 0:l.filter(e=>{var s;return((s=e==null?void 0:e.type)==null?void 0:s.title)==="Select"}).map(e=>({key:e==null?void 0:e.slug,label:e==null?void 0:e.slug,render:({row:s,value:i})=>{var j;let c=i;if(Array.isArray(s==null?void 0:s.variables)){const J=s.variables.find(E=>E.slug===e.slug);J&&(c=J.value)}else c=((j=s==null?void 0:s.variables)==null?void 0:j[e.slug])??(s==null?void 0:s[e.slug])??i;return Se("div",{class:"capitalize flex items-center gap-2"},[Se(F,{options:ol(e.data??[]),modelValue:c,disabled:!de.value,emptyText:e.slug,"onUpdate:modelValue":J=>{Ot(s==null?void 0:s._id,e.slug,J)},columnName:e.slug})])},visible:e==null?void 0:e.is_visible})))??[]]});function Ot(l,e,s){_t(l,i=>{if(e==="card-title"&&(i[e]=s),Array.isArray(i.variables)){const c=i.variables.find(j=>j.slug===e);c?c.value=s:i.variables.push({slug:e,value:s,type:"Select"})}else i.variables&&typeof i.variables=="object"?i.variables[e]=s:i[e]=s}),Re.mutate({card_id:l,variables:{[e]:s.trim()}})}function ul(l){if(l["card-title"]){const e={sheet_list_id:"To Do",workspace_id:pe.value,sheet_id:ue.value,variables:{"card-title":l["card-title"].trim()},createdAt:new Date().toISOString()};se(e)}}const Nt=(l,e)=>{const s=ne.value.findIndex(i=>i.cards.some(c=>c._id===l));if(s!==-1){const i=ne.value[s].cards.findIndex(c=>c._id===l);i!==-1&&(ne.value[s].cards[i]["end-date"]=e)}Re.mutate({card_id:l,variables:{"start-date":e}})},He=b(null),lt=b(!1),at=b(!1);z(lt,l=>{l&&(at.value=!1)}),z(at,l=>{l&&(lt.value=!1)});const qe=D(()=>{var l,e;return(e=(l=He.value)==null?void 0:l.nodeObj)!=null&&e.style?He.value.nodeObj.style:H(we)});function Le(l,e,s){return l!==void 0?l:e!==void 0?e:s}function ht(l,e){var J;if(!((J=He.value)!=null&&J.nodeObj))return;const s=He.value.nodeObj;s.style||(s.style={});const i=e.target,c=i.type==="number"?Number(i.value):i.value;switch(l){case"bg_color":s.style.background=c;break;case"color":s.style.color=c;break;case"font_size":s.style.fontSize=`${c}px`;break;case"font_weight":s.style.fontWeight=c;break;case"font_style":s.style.fontStyle=c;break;case"font_family":s.style.fontFamily=c;break;case"border_color":s.style.borderColor=c;break;case"border_width":s.style.borderWidth=`${c}px`;break;case"border_radius":s.style.borderRadius=`${c}px`;break;case"padding":s.style.padding=`${c}px`;break}const j=document.getElementById(s.id);j&&a(s,j)}const we={bg_color:"#ffffff",color:"#000000",font_size:14,font_weight:"normal",font_style:"normal",font_family:"Inter",border_color:"#cccccc",border_width:0,border_radius:0,padding:0},Te=b(!1);async function Pt(){var e;const l=(e=He.value)==null?void 0:e.nodeObj;if(!(!l||Te.value)){Te.value=!0;try{const s=da(l);s._originalStyle||(s._originalStyle={});const i=s.style||{},c=s._originalStyle,j={bg_color:Le(i.background,c.bg_color,we.bg_color),color:Le(i.color,c.color,we.color),font_size:Le(i.fontSize?parseInt(i.fontSize):void 0,c.font_size,we.font_size),font_weight:Le(i.fontWeight,c.font_weight,we.font_weight),font_style:Le(i.fontStyle,c.font_style,we.font_style),font_family:Le(i.fontFamily,c.font_family,we.font_family),border_color:Le(i.borderColor,c.border_color,we.border_color),border_width:Le(i.borderWidth?parseInt(i.borderWidth):void 0,c.border_width,we.border_width),border_radius:Le(i.borderRadius?parseInt(i.borderRadius):void 0,c.border_radius,we.border_radius),padding:Le(i.padding?parseInt(i.padding):void 0,c.padding,we.padding),hyperLink:U.value||s.hyperLink||""};s._originalStyle={...j};const J=s.unique_name==="sheet"?{sheet_id:s.id,workspace_id:pe.value,workspace_module_id:Ue.value,style:j}:{card_id:s.id,seat_id:s.seat_id,style:j};s.unique_name==="sheet"?await Xt(J):await Re.mutateAsync(J)}finally{Te.value=!1}}}const qt=b([]);function cl(l){const e={id:"root",topic:localStorage.getItem("currentName")??"",isRoot:!0,children:[],style:{},_originalStyle:{},unique_name:"root"};if(!Array.isArray(l))return e;const s={};return l.forEach(i=>{var E;const c=m.value,j=((E=i.style)==null?void 0:E.hyperLink)||"";s[c]||(s[c]={id:i._id,topic:c,variables:i==null?void 0:i.variables,children:[],style:i==null?void 0:i.style,_originalStyle:(i==null?void 0:i.style)||{},unique_name:"sheet",hyperLink:j||""},e.children.push(s[c]));const J={id:i==null?void 0:i._id,topic:i.title,children:[],style:H(i==null?void 0:i.style),_originalStyle:i.style||{},unique_name:"List",hyperLink:j||""};(i.cards||[]).forEach((M,$)=>{var le;const fe=((le=M.style)==null?void 0:le.hyperLink)||"",me={id:M._id||`card-${$}`,seat_id:M.seat_id,topic:M["card-title"],style:H(M.style),_originalStyle:M.style||{},children:[],unique_name:"card",hyperLink:fe||""};J.children.push(me),qt.value=me}),s[c].children.push(J)}),e}const{mutateAsync:Ut}=ra({onSuccess:()=>{Ve.invalidateQueries({queryKey:["sheets"]}),Ve.invalidateQueries({queryKey:["sheet-list"]}),close()}}),ct=l=>{var e,s;(s=(e=ne.value)==null?void 0:e.sheets)==null||s.forEach(i=>{var c;(c=i.sheet_lists)==null||c.forEach(j=>{j.cards=j.cards.filter(J=>J._id!==l)})})},kt=b(!1),pl=b(null),jt=async()=>{if(r.value)try{n.value=!0,await Ce({url:`workspace/card/${r.value}`,method:"DELETE"}),ct(r.value),kt.value=!1,pl.value=null,rt.success("Ticket deleted successfully"),await C(),await Ct()}catch(l){rt.error(ua(l))}finally{n.value=!1}},zt=async l=>{try{await Ce({url:"workspace/cards/group-card-order",method:"PATCH",data:l}),C(),Ct()}catch(e){console.error("Failed to reorder card:",e)}};function Ze(){var s;const l=(s=I.value)==null?void 0:s.querySelector(".mind-elixir-toolbar.rb");if(!l||l.querySelector(".open-sidebar-btn"))return;const e=document.createElement("button");e.className="open-sidebar-btn me-toolbar-btn ms-2",e.title="Open Formatting Sidebar",e.innerHTML='<i class="fa-solid fa-sidebar"></i>',e.addEventListener("click",()=>{Ne.value=!Ne.value}),l.appendChild(e)}let pt=null;function o(){var e,s;pt&&(pt.disconnect(),pt=null);const l=(s=(e=I.value)==null?void 0:e.querySelector(".mind-elixir-toolbar.rb"))==null?void 0:s.parentElement;l&&(pt=new MutationObserver(()=>{Ze()}),pt.observe(l,{childList:!0,subtree:!0}),Ze())}oa(()=>{te.value!=="mindmap"||!I.value||!ne.value||Ml(()=>{var J,E;const l=cl(ne.value);x.value&&((E=(J=x.value).destroy)==null||E.call(J),x.value=null);const e=new Set,s=new Set,i=new Set,c=new Lt({el:I.value,theme:v.value?Lt.DARK_THEME:Lt.THEME,draggable:!0,contextMenu:!0,toolBar:!0,keypress:!0,locale:"en",overflowHidden:!1,contextMenuOption:{Update:!0,extend:[{name:"Update Node",onclick:()=>{var $;Ne.value&&(Ne.value=!1);const M=($=He.value)==null?void 0:$.nodeObj;M&&$e(M)}},{name:"Add Hyperlink",onclick:()=>{u(async()=>{await Pt()})}}]}});x.value=c,c.init({nodeData:l}),setTimeout(()=>{c.toCenter()},100),Ml(()=>{o()}),c.bus.addListener("selectNode",M=>{M&&(He.value={nodeObj:M})}),c.bus.addListener("renderNode",M=>{!(M!=null&&M.nodeObj)||!(M!=null&&M.element)||a(M.nodeObj,M.element)});const j=M=>{let $=M;for(;$;){if($.unique_name==="sheet")return $;$=$.parent}return null};c.bus.addListener("operation",async M=>{if(M){if(M.name==="moveNode"||M.name==="moveNodeBefore"||M.name==="moveNodeAfter"){const $=M.obj,fe=M.target;if(!$||$.unique_name!=="card"||!fe)return;const me=$._originalParent||$.parent;if(!me||me.unique_name!=="List")return;const le=fe.unique_name==="List"?fe:fe.parent;if(!le||le.unique_name!=="List")return;const he=j(le);if(!he)return;const st=le.children.findIndex(Ft=>Ft.id===$.id);if(st===-1)return;$._originalParent=le,await zt({workspace_id:pe.value,card_id:$.id,group_value:le.topic,group_variable_id:be.value,new_index:st,sheet_id:he.id});return}if(M.name==="removeNode"){const $=M.obj;if(!$||!$.id||$.unique_name!=="card")return;r.value=$.id,await jt();return}if(M.name==="addChild"||M.name==="insertSibling"){const $=M.obj;if(!$||!$.id)return;e.add($.id);return}if(M.name==="finishEdit"){const $=M.obj;if(!$||!$.id)return;const fe=e.has($.id),me=s.has($.id);if(!fe&&!me||me)return;if(fe){e.delete($.id),s.add($.id);const le=$.parent;if(!le||!("unique_name"in le)){s.delete($.id);return}if(le.unique_name==="root"&&!i.has($.id)){i.add($.id);try{await Ut({variables:{"sheet-title":$.topic??"New Sheet","sheet-description":"This is custom description"},is_ai_generated:!1,workspace_id:pe.value,workspace_module_id:Ue.value})}catch{s.delete($.id),i.delete($.id)}return}if(le.unique_name==="List"){try{const he=_e({topic:$.topic??"New Card",id:$.id},le);he.variables&&(he.variables["card-description"]="This is a default description"),await se(he)}catch{s.delete($.id)}return}if(le.unique_name==="sheet"){try{console.log("Creating new list under sheet...")}catch{s.delete($.id)}return}}}}})})}),z(v,()=>{x.value&&x.value.changeTheme(v.value?Lt.DARK_THEME:Lt.THEME)},{immediate:!0});function a(l,e){if(!l||!e||!l.style)return;const s=e.querySelector(".topic"),i=e.querySelector(".node")??e,c=l.style;c.background&&(i.style.background=c.background),c.color&&s&&(s.style.color=c.color),s&&(c.fontSize&&(s.style.fontSize=c.fontSize),c.fontFamily&&(s.style.fontFamily=c.fontFamily),c.fontWeight&&(s.style.fontWeight=c.fontWeight),c.fontStyle&&(s.style.fontStyle=c.fontStyle)),c.borderColor&&(i.style.borderColor=c.borderColor),c.borderWidth&&(i.style.borderWidth=c.borderWidth),c.borderRadius&&(i.style.borderRadius=c.borderRadius),c.padding&&(i.style.padding=c.padding)}function H(l={}){return{background:l.bg_color,color:l.color,fontSize:l.font_size!=null?`${l.font_size}px`:void 0,fontWeight:l.font_weight,fontStyle:l.font_style,fontFamily:l.font_family,borderColor:l.border_color,borderWidth:l.border_width!=null?`${l.border_width}px`:void 0,borderRadius:l.border_radius!=null?`${l.border_radius}px`:void 0,padding:l.padding!=null?`${l.padding}px`:void 0,hyperLink:l.hyperLink||void 0}}function _e(l,e){const s=new Date,i=s.toISOString().split("T")[0],c=new Date(s.getTime()+3*24*60*60*1e3).toISOString().split("T")[0];return{sheet_list_id:(e==null?void 0:e.topic)||"In Progress",workspace_id:pe.value,sheet_id:ue.value,workspace_lane_id:(l==null?void 0:l.workspace_lane_id)||null,variables:{"card-status":(e==null?void 0:e.topic)||"In Progress","card-type":null,priority:null,process:null,"card-title":l.topic||"New Card","card-description":"","start-date":i,"end-date":c},createdAt:new Date().toISOString()}}return(l,e)=>{var s,i,c,j,J;return p(),g("div",xn,[t("div",_n,[t("div",hn,[t("div",kn,[q(f(Y),{class:"cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white items-center justify-center gap-1 px-2 py-1 rounded-md text-xs font-medium",onClick:e[0]||(e[0]=E=>l.$emit("go-back"))},{default:ce(()=>e[24]||(e[24]=[t("i",{class:"fa-solid fa-chevron-left text-xs"},null,-1),re(" Go Back ")])),_:1,__:[24]})]),t("div",wn,[q(f(Y),{class:"cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white items-center justify-center px-2 py-1 rounded-md text-xs font-medium",onClick:e[1]||(e[1]=E=>l.$emit("go-back"))},{default:ce(()=>e[25]||(e[25]=[t("i",{class:"fa-solid fa-chevron-left text-xs"},null,-1)])),_:1,__:[25]})]),t("div",Sn,L(l.activeSprint),1)]),t("div",Cn,[t("div",$n,[t("button",{class:ee(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",te.value==="kanban"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"List view",onClick:e[2]||(e[2]=E=>te.value="kanban")},e[26]||(e[26]=[t("i",{class:"fa-solid fa-chart-kanban"},null,-1)]),2),t("button",{onClick:e[3]||(e[3]=E=>te.value="table"),class:ee(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",te.value==="table"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gallery view"},e[27]||(e[27]=[t("i",{class:"fa-solid fa-align-left"},null,-1)]),2),t("button",{onClick:e[4]||(e[4]=E=>te.value="mindmap"),class:ee(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",te.value==="mindmap"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"MindMap view"},e[28]||(e[28]=[t("i",{class:"fa-solid fa-chart-diagram"},null,-1)]),2),t("button",{onClick:e[5]||(e[5]=E=>te.value="calendar"),class:ee(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",te.value==="calendar"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Calendar view"},e[29]||(e[29]=[t("i",{class:"fa-regular fa-calendar"},null,-1)]),2),t("button",{onClick:e[6]||(e[6]=E=>te.value="gantt"),class:ee(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",te.value==="gantt"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gantt Chart view"},e[30]||(e[30]=[t("i",{class:"fa-solid fa-chart-gantt"},null,-1)]),2),t("button",{onClick:e[7]||(e[7]=E=>te.value="timeline"),class:ee(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",te.value==="timeline"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Timeline view"},e[31]||(e[31]=[t("i",{class:"fa-solid fa-timeline"},null,-1)]),2)])])]),t("div",Tn,[te.value=="kanban"?(p(),g("div",Dn,[nt(q(Kl,null,null,512),[[Qt,f(Qe)]]),nt(t("div",Vn,[q(f(P),{onOnPlus:ll,"onDelete:column":e[8]||(e[8]=E=>tl(E)),"onUpdate:column":e[9]||(e[9]=E=>Yt(E)),onReorder:$t,onAddColumn:ve,"onSelect:ticket":$e,board:Je.value,onOnBoardUpdate:dt,variable_id:be.value,sheet_id:ue.value},{"column-footer":ce(E=>{var M,$,fe,me,le;return[($=(M=f(G))==null?void 0:M.transitions)!=null&&$.all_allowed&&!((le=(me=(fe=f(G))==null?void 0:fe.transitions)==null?void 0:me.all_allowed)!=null&&le.includes(E.column.title))&&f(G).transitions.currentColumn!=E.column.title?(p(),g("div",Ln," Disbale ( you can't drop here ) ")):B("",!0)]}),ticket:ce(({ticket:E})=>[q(xa,{selectedVar:be.value,onSelect:()=>{$e(E)},ticket:E},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"])],512),[[Qt,!f(Qe)]])])):B("",!0),te.value=="table"?(p(),ye(ya,{key:1,onToggleVisibility:rl,onAddVar:e[10]||(e[10]=()=>{gt.value=!0}),isPending:f(Qe)||f(nl),columns:dl.value,rows:Je.value,canCreate:f(St),canCreateVariable:f(wt),onCreate:ul},null,8,["isPending","columns","rows","canCreate","canCreateVariable"])):B("",!0),te.value==="mindmap"?(p(),g(De,{key:2},[t("div",En,[t("div",{ref_key:"mindMapRef",ref:I,class:"flex-1 h-full overflow-y-hidden rounded-md relative"},null,512),Ne.value?(p(),g("div",Mn,[t("div",An,[e[33]||(e[33]=t("h3",{class:"text-sm font-semibold text-secondary"},"Format Node",-1)),t("button",{onClick:e[11]||(e[11]=E=>Ne.value=!1),class:"text-gray-400 hover:text-gray-700"},e[32]||(e[32]=[t("i",{class:"fa-solid fa-times"},null,-1)]))]),t("div",In,[t("div",null,[e[36]||(e[36]=t("h4",{class:"text-xs font-semibold text-secondary uppercase mb-3"}," Colors ",-1)),t("div",Bn,[e[34]||(e[34]=t("label",{class:"block text-xs text-secondary mb-1"},"Background",-1)),t("div",On,[t("div",{class:"h-10 w-10 rounded-md border cursor-pointer relative",style:ke({backgroundColor:qe.value.background})},[t("input",{type:"color",value:qe.value.background,class:"absolute inset-0 opacity-0 cursor-pointer",onInput:e[12]||(e[12]=E=>ht("bg_color",E)),style:{"pointer-events":"all"}},null,40,Nn)],4),q(f(Q),{modelValue:qe.value.background,placeholder:"#3b82f6",class:"flex-1",readonly:""},null,8,["modelValue"])])]),t("div",Pn,[e[35]||(e[35]=t("label",{class:"block text-xs text-secondary mb-1"},"Text",-1)),t("div",qn,[t("div",{class:"h-10 w-10 rounded-md border cursor-pointer relative",style:ke({backgroundColor:qe.value.color})},[t("input",{type:"color",value:qe.value.color,class:"absolute inset-0 opacity-0 cursor-pointer",onInput:e[13]||(e[13]=E=>ht("color",E)),style:{"pointer-events":"all"}},null,40,Un)],4),q(f(Q),{modelValue:qe.value.color,placeholder:"#3b82f6",class:"flex-1",readonly:""},null,8,["modelValue"])])])]),t("div",null,[t("div",jn,[t("div",null,[e[38]||(e[38]=t("label",{class:"block text-xs text-secondary mb-1"},"Weight",-1)),t("select",{class:"w-full h-8 border rounded px-2 text-sm",value:qe.value.fontWeight,onChange:e[14]||(e[14]=E=>ht("font_weight",E))},e[37]||(e[37]=[t("option",{value:"lighter"},"Light",-1),t("option",{value:"normal"},"Normal",-1),t("option",{value:"bold"},"Bold",-1),t("option",{value:"bolder"},"Extra Bold",-1)]),40,zn)])])])]),t("div",Fn,[t("button",{class:"w-full cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium hover:shadow-md disabled:opacity-60",disabled:Te.value,onClick:Pt},[Te.value?(p(),g("span",Hn)):B("",!0),t("span",null,L(Te.value?"Updating...":"Update"),1)],8,Rn)])])):B("",!0)]),ie.value?(p(),g("div",Wn,[t("div",Kn,[e[39]||(e[39]=t("h3",{class:"text-lg font-semibold mb-4"},"Insert Web Link",-1)),nt(t("input",{"onUpdate:modelValue":e[15]||(e[15]=E=>U.value=E),type:"text",placeholder:"Enter or paste a URL",class:"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[xl,U.value]]),t("div",Qn,[t("button",{onClick:ae,class:"px-4 py-2 rounded-md bg-gray-200 hover:bg-gray-300"}," Cancel "),t("button",{disabled:!U.value,onClick:k,class:ee(["px-4 py-2 rounded-md text-white",U.value?"bg-blue-500 hover:bg-blue-600":"bg-blue-300 cursor-not-allowed"])}," Insert ",10,Gn)])])])):B("",!0),yt.value?(p(),g("div",{key:1,class:"absolute top-40 left-70 bg-bg-body rounded-lg p-4 shadow-lg z-100 min-w-[328px] border",onClick:e[17]||(e[17]=Ie(()=>{},["stop"]))},[q(f(Q),{autofocus:!0,modelValue:xt.value,"onUpdate:modelValue":e[16]||(e[16]=E=>xt.value=E),placeholder:"Add New list",onKeyup:Wt(_,["enter"])},null,8,["modelValue"]),e[40]||(e[40]=t("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),t("div",Jn,[q(f(Y),{onClick:_,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:ce(()=>[re(L(f(it)?"Adding...":"Add list"),1)]),_:1}),t("i",{class:"fa-solid fa-close cursor-pointer",onClick:O})])])):B("",!0)],64)):B("",!0),te.value==="calendar"?(p(),ye(f(X),{key:3,data:Je.value,"onSelect:ticket":$e,class:"min-h-[600px]"},null,8,["data"])):B("",!0),te.value==="gantt"?(p(),ye(f(K),{key:4,data:Je.value,"onSelect:ticket":$e},null,8,["data"])):B("",!0),te.value==="timeline"?(p(),ye(f(A),{key:5,data:Je.value,"onSelect:ticket":$e},null,8,["data"])):B("",!0),q(f(T),{onClick:e[18]||(e[18]=Ie(()=>{},["stop"])),modelValue:xe.value,"onUpdate:modelValue":e[19]||(e[19]=E=>xe.value=E),title:"Delete List",itemLabel:"list",itemName:(s=ze.value)==null?void 0:s.title,requireMatchText:(i=ze.value)==null?void 0:i.title,confirmText:"Delete workspace",cancelText:"Cancel",size:"md",loading:f(it),onConfirm:el,onCancel:e[20]||(e[20]=()=>{xe.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),bt.value?(p(),ye(f(N),{selectedVariable:be.value,listId:(c=ze.value)==null?void 0:c.title,sheet_id:ue.value,key:"createTaskModalKey",modelValue:bt.value,"onUpdate:modelValue":e[21]||(e[21]=E=>bt.value=E),onSubmit:e[22]||(e[22]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):B("",!0),(j=tt.value)!=null&&j._id?(p(),ye(f(Z),{key:7,details:tt.value,onClose:e[23]||(e[23]=()=>{$e({variables:{}})}),showPanel:!!((J=tt.value)!=null&&J._id)},null,8,["details","showPanel"])):B("",!0)])])}}}),Xn=Jt(Zn,[["__scopeId","data-v-0a89f777"]]),Yn={class:"flex-auto flex-grow h-full min-h-0 rounded-[6px] overflow-x-auto flex-col flex"},er={key:1,class:"flex flex-col flex-1 min-h-0"},tr={class:"overflow-x-auto w-full"},lr={class:"min-w-[1200px] h-full"},ar={key:0,class:"p-4 w-full min-w-0 flex flex-col flex-1 min-h-0 overflow-x-auto"},sr={class:"flex items-center justify-between mt-2"},nr={class:"text-sm font-semibold flex gap-2 items-center"},rr={class:"flex items-center gap-2 relative",ref:"filterDropdownRef"},or={class:"mt-3"},ir={key:0,class:"flex items-center gap-2 overflow-x-auto no-scrollbar py-1"},dr=["onClick"],ur={key:1,class:"relative flex items-center gap-3"},cr={class:"relative flex-shrink-0"},pr={class:"flex items-center gap-2 truncate"},fr=["src"],vr={class:"truncate"},mr={key:0,class:"absolute left-0 top-full mt-1 w-44 bg-bg-card border border-gray-200 rounded-lg shadow-lg z-[9999]"},gr={class:"flex flex-col"},br=["onClick"],yr={class:"flex gap-2 overflow-x-auto no-scrollbar flex-1"},xr=["onClick"],_r={key:0,class:"w-full h-full min-h-[250px] flex justify-center items-center"},hr={key:1,class:"flex-1 min-h-0 overflow-y-auto"},kr={class:"rounded-md relative pt-2 flex flex-col flex-1 min-h-0 bg-bg-card overflow-hidden"},wr={class:"flex justify-between gap-4 px-3 pb-2 border-b border-border-input"},Sr={class:"flex items-center gap-2 min-w-0 py-1"},Cr=["onClick"],$r={class:"flex items-center lg:gap-2 max-w-full"},Tr={class:"flex items-center lg:gap-2 max-w-full"},Dr={class:"truncate max-w-[160px]"},Vr={key:1,class:"absolute left-0 mt-2 w-60 bg-bg-card border-accent-hover rounded-xl shadow-lg z-50 max-h-64 overflow-y-auto overflow-x-hidden"},Lr={class:"relative flex-1"},Er=["onClick"],Mr=["onBlur","onKeyup"],Ar={class:"relative ml-2 flex gap-2"},Ir=["onClick"],Br=["onClick"],Or={class:"flex justify-end items-center"},Nr={class:"flex gap-2"},Pr={class:"gap-2 hidden lg:flex"},qr={key:0,class:"flex gap-2"},Ur={key:0,class:"gap-2"},jr={class:"hidden lg:fxex bg-[#E6E1F5] text-accent px-3 py-1 rounded-2xl justify-center items-center"},zr={key:0,class:"flex lg:hidden ms-2"},Fr=["title"],Rr=["disabled"],Hr={class:"absolute z-50 top-10 mb-2 -translate-x-2/3 bg-card border border-accent text-accent text-xs px-2 py-1 rounded whitespace-nowrap"},Wr={key:0,class:"fixed inset-0 z-50 flex items-center justify-center w-full"},Kr={class:"relative bg-bg-card rounded-lg p-4 mx-3 w-full max-w-md lg:max-w-2xl xl:max-w-3xl"},Qr={class:"flex flex-col gap-2 mt-4"},Gr={class:"text-sm text-muted mb-2"},Jr={class:"flex gap-2 w-full"},Zr={key:0,class:"mt-1 w-full bg-bg-card rounded-md max-h-64 overflow-y-auto"},Xr=["onClick"],Yr={class:"flex items-center justify-between"},eo={class:"font-medium"},to={class:"text-muted text-xs ml-2"},lo={class:"flex gap-2 text-xs"},ao={class:"text-muted border border-border-input rounded-md px-3 py-1"},so={key:1,class:"absolute top-full left-0 mt-1 w-full bg-bg-card border border-border-input rounded-md shadow-md p-4 z-50 text-center text-muted"},no={key:0,class:"w-full h-full min-h-[250px] flex justify-center items-center"},ro={class:"flex-1 min-h-0 overflow-y-auto"},oo={key:1,class:"bg-bg-card w-full p-6 flex flex-col items-center justify-center text-center gap-4 h-[100%] mt-3"},io={class:"text-lg font-semibold text-accent"},uo={class:"text-sm text-muted max-w-md"},co={key:2,class:"w-full h-full min-h-[250px] flex flex-col items-center justify-center text-center gap-4 p-6"},po={class:"text-xl font-semibold text-accent"},fo={class:"text-sm text-muted max-w-md"},Ht=400,vo=mt({__name:"Plan",setup(h){const{isDark:y}=Gt(),N=b(!1),T=b(""),Z=b(!1),P=b(!1),{canCreateCard:d}=ml(),F=b(!1),W=b(null),X=b(!1),K=b(!1),A=D(()=>U.value.value),Y=b(""),Q=[{label:"Milestone",value:"milestone",dot:"#7d68c8"},{label:"Sprint",value:"sprint",dot:"#7d68c8"},{label:"Huddle",value:"huddle",dot:"#7d68c8"}],ie=D(()=>A.value?A.value.charAt(0).toUpperCase()+A.value.slice(1):""),U=b(Q[0]),R=b(null),I=b(!1);Rt(R,()=>{I.value=!1});const x=()=>{N.value=!1},m=()=>{F.value=!0},v=b(!1),r=()=>{v.value=!v.value},{workspaceId:n}=Ul(),u=b(!1),{moveSelectedToSprint:k,moveSelectedToBacklog:ae,deleteSelected:se,saveSprintMeta:_,toggleStartSprint:O}=Ma();function ge(o){Y.value=o,Ze.value=!1}function te(o){Y.value=o,Ze.value=!1}function pe(o){Y.value=o,Ze.value=!1}const{data:Ue,refetch:Oe}=vl(n,A,Y);z(Y,()=>{Oe()});const{data:gt}=ca(n),Ne=D(()=>{var o;return((o=gt.value)==null?void 0:o.modules.filter(a=>{var H;return((H=a==null?void 0:a.variables)==null?void 0:H["module-title"])!=="Pin"}))||[]});z(()=>A.value,(o,a)=>{o!==a&&Oe()});const{mutate:wt,isPending:St}=Va({onSuccess:()=>{Tt.invalidateQueries({queryKey:["sprint-list"]}),We.value=!1}}),de=b(null),We=b(!1),ot=()=>{var o;wt((o=de.value)==null?void 0:o._id)},{mutate:et,isPending:je}=Ol({onSuccess:o=>{_({name:o.title}),Ve({id:G.value,payload:{title:o.title,start_date:o.start_date,end_date:o.end_date,goal:o.goal,duration:Number(o.duration_days)}}),Qe.value=!1}}),{mutate:Ve,isPending:Pe}=Da({onSuccess:()=>{ne()}}),it=async o=>{je.value=!0;try{await et({id:G.value,payload:{title:o.title,duration:o.duration,start_date:o.start,end_date:o.end,goal:o.goal}})}finally{je.value=!1,Qe.value=!1}},{data:ve,refetch:w,isLoading:C}=ka(n.value,A),V=D(()=>{var o;return((o=ve.value)==null?void 0:o.sprints)??[]});z(()=>A.value,(o,a)=>{o!==a&&w()});const{refetch:ue,isPending:Ke}=vl(n,A),be=D(()=>{var o,a;return(a=(o=ve==null?void 0:ve.value)==null?void 0:o.sprints[0])==null?void 0:a._id}),G=b(be.value);z(()=>be.value,o=>{G.value=o}),z(()=>G.value,o=>{var a;de.value=((a=ve.value)==null?void 0:a.sprints.find(H=>H._id===o))||null});const{data:oe,refetch:ne}=$a(G,{enabled:D(()=>!!G.value)}),Qe=b(!1),Ct=()=>{localStorage.setItem("asFirstTime",JSON.stringify(!0)),Qe.value=!0},bt=()=>JSON.parse(localStorage.getItem("asFirstTime")||"false"),tt=()=>{var o;((o=oe.value)==null?void 0:o.status)==="active"&&bt()&&(F.value=!0,localStorage.setItem("asFirstTime",JSON.stringify(!1)))};Al(()=>{tt()}),z(()=>{var o;return(o=oe.value)==null?void 0:o.status},()=>{tt()});const{data:$e,refetch:Zt}=wa(G);z(()=>G.value,()=>{G.value&&ne()});const Ge=b(""),$t=b(null),dt=D(()=>{const o=$e.value;if(!Ge.value||!(o!=null&&o.backlog_items))return[];const a=Ge.value.toLowerCase().trim();return o.backlog_items.filter(H=>{var j,J,E,M,$,fe,me,le,he,st;const _e=((E=(J=(j=H.card)==null?void 0:j.variables)==null?void 0:J["card-title"])==null?void 0:E.toLowerCase())||"",l=((fe=($=(M=H.card)==null?void 0:M.variables)==null?void 0:$["card-code"])==null?void 0:fe.toLowerCase())||"",e=((he=(le=(me=H.card)==null?void 0:me.variables)==null?void 0:le["card-status"])==null?void 0:he.toLowerCase())||"",s=((st=H.priority)==null?void 0:st.toLowerCase())||"",i=String(H._id||"").toLowerCase(),c=String(H.card_id||"").toLowerCase();return _e.includes(a)||l.includes(a)||e.includes(a)||s.includes(a)||i.includes(a)||c.includes(a)})});function Xt(o){Ge.value=o}function Mt(){dt.value.length===1&&ze(dt.value[0])}const yt={high:"bg-red-500/20 text-red-500",medium:"bg-yellow-500/20 text-yellow-500",low:"bg-green-500/20 text-green-500"};function xt(o){const a=o==null?void 0:o.toLowerCase();return yt[a]??"bg-gray-500/20 text-gray-500"}function Yt(o){$t.value=o,kt.value=!1}const xe=D(()=>{var H,_e,l,e;const o=(H=$e.value)==null?void 0:H.backlog_items;if(!o)return null;const a=(o||[]).map(s=>{var j,J,E,M,$;const i=((j=s==null?void 0:s.card)==null?void 0:j.variables)||{},c=((J=s==null?void 0:s.card)==null?void 0:J._id)||s.card_id;return{id:c,key:i["card-code"]||(c==null?void 0:c.slice(-6))||"PRJ-?",summary:i["card-title"]||"(untitled)",type:"Story",status:el(String(i["card-status"]||"").trim()),assignee:((M=(E=s==null?void 0:s.card)==null?void 0:E.assigned_to)==null?void 0:M.name)||"Unassigned",storyPoints:Number(s.story_points||0),priority:tl(String(i.priority||"").trim()),createdAt:(($=s==null?void 0:s.card)==null?void 0:$.created_at)||new Date().toISOString(),description:i["card-description"]||""}});return{id:(_e=$e.value)==null?void 0:_e._id,name:((l=$e.value)==null?void 0:l.title)||"Sprint 1",title:(e=$e.value)==null?void 0:e.title,goal:"",start:"",end:"",started:!1,tickets:a}});function ze(o){console.log("selected sprint id",o),G.value=o._id,ct.value=!1}function el(o){const a=o.toLowerCase();return a.includes("progress")?"In Progress":a.includes("done")||a.includes("complete")?"Done":"Todo"}function tl(o){const a=o.toLowerCase();return a==="highest"||a==="blocker"||a==="critical"?"Highest":a==="high"||a==="major"?"High":a==="medium"||a==="normal"?"Medium":"Low"}const{mutate:ll}=La({onSuccess:()=>{rt.success("Card removed from sprint successfully"),ut()},onError:o=>{rt.error("Failed to remove card from sprint",o)}});function ut(){Zt(),w(),ue(),ne()}function al(o,a){const H=Array.isArray(o)?o:[o],_e=a||G.value;!_e||!H.length||H.forEach(l=>{ll({sprintId:_e,cardId:l})})}const sl=b(!1),Je=b(null);function At(){u.value=!0,Je.value=null}function It(o){Je.value=o,N.value=!0,sl.value=!0}const Fe=b(!1);function nl(){Fe.value=!0}const Tt=_l(),{mutate:rl,isPending:Dt}=Ta({onSuccess:o=>{_({name:o.title}),Tt.invalidateQueries({queryKey:["sprint-list"]}),Fe.value=!1}}),{mutate:Vt,isPending:ol}=Ol({onSuccess:o=>{_({name:o.title}),Tt.invalidateQueries({queryKey:["sprint-list"]}),Fe.value=!1}}),Re=b("");function _t(o){const a=Re.value.trim();if(!a||a===o.title){qt();return}Vt({id:o._id,payload:{workspace_id:n.value,title:a}}),Te.value=null}function il(o){var a;de.value?Vt({id:(a=de.value)==null?void 0:a._id,payload:{workspace_id:n.value,title:o.name,sprintType:o.value,description:o.description}}):rl({payload:{workspace_id:n.value,title:o.name,sprintType:o.value,description:o.description}})}const Bt=b([]);function dl(o){de.value=null,Fe.value=!0,Bt.value=o}function Ot(o){de.value=o,We.value=!0}const{mutate:ul,isPending:Nt}=Ca(G,{onSuccess:()=>{ne()}}),He=()=>{ul({})},lt=b(null),at=b(0);let qe=!1;Al(()=>{if(!lt.value)return;const o=lt.value.offsetWidth;at.value=o/3});function Le(){qe=!0,document.addEventListener("mousemove",ht),document.addEventListener("mouseup",we)}function ht(o){if(!qe||!lt.value)return;const a=lt.value.getBoundingClientRect(),H=o.clientX-a.left;H<Ht?at.value=Ht:H>a.width-Ht?at.value=a.width-Ht:at.value=H}function we(){qe=!1,document.removeEventListener("mousemove",ht),document.removeEventListener("mouseup",we)}const Te=b(null);function Pt(o){Te.value=o._id,o.tempTitle=o.title,Re.value=o.title}function qt(){var a;const o=(a=ve.value)==null?void 0:a.sprints.find(H=>H._id===Te.value);o&&(o.tempTitle=o.title),Te.value=null}Rt(W,()=>{K.value=!1});const cl=o=>{console.log("selected type",o),U.value=o,X.value=!1};Rt(R,()=>{X.value=!1});const Ut=b(null),ct=b(!1);Rt(Ut,()=>{ct.value=!1});const kt=b(!1),pl=()=>{kt.value=!0},jt=()=>{kt.value=!1,Ge.value=""},zt=b("all"),Ze=b(!1),pt=D(()=>{var a,H,_e;if(zt.value==="all")return"All Milestones";const o=(H=(a=gt.value)==null?void 0:a.modules)==null?void 0:H.find(l=>l._id===zt.value);return((_e=o==null?void 0:o.variables)==null?void 0:_e["module-title"])||"Select Module"});return(o,a)=>{var H,_e,l,e,s,i,c,j,J,E,M,$,fe,me,le,he,st,Ft,hl,kl,wl,Sl,Cl,$l;return p(),g("div",Yn,[F.value?(p(),ye(Xn,{key:0,sptint_id:G.value,searchQuery:T.value,"active-sprint":A.value,onGoBack:a[0]||(a[0]=S=>F.value=!1)},null,8,["sptint_id","searchQuery","active-sprint"])):B("",!0),F.value?B("",!0):(p(),g("div",er,[f(Pe)?(p(),ye(Kl,{key:0})):B("",!0),t("div",tr,[t("div",lr,[f(Pe)?B("",!0):(p(),g("div",ar,[t("div",{ref_key:"containerRef",ref:lt,class:"flex gap-2 flex-1 min-h-0 overflow-x-auto group"},[t("section",{class:"px-4 rounded-md relative flex flex-col min-h-0 bg-bg-card",style:ke({width:at.value+"px"})},[t("div",sr,[t("h2",nr,[nt(t("input",{type:"checkbox",class:"custom-checkbox bg-bg-body border border-border-input flex-shrink-0","onUpdate:modelValue":a[1]||(a[1]=S=>Z.value=S)},null,512),[[pa,Z.value]]),re(" Tickets ("+L((_e=(H=f(Ue))==null?void 0:H.cards)==null?void 0:_e.length)+" "+L(((e=(l=f(Ue))==null?void 0:l.cards)==null?void 0:e.length)>1?"Tasks":"Task")+") ",1)]),t("div",rr,[f(d)?(p(),g("button",{key:0,class:"w-8 h-8 rounded cursor-pointer text-sm hover:bg-bg-body flex items-center justify-center",onClick:At},a[22]||(a[22]=[t("i",{class:"text-text-primary fa-regular fa-plus"},null,-1)]))):B("",!0)],512)]),t("div",or,[A.value==="milestone"?(p(),g("div",ir,[t("button",{onClick:a[2]||(a[2]=S=>ge("")),class:ee(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium transition-colors whitespace-nowrap",Y.value===""?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])}," All Modules ",2),(p(!0),g(De,null,Be(Ne.value,S=>(p(),g("button",{key:S._id,onClick:Ee=>ge(S._id),class:ee(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium transition-colors whitespace-nowrap cursor-pointer",Y.value===S._id?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])},L(S.variables["module-title"]),11,dr))),128))])):A.value==="huddle"||A.value==="sprint"?(p(),g("div",ur,[t("div",cr,[t("button",{class:"h-8 min-w-[160px] flex items-center justify-between px-2 rounded-md border text-sm border-border hover:bg-bg-body",onClick:a[3]||(a[3]=S=>Ze.value=!Ze.value)},[t("span",pr,[t("img",{src:f(hs),alt:"filter",class:"w-4 h-4"},null,8,fr),t("span",vr,L(pt.value||"All Milestones"),1)]),a[23]||(a[23]=t("i",{class:"fas fa-chevron-down text-xs ml-2"},null,-1))]),Ze.value?(p(),g("div",mr,[t("ul",gr,[t("li",{class:"px-3 py-2 cursor-pointer hover:bg-gray-50 hover:text-gray-600",onClick:a[4]||(a[4]=S=>ge(""))}," All Milestones "),(p(!0),g(De,null,Be(Ne.value,S=>(p(),g("li",{key:S._id,class:"px-3 py-2 cursor-pointer hover:bg-gray-50 hover:text-gray-600",onClick:Ee=>te(S._id)},L(S.variables["module-title"]),9,br))),128))])])):B("",!0)]),t("div",yr,[(p(!0),g(De,null,Be(V.value,S=>(p(),g("button",{key:S._id,onClick:Ee=>pe(S._id),class:ee(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium whitespace-nowrap transition-colors",Y.value===S._id?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])},L(S.title),11,xr))),128))])])):B("",!0)]),f(Ke)?(p(),g("div",_r,a[24]||(a[24]=[t("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):(p(),g("div",hr,[q(Ga,{checkedAll:Z.value,"sprint-type":A.value,searchQuery:T.value,"module-id":Y.value,onMoveSelectedToSprint:f(k),onDeleteSelectedBacklog:a[5]||(a[5]=S=>f(se)("backlog")),onOpenTicket:It,onTicketMovedToBacklog:al,onOpenCreateTicket:At},null,8,["checkedAll","sprint-type","searchQuery","module-id","onMoveSelectedToSprint"])]))],4),t("div",{class:"h-full w-[3px] relative border z-10 opacity-0 group-hover:opacity-100 bg-red hover:bg-accent cursor-col-resize transition",onMousedown:Le},null,32),t("section",kr,[t("div",wr,[t("div",Sr,[t("div",{ref_key:"elipseWrapperSprint",ref:W,class:"relative inline-block"},[t("button",{onClick:a[6]||(a[6]=Ie(S=>K.value=!K.value,["stop"])),class:"flex items-center gap-2 lg:px-3 px-2 py-1.5 text-sm font-medium bg-transparent rounded-lg",style:ke({border:"1px solid "+U.value.dot})},[t("span",{class:"w-2 h-2 rounded-full hidden lg:flex",style:ke({backgroundColor:U.value.dot})},null,4),re(" "+L(U.value.label)+" ",1),a[25]||(a[25]=t("i",{class:"fas fa-chevron-down text-xs"},null,-1))],4),q(Il,{name:"fade"},{default:ce(()=>[K.value?(p(),g("ul",{key:0,onClick:a[7]||(a[7]=Ie(()=>{},["stop"])),class:"absolute left-0 mt-2 w-44 bg-bg-dropdown border border-border rounded-xl shadow-lg z-50"},[(p(),g(De,null,Be(Q,S=>t("li",{key:S.value,onClick:Ee=>(cl(S),K.value=!K.value),class:"flex items-center gap-3 px-4 py-2 text-sm cursor-pointer"},[t("span",{class:"w-2 h-2 rounded-full",style:ke({backgroundColor:S.dot})},null,4),re(" "+L(S.label),1)],8,Cr)),64))])):B("",!0)]),_:1})],512),t("div",$r,[t("div",Tr,[t("div",{ref_key:"sprintDropdownWrapperRef",ref:Ut,class:"relative min-w-0"},[(s=f(ve))!=null&&s.sprints.length?(p(),g("button",{key:0,onClick:a[8]||(a[8]=S=>ct.value=!ct.value),class:ee(["flex items-center gap-3 lg:px-6 px-1 py-1.5 rounded-lg text-sm font-medium transition-all",G.value?"text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"]),style:ke(G.value?{backgroundColor:U.value.dot}:{})},[t("span",Dr,L((j=(c=(i=f(ve))==null?void 0:i.sprints)==null?void 0:c.find(S=>S._id===G.value))==null?void 0:j.title),1),a[26]||(a[26]=t("i",{class:"fas fa-chevron-down text-xs"},null,-1))],6)):B("",!0),ct.value?(p(),g("div",Vr,[(p(!0),g(De,null,Be((J=f(ve))==null?void 0:J.sprints,S=>{var Ee;return p(),g("div",{key:S._id,class:"relative px-4 py-2 flex items-center justify-between text-sm cursor-pointer transition-color"},[t("div",Lr,[Te.value!==S._id?(p(),g("button",{key:0,class:"text-left truncate w-full",onClick:Xe=>ze(S)},L(S.title),9,Er)):nt((p(),g("input",{key:1,ref_for:!0,ref:"editingInputRef","onUpdate:modelValue":a[9]||(a[9]=Xe=>Re.value=Xe),class:"w-full px-1 py-1 text-sm rounded outline-none bg-bg-card border border-[#7d68c8]",placeholder:"Enter new name",onClick:a[10]||(a[10]=Ie(()=>{},["stop"])),onBlur:Xe=>_t(S),onKeyup:[Wt(Xe=>_t(S),["enter"]),Wt(qt,["esc"])]},null,40,Mr)),[[xl,Re.value]])]),t("div",Ar,[t("button",{class:"ml-2 text-xs text-gray-400 hover:text-accent",onClick:Ie(Xe=>Pt(S),["stop"])},a[27]||(a[27]=[t("i",{class:"fas fa-pen"},null,-1)]),8,Ir),(Ee=f(ve))!=null&&Ee.sprints.length&&Te.value!==S._id?(p(),g("button",{key:0,onClick:Ie(Xe=>Ot(S),["stop"]),class:"w-4 h-4 rounded-full flex items-center justify-center text-red-500"},a[28]||(a[28]=[t("i",{class:"fas fa-times text-xs"},null,-1)]),8,Br)):B("",!0)])])}),128))])):B("",!0)],512)])]),t("button",{onClick:a[11]||(a[11]=S=>{var Ee;return dl((Ee=f(ve))==null?void 0:Ee.sprints)}),class:ee(["w-8 h-8 lg:flex sm:hidden items-center justify-center rounded-full border text-white transition-colors shrink-0"]),style:ke({backgroundColor:U.value.dot})},a[29]||(a[29]=[t("i",{class:"fa-solid fa-plus"},null,-1)]),4)]),t("div",Or,[t("div",Nr,[(M=(E=f(oe))==null?void 0:E.cards)!=null&&M.length?(p(),g("button",{key:0,class:"flex items-center justify-center w-8 h-8 me-2 rounded-full bg-accent",onClick:pl,style:ke(G.value?{backgroundColor:U.value.dot}:{})},a[30]||(a[30]=[t("i",{class:"fa-solid fa-magnifying-glass text-white"},null,-1)]),4)):B("",!0),(($=f(oe))==null?void 0:$.status)==="active"&&f(oe).cards.length?(p(),g("button",{key:1,class:"flex lg:hidden cursor-pointer text-white items-center justify-center rounded-full ms-2 w-7 h-7 text-sm font-medium mt-0.5",onClick:m,style:ke(G.value?{backgroundColor:U.value.dot}:{})},a[31]||(a[31]=[t("i",{class:"fa-regular fa-eye text-sm"},null,-1)]),4)):B("",!0)]),t("div",Pr,[((fe=f(oe))==null?void 0:fe.status)==="active"?(p(),g("div",qr,[q(Ye,{size:"sm",onClick:He,variant:(f(y),"primary"),class:"border-border-input border",style:ke(G.value?{backgroundColor:U.value.dot}:{})},{default:ce(()=>[re(L(f(Nt)?"Ending...":"End"),1)]),_:1},8,["variant","style"]),t("button",{class:"cursor-pointer text-white flex items-center justify-end gap-1 px-2 py-1 rounded-md text-sm font-medium",onClick:m,style:ke(G.value?{backgroundColor:U.value.dot}:{})},a[32]||(a[32]=[t("i",{class:"fa-regular fa-eye text-sm"},null,-1),re(" Preview ")]),4)])):(p(),ye(Ye,{key:1,size:"sm",variant:(f(y),"primary"),class:"border-border-input border",onClick:Ct,disabled:!xe.value||xe.value.tickets.length===0||f(oe).status==="completed",style:ke({backgroundColor:U.value.dot})},{default:ce(()=>[re(" Start "+L(U.value.label),1)]),_:1},8,["variant","disabled","style"]))]),xe.value&&xe.value.tickets.length?(p(),g("div",Ur,[t("span",jr,L((me=f(oe))==null?void 0:me.status),1),((le=f(oe))==null?void 0:le.status)==="active"?(p(),g("div",zr,[t("button",{onClick:He,class:"w-7 h-7 flex items-center justify-center rounded-full bg-accent",title:f(Nt)?"Ending...":"End Sprint",style:ke(G.value?{backgroundColor:U.value.dot}:{})},a[33]||(a[33]=[t("i",{class:"fa-solid fa-flag-checkered text-white"},null,-1)]),12,Fr)])):(p(),g("button",{key:1,onClick:Ct,disabled:!xe.value||xe.value.tickets.length===0||f(oe).status==="completed",class:"w-7 h-7 flex items-center justify-center rounded-full text-white bg-accent disabled:opacity-50 disabled:cursor-not-allowed lg:hidden",title:"Start Sprint",style:ke(G.value?{backgroundColor:U.value.dot}:{})},a[34]||(a[34]=[t("i",{class:"fa-solid fa-play text-sm"},null,-1)]),12,Rr))])):B("",!0),((he=f(oe))==null?void 0:he.status)==="active"?(p(),g("div",{key:1,class:"relative inline-flex ms-2",onMouseenter:a[12]||(a[12]=S=>v.value=!0),onMouseleave:a[13]||(a[13]=S=>v.value=!1),onClick:r},[a[35]||(a[35]=t("span",{class:"flex lg:hidden bg-emerald-500 text-white w-7 h-7 rounded-full justify-center items-center cursor-pointer"},[t("i",{class:"fa-solid fa-check"})],-1)),nt(t("div",Hr," Sprint is active ",512),[[Qt,v.value]])],32)):B("",!0)]),q(Il,{name:"fade"},{default:ce(()=>[kt.value?(p(),g("div",Wr,[t("div",{class:"absolute inset-0 bg-black/10 backdrop-blur-sm",onClick:jt}),t("div",Kr,[t("div",{class:"flex justify-end"},[t("button",{onClick:jt,class:"px-2 py-1 rounded bg-bg-input border border-border-input text-accent"},a[36]||(a[36]=[t("i",{class:"fa-solid fa-xmark"},null,-1)]))]),t("div",Qr,[t("p",Gr," Search for "+L(A.value)+" by name, status, or priority. Start typing to filter results. ",1),t("div",Jr,[q(ga,{placeholder:`Search in ${A.value}`,onOnChange:Xt,onKeyup:Wt(Mt,["enter"]),class:"flex-1"},null,8,["placeholder"])]),dt.value.length&&Ge.value?(p(),g("div",Zr,[t("ul",null,[(p(!0),g(De,null,Be(dt.value,S=>{var Ee,Xe,Tl,Dl,Vl,Ll;return p(),g("li",{key:S._id,onClick:mo=>Yt(S),class:"px-4 py-2 cursor-pointer hover:bg-bg-hover text-text-primary border-b border-border-input"},[t("div",Yr,[t("div",null,[t("span",eo,L((Xe=(Ee=S.card)==null?void 0:Ee.variables)==null?void 0:Xe["card-title"]),1),t("span",to," ("+L((Dl=(Tl=S.card)==null?void 0:Tl.variables)==null?void 0:Dl["card-code"])+") ",1)]),t("div",lo,[t("span",{class:ee(["px-3 py-1 rounded text-md",xt(S.priority)])},L(S.priority),3),t("span",ao,L((Ll=(Vl=S.card)==null?void 0:Vl.variables)==null?void 0:Ll["card-status"]),1)])])],8,Xr)}),128))])])):Ge.value&&!dt.value.length?(p(),g("div",so," No "+L(A.value)+' found matching "'+L(Ge.value)+'" ',1)):B("",!0)])])])):B("",!0)]),_:1})]),f(C)?(p(),g("div",no,a[37]||(a[37]=[t("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):B("",!0),t("div",ro,[xe.value&&f(oe)&&((st=f(oe))==null?void 0:st.status)==="planning"||((Ft=f(oe))==null?void 0:Ft.status)==="active"?(p(),ye(vs,{key:0,searchQuery:T.value,sprintId:G.value,searchedData:$t.value?[$t.value]:[],label:A.value,checkedSprintAll:P.value,sprint:xe.value,onOpenTicket:It,onEditSprint:nl,onToggleStart:f(O),onMoveSelectedToBacklog:f(ae),onDeleteSelectedSprint:a[14]||(a[14]=S=>f(se)("sprint",S)),onRefresh:ut},null,8,["searchQuery","sprintId","searchedData","label","checkedSprintAll","sprint","onToggleStart","onMoveSelectedToBacklog"])):B("",!0),((hl=f(oe))==null?void 0:hl.status)==="completed"?(p(),g("div",oo,[a[40]||(a[40]=t("div",{class:"w-20 h-20 flex justify-center items-center text-white rounded-full text-3xl"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 117.72 117.72","aria-hidden":"true"},[t("path",{fill:"#42ba96",d:`M58.86,0c9.13,0,17.77,2.08,25.49,5.79c-3.16,2.5-6.09,4.9-8.82,7.21c-5.2-1.89-10.81-2.92-16.66-2.92\r
                  c-13.47,0-25.67,5.46-34.49,14.29c-8.83,8.83-14.29,21.02-14.29,34.49c0,13.47,5.46,25.66,14.29,34.49\r
                  c8.83,8.83,21.02,14.29,34.49,14.29s25.67-5.46,34.49-14.29c8.83-8.83,14.29-21.02,14.29-34.49\r
                  c0-3.2-0.31-6.34-0.9-9.37c2.53-3.3,5.12-6.59,7.77-9.85c2.08,6.02,3.21,12.49,3.21,19.22\r
                  c0,16.25-6.59,30.97-17.24,41.62c-10.65,10.65-25.37,17.24-41.62,17.24c-16.25,0-30.97-6.59-41.62-17.24\r
                  C6.59,89.83,0,75.11,0,58.86c0-16.25,6.59-30.97,17.24-41.62S42.61,0,58.86,0z\r
                  M31.44,49.19L45.8,49l1.07,0.28c2.9,1.67,5.63,3.58,8.18,5.74c1.84,1.56,3.6,3.26,5.27,5.1\r
                  c5.15-8.29,10.64-15.9,16.44-22.9c6.35-7.67,13.09-14.63,20.17-20.98l1.4-0.54H114l-3.16,3.51\r
                  C101.13,30,92.32,41.15,84.36,52.65C76.4,64.16,69.28,76.04,62.95,88.27l-1.97,3.8l-1.81-3.87\r
                  c-3.34-7.17-7.34-13.75-12.11-19.63c-4.77-5.88-10.32-11.1-16.79-15.54L31.44,49.19z`})])],-1)),t("h4",io,L(ie.value)+" Completed ",1),t("p",uo,[re(" This "+L(A.value)+" has been successfully completed. To continue planning work, create a new "+L(A.value)+" by clicking the ",1),a[38]||(a[38]=t("strong",null,"plus (+)",-1)),a[39]||(a[39]=re(" button and start organizing upcoming tasks. "))])])):B("",!0),((kl=f(oe))==null?void 0:kl.length)<1||((wl=f(ve))==null?void 0:wl.sprints.length)<1?(p(),g("div",co,[a[43]||(a[43]=t("div",{class:"w-20 h-20 flex items-center justify-center rounded-full bg-muted/10 text-accent"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-20 h-20",fill:"none",viewBox:"0 0 24 24",stroke:"#ff3333","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("h4",po," No "+L(A.value)+"s available ",1),t("p",fo,[re(" You donâ€™t have any "+L(A.value)+"s yet. Create a new "+L(A.value)+" to start planning and organizing your work. Click the ",1),a[41]||(a[41]=t("strong",null,"plus (+)",-1)),a[42]||(a[42]=re(" button to get started. "))])])):B("",!0)])])],512)]))])])])),q(ba,{onClick:a[15]||(a[15]=Ie(()=>{},["stop"])),modelValue:We.value,"onUpdate:modelValue":a[16]||(a[16]=S=>We.value=S),title:`Delete ${A.value}`,itemLabel:A.value,itemName:(Sl=de.value)==null?void 0:Sl.title,requireMatchText:(Cl=de.value)==null?void 0:Cl.title,confirmText:`Delete ${A.value}`,cancelText:"Cancel",size:"md",loading:f(St),onConfirm:ot,onCancel:a[17]||(a[17]=()=>{de.value=null,We.value=!1})},null,8,["modelValue","title","itemLabel","itemName","requireMatchText","confirmText","loading"]),q(_s,{modelValue:Fe.value,"onUpdate:modelValue":a[18]||(a[18]=S=>Fe.value=S),onSave:il,sprint:de.value,lable:A.value,creatingSprint:de.value?f(ol):f(Dt),sprints:Bt.value},null,8,["modelValue","sprint","lable","creatingSprint","sprints"]),q(Bs,{sprint:de.value,modelValue:Qe.value,"onUpdate:modelValue":a[19]||(a[19]=S=>Qe.value=S),onSave:it,creatingSprint:f(Pe)||f(je),sprintType:A.value},null,8,["sprint","modelValue","creatingSprint","sprintType"]),q(fa,{modelValue:N.value,"onUpdate:modelValue":a[20]||(a[20]=S=>N.value=S),cardId:($l=Je.value)==null?void 0:$l.id,onClose:x},null,8,["modelValue","cardId"]),q(yn,{modelValue:u.value,"onUpdate:modelValue":a[21]||(a[21]=S=>u.value=S)},null,8,["modelValue"])])}}}),Eo=Jt(vo,[["__scopeId","data-v-2e832a58"]]);export{Eo as default};
