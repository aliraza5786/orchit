import{d as N,c as k,r as A,p as X,Q as Y,a as I,h as m,U as K,w,F as $,v as C,b as n,J as Z,t as _,V as ee,k as R,o as c,_ as te,i as q,x as y,m as z,W as se,X as x,Y as ae,g as W,B as oe,e as re,j as ne}from"./index-4VVrnSvV.js";import{g as le}from"./index-BBhniCjd.js";const ie=["onClick","aria-label"],ce=["src","onLoadOnce","onError"],de={class:"flex items-start gap-2.5 border-t border-border bg-bg-card p-3.5 text-sm"},ue=["src"],me={class:"min-w-0"},ge={class:"truncate text-sm font-medium text-text-primary"},fe={class:"truncate text-xs text-text-secondary"},be={key:1,class:"grid grid-cols-1 gap-5 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4"},ve={key:2,class:"col-span-full flex items-center justify-center py-10 text-sm text-text-secondary"},xe=N({__name:"ProjectGallery",props:{projects:{},loading:{type:Boolean,default:!1},skeletonCount:{default:8}},setup(g){const d=g,b=R(),f=k(()=>d.skeletonCount??8),t=e=>{var s;return((s=e==null?void 0:e.variables)==null?void 0:s.title)||(e==null?void 0:e.title)||"Untitled"};function i(e){if(!e)return"—";const s=new Date(e);return Number.isNaN(+s)?"—":new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}).format(s)}const u=A({});function l(e){let s=0;for(let r=0;r<((e==null?void 0:e.length)||0);r++)s=s*31+e.charCodeAt(r)|0;const o=Math.abs(s)%360;return`linear-gradient(180deg, hsl(${o} 60% 58%), hsl(${o} 60% 52%))`}function a(e,s,o){const r=p=>p.toString(16).padStart(2,"0");return`#${r(e)}${r(s)}${r(o)}`}function S(e){try{const o=document.createElement("canvas"),r=o.getContext("2d",{willReadFrequently:!0});o.width=48,o.height=48,r.drawImage(e,0,0,48,48);const{data:p}=r.getImageData(0,0,48,48),h={};for(let v=0;v<p.length;v+=4){if(p[v+3]<24)continue;const H=p[v]>>4,J=p[v+1]>>4,Q=p[v+2]>>4,D=`${H},${J},${Q}`;h[D]=(h[D]||0)+1}let L="",T=-1;for(const v in h)h[v]>T&&(T=h[v],L=v);if(!L)return null;const[V,B,P]=L.split(",").map(Number),U=V<<4|V,M=B<<4|B,O=P<<4|P;return a(U,M,O)}catch{return null}}function j(e,s){e!=null&&e.logo&&(u.value={...u.value,[e.logo]:s})}function E(e){const s=e.logo,o=s?u.value[s]:void 0;return o&&o.startsWith("#")?`linear-gradient(180deg, ${o}, ${o})`:o||l(t(e))}function F(e){if(!(e!=null&&e.logo)||u.value[e.logo])return;const s=event==null?void 0:event.target;s&&(requestIdleCallback==null||requestIdleCallback(()=>{const o=S(s);j(e,o||l(t(e)))},{timeout:600}))}function G(e){var o;const s=(o=e==null?void 0:e.LatestTask)==null?void 0:o.job_id;s?localStorage.setItem("jobId",s):localStorage.removeItem("jobId"),b.push(`/workspace/peak/${e._id}/${s??""}`)}return X(()=>{}),Y(()=>{}),(e,s)=>{var o;return!e.loading&&((o=e.projects)!=null&&o.length)?(c(),I(K,{key:0,name:"card",tag:"section",class:"grid grid-cols-1 gap-5 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4",appear:"","aria-busy":e.loading?"true":"false","aria-live":"polite"},{default:w(()=>[(c(!0),m($,null,C(e.projects,(r,p)=>(c(),m("article",{key:r._id??p,class:"group relative overflow-hidden rounded-xl cursor-pointer border border-border/70 bg-bg-card shadow-sm outline-none transition-all duration-200 hover:shadow-md focus-within:ring-2 focus-within:ring-orange-300"},[n("button",{type:"button",class:"absolute inset-0 z-10",onClick:h=>G(r),"aria-label":`Open project ${t(r)}`},null,8,ie),n("div",{class:"flex h-39 items-center justify-center transition-colors",style:Z({background:E(r)})},[n("img",{src:r.logo,class:"aspect-square h-10 w-10 rounded-md object-cover",alt:"",loading:"lazy",decoding:"async",onLoadOnce:h=>F(r),onError:()=>j(r,l(t(r)))},null,40,ce)],4),n("div",de,[n("img",{src:r.logo,class:"h-6 w-6 rounded-md object-cover",alt:"",loading:"lazy",decoding:"async"},null,8,ue),n("div",me,[n("h3",ge,_(t(r)),1),n("p",fe,_(i(r.lastUpdated)),1)])])]))),128))]),_:1},8,["aria-busy"])):e.loading?(c(),m("section",be,[(c(!0),m($,null,C(f.value,r=>(c(),m("div",{key:"sk-"+r,class:"overflow-hidden rounded-xl border border-border/70 bg-bg-card shadow-sm",role:"status","aria-label":"Loading project"},s[0]||(s[0]=[ee('<div class="h-39 bg-[linear-gradient(90deg,theme(colors.slate.200/20),theme(colors.slate.200/40),theme(colors.slate.200/20))] bg-[length:200%_100%] animate-[shimmer_1.1s_ease_infinite]" data-v-03d2ee64></div><div class="flex items-start gap-2.5 border-t border-border p-3.5 text-sm" data-v-03d2ee64><div class="h-6 w-6 rounded-md bg-surface" data-v-03d2ee64></div><div class="flex w-full flex-col gap-2" data-v-03d2ee64><div class="h-3 w-32 rounded bg-surface" data-v-03d2ee64></div><div class="h-2.5 w-20 rounded bg-surface" data-v-03d2ee64></div></div></div>',2)])))),128))])):(c(),m("div",ve," No projects yet "))}}}),pe=te(xe,[["__scopeId","data-v-03d2ee64"]]);function he(g){const d=new Date(g),b={month:"short",day:"numeric"};return d.toLocaleDateString("en-US",b)}const ye={class:"flex items-center"},ke=["src","onClick","alt"],_e=["onClick","alt"],we={__name:"Collaborators",props:{avatars:{type:Array,default:()=>[]},maxVisible:{type:Number,default:4},size:{type:String,default:"8"},image:{type:Boolean,default:!0}},setup(g){const d=g,b=k(()=>d.avatars.length>d.maxVisible?d.avatars.length-d.maxVisible:0),f=k(()=>d.avatars.slice(0,d.maxVisible)),t=k(()=>{const i=f.value.length;return i<=2?"-space-x-2":i===3?"-space-x-3":i===4?"-space-x-4":i===5?"-space-x-2.5":"-space-x-5"});return(i,u)=>(c(),m("div",ye,[n("div",{class:y(["flex",t.value])},[g.image?(c(!0),m($,{key:0},C(f.value,(l,a)=>(c(),m("img",{key:a,src:l.image,onClick:()=>{l.onclick&&l.onclick()},alt:l.name,class:y(`w-${g.size} h-${g.size} rounded-full border-2 border-white shadow-md object-cover cursor-pointer`)},null,10,ke))),128)):(c(!0),m($,{key:1},C(f.value,(l,a)=>(c(),m("div",{key:`IMG-${a}`,onClick:()=>{l.onclick&&l.onclick()},alt:l.name,class:y(`w-${g.size} h-${g.size} rounded-full text-text-primary flex justify-center items-center  bg-amber-600 border-2 border-border shadow-md object-cover cursor-pointer`)},_(z(le)(l==null?void 0:l.name)),11,_e))),128)),b.value>0?(c(),m("div",{key:2,class:y(["flex items-center justify-center text-xs font-medium bg-gray-300 text-text-secondary -700 border-2 border-white shadow-md rounded-full",`w-${g.size} h-${g.size}`])}," +"+_(b.value),3)):q("",!0)],2)]))}},$e={class:"flex -space-x-2"},Ce=N({__name:"WorkspaceListTable",props:{data:{},isPending:{type:Boolean}},setup(g){const d=R(),b=t=>{var i,u,l,a;(i=t.row.LatestTask)!=null&&i.job_id?localStorage.setItem("jobId",(u=t.row.LatestTask)==null?void 0:u.job_id):localStorage.removeItem("jobId"),d.push(`/workspace/peak/${t.row._id}/${(l=t.row.LatestTask)!=null&&l.job_id?(a=t.row.LatestTask)==null?void 0:a.job_id:""}`)},f=[{key:"variables",label:"Project",render:({row:t,value:i})=>x("div",{class:"flex items-center gap-2"},[t.logo?x("img",{src:t==null?void 0:t.logo,alt:i.title,class:"h-8 w-8 bg-bg-card rounded-full"}):x("div",{class:" bg-white h-8 w-8 bg-bg-card rounded-full"}),x("span",i==null?void 0:i.title)])},{key:"variables",label:"Project type",render:({value:t})=>x("div",{class:" capitalize flex items-center gap-2"},[x("span",(t==null?void 0:t["workspace-type"])||"-")])},{key:"People",label:"People",render:({value:t})=>x("div",{class:" capitalize flex items-center gap-2"},[x(we,{avatars:t,image:!1})])},{key:"created_at",label:"Start Date",render:({value:t})=>x("div",{class:"flex items-center gap-2"},[x("span",he(t))])}];return(t,i)=>(c(),I(se,{onRowClick:b,columns:f,rows:t.data||[],loading:t.isPending,skeletonRows:6},{status:w(({row:u})=>[n("span",{class:y(["px-3 py-1 rounded-full text-xs font-medium",{"bg-blue-100 text-blue-600":u.status==="In progress","bg-red-100 text-red-600":u.status==="Live","bg-green-100 text-green-600":u.status==="Done"}])},_(u.status),3)]),team:w(({row:u})=>[n("div",$e,[(c(!0),m($,null,C(u.Roles,(l,a)=>(c(),m("span",{key:a,class:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-xs"},_(l),1))),128))])]),_:1},8,["rows","loading"]))}}),je={class:"w-full bg-bg-body text-text-primary"},ze={class:"mx-auto w-full max-w-[1440px] px-5 py-10 md:px-15 md:py-20"},Ie={class:"flex flex-wrap items-center justify-between gap-5"},Se={class:"flex items-center gap-3"},Le={class:"mt-21 mb-8 flex items-center justify-between"},Ne={class:"flex items-center gap-3"},Te={key:0,class:"flex items-center justify-center py-10 text-sm text-text-secondary"},De=N({__name:"Home",setup(g){const{data:d,isPending:b}=ae(),f=A("list"),t=l=>{f.value=l},i=k(()=>Array.isArray(d==null?void 0:d.value)?d.value:[]),u=k(()=>i.value.length===0);return(l,a)=>{const S=ne("RouterLink");return c(),m("div",je,[n("div",ze,[n("div",Ie,[a[3]||(a[3]=n("div",{class:"flex flex-col gap-1.5 max-md:gap-1"},[n("h1",{class:"text-2xl font-medium"},"Welcome to Orchit AI!"),n("p",{class:"text-sm text-text-secondary"},"Create, organize, and collaborate seamlessly.")],-1)),n("div",Se,[W(S,{to:"/create-workspace"},{default:w(()=>[W(oe,{variant:"primary"},{default:w(()=>a[2]||(a[2]=[re("Create a workspace")])),_:1,__:[2]})]),_:1})])]),n("div",Le,[a[6]||(a[6]=n("h2",{class:"text-xl font-medium"},"All Workspaces",-1)),n("div",Ne,[n("button",{class:y(["aspect-square w-8 cursor-pointer rounded-md p-1",f.value==="list"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),onClick:a[0]||(a[0]=j=>t("list")),title:"List view"},a[4]||(a[4]=[n("i",{class:"fa-solid fa-align-left"},null,-1)]),2),n("button",{class:y(["aspect-square w-8 cursor-pointer rounded-md p-1",f.value==="gallery"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),onClick:a[1]||(a[1]=j=>t("gallery")),title:"Gallery view"},a[5]||(a[5]=[n("i",{class:"fa-solid fa-grid-2"},null,-1)]),2)])]),!z(b)&&u.value?(c(),m("div",Te," No Workspace ")):f.value==="list"?(c(),I(Ce,{key:1,data:i.value,isPending:z(b)},null,8,["data","isPending"])):f.value==="gallery"?(c(),I(pe,{key:2,projects:i.value,loading:z(b)},null,8,["projects","loading"])):q("",!0)])])}}});export{De as default};
