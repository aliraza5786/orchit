import{_ as S}from"./info-DjaLHeD_.js";import{d as L,r as m,p as R,O,l as y,h as r,x as n,i as c,b as a,a as $,e as E,t as p,ap as F,J as M,F as N,v as T,P as j,o as s}from"./index-DfPzAmTM.js";const D=["title"],J={class:"flex items-center gap-2"},P=["src"],U=["onClick"],X=["src"],G=L({__name:"BaseSelectField",props:{modelValue:{},options:{},label:{},defaultValue:{},placeholder:{default:"Select an option..."},message:{},error:{type:Boolean,default:!1},size:{default:"md"},tooltip:{},theme:{default:"light"}},emits:["update:modelValue"],setup(V,{emit:B}){const o=V,b=B,i=m(!1),f=m(null),v=m(null),g=m({top:"0px",left:"0px",width:"100%"}),t=m(null),h=e=>{f.value&&!f.value.contains(e.target)&&(i.value=!1)};R(()=>{document.addEventListener("click",h),k()}),O(()=>{document.removeEventListener("click",h)});function C(){i.value=!i.value,i.value&&j(()=>{if(v.value){const e=v.value.getBoundingClientRect();g.value={top:`${e.bottom+window.scrollY}px`,left:`${e.left+window.scrollX}px`,width:`${e.width}px`}}})}function z(e){t.value=e,b("update:modelValue",e._id),i.value=!1}function k(){const e=o.modelValue??o.defaultValue;if(e!=null){const l=o.options.find(d=>d._id===e);l?(t.value=l,o.modelValue==null&&o.defaultValue!=null&&b("update:modelValue",l._id)):t.value=null}else t.value=null}return y(()=>o.modelValue,e=>{if(e==null)t.value=null;else{const l=o.options.find(d=>d._id===e);t.value=l??null}}),y(()=>o.options,()=>{const e=o.options.find(l=>l._id===o.modelValue);e?t.value=e:k()},{deep:!0}),(e,l)=>{var d,w;return s(),r("div",{class:n(e.theme==="dark"?"text-white ":"text-text-primary"),ref_key:"wrapperRef",ref:f},[e.label?(s(),r("label",{key:0,class:n([" font-medium mb-1 flex items-center",e.theme==="dark"?"text-white":"text-text-primary",e.size=="md"?"text-sm":e.size=="sm"?"text-xs":"text-base"])},[E(p(e.label)+" ",1),e.tooltip?(s(),r("span",{key:0,class:"inline-block text-text-secondary -400 ml-1 cursor-help",title:e.tooltip},l[0]||(l[0]=[a("img",{src:S,alt:"info"},null,-1)]),8,D)):c("",!0)],2)):c("",!0),a("div",{ref_key:"triggerRef",ref:v,class:n(["relative px-3 py-2 rounded-xl w-full border text-sm cursor-pointer flex justify-between items-center",[e.size==="md"?"h-10":e.size==="sm"?"h-8 !rounded-md":"h-12",(e.theme==="dark","bg-bg-input border-border "),e.error?"border-red-500 focus-within:ring-red-500":"focus-within:ring-black"]]),onClick:C},[a("div",J,[(d=t.value)!=null&&d.icon?(s(),r("img",{key:0,src:t.value.icon,class:"w-4 h-4"},null,8,P)):c("",!0),a("span",{class:n(t.value?" line-clamp-1 overflow-ellipsis ":"text-text-secondary")},p(((w=t.value)==null?void 0:w.title)||e.placeholder),3)]),l[1]||(l[1]=a("svg",{class:"w-4 h-4 text-text-secondary",fill:"none",viewBox:"0 0 20 20",stroke:"currentColor"},[a("path",{d:"M6 8L10 12L14 8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))],2),(s(),$(F,{to:"body"},[i.value?(s(),r("div",{key:0,class:n(["absolute z-50 mt-2 rounded-md max-h-64 overflow-auto shadow border w-full",e.theme==="dark"?"bg-bg-input text-text-primary border-border ":"bg-bg-input text-text-primary border-border"]),style:M(g.value)},[(s(!0),r(N,null,T(e.options,(u,_)=>{var x;return s(),r("div",{key:u._id??_,onClick:Y=>z(u),class:n(["px-4 py-2 text-sm flex items-center gap-2 cursor-pointer hover:bg-bg-dropdown-menu-hover transition-all duration-150",{"bg-bg-dropdown ":u._id===((x=t.value)==null?void 0:x._id)}])},[u.icon?(s(),r("img",{key:0,src:u.icon,class:"w-4 h-4"},null,8,X)):c("",!0),a("span",null,p(u.title),1)],10,U)}),128))],6)):c("",!0)])),e.message?(s(),r("p",{key:1,class:n(["mt-2 text-xs",e.error?"text-red-500":e.theme==="dark"?"text-text-secondary -400":"text-text-secondary -500"])},p(e.message),3)):c("",!0)],2)}}});export{G as _};
