import{a_ as d,ao as r}from"./index-BMJFH4UF.js";const l="https://backend.streamed.space/api/v1/",i=d("sidePanel",{state:()=>({selectedCard:null,lists:[],isFetching:!1,selectedCardPeople:null,cards:{},selectedCardTitle:"",selectedCardId:"",cardDetails:[]}),getters:{hasSelectedCard:e=>{var t;return!!((t=e.selectedCard)!=null&&t._id)}},actions:{async fetchSelectedCardDetails(e){this.isFetching=!0;try{const t=localStorage.getItem("token");if(!t)throw new Error("No auth token found");const a=await fetch(`${l}workspace/card/${e}`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const s=await a.json();this.selectedCard=s}catch(t){console.error("Failed to fetch card details:",t)}finally{this.isFetching=!1}},selectTaskCard(e){this.selectedCard=e,r(()=>{this.selectedCard=e})},selectCard(e){this.selectedCardPeople=e},clearCard(){this.selectedCardPeople=null},updateCardTitleOptimistic(e){this.selectedCard&&(this.selectedCard["card-title"]=e,this.selectedCardTitle=e)},rollbackCardTitle(e){this.selectedCard&&(this.selectedCard["card-title"]=e,this.selectedCardTitle=e)},clearTaskCard(){this.selectedCardPeople=null},clearSelectedCard(){this.selectedCard=null,this.selectedCardId=""},saveTitle(e){this.selectedCardTitle=e},saveLocalId(e){this.selectedCardId=e},saveCardDetails(e){this.cardDetails=e}}});export{i as u};
