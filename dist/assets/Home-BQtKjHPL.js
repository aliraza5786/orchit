import{d as I,c as N,i as d,F as C,x as $,e as o,a7 as W,t as w,R as U,l as T,o as i,H as R,r as x,ah as L,m as q,b as S,T as A,n as g,ai as b,w as P,y as z,aj as E,j as F,h as G,B as M,f as H}from"./index-DSbTV3UV.js";import{f as O}from"./FormatDate--XHqACrs.js";import{u as J}from"./workspace-BXe2SBd1.js";const K=["aria-busy"],Q=["onClick","aria-label"],X=["src"],Y={class:"flex items-start gap-2.5 border-t border-border bg-bg-card p-3.5 text-sm"},Z=["src"],ee={class:"min-w-0"},te={class:"truncate text-sm font-medium text-text-primary"},se={class:"truncate text-xs text-text-secondary"},ae={key:1,class:"grid grid-cols-1 gap-5 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4"},oe={key:2,class:"col-span-full flex items-center justify-center py-10 text-sm text-text-secondary"},re=I({__name:"ProjectGallery",props:{projects:{},loading:{type:Boolean,default:!1},skeletonCount:{default:8}},setup(j){const v=j,c=T(),y=N(()=>v.skeletonCount??8),m=e=>{var r;return((r=e==null?void 0:e.variables)==null?void 0:r.title)||(e==null?void 0:e.title)||"Untitled"};function h(e){if(!e)return"—";const r=new Date(e);return Number.isNaN(+r)?"—":new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}).format(r)}function _(e){let r=0;for(let s=0;s<((e==null?void 0:e.length)||0);s++)r=r*31+e.charCodeAt(s)|0;const t=Math.abs(r)%360;return`linear-gradient(135deg, hsl(${t} 55% 55%), hsl(${t} 60% 48%))`}function u(e){return _(m(e))}function k(e){var t;const r=(t=e==null?void 0:e.LatestTask)==null?void 0:t.job_id;r?localStorage.setItem("jobId",r):localStorage.removeItem("jobId"),c.push(`/workspace/peak/${e._id}/${r??""}`)}return(e,r)=>{var t;return!e.loading&&((t=e.projects)!=null&&t.length)?(i(),d("section",{key:0,class:"grid grid-cols-1 gap-5 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4","aria-busy":e.loading?"true":"false","aria-live":"polite"},[(i(!0),d(C,null,$(e.projects,(s,f)=>(i(),d("article",{key:s._id??f,class:"group relative overflow-hidden rounded-xl cursor-pointer border border-border/70 bg-bg-card shadow-sm outline-none transition-all duration-200 hover:shadow-md focus-within:ring-2 focus-within:ring-orange-300"},[o("button",{type:"button",class:"absolute inset-0 z-10",onClick:D=>k(s),"aria-label":`Open project ${m(s)}`},null,8,Q),o("div",{class:"flex h-39 items-center justify-center",style:W({background:u(s)})},[o("img",{src:s.logo,class:"aspect-square h-10 w-10 rounded-md object-cover",alt:"",loading:"lazy",decoding:"async"},null,8,X)],4),o("div",Y,[o("img",{src:s.logo,class:"h-6 w-6 rounded-md object-cover",alt:"",loading:"lazy",decoding:"async"},null,8,Z),o("div",ee,[o("h3",te,w(m(s)),1),o("p",se,w(h(s.lastUpdated)),1)])])]))),128))],8,K)):e.loading?(i(),d("section",ae,[(i(!0),d(C,null,$(y.value,s=>(i(),d("div",{key:"sk-"+s,class:"overflow-hidden rounded-xl border border-border/70 bg-bg-card shadow-sm",role:"status","aria-label":"Loading project"},r[0]||(r[0]=[U('<div class="h-39 bg-[linear-gradient(90deg,theme(colors.slate.200/20),theme(colors.slate.200/40),theme(colors.slate.200/20))] bg-[length:200%_100%] animate-[shimmer_1.1s_ease_infinite]" data-v-51db3a46></div><div class="flex items-start gap-2.5 border-t border-border p-3.5 text-sm" data-v-51db3a46><div class="h-6 w-6 rounded-md bg-surface" data-v-51db3a46></div><div class="flex w-full flex-col gap-2" data-v-51db3a46><div class="h-3 w-32 rounded bg-surface" data-v-51db3a46></div><div class="h-2.5 w-20 rounded bg-surface" data-v-51db3a46></div></div></div>',2)])))),128))])):(i(),d("div",oe," No projects yet "))}}}),le=R(re,[["__scopeId","data-v-51db3a46"]]),ne={class:"flex -space-x-2"},ie=I({__name:"WorkspaceListTable",setup(j){const v=T(),c=new Map,y=a=>(c.has(a)||c.set(a,O(a)),c.get(a)),m=a=>{var p;const l=a.row,n=(p=l==null?void 0:l.LatestTask)==null?void 0:p.job_id;n?localStorage.setItem("jobId",n):localStorage.removeItem("jobId"),v.push(`/workspace/peak/${l==null?void 0:l._id}/${n||""}`)},e=[{key:"variables",label:"Project",render:({row:a,value:l})=>b("div",{class:"flex items-center gap-2"},[a.logo?b("img",{src:a.logo,alt:(l==null?void 0:l.title)||"Project",class:"h-8 w-8 bg-bg-card rounded-full",loading:"lazy",decoding:"async"}):b("div",{class:"h-8 w-8 rounded-full bg-bg-card"}),b("span",(l==null?void 0:l.title)||"Untitled")])},{key:"variables",label:"Project type",render:({value:a})=>b("span",{class:"capitalize"},(a==null?void 0:a["workspace-type"])||"-")},{key:"People",label:"People",render:({value:a})=>b(E,{avatars:a||[],image:!0,maxVisible:3})},{key:"created_at",label:"Start Date",render:({value:a})=>b("span",y(a))}],r=x(1),t=x(10),{data:s,isPending:f}=L(r,t),D=N(()=>{var a;return((a=s.value)==null?void 0:a.workspaces)??[]}),B=x(0);return q(s,()=>{var a,l,n,p;(l=(a=s.value)==null?void 0:a.pagination)!=null&&l.totalCount&&(B.value=(p=(n=s.value)==null?void 0:n.pagination)==null?void 0:p.totalCount)}),(a,l)=>(i(),S(A,{columns:e,rows:D.value,loading:g(f),total:B.value,page:r.value,"onUpdate:page":l[0]||(l[0]=n=>r.value=n),pageSize:t.value,"onUpdate:pageSize":l[1]||(l[1]=n=>t.value=n),pageSizes:[10,20,50,100],onRowClick:m},{status:P(({row:n})=>[o("span",{class:z(["px-3 py-1 rounded-full text-xs font-medium",{"bg-blue-100 text-blue-600":n.status==="In progress","bg-red-100 text-red-600":n.status==="Live","bg-green-100 text-green-600":n.status==="Done"}])},w(n.status),3)]),team:P(({row:n})=>[o("div",ne,[(i(!0),d(C,null,$(n.Roles,(p,V)=>(i(),d("span",{key:V,class:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-xs"},w(p),1))),128))])]),_:1},8,["rows","loading","total","page","pageSize"]))}}),de={class:"w-full bg-bg-body text-text-primary"},ce={class:"mx-auto w-full max-w-[1440px] px-5 py-10 md:px-15 md:py-20"},ue={class:"flex flex-wrap items-center justify-between gap-5"},ge={class:"flex items-center gap-3"},me={class:"mt-21 mb-8 flex items-center justify-between"},pe={class:"flex items-center gap-3"},be={key:0,class:"flex items-center justify-center py-10 text-sm text-text-secondary"},ye=I({__name:"Home",setup(j){const v=T(),c=J(),y=x(1),m=x(10),{data:h,isPending:_}=L(y,m),u=x("list"),k=r=>{u.value=r},e=N(()=>h.value.length===0);return(r,t)=>(i(),d("div",de,[o("div",ce,[o("div",ue,[t[4]||(t[4]=o("div",{class:"flex flex-col gap-1.5 max-md:gap-1"},[o("h1",{class:"text-2xl font-medium"},"Welcome to Orchit AI!"),o("p",{class:"text-sm text-text-secondary"},"Create, organize, and collaborate seamlessly.")],-1)),o("div",ge,[o("div",{to:"/create-workspace",onClick:t[0]||(t[0]=()=>{var s,f;((s=g(c).limits.features[1])==null?void 0:s.usage.current)>=((f=g(c).limits.features[1])==null?void 0:f.limits.limit)?g(c).setLimitExccedModal(!0):g(v).push("/create-workspace")})},[G(M,{variant:"primary"},{default:P(()=>t[3]||(t[3]=[H("Create a workspace")])),_:1,__:[3]})])])]),o("div",me,[t[7]||(t[7]=o("h2",{class:"text-xl font-medium"},"All Workspaces",-1)),o("div",pe,[o("button",{class:z(["aspect-square w-8 cursor-pointer rounded-md p-1",u.value==="list"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),onClick:t[1]||(t[1]=s=>k("list")),title:"List view"},t[5]||(t[5]=[o("i",{class:"fa-solid fa-align-left"},null,-1)]),2),o("button",{class:z(["aspect-square w-8 cursor-pointer rounded-md p-1",u.value==="gallery"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),onClick:t[2]||(t[2]=s=>k("gallery")),title:"Gallery view"},t[6]||(t[6]=[o("i",{class:"fa-solid fa-grid-2"},null,-1)]),2)])]),!g(_)&&e.value?(i(),d("div",be," No Workspace ")):u.value==="list"?(i(),S(ie,{key:1})):u.value==="gallery"?(i(),S(le,{key:2,projects:g(h),loading:g(_)},null,8,["projects","loading"])):F("",!0)])]))}});export{ye as default};
