const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-BWPbuKwC.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-BqT0jb1U.js","assets/index-Cji57s4k.js","assets/index-Ctxo063Z.css","assets/CreateSheetModal-DuqtxjG7.js","assets/IconPicker-C8Cdc4v4.js","assets/IconPicker-CIMr_3tu.css","assets/AudioRecorder.vue_vue_type_script_setup_true_lang-Do6rAhBq.js","assets/CreateSheetModal--7RYCgy-.css","assets/CreateVariableModal-CJAzNMey.js","assets/ConfirmDeleteModal-BIGMreYN.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-CV3Hm8b1.js","assets/SidePanel-ClAxDzbx.js","assets/SidePanel-B9Da9iSb.css","assets/KanbanBoard-Cwi0iMah.js","assets/lodash-B3d4OLnQ.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-B_35kVSF.js","assets/KanbanBoard-CCl7J72V.css"])))=>i.map(i=>d[i]);
import{d as hn,R as Nt,n as He,r as P,c as ae,j as V,f as k,F as pe,y as Ae,a8 as Et,t as ct,k as ee,h as Ve,z as Je,g as Be,C as kt,J as Mo,M as Co,e as Se,aT as No,o as A,ah as fn,at as ne,T as Eo,K as ko,b as _o,Y as So,$ as Lo,a2 as To,u as zo,ae as jo,bf as Ao,a3 as Do,a4 as Io,af as Oo,Z as $o,W as Po,H as Yt,b3 as Vo,N as Ho,bg as Bo,ac as Ro,a0 as Yo,bh as Fo,bi as Wo,i as le,w as De,p as O,D as Ft,a5 as Ie,ab as Wt,_ as qt,B as Ut,Q as Kt,S as ge,bj as Zt,a6 as Oe,q as qo,I as Uo}from"./index-Cji57s4k.js";import{D as Xt,K as Ko}from"./Dropdown-DAswalra.js";import{_ as Zo}from"./SearchBar.vue_vue_type_script_setup_true_lang-BIyCiq33.js";import{K as Xo}from"./KanbanTicket-DrqyHv0c.js";import{F as Gt}from"./fuse-Ch1WBRTM.js";import{l as Go}from"./lodash-B3d4OLnQ.js";import"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-CV3Hm8b1.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-B_35kVSF.js";const Jo={class:"kanban-table space-y-4 px-4 h-[85vh] overflow-y-auto"},Qo={class:"w-full table-fixed border-collapse rounded-md shadow-sm bg-bg-body/20 text-sm border border-border/60"},ei={class:"bg-bg-surface border-b border-border sticky top-[-1px] z-10"},ti={class:"text-text-secondary"},ni=["onMousedown"],oi={class:"w-10 p-2 text-center relative"},ii={class:"relative inline-block"},ri={key:0,class:"column-menu absolute w-[200px] right-0 mt-2 bg-bg-surface border border-border rounded shadow p-2 z-50"},si=["onClick"],li={class:"bg-bg-surface/20"},ai=["onClick"],di=["colspan"],ci=["onMouseenter"],ui=["onUpdate:modelValue","onBlur"],pi=["colspan"],mi=hn({__name:"TableView",props:{columns:{},rows:{},isPending:{type:Boolean},canCreate:{type:Boolean,default:!0},canCreateVariable:{type:Boolean,default:!0}},emits:["update:rows","create","toggleVisibility","addVar"],setup(e,{emit:t}){const n=e,o=t,i=Nt(n.rows||[]);He(()=>n.rows,x=>{x&&i.splice(0,i.length,...x)});const r=Nt({id:null,field:""}),s=P(null),a=P(null),d=ae(()=>i.some(x=>r.id===x.id&&!x[r.field])),p=(x,w)=>{r.id=x.id,r.field=w,fn(()=>{var M;return(M=a.value)==null?void 0:M.focus()})},u=()=>{r.id=null,r.field=""},f=x=>{var w;if(!((w=x[r.field])!=null&&w.trim())){const M=i.findIndex(K=>K.id===x.id);M!==-1&&i.splice(M,1)}u(),o("update:rows",i.slice()),o("create",x)},m=x=>{var M;const w={id:Date.now()};n.columns.forEach(K=>w[K.key]=""),i.splice(x,0,w),p(w,((M=n.columns[0])==null?void 0:M.key)||""),s.value=null,o("update:rows",i.slice())};function b(x,w){if(!(!x||!w))return w.includes(".")?w.split(".").reduce((M,K)=>M==null?M:M[K],x):x[w]}function g(x,w){return w!=null&&w.accessor?w.accessor(x):b(x,w.key)}const v=x=>{var M;const w=g(x.row,x.column);return(M=x.column)!=null&&M.render?x.column.render({row:x==null?void 0:x.row,column:x==null?void 0:x.column,value:w,index:x==null?void 0:x.index}):ne("span",String(w??""))},h=Nt({});He(()=>n.columns,x=>{x.forEach((w,M)=>{M==0?h[w.key]=null:h[w.key]||(h[w.key]=150)})},{immediate:!0});let y=null,_=0,L=0;const E=(x,w)=>{y=w,_=x.clientX,L=h[w],document.addEventListener("mousemove",z),document.addEventListener("mouseup",Y)},z=x=>{if(!y)return;const w=x.clientX-_,M=Math.max(80,L+w);h[y]=M},Y=()=>{y=null,document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",Y)};document.addEventListener("click",x=>{x.target.closest(".column-menu")||(te.value=!1)});const G=P(n.columns.filter(x=>x.visible??!0).map(x=>x.key)),J=ae(()=>n.columns.filter(x=>G.value.includes(x.key))),te=P(!1);document.addEventListener("click",x=>{x.target.closest(".column-menu")||(te.value=!1)});const ze=x=>{const w=G.value.indexOf(x);w===-1?(o("toggleVisibility",x,!0),G.value.push(x)):(o("toggleVisibility",x,!1),G.value.splice(w,1))};return(x,w)=>(A(),V("div",Jo,[k("table",Qo,[k("thead",ei,[k("tr",ti,[w[8]||(w[8]=k("th",{class:"w-2 p-0"},null,-1)),(A(!0),V(pe,null,Ae(J.value,M=>(A(),V("th",{key:M==null?void 0:M.key,class:"relative font-bold p-2 uppercase text-left text-[11px] tracking-wide border-r border-border/40 select-none whitespace-nowrap min-w-[200px]",style:Et({width:h[M.key]?h[M.key]+"px":"100%"})},[k("span",null,ct(M==null?void 0:M.label),1),k("div",{class:"absolute right-0 top-0 h-full w-2 cursor-col-resize z-30 hover:bg-accent/20 active:bg-accent/40 transition",onMousedown:K=>E(K,M.key)},null,40,ni)],4))),128)),k("th",oi,[k("div",ii,[k("button",{onClick:w[0]||(w[0]=Ve(M=>te.value=!te.value,["stop"])),class:"p-1 rounded hover:bg-bg-surface/50 cursor-pointer"},w[6]||(w[6]=[k("i",{class:"fa-regular fa-columns-3"},null,-1)])),te.value?(A(),V("div",ri,[(A(!0),V(pe,null,Ae(n.columns,M=>(A(),V("div",{key:"toggle-"+M.key,class:"flex items-center space-x-2"},[k("span",{onClick:K=>ze(M.key),class:"cursor-pointer text-lg"},[k("i",{class:Je(G.value.includes(M.key)?"fa-solid fa-eye":"fa-solid fa-eye-slash")},null,2)],8,si),k("span",null,ct(M.label),1)]))),128)),x.canCreateVariable?(A(),V("div",{key:0,onClick:w[1]||(w[1]=M=>o("addVar")),class:"sticky bottom-0 bg-bg-dropdown shadow-md shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},w[7]||(w[7]=[k("i",{class:"fa-solid fa-plus"},null,-1),Be(" Add new ")]))):ee("",!0)])):ee("",!0)])])])]),k("tbody",li,[x.isPending?(A(),V(pe,{key:0},Ae(5,M=>k("tr",{key:"sk-"+M,class:"border-b border-border animate-pulse"},[w[10]||(w[10]=k("td",{class:"p-3"},[k("div",{class:"w-4 h-4 bg-bg-surface rounded"})],-1)),(A(!0),V(pe,null,Ae(x.columns,K=>(A(),V("td",{key:K.key,class:"p-3 border-r border-border",style:Et({width:h[K.key]+"px"})},w[9]||(w[9]=[k("div",{class:"w-full h-4 bg-bg-surface rounded"},null,-1)]),4))),128))])),64)):(A(!0),V(pe,{key:1},Ae(i,(M,K)=>{var tt;return A(),V(pe,{key:M==null?void 0:M.id},[s.value===K&&!d.value?(A(),V("tr",{key:0,class:"relative bg-bg-surface/20 transition-all cursor-pointer border border-accent",onMouseleave:w[2]||(w[2]=H=>s.value=null)},[k("td",{class:"!p-0 w-8",onClick:H=>m(K)},w[11]||(w[11]=[k("span",{class:"absolute left-[-6px] top-[-6px] bg-bg-surface border border-border w-6 h-6 text-sm rounded-md flex justify-center items-center shadow-sm hover:bg-bg-surface/70"},"+",-1)]),8,ai),k("td",{class:"!p-0",colspan:(tt=x.columns)==null?void 0:tt.length},null,8,di)],32)):ee("",!0),k("tr",{onMouseenter:H=>s.value=K,class:"border-b border-border !bg-bg-surface/20 hover:bg-bg-surface/40 transition-colors"},[w[12]||(w[12]=k("td",{class:"p-2"},null,-1)),(A(!0),V(pe,null,Ae(J.value,H=>(A(),V("td",{key:H==null?void 0:H.key,class:"p-2 border-r border-border truncate",style:Et({width:h[H.key]+"px"})},[(r==null?void 0:r.id)===(M==null?void 0:M.id)&&(r==null?void 0:r.field)===(H==null?void 0:H.key)?kt((A(),V("input",{key:0,"onUpdate:modelValue":Ce=>M[H==null?void 0:H.key]=Ce,onBlur:Ce=>f(M),class:"w-full p-1 border border-border/60 rounded-sm focus:outline-none focus:ring-2 focus:ring-blue-300 bg-bg-surface",ref_for:!0,ref:Ce=>Ce&&(r==null?void 0:r.id)===(M==null?void 0:M.id)&&(r==null?void 0:r.field)===(H==null?void 0:H.key)&&(a.value=Ce)},null,40,ui)),[[Co,M[H==null?void 0:H.key]]]):Mo(x.$slots,H.key,{key:2,row:M,column:H,index:`r-${M._id}`},()=>[(A(),Se(No(v),{row:M,column:H,index:M._id},null,8,["row","column","index"]))])],4))),128))],40,ci)],64)}),128)),!d.value&&x.canCreate?(A(),V("tr",{key:2,onClick:w[3]||(w[3]=M=>m(i==null?void 0:i.length)),class:"sticky bottom-0 bg-bg-surface border-t border-border cursor-pointer transition hover:bg-bg-surface/70",onMouseenter:w[4]||(w[4]=M=>s.value=i==null?void 0:i.length),onMouseleave:w[5]||(w[5]=M=>s.value=null)},[k("td",{colspan:x.columns.length,class:"p-2 text-text-secondary"},w[13]||(w[13]=[k("span",{class:"inline-flex w-5 h-5 border border-border rounded-full justify-center items-center text-secondary hover:bg-bg-surface/50 transition"},"+",-1),Be(" Add New Row ")]),8,pi)],32)):ee("",!0)])])]))}});(function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".mind-elixir{--gap: 30px;--root-radius: 30px;--main-radius: 20px;--root-color: #ffffff;--root-bgcolor: #4c4f69;--main-color: #444446;--main-bgcolor: #ffffff;--topic-padding: 3px;--color: #777777;--bgcolor: #f6f6f6;--selected: #4dc4ff;--panel-color: #444446;--panel-bgcolor: #ffffff;--panel-border-color: #eaeaea;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif}.mind-elixir .hyper-link{text-decoration:none;margin-left:.3em}.map-container{-webkit-user-select:none;user-select:none;height:100%;width:100%;overflow:scroll;font-size:15px}.map-container *{box-sizing:border-box}.map-container::-webkit-scrollbar{width:0px;height:0px}.map-container .selected{box-shadow:0 0 0 2px var(--selected)}.map-container .lhs{direction:rtl}.map-container .lhs me-tpc{direction:ltr}.map-container .map-canvas{height:20000px;width:20000px;position:relative;-webkit-user-select:none;user-select:none;transition:transform .3s;transform:scale(1);background-color:var(--bgcolor)}.map-container .map-canvas me-nodes{position:absolute;display:flex;justify-content:center;align-items:center;height:fit-content;width:fit-content}.map-container .map-canvas me-root{position:relative}.map-container .map-canvas me-root me-tpc{display:block;font-size:25px;color:var(--root-color);padding:10px var(--gap);border-radius:var(--root-radius);white-space:pre-wrap;background-color:var(--root-bgcolor)}.map-container .map-canvas me-root me-tpc #input-box{padding:10px var(--gap)}.map-container me-main>me-wrapper{position:relative;margin:45px 65px}.map-container me-main>me-wrapper>me-parent{margin:10px;padding:0}.map-container me-main>me-wrapper>me-parent>me-tpc{border-radius:var(--main-radius);background-color:var(--main-bgcolor);border:2px solid var(--main-color);color:var(--main-color);padding:8px 25px}.map-container me-main>me-wrapper>me-parent>me-tpc #input-box{padding:8px 25px}.map-container me-wrapper{display:block;pointer-events:none;width:fit-content}.map-container me-children,.map-container me-parent{display:inline-block;vertical-align:middle}.map-container me-parent{position:relative;cursor:pointer;padding:6px var(--gap);margin-top:10px}.map-container me-parent me-tpc{position:relative;display:block;border-radius:3px;color:var(--color);pointer-events:all;max-width:35em;white-space:pre-wrap;padding:var(--topic-padding)}.map-container me-parent me-tpc .insert-preview{position:absolute;width:100%;left:0;z-index:9}.map-container me-parent me-tpc .show{background:#7ad5ff;pointer-events:none;opacity:.7}.map-container me-parent me-tpc .before{height:14px;top:-14px}.map-container me-parent me-tpc .in{height:100%;top:0}.map-container me-parent me-tpc .after{height:14px;bottom:-14px}.map-container me-parent me-epd{position:absolute;height:18px;width:18px;opacity:.8;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NDcxNzI0MiIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNDgwaC0xMzguNjY2NjY3VjM0MS4zMzMzMzNjMC0xNy4wNjY2NjctMTQuOTMzMzMzLTMyLTMyLTMycy0zMiAxNC45MzMzMzMtMzIgMzJ2MTM4LjY2NjY2N0gzNDEuMzMzMzMzYy0xNy4wNjY2NjcgMC0zMiAxNC45MzMzMzMtMzIgMzJzMTQuOTMzMzMzIDMyIDMyIDMyaDEzOC42NjY2NjdWNjgyLjY2NjY2N2MwIDE3LjA2NjY2NyAxNC45MzMzMzMgMzIgMzIgMzJzMzItMTQuOTMzMzMzIDMyLTMydi0xMzguNjY2NjY3SDY4Mi42NjY2NjdjMTcuMDY2NjY3IDAgMzItMTQuOTMzMzMzIDMyLTMycy0xNC45MzMzMzMtMzItMzItMzJ6Ij48L3BhdGg+Cjwvc3ZnPg==);background-repeat:no-repeat;background-size:contain;background-position:center;pointer-events:all;z-index:9}.map-container me-parent me-epd.minus{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NTU2NDk4NSIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNTQ0SDM0MS4zMzMzMzNjLTE3LjA2NjY2NyAwLTMyLTE0LjkzMzMzMy0zMi0zMnMxNC45MzMzMzMtMzIgMzItMzJoMzQxLjMzMzMzNGMxNy4wNjY2NjcgMCAzMiAxNC45MzMzMzMgMzIgMzJzLTE0LjkzMzMzMyAzMi0zMiAzMnoiPjwvcGF0aD4KPC9zdmc+)!important;transition:opacity .3s;opacity:0}.map-container me-parent me-epd.minus:hover{opacity:.8}.map-container .icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}.map-container .lines,.map-container .summary,.map-container .subLines,.map-container .topiclinks,.map-container .linkcontroller{position:absolute;height:102%;width:100%;top:0;left:0}.map-container .topiclinks,.map-container .linkcontroller,.map-container .summary{pointer-events:none}.map-container .topiclinks text,.map-container .linkcontroller text,.map-container .summary text{pointer-events:all}.map-container .topiclinks .selected,.map-container .linkcontroller .selected,.map-container .summary .selected{pointer-events:none}.map-container .lines,.map-container .subLines{pointer-events:none;z-index:-1}.map-container .topiclinks *,.map-container .linkcontroller *{z-index:100}.map-container .topiclinks g{cursor:pointer}.map-container #input-box{position:absolute;top:0;left:0;padding:var(--topic-padding);color:var(--color);background-color:var(--bgcolor);width:max-content;max-width:35em;z-index:11;direction:ltr;-webkit-user-select:auto;user-select:auto;pointer-events:all}.map-container me-tpc>*{pointer-events:none}.map-container me-tpc>img{display:block;margin-bottom:8px;object-fit:cover}.map-container me-tpc>.text{display:inline-block}.map-container .circle{position:absolute;height:10px;width:10px;margin-top:-5px;margin-left:-5px;border-radius:100%;background:#757575;border:2px solid #ffffff;cursor:pointer}.map-container .tags{direction:ltr}.map-container .tags span{display:inline-block;border-radius:3px;padding:2px 4px;background:#d6f0f8;color:#276f86;margin:2px 3px 0 0;font-size:12px;line-height:1.3em}.map-container .icons{display:inline-block;direction:ltr;margin-right:10px}.map-container .icons span{display:inline-block;line-height:1.3em}.map-container .mind-elixir-ghost{position:fixed;top:-100%;left:-100%;box-sizing:content-box;opacity:.5;background-color:#f6f6f6;max-width:200px;width:fit-content;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:8px 16px;border-radius:6px;border:#666666 2px solid}.map-container .selection-area{background:#4f90f22d;border:1px solid #4f90f2}.mind-elixir .context-menu{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99}.mind-elixir .context-menu .menu-list{position:fixed;list-style:none;margin:0;padding:0;font:300 15px Roboto,sans-serif;color:var(--panel-color);box-shadow:0 12px 15px #0003}.mind-elixir .context-menu .menu-list li{min-width:200px;overflow:hidden;white-space:nowrap;padding:10px 14px;background:var(--panel-bgcolor);border-bottom:1px solid var(--panel-border-color)}.mind-elixir .context-menu .menu-list li a{color:#333;text-decoration:none}.mind-elixir .context-menu .menu-list li.disabled{display:none;color:#5e5e5e;background-color:#f7f7f7}.mind-elixir .context-menu .menu-list li.disabled:hover{cursor:default;background-color:#f7f7f7}.mind-elixir .context-menu .menu-list li:hover{cursor:pointer;filter:brightness(.9)}.mind-elixir .context-menu .menu-list li:first-child{border-radius:5px 5px 0 0}.mind-elixir .context-menu .menu-list li:last-child{border-bottom:0;border-radius:0 0 5px 5px}.mind-elixir .context-menu .menu-list li span:last-child{float:right}.mind-elixir .tips{position:absolute;bottom:20px;left:50%;transform:translate(-50%);color:var(--panel-color);font-weight:bolder}.mind-elixir .mobile-menu{position:absolute;left:20px;bottom:70px;z-index:99;margin:0;padding:0;color:#333;border-radius:5px;box-shadow:0 12px 15px #0003;overflow:hidden}.mind-elixir .mobile-menu *{transition:color .4s,background-color .4s}.mind-elixir .mobile-menu div{float:left;text-align:center;width:30px;overflow:hidden;white-space:nowrap;padding:8px;background-color:#fff;border-bottom:1px solid #ecf0f1}.mind-elixir .mobile-menu div a{color:#333;text-decoration:none}.mind-elixir .mobile-menu div.disabled{color:#5e5e5e;background-color:#f7f7f7}.mind-elixir .mobile-menu div.disabled:hover{cursor:default;background-color:#f7f7f7}.mind-elixir .mobile-menu div:hover{cursor:pointer;background-color:#ecf0f1}.mind-elixir-toolbar{font-family:iconfont;position:absolute;color:var(--panel-color);background:var(--panel-bgcolor);padding:10px;border-radius:5px;box-shadow:0 1px 2px #0003}.mind-elixir-toolbar svg{display:inline-block}.mind-elixir-toolbar span:active{opacity:.5}.mind-elixir-toolbar.rb{right:20px;bottom:20px}.mind-elixir-toolbar.rb span+span{margin-left:10px}.mind-elixir-toolbar.lt{font-size:20px;left:20px;top:20px}.mind-elixir-toolbar.lt span{display:block}.mind-elixir-toolbar.lt span+span{margin-top:10px}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();(function(e){var t,n,o,i,r,s,a='<svg><symbol id="icon-edit" viewBox="0 0 1024 1024"><path d="M423.765333 128a42.666667 42.666667 0 0 1 3.2 85.205333L423.765333 213.333333H234.666667a64 64 0 0 0-63.872 60.245334L170.666667 277.333333v512a64 64 0 0 0 60.245333 63.872L234.666667 853.333333h512a64 64 0 0 0 63.872-60.245333L810.666667 789.333333v-189.098666a42.666667 42.666667 0 0 1 85.205333-3.2l0.128 3.2V789.333333a149.333333 149.333333 0 0 1-144.213333 149.248L746.666667 938.666667h-512a149.333333 149.333333 0 0 1-149.248-144.213334L85.333333 789.333333v-512a149.333333 149.333333 0 0 1 144.213334-149.248L234.666667 128h189.098666z m324.949334-53.248a42.666667 42.666667 0 0 1 60.330666 0l150.869334 150.869333a42.666667 42.666667 0 0 1 0 60.330667l-329.386667 329.386667a42.666667 42.666667 0 0 1-29.44 12.458666l-153.386667 2.517334a42.666667 42.666667 0 0 1-43.349333-43.349334l2.56-153.386666a42.666667 42.666667 0 0 1 12.458667-29.44z m30.165333 90.496L491.946667 452.266667l-1.493334 91.989333 92.032-1.493333 286.976-286.976-90.538666-90.538667z"  ></path></symbol><symbol id="icon-rising" viewBox="0 0 1024 1024"><path d="M553.173333 803.84h-64l0.021334-474.581333-224.021334 224-45.269333-45.226667L521.6 206.293333l301.717333 301.696-45.269333 45.269334-224.853333-224.896v475.477333z"  ></path></symbol><symbol id="icon-falling" viewBox="0 0 1024 1024"><path d="M553.173333 238.314667h-64l0.021334 474.602666-224.021334-224-45.269333 45.226667L521.6 835.861333l301.717333-301.717333-45.269333-45.226667-224.853333 224.853334V238.336z"  ></path></symbol><symbol id="icon-shanchu2" viewBox="0 0 1024 1024"><path d="M516.60601807 107.93026734c-82.64382935 0-149.71865844 65.51751709-152.5729065 147.77160644H171.37136841c-21.40603638 0-38.92044068 17.38504028-38.92044068 38.92126465 0 21.40686036 17.38504028 38.92208862 38.92126466 38.92208862h42.94308471v435.40136719c0 81.73498536 55.39828492 148.55026245 123.90106201 148.55026245h348.99444581c68.37341309 0 123.90106201-66.42553711 123.901062-148.55026245V333.80477906h38.92126465c21.40686036 0 38.92126464-17.38586426 38.92126465-38.92208863 0-21.40686036-17.38504028-38.92126464-38.92126465-38.92126465H668.91854859C666.45321656 173.44860839 599.24902344 107.93109131 516.60601807 107.93109131z m-79.65939331 147.77160644c2.85424805-42.16442872 37.2354126-74.85809326 79.78875732-74.85809326s76.93450927 32.82302857 79.39984131 74.85809326H436.94662476z m-98.86047364 589.01165771c-24.2611084 0-50.98754883-31.13717651-50.98754883-75.76693725V333.80477906h450.97036744V769.33551026c0 44.50039673-26.72644043 75.76776123-50.98754884 75.76776122H338.08615112v-0.38973999z m0 0"  ></path><path d="M390.37063599 751.17263794c17.77313232 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.77478027 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.27124023 40.08883667 32.43493653 40.08883667z m117.41308594 0c17.7739563 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.7739563 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.66098023 40.08883667 32.43493653 40.08883667z m123.51049804 0c17.7739563 0 32.43493653-17.7739563 32.43493652-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43493652-40.08966065-17.7739563 0-32.43411255 17.77478027-32.43411255 40.08966065v228.72875976c0 22.18469239 14.14105224 40.08883667 32.43411255 40.08883667z m0 0"  ></path></symbol><symbol id="icon-zijiedian" viewBox="0 0 1024 1024"><path d="M312.208 472c19.568-157.856 153.432-280 315.656-280 175.68 0 318.112 143.272 318.112 320S803.552 832 627.864 832c-162.224 0-296.08-122.144-315.656-280H120a40 40 0 0 1 0-80h192.208zM632 752c132.552 0 240-107.448 240-240 0-132.552-107.448-240-240-240-132.552 0-240 107.448-240 240 0 132.552 107.448 240 240 240z m-40-280v-80a40 40 0 0 1 80 0v80h80a40 40 0 0 1 0 80h-80v80a40 40 0 0 1-80 0v-80h-80a40 40 0 0 1 0-80h80z"  ></path></symbol><symbol id="icon-tongjijiedian-" viewBox="0 0 1024 1024"><path d="M803.84 131.626667H410.24A59.733333 59.733333 0 0 0 350.506667 192v45.226667H199.68a51.626667 51.626667 0 0 0-51.626667 51.626666v465.92a51.626667 51.626667 0 0 0 51.626667 51.626667h187.52v-55.466667h-162.133333a21.333333 21.333333 0 0 1-21.333334-21.333333V313.386667a21.333333 21.333333 0 0 1 21.333334-21.333334h125.653333v64a59.733333 59.733333 0 0 0 59.733333 59.733334h393.386667a59.733333 59.733333 0 0 0 59.733333-59.733334V192a59.733333 59.733333 0 0 0-59.733333-60.373333z m4.266667 224.64a4.266667 4.266667 0 0 1-4.266667 4.266666H410.24a4.266667 4.266667 0 0 1-4.266667-4.266666V192a4.266667 4.266667 0 0 1 4.266667-4.266667h393.6a4.266667 4.266667 0 0 1 4.266667 4.266667zM716.16 749.44h-81.28v-81.493333a27.733333 27.733333 0 0 0-55.466667 0v81.28h-81.493333a27.733333 27.733333 0 1 0 0 55.466666h81.28v81.28a27.733333 27.733333 0 1 0 55.466667 0v-81.066666h81.28a27.733333 27.733333 0 0 0 0-55.466667z"  ></path></symbol><symbol id="icon-close" viewBox="0 0 1024 1024"><path d="M557.312 513.248l265.28-263.904c12.544-12.48 12.608-32.704 0.128-45.248-12.512-12.576-32.704-12.608-45.248-0.128L512.128 467.904l-263.04-263.84c-12.448-12.48-32.704-12.544-45.248-0.064-12.512 12.48-12.544 32.736-0.064 45.28l262.976 263.776L201.6 776.8c-12.544 12.48-12.608 32.704-0.128 45.248a31.937 31.937 0 0 0 22.688 9.44c8.16 0 16.32-3.104 22.56-9.312l265.216-263.808 265.44 266.24c6.24 6.272 14.432 9.408 22.656 9.408a31.94 31.94 0 0 0 22.592-9.344c12.512-12.48 12.544-32.704 0.064-45.248L557.312 513.248z" fill="" ></path></symbol><symbol id="icon-menu" viewBox="0 0 1024 1024"><path d="M109.714 292.571h804.572c21.943 0 36.571-21.942 36.571-43.885 0-14.629-14.628-29.257-36.571-29.257H109.714c-21.943 0-36.571 14.628-36.571 36.571 0 14.629 14.628 36.571 36.571 36.571zM914.286 512H109.714c-21.943 0-36.571 14.629-36.571 36.571 0 14.629 14.628 36.572 36.571 36.572h804.572c21.943 0 36.571-21.943 36.571-43.886 0-14.628-14.628-29.257-36.571-29.257z m0 292.571H109.714c-21.943 0-36.571 14.629-36.571 36.572s14.628 36.571 36.571 36.571h804.572c21.943 0 36.571-21.943 36.571-36.571 0-21.943-14.628-36.572-36.571-36.572z"  ></path></symbol><symbol id="icon-right" viewBox="0 0 1024 1024"><path d="M385 560.69999999L385 738.9c0 36.90000001 26.4 68.5 61.3 68.5l150.2 0c1.5 0 3-0.1 4.5-0.3 10.2 38.7 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-42 0-77.3 28.6-87.5 67.39999999-1.4-0.3-2.9-0.4-4.5-0.39999999L446.3 760.4c-6.8 0-14.3-8.9-14.3-21.49999999l0-427.00000001c0-12.7 7.40000001-21.5 14.30000001-21.5l150.19999999 0c1.5 0 3-0.2 4.5-0.4 10.2 38.8 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.4 0-49.9-40.5-90.6-90.5-90.59999999-42 0-77.3 28.6-87.5 67.39999999-1.4-0.2-2.9-0.4-4.49999999-0.4L446.3 243.3c-34.80000001 0-61.3 31.6-61.3 68.50000001L385 513.7l-79.1 0c-10.4-38.5-45.49999999-67-87.4-67-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c41.79999999 0 77.00000001-28.4 87.4-67L385 560.69999999z" fill="" ></path></symbol><symbol id="icon-left" viewBox="0 0 1024 1024"><path d="M639 463.30000001L639 285.1c0-36.90000001-26.4-68.5-61.3-68.5l-150.2 0c-1.5 0-3 0.1-4.5 0.3-10.2-38.7-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c42 0 77.3-28.6 87.5-67.39999999 1.4 0.3 2.9 0.4 4.5 0.39999999L577.7 263.6c6.8 0 14.3 8.9 14.3 21.49999999l0 427.00000001c0 12.7-7.40000001 21.5-14.30000001 21.5l-150.19999999 0c-1.5 0-3 0.2-4.5 0.4-10.2-38.8-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.4 0 49.9 40.5 90.6 90.5 90.59999999 42 0 77.3-28.6 87.5-67.39999999 1.4 0.2 2.9 0.4 4.49999999 0.4L577.7 780.7c34.80000001 0 61.3-31.6 61.3-68.50000001L639 510.3l79.1 0c10.4 38.5 45.49999999 67 87.4 67 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-41.79999999 0-77.00000001 28.4-87.4 67L639 463.30000001z" fill="" ></path></symbol><symbol id="icon-side" viewBox="0 0 1024 1024"><path d="M851.91168 328.45312c-59.97056 0-108.6208 48.47104-108.91264 108.36992l-137.92768 38.4a109.14304 109.14304 0 0 0-63.46752-46.58688l1.39264-137.11872c47.29344-11.86816 82.31936-54.66624 82.31936-105.64096 0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.76288-108.91776 108.91776c0 49.18784 32.60928 90.75712 77.38368 104.27392l-1.41312 138.87488a109.19936 109.19936 0 0 0-63.50336 48.55808l-138.93632-39.48544 0.01024-0.72704c0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.75776-108.91776 108.91776c0 60.15488 48.76288 108.91264 108.91776 108.91264 39.3984 0 73.91232-20.92032 93.03552-52.2496l139.19232 39.552-0.00512 0.2304c0 25.8304 9.00096 49.5616 24.02816 68.23424l-90.14272 132.63872a108.7488 108.7488 0 0 0-34.2528-5.504c-60.15488 0-108.91776 48.768-108.91776 108.91776 0 60.16 48.76288 108.91776 108.91776 108.91776 60.16 0 108.92288-48.75776 108.92288-108.91776 0-27.14624-9.9328-51.968-26.36288-71.04l89.04704-131.03104a108.544 108.544 0 0 0 37.6832 6.70208 108.672 108.672 0 0 0 36.48512-6.272l93.13792 132.57216a108.48256 108.48256 0 0 0-24.69888 69.0688c0 60.16 48.768 108.92288 108.91776 108.92288 60.16 0 108.91776-48.76288 108.91776-108.92288 0-60.14976-48.75776-108.91776-108.91776-108.91776a108.80512 108.80512 0 0 0-36.69504 6.3488l-93.07136-132.48a108.48768 108.48768 0 0 0 24.79616-72.22784l136.09984-37.888c18.99008 31.93856 53.84192 53.3504 93.69088 53.3504 60.16 0 108.92288-48.75776 108.92288-108.91264-0.00512-60.15488-48.77312-108.92288-108.92288-108.92288z"  ></path></symbol><symbol id="icon-B" viewBox="0 0 1024 1024"><path d="M98.067692 65.457231H481.28c75.854769 0 132.411077 3.150769 169.668923 9.452307 37.336615 6.301538 70.656 19.534769 100.036923 39.620924 29.459692 20.007385 53.956923 46.710154 73.570462 80.029538 19.692308 33.398154 29.459692 70.734769 29.459692 112.167385 0 44.898462-12.130462 86.094769-36.233846 123.588923a224.886154 224.886154 0 0 1-98.461539 84.283077c58.368 17.092923 103.266462 46.08 134.695385 87.04 31.350154 40.96 47.025231 89.088 47.025231 144.462769 0 43.638154-10.082462 86.016-30.404923 127.212308-20.243692 41.196308-47.891692 74.043077-83.02277 98.697846-35.052308 24.654769-78.296615 39.778462-129.732923 45.449846-32.295385 3.465846-110.119385 5.671385-233.472 6.537846H98.067692V65.457231z m193.536 159.507692V446.621538h126.818462c75.460923 0 122.328615-1.024 140.603077-3.229538 33.083077-3.938462 59.155692-15.36 78.139077-34.343385 18.904615-18.904615 28.435692-43.874462 28.435692-74.830769 0-29.696-8.192-53.720615-24.497231-72.310154-16.384-18.510769-40.644923-29.696-72.940307-33.634461-19.140923-2.205538-74.279385-3.308308-165.415385-3.308308h-111.064615z m0 381.243077v256.315077h179.2c69.710769 0 113.979077-1.969231 132.726154-5.907692 28.750769-5.198769 52.145231-17.959385 70.262154-38.281847 18.116923-20.243692 27.096615-47.340308 27.096615-81.368615 0-28.750769-6.931692-53.169231-20.873846-73.255385a118.232615 118.232615 0 0 0-60.494769-43.795692c-26.387692-9.137231-83.574154-13.705846-171.638154-13.705846H291.603692z"  ></path></symbol><symbol id="icon-a" viewBox="0 0 1024 1024"><path d="M757.76 665.6q0 20.48 1.536 34.304t7.68 22.016 18.944 12.288 34.304 4.096q-3.072 25.6-15.36 44.032-11.264 16.384-33.28 29.696t-62.976 13.312q-11.264 0-20.48-0.512t-17.408-2.56l-6.144-2.048-1.024 0q-4.096-1.024-10.24-4.096-2.048-2.048-4.096-2.048-1.024-1.024-2.048-1.024-14.336-8.192-23.552-17.408t-14.336-17.408q-6.144-10.24-9.216-20.48-63.488 75.776-178.176 75.776-48.128 0-88.064-15.36t-69.12-44.032-45.056-68.096-15.872-88.576 16.896-89.088 47.616-67.584 74.24-42.496 96.768-14.848q48.128 0 88.576 17.408t66.048 49.152q0-8.192 0.512-16.384t0.512-15.36q0-71.68-39.936-104.448t-128-32.768q-43.008 0-84.992 6.656t-84.992 17.92q14.336-28.672 25.088-47.616t24.064-29.184q30.72-24.576 158.72-24.576 79.872 0 135.168 13.824t90.624 43.52 51.2 75.264 15.872 108.032l0 200.704zM487.424 743.424q50.176 0 79.872-33.28t29.696-95.744q0-61.44-28.672-93.696t-76.8-32.256q-52.224 0-82.944 33.28t-30.72 94.72q0 58.368 31.744 92.672t77.824 34.304z"  ></path></symbol><symbol id="icon-full" viewBox="0 0 1024 1024"><path d="M639.328 416c8.032 0 16.096-3.008 22.304-9.056l202.624-197.184-0.8 143.808c-0.096 17.696 14.144 32.096 31.808 32.192 0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808l1.248-222.208c0-0.672-0.352-1.248-0.384-1.92 0.032-0.512 0.288-0.896 0.288-1.408 0.032-17.664-14.272-32-31.968-32.032L671.552 96l-0.032 0c-17.664 0-31.968 14.304-32 31.968C639.488 145.632 653.824 160 671.488 160l151.872 0.224-206.368 200.8c-12.672 12.32-12.928 32.608-0.64 45.248C622.656 412.736 630.976 416 639.328 416z"  ></path><path d="M896.032 639.552 896.032 639.552c-17.696 0-32 14.304-32.032 31.968l-0.224 151.872-200.832-206.4c-12.32-12.64-32.576-12.96-45.248-0.64-12.672 12.352-12.928 32.608-0.64 45.248l197.184 202.624-143.808-0.8c-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808-0.096 17.696 14.144 32.096 31.808 32.192l222.24 1.248c0.064 0 0.128 0 0.192 0 0.64 0 1.12-0.32 1.76-0.352 0.512 0.032 0.896 0.288 1.408 0.288l0.032 0c17.664 0 31.968-14.304 32-31.968L928 671.584C928.032 653.952 913.728 639.584 896.032 639.552z"  ></path><path d="M209.76 159.744l143.808 0.8c0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808 0.096-17.696-14.144-32.096-31.808-32.192L131.68 95.328c-0.064 0-0.128 0-0.192 0-0.672 0-1.248 0.352-1.888 0.384-0.448 0-0.8-0.256-1.248-0.256 0 0-0.032 0-0.032 0-17.664 0-31.968 14.304-32 31.968L96 352.448c-0.032 17.664 14.272 32 31.968 32.032 0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968l0.224-151.936 200.832 206.4c6.272 6.464 14.624 9.696 22.944 9.696 8.032 0 16.096-3.008 22.304-9.056 12.672-12.32 12.96-32.608 0.64-45.248L209.76 159.744z"  ></path><path d="M362.368 617.056l-202.624 197.184 0.8-143.808c0.096-17.696-14.144-32.096-31.808-32.192-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808l-1.248 222.24c0 0.704 0.352 1.312 0.384 2.016 0 0.448-0.256 0.832-0.256 1.312-0.032 17.664 14.272 32 31.968 32.032L352.448 928c0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968s-14.272-32-31.968-32.032l-151.936-0.224 206.4-200.832c12.672-12.352 12.96-32.608 0.64-45.248S375.008 604.704 362.368 617.056z"  ></path></symbol><symbol id="icon-add" viewBox="0 0 1024 1024"><path d="M863.328 482.56l-317.344-1.12L545.984 162.816c0-17.664-14.336-32-32-32s-32 14.336-32 32l0 318.4L159.616 480.064c-0.032 0-0.064 0-0.096 0-17.632 0-31.936 14.24-32 31.904C127.424 529.632 141.728 544 159.392 544.064l322.592 1.152 0 319.168c0 17.696 14.336 32 32 32s32-14.304 32-32l0-318.944 317.088 1.12c0.064 0 0.096 0 0.128 0 17.632 0 31.936-14.24 32-31.904C895.264 496.992 880.96 482.624 863.328 482.56z"  ></path></symbol><symbol id="icon-move" viewBox="0 0 1024 1024"><path d="M863.744 544 163.424 544c-17.664 0-32-14.336-32-32s14.336-32 32-32l700.32 0c17.696 0 32 14.336 32 32S881.44 544 863.744 544z"  ></path></symbol><symbol id="icon-living" viewBox="0 0 1024 1024"><path d="M514.133333 488.533333m-106.666666 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z" fill="" ></path><path d="M512 64C264.533333 64 64 264.533333 64 512c0 236.8 183.466667 428.8 416 445.866667v-134.4c-53.333333-59.733333-200.533333-230.4-200.533333-334.933334 0-130.133333 104.533333-234.666667 234.666666-234.666666s234.666667 104.533333 234.666667 234.666666c0 61.866667-49.066667 153.6-145.066667 270.933334l-59.733333 68.266666V960C776.533333 942.933333 960 748.8 960 512c0-247.466667-200.533333-448-448-448z" fill="" ></path></symbol></svg>',d=(d=document.getElementsByTagName("script"))[d.length-1].getAttribute("data-injectcss");if(d&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(u){console&&console.log(u)}}function p(){r||(r=!0,o())}t=function(){var u,f,m,b;(b=document.createElement("div")).innerHTML=a,a=null,(m=b.getElementsByTagName("svg")[0])&&(m.setAttribute("aria-hidden","true"),m.style.position="absolute",m.style.width=0,m.style.height=0,m.style.overflow="hidden",u=m,(f=document.body).firstChild?(b=u,(m=f.firstChild).parentNode.insertBefore(b,m)):f.appendChild(u))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(o=t,i=e.document,r=!1,(s=function(){try{i.documentElement.doScroll("left")}catch{return void setTimeout(s,50)}p()})(),i.onreadystatechange=function(){i.readyState=="complete"&&(i.onreadystatechange=null,p())})})(window);const ue=0,Le=1,ft=2,xe=30,vn={name:"Latte",palette:["#dd7878","#ea76cb","#8839ef","#e64553","#fe640b","#df8e1d","#40a02b","#209fb5","#1e66f5","#7287fd"],cssVar:{"--main-color":"#444446","--main-bgcolor":"#ffffff","--color":"#777777","--bgcolor":"#f6f6f6","--panel-color":"#444446","--panel-bgcolor":"#ffffff","--panel-border-color":"#eaeaea"}},gn={name:"Dark",palette:["#848FA0","#748BE9","#D2F9FE","#4145A5","#789AFA","#706CF4","#EF987F","#775DD5","#FCEECF","#DA7FBC"],cssVar:{"--main-color":"#ffffff","--main-bgcolor":"#4c4f69","--color":"#cccccc","--bgcolor":"#252526","--panel-color":"#ffffff","--panel-bgcolor":"#2d3748","--panel-border-color":"#696969"}};function ut(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}const hi=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),pt=function(e,t){if(t.id===e)return t;if(t.children&&t.children.length){for(let n=0;n<t.children.length;n++){const o=pt(e,t.children[n]);if(o)return o}return null}else return null},we=(e,t)=>{if(e.parent=t,e.children)for(let n=0;n<e.children.length;n++)we(e.children[n],e)};function Tt(e){if(e.id=et(),e.children)for(let t=0;t<e.children.length;t++)Tt(e.children[t])}const fi=(e,t)=>{let n=Date.now();return function(...o){Date.now()-n<t||(e(...o),n=Date.now())}};function bn(e,t,n,o){const i=o-t,r=e-n;let s=Math.atan(Math.abs(i)/Math.abs(r))/3.14*180;r<0&&i>0&&(s=180-s),r<0&&i<0&&(s=180+s),r>0&&i<0&&(s=360-s);const a=15,d=30,p=s+d,u=s-d;return{x1:n+Math.cos(Math.PI*p/180)*a,y1:o-Math.sin(Math.PI*p/180)*a,x2:n+Math.cos(Math.PI*u/180)*a,y2:o-Math.sin(Math.PI*u/180)*a}}function et(){return(new Date().getTime().toString(16)+Math.random().toString(16).substr(2)).substr(2,16)}const vi=function(){const e=et();return{topic:this.newTopicName,id:e}};function zt(e){return JSON.parse(JSON.stringify(e,(t,n)=>{if(t!=="parent")return n}))}const Me=(e,t)=>{let n=0,o=0;for(;t&&t!==e;)n+=t.offsetLeft,o+=t.offsetTop,t=t.offsetParent;return{offsetLeft:n,offsetTop:o}},R=(e,t)=>{for(const n in t)e.setAttribute(n,t[n])},_t=e=>e?e.tagName==="ME-TPC":!1,vt=e=>e.filter(t=>{for(let n=0;n<e.length;n++)if(t!==e[n]&&e[n].parentElement.parentElement.contains(t))return!1;return!0}),ce={moved:!1,mousedown:!1,onMove(e,t){if(this.mousedown){this.moved=!0;const n=e.movementX,o=e.movementY;t.scrollTo(t.scrollLeft-n,t.scrollTop-o)}},clear(){this.moved=!1,this.mousedown=!1}};function gi(e){e.map.addEventListener("click",t=>{var n,o;if(t.button!==0)return;if((n=e.helper1)!=null&&n.moved){e.helper1.clear();return}if((o=e.helper2)!=null&&o.moved){e.helper2.clear();return}if(ce.moved){ce.clear();return}e.clearSelection();const i=t.target;if(i.tagName==="ME-EPD")e.expandNode(i.previousSibling);else if(e.editable)_t(i)?e.selectNode(i,!1,t):i.tagName==="text"?i.dataset.type==="custom-link"?e.selectArrow(i.parentElement):e.selectSummary(i.parentElement):i.className;else return}),e.map.addEventListener("dblclick",t=>{if(t.preventDefault(),!e.editable)return;const n=t.target;_t(n)?e.beginEdit(n):n.tagName==="text"&&(n.dataset.type==="custom-link"?e.editArrowLabel(n.parentElement):e.editSummary(n.parentElement))}),e.map.addEventListener("mousemove",t=>{t.target.contentEditable!=="true"&&ce.onMove(t,e.container)}),e.map.addEventListener("mousedown",t=>{const n=e.mouseSelectionButton===0?2:0;t.button===n&&t.target.contentEditable!=="true"&&(ce.moved=!1,ce.mousedown=!0)}),e.map.addEventListener("mouseleave",t=>{const n=e.mouseSelectionButton===0?2:0;t.button===n&&ce.clear()}),e.map.addEventListener("mouseup",t=>{const n=e.mouseSelectionButton===0?2:0;t.button===n&&ce.clear()}),e.map.addEventListener("contextmenu",t=>{t.preventDefault()})}const bi={create(){return{handlers:{},showHandler:function(){console.log(this.handlers)},addListener:function(e,t){this.handlers[e]===void 0&&(this.handlers[e]=[]),this.handlers[e].push(t)},fire:function(e,...t){if(this.handlers[e]instanceof Array){const n=this.handlers[e];for(let o=0;o<n.length;o++)n[o](...t)}},removeListener:function(e,t){if(!this.handlers[e])return;const n=this.handlers[e];if(!t)n.length=0;else if(n.length)for(let o=0;o<n.length;o++)n[o]===t&&this.handlers[e].splice(o,1)}}}},mt=document,yi=function(){console.time("layout"),this.nodes.innerHTML="";const e=this.createTopic(this.nodeData);jt(e,this.nodeData),e.draggable=!1;const t=mt.createElement("me-root");t.appendChild(e);const n=this.nodeData.children||[];if(this.direction===ft){let o=0,i=0;n.map(r=>{r.direction===ue?o+=1:r.direction===Le?i+=1:o<=i?(r.direction=ue,o+=1):(r.direction=Le,i+=1)})}xi(this,n,t),console.timeEnd("layout")},xi=function(e,t,n){const o=mt.createElement("me-main");o.className="lhs";const i=mt.createElement("me-main");i.className="rhs";for(let r=0;r<t.length;r++){const s=t[r],{grp:a}=e.createWrapper(s);e.direction===ft?s.direction===ue?o.appendChild(a):i.appendChild(a):e.direction===ue?o.appendChild(a):i.appendChild(a)}e.nodes.appendChild(o),e.nodes.appendChild(n),e.nodes.appendChild(i),e.nodes.appendChild(e.lines)},wi=function(e,t){const n=mt.createElement("me-children");for(let o=0;o<t.length;o++){const i=t[o],{grp:r}=e.createWrapper(i);n.appendChild(r)}return n},ie=document,F=(e,t)=>{const n=(t?t.mindElixirBox:ie).querySelector(`[data-nodeid=me${e}]`);if(!n)throw new Error(`FindEle: Node ${e} not found, maybe it's collapsed.`);return n},jt=function(e,t){if(e.innerHTML="",t.style&&(e.style.color=t.style.color||"",e.style.background=t.style.background||"",e.style.fontSize=t.style.fontSize+"px",e.style.fontWeight=t.style.fontWeight||"normal"),t.dangerouslySetInnerHTML){e.innerHTML=t.dangerouslySetInnerHTML;return}if(t.image){const n=t.image;if(n.url&&n.width&&n.height){const o=ie.createElement("img");o.src=n.url,o.style.width=n.width+"px",o.style.height=n.height+"px",e.appendChild(o),e.image=o}else console.warn("image url/width/height are required")}else e.image&&(e.image=void 0);{const n=ie.createElement("span");n.className="text",n.textContent=t.topic,e.appendChild(n),e.text=n}if(t.hyperLink){const n=ie.createElement("a");n.className="hyper-link",n.target="_blank",n.innerText="ðŸ”—",n.href=t.hyperLink,e.appendChild(n),e.linkContainer=n}else e.linkContainer&&(e.linkContainer=void 0);if(t.icons&&t.icons.length){const n=ie.createElement("span");n.className="icons",n.innerHTML=t.icons.map(o=>`<span>${ut(o)}</span>`).join(""),e.appendChild(n),e.icons=n}else e.icons&&(e.icons=void 0);if(t.tags&&t.tags.length){const n=ie.createElement("div");n.className="tags",n.innerHTML=t.tags.map(o=>`<span>${ut(o)}</span>`).join(""),e.appendChild(n),e.tags=n}else e.tags&&(e.tags=void 0)},Mi=function(e,t){const n=ie.createElement("me-wrapper"),{p:o,tpc:i}=this.createParent(e);if(n.appendChild(o),!t&&e.children&&e.children.length>0){const r=At(e.expanded);if(o.appendChild(r),e.expanded!==!1){const s=wi(this,e.children);n.appendChild(s)}}return{grp:n,top:o,tpc:i}},Ci=function(e){const t=ie.createElement("me-parent"),n=this.createTopic(e);return jt(n,e),t.appendChild(n),{p:t,tpc:n}},Ni=function(e){const t=ie.createElement("me-children");return t.append(...e),t},Ei=function(e){const t=ie.createElement("me-tpc");return t.nodeObj=e,t.dataset.nodeid="me"+e.id,t.draggable=this.draggable,t};function yn(e){const t=ie.createRange();t.selectNodeContents(e);const n=window.getSelection();n&&(n.removeAllRanges(),n.addRange(t))}const ki=function(e){if(console.time("editTopic"),!e)return;const t=ie.createElement("div"),n=e.text.textContent;e.appendChild(t),t.id="input-box",t.textContent=n,t.contentEditable="true",t.spellcheck=!1,t.style.cssText=`min-width:${e.offsetWidth-8}px;`,this.direction===ue&&(t.style.right="0"),t.focus(),yn(t),this.bus.fire("operation",{name:"beginEdit",obj:e.nodeObj}),t.addEventListener("keydown",o=>{o.stopPropagation();const i=o.key;if(i==="Enter"||i==="Tab"){if(o.shiftKey)return;o.preventDefault(),t==null||t.blur(),this.map.focus()}}),t.addEventListener("blur",()=>{var o;if(!t)return;const i=e.nodeObj,r=((o=t.textContent)==null?void 0:o.trim())||"";console.log(r),r===""?i.topic=n:i.topic=r,t.remove(),r!==n&&(e.text.textContent=i.topic,this.linkDiv(),this.bus.fire("operation",{name:"finishEdit",obj:i,origin:n}))}),console.timeEnd("editTopic")},At=function(e){const t=ie.createElement("me-epd");return t.expanded=e!==!1,t.className=e!==!1?"minus":"",t},Ye=document,Fe="http://www.w3.org/2000/svg",xn=function(e,t,n){const o=Ye.createElementNS(Fe,"path");return R(o,{d:e,stroke:t||"#666",fill:"none","stroke-width":n}),o},Qe=function(e){const t=Ye.createElementNS(Fe,"svg");return t.setAttribute("class",e),t.setAttribute("overflow","visible"),t},Jt=function(){const e=Ye.createElementNS(Fe,"line");return e.setAttribute("stroke","#bbb"),e.setAttribute("fill","none"),e.setAttribute("stroke-width","2"),e},_i=function(e,t){const n={stroke:"rgb(235, 95, 82)",fill:"none","stroke-linecap":"cap","stroke-width":"2"},o=Ye.createElementNS(Fe,"g"),i=Ye.createElementNS(Fe,"path"),r=Ye.createElementNS(Fe,"path");return R(r,{d:t,...n}),R(i,{d:e,...n,"stroke-dasharray":"8,2"}),o.appendChild(i),o.appendChild(r),o},wn=function(e,t,n){if(console.time("editSummary"),!t)return;const o=document.createElement("div");e.nodes.appendChild(o);const i=t.innerHTML;o.id="input-box",o.textContent=i,o.contentEditable="true",o.spellcheck=!1;const r=t.getAttribute("x"),s=t.getAttribute("y");o.style.cssText=`min-width:88px;position:absolute;left:${r}px;top:${s}px;`;const a=t.getAttribute("text-anchor");a==="end"?o.style.cssText+="transform: translate(-100%, -100%);":a==="middle"?o.style.cssText+="transform: translate(-50%, -100%);":o.style.cssText+="transform: translate(0, -100%);",o.focus(),yn(o),o.addEventListener("keydown",d=>{d.stopPropagation();const p=d.key;if(p==="Enter"||p==="Tab"){if(d.shiftKey)return;d.preventDefault(),o.blur(),e.map.focus()}}),o.addEventListener("blur",()=>{o&&n(o)}),console.timeEnd("editSummary")},Si=function(e){console.time("linkDiv"),this.nodes.style.top=`${1e4-this.nodes.offsetHeight/2}px`,this.nodes.style.left=`${1e4-this.nodes.offsetWidth/2}px`;const t=this.map.querySelectorAll("me-main > me-wrapper");this.lines.innerHTML="";const n=this.map.querySelector("me-root"),o=n.offsetTop,i=n.offsetLeft,r=n.offsetWidth,s=n.offsetHeight;for(let a=0;a<t.length;a++){const d=t[a],p=d.querySelector("me-tpc"),{offsetLeft:u,offsetTop:f}=Me(this.nodes,p),m=p.offsetWidth,b=p.offsetHeight,g=d.parentNode.className,v=this.generateMainBranch({pT:o,pL:i,pW:r,pH:s,cT:f,cL:u,cW:m,cH:b,direction:g,containerHeight:this.nodes.offsetHeight}),h=this.theme.palette,y=p.nodeObj.branchColor||h[a%h.length];p.style.borderColor=y,this.lines.appendChild(xn(v,y,"3"));const _=d.children[0].children[1];if(_&&(_.style.top=(_.parentNode.offsetHeight-_.offsetHeight)/2+"px",g==="lhs"?_.style.left="-10px":_.style.right="-10px"),!(e&&e!==d)&&d.childElementCount){const L=Qe("subLines"),E=d.lastChild;E.tagName==="svg"&&E.remove(),d.appendChild(L),Mn(this,L,y,d,g,!0)}}this.renderArrow(),this.renderSummary(),console.timeEnd("linkDiv")},Mn=function(e,t,n,o,i,r){const s=o.firstChild,a=o.children[1].children,d=s.offsetTop,p=s.offsetLeft,u=s.offsetWidth,f=s.offsetHeight;for(let m=0;m<a.length;m++){const b=a[m],g=b.firstChild,v=g.offsetTop,h=g.offsetLeft,y=g.offsetWidth,_=g.offsetHeight,L=g.firstChild.nodeObj.branchColor||n,E=e.generateSubBranch({pT:d,pL:p,pW:u,pH:f,cT:v,cL:h,cW:y,cH:_,direction:i,isFirst:r});t.appendChild(xn(E,L,"2"));const z=g.children[1];if(z){if(z.style.bottom=-(z.offsetHeight/2)+"px",i==="lhs"?z.style.left="10px":i==="rhs"&&(z.style.right="10px"),!z.expanded)continue}else continue;b.children[1].children.length>0&&Mn(e,t,L,b,i)}},Qt={addChild:"æ’å…¥å­èŠ‚ç‚¹",addParent:"æ’å…¥çˆ¶èŠ‚ç‚¹",addSibling:"æ’å…¥åŒçº§èŠ‚ç‚¹",removeNode:"åˆ é™¤èŠ‚ç‚¹",focus:"ä¸“æ³¨",cancelFocus:"å–æ¶ˆä¸“æ³¨",moveUp:"ä¸Šç§»",moveDown:"ä¸‹ç§»",link:"è¿žæŽ¥",clickTips:"è¯·ç‚¹å‡»ç›®æ ‡èŠ‚ç‚¹",summary:"æ‘˜è¦"},en={cn:Qt,zh_CN:Qt,zh_TW:{addChild:"æ’å…¥å­ç¯€é»ž",addParent:"æ’å…¥çˆ¶ç¯€é»ž",addSibling:"æ’å…¥åŒç´šç¯€é»ž",removeNode:"åˆªé™¤ç¯€é»ž",focus:"å°ˆæ³¨",cancelFocus:"å–æ¶ˆå°ˆæ³¨",moveUp:"ä¸Šç§»",moveDown:"ä¸‹ç§»",link:"é€£æŽ¥",clickTips:"è«‹é»žæ“Šç›®æ¨™ç¯€é»ž",summary:"æ‘˜è¦"},en:{addChild:"Add child",addParent:"Add parent",addSibling:"Add sibling",removeNode:"Remove node",focus:"Focus Mode",cancelFocus:"Cancel Focus Mode",moveUp:"Move up",moveDown:"Move down",link:"Link",clickTips:"Please click the target node",summary:"Summary"},ru:{addChild:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð´Ð¾Ñ‡ÐµÑ€Ð½Ð¸Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",addParent:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",addSibling:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð° ÑÑ‚Ð¾Ð¼ ÑƒÑ€Ð¾Ð²Ð½Ðµ",removeNode:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÑƒÐ·ÐµÐ»",focus:"Ð ÐµÐ¶Ð¸Ð¼ Ñ„Ð¾ÐºÑƒÑÐ¸Ñ€Ð¾Ð²ÐºÐ¸",cancelFocus:"ÐžÑ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ€ÐµÐ¶Ð¸Ð¼ Ñ„Ð¾ÐºÑƒÑÐ¸Ñ€Ð¾Ð²ÐºÐ¸",moveUp:"ÐŸÐ¾Ð´Ð½ÑÑ‚ÑŒ Ð²Ñ‹ÑˆÐµ",moveDown:"ÐžÐ¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð½Ð¸Ð¶Ðµ",link:"Ð¡ÑÑ‹Ð»ÐºÐ°",clickTips:"ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð½Ð° Ñ†ÐµÐ»ÐµÐ²Ð¾Ð¹ ÑƒÐ·ÐµÐ»",summary:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ"},ja:{addChild:"å­ãƒŽãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹",addParent:"è¦ªãƒŽãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™",addSibling:"å…„å¼ŸãƒŽãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹",removeNode:"ãƒŽãƒ¼ãƒ‰ã‚’å‰Šé™¤",focus:"é›†ä¸­",cancelFocus:"é›†ä¸­è§£é™¤",moveUp:"ä¸Šã¸ç§»å‹•",moveDown:"ä¸‹ã¸ç§»å‹•",link:"ã‚³ãƒã‚¯ãƒˆ",clickTips:"ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒŽãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„",summary:"æ¦‚è¦"},pt:{addChild:"Adicionar item filho",addParent:"Adicionar item pai",addSibling:"Adicionar item irmao",removeNode:"Remover item",focus:"Modo Foco",cancelFocus:"Cancelar Modo Foco",moveUp:"Mover para cima",moveDown:"Mover para baixo",link:"Link",clickTips:"Favor clicar no item alvo",summary:"Resumo"}};function Li(e,t){const n=L=>{const E=document.createElement("div");return E.innerText=L,E.className="tips",E},o=(L,E,z)=>{const Y=document.createElement("li");return Y.id=L,Y.innerHTML=`<span>${ut(E)}</span><span>${ut(z)}</span>`,Y},i=en[e.locale]?e.locale:"en",r=en[i],s=o("cm-add_child",r.addChild,"tab"),a=o("cm-add_parent",r.addParent,""),d=o("cm-add_sibling",r.addSibling,"enter"),p=o("cm-remove_child",r.removeNode,"delete"),u=o("cm-fucus",r.focus,""),f=o("cm-unfucus",r.cancelFocus,""),m=o("cm-up",r.moveUp,"PgUp"),b=o("cm-down",r.moveDown,"Pgdn"),g=o("cm-down",r.link,""),v=o("cm-down",r.summary,""),h=document.createElement("ul");if(h.className="menu-list",h.appendChild(s),h.appendChild(a),h.appendChild(d),h.appendChild(p),(!t||t.focus)&&(h.appendChild(u),h.appendChild(f)),h.appendChild(m),h.appendChild(b),h.appendChild(v),(!t||t.link)&&h.appendChild(g),t&&t.extend)for(let L=0;L<t.extend.length;L++){const E=t.extend[L],z=o(E.name,E.name,E.key||"");h.appendChild(z),z.onclick=Y=>{E.onclick(Y)}}const y=document.createElement("div");y.className="context-menu",y.appendChild(h),y.hidden=!0,e.container.append(y);let _=!0;e.container.oncontextmenu=function(L){if(L.preventDefault(),!e.editable)return;const E=L.target;if(_t(E)){E.parentElement.tagName==="ME-ROOT"?_=!0:_=!1,_?(u.className="disabled",m.className="disabled",b.className="disabled",a.className="disabled",d.className="disabled",p.className="disabled"):(u.className="",m.className="",b.className="",a.className="",d.className="",p.className=""),e.currentNodes||e.selectNode(E),y.hidden=!1,ce.mousedown&&(ce.mousedown=!1),h.style.top="",h.style.bottom="",h.style.left="",h.style.right="";const z=h.getBoundingClientRect(),Y=h.offsetHeight,G=h.offsetWidth,J=L.clientY-z.top,te=L.clientX-z.left;Y+J>window.innerHeight?(h.style.top="",h.style.bottom="0px"):(h.style.bottom="",h.style.top=J+15+"px"),G+te>window.innerWidth?(h.style.left="",h.style.right="0px"):(h.style.right="",h.style.left=te+10+"px")}},y.onclick=L=>{L.target===y&&(y.hidden=!0)},s.onclick=()=>{e.addChild(),y.hidden=!0},a.onclick=()=>{e.insertParent(),y.hidden=!0},d.onclick=()=>{_||(e.insertSibling("after"),y.hidden=!0)},p.onclick=()=>{_||(e.removeNode(),y.hidden=!0)},u.onclick=()=>{_||(e.focusNode(e.currentNode),y.hidden=!0)},f.onclick=()=>{e.cancelFocus(),y.hidden=!0},m.onclick=()=>{_||(e.moveUpNode(),y.hidden=!0)},b.onclick=()=>{_||(e.moveDownNode(),y.hidden=!0)},g.onclick=()=>{y.hidden=!0;const L=e.currentNode,E=n(r.clickTips);e.container.appendChild(E),e.map.addEventListener("click",z=>{z.preventDefault(),E.remove();const Y=z.target;Y.parentElement.tagName==="ME-PARENT"||Y.parentElement.tagName==="ME-ROOT"?e.createArrow(L,Y):console.log("link cancel")},{once:!0})},v.onclick=()=>{y.hidden=!0,e.createSummary(),e.unselectNodes()}}const Ti=e=>{const t=e.map.querySelectorAll(".lhs>me-wrapper>me-parent>me-tpc");e.selectNode(t[Math.ceil(t.length/2)-1])},zi=e=>{const t=e.map.querySelectorAll(".rhs>me-wrapper>me-parent>me-tpc");e.selectNode(t[Math.ceil(t.length/2)-1])},ji=e=>{e.selectNode(e.map.querySelector("me-root>me-tpc"))},Ai=function(e,t){const n=t.parentElement.parentElement.parentElement.previousSibling;if(n){const o=n.firstChild;e.selectNode(o)}},Di=function(e,t){const n=t.parentElement.nextSibling;if(n&&n.firstChild){const o=n.firstChild.firstChild.firstChild;e.selectNode(o)}},tn=function(e,t){var n,o;const i=e.currentNode||((n=e.currentNodes)==null?void 0:n[0]);if(!i)return;const r=i.nodeObj,s=i.offsetParent.offsetParent.parentElement;r.root?t==="lhs"?Ti(e):zi(e):s.className===t?Di(e,i):(o=r.parent)!=null&&o.root?ji(e):Ai(e,i)},nn=function(e,t){var n;const o=e.currentNode||((n=e.currentNodes)==null?void 0:n[0]);if(!o||o.nodeObj.root)return;const i=t+"Sibling",r=o.parentElement.parentElement[i];r&&e.selectNode(r.firstChild.firstChild)};function Ii(e){const t=()=>{e.currentArrow?e.removeArrow():e.currentSummary?e.removeSummary(e.currentSummary.summaryObj.id):e.currentNode?e.removeNode():e.currentNodes&&e.removeNodes(e.currentNodes)},n={13:o=>{o.shiftKey?e.insertSibling("before"):o.ctrlKey?e.insertParent():e.insertSibling("after")},9:()=>{e.addChild()},112:()=>{e.toCenter()},113:()=>{e.beginEdit()},38:o=>{if(o.altKey)e.moveUpNode();else{if(o.metaKey||o.ctrlKey)return e.initSide();nn(e,"previous")}},40:o=>{o.altKey?e.moveDownNode():nn(e,"next")},37:o=>{if(o.metaKey||o.ctrlKey)return e.initLeft();tn(e,"lhs")},39:o=>{if(o.metaKey||o.ctrlKey)return e.initRight();tn(e,"rhs")},33(){e.moveUpNode()},34(){e.moveDownNode()},67:o=>{(o.metaKey||o.ctrlKey)&&(e.currentNode?e.waitCopy=[e.currentNode]:e.currentNodes&&(e.waitCopy=e.currentNodes))},86:o=>{!e.waitCopy||!e.currentNode||(o.metaKey||o.ctrlKey)&&(e.waitCopy.length===1?e.copyNode(e.waitCopy[0],e.currentNode):e.copyNodes(e.waitCopy,e.currentNode))},187:o=>{if(o.metaKey||o.ctrlKey){if(e.scaleVal>1.6)return;e.scale(e.scaleVal+=.2)}},189:o=>{if(o.metaKey||o.ctrlKey){if(e.scaleVal<.6)return;e.scale(e.scaleVal-=.2)}},48:o=>{(o.metaKey||o.ctrlKey)&&e.scale(1)},8:t,46:t};e.map.onkeydown=o=>{if(o.preventDefault(),!e.editable||o.target!==o.currentTarget)return;const i=n[o.keyCode];i&&i(o)}}function Oi(e,t){const n=(m,b)=>{const g=document.createElement("div");return g.id=m,g.innerHTML=`<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-${b}"></use>
  </svg>`,g},o=n("cm-add_child","zijiedian"),i=n("cm-add_sibling","tongjijiedian-"),r=n("cm-remove_child","shanchu2"),s=n("cm-up","rising"),a=n("cm-down","falling"),d=n("cm-edit","edit"),p=document.createElement("ul");p.className="menu-list";const u=document.createElement("mmenu");u.className="mobile-menu",u.appendChild(o),u.appendChild(i),u.appendChild(r),u.appendChild(s),u.appendChild(a),u.appendChild(d),u.hidden=!0,e.container.append(u);let f=!0;e.bus.addListener("unselectNode",function(){u.hidden=!0}),e.bus.addListener("selectNode",function(m){u.hidden=!1,m.root?f=!0:f=!1}),u.onclick=m=>{m.target===u&&(u.hidden=!0)},o.onclick=()=>{e.addChild()},i.onclick=()=>{f||e.insertSibling("after")},r.onclick=()=>{f||e.removeNode()},s.onclick=m=>{f||e.moveUpNode()},a.onclick=m=>{f||e.moveDownNode()},d.onclick=m=>{e.beginEdit()}}const St=document,$i=function(e,t){if(!t)return Lt(e),e;let n=e.querySelector(".insert-preview");const o=`insert-preview ${t} show`;return n||(n=St.createElement("div"),e.appendChild(n)),n.className=o,e},Lt=function(e){if(!e)return;const t=e.querySelectorAll(".insert-preview");for(const n of t||[])n.remove()},on=function(e,t){for(const n of t){const o=n.parentElement.parentElement.contains(e);if(!(e&&e.tagName==="ME-TPC"&&e!==n&&!o&&e.nodeObj.root!==!0))return!1}return!0},Pi=function(e){const t=document.createElement("div");return t.className="mind-elixir-ghost",e.map.appendChild(t),t};function Vi(e){let t=null,n=null,o=null;const i=Pi(e),r=12;e.map.addEventListener("dragstart",s=>{var a,d;const p=s.target;if((p==null?void 0:p.tagName)!=="ME-TPC"){s.preventDefault();return}(a=e.currentNodes)!=null&&a.includes(p)||(e.unselectNodes(),e.selectNode(p)),e.currentNodes?(t=e.currentNodes,i.innerHTML=e.currentNodes.length+" nodes"):(t=[p],i.innerHTML=p.innerHTML);for(const u of t)u.parentElement.parentElement.style.opacity="0.5";(d=s.dataTransfer)==null||d.setDragImage(i,0,0),ce.clear()}),e.map.addEventListener("dragend",async s=>{if(!t)return;for(const d of t)d.parentElement.parentElement.style.opacity="1";const a=s.target;a.style.opacity="",o&&(Lt(o),n==="before"?e.moveNodeBefore(t,o):n==="after"?e.moveNodeAfter(t,o):n==="in"&&e.moveNodeIn(t,o),t=null)}),e.map.addEventListener("dragover",fi(function(s){if(!t)return;Lt(o);const a=St.elementFromPoint(s.clientX,s.clientY-r);if(on(a,t)){o=a;const d=a.getBoundingClientRect().y;s.clientY>d+a.clientHeight?n="after":n="in"}else{const d=St.elementFromPoint(s.clientX,s.clientY+r);if(on(d,t)){o=d;const p=d.getBoundingClientRect().y;s.clientY<p?n="before":n="in"}else n=o=null}o&&$i(o,n)},100))}const Hi=function(e){return["createSummary","removeSummary","finishEditSummary"].includes(e.name)?{type:"summary",value:e.obj.id}:["createArrow","removeArrow","finishEditArrowLabel"].includes(e.name)?{type:"arrow",value:e.obj.id}:["removeNodes","copyNodes","moveNodeBefore","moveNodeAfter","moveNodeIn"].includes(e.name)?{type:"nodes",value:e.objs.map(t=>t.id)}:{type:"node",value:e.obj.id}};function Bi(e){let t=[],n=-1,o=e.getData();e.bus.addListener("operation",i=>{if(i.name==="beginEdit")return;t=t.slice(0,n+1);const r=e.getData();t.push({prev:o,currentObject:Hi(i),next:r}),o=r,n=t.length-1}),e.undo=function(){if(n>-1){const i=t[n];o=i.prev,e.refresh(i.prev),i.currentObject.type==="node"?e.selectNode(F(i.currentObject.value)):i.currentObject.type==="nodes"&&e.selectNodes(i.currentObject.value.map(r=>F(r))),n--,console.log("current",o)}},e.redo=function(){if(n<t.length-1){n++;const i=t[n];o=i.next,e.refresh(i.next),i.currentObject.type==="node"?e.selectNode(F(i.currentObject.value)):i.currentObject.type==="nodes"&&e.selectNodes(i.currentObject.value.map(r=>F(r)))}},e.map.addEventListener("keydown",i=>{(i.metaKey||i.ctrlKey)&&i.shiftKey&&i.key==="Z"?e.redo():(i.metaKey||i.ctrlKey)&&i.key==="z"&&e.undo()})}const Te=(e,t)=>{const n=document.createElement("span");return n.id=e,n.innerHTML=`<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-${t}"></use>
  </svg>`,n};function Ri(e){const t=document.createElement("div"),n=Te("fullscreen","full"),o=Te("toCenter","living"),i=Te("zoomout","move"),r=Te("zoomin","add"),s=document.createElement("span");return s.innerText="100%",t.appendChild(n),t.appendChild(o),t.appendChild(i),t.appendChild(r),t.className="mind-elixir-toolbar rb",n.onclick=()=>{e.container.requestFullscreen()},o.onclick=()=>{e.toCenter()},i.onclick=()=>{e.scaleVal<.6||e.scale(e.scaleVal-=.2)},r.onclick=()=>{e.scaleVal>1.6||e.scale(e.scaleVal+=.2)},t}function Yi(e){const t=document.createElement("div"),n=Te("tbltl","left"),o=Te("tbltr","right"),i=Te("tblts","side");return t.appendChild(n),t.appendChild(o),t.appendChild(i),t.className="mind-elixir-toolbar lt",n.onclick=()=>{e.initLeft()},o.onclick=()=>{e.initRight()},i.onclick=()=>{e.initSide()},t}function Fi(e){e.container.append(Ri(e)),e.container.append(Yi(e))}/*! @viselect/vanilla v3.3.1 MIT | https://github.com/Simonwep/selection/tree/master/packages/vanilla */var Wi=Object.defineProperty,qi=(e,t,n)=>t in e?Wi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B=(e,t,n)=>(qi(e,typeof t!="symbol"?t+"":t,n),n);class Ui{constructor(){B(this,"_listeners",new Map),B(this,"on",this.addEventListener),B(this,"off",this.removeEventListener),B(this,"emit",this.dispatchEvent)}addEventListener(t,n){const o=this._listeners.get(t)??new Set;return this._listeners.set(t,o),o.add(n),this}removeEventListener(t,n){var o;return(o=this._listeners.get(t))==null||o.delete(n),this}dispatchEvent(t,...n){let o=!0;for(const i of this._listeners.get(t)??[])o=i(...n)!==!1&&o;return o}unbindAllListeners(){this._listeners.clear()}}const rn=(e,t="px")=>typeof e=="number"?e+t:e;function be({style:e},t,n){if(typeof t=="object")for(const[o,i]of Object.entries(t))i!==void 0&&(e[o]=rn(i));else n!==void 0&&(e[t]=rn(n))}function Cn(e){return(t,n,o,i={})=>{t instanceof HTMLCollection||t instanceof NodeList?t=Array.from(t):Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);for(const r of t)for(const s of n)r[e](s,o,{capture:!1,...i});return[t,n,o,i]}}const $e=Cn("addEventListener"),ye=Cn("removeEventListener"),lt=e=>{var t;const{clientX:n,clientY:o,target:i}=((t=e.touches)==null?void 0:t[0])??e;return{x:n,y:o,target:i}};function sn(e,t,n="touch"){switch(n){case"center":{const o=t.left+t.width/2,i=t.top+t.height/2;return o>=e.left&&o<=e.right&&i>=e.top&&i<=e.bottom}case"cover":return t.left>=e.left&&t.top>=e.top&&t.right<=e.right&&t.bottom<=e.bottom;case"touch":return e.right>=t.left&&e.left<=t.right&&e.bottom>=t.top&&e.top<=t.bottom}}function Pe(e,t=document){const n=Array.isArray(e)?e:[e];let o=[];for(let i=0,r=n.length;i<r;i++){const s=n[i];typeof s=="string"?o=o.concat(Array.from(t.querySelectorAll(s))):s instanceof Element&&o.push(s)}return o}const Ki=()=>matchMedia("(hover: none), (pointer: coarse)").matches,Zi=()=>"safari"in window,Xi=e=>{let t,n=-1,o=!1;return{next(...i){t=i,o||(o=!0,n=requestAnimationFrame(()=>{e(...t),o=!1}))},cancel(){cancelAnimationFrame(n),o=!1}}},{abs:_e,max:ln,min:an,ceil:dn}=Math;class Nn extends Ui{constructor(t){var n,o,i,r,s;super(),B(this,"_options"),B(this,"_selection",{stored:[],selected:[],touched:[],changed:{added:[],removed:[]}}),B(this,"_area"),B(this,"_clippingElement"),B(this,"_targetElement"),B(this,"_targetRect"),B(this,"_selectables",[]),B(this,"_latestElement"),B(this,"_areaRect",new DOMRect),B(this,"_areaLocation",{y1:0,x2:0,y2:0,x1:0}),B(this,"_singleClick",!0),B(this,"_frame"),B(this,"_scrollAvailable",!0),B(this,"_scrollingActive",!1),B(this,"_scrollSpeed",{x:0,y:0}),B(this,"_scrollDelta",{x:0,y:0}),B(this,"disable",this._bindStartEvents.bind(this,!1)),B(this,"enable",this._bindStartEvents),this._options={selectionAreaClass:"selection-area",selectionContainerClass:void 0,selectables:[],document:window.document,startAreas:["html"],boundaries:["html"],container:"body",...t,behaviour:{overlap:"invert",intersect:"touch",...t.behaviour,startThreshold:(n=t.behaviour)!=null&&n.startThreshold?typeof t.behaviour.startThreshold=="number"?t.behaviour.startThreshold:{x:10,y:10,...t.behaviour.startThreshold}:{x:10,y:10},scrolling:{speedDivider:10,manualSpeed:750,...(o=t.behaviour)==null?void 0:o.scrolling,startScrollMargins:{x:0,y:0,...(r=(i=t.behaviour)==null?void 0:i.scrolling)==null?void 0:r.startScrollMargins}}},features:{range:!0,touch:!0,...t.features,singleTap:{allow:!0,intersect:"native",...(s=t.features)==null?void 0:s.singleTap}}};for(const u of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))typeof this[u]=="function"&&(this[u]=this[u].bind(this));const{document:a,selectionAreaClass:d,selectionContainerClass:p}=this._options;this._area=a.createElement("div"),this._clippingElement=a.createElement("div"),this._clippingElement.appendChild(this._area),this._area.classList.add(d),p&&this._clippingElement.classList.add(p),be(this._area,{willChange:"top, left, bottom, right, width, height",top:0,left:0,position:"fixed"}),be(this._clippingElement,{overflow:"hidden",position:"fixed",transform:"translate3d(0, 0, 0)",pointerEvents:"none",zIndex:"1"}),this._frame=Xi(u=>{this._recalculateSelectionAreaRect(),this._updateElementSelection(),this._emitEvent("move",u),this._redrawSelectionArea()}),this.enable()}_bindStartEvents(t=!0){const{document:n,features:o}=this._options,i=t?$e:ye;i(n,"mousedown",this._onTapStart),o.touch&&i(n,"touchstart",this._onTapStart,{passive:!1})}_onTapStart(t,n=!1){const{x:o,y:i,target:r}=lt(t),{_options:s}=this,{document:a}=this._options,d=r.getBoundingClientRect(),p=Pe(s.startAreas,s.document),u=Pe(s.boundaries,s.document);this._targetElement=u.find(b=>sn(b.getBoundingClientRect(),d));const f=t.composedPath();if(!this._targetElement||!p.find(b=>f.includes(b))||!u.find(b=>f.includes(b))||!n&&this._emitEvent("beforestart",t)===!1)return;this._areaLocation={x1:o,y1:i,x2:0,y2:0};const m=a.scrollingElement??a.body;this._scrollDelta={x:m.scrollLeft,y:m.scrollTop},this._singleClick=!0,this.clearSelection(!1,!0),$e(a,["touchmove","mousemove"],this._delayedTapMove,{passive:!1}),$e(a,["mouseup","touchcancel","touchend"],this._onTapStop),$e(a,"scroll",this._onScroll)}_onSingleTap(t){const{singleTap:{intersect:n},range:o}=this._options.features,i=lt(t);let r;if(n==="native")r=i.target;else if(n==="touch"){this.resolveSelectables();const{x:a,y:d}=i;r=this._selectables.find(p=>{const{right:u,left:f,top:m,bottom:b}=p.getBoundingClientRect();return a<u&&a>f&&d<b&&d>m})}if(!r)return;for(this.resolveSelectables();!this._selectables.includes(r);){if(!r.parentElement)return;r=r.parentElement}const{stored:s}=this._selection;if(this._emitEvent("start",t),t.shiftKey&&o&&this._latestElement){const a=this._latestElement,[d,p]=a.compareDocumentPosition(r)&4?[r,a]:[a,r],u=[...this._selectables.filter(f=>f.compareDocumentPosition(d)&4&&f.compareDocumentPosition(p)&2),d,p];this.select(u),this._latestElement=a}else s.includes(r)&&(s.length===1||t.ctrlKey||s.every(a=>this._selection.stored.includes(a)))?this.deselect(r):(this.select(r),this._latestElement=r);this._emitEvent("stop",t)}_delayedTapMove(t){const{container:n,document:o,behaviour:{startThreshold:i}}=this._options,{x1:r,y1:s}=this._areaLocation,{x:a,y:d}=lt(t);if(typeof i=="number"&&_e(a+d-(r+s))>=i||typeof i=="object"&&_e(a-r)>=i.x||_e(d-s)>=i.y){if(ye(o,["mousemove","touchmove"],this._delayedTapMove,{passive:!1}),this._emitEvent("beforedrag",t)===!1){ye(o,["mouseup","touchcancel","touchend"],this._onTapStop);return}$e(o,["mousemove","touchmove"],this._onTapMove,{passive:!1}),be(this._area,"display","block"),Pe(n,o)[0].appendChild(this._clippingElement),this.resolveSelectables(),this._singleClick=!1,this._targetRect=this._targetElement.getBoundingClientRect(),this._scrollAvailable=this._targetElement.scrollHeight!==this._targetElement.clientHeight||this._targetElement.scrollWidth!==this._targetElement.clientWidth,this._scrollAvailable&&($e(o,"wheel",this._manualScroll,{passive:!1}),this._selectables=this._selectables.filter(p=>this._targetElement.contains(p))),this._setupSelectionArea(),this._emitEvent("start",t),this._onTapMove(t)}this._handleMoveEvent(t)}_setupSelectionArea(){const{_clippingElement:t,_targetElement:n,_area:o}=this,i=this._targetRect=n.getBoundingClientRect();this._scrollAvailable?(be(t,{top:i.top,left:i.left,width:i.width,height:i.height}),be(o,{marginTop:-i.top,marginLeft:-i.left})):(be(t,{top:0,left:0,width:"100%",height:"100%"}),be(o,{marginTop:0,marginLeft:0}))}_onTapMove(t){const{x:n,y:o}=lt(t),{_scrollSpeed:i,_areaLocation:r,_options:s,_frame:a}=this,{speedDivider:d}=s.behaviour.scrolling,p=this._targetElement;if(r.x2=n,r.y2=o,this._scrollAvailable&&!this._scrollingActive&&(i.y||i.x)){this._scrollingActive=!0;const u=()=>{if(!i.x&&!i.y){this._scrollingActive=!1;return}const{scrollTop:f,scrollLeft:m}=p;i.y&&(p.scrollTop+=dn(i.y/d),r.y1-=p.scrollTop-f),i.x&&(p.scrollLeft+=dn(i.x/d),r.x1-=p.scrollLeft-m),a.next(t),requestAnimationFrame(u)};requestAnimationFrame(u)}else a.next(t);this._handleMoveEvent(t)}_handleMoveEvent(t){const{features:n}=this._options;(n.touch&&Ki()||this._scrollAvailable&&Zi())&&t.preventDefault()}_onScroll(){const{_scrollDelta:t,_options:{document:n}}=this,{scrollTop:o,scrollLeft:i}=n.scrollingElement??n.body;this._areaLocation.x1+=t.x-i,this._areaLocation.y1+=t.y-o,t.x=i,t.y=o,this._setupSelectionArea(),this._frame.next(null)}_manualScroll(t){const{manualSpeed:n}=this._options.behaviour.scrolling,o=t.deltaY?t.deltaY>0?1:-1:0,i=t.deltaX?t.deltaX>0?1:-1:0;this._scrollSpeed.y+=o*n,this._scrollSpeed.x+=i*n,this._onTapMove(t),t.preventDefault()}_recalculateSelectionAreaRect(){const{_scrollSpeed:t,_areaLocation:n,_areaRect:o,_targetElement:i,_options:r}=this,{scrollTop:s,scrollHeight:a,clientHeight:d,scrollLeft:p,scrollWidth:u,clientWidth:f}=i,m=this._targetRect,{x1:b,y1:g}=n;let{x2:v,y2:h}=n;const{behaviour:{scrolling:{startScrollMargins:y}}}=r;v<m.left+y.x?(t.x=p?-_e(m.left-v+y.x):0,v=v<m.left?m.left:v):v>m.right-y.x?(t.x=u-p-f?_e(m.left+m.width-v-y.x):0,v=v>m.right?m.right:v):t.x=0,h<m.top+y.y?(t.y=s?-_e(m.top-h+y.y):0,h=h<m.top?m.top:h):h>m.bottom-y.y?(t.y=a-s-d?_e(m.top+m.height-h-y.y):0,h=h>m.bottom?m.bottom:h):t.y=0;const _=an(b,v),L=an(g,h),E=ln(b,v),z=ln(g,h);o.x=_,o.y=L,o.width=E-_,o.height=z-L}_redrawSelectionArea(){const{x:t,y:n,width:o,height:i}=this._areaRect,{style:r}=this._area;r.left=`${t}px`,r.top=`${n}px`,r.width=`${o}px`,r.height=`${i}px`}_onTapStop(t,n){var o;const{document:i,features:r}=this._options,{_singleClick:s}=this;ye(i,["mousemove","touchmove"],this._delayedTapMove),ye(i,["touchmove","mousemove"],this._onTapMove),ye(i,["mouseup","touchcancel","touchend"],this._onTapStop),ye(i,"scroll",this._onScroll),this._keepSelection(),t&&s&&r.singleTap.allow?this._onSingleTap(t):!s&&!n&&(this._updateElementSelection(),this._emitEvent("stop",t)),this._scrollSpeed.x=0,this._scrollSpeed.y=0,this._scrollAvailable&&ye(i,"wheel",this._manualScroll,{passive:!0}),this._clippingElement.remove(),(o=this._frame)==null||o.cancel(),be(this._area,"display","none")}_updateElementSelection(){const{_selectables:t,_options:n,_selection:o,_areaRect:i}=this,{stored:r,selected:s,touched:a}=o,{intersect:d,overlap:p}=n.behaviour,u=p==="invert",f=[],m=[],b=[];for(let v=0;v<t.length;v++){const h=t[v];if(sn(i,h.getBoundingClientRect(),d)){if(s.includes(h))r.includes(h)&&!a.includes(h)&&a.push(h);else if(u&&r.includes(h)){b.push(h);continue}else m.push(h);f.push(h)}}u&&m.push(...r.filter(v=>!s.includes(v)));const g=p==="keep";for(let v=0;v<s.length;v++){const h=s[v];!f.includes(h)&&!(g&&r.includes(h))&&b.push(h)}o.selected=f,o.changed={added:m,removed:b},this._latestElement=void 0}_emitEvent(t,n){return this.emit(t,{event:n,store:this._selection,selection:this})}_keepSelection(){const{_options:t,_selection:n}=this,{selected:o,changed:i,touched:r,stored:s}=n,a=o.filter(d=>!s.includes(d));switch(t.behaviour.overlap){case"drop":{n.stored=[...a,...s.filter(d=>!r.includes(d))];break}case"invert":{n.stored=[...a,...s.filter(d=>!i.removed.includes(d))];break}case"keep":{n.stored=[...s,...o.filter(d=>!s.includes(d))];break}}}trigger(t,n=!0){this._onTapStart(t,n)}resolveSelectables(){this._selectables=Pe(this._options.selectables,this._options.document)}clearSelection(t=!0,n=!1){const{selected:o,stored:i,changed:r}=this._selection;r.added=[],r.removed.push(...o,...t?i:[]),n||(this._emitEvent("move",null),this._emitEvent("stop",null)),this._selection={stored:t?[]:i,selected:[],touched:[],changed:{added:[],removed:[]}}}getSelection(){return this._selection.stored}getSelectionArea(){return this._area}cancel(t=!1){this._onTapStop(null,!t)}destroy(){this.cancel(),this.disable(),this._clippingElement.remove(),super.unbindAllListeners()}select(t,n=!1){const{changed:o,selected:i,stored:r}=this._selection,s=Pe(t,this._options.document).filter(a=>!i.includes(a)&&!r.includes(a));return r.push(...s),i.push(...s),o.added.push(...s),o.removed=[],this._latestElement=void 0,n||(this._emitEvent("move",null),this._emitEvent("stop",null)),s}deselect(t,n=!1){const{selected:o,stored:i,changed:r}=this._selection,s=Pe(t,this._options.document).filter(a=>o.includes(a)||i.includes(a));s.length&&(this._selection.stored=i.filter(a=>!s.includes(a)),this._selection.selected=o.filter(a=>!s.includes(a)),this._selection.changed.added=[],this._selection.changed.removed.push(...s.filter(a=>!r.removed.includes(a))),this._latestElement=void 0,n||(this._emitEvent("move",null),this._emitEvent("stop",null)))}}B(Nn,"version","3.3.1");function Gi(e){const t=new Nn({selectables:[".map-container me-tpc"],boundaries:[e.container],container:"body",behaviour:{scrolling:{speedDivider:10,manualSpeed:750,startScrollMargins:{x:10,y:10}}}}).on("beforestart",({event:n})=>{if(n.button!==e.mouseSelectionButton||n.target.tagName==="ME-TPC"||n.target.id==="input-box"||n.target.className==="circle")return!1;const o=t.getSelectionArea();return o.style.background="#4f90f22d",o.style.border="1px solid #4f90f2",o.parentElement&&(o.parentElement.style.zIndex="9999"),!0}).on("start",({event:n})=>{!n.ctrlKey&&!n.metaKey&&(e.clearSelection(),t.clearSelection(!0,!0))}).on("move",({store:{changed:{added:n,removed:o}}})=>{ce.moved=!0;for(const i of n)i.classList.add("selected");for(const i of o)i.classList.remove("selected")}).on("stop",({store:{stored:n}})=>{e.selectNodes(n)});e.selection=t}const Ji=function(e,t=!0){this.theme=e;const n=this.theme.cssVar,o=Object.keys(n);for(let i=0;i<o.length;i++){const r=o[i];this.mindElixirBox.style.setProperty(r,n[r])}t&&this.refresh()};function En(e){return{nodeData:e.isFocusMode?e.nodeDataBackup:e.nodeData,arrows:e.arrows,summaries:e.summaries,direction:e.direction,theme:e.theme}}const Qi=function(e,t,n){if(e){if(console.time("selectNode"),this.clearSelection(),typeof e=="string"){const o=F(e);return o?this.selectNode(o):void 0}e.className="selected",e.scrollIntoView({block:"nearest",inline:"nearest"}),this.currentNode=e,t?this.bus.fire("selectNewNode",e.nodeObj):this.bus.fire("selectNode",e.nodeObj,n),console.timeEnd("selectNode")}},er=function(){this.currentNode&&(this.currentNode.className=""),this.currentNode=null,this.bus.fire("unselectNode")},tr=function(e){console.time("selectNodes"),this.clearSelection();for(const t of e)t.className="selected";this.currentNodes=e,this.bus.fire("selectNodes",e.map(t=>t.nodeObj)),console.timeEnd("selectNodes")},nr=function(){if(this.currentNodes)for(const e of this.currentNodes)e.classList.remove("selected");this.currentNodes=null,this.bus.fire("unselectNodes")},or=function(){this.unselectNode(),this.unselectNodes(),this.unselectSummary(),this.unselectArrow()},ir=function(){const e=En(this);return JSON.stringify(e,(t,n)=>{if(!(t==="parent"&&typeof n!="string"))return n})},rr=function(){return JSON.parse(this.getDataString())},sr=function(){const e=En(this).nodeData;let t="# "+e.topic+`

`;function n(o,i){for(let r=0;r<o.length;r++)i<=6?t+="".padStart(i,"#")+" "+o[r].topic+`

`:t+="".padStart(i-7,"	")+"- "+o[r].topic+`
`,o[r].children&&n(o[r].children||[],i+1)}return n(e.children||[],2),t},lr=function(){this.editable=!0},ar=function(){this.editable=!1},dr=function(e){this.scaleVal=e,this.map.style.transform="scale("+e+")"},cr=function(){this.container.scrollTo(1e4-this.container.offsetWidth/2,1e4-this.container.offsetHeight/2)},ur=function(e){e(this)},pr=function(e){e.nodeObj.root||(this.tempDirection===null&&(this.tempDirection=this.direction),this.isFocusMode||(this.nodeDataBackup=this.nodeData,this.isFocusMode=!0),this.nodeData=e.nodeObj,this.nodeData.root=!0,this.initRight(),this.toCenter())},mr=function(){this.isFocusMode=!1,this.tempDirection!==null&&(delete this.nodeData.root,this.nodeData=this.nodeDataBackup,this.direction=this.tempDirection,this.tempDirection=null,this.refresh(),this.toCenter())},hr=function(){this.direction=0,this.refresh()},fr=function(){this.direction=1,this.refresh()},vr=function(){this.direction=2,this.refresh()},gr=function(e){this.locale=e,this.refresh()},br=function(e,t){const n=e.nodeObj;typeof t=="boolean"?n.expanded=t:n.expanded!==!1?n.expanded=!1:n.expanded=!0,this.layout(),this.linkDiv(),this.bus.fire("expandNode",n)},yr=function(e){e&&(e=JSON.parse(JSON.stringify(e)),this.nodeData=e.nodeData,this.arrows=e.arrows||[],this.summaries=e.summaries||[]),we(this.nodeData),this.layout(),this.linkDiv()},xr=Object.freeze(Object.defineProperty({__proto__:null,cancelFocus:mr,clearSelection:or,disableEdit:ar,enableEdit:lr,expandNode:br,focusNode:pr,getData:rr,getDataMd:sr,getDataString:ir,initLeft:hr,initRight:fr,initSide:vr,install:ur,refresh:yr,scale:dr,selectNode:Qi,selectNodes:tr,setLocale:gr,toCenter:cr,unselectNode:er,unselectNodes:nr},Symbol.toStringTag,{value:"Module"})),We=e=>{var t;const n=(t=e.parent)==null?void 0:t.children,o=n.indexOf(e);return{siblings:n,index:o}};function wr(e){const{siblings:t,index:n}=We(e),o=t[n];n===0?(t[n]=t[t.length-1],t[t.length-1]=o):(t[n]=t[n-1],t[n-1]=o)}function Mr(e){const{siblings:t,index:n}=We(e),o=t[n];n===t.length-1?(t[n]=t[0],t[0]=o):(t[n]=t[n+1],t[n+1]=o)}function Dt(e){const{siblings:t,index:n}=We(e);return t.splice(n,1),t.length}function Cr(e,t,n){const{siblings:o,index:i}=We(n);t==="before"?o.splice(i,0,e):o.splice(i+1,0,e)}function Nr(e,t){const{siblings:n,index:o}=We(e);n[o]=t,t.children=[e]}function kn(e,t,n){if(Dt(t),e==="in")n.children?n.children.push(t):n.children=[t];else{t.direction!==void 0&&(t.direction=n.direction);const{siblings:o,index:i}=We(n);e==="before"?o.splice(i,0,t):o.splice(i+1,0,t)}}const Er=function(e,t){var n,o;if(e===ue)return ue;if(e===Le)return Le;if(e===ft){const i=((n=document.querySelector(".lhs"))==null?void 0:n.childElementCount)||0,r=((o=document.querySelector(".rhs"))==null?void 0:o.childElementCount)||0;return i<=r?(t.direction=ue,ue):(t.direction=Le,Le)}},_n=function(e,t,n){var o,i;const r=n.children[0].children[0],s=t.parentElement;if(s.tagName==="ME-PARENT"){if(gt(r),s.children[1])s.nextSibling.appendChild(n);else{const a=e.createChildren([n]);s.appendChild(At(!0)),s.insertAdjacentElement("afterend",a)}e.linkDiv(n.offsetParent)}else s.tagName==="ME-ROOT"&&(Er(e.direction,r.nodeObj)===ue?(o=document.querySelector(".lhs"))==null||o.appendChild(n):(i=document.querySelector(".rhs"))==null||i.appendChild(n),e.linkDiv())},It=function(e,t,n){if(!t)return null;const o=t.nodeObj;o.expanded===!1&&(e.expandNode(t,!0),t=F(o.id));const i=n||e.generateNewObj();o.children?o.children.push(i):o.children=[i],we(e.nodeData);const{grp:r,top:s}=e.createWrapper(i);return _n(e,t,r),{newTop:s,newNodeObj:i}},Sn=function(e,t){const n=e.parentNode;if(t===0){const o=n.parentNode.parentNode;o.tagName!=="ME-MAIN"&&o.previousSibling.children[1].remove()}n.parentNode.remove()},Ln={before:"beforebegin",after:"afterend"},gt=function(e){const t=e.parentElement.parentElement.lastElementChild;(t==null?void 0:t.tagName)==="svg"&&(t==null||t.remove())},kr=function(e,t){const n=e.nodeObj,o=zt(n);o.style&&t.style&&(t.style=Object.assign(o.style,t.style));const i=Object.assign(n,t);jt(e,i),this.linkDiv(),this.bus.fire("operation",{name:"reshapeNode",obj:i,origin:o})},_r=function(e,t,n){var o,i,r;const s=t||this.currentNode;if(!s)return;const a=s.nodeObj;if(a.root===!0){this.addChild();return}else if(((o=a.parent)==null?void 0:o.root)===!0&&((r=(i=a.parent)==null?void 0:i.children)==null?void 0:r.length)===1){this.addChild(F(a.parent.id));return}const d=n||this.generateNewObj();Cr(d,e,a),we(this.nodeData);const p=s.parentElement;console.time("insertSibling_DOM");const{grp:u,top:f}=this.createWrapper(d);p.parentElement.insertAdjacentElement(Ln[e],u),this.linkDiv(u.offsetParent),n||this.editTopic(f.firstChild),this.selectNode(f.firstChild,!0),console.timeEnd("insertSibling_DOM"),this.bus.fire("operation",{name:"insertSibling",type:e,obj:d})},Sr=function(e,t){const n=e||this.currentNode;if(!n)return;gt(n);const o=n.nodeObj;if(o.root===!0)return;const i=t||this.generateNewObj();Nr(o,i),we(this.nodeData);const r=n.parentElement.parentElement;console.time("insertParent_DOM");const{grp:s,top:a}=this.createWrapper(i,!0);a.appendChild(At(!0)),r.insertAdjacentElement("afterend",s);const d=this.createChildren([r]);a.insertAdjacentElement("afterend",d),this.linkDiv(),t||this.editTopic(a.firstChild),this.selectNode(a.firstChild,!0),console.timeEnd("insertParent_DOM"),this.bus.fire("operation",{name:"insertParent",obj:i})},Lr=function(e,t){console.time("addChild");const n=e||this.currentNode;if(!n)return;const o=It(this,n,t);if(!o)return;const{newTop:i,newNodeObj:r}=o;this.bus.fire("operation",{name:"addChild",obj:r}),console.timeEnd("addChild"),t||this.editTopic(i.firstChild),this.selectNode(i.firstChild,!0)},Tr=function(e,t){console.time("copyNode");const n=zt(e.nodeObj);Tt(n);const o=It(this,t,n);if(!o)return;const{newNodeObj:i}=o;console.timeEnd("copyNode"),this.selectNode(F(i.id)),this.bus.fire("operation",{name:"copyNode",obj:i})},zr=function(e,t){e=vt(e);const n=[];for(let o=0;o<e.length;o++){const i=e[o],r=zt(i.nodeObj);Tt(r);const s=It(this,t,r);if(!s)return;const{newNodeObj:a}=s;n.push(a)}this.selectNodes(n.map(o=>F(o.id))),this.bus.fire("operation",{name:"copyNodes",objs:n})},jr=function(e){const t=e||this.currentNode;if(!t)return;const n=t.nodeObj;wr(n);const o=t.parentNode.parentNode;o.parentNode.insertBefore(o,o.previousSibling),this.linkDiv(),this.bus.fire("operation",{name:"moveUpNode",obj:n})},Ar=function(e){const t=e||this.currentNode;if(!t)return;const n=t.nodeObj;Mr(n);const o=t.parentNode.parentNode;o.nextSibling?o.nextSibling.insertAdjacentElement("afterend",o):o.parentNode.prepend(o),this.linkDiv(),this.bus.fire("operation",{name:"moveDownNode",obj:n})},Dr=function(e){var t;const n=e||this.currentNode;if(!n)return;const o=n.nodeObj;if(o.root===!0)throw new Error("Can not remove root node");const i=o.parent.children,r=i.findIndex(a=>a===o),s=Dt(o);if(Sn(n,s),i.length!==0){const a=i[r]||i[r-1];this.selectNode(F(a.id))}else this.selectNode(F(o.parent.id));this.linkDiv(),this.bus.fire("operation",{name:"removeNode",obj:o,originIndex:r,originParentId:(t=o==null?void 0:o.parent)==null?void 0:t.id})},Ir=function(e){e=vt(e);for(const t of e){const n=t.nodeObj;if(n.root===!0)continue;const o=Dt(n);Sn(t,o)}this.linkDiv(),this.bus.fire("operation",{name:"removeNodes",objs:e.map(t=>t.nodeObj)})},Or=function(e,t){e=vt(e);const n=t.nodeObj;n.expanded===!1&&(this.expandNode(t,!0),t=F(n.id)),console.time("moveNodeIn");for(const o of e){const i=o.nodeObj;kn("in",i,n),we(this.nodeData);const r=o.parentElement;_n(this,t,r.parentElement)}this.linkDiv(),this.bus.fire("operation",{name:"moveNodeIn",objs:e.map(o=>o.nodeObj),toObj:n}),console.timeEnd("moveNodeIn")},Tn=(e,t,n,o)=>{e=vt(e),t==="after"&&(e=e.reverse());const i=n.nodeObj;for(const r of e){const s=r.nodeObj;kn(t,s,i),we(o.nodeData),gt(r);const a=r.parentElement.parentNode;n.parentElement.parentNode.insertAdjacentElement(Ln[t],a)}o.linkDiv(),o.bus.fire("operation",{name:t==="before"?"moveNodeBefore":"moveNodeAfter",objs:e.map(r=>r.nodeObj),toObj:i})},$r=function(e,t){Tn(e,"before",t,this)},Pr=function(e,t){Tn(e,"after",t,this)},Vr=function(e){const t=e||this.currentNode;t&&(t.nodeObj.dangerouslySetInnerHTML||this.editTopic(t))},Hr=function(e,t){e.text.textContent=t,e.nodeObj.topic=t,this.linkDiv()},zn=Object.freeze(Object.defineProperty({__proto__:null,addChild:Lr,beginEdit:Vr,copyNode:Tr,copyNodes:zr,insertParent:Sr,insertSibling:_r,mainToSub:gt,moveDownNode:Ar,moveNodeAfter:Pr,moveNodeBefore:$r,moveNodeIn:Or,moveUpNode:jr,removeNode:Dr,removeNodes:Ir,reshapeNode:kr,setNodeTopic:Hr},Symbol.toStringTag,{value:"Module"})),Br=function(e){return{dom:e,moved:!1,mousedown:!1,handleMouseMove(t){this.mousedown&&(this.moved=!0,this.cb&&this.cb(t.movementX,t.movementY))},handleMouseDown(t){t.button===0&&(this.mousedown=!0)},handleClear(t){this.mousedown=!1},cb:null,init(t,n){this.cb=n,this.handleClear=this.handleClear.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),t.addEventListener("mousemove",this.handleMouseMove),t.addEventListener("mouseleave",this.handleClear),t.addEventListener("mouseup",this.handleClear),this.dom.addEventListener("mousedown",this.handleMouseDown)},destory(t){t.removeEventListener("mousemove",this.handleMouseMove),t.removeEventListener("mouseleave",this.handleClear),t.removeEventListener("mouseup",this.handleClear),this.dom.removeEventListener("mousedown",this.handleMouseDown)},clear(){this.moved=!1,this.mousedown=!1}}},cn={create:Br};function ht(e,t,n){const{offsetLeft:o,offsetTop:i}=Me(e.nodes,t),r=t.offsetWidth,s=t.offsetHeight,a=o+r/2,d=i+s/2,p=a+n.x,u=d+n.y;return{w:r,h:s,cx:a,cy:d,ctrlX:p,ctrlY:u}}function Re(e){let t,n;const o=(e.cy-e.ctrlY)/(e.ctrlX-e.cx);return o>e.h/e.w||o<-e.h/e.w?e.cy-e.ctrlY<0?(t=e.cx-e.h/2/o,n=e.cy+e.h/2):(t=e.cx+e.h/2/o,n=e.cy-e.h/2):e.cx-e.ctrlX<0?(t=e.cx+e.w/2,n=e.cy-e.w*o/2):(t=e.cx-e.w/2,n=e.cy+e.w*o/2),{x:t,y:n}}const Rr=function(e,t,n,o){const i=document.createElementNS("http://www.w3.org/2000/svg","text");return R(i,{"text-anchor":"middle",x:t+"",y:n+"",fill:o||"#666"}),i.dataset.type="custom-link",i.innerHTML=e,i},jn=function(e,t,n,o,i){if(!t||!n)return;const r=performance.now(),s=ht(e,t,o.delta1),a=ht(e,n,o.delta2),{x:d,y:p}=Re(s),{ctrlX:u,ctrlY:f}=s,{ctrlX:m,ctrlY:b}=a,{x:g,y:v}=Re(a),h=bn(m,b,g,v),y=_i(`M ${d} ${p} C ${u} ${f} ${m} ${b} ${g} ${v}`,`M ${h.x1} ${h.y1} L ${g} ${v} L ${h.x2} ${h.y2}`),_=d/8+u*3/8+m*3/8+g/8,L=p/8+f*3/8+b*3/8+v/8,E=Rr(o.label,_,L,e.theme.cssVar["--color"]);y.appendChild(E),y.arrowObj=o,y.dataset.linkid=o.id,e.linkSvgGroup.appendChild(y),i||(e.arrows.push(o),e.currentArrow=y,Dn(e,o,s,a));const z=performance.now();console.log(`DrawArrow Execution time: ${z-r} ms`)},Yr=function(e,t){const n={id:et(),label:"Custom Link",from:e.nodeObj.id,to:t.nodeObj.id,delta1:{x:0,y:-200},delta2:{x:0,y:-200}};jn(this,e,t,n),this.bus.fire("operation",{name:"createArrow",obj:n})},Fr=function(e){let t;if(e?t=e:t=this.currentArrow,!t)return;An(this);const n=t.arrowObj.id;this.arrows=this.arrows.filter(o=>o.id!==n),t.remove(),this.bus.fire("operation",{name:"removeArrow",obj:{id:n}})},Wr=function(e){this.currentArrow=e;const t=e.arrowObj,n=F(t.from),o=F(t.to),i=ht(this,n,t.delta1),r=ht(this,o,t.delta2);Dn(this,t,i,r)},qr=function(){this.currentArrow=null,An(this)},An=function(e){e.linkController.style.display="none",e.P2.style.display="none",e.P3.style.display="none"},Dn=function(e,t,n,o){var i;e.linkController.style.display="initial",e.P2.style.display="initial",e.P3.style.display="initial",e.nodes.appendChild(e.linkController),e.nodes.appendChild(e.P2),e.nodes.appendChild(e.P3);let{x:r,y:s}=Re(n),{ctrlX:a,ctrlY:d}=n,{ctrlX:p,ctrlY:u}=o,{x:f,y:m}=Re(o);e.P2.style.cssText=`top:${d}px;left:${a}px;`,e.P3.style.cssText=`top:${u}px;left:${p}px;`,R(e.line1,{x1:r+"",y1:s+"",x2:a+"",y2:d+""}),R(e.line2,{x1:p+"",y1:u+"",x2:f+"",y2:m+""}),e.helper1&&(e.helper1.destory(e.map),(i=e.helper2)==null||i.destory(e.map)),e.helper1=cn.create(e.P2),e.helper2=cn.create(e.P3),e.helper1.init(e.map,(b,g)=>{var v;a=a+b/e.scaleVal,d=d+g/e.scaleVal;const h=Re({...n,ctrlX:a,ctrlY:d});r=h.x,s=h.y;const y=r/8+a*3/8+p*3/8+f/8,_=s/8+d*3/8+u*3/8+m/8;e.P2.style.top=d+"px",e.P2.style.left=a+"px",(v=e.currentArrow)==null||v.children[0].setAttribute("d",`M ${r} ${s} C ${a} ${d} ${p} ${u} ${f} ${m}`),R(e.currentArrow.children[2],{x:y+"",y:_+""}),R(e.line1,{x1:r+"",y1:s+"",x2:a+"",y2:d+""}),t.delta1.x=a-n.cx,t.delta1.y=d-n.cy}),e.helper2.init(e.map,(b,g)=>{var v,h;p=p+b/e.scaleVal,u=u+g/e.scaleVal;const y=Re({...o,ctrlX:p,ctrlY:u});f=y.x,m=y.y;const _=r/8+a*3/8+p*3/8+f/8,L=s/8+d*3/8+u*3/8+m/8,E=bn(p,u,f,m);e.P3.style.top=u+"px",e.P3.style.left=p+"px",(v=e.currentArrow)==null||v.children[0].setAttribute("d",`M ${r} ${s} C ${a} ${d} ${p} ${u} ${f} ${m}`),(h=e.currentArrow)==null||h.children[1].setAttribute("d",`M ${E.x1} ${E.y1} L ${f} ${m} L ${E.x2} ${E.y2}`),R(e.currentArrow.children[2],{x:_+"",y:L+""}),R(e.line2,{x1:p+"",y1:u+"",x2:f+"",y2:m+""}),t.delta2.x=p-o.cx,t.delta2.y=u-o.cy})};function Ur(){this.linkSvgGroup.innerHTML="";for(let e=0;e<this.arrows.length;e++){const t=this.arrows[e];try{jn(this,F(t.from),F(t.to),t,!0)}catch{console.warn("Node may not be expanded")}}this.nodes.appendChild(this.linkSvgGroup)}function Kr(e){if(console.time("editSummary"),!e)return;const t=e.children[2];console.log(t,e),wn(this,t,n=>{var o;const i=e.arrowObj,r=((o=n.textContent)==null?void 0:o.trim())||"";r===""?i.label=origin:i.label=r,n.remove(),r!==origin&&(t.innerHTML=i.label,this.linkDiv(),this.bus.fire("operation",{name:"finishEditArrowLabel",obj:i}))}),console.timeEnd("editSummary")}function Zr(){this.arrows=this.arrows.filter(e=>pt(e.from,this.nodeData)&&pt(e.to,this.nodeData))}const Xr=Object.freeze(Object.defineProperty({__proto__:null,createArrow:Yr,editArrowLabel:Kr,removeArrow:Fr,renderArrow:Ur,selectArrow:Wr,tidyArrow:Zr,unselectArrow:qr},Symbol.toStringTag,{value:"Module"})),Gr=function(e){var t,n;if(e.length===0)throw new Error("No selected node.");if(e.length===1){const u=e[0].nodeObj,f=e[0].nodeObj.parent;if(!f)throw new Error("Can not select root node.");const m=f.children.findIndex(b=>u===b);return{parent:f.id,start:m,end:m}}let o=0;const i=e.map(u=>{let f=u.nodeObj;const m=[];for(;f.parent;){const b=f.parent,g=b.children,v=g==null?void 0:g.indexOf(f);f=b,m.unshift({node:f,index:v})}return m.length>o&&(o=m.length),m});let r=0;e:for(;r<o;r++){const u=(t=i[0][r])==null?void 0:t.node;for(let f=1;f<i.length;f++)if(((n=i[f][r])==null?void 0:n.node)!==u)break e}if(!r)throw new Error("Can not select root node.");const s=i.map(u=>u[r-1].index).sort(),a=s[0]||0,d=s[s.length-1]||0,p=i[0][r-1].node;if(p.root)throw new Error("Please select nodes in the same main topic.");return{parent:p.id,start:a,end:d}},Jr=function(e){const t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.setAttribute("id",e),t},un=function(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","path");return R(n,{d:e,stroke:t||"#666",fill:"none","stroke-linecap":"round","stroke-width":"2"}),n},pn=function(e,t,n,o,i){const r=document.createElementNS("http://www.w3.org/2000/svg","text");return R(r,{"text-anchor":o,x:t+"",y:n+"",fill:i||"#666"}),r.innerHTML=e,r},Qr=e=>F(e).parentElement.parentElement,es=function({parent:e,start:t}){var n,o;const i=F(e),r=i.nodeObj;let s;return r.root===!0?s=(n=F(r.children[t].id).closest("me-main"))==null?void 0:n.className:s=(o=i.closest("me-main"))==null?void 0:o.className,s},In=function(e,t){var n;const{id:o,text:i,parent:r,start:s,end:a}=t,d=e.nodes,p=F(r).nodeObj,u=es(t);let f=1/0,m=0,b=0,g=0;for(let Y=s;Y<=a;Y++){const G=(n=p.children)==null?void 0:n[Y];if(!G)return console.warn("Child not found"),e.removeSummary(o),null;const J=Qr(G.id),{offsetLeft:te,offsetTop:ze}=Me(d,J);Y===s&&(b=ze),Y===a&&(g=ze+J.offsetHeight),te<f&&(f=te),J.offsetWidth+te>m&&(m=J.offsetWidth+te)}let v,h;const y=b+10,_=g+10,L=(y+_)/2,E=e.theme.cssVar["--color"];u==="lhs"?(v=un(`M ${f+10} ${y} c -5 0 -10 5 -10 10 L ${f} ${_-10} c 0 5 5 10 10 10 M ${f} ${L} h -10`,E),h=pn(i,f-20,L+6,"end",E)):(v=un(`M ${m-10} ${y} c 5 0 10 5 10 10 L ${m} ${_-10} c 0 5 -5 10 -10 10 M ${m} ${L} h 10`,E),h=pn(i,m+20,L+6,"start",E));const z=Jr("s-"+o);return z.appendChild(v),z.appendChild(h),z.summaryObj=t,e.summarySvg.appendChild(z),z},ts=function(){let e=[];this.currentNode?e=[this.currentNode]:this.currentNodes&&(e=this.currentNodes);const{parent:t,start:n,end:o}=Gr(e),i={id:et(),parent:t,start:n,end:o,text:"summary"},r=In(this,i);this.summaries.push(i),this.editSummary(r),this.bus.fire("operation",{name:"createSummary",obj:i})},ns=function(e){var t;const n=this.summaries.findIndex(o=>o.id===e);n>-1&&(this.summaries.splice(n,1),(t=document.querySelector("#s-"+e))==null||t.remove()),this.bus.fire("operation",{name:"removeSummary",obj:{id:e}})},os=function(e){const t=e.children[1].getBBox(),n=6,o=3,i=document.createElementNS("http://www.w3.org/2000/svg","rect");R(i,{x:t.x-n+"",y:t.y-n+"",width:t.width+n*2+"",height:t.height+n*2+"",rx:o+"",stroke:this.theme.cssVar["--selected"]||"#4dc4ff","stroke-width":"2",fill:"none"}),i.classList.add("selected"),e.appendChild(i),this.currentSummary=e},is=function(){var e,t;(t=(e=this.currentSummary)==null?void 0:e.querySelector("rect"))==null||t.remove(),this.currentSummary=null},rs=function(){this.summarySvg.innerHTML="",this.summaries.forEach(e=>{try{In(this,e)}catch{console.warn("Node may not be expanded")}}),this.nodes.insertAdjacentElement("beforeend",this.summarySvg)},ss=function(e){if(console.time("editSummary"),!e)return;const t=e.childNodes[1];wn(this,t,n=>{var o;const i=e.summaryObj,r=((o=n.textContent)==null?void 0:o.trim())||"";r===""?i.text=origin:i.text=r,n.remove(),r!==origin&&(t.innerHTML=i.text,this.linkDiv(),this.bus.fire("operation",{name:"finishEditSummary",obj:i}))}),console.timeEnd("editSummary")},ls=Object.freeze(Object.defineProperty({__proto__:null,createSummary:ts,editSummary:ss,removeSummary:ns,renderSummary:rs,selectSummary:os,unselectSummary:is},Symbol.toStringTag,{value:"Module"})),re="http://www.w3.org/2000/svg";function as(e,t){const n=document.createElementNS(re,"svg");return R(n,{version:"1.1",xmlns:re,height:e,width:t}),n}function ds(e,t){return(parseInt(e)-parseInt(t))/2}function cs(e,t,n,o){const i=document.createElementNS(re,"g");let r="";return e.text?r=e.text.textContent:r=e.childNodes[0].textContent,r.split(`
`).forEach((s,a)=>{const d=document.createElementNS(re,"text");R(d,{x:n+parseInt(t.paddingLeft)+"",y:o+parseInt(t.paddingTop)+ds(t.lineHeight,t.fontSize)*(a+1)+parseFloat(t.fontSize)*(a+1)+"","text-anchor":"start","font-family":t.fontFamily,"font-size":`${t.fontSize}`,"font-weight":`${t.fontWeight}`,fill:`${t.color}`}),d.innerHTML=s,i.appendChild(d)}),i}function us(e,t,n,o){var i;let r="";(i=e.nodeObj)!=null&&i.dangerouslySetInnerHTML?r=e.nodeObj.dangerouslySetInnerHTML:e.text?r=e.text.textContent:r=e.childNodes[0].textContent;const s=document.createElementNS(re,"foreignObject");R(s,{x:n+parseInt(t.paddingLeft)+"",y:o+parseInt(t.paddingTop)+"",width:t.width,height:t.height});const a=document.createElement("div");return R(a,{xmlns:"http://www.w3.org/1999/xhtml",style:`font-family: ${t.fontFamily}; font-size: ${t.fontSize}; font-weight: ${t.fontWeight}; color: ${t.color}; white-space: pre-wrap;`}),a.innerHTML=r,s.appendChild(a),s}function ps(e,t){const n=getComputedStyle(t),{offsetLeft:o,offsetTop:i}=Me(e.nodes,t),r=document.createElementNS(re,"rect");return R(r,{x:o+"",y:i+"",rx:n.borderRadius,ry:n.borderRadius,width:n.width,height:n.height,fill:n.backgroundColor,stroke:n.borderColor,"stroke-width":n.borderWidth}),r}function at(e,t,n=!1){const o=getComputedStyle(t),{offsetLeft:i,offsetTop:r}=Me(e.nodes,t),s=document.createElementNS(re,"rect");R(s,{x:i+"",y:r+"",rx:o.borderRadius,ry:o.borderRadius,width:o.width,height:o.height,fill:o.backgroundColor,stroke:o.borderColor,"stroke-width":o.borderWidth});const a=document.createElementNS(re,"g");a.appendChild(s);let d;return n?d=us(t,o,i,r):d=cs(t,o,i,r),a.appendChild(d),a}function ms(e,t){const n=getComputedStyle(t),{offsetLeft:o,offsetTop:i}=Me(e.nodes,t),r=document.createElementNS(re,"a"),s=document.createElementNS(re,"text");return R(s,{x:o+"",y:i+parseInt(n.fontSize)+"","text-anchor":"start","font-family":n.fontFamily,"font-size":`${n.fontSize}`,"font-weight":`${n.fontWeight}`,fill:`${n.color}`}),s.innerHTML=t.textContent,r.appendChild(s),r.setAttribute("href",t.href),r}function hs(e,t){const n=getComputedStyle(t),{offsetLeft:o,offsetTop:i}=Me(e.nodes,t),r=document.createElementNS(re,"image");return R(r,{x:o+"",y:i+"",width:n.width+"",height:n.height+"",href:t.src}),r}const dt=100,fs='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',vs=(e,t=!1)=>{var n,o,i;const r=e.nodes,s=r.offsetHeight+dt*2,a=r.offsetWidth+dt*2,d=as(s+"px",a+"px"),p=document.createElementNS(re,"svg"),u=document.createElementNS(re,"rect");R(u,{x:"0",y:"0",width:`${a}`,height:`${s}`,fill:e.theme.cssVar["--bgcolor"]}),d.appendChild(u),r.querySelectorAll(".subLines").forEach(g=>{const v=g.cloneNode(!0),{offsetLeft:h,offsetTop:y}=Me(r,g.parentElement);v.setAttribute("x",`${h}`),v.setAttribute("y",`${y}`),p.appendChild(v)});const f=(n=r.querySelector(".lines"))==null?void 0:n.cloneNode(!0);f&&p.appendChild(f);const m=(o=r.querySelector(".topiclinks"))==null?void 0:o.cloneNode(!0);m&&p.appendChild(m);const b=(i=r.querySelector(".summary"))==null?void 0:i.cloneNode(!0);return b&&p.appendChild(b),r.querySelectorAll("me-tpc").forEach(g=>{g.nodeObj.dangerouslySetInnerHTML?p.appendChild(at(e,g,!t)):(p.appendChild(ps(e,g)),p.appendChild(at(e,g.text,!t)))}),r.querySelectorAll(".tags > span").forEach(g=>{p.appendChild(at(e,g))}),r.querySelectorAll(".icons > span").forEach(g=>{p.appendChild(at(e,g))}),r.querySelectorAll(".hyper-link").forEach(g=>{p.appendChild(ms(e,g))}),r.querySelectorAll("img").forEach(g=>{p.appendChild(hs(e,g))}),R(p,{x:dt+"",y:dt+"",overflow:"visible"}),d.appendChild(p),d},gs=(e,t)=>(t&&e.insertAdjacentHTML("afterbegin","<style>"+t+"</style>"),fs+e.outerHTML);function bs(e){return new Promise((t,n)=>{const o=new FileReader;o.onload=i=>{t(i.target.result)},o.onerror=i=>{n(i)},o.readAsDataURL(e)})}const ys=function(e=!1,t){const n=vs(this,e),o=gs(n,t);return new Blob([o],{type:"image/svg+xml"})},xs=async function(e=!1,t){const n=this.exportSvg(e,t),o=await bs(n);return new Promise((i,r)=>{const s=new Image;s.setAttribute("crossOrigin","anonymous"),s.onload=()=>{const a=document.createElement("canvas");a.width=s.width,a.height=s.height,a.getContext("2d").drawImage(s,0,0),a.toBlob(i,"image/png",1)},s.src=o,s.onerror=r})},ws=Object.freeze(Object.defineProperty({__proto__:null,exportPng:xs,exportSvg:ys},Symbol.toStringTag,{value:"Module"}));function Ms(e,t){return async function(...n){const o=this.before[t];o&&!await o.apply(this,n)||e.apply(this,n)}}const mn=Object.keys(zn),On={};for(let e=0;e<mn.length;e++){const t=mn[e];On[t]=Ms(zn[t],t)}const Cs={getObjById:pt,generateNewObj:vi,layout:yi,linkDiv:Si,editTopic:ki,createWrapper:Mi,createParent:Ci,createChildren:Ni,createTopic:Ei,findEle:F,changeTheme:Ji,...xr,...On,...Xr,...ls,...ws,init(e){if(!e||!e.nodeData)return new Error("MindElixir: `data` is required");e.direction!==void 0&&(this.direction=e.direction),this.changeTheme(e.theme||this.theme,!1),this.nodeData=e.nodeData,we(this.nodeData),this.arrows=e.arrows||[],this.summaries=e.summaries||[],this.tidyArrow(),this.toolBar&&Fi(this),this.keypress&&Ii(this),this.editable&&Gi(this),hi()&&this.mobileMenu?Oi(this):this.contextMenu&&Li(this,this.contextMenuOption),this.draggable&&Vi(this),this.allowUndo&&Bi(this),this.toCenter(),this.layout(),this.linkDiv()}};function Ns({pT:e,pL:t,pW:n,pH:o,cT:i,cL:r,cW:s,cH:a,direction:d,containerHeight:p}){let u=t+n/2;const f=e+o/2;let m;d==="lhs"?m=r+s:m=r;const b=i+a/2,g=(1-Math.abs(b-f)/p)*.25*(n/2);return d==="lhs"?u=u-n/10-g:u=u+n/10+g,`M ${u} ${f} Q ${u} ${b} ${m} ${b}`}function Es({pT:e,pL:t,pW:n,pH:o,cT:i,cL:r,cW:s,cH:a,direction:d,isFirst:p}){let u=0,f=0;p?u=e+o/2:u=e+o;const m=i+a;let b=0,g=0,v=0;const h=Math.abs(u-m)/300*xe;return d==="lhs"?(v=t,b=v+xe,g=v-xe,f=r+xe,`M ${b} ${u} C ${v} ${u} ${v+h} ${m} ${g} ${m} H ${f}`):(v=t+n,b=v-xe,g=v+xe,f=r+s-xe,`M ${b} ${u} C ${v} ${u} ${v-h} ${m} ${g} ${m} H ${f}`)}const Ge=document;function de({el:e,direction:t,locale:n,draggable:o,editable:i,contextMenu:r,contextMenuOption:s,toolBar:a,keypress:d,mouseSelectionButton:p,before:u,newTopicName:f,allowUndo:m,generateMainBranch:b,generateSubBranch:g,overflowHidden:v,mobileMenu:h,theme:y}){console.log("ME_version "+de.version,this);let _=null;const L=Object.prototype.toString.call(e);if(L==="[object HTMLDivElement]"?_=e:L==="[object String]"&&(_=document.querySelector(e)),!_)throw new Error("MindElixir: el is not a valid element");_.className+=" mind-elixir",_.innerHTML="",_.style.setProperty("--gap",xe+"px"),this.mindElixirBox=_,this.before=u||{},this.locale=n||"en",this.contextMenuOption=s,this.contextMenu=r===void 0?!0:r,this.toolBar=a===void 0?!0:a,this.keypress=d===void 0?!0:d,this.mouseSelectionButton=p||0,this.mobileMenu=h||!1,this.direction=typeof t=="number"?t:1,this.draggable=o===void 0?!0:o,this.newTopicName=f||"new node",this.editable=i===void 0?!0:i,this.allowUndo=m===void 0?!1:m,this.currentNode=null,this.currentArrow=null,this.scaleVal=1,this.tempDirection=null,this.generateMainBranch=b||Ns,this.generateSubBranch=g||Es,this.overflowHidden=v||!1,this.bus=bi.create(),this.container=Ge.createElement("div"),this.container.className="map-container";const E=window.matchMedia("(prefers-color-scheme: dark)");this.theme=y||(E.matches?gn:vn);const z=Ge.createElement("div");z.className="map-canvas",this.map=z,this.map.setAttribute("tabindex","0"),this.container.appendChild(this.map),this.mindElixirBox.appendChild(this.container),this.nodes=Ge.createElement("me-nodes"),this.nodes.className="main-node-container",this.lines=Qe("lines"),this.summarySvg=Qe("summary"),this.linkController=Qe("linkcontroller"),this.P2=Ge.createElement("div"),this.P3=Ge.createElement("div"),this.P2.className=this.P3.className="circle",this.P2.style.display=this.P3.style.display="none",this.line1=Jt(),this.line2=Jt(),this.linkController.appendChild(this.line1),this.linkController.appendChild(this.line2),this.linkSvgGroup=Qe("topiclinks"),this.map.appendChild(this.nodes),this.overflowHidden?this.container.style.overflow="hidden":gi(this)}de.prototype=Cs;de.LEFT=ue;de.RIGHT=Le;de.SIDE=ft;de.THEME=vn;de.DARK_THEME=gn;de.version="4.0.0";de.E=F;de.new=e=>({nodeData:{id:et(),topic:e||"new topic",root:!0,children:[]}});const ks={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-[6px] shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex-col flex scrollbar-visible"},_s={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1"},Ss={key:1},Ls={class:"flex gap-3 items-center"},Ts={class:"flex items-center gap-3 bg-bg-surface/50 h-[32px] px-2 rounded-md"},zs={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible"},js={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},As={key:0,class:"bg-bg-body rounded-lg p-4"},Ds={class:"flex items-center mt-3 gap-3"},Is=["disabled"],Os={class:"flex items-center mt-3 gap-3"},$s=hn({__name:"Product",setup(e){const{canEditSheet:t,canDeleteSheet:n,canCreateVariable:o,canCreateSheet:i,canCreateCard:r,canEditCard:s,canAssignCard:a}=Eo(),d=P(!1),p=P(null),u=P(!1),f=P(null),m=P(null),b=P(!1),g=P(!1),v=P("kanban"),h=P(null),y=P(null),_=P(!1),L=qo(),{workspaceId:E,moduleId:z}=ko(),Y=_o(),G=P(!1),J=P(),te=async()=>{if(console.log("ticket delete",f.value),!!f.value)try{g.value=!0,await Kt({url:`workspace/card/${f.value}`,method:"DELETE"}),w(f.value),await Pt(),u.value=!1,p.value=null,ge.success("Ticket deleted successfully")}catch(c){ge.error(Zt(c)),console.error(c)}finally{g.value=!1}},ze=async()=>{await te()},x=async(c,l)=>{if(c!=null&&c._id){m.value=c,b.value=!0;try{await Kt({url:"/workspace/cards/update",method:"PATCH",data:{card_id:c._id,variables:{"card-status":l}}}),c["card-status"]=l,ge.success("Ticket status updated successfully"),await Pt()}catch(C){console.error(C),ge.error(Zt(C))}finally{b.value=!1,m.value=null}}},w=c=>{var l,C;(C=(l=Ne.value)==null?void 0:l.sheets)==null||C.forEach(S=>{var T;(T=S.sheet_lists)==null||T.forEach(Z=>{Z.cards=Z.cards.filter(Q=>Q._id!==c)})})},M=Ie(()=>Oe(()=>import("./CreateTaskModal-BWPbuKwC.js"),__vite__mapDeps([0,1,2,3]))),K=Ie(()=>Oe(()=>import("./CreateSheetModal-DuqtxjG7.js"),__vite__mapDeps([4,2,3,5,6,7,8]))),tt=Ie(()=>Oe(()=>import("./CreateVariableModal-CJAzNMey.js"),__vite__mapDeps([9,2,3]))),H=Ie(()=>Oe(()=>import("./ConfirmDeleteModal-BIGMreYN.js"),__vite__mapDeps([10,11,2,3]))),Ce=Ie(()=>Oe(()=>import("./SidePanel-ClAxDzbx.js"),__vite__mapDeps([12,2,3,13]))),$n=Ie(()=>Oe(()=>import("./KanbanBoard-Cwi0iMah.js"),__vite__mapDeps([14,15,2,3,16,11,17]))),{data:nt,refetch:Pn,isPending:Ot}=So({workspace_id:E,workspace_module_id:z}),bt=ae(()=>{var c;return nt.value?(c=nt.value[0])==null?void 0:c._id:""}),se=P(bt.value),{data:me,isPending:Vn}=Lo(E.value,z.value,se),{mutate:yt,isPending:xt}=To({onSuccess:()=>{Y.invalidateQueries({queryKey:["sheet-list"]}),je.value="",Ee.value=!1,Ke.value=!1,Ee.value=!1}}),$t=c=>{yt({workspace_id:E.value,module_id:z.value,variable_id:oe.value,value:c})};He(bt,()=>{se.value=bt.value});const wt=ae(()=>{var c;return me!=null&&me.value?(c=me==null?void 0:me.value[0])==null?void 0:c._id:""}),oe=P(wt.value);He(wt,()=>{oe.value=wt.value});const qe=zo(),{data:he,isPending:Mt}=jo(z,se,ae(()=>[...qe.selectedLaneIds]),oe),{data:Ne,refetch:Pt}=Ao(z,oe,ae(()=>[...qe.selectedLaneIds])),ot=c=>{J.value=c},Ue=P(!1),Vt=()=>{ke.value={},Ue.value=!Ue.value},Hn=Do(),Bn=Io();function Rn(c){c.type=="column"?Hn.mutate({payload:{workspace_id:E.value,workspace_module_id:z.value,variable_id:oe.value,moved_value:c.meta.id,new_index:c.meta.newIndex}}):Bn.mutate({payload:{workspace_id:E.value,card_id:c.meta.moved._id,group_value:c.meta.fromColumnId,group_variable_id:oe.value,new_index:c.meta.newIndex,sheet_id:se.value}})}const Yn=c=>{},Fn=ae(()=>(nt.value||[]).map(c=>({_id:c._id,title:c==null?void 0:c.variables["sheet-title"],description:c==null?void 0:c.variables["sheet-description"],icon:c.icon,status:c==null?void 0:c.generation_status})));He(nt,c=>{var l;(c==null?void 0:c.length)>0&&(se.value=(l=c[0])==null?void 0:l._id)});const Ke=P(!1),je=P("");function it(){Ke.value=!Ke.value}function rt(){const c=je.value.trim();c&&$t(c)}const Wn=c=>{yt({workspace_id:L.params.id,module_id:L.params.module_id,new_value:c.title,value:c.oldTitle,variable_id:oe.value})},Ee=P(!1),fe=P(),qn=()=>{yt({value:fe.value.title,workspace_id:E.value,module_id:z.value,newValue:fe.value.title,variable_id:oe.value,is_trash:!0})},Un=c=>{Ee.value=!0,fe.value=c},Kn=c=>{G.value=!0,fe.value=c},ke=P();function Zn(c){d.value=!0,ke.value=c}const{mutate:Xn,isPending:Gn}=Oo({onSuccess:()=>{Pn(),d.value=!1}});function Jn(){var c;Xn({sheet_id:(c=ke.value)==null?void 0:c._id,workspace_module_id:z.value,is_trash:!0})}function Qn(c){Ue.value=!0,ke.value=c}const Ze=P(""),eo=P("");He(Ze,Go.debounce(c=>{eo.value=c},200));const to=ae(()=>{const c=he.value.flatMap(l=>l.cards.map(C=>({...C,columnId:l.title})));return new Gt(c,{keys:["card-title","card-description"],threshold:.3})}),Ht=ae(()=>{var c;if(v.value==="kanban"){if(!Ze.value)return he.value;const l=to.value.search(Ze.value).map(C=>C.item);return he.value.map(C=>({...C,cards:l.filter(S=>S.columnId===C.title)}))}else{const l=(c=Ze.value)==null?void 0:c.trim();if(!l){let S=[];return(he.value??[]).forEach(T=>{S=[...S,...T==null?void 0:T.cards]}),S}return new Gt(ro.value,{keys:["card-title","card-description"],threshold:.3}).search(l).map(S=>S.item)}}),{data:Ct}=$o(E),no=ae(()=>((Ct==null?void 0:Ct.value)??[]).map(c=>{var l;return{_id:c._id,title:((l=c==null?void 0:c.variables)==null?void 0:l["lane-title"])??String(c._id)}})),oo=ae(()=>{var c;return[{key:"card-title",label:"Title",render:({row:l,value:C})=>ne("div",[ne("a",{onClick:()=>{J.value=l},class:"text-sm underline text-blue-500 w-full overflow-ellipsis cursor-pointer"},l["card-code"]),ne("input",{onFocusout:S=>{var T;Bt(l==null?void 0:l._id,"card-title",(T=S==null?void 0:S.target)==null?void 0:T.value)},class:"text-sm w-full overflow-ellipsis cursor-pointer text-text-primary capitalize outline-none border-none focus:border active:bg-bg-surface focus:bg-bg-card backdrop-blur focus:border-accent p-1 rounded-md",defaultValue:C,disabled:!s.value})])},{key:"end-date",label:"Due Date",render:({row:l,value:C})=>{const S=P(C);return ne(Po,{class:" capitalize flex items-center gap-2 ",placeholder:"Set start date",modelValue:S.value,disabled:!s.value,"onUpdate:modelValue":T=>co(l==null?void 0:l._id,T)})}},{key:"lane",label:"Lane",render:({row:l,value:C})=>ne(Yt,{class:"capitalize flex items-center gap-2 ",size:"sm",options:no.value??[],placeholder:"Select lane",allowCustom:!1,canEditCard:!s.value,modelValue:C==null?void 0:C._id,"onUpdate:modelValue":S=>uo(l==null?void 0:l._id,S)})},{key:"created_by",label:"Owner",render:({value:l})=>ne("div",{class:"capitalize flex items-center gap-2 "},[ne("div",{class:" rounded-full  "},[l!=null&&l.u_profile_image?ne("img",{class:"w-6 h-6 rounded-full",src:l==null?void 0:l.u_profile_image}):ne("div",{class:"w-6 h-6 rounded-full flex justify-center items-center ",style:`background:${l!=null&&l.u_full_name?Vo({name:l.u_full_name,email:l.u_email}):""}`},Ho(l==null?void 0:l.u_full_name))]),ne("span",l?l==null?void 0:l.u_full_name:"")])},{key:"seat",label:"Assignee",render:({row:l,value:C})=>ne(Bo,{class:"capitalize flex items-center gap-2 ",onAssign:S=>io(l==null?void 0:l._id,S),assigneeId:C,seat:C,name:!0,disabled:!a.value})},...((c=me.value)==null?void 0:c.filter(l=>{var C;return((C=l==null?void 0:l.type)==null?void 0:C.title)==="Select"}).map(l=>({key:l==null?void 0:l.slug,label:l==null?void 0:l.slug,render:({row:C,value:S})=>{const T=P(S);return ne("div",{class:"capitalize flex items-center gap-2"},[ne(Yt,{class:"w-full border-none",options:so(l.data??[]),size:"sm",modelValue:T==null?void 0:T.value,defaultValue:T==null?void 0:T.value,canEditCard:!s.value,onUpdate:Z=>{Bt(C==null?void 0:C._id,l.slug,Z)}})])},visible:l==null?void 0:l.is_visible})))??[]]}),io=(c,l)=>{console.log(c,l,">>>> card >>>"),st.mutate({card_id:c,seat_id:l==null?void 0:l._id})},ro=ae(()=>{let c=[];return(he.value??[]).forEach(l=>{c=[...c,...l==null?void 0:l.cards]}),c}),so=c=>c.map(l=>({_id:l.value??l,title:l.value??l})),st=Ro({onSuccess:()=>{}});function Bt(c,l,C){st.mutate({card_id:c,variables:{[l]:C.trim()}})}const{mutate:lo}=Yo({onSuccess:()=>{}});function ao(c){if(c["card-title"]){const l={sheet_list_id:"To Do",workspace_id:E.value,sheet_id:se.value,variables:{"card-title":c["card-title"].trim()},createdAt:new Date().toISOString()};lo(l)}}const co=(c,l)=>{const C=he.value.findIndex(S=>S.cards.some(T=>T._id===c));if(C!==-1){const S=he.value[C].cards.findIndex(T=>T._id===c);S!==-1&&(he.value[C].cards[S]["end-date"]=l)}st.mutate({card_id:c,variables:{"start-date":l}})};function uo(c,l){st.mutate({card_id:c,workspace_lane_id:l})}const{mutate:po}=Fo(),mo=(c,l)=>{po({payload:{sheet_id:se.value,workspace_id:E.value,variable_slug:c,is_visible:l}})};function ho(c){const l={id:"root",topic:localStorage.getItem("currentName")||"Root Node",isRoot:!0,children:[]};if(!Array.isArray(c))return l;const C={"In Progress":"#FFB979","To Do":"#A9EAFF",Done:"#9AFFC6"};return c.forEach((S,T)=>{const Q=(S.variables||{})["sheet-title"]||`Variable ${T+1}`,j={id:`variable-${T}`,topic:Q,children:[]},$=Array.isArray(S.sheet_lists)?S.sheet_lists:[];$.forEach((D,I)=>{const N={id:`sheetlist-${T}-${I}`,topic:D.title||`Untitled Sheet List ${I+1}`,children:[]},q=Array.isArray(D.cards)?D.cards:[];q.forEach((X,U)=>{const W=X.seat,fo=(ve=>ve?ve.split(" ").map(wo=>wo[0]).join("").toUpperCase().slice(0,2):"UN")(W==null?void 0:W.status),vo=(W==null?void 0:W.status)==="assigned",Rt=X["card-status"]||"To Do",go=C[Rt]||"#D3D3D3",bo=$.map(ve=>ve.title||"Untitled"),yo=`
      <div class="card-content" style=" 
        width: 350px;
        height: 110px;
        background: #AFF4EF;
        padding: 5px;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        font-family: DM Sans, sans-serif;
        margin: 0;
        pointer-events:auto;
      ">
        <div style="display:flex; justify-content:space-between;">
          <div style="
            width:auto;
            height:40px;
            display:flex;
            color:#2B2C30;
            align-items:center;
            overflow:hidden;
            text-overflow:ellipsis;
            white-space:nowrap;
            font-weight:500;
            font-size:14px;
            padding-left:10px;
          ">
            ${(X["card-title"]||"Untitled").slice(0,25)}...
          </div>

          <select class="status-select" style="
            background:${go};      
            pointer-events:auto;
            color:#2B2C30;
            border:none;
            border-radius:20px;
            font-size:11px;
            font-weight:500;
            height:30px;
            display:flex;
            justify-content:center;
            align-items:center;
            padding:5px 12px;
            margin-top:7px;
            cursor:pointer;
          " onchange="handleStatusChange(event, ${T}, ${I}, ${U})">
            ${bo.map(ve=>`<option value="${ve}" ${ve===Rt?"selected":""} style="pointer-events:auto;">${ve}</option>`).join("")}
          </select>

          <div class="menu-wrapper" 
            style="position:relative; margin-right:10px; margin-top:-35px; height:20px; width:20px; pointer-events:auto; cursor:pointer;"
            onclick="event.stopPropagation(); event.stopImmediatePropagation(); toggleMenu(this);"
            onmousedown="event.stopPropagation(); event.stopImmediatePropagation();"
            onpointerdown="event.stopPropagation(); event.stopImmediatePropagation();"
            data-cardid="card-${T}-${I}-${U}"
          >
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" >
              <circle cx="5.23717" cy="9.99986" r="1.42857" fill="#2B2C30" fill-opacity="0.8"></circle>
              <circle cx="10.0008" cy="9.99986" r="1.42857" fill="#2B2C30" fill-opacity="0.8"></circle>
              <circle cx="14.7626" cy="9.99986" r="1.42857" fill="#2B2C30" fill-opacity="0.8"></circle>
            </svg>

            <ul class="menu-dropdown" 
              style="display:none; pointer-events:auto; position:absolute; top:70px; right:0; background:white; border:1px solid #ccc; border-radius:6px; list-style:none; padding-top: -30px;width:100px; height: 80px; font-size:13px; z-index:9999; overflow: hidden;"
              onclick="event.stopPropagation(); event.stopImmediatePropagation();"
              onmousedown="event.stopPropagation(); event.stopImmediatePropagation();"
            >
              <li style="margin-top:-25px; padding-left: 5px; padding-right: 5px; cursor:pointer;"  
                onclick="handleEdit(event)"
              >Edit Ticket</li>

              <li style="margin-top:-45px; padding-left: 5px; padding-right: 5px; cursor:pointer;" 
                onclick="handleDelete(event)"
              >Delete Ticket</li>
            </ul>
          </div>
        </div>

        <div style="display:flex; justify-content:space-between; margin-top:20px; width:320px; height:100px; overflow:hidden; margin-left:10px;">
          <div style="height:30px; width:100px; font-size:12px; display:flex;">
            <span style="margin-top:-25px !important;">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect width="20" height="20" rx="3.33333" fill="#29BF7F"/> <path d="M6.43164 14.3018L9.29004 12.167L9.29102 12.166C9.47176 12.0328 9.69053 11.9609 9.91504 11.9609C10.0834 11.9609 10.2482 12.0017 10.3965 12.0781L10.5391 12.166L10.54 12.167L13.373 14.291V5.91699H6.43164V14.3018ZM14.4316 14.3789C14.4277 14.5672 14.3725 14.7506 14.2725 14.9102C14.1723 15.0699 14.0303 15.1996 13.8623 15.2852C13.6944 15.3706 13.5064 15.4094 13.3184 15.3965C13.1304 15.3835 12.9495 15.3196 12.7949 15.2119L12.79 15.208L9.91504 13.0518L7.01465 15.209C6.83427 15.3432 6.61546 15.4161 6.39062 15.417H6.38965C6.2298 15.4164 6.07171 15.38 5.92773 15.3105V15.3096C5.75087 15.2261 5.60123 15.0946 5.49609 14.9297C5.3907 14.7642 5.33364 14.5721 5.33301 14.376V5.87402C5.3338 5.7361 5.36234 5.59971 5.41602 5.47266C5.46971 5.3456 5.54812 5.23049 5.64648 5.13379C5.74485 5.0371 5.86131 4.96069 5.98926 4.90918C6.1165 4.85797 6.2525 4.83272 6.38965 4.83398V4.83301H13.3906C13.6661 4.83457 13.9302 4.94494 14.125 5.13965C14.3198 5.33446 14.4301 5.59852 14.4316 5.87402V14.3789Z" fill="white" stroke="white" stroke-width="0.333333"/> </svg>
            </span>
            <span style="color:#2B2C30B2; margin-top:-30px !important; font-size: 14px; display:flex; margin-left:-10px;">
              ${X["card-code"]||"N/A"}
            </span>
          </div>

          <div style="
            height:26px;
            width:26px;
            padding:5px;
            color:white;
            border:1px solid white;
            display:flex;
            justify-content:center;
            border-radius:50%;
            align-items:center;
            background:${vo?"#4ADE80":"#9CA3AF"};
          ">
            <span>${fo}</span>
          </div>
        </div>
      </div>
    `,xo=U===q.length-1;N.children.push({id:`card-${T}-${I}-${U}`,dangerouslySetInnerHTML:`<div disabled id="card-inner-${T}-${I}-${U}" style="pointer-events:auto; height: 110px; width: 0px;">${yo}</div>`,expanded:!1,isLastCard:xo,selectable:!1})}),j.children.push(N)}),l.children.push(j)}),l}return Wo(()=>{var c;v.value==="mindmap"&&h.value&&((c=Ne.value)!=null&&c.sheets)&&fn(()=>{var T,Z,Q;const l=ho(Ne.value.sheets);y.value&&((Z=(T=y.value).destroy)==null||Z.call(T),y.value=null);const C=()=>{const j=document.querySelector(".mind-elixir .context-menu");j&&(j.style.display="",j.style.visibility="",j.style.opacity="",j.style.pointerEvents="",j.classList.remove("show","visible","open"),j.hidden=!0,requestAnimationFrame(()=>{j&&(j.hidden=!0)}))},S=new de({el:h.value,direction:de.RIGHT,draggable:!0,contextMenu:!0,contextMenuOption:{link:!1,focus:!0,addChild:!1,addParent:!1,summary:!1,extend:[{id:"cm-addVariable",name:"Add Variable",onclick:()=>{var $,D;const j=(D=($=y.value)==null?void 0:$.currentNode)==null?void 0:D.nodeObj;j&&(j.isRoot?Vt():ge.error("Add Variable is only allowed on the root node."),C())}},{id:"cm-addList",name:"Add List",onclick:()=>{var $,D,I;const j=(D=($=y.value)==null?void 0:$.currentNode)==null?void 0:D.nodeObj;j&&((I=j.id)!=null&&I.startsWith("variable")?it():ge.error("Add List is only allowed on variable nodes."),C())}},{id:"cm-deleteList",name:"Delete List",onclick:()=>{var $,D,I,N,q;const j=(D=($=y.value)==null?void 0:$.currentNode)==null?void 0:D.nodeObj;if(j){if((I=j.id)!=null&&I.startsWith("sheetlist")){const[X,U]=j.id.split("-").map(Number),W=(q=(N=Ne.value)==null?void 0:N.sheets)==null?void 0:q[U],Xe=W==null?void 0:W.variables;fe.value={...Xe,title:j.topic},Ee.value=!0}else ge.error("Delete List is only allowed on variable nodes.");C()}}},{id:"cm-addTask",name:"Add Task",onclick:()=>{var $,D,I;const j=(D=($=y.value)==null?void 0:$.currentNode)==null?void 0:D.nodeObj;j&&((I=j.id)!=null&&I.startsWith("sheetlist")?G.value=!0:ge.error("Add Task is only allowed on sheet list nodes."),C())}}]}});y.value=S,S.init({nodeData:l}),(Q=h.value)==null||Q.addEventListener("contextmenu",()=>{setTimeout(()=>{var D,I;const j=(I=(D=y.value)==null?void 0:D.currentNode)==null?void 0:I.nodeObj;if(!j)return;Array.from(document.querySelectorAll(".mind-elixir .context-menu li")).forEach(N=>{var X,U,W;const q=N.id;j.isRoot?N.style.display=q==="Add Variable"?"":"none":(X=j.id)!=null&&X.startsWith("variable")?N.style.display=q==="Add List"?"":"none":(U=j.id)!=null&&U.startsWith("sheetlist")?N.style.display=q==="Add Task"||q==="Delete List"?"":"none":(W=j.id)!=null&&W.startsWith("card")&&(N.style.display="none")})},10)})})}),window.toggleMenu=function(c){const l=c.querySelector(".menu-dropdown"),C=l.style.display==="block";l.style.display=C?"none":"block",document.addEventListener("click",function(S){S.target.closest(".menu-wrapper")||document.querySelectorAll(".menu-dropdown").forEach(T=>{T.style.display="none"})})},window.handleEdit=function(c){var N,q,X,U;c.stopPropagation(),c.stopImmediatePropagation();const C=c.target.closest(".menu-wrapper");if(!C)return;const S=C.getAttribute("data-cardid");if(!S)return;const[T,Z,Q,j]=S.split("-").map(Number),$=(q=(N=Ne.value)==null?void 0:N.sheets)==null?void 0:q[Z],D=(X=$==null?void 0:$.sheet_lists)==null?void 0:X[Q],I=(U=D==null?void 0:D.cards)==null?void 0:U[j];I&&(ot(I),document.querySelectorAll(".menu-dropdown").forEach(W=>{W.style.display="none"}))},window.handleDelete=function(c){var N,q,X,U;c.stopPropagation(),c.stopImmediatePropagation();const C=c.target.closest(".menu-wrapper");if(!C)return;const S=C.getAttribute("data-cardid");if(!S)return;const[T,Z,Q,j]=S.split("-").map(Number),$=(q=(N=Ne.value)==null?void 0:N.sheets)==null?void 0:q[Z],D=(X=$==null?void 0:$.sheet_lists)==null?void 0:X[Q],I=(U=D==null?void 0:D.cards)==null?void 0:U[j];I&&(p.value=I,f.value=I._id,u.value=!0,document.querySelectorAll(".menu-dropdown").forEach(W=>{W.style.display="none"}))},window.handleStatusChange=function(c,l,C,S){var Q,j,$,D,I,N;const T=(N=(I=(D=($=(j=(Q=Ne.value)==null?void 0:Q.sheets)==null?void 0:j[l])==null?void 0:$.sheet_lists)==null?void 0:D[C])==null?void 0:I.cards)==null?void 0:N[S];if(!T)return;const Z=c.target.value;x(T,Z)},(c,l)=>{var C,S,T,Z,Q,j,$,D,I;return A(),V(pe,null,[k("div",ks,[k("div",_s,[v.value!=="mindmap"?(A(),Se(Xt,{key:0,onEditOption:Qn,modelValue:se.value,"onUpdate:modelValue":l[1]||(l[1]=N=>se.value=N),canEdit:O(t),canDelete:O(n),onDeleteOption:Zn,options:Fn.value,variant:"secondary"},{more:De(()=>[O(i)?(A(),V("div",{key:0,onClick:l[0]||(l[0]=N=>Vt()),class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},l[28]||(l[28]=[k("i",{class:"fa-solid fa-plus"},null,-1),Be(" Add new ")]))):ee("",!0)]),_:1},8,["modelValue","canEdit","canDelete","options"])):ee("",!0),v.value==="mindmap"?(A(),V("div",Ss,l[29]||(l[29]=[k("h3",{class:"font-bold text-xl"},"Mind Map",-1)]))):ee("",!0),k("div",Ls,[(v.value=="kanban",A(),Se(Xt,{key:0,actions:!1,prefix:"View by",modelValue:oe.value,"onUpdate:modelValue":l[3]||(l[3]=N=>oe.value=N),options:O(me),variant:"secondary"},{more:De(()=>[O(o)?(A(),V("div",{key:0,onClick:l[2]||(l[2]=()=>{_.value=!0}),class:"sticky bottom-0 bg-bg-dropdown shadow-md shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},l[30]||(l[30]=[k("i",{class:"fa-solid fa-plus"},null,-1),Be(" Add new ")]))):ee("",!0)]),_:1},8,["modelValue","options"])),le(Zo,{onOnChange:l[4]||(l[4]=N=>{Ze.value=N}),placeholder:"Search in Orchit AI space"}),k("div",Ts,[k("button",{class:Je(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",v.value==="kanban"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"List view",onClick:l[5]||(l[5]=N=>v.value="kanban")},l[31]||(l[31]=[k("i",{class:"fa-solid fa-chart-kanban"},null,-1)]),2),k("button",{onClick:l[6]||(l[6]=N=>v.value="table"),class:Je(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",v.value==="table"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gallery view"},l[32]||(l[32]=[k("i",{class:"fa-solid fa-align-left"},null,-1)]),2),k("button",{onClick:l[7]||(l[7]=N=>v.value="mindmap"),class:Je(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",v.value==="mindmap"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"MindMap view"},l[33]||(l[33]=[k("i",{class:"fa-solid fa-chart-diagram"},null,-1)]),2)])])]),v.value=="kanban"?(A(),V(pe,{key:0},[kt(le(Ko,null,null,512),[[Ft,O(Mt)||O(Ot)]]),kt(k("div",zs,[le(O($n),{onOnPlus:Kn,board:Ht.value,"onDelete:column":l[8]||(l[8]=N=>Un(N)),"onUpdate:column":l[9]||(l[9]=N=>Wn(N)),onReorder:Rn,onAddColumn:$t,"onSelect:ticket":ot,onOnBoardUpdate:Yn,variable_id:oe.value,sheet_id:se.value},{"column-footer":De(N=>{var q,X,U,W,Xe;return[(X=(q=O(qe))==null?void 0:q.transitions)!=null&&X.all_allowed&&!((Xe=(W=(U=O(qe))==null?void 0:U.transitions)==null?void 0:W.all_allowed)!=null&&Xe.includes(N.column.title))&&O(qe).transitions.currentColumn!=N.column.title?(A(),V("div",js," Disbale ( you can't drop here ) ")):ee("",!0)]}),ticket:De(({ticket:N})=>[le(Xo,{selectedVar:oe.value,onSelect:()=>{ot(N)},ticket:N},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"]),k("div",{class:"min-w-[328px]",onClick:l[11]||(l[11]=Ve(()=>{},["stop"]))},[Ke.value?(A(),V("div",As,[le(qt,{autofocus:!0,modelValue:je.value,"onUpdate:modelValue":l[10]||(l[10]=N=>je.value=N),placeholder:"Add New list",onKeyup:Wt(rt,["enter"])},null,8,["modelValue"]),l[34]||(l[34]=k("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),k("div",Ds,[le(Ut,{onClick:rt,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:De(()=>[Be(ct(O(xt)?"Adding...":"Add list"),1)]),_:1}),k("i",{class:"fa-solid fa-close",onClick:it})])])):(A(),V("button",{key:1,disabled:!O(o),class:Je(["text-sm text-text-primary py-2.5 font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",O(o)?"cursor-pointer":"cursor-not-allowed"]),onClick:Ve(it,["stop"])}," + Add List ",10,Is))])],512),[[Ft,!O(Mt)&&!O(Ot)]])],64)):ee("",!0),v.value=="table"?(A(),Se(mi,{key:1,onToggleVisibility:mo,onAddVar:l[12]||(l[12]=()=>{_.value=!0}),isPending:O(Mt)||O(Vn),columns:oo.value,rows:Ht.value,canCreate:O(r),canCreateVariable:O(o),onCreate:ao},null,8,["isPending","columns","rows","canCreate","canCreateVariable"])):ee("",!0),v.value==="mindmap"?(A(),V(pe,{key:2},[k("div",{ref_key:"mindMapRef",ref:h,class:"w-full h-[90vh] rounded-md relative"},null,512),Ke.value?(A(),V("div",{key:0,class:"absolute top-40 left-70 bg-bg-body rounded-lg p-4 shadow-lg z-100 min-w-[328px] border",onClick:l[14]||(l[14]=Ve(()=>{},["stop"]))},[le(qt,{autofocus:!0,modelValue:je.value,"onUpdate:modelValue":l[13]||(l[13]=N=>je.value=N),placeholder:"Add New list",onKeyup:Wt(rt,["enter"])},null,8,["modelValue"]),l[35]||(l[35]=k("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),k("div",Os,[le(Ut,{onClick:rt,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:De(()=>[Be(ct(O(xt)?"Adding...":"Add list"),1)]),_:1}),k("i",{class:"fa-solid fa-close cursor-pointer",onClick:it})])])):ee("",!0)],64)):ee("",!0)]),le(O(H),{onClick:l[15]||(l[15]=Ve(()=>{},["stop"])),modelValue:Ee.value,"onUpdate:modelValue":l[16]||(l[16]=N=>Ee.value=N),title:"Delete List",itemLabel:"list",itemName:(C=fe.value)==null?void 0:C.title,requireMatchText:(S=fe.value)==null?void 0:S.title,confirmText:"Delete List",cancelText:"Cancel",size:"md",loading:O(xt),onConfirm:qn,onCancel:l[17]||(l[17]=()=>{Ee.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),G.value?(A(),Se(O(M),{selectedVariable:oe.value,listId:(T=fe.value)==null?void 0:T.title,sheet_id:se.value,key:"createTaskModalKey",modelValue:G.value,"onUpdate:modelValue":l[18]||(l[18]=N=>G.value=N),onSubmit:l[19]||(l[19]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):ee("",!0),(Z=J.value)!=null&&Z._id?(A(),Se(O(Ce),{key:1,details:J.value,onClose:l[20]||(l[20]=()=>{ot({variables:{}})}),showPanel:!!((Q=J.value)!=null&&Q._id)},null,8,["details","showPanel"])):ee("",!0),le(O(K),{size:"md",sheet:ke.value,modelValue:Ue.value,"onUpdate:modelValue":l[21]||(l[21]=N=>Ue.value=N)},null,8,["sheet","modelValue"]),_.value?(A(),Se(O(tt),{key:2,modelValue:_.value,"onUpdate:modelValue":l[22]||(l[22]=N=>_.value=N),sheetID:se.value},null,8,["modelValue","sheetID"])):ee("",!0),le(O(H),{onClick:l[23]||(l[23]=Ve(()=>{},["stop"])),modelValue:d.value,"onUpdate:modelValue":l[24]||(l[24]=N=>d.value=N),title:"Delete Sheet",itemLabel:"Sheet",itemName:(j=ke.value)==null?void 0:j.title,requireMatchText:($=ke.value)==null?void 0:$.title,confirmText:"Delete Sheet",cancelText:"Cancel",size:"md",loading:O(Gn),onConfirm:Jn,onCancel:l[25]||(l[25]=()=>{d.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),le(O(H),{modelValue:u.value,"onUpdate:modelValue":l[26]||(l[26]=N=>u.value=N),title:"Delete Ticket",itemLabel:"Ticket",itemName:(D=p.value)==null?void 0:D.title,requireMatchText:(I=p.value)==null?void 0:I.title,confirmText:"Delete Ticket",cancelText:"Cancel",size:"md",loading:g.value,onConfirm:ze,onCancel:l[27]||(l[27]=()=>{u.value=!1,p.value=null})},null,8,["modelValue","itemName","requireMatchText","loading"]),l[36]||(l[36]=k("div",null,null,-1))],64)}}}),Us=Uo($s,[["__scopeId","data-v-38aefd9d"]]);export{Us as default};
