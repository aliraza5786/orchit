import{d as S,r as f,c as l,u as M,b as N,w as o,o as m,e as t,i as c,g as $,h as r,j as z,_ as D,f as n,t as v,B as w,k as I}from"./index-DSbTV3UV.js";import{_ as j}from"./AuthLayout.vue_vue_type_script_setup_true_lang-D8PWRv6_.js";import{f as A}from"./auth-Csf5y4UQ.js";import"./favicon-BAFXWHLW.js";const L={class:"max-w-[500px] md:mx-auto w-full text-text-primary bg-bg-body"},R={key:0},h={key:0,class:"text-red-500 text-sm text-center mt-2"},q={class:"text-center mt-6"},H={key:1,class:"text-center"},T={class:"text-sm text-text-secondary mb-8"},U={class:"text-text-primary"},W={class:"mt-8"},X=S({name:"ForgotPasswordPage",__name:"ForgotPassword",setup(G){const k=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,s=f(""),a=f(""),d=f(!1),i={email:!1},x=l(()=>i.email?s.value.trim()?k.test(s.value)?"":"Invalid email":"Email is required":""),E=l(()=>!!x.value),p=l(()=>!x.value&&s.value.trim()),{mutateAsync:B,isPending:y}=M({mutationFn:A}),P=l(()=>y.value||!p.value),F=l(()=>y.value?"Sending...":"Send reset instructions");function V(){a.value&&(a.value="")}async function g(){if(a.value="",i.email=!0,!p.value){a.value="Please enter a valid email address.";return}try{await B({u_email:s.value}),d.value=!0}catch(u){a.value=(u==null?void 0:u.message)||"Failed to send reset email. Please try again."}}function C(){d.value=!1,i.email=!1,g()}return(u,e)=>{const b=I("router-link");return m(),N(j,null,{form:o(()=>[t("div",L,[d.value?(m(),c("div",H,[e[9]||(e[9]=t("div",{class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"},[t("i",{class:"fa-solid fa-check text-green-600 text-2xl"})],-1)),e[10]||(e[10]=t("h2",{class:"text-2xl font-medium mb-4 text-text-primary"}," Check your email ",-1)),t("p",T,[e[5]||(e[5]=n(" We've sent password reset instructions to")),e[6]||(e[6]=t("br",null,null,-1)),t("strong",U,v(s.value),1)]),e[11]||(e[11]=t("p",{class:"text-sm text-text-secondary mb-6"}," Didn't receive the email? Check your spam folder or ",-1)),r(w,{size:"md",variant:"secondary",onClick:C},{default:o(()=>e[7]||(e[7]=[n(" Resend email ")])),_:1,__:[7]}),t("div",W,[r(b,{to:"/login",class:"text-sm text-text-secondary hover:text-text-primary"},{default:o(()=>e[8]||(e[8]=[t("i",{class:"fa-solid fa-arrow-left mr-2"},null,-1),n("Back to login ")])),_:1,__:[8]})])])):(m(),c("div",R,[e[3]||(e[3]=t("h2",{class:"text-[32px] font-medium mb-4 text-center text-text-primary"}," Forgot Password? ",-1)),e[4]||(e[4]=t("p",{class:"text-sm text-text-secondary text-center mb-8"}," Enter your email address and we'll send you instructions to reset your password. ",-1)),t("form",{onSubmit:$(g,["prevent"]),class:"space-y-4 w-full"},[r(D,{modelValue:s.value,"onUpdate:modelValue":[e[0]||(e[0]=_=>s.value=_),V],label:"Email",placeholder:"Email address",size:"lg",error:E.value,message:x.value,onBlur:e[1]||(e[1]=_=>i.email=!0)},null,8,["modelValue","error","message"]),r(w,{disabled:P.value,size:"lg",block:!0,type:"submit"},{default:o(()=>[n(v(F.value),1)]),_:1},8,["disabled"]),a.value?(m(),c("p",h,v(a.value),1)):z("",!0)],32),t("div",q,[r(b,{to:"/login",class:"text-sm text-text-secondary hover:text-text-primary"},{default:o(()=>e[2]||(e[2]=[t("i",{class:"fa-solid fa-arrow-left mr-2"},null,-1),n("Back to login ")])),_:1,__:[2]})])]))])]),_:1})}}});export{X as default};
