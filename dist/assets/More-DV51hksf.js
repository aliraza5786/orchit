import{d as R,S as oe,c as L,i,e,y as $,h as c,t as f,w as v,n as _,k as le,o as l,H,a as ae,J as ne,r as d,b as z,_ as E,B as j,f as I,A as F,j as re,L as Q,a5 as q,F as g,x as C,T as ie}from"./index-DS_2ctjY.js";import{_ as de}from"./AudioRecorder.vue_vue_type_script_setup_true_lang-DX_HWJLt.js";import{I as ue}from"./IconPicker-BRfTfaK6.js";import{c as ce,d as pe,e as me,f as ve}from"./useMore-Cim12bvY.js";import{_ as fe}from"./SearchBar.vue_vue_type_script_setup_true_lang-BIxkkv2R.js";import{F as be}from"./fuse-Ch1WBRTM.js";const ge={class:"group relative rounded-2xl border border-border bg-bg-body p-4 shadow-sm transition-shadow hover:shadow"},xe={class:"flex items-start gap-3"},_e={class:"min-w-0 flex-1"},he={class:"flex items-center justify-between gap-2"},ye={class:"truncate text-sm font-semibold"},ke={class:"rounded-xl cursor-pointer border border-border bg-bg-surface/30 px-3 py-1 text-xs font-medium text-text-secondary transition hover:bg-bg-surface"},we={class:"mt-1 line-clamp-2 text-xs text-text-secondary"},Ce=R({__name:"AppCard",props:{app:{},actionLabel:{}},setup(U){const{workspaceId:x}=oe(),M=U,m=L(()=>M.actionLabel??"Open");return(p,h)=>{var a,u,y;const V=le("router-link");return l(),i("div",ge,[e("div",xe,[e("div",{class:$(["flex h-10 w-10 shrink-0 bg-accent/30 backdrop-blur-lg items-center justify-center rounded-xl text-text-primary",p.app.color])},[e("i",{class:$(["text-base font-semibold",`fa-solid ${(u=(a=p.app)==null?void 0:a.icon)==null?void 0:u.iconName}`])},null,2)],2),e("div",_e,[e("div",he,[e("h3",ye,f(p.app.title),1),c(V,{to:`/workspace/more/detail/${_(x)}/${(y=p.app)==null?void 0:y._id}`},{default:v(()=>[e("button",ke,f(m.value),1)]),_:1},8,["to"])]),e("p",we,f(p.app.description),1)])])])}}}),$e=H(Ce,[["__scopeId","data-v-d87c3ca0"]]),Me={class:"px-6 py-6 space-y-6"},Ve={key:0,class:"space-y-4"},Ae={class:"flex justify-end gap-2 pt-2"},Pe={key:1,class:"space-y-6"},je={class:"relative w-full"},Ie={class:"absolute bottom-4 right-4"},Ue={class:"mt-5"},Te={key:2,class:"space-y-4"},Ne={class:"flex flex-wrap gap-2 text-xs"},Se=["onClick"],ze={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},Le=["onClick"],Be=["src"],De={class:"p-3 py-4"},Oe={class:"text-base font-medium"},Re={class:"text-sm opacity-75 mt-1 line-clamp-1"},Ee={class:"flex justify-end gap-2 pt-2"},Fe=R({__name:"CreateNewModule",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(U,{emit:x}){const M=U,m=x,p=ae(),{workspaceId:h,moduleId:V}=ne(),a=d({title:"",description:"",icon:null}),u=d({});function y(){const r={};return a.value.title.trim()||(r.title="Please enter a sheet name."),a.value.description.trim()||(r.description="Please enter a description."),u.value=r,Object.keys(r).length===0}const{mutate:k,isPending:n}=ce({onSuccess:()=>{p.invalidateQueries({queryKey:["workspaces"]}),A()}});function s(){y()&&k({payload:{module:{icon:a.value.icon,variables:{"module-title":a.value.title,"module-description":a.value.description,"module-icon":a.value.icon},is_ai_generated:!1},workspace_id:h.value}})}function A(){a.value={title:"",description:"",icon:null},u.value={},B.value=!1,N.value="ai"}const B=L({get:()=>M.modelValue,set:r=>m("update:modelValue",r)}),D=d(!1),O=d(null),b=d(""),T=d(!1),{mutate:K,isPending:G}=pe({onSuccess:()=>{b.value="",A(),p.invalidateQueries({queryKey:["workspaces"]}),T.value=!1},onError:()=>{T.value=!1}});function J(){b.value.trim()&&(T.value=!0,K({payload:{idea:b.value,workspace_id:h.value}}))}const N=d("ai"),W=d([{id:"concept",title:"Product Concept",subtitle:"Early stage ideation board.",cover:"https://placehold.co/600x300",tags:["Experience Design","Development"]},{id:"launch",title:"Launch Prep",subtitle:"Prepare assets for product launch.",cover:"https://placehold.co/600x300",tags:["Marketing","Project Management"]}]),S=d(""),X=d([{name:"Experience Design"},{name:"Development"},{name:"Marketing"},{name:"Project Management"}]),w=d(new Set);function Y(r){w.value.has(r)?w.value.delete(r):w.value.add(r)}const Z=L(()=>W.value.filter(r=>(!S.value||r.title.toLowerCase().includes(S.value.toLowerCase()))&&(w.value.size===0||r.tags.some(t=>w.value.has(t))))),P=d(null);function ee(r){P.value=r}function te(){P.value&&k({icon:null,variables:{"sheet-title":P.value.title,"sheet-description":P.value.subtitle},is_ai_generated:!1,workspace_id:h.value,workspace_module_id:V.value})}return(r,t)=>(l(),z(ie,{modelValue:B.value,"onUpdate:modelValue":t[10]||(t[10]=o=>B.value=o),size:"lg"},{default:v(()=>[t[15]||(t[15]=e("div",{class:"flex justify-between items-start px-6 border-b border-border pb-4"},[e("h2",{class:"text-xl font-semibold"}," Add New Module ")],-1)),e("div",Me,[N.value==="manual"?(l(),i("section",Ve,[c(ue,{modelValue:a.value.icon,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.icon=o)},null,8,["modelValue"]),c(E,{modelValue:a.value.title,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.title=o),label:"Module name",size:"lg",placeholder:"Module name",error:!!u.value.title,message:u.value.title},null,8,["modelValue","error","message"]),c(E,{modelValue:a.value.description,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.description=o),label:"Description",size:"lg",textarea:"",placeholder:"A short description",error:!!u.value.description,message:u.value.description},null,8,["modelValue","error","message"]),e("div",Ae,[e("button",{class:"px-4 py-2 rounded-md text-sm text-text-secondary border",onClick:A},"Cancel"),c(j,{class:"px-4",onClick:s},{default:v(()=>[I(f(_(n)?"Saving...":"Save"),1)]),_:1})])])):N.value==="ai"?(l(),i("section",Pe,[e("div",je,[e("div",{class:$(`${_(G)||T.value?"neon-flow-border":""} bg-bg-input flex h-[200px] p-4 rounded-2xl relative`)},[!D.value&&!O.value?F((l(),i("textarea",{key:0,"onUpdate:modelValue":t[3]||(t[3]=o=>b.value=o),placeholder:"Ask Orchit AI to create a sheet...",class:"w-full h-full resize-none outline-none bg-transparent text-sm"},null,512)),[[Q,b.value]]):re("",!0),b.value?(l(),z(q,{key:2,name:"rotate-fade",appear:""},{default:v(()=>[e("div",{onClick:t[7]||(t[7]=o=>J()),class:"absolute bottom-4 right-4 w-9 h-9 bg-accent rounded-md flex items-center justify-center cursor-pointer shadow"},t[11]||(t[11]=[e("i",{class:"text-white fa-solid fa-arrow-right"},null,-1)]))]),_:1})):(l(),z(q,{key:1,name:"fade-slide",appear:""},{default:v(()=>[e("div",Ie,[c(de,{modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=o=>b.value=o),isRecording:D.value,"onUpdate:isRecording":t[5]||(t[5]=o=>D.value=o),hasAudio:O.value,"onUpdate:hasAudio":t[6]||(t[6]=o=>O.value=o)},null,8,["modelValue","isRecording","hasAudio"])])]),_:1}))],2)]),t[13]||(t[13]=e("div",{class:"flex w-full px-6 text-sm text-text-secondary items-center gap-4 mt-6"},[e("hr",{class:"flex-auto text-border"}),e("span",null,"OR"),e("hr",{class:"flex-auto text-border"})],-1)),e("div",Ue,[c(j,{variant:"secondary",color:"dark",block:!0,onClick:t[8]||(t[8]=o=>N.value="manual")},{default:v(()=>t[12]||(t[12]=[I(" Create Manually ")])),_:1,__:[12]})])])):(l(),i("section",Te,[F(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>S.value=o),class:"w-full border rounded-lg p-2 text-sm border-border",placeholder:"Search"},null,512),[[Q,S.value]]),e("div",Ne,[(l(!0),i(g,null,C(X.value,o=>(l(),i("button",{key:o.name,class:$(["px-3.5 py-1.5 rounded-md",w.value.has(o.name)?"bg-black text-white":"bg-bg-body text-text-secondary"]),onClick:se=>Y(o.name)},f(o.name),11,Se))),128))]),e("div",ze,[(l(!0),i(g,null,C(Z.value,o=>(l(),i("button",{key:o.id,class:"border border-border rounded-xl overflow-hidden text-left hover:shadow-sm",onClick:se=>ee(o)},[e("img",{src:o.cover,class:"w-full h-36 object-cover"},null,8,Be),e("div",De,[e("div",Oe,f(o.title),1),e("div",Re,f(o.subtitle),1)])],8,Le))),128))]),e("div",Ee,[c(j,{variant:"secondary",onClick:A},{default:v(()=>t[14]||(t[14]=[I("Cancel")])),_:1,__:[14]}),c(j,{disabled:!P.value,onClick:te},{default:v(()=>[I(f(_(n)?"Adding...":"Add board"),1)]),_:1},8,["disabled"])])]))])]),_:1,__:[15]},8,["modelValue"]))}}),Qe=H(Fe,[["__scopeId","data-v-0571a993"]]),qe={class:"flex-auto flex-grow h-full bg-bg-card rounded-lg border border-border overflow-x-auto flex-col flex"},He={class:"sticky top-0 w-full z-10 backdrop-blur"},Ke={class:"mx-auto px-4 py-6"},Ge={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},Je={class:"flex gap-2 items-center"},We={class:"mt-5 flex flex-wrap gap-2"},Xe=["onClick"],Ye={class:"mx-auto w-full px-4 pb-16"},Ze={class:"pt-4"},et={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},rt=R({__name:"More",setup(U){const x=d(!1),M=()=>{x.value=!0},m=d(""),{data:p,isPending:h}=me(),{data:V,isPending:a}=ve(m),u=d(""),y=L(()=>{const k=V.value??[];return u.value.trim()?new be(k,{keys:["title","description"],threshold:.3}).search(u.value).map(s=>s.item):k});return(k,n)=>(l(),i(g,null,[e("div",qe,[e("header",He,[e("div",Ke,[e("div",Ge,[n[5]||(n[5]=e("h1",{class:"text-2xl font-semibold tracking-tight"},"Apps",-1)),e("div",Je,[c(fe,{onOnChange:n[0]||(n[0]=s=>{u.value=s}),placeholder:"Search in Orchit AI space"}),c(j,{size:"sm",onClick:n[1]||(n[1]=s=>M())},{default:v(()=>n[4]||(n[4]=[I(" Add New ")])),_:1,__:[4]})])]),e("div",We,[_(h)?(l(),i(g,{key:0},C(["3","2","2"],s=>e("button",{key:s,class:"rounded-full border-border w-26 h-8 cursor-pointer border px-4 py-1.5 text-sm transition-all animate-pulse bg-bg-surface"})),64)):(l(),i(g,{key:1},[e("button",{onClick:n[2]||(n[2]=s=>m.value=""),class:$(["rounded-full cursor-pointer border px-4 py-1.5 text-sm transition-all",m.value==""?"border-border bg-accent text-white shadow-sm":"border-border bg-bg-card text-text-secondary hover:bg-accent/50"])}," All ",2),(l(!0),i(g,null,C(_(p),s=>(l(),i("button",{key:s==null?void 0:s._id,onClick:A=>m.value=s==null?void 0:s._id,class:$(["rounded-full cursor-pointer border px-4 py-1.5 text-sm transition-all",m.value===(s==null?void 0:s._id)?"border-border bg-accent text-white shadow-sm":"border-border bg-bg-card text-text-secondary hover:bg-accent/50"])},f(s==null?void 0:s.title),11,Xe))),128))],64))])])]),e("main",Ye,[e("section",Ze,[n[6]||(n[6]=e("div",{class:"mb-4 flex items-center justify-between"},[e("h2",{class:"text-lg font-semibold"},"Currentl Using")],-1)),e("div",et,[_(a)?(l(),i(g,{key:0},C(["3","2","2"],s=>e("div",{key:s,class:"h-16 w-full p-3 rounded-lg bg-bg-surface animate-pulse"})),64)):(l(!0),i(g,{key:1},C(y.value,s=>(l(),z($e,{key:s==null?void 0:s._id,app:s,"action-label":"Open"},null,8,["app"]))),128))])])])]),c(Qe,{size:"md",modelValue:x.value,"onUpdate:modelValue":n[3]||(n[3]=s=>x.value=s)},null,8,["modelValue"])],64))}});export{rt as default};
