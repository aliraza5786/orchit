import{d as ie,r as d,l as j,Q as de,h as l,x as h,y as q,i as b,z as Z,b as c,t as A,m as W,e as O,o as i,N as X,_ as ce,V as pe,c as ae,p as me,f as B,F as oe,v as ne,a5 as ve,L as fe,H as he}from"./index-DXbJhmZM.js";import{u as ge}from"./useOpenAIGeneration-D_7Kph10.js";import{_ as be}from"./favicon-BAFXWHLW.js";import{_ as we}from"./info-DjaLHeD_.js";const ye={key:0,class:"absolute top-3 left-2 text-xs text-accent ml-2 mt-1"},xe={key:0,class:"w-8 h-8 aspect-square rounded-lg cursor-pointer bg-accent p-2 flex items-center justify-center"},ke={key:1,class:"w-8 h-8 aspect-square rounded-lg bg-accent flex justify-center items-center text-center cursor-pointer"},_e={key:2,class:"text-text-secondary"},Le={key:3,class:"text-red-500"},Ce={key:4,class:"text-white mt-2 text-sm"},Re=3,se=200,Ne=ie({__name:"AudioRecorder",props:{class:{type:String,default:""}},emits:["transcribed","update:isRecording","update:hasAudio"],setup(T,{emit:S}){const n=S,V=T,w=d(0);let k=null;const E=d(null),p=d(null),r=d(!1),u=d(null);let y=[],v=null;const{mutate:U,data:M,isPending:K,isError:H}=ge({onSuccess:t=>{n("update:isRecording",!1),n("update:hasAudio",!1),n("transcribed",t)}});j(M,t=>{t&&n("transcribed",t)});let g=null,x,_,L,C=0;const e=d(null),s=d(!1),o=d(0),m=new Array(se).fill(0),P=()=>{if(!u.value||!x)return;const t=u.value,a=t.getContext("2d");if(!a)return;x.getByteFrequencyData(_);const I=_.reduce((G,Q)=>G+Q,0)/_.length/255*.8;C++,C%Re===0&&(m.push(I),m.length>se&&m.shift()),a.clearRect(0,0,t.width,t.height);const R=t.height/2;a.strokeStyle="var(--accent)",a.setLineDash([2,2]),a.beginPath(),a.moveTo(0,R),a.lineTo(t.width,R),a.stroke(),a.setLineDash([]);const $=1,z=$+1,Y=t.width-m.length*z;a.fillStyle="var(--accent)",m.forEach((G,Q)=>{const J=G*t.height*1,te=Y+Q*z;a.fillRect(te,R-J,$,J||5),a.fillRect(te,R,$,J||5)}),L=requestAnimationFrame(P)},D=()=>{cancelAnimationFrame(L),g==null||g.close(),g=null},N=async()=>{if(r.value)v==null||v.stop(),D(),r.value=!1,k&&(clearInterval(k),k=null);else{const t=await navigator.mediaDevices.getUserMedia({audio:!0});v=new MediaRecorder(t),y=[],v.ondataavailable=f=>{f.data.size>0&&y.push(f.data)},v.onstop=()=>{const f=new Blob(y,{type:"audio/webm"});E.value=f,p.value=URL.createObjectURL(f);const I=new File([f],"recording.webm",{type:"audio/webm"});U(I),e.value=new Audio(p.value),e.value.addEventListener("timeupdate",()=>{o.value=Math.floor(e.value.currentTime)}),e.value.addEventListener("ended",()=>{s.value=!1,o.value=0}),p.value=URL.createObjectURL(f),e.value=new Audio(p.value),e.value.addEventListener("timeupdate",()=>{o.value=Math.floor(e.value.currentTime)}),e.value.addEventListener("ended",()=>{s.value=!1})},g=new AudioContext;const a=g.createMediaStreamSource(t);x=g.createAnalyser(),x.fftSize=2048,_=new Uint8Array(x.frequencyBinCount),a.connect(x),P(),v.start(),r.value=!0,w.value=0,k=setInterval(()=>{w.value++},1e3)}},ee=d(null),ue=()=>{if(!ee.value||!E.value)return;const t=ee.value,a=t.getContext("2d");if(!a)return;t.width=t.clientWidth,t.height=t.clientHeight,a.clearRect(0,0,t.width,t.height);const f=t.height/2,I=300,R=2,$=2;for(let F=0;F<I;F++){const z=Math.random()*t.height*.6+4,Y=F*(R+$);a.fillStyle="white",a.fillRect(Y,f-z/2,R,z)}};return j(p,t=>{t?(n("update:hasAudio",!0),X(ue)):n("update:hasAudio",!1)}),j(r,t=>{t&&n("update:isRecording",t)}),de(()=>{D()}),(t,a)=>(i(),l("div",{class:h(["",r.value?"relative":` ${V.class} `])},[q(c("canvas",{ref_key:"canvasRef",ref:u,class:"w-full h-12 rounded-xl p-3 bg-bg-surface"},null,512),[[Z,r.value]]),r.value?(i(),l("div",ye,A(Math.floor(w.value/60))+":"+A((w.value%60).toString().padStart(2,"0")),1)):b("",!0),p.value?b("",!0):(i(),l("button",{key:1,onClick:N,class:h([" text-sm overflow-hidden",r.value?"text-red-500 mt-1  absolute right-2 top-1":"text-text-primary"])},[r.value?(i(),l("div",xe,a[0]||(a[0]=[c("div",{class:"w-2 bg-white h-2 aspect-square"},null,-1)]))):(i(),l("div",ke,a[1]||(a[1]=[c("i",{class:"text-white fa-solid fa-microphone font-base"},null,-1)])))],2)),W(K)&&p.value?(i(),l("p",_e,"Transcribing...")):b("",!0),W(H)&&p.value?(i(),l("p",Le,"Transcription failed.")):b("",!0),W(M)&&p.value?(i(),l("p",Ce,[a[2]||(a[2]=c("strong",null,"Transcirpt:",-1)),O(" "+A(W(M)),1)])):b("",!0)],2))}}),Se={},Ue={class:"flex bg-bg-body justify-center items-center z-20 fixed top-0 bottom-0 min-h-[100dvh] w-[100vw]"};function Me(T,S){return i(),l("div",Ue,S[0]||(S[0]=[pe('<div class="text-center text-text-secondary space-y-6 z-10" data-v-054b1a92><img src="'+be+'" alt="Logo" class="w-15 h-15 mx-auto" data-v-054b1a92><p class="text-base text-text-secondary font-medium" data-v-054b1a92>Assembling Your Project Powerhouse...</p><div class="overflow-hidden max-h-24 relative" data-v-054b1a92><div class="absolute h-40 w-100 bottom-0 z-1" style="background:linear-gradient(180deg, var(--bg-body) 0%, var(--bg-body) 100%);" data-v-054b1a92></div><div class="animate-scroll space-y-5" data-v-054b1a92><p class="text-sm animate-fadeInUp" data-v-054b1a92>Creating your peak view dashboard</p><p class="text-sm animate-fadeInUp" data-v-054b1a92>Building your dream team</p><p class="text-sm animate-fadeInUp" data-v-054b1a92>Streamlining your workflow</p><p class="text-sm animate-fadeInUp" data-v-054b1a92>Highlighting what matters most</p><p class="text-sm animate-fadeInUp" data-v-054b1a92>Crafting your product roadmap</p><p class="text-sm animate-fadeInUp" data-v-054b1a92>Getting everything ready to launch</p><p class="text-sm animate-fadeInUp" data-v-054b1a92>Laying out your action plan</p><p class="text-sm animate-fadeInUp" data-v-054b1a92>Launching your project into motion</p></div></div></div>',1)]))}const Fe=ce(Se,[["render",Me],["__scopeId","data-v-054b1a92"]]),Ae=["title"],Ve={class:"flex flex-nowrap gap-1 h-full"},Ee=["onClick"],Ie=["placeholder","onKeydown"],$e=["onClick"],ze=["innerHTML"],re=160,Be=8,le=!0,We=ie({__name:"BaseMultiSelect",props:{modelValue:{},options:{},label:{},tooltip:{},message:{},error:{type:Boolean},placeholder:{default:"Select..."},size:{default:"md"},theme:{default:"light"},allowCustom:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(T,{emit:S}){const n=T,V=S,w=d(null),k=d(null),E=d(null),p=d(null),r=d(""),u=d(!1),y=d(!1),v=ae(()=>n.modelValue.map(e=>n.options.find(o=>o._id===e)||{title:String(e),_id:e})),U=ae(()=>n.options.filter(e=>e.title.toLowerCase().includes(r.value.toLowerCase())&&!n.modelValue.includes(e._id)));function M(){u.value||(u.value=!0),X(()=>{var e;L(),(e=p.value)==null||e.focus()})}function K(){u.value=!0,X(L)}function H(e){V("update:modelValue",[...n.modelValue,e._id]),r.value="",u.value=!1}function g(e){V("update:modelValue",n.modelValue.filter(s=>s!==e))}function x(){if(!n.allowCustom||!r.value.trim())return;const e=r.value.trim();if(n.options.some(o=>o.title.toLowerCase()===e.toLowerCase())){const o=n.options.find(m=>m.title.toLowerCase()===e.toLowerCase());o&&H(o)}else{const o=e.toLowerCase().replace(/\s+/g,"-");V("update:modelValue",[...n.modelValue,o]),n.options.push({title:e,_id:o})}r.value="",u.value=!1}function _(e){w.value&&!w.value.contains(e.target)&&(u.value=!1)}function L(){var N;const e=k.value;if(!e)return;const s=e.getBoundingClientRect(),m=window.innerHeight-s.bottom,P=s.top,D=Math.min(((N=E.value)==null?void 0:N.scrollHeight)??re,re);m<D+Be?y.value=P>m:y.value=!1}function C(){u.value&&L()}return me(()=>{document.addEventListener("click",_),window.addEventListener("resize",C),window.addEventListener("scroll",C,le)}),de(()=>{document.removeEventListener("click",_),window.removeEventListener("resize",C),window.removeEventListener("scroll",C,le)}),j([u,()=>U.value.length],()=>{u.value&&X(L)}),(e,s)=>(i(),l("div",{class:h([e.theme==="dark"?"text-white":"text-text-primary","relative"]),ref_key:"wrapperRef",ref:w},[e.label?(i(),l("label",{key:0,class:h(["text-base font-medium mb-1 flex items-center",e.theme==="dark"?"text-white":"text-text-primary"])},[O(A(e.label)+" ",1),e.tooltip?(i(),l("span",{key:0,class:"inline-block text-text-secondary ml-1 cursor-help",title:e.tooltip},s[2]||(s[2]=[c("img",{src:we,alt:"info"},null,-1)]),8,Ae)):b("",!0)],2)):b("",!0),c("div",{ref_key:"anchorRef",ref:k,class:h(["relative px-3 py-2 rounded-xl overflow-x-auto w-full border text-sm",[e.size==="md"?"h-10":"h-12",e.theme==="dark"?"bg-bg-input border-border":"bg-bg-input border-border ",e.error?"border-red-500 focus-within:ring-red-500":"focus-within:ring-black"]]),onMousedown:B(M,["self"])},[c("div",Ve,[(i(!0),l(oe,null,ne(v.value,o=>(i(),l("span",{key:o._id,class:"bg-bg-body text-text-primary px-2 text-nowrap py-1 rounded text-xs flex items-center gap-1"},[O(A(o.title)+" ",1),c("span",{onClick:B(m=>g(o._id),["stop"]),class:"cursor-pointer"},"âœ•",8,Ee)]))),128)),q(c("input",{ref_key:"inputRef",ref:p,class:h(["outline-none flex-1 bg-transparent text-sm h-full",e.theme=="dark"?"!text-white placeholder-white/60":"text-text-primary placeholder-gray-400"]),placeholder:v.value.length?"":e.placeholder,"onUpdate:modelValue":s[0]||(s[0]=o=>r.value=o),onFocus:M,onInput:K,onKeydown:fe(B(x,["prevent"]),["enter"])},null,42,Ie),[[ve,r.value]])])],34),q(c("ul",{ref_key:"menuRef",ref:E,class:h(["absolute left-0 z-10 text-sm p-2 border rounded-md shadow max-h-40 overflow-auto w-full",[e.theme==="dark"?"bg-[#131318] text-white border-border":"bg-bg-dropdown text-text-primary border-border",y.value?"bottom-[76%] ":"top-full "]])},[(i(!0),l(oe,null,ne(U.value,o=>(i(),l("li",{key:o._id,class:h(["px-3 py-2 rounded-lg cursor-pointer",e.theme==="dark"?"hover:bg-[#000000de]":"hover:bg-bg-dropdown-menu-hover"]),onMousedown:s[1]||(s[1]=B(()=>{},["prevent"])),onClick:B(m=>H(o),["stop"])},[c("span",{innerHTML:o.title},null,8,ze)],42,$e))),128))],2),[[Z,u.value&&U.value.length>0]]),q(c("ul",{class:h(["absolute left-0 z-10 p-2 border rounded shadow w-full",[e.theme==="dark"?"bg-bg-dropdown text-text-primary border-border":"bg-bg-dropdown border-border",y.value?"bottom-full mb-2":"top-full mt-2"]])},s[3]||(s[3]=[c("li",{class:"px-3 py-2 text-sm text-text-secondary"},"No options found",-1)]),2),[[Z,u.value&&U.value.length===0]]),e.message?(i(),l("p",{key:1,class:h(["mt-2 text-xs flex items-center gap-1",e.error?"text-red-500":(e.theme==="dark","text-text-secondary ")])},[e.$slots.msgIcon?he(e.$slots,"msgIcon",{key:0}):b("",!0),O(" "+A(e.message),1)],2)):b("",!0)],2))}});export{Fe as L,Ne as _,We as a};
