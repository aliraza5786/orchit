import{d as N,c as T,i as d,F as $,x as S,e as a,ac as W,t as j,R as U,l as D,o as i,H as q,r as x,ao as L,m as R,b as P,T as A,n as m,ap as f,w as z,y as I,aq as E,j as F,h as G,B as M,f as H}from"./index-AKKd6Xtu.js";import{f as O}from"./FormatDate--XHqACrs.js";import{u as J}from"./workspace-BByyjoCg.js";const K=["aria-busy"],Q=["onClick","aria-label"],X=["src"],Y={class:"flex items-start gap-2.5 border-t border-border bg-bg-card p-3.5 text-sm"},Z=["src"],ee={class:"min-w-0"},te={class:"truncate text-sm font-medium text-text-primary"},se={class:"truncate text-xs text-text-secondary"},ae={key:1,class:"grid grid-cols-1 gap-5 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4"},oe={key:2,class:"col-span-full flex items-center justify-center py-10 text-sm text-text-secondary"},re=N({__name:"ProjectGallery",props:{projects:{},loading:{type:Boolean,default:!1},skeletonCount:{default:8}},setup(C){const v=C,c=D(),y=T(()=>v.skeletonCount??8),p=e=>{var o;return((o=e==null?void 0:e.variables)==null?void 0:o.title)||(e==null?void 0:e.title)||"Untitled"};function h(e){if(!e)return"—";const o=new Date(e);return Number.isNaN(+o)?"—":new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}).format(o)}function k(e){let o=0;for(let r=0;r<((e==null?void 0:e.length)||0);r++)o=o*31+e.charCodeAt(r)|0;const t=Math.abs(o)%360;return`linear-gradient(135deg, hsl(${t} 55% 55%), hsl(${t} 60% 48%))`}function u(e){return k(p(e))}function _(e){var t;const o=(t=e==null?void 0:e.LatestTask)==null?void 0:t.job_id;o?localStorage.setItem("jobId",o):localStorage.removeItem("jobId"),c.push(`/workspace/peak/${e._id}/${o??""}`)}return(e,o)=>{var t;return!e.loading&&((t=e.projects)!=null&&t.length)?(i(),d("section",{key:0,class:"grid grid-cols-1 gap-5 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4","aria-busy":e.loading?"true":"false","aria-live":"polite"},[(i(!0),d($,null,S(e.projects,(r,g)=>(i(),d("article",{key:r._id??g,class:"group relative overflow-hidden rounded-xl cursor-pointer border border-border/70 bg-bg-card shadow-sm outline-none transition-all duration-200 hover:shadow-md focus-within:ring-2 focus-within:ring-orange-300"},[a("button",{type:"button",class:"absolute inset-0 z-10",onClick:w=>_(r),"aria-label":`Open project ${p(r)}`},null,8,Q),a("div",{class:"flex h-39 items-center justify-center",style:W({background:u(r)})},[a("img",{src:r.logo,class:"aspect-square h-10 w-10 rounded-md object-cover",alt:"",loading:"lazy",decoding:"async"},null,8,X)],4),a("div",Y,[a("img",{src:r.logo,class:"h-6 w-6 rounded-md object-cover",alt:"",loading:"lazy",decoding:"async"},null,8,Z),a("div",ee,[a("h3",te,j(p(r)),1),a("p",se,j(h(r.lastUpdated)),1)])])]))),128))],8,K)):e.loading?(i(),d("section",ae,[(i(!0),d($,null,S(y.value,r=>(i(),d("div",{key:"sk-"+r,class:"overflow-hidden rounded-xl border border-border/70 bg-bg-card shadow-sm",role:"status","aria-label":"Loading project"},o[0]||(o[0]=[U('<div class="h-39 bg-[linear-gradient(90deg,theme(colors.slate.200/20),theme(colors.slate.200/40),theme(colors.slate.200/20))] bg-[length:200%_100%] animate-[shimmer_1.1s_ease_infinite]" data-v-51db3a46></div><div class="flex items-start gap-2.5 border-t border-border p-3.5 text-sm" data-v-51db3a46><div class="h-6 w-6 rounded-md bg-surface" data-v-51db3a46></div><div class="flex w-full flex-col gap-2" data-v-51db3a46><div class="h-3 w-32 rounded bg-surface" data-v-51db3a46></div><div class="h-2.5 w-20 rounded bg-surface" data-v-51db3a46></div></div></div>',2)])))),128))])):(i(),d("div",oe," No projects yet "))}}}),le=q(re,[["__scopeId","data-v-51db3a46"]]),ne={class:"flex -space-x-2"},ie=N({__name:"WorkspaceListTable",setup(C){const v=D(),c=new Map,y=s=>(c.has(s)||c.set(s,O(s)),c.get(s)),p=s=>{var b;const l=s.row,n=(b=l==null?void 0:l.LatestTask)==null?void 0:b.job_id;n?localStorage.setItem("jobId",n):localStorage.removeItem("jobId"),v.push(`/workspace/peak/${l==null?void 0:l._id}/${n||""}`)},e=[{key:"variables",label:"Project",render:({row:s,value:l})=>f("div",{class:"flex items-center gap-2"},[s.logo?f("img",{src:s.logo,alt:(l==null?void 0:l.title)||"Project",class:"h-8 w-8 bg-bg-card rounded-full object-cover",loading:"lazy",decoding:"async"}):f("div",{class:"h-8 w-8 rounded-full bg-bg-card"}),f("span",(l==null?void 0:l.title)||"Untitled")])},{key:"variables",label:"Project type",render:({value:s})=>f("span",{class:"capitalize"},(s==null?void 0:s["workspace-type"])||"-")},{key:"People",label:"People",render:({value:s})=>f(E,{avatars:s||[],image:!0,maxVisible:3})},{key:"created_at",label:"Start Date",render:({value:s})=>f("span",y(s))}],o=x(1),t=x(10),{data:r,isPending:g}=L(o,t),w=T(()=>{var s;return((s=r.value)==null?void 0:s.workspaces)??[]}),B=x(0);return R(r,()=>{var s,l,n,b;(l=(s=r.value)==null?void 0:s.pagination)!=null&&l.totalCount&&(B.value=(b=(n=r.value)==null?void 0:n.pagination)==null?void 0:b.totalCount)}),(s,l)=>(i(),P(A,{columns:e,rows:w.value,loading:m(g),total:B.value,page:o.value,"onUpdate:page":l[0]||(l[0]=n=>o.value=n),pageSize:t.value,"onUpdate:pageSize":l[1]||(l[1]=n=>t.value=n),pageSizes:[10,20,50,100],onRowClick:p},{status:z(({row:n})=>[a("span",{class:I(["px-3 py-1 rounded-full text-xs font-medium",{"bg-blue-100 text-blue-600":n.status==="In progress","bg-red-100 text-red-600":n.status==="Live","bg-green-100 text-green-600":n.status==="Done"}])},j(n.status),3)]),team:z(({row:n})=>[a("div",ne,[(i(!0),d($,null,S(n.Roles,(b,V)=>(i(),d("span",{key:V,class:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-xs"},j(b),1))),128))])]),_:1},8,["rows","loading","total","page","pageSize"]))}}),de={class:"w-full bg-bg-body text-text-primary"},ce={class:"mx-auto w-full max-w-[1440px] px-5 py-10 md:px-15 md:py-20"},ue={class:"flex flex-wrap items-center justify-between gap-5"},ge={class:"flex items-center gap-3"},me={class:"mt-21 mb-8 flex items-center justify-between"},pe={class:"flex items-center gap-3"},be={key:0,class:"flex items-center justify-center py-10 text-sm text-text-secondary"},ye=N({__name:"Home",setup(C){const v=D(),c=J(),y=x(1),p=x(10),{data:h,isPending:k}=L(y,p),u=x("list"),_=o=>{u.value=o},e=T(()=>h.value.length===0);return(o,t)=>{var r;return i(),d("div",de,[a("div",ce,[a("div",ue,[t[4]||(t[4]=a("div",{class:"flex flex-col gap-1.5 max-md:gap-1"},[a("h1",{class:"text-2xl font-medium"},"Welcome to Orchit AI!"),a("p",{class:"text-sm text-text-secondary"},"Create, organize, and collaborate seamlessly.")],-1)),a("div",ge,[a("div",{to:"/create-workspace",onClick:t[0]||(t[0]=()=>{var g,w;((g=m(c).limits.features[1])==null?void 0:g.usage.current)>=((w=m(c).limits.features[1])==null?void 0:w.limits.limit)?m(c).setLimitExccedModal(!0):m(v).push("/create-workspace")})},[G(M,{variant:"primary"},{default:z(()=>t[3]||(t[3]=[H("Create a workspace")])),_:1,__:[3]})])])]),a("div",me,[t[7]||(t[7]=a("h2",{class:"text-xl font-medium"},"All Workspaces",-1)),a("div",pe,[a("button",{class:I(["aspect-square w-8 cursor-pointer rounded-md p-1",u.value==="list"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),onClick:t[1]||(t[1]=g=>_("list")),title:"List view"},t[5]||(t[5]=[a("i",{class:"fa-solid fa-align-left"},null,-1)]),2),a("button",{class:I(["aspect-square w-8 cursor-pointer rounded-md p-1",u.value==="gallery"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),onClick:t[2]||(t[2]=g=>_("gallery")),title:"Gallery view"},t[6]||(t[6]=[a("i",{class:"fa-solid fa-grid-2"},null,-1)]),2)])]),!m(k)&&e.value?(i(),d("div",be," No Workspace ")):u.value==="list"?(i(),P(ie,{key:1})):u.value==="gallery"?(i(),P(le,{key:2,projects:(r=m(h))==null?void 0:r.workspaces,loading:m(k)},null,8,["projects","loading"])):F("",!0)])])}}});export{ye as default};
