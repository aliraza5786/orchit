const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/KanbanBoard-DCuwLgh0.js","assets/index-5j6IPDxv.js","assets/index-Ce99494G.css","assets/DatePicker-CZnu33NT.js","assets/DatePicker-CaK9YdY3.css","assets/KanbanSkeleton-DPgJkG6M.js","assets/index-BhxjB58g.js","assets/KanbanSkeleton-DTreKVEl.css","assets/DropMenu.vue_vue_type_script_setup_true_lang-BgUxuv6l.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-KaxwE8u3.js","assets/BaseModal-OxeRAVmG.js","assets/cross-DvraoB0R.js","assets/BaseModal-FRlOKCB_.css","assets/AssigmentDropdown.vue_vue_type_script_setup_true_lang-BdonnKni.js","assets/useQueryParams-BeRzVyTs.js","assets/workspace-DqKY7hgm.js","assets/KanbanBoard-DJX1cgam.css"])))=>i.map(i=>d[i]);
import{D as H,E as q,N as ne,m as $,d as oe,c as ie,r as v,p as me,a as se,w as M,b as e,h as m,i as S,y as pe,a4 as ve,L as ae,f as U,F as R,v as ee,x as fe,J as ge,t as b,e as N,g as _,B as le,o as r,aC as he,I as re,j as ye,l as te,P as Ce,_ as we,aD as $e,K as Ve,M as De}from"./index-5j6IPDxv.js";import{u as Ae,D as Te,K as Se}from"./KanbanSkeleton-DPgJkG6M.js";import{_ as Pe}from"./BaseTextField.vue_vue_type_script_setup_true_lang-DHFf7hlT.js";import{a as Ue,u as qe}from"./useQueryParams-BeRzVyTs.js";import{_ as Le}from"./DropMenu.vue_vue_type_script_setup_true_lang-BgUxuv6l.js";import{_ as be}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-KaxwE8u3.js";import{B as Ee}from"./BaseModal-OxeRAVmG.js";import{g as xe}from"./index-BBhniCjd.js";import{_ as Ie}from"./BaseEmailChip.vue_vue_type_script_setup_true_lang-BZiA5hOD.js";import{_ as Ke}from"./ProgressBar.vue_vue_type_script_setup_true_lang-BCDZxTZ2.js";import{T as Me}from"./TypeChanger-BiPpOC0p.js";import{S as Ne}from"./SwitchTab-B71IshUI.js";import"./index-BhxjB58g.js";import"./info-DjaLHeD_.js";import"./cross-DvraoB0R.js";const Be=(i,l,y={})=>ne({queryKey:["people-lists",l],queryFn:({signal:h})=>q({url:`workspace/teams/${i}/people-grouped?groupBy=${$(l)}`,method:"GET",signal:h}),...y}),je=(i={})=>H({key:["add-team"]},{mutationFn:l=>q({url:"/workspace/roles",method:"POST",data:l.payload}),...i}),Fe=(i={})=>H({key:["delete-team"]},{mutationFn:l=>q({url:`/workspace/roles/${l.id}`,method:"DELETE"}),...i}),ze=(i={})=>H({key:["delete-seat"]},{mutationFn:l=>q({url:`common/team/${l.id}`,method:"DELETE"}),...i}),Oe=(i,l,y={})=>ne({queryKey:["people",l],queryFn:({signal:h})=>q({url:`workspace/people?workspace_id=${i}&company_id=${$(l)._id}`,method:"GET",signal:h}),...y}),Qe=(i={})=>H({key:["assign-team"]},{mutationFn:l=>q({url:`/common/seats/${l.id}/reassign`,method:"PUT",data:l.payload}),...i}),We=(i={})=>H({key:["unassign-team"]},{mutationFn:l=>q({url:`/common/seats/${l.id}/unassign`,method:"PUT",data:l.payload}),...i}),Ze=(i={})=>H({key:["add-team-member"]},{mutationFn:l=>q({url:`common/workspace-roles/${l.id}/seats/add`,method:"POST",data:l.payload}),...i}),He=(i={})=>ne({queryKey:["people-var"],queryFn:({signal:l})=>q({url:"/common/module-variables/filter?module=people",method:"GET",signal:l}),...i}),Re=(i={})=>H({key:["update-var"]},{mutationFn:l=>q({url:`common/seats/${l.id}/variables`,method:"PUT",data:l.payload}),...i}),Ge={class:"px-6 pb-2"},Ye={class:"relative mb-4"},Je=["onKeydown"],Xe={key:0,class:"mt-3"},et={class:"divide-y divide-border rounded-xl border border-border bg-bg-card"},tt=["onClick"],st={class:"flex items-center gap-3 min-w-0"},at={class:"min-w-0"},lt={class:"truncate font-medium leading-tight capitalize"},ot={class:"truncate text-xs text-text-secondary leading-tight"},it={key:1,class:"mt-3 flex items-center gap-2"},nt={class:"inline-flex items-center gap-2 rounded-full px-3 py-2 bg-bg-muted text-text-secondary"},rt={class:"flex items-center justify-between gap-3 p-6 mt-3 pb-2 border-t border-border bg-bg-body"},dt={class:"flex gap-2 justify-between w-full"},ut=oe({__name:"AssignmentModal",props:{modelValue:{type:Boolean,default:!1},members:{default:()=>[]},directory:{default:()=>[]},placeholder:{default:"Search people by name or email"},isSubmitting:{}},emits:["update:modelValue","submit","copy-link"],setup(i,{emit:l}){const y=i,h=l,C=ie({get:()=>y.modelValue,set:g=>h("update:modelValue",g)}),f=v(""),a=v(""),V=v(""),x=ie(()=>{const g=f.value.trim().toLowerCase();return y.directory.filter(u=>{var d;return((d=u.name)==null?void 0:d.toLowerCase().includes(g))||u.email.toLowerCase().includes(g)})}),w=g=>{a.value=g.email,f.value=""},L=()=>{a.value=""},E=()=>{f.value&&(a.value=f.value.trim(),f.value="")},B=g=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g),D=()=>{if(!a.value||!B(a.value)){V.value="Please select a valid email.";return}h("submit",{invite:{email:a.value}})},I=()=>{L(),f.value="",C.value=!1};me(()=>{C.value&&(f.value="")});function K(g){let u=0;for(let A=0;A<g.length;A++)u=u*31+g.charCodeAt(A)>>>0;return`hsl(${u%360} 80% 85%)`}return(g,u)=>(r(),se(Ee,{modelValue:C.value,"onUpdate:modelValue":u[1]||(u[1]=d=>C.value=d),size:"md"},{default:M(()=>[u[3]||(u[3]=e("div",{class:"sticky top-0 z-10 flex items-start gap-2 px-6 pb-4 mb-4 border-b border-border bg-bg-body"},[e("h2",{class:"text-xl font-semibold"},"Add team member")],-1)),e("div",Ge,[e("div",Ye,[pe(e("input",{"onUpdate:modelValue":u[0]||(u[0]=d=>f.value=d),type:"text",placeholder:"Search or add email",class:"w-full h-11 rounded-xl border border-border bg-bg-input px-3 text-sm outline-none focus:ring-2 focus:ring-primary/40",onKeydown:ae(U(E,["prevent"]),["enter"])},null,40,Je),[[ve,f.value]])]),x.value.length?(r(),m("div",Xe,[e("ul",et,[(r(!0),m(R,null,ee(x.value,d=>(r(),m("li",{key:d.id||d.email,class:fe(["flex items-center justify-between gap-3 px-3 py-3 cursor-pointer hover:bg-bg-muted",{"bg-bg-muted":a.value===d.email}]),onClick:A=>w(d)},[e("div",st,[e("div",{class:"h-9 w-9 bg-white capitalize rounded-full flex items-center justify-center text-xs font-semibold",style:ge({backgroundColor:K(d.email)})},b($(xe)(d.name||d.email)),5),e("div",at,[e("div",lt,b(d.name||d.email),1),e("div",ot,b(d.email),1)])])],10,tt))),128))])])):S("",!0),a.value?(r(),m("div",it,[e("span",nt,[N(b(a.value)+" ",1),e("button",{onClick:L,class:"ml-2 text-sm text-red-500"},"✕")])])):S("",!0)]),e("div",rt,[e("div",dt,[_(le,{variant:"secondary",onClick:I},{default:M(()=>u[2]||(u[2]=[N("Cancel")])),_:1,__:[2]}),_(le,{variant:"primary",disabled:!!(!a.value||g.isSubmitting),onClick:D},{default:M(()=>[N(b(g.isSubmitting?"Assigning…":"Assign"),1)]),_:1},8,["disabled"])])])]),_:1,__:[3]},8,["modelValue"]))}}),ct={class:"flex justify-between gap-2 items-start"},mt={class:"flex items-start gap-2"},pt={class:"w-10 aspect-square bg-bg-surface flex justify-center items-center rounded-full"},vt={key:0,class:"fa-solid fa-user text-white"},ft={class:"text-sm font-medium text-card-foreground leading-tight"},gt={class:"text-text-secondary text-xs"},yt=oe({__name:"KanbanCard",props:{ticket:{}},setup(i){const l=v(!1),y=i,{workspaceId:h}=Ue(),{data:C}=he(),{data:f}=Oe(h.value,C),a=v([]),V=v(!1),x=re();function w(){return[{label:"Assign User",danger:!0,action:()=>{l.value=!0},icon:{prefix:"fa-regular",iconName:"fa-user-plus"}},...y.ticket.name?[{label:"UnAssign User",danger:!0,action:()=>{A()},icon:{prefix:"fa-regular",iconName:"fa-user-minus"}}]:[],{label:"Delete Seat",danger:!0,action:()=>{V.value=!0},icon:{prefix:"fa-regular",iconName:"fa-trash"}}]}const L=()=>{},{mutate:E,isPending:B}=ze({onSuccess:()=>{x.invalidateQueries({queryKey:["people-lists"]})}}),D=()=>{E({id:y.ticket._id})},{mutate:I,isPending:K}=Qe({onSuccess:()=>{l.value=!1,x.invalidateQueries({queryKey:["people-lists"]})}});function g(n){const P=(n.split("@")[0]||"").split("+")[0].split(/[^a-zA-Z]+/).filter(Boolean);return P.length?P.map(T=>T.charAt(0).toUpperCase()+T.slice(1).toLowerCase()).join(" "):n}const{mutate:u}=We({onSuccess:()=>{l.value=!1,x.invalidateQueries({queryKey:["people-lists"]})}});function d(n){I({id:y.ticket._id,payload:{name:g(n.email),email:n.email}})}function A(){u({id:y.ticket._id})}return(n,t)=>{var T,j,F,z,O,Q,W,c;const P=ye("AssigmentDropdown");return r(),m(R,null,[e("div",{onClick:t[2]||(t[2]=k=>n.$emit("click")),class:"bg-bg-card rounded-lg p-4 shadow-sm cursor-grab hover:shadow-md transition-all duration-200 active:cursor-grabbing",style:ge({borderColor:(j=(T=n.ticket)==null?void 0:T.lane)==null?void 0:j.variables["lane-color"]})},[e("div",ct,[e("div",mt,[e("div",pt,[N(b($(xe)((F=n.ticket)==null?void 0:F.name))+" ",1),(z=n.ticket)!=null&&z.name?S("",!0):(r(),m("i",vt))]),e("div",null,[e("h3",ft,b(((O=n.ticket)==null?void 0:O.name)??n.ticket.title??"Team Member "),1),e("p",gt,b(((Q=n.ticket)==null?void 0:Q.role)??"e.g. Node Developer"),1)])]),_(Le,{onClick:t[0]||(t[0]=U(()=>{},["stop"])),items:w()},{trigger:M(()=>t[8]||(t[8]=[e("i",{class:"cursor-pointer fa-solid fa-ellipsis"},null,-1)])),_:1},8,["items"])]),e("div",{onClick:t[1]||(t[1]=U(()=>{},["stop"]))},[_(P,{users:a.value,onAssign:L,assigneeId:n.ticket.assigned_to},null,8,["users","assigneeId"])])],4),_(be,{onClick:t[3]||(t[3]=U(()=>{},["stop"])),modelValue:V.value,"onUpdate:modelValue":t[4]||(t[4]=k=>V.value=k),title:"Delete Team seat",itemLabel:"Seat",itemName:n.ticket.title,requireMatchText:n.ticket.title,confirmText:"Delete Seat",cancelText:"Cancel",size:"md",loading:$(B),onConfirm:D,onCancel:t[5]||(t[5]=()=>{V.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),_(ut,{isSubmitting:$(K),modelValue:l.value,"onUpdate:modelValue":t[6]||(t[6]=k=>l.value=k),members:(W=$(f))==null?void 0:W.people,directory:(c=$(f))==null?void 0:c.people,onSubmit:t[7]||(t[7]=({invite:k})=>d(k))},null,8,["isSubmitting","modelValue","members","directory"])],64)}}}),bt="data:image/svg+xml,%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_82_2990)'%3e%3crect%20width='48'%20height='48'%20rx='24'%20fill='%23798A99'/%3e%3cg%20opacity='0.08'%3e%3crect%20x='0.6'%20y='0.6'%20width='46.8'%20height='46.8'%20rx='23.4'%20stroke='black'%20stroke-width='1.2'/%3e%3c/g%3e%3cpath%20d='M24%2027.0596C26.5526%2027.0596%2029.0007%2026.0556%2030.8057%2024.2684C32.6107%2022.4812%2033.6247%2020.0573%2033.6247%2017.5298C33.6247%2015.0023%2032.6107%2012.5784%2030.8057%2010.7912C29.0007%209.00403%2026.5526%208%2024%208C21.4474%208%2018.9993%209.00403%2017.1943%2010.7912C15.3893%2012.5784%2014.3753%2015.0023%2014.3753%2017.5298C14.3753%2020.0573%2015.3893%2022.4812%2017.1943%2024.2684C18.9993%2026.0556%2021.4474%2027.0596%2024%2027.0596ZM24%2031.2465C11.2034%2031.2465%203%2038.2387%203%2041.643V48H45V41.643C45%2037.526%2037.2338%2031.2465%2024%2031.2465Z'%20fill='white'%20fill-opacity='0.6'/%3e%3cpath%20d='M24%2014C22.8971%2014%2022%2014.9158%2022%2016.0417C22%2016.3642%2022.2554%2016.625%2022.5714%2016.625C22.8874%2016.625%2023.1429%2016.3642%2023.1429%2016.0417C23.1429%2015.5592%2023.5274%2015.1667%2024%2015.1667C24.4726%2015.1667%2024.8571%2015.5592%2024.8571%2016.0417C24.8571%2016.5241%2024.4726%2016.9167%2024%2016.9167C23.684%2016.9167%2023.4286%2017.1774%2023.4286%2017.5V18.6667C23.4286%2018.9892%2023.684%2019.25%2024%2019.25C24.316%2019.25%2024.5714%2018.9892%2024.5714%2018.6667V17.9882C25.3943%2017.7351%2026%2016.9633%2026%2016.0417C26%2014.9158%2025.1029%2014%2024%2014Z'%20fill='white'%20fill-opacity='0.7'/%3e%3cpath%20d='M24%2019.8333C23.684%2019.8333%2023.4286%2020.0941%2023.4286%2020.4167C23.4286%2020.7392%2023.684%2021%2024%2021C24.316%2021%2024.5714%2020.7392%2024.5714%2020.4167C24.5714%2020.0941%2024.316%2019.8333%2024%2019.8333Z'%20fill='white'%20fill-opacity='0.7'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_82_2990'%3e%3crect%20width='48'%20height='48'%20rx='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",xt={class:"py-4 flex justify-between items-center border-b border-border px-5 sticky top-0 bg-bg-card z-1"},_t={class:"py-4 px-5"},kt={class:"bg-bg-surface/50 p-2 rounded-lg flex gap-2"},ht={class:"text-base font-medium text-text-primary cursor-pointer"},Ct={class:"flex flex-col mt-2"},wt={class:"text-sm text-text-secondary mt-2"},$t={key:0},Vt={class:"mb-2 capitalize"},Dt=["onKeydown"],At={key:1,class:"mt-3"},Tt={key:0,class:"border border-border space-y-1 p-2.5 mt-1 rounded-lg"},St={class:"text-sm text-text-primary"},Pt={key:2,class:"mt-3"},Ut={key:0,class:"border border-border space-y-1 p-2.5 mt-1 rounded-lg"},qt={class:"text-sm text-text-primary"},Lt=oe({__name:"DetailPanel",props:{showPanel:{type:Boolean,default:!0},details:{type:Object,default:()=>({})}},emits:["close","update:details","comment:post","priority:change"],setup(i,{emit:l}){const y=v("details"),h=[{label:"Details",value:"details"},{label:"Tasks",value:"tasks"},{label:"History",value:"history"}],{data:C}=He(),{mutate:f}=Re(),a=i,V=v(!1),x=v(a.details["card-title"]??""),w=v(a.details.workspace_lane_id??"");te(()=>a.details["card-title"],n=>{x.value=n,w.value=a.details.workspace_lane_id});const L=v(a.details["card-description"]);te(()=>a.details,()=>{L.value=a.details["card-description"]});const E=v(null);function B(){V.value=!0,Ce(()=>{var n,t;(n=E.value)==null||n.focus(),(t=E.value)==null||t.select()})}function D(){x.value.trim()||(x.value=a.details["card-title"]??""),d.mutate({card_id:a.details._id,variables:{"card-title":x.value.trim()}}),V.value=!1}function I(){x.value=a.details["card-title"]??"",V.value=!1}const K=v({startDate:a.details["start-date"],endDate:a.details["end-date"]}),g=ie(()=>a.details["start-date"]);te(g,n=>{K.value={...K.value,startDate:n}});const u=re(),d=Ae({onSuccess:()=>{u.invalidateQueries({queryKey:["get-sheets"]}),u.invalidateQueries({queryKey:["sheet-list"]}),u.invalidateQueries({queryKey:["roles"]})}}),A=(n,t)=>{console.log(t,"slug",n),f({id:a.details._id,payload:{variable_values:[{module_variable_id:t,value:n}]}})};return(n,t)=>{var P,T,j,F,z,O,Q,W;return r(),m("div",{class:fe(`max-w-[358px] bg-bg-card  rounded-lg overflow-y-auto overflow-x-hidden relative ${i.showPanel?"!translate-x-0 w-full h-full min-w-[350px] overflow-y-auto":"!translate-x-100 w-0 h-0"} transition-all`)},[e("div",xt,[t[4]||(t[4]=e("h5",{class:"text-[16px] font-medium"},"Profile",-1)),e("i",{class:"cursor-pointer text-text-primary fa-solid fa-close",onClick:t[0]||(t[0]=()=>{n.$emit("close")})})]),e("div",_t,[e("div",kt,[t[5]||(t[5]=e("img",{src:bt,alt:"",class:"w-12 h-12 rounded-full"},null,-1)),e("div",null,[e("h1",ht,b(a.details.name??a.details.title),1)])]),_(Ne,{modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=c=>y.value=c),options:h},null,8,["modelValue"]),e("div",Ct,[t[6]||(t[6]=e("h1",{class:"text-base font-medium text-text-primary cursor-pointer"}," Task Progress ",-1)),_(Ke,{class:"mt-2",progress:(P=a==null?void 0:a.details)==null?void 0:P.assigned_cards_count,fillColor:"bg-accent ",indeterminate:!0},null,8,["progress"]),e("span",wt,"Completed 10 tasks out of "+b((T=a==null?void 0:a.details)==null?void 0:T.assigned_cards_count),1)]),y.value=="details"?(r(),m("section",$t,[e("div",Vt,[V.value?pe((r(),m("input",{key:0,ref_key:"titleInput",ref:E,"onUpdate:modelValue":t[2]||(t[2]=c=>x.value=c),onBlur:D,onKeydown:[ae(U(D,["prevent"]),["enter"]),ae(U(I,["prevent"]),["esc"])],class:"border border-border rounded px-2 py-1 w-full text-xl font-medium",type:"text"},null,40,Dt)),[[ve,x.value]]):(r(),m("h1",{key:1,class:"text-xl font-medium text-text-primary cursor-pointer",onClick:B},b(x.value),1))]),e("div",null,[(r(!0),m(R,null,ee($(C),(c,k)=>{var J;return r(),m("div",{key:k,class:"grid grid-cols-2 capitalize items-center gap-2 text-sm mt-4"},[N(b(c.title)+" ",1),(r(),se(Me,{key:k,placeholder:`select ${c.title}`,onClick:t[3]||(t[3]=U(()=>{},["stop"])),default:(c==null?void 0:c.value)??`select ${c.title}`,data:c==null?void 0:c.data,cardId:(J=i.details)==null?void 0:J._id,onOnselect:X=>A(X,c._id)},null,8,["placeholder","default","data","cardId","onOnselect"]))])}),128))])])):S("",!0),y.value=="tasks"?(r(),m("section",At,[t[8]||(t[8]=e("span",{class:"text-base text-text-primary"},"Worked On",-1)),((F=(j=i.details)==null?void 0:j.assigned_cards)==null?void 0:F.length)>0?(r(),m("ul",Tt,[(r(!0),m(R,null,ee((z=i.details)==null?void 0:z.assigned_cards,(c,k)=>(r(),m("li",{class:"p-2",key:k},[e("h1",St,b(c==null?void 0:c.title),1),t[7]||(t[7]=e("p",{class:"text-xs text-text-secondary"},"Design Project . Olivia Updated on April 9, 2025",-1))]))),128))])):S("",!0)])):S("",!0),y.value=="history"?(r(),m("section",Pt,[t[10]||(t[10]=e("span",{class:"text-base text-text-primary"},"history",-1)),((Q=(O=i.details)==null?void 0:O.assignment_history)==null?void 0:Q.length)>0?(r(),m("ul",Ut,[(r(!0),m(R,null,ee((W=i.details)==null?void 0:W.assignment_history,(c,k)=>(r(),m("li",{class:"p-2",key:k},[e("h1",qt,b(c==null?void 0:c.title),1),t[9]||(t[9]=e("p",{class:"text-xs text-text-secondary"},"Design Project . Olivia Updated on April 9, 2025",-1))]))),128))])):S("",!0)])):S("",!0)])],2)}}}),Et=we(Lt,[["__scopeId","data-v-a156ffdc"]]),It={class:"flex-auto flex-grow h-full bg-bg-card rounded-lg border border-border overflow-x-auto flex-col flex"},Kt={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1"},Mt={class:"flex gap-3 items-center"},Nt={key:1,class:"flex p-4 overflow-x-auto gap-3"},Bt=["onClick"],jt={key:1,class:"p-4 space-y-2 bg-bg-surface m-4 rounded-md"},Ft={class:"text-sm text-text-primary"},zt=["onClick"],Ot={key:0,class:"bg-bg-body rounded-lg p-4"},Qt={class:"flex items-center mt-3 gap-3"},ns=oe({__name:"People",setup(i){const l=Ve(()=>De(()=>import("./KanbanBoard-DCuwLgh0.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))),y=[{title:"Role",_id:"role"},{title:"Team",_id:"team"},{title:"Status",_id:"status"}],h=v("role"),C=v(!1),f=v(),{workspaceId:a}=qe(),{mutate:V,isPending:x}=je({onSuccess:s=>{w.value=[...w.value||[],s],d.value="",u.value=!1}}),w=v([]),{data:L,isPending:E}=Be(a.value,h);te(L,s=>{w.value=s}),me(()=>{w.value=L.value});const B=v("kanban"),D=v(),I=s=>{D.value=s};function K(s){s.type==="column"||T.mutate({id:s.meta.moved._id,payload:{roleId:s.meta.toColumnId}})}const g=s=>{},u=v(!1),d=v("");function A(){u.value=!u.value}function n(){const s=d.value.trim();s&&t(s)}const t=s=>{const o={workspace_id:a.value,title:s,max_num_people:1};V({payload:o})},P=re(),T=$e({onSuccess:()=>{P.invalidateQueries({queryKey:["people-lists"]})}}),j=s=>{const o={workspace_id:a.value,title:s==null?void 0:s.title,max_num_people:1};T.mutate({id:s._id,payload:o})},{mutate:F,isPending:z}=Fe({onSuccess:s=>{C.value=!1,w.value=w.value.filter(o=>{var Z;return o._id!==((Z=s.deletedRole)==null?void 0:Z._id)})}}),O=()=>{var s;F({id:(s=f.value)==null?void 0:s.columnId})},Q=s=>{C.value=!0,f.value=s},{mutate:W,isPending:c}=Ze({onSuccess:()=>{d.value="",u.value=!1,P.invalidateQueries({queryKey:["people-lists"]})}}),k=s=>{f.value=s;const o={name:J(s.email[0]),email:s.email[0],role_id:s._id,workspace_id:a.value,additional_seats:1};W({id:s._id,payload:o})};function J(s){const Z=(s.split("@")[0]||"").split("+")[0].split(/[^a-zA-Z]+/).filter(Boolean);return Z.length?Z.map(G=>G.charAt(0).toUpperCase()+G.slice(1).toLowerCase()).join(" "):s}const X=s=>{s.showADDNEW=!s.showADDNEW},_e=s=>{k(s)},ke=s=>{D.value=s};return(s,o)=>{var G,de,ue,ce;const Z=ye("Searchbar");return r(),m(R,null,[e("div",It,[e("div",Kt,[_(Te,{prefix:"View By",modelValue:h.value,"onUpdate:modelValue":o[0]||(o[0]=p=>h.value=p),options:y,variant:"secondary"},null,8,["modelValue"]),e("div",Mt,[_(Z,{placeholder:"Search in Orchit AI space"})])]),$(E)?(r(),se(Se,{key:0})):B.value=="kanban"?(r(),m("div",Nt,[((G=w.value)==null?void 0:G.length)>0?(r(),se($(l),{key:0,onOnPlus:o[1]||(o[1]=p=>k(p)),"onDelete:column":o[2]||(o[2]=p=>Q(p)),"onUpdate:column":o[3]||(o[3]=p=>j(p)),onReorder:K,onAddColumn:t,"onSelect:ticket":I,board:w.value,onOnBoardUpdate:g,variable_id:"",sheet_id:"selected_sheet_id"},{ticket:M(({ticket:p})=>[_(yt,{onClick:Y=>ke(p),ticket:p},null,8,["onClick","ticket"])]),"column-footer":M(({column:p})=>[p.showADDNEW?p.showADDNEW?(r(),m("div",jt,[e("p",Ft,b(p.title)+" "+b(p.cards.length+1),1),_(Ie,{placeholder:"team member email",modelValue:p.email,"onUpdate:modelValue":Y=>p.email=Y},null,8,["modelValue","onUpdate:modelValue"]),o[11]||(o[11]=e("p",{class:"text-sm text-text-secondary"},"You can assign user later",-1)),_(le,{size:"md",onClick:Y=>_e(p)},{default:M(()=>[N(b($(c)?"Adding...":"Add Seat"),1)]),_:2},1032,["onClick"]),e("i",{class:"fa-solid fa-close cursor-pointer ml-2",onClick:Y=>X(p)},null,8,zt)])):S("",!0):(r(),m("div",{key:0,onClick:Y=>X(p),class:"flex py-3 px-3 justify-center text-sm text-text-primary items-center gap-3 border border-text-primary cursor-pointer border-dashed mb-4 mx-4 rounded-md"},o[10]||(o[10]=[e("i",{class:"fa-solid fa-plus"},null,-1),N(" Add Seat ")]),8,Bt))]),_:1},8,["board"])):S("",!0),e("div",{class:"min-w-[328px]",onClick:o[5]||(o[5]=U(()=>{},["stop"]))},[u.value?(r(),m("div",Ot,[_(Pe,{autofocus:!0,modelValue:d.value,"onUpdate:modelValue":o[4]||(o[4]=p=>d.value=p),placeholder:"Add New list",onKeyup:ae(n,["enter"])},null,8,["modelValue"]),o[12]||(o[12]=e("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),e("div",Qt,[_(le,{onClick:n,variant:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:M(()=>[N(b($(x)?"Adding...":"Add Team"),1)]),_:1}),e("i",{class:"fa-solid fa-close cursor-pointer",onClick:A})])])):(r(),m("button",{key:1,class:"text-sm text-text-primary py-2.5 cursor-pointer font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",onClick:U(A,["stop"])}," + Add Team "))])])):S("",!0)]),_(be,{onClick:o[6]||(o[6]=U(()=>{},["stop"])),modelValue:C.value,"onUpdate:modelValue":o[7]||(o[7]=p=>C.value=p),title:"Delete List",itemLabel:"list",itemName:(de=f.value)==null?void 0:de.title,requireMatchText:(ue=f.value)==null?void 0:ue.title,confirmText:"Delete workspace",cancelText:"Cancel",size:"md",loading:$(z),onConfirm:O,onCancel:o[8]||(o[8]=()=>{C.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),_(Et,{details:D.value,onClose:o[9]||(o[9]=()=>{I({variables:{}})}),showPanel:!!((ce=D.value)!=null&&ce.title)},null,8,["details","showPanel"])],64)}}});export{ns as default};
