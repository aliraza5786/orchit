const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-D4MKn5vp.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-CEaIcU3K.js","assets/index-CVdepxGv.js","assets/index-BBeD7BdB.css","assets/CreateSheetModal-BAkKmMfV.js","assets/IconPicker-BGEEOuLZ.js","assets/IconPicker-CIMr_3tu.css","assets/AudioRecorder.vue_vue_type_script_setup_true_lang-BXgW_sgf.js","assets/CreateSheetModal--7RYCgy-.css","assets/CreateVariableModal-DTqf1fqG.js","assets/ConfirmDeleteModal-D3Kxkw7Z.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-CmN4Y1lP.js","assets/SidePanel-BtojKexA.js","assets/SidePanel-ZGAQd-P6.css","assets/KanbanBoard-ITnNL55W.js","assets/lodash-B3d4OLnQ.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-wykwBgHR.js","assets/KanbanBoard-CCl7J72V.css"])))=>i.map(i=>d[i]);
import{d as Tt,S as It,n as Ae,r as P,c as se,l as O,h as E,F as me,y as je,m as ne,j as ge,i as Me,o as S,a9 as Ye,t as de,C as ft,J as Vt,N as Ft,e as Ce,aU as Do,ai as vt,at as ae,v as qt,an as En,z as nt,ac as rt,aV as Sn,U as Ln,K as Tn,aK as $o,p as H,b3 as Pt,O as Ht,L as Oo,Z as Io,a0 as Vo,a3 as Po,u as Ho,af as Bo,bg as Ro,a4 as Yo,a5 as Fo,ag as qo,$ as Wo,ad as Uo,a1 as Ko,bh as Zo,bi as Xo,k as pe,w as Ge,D as nn,_ as on,B as sn,R as rn,T as Se,bj as ln,q as Go,a6 as Je,a7 as Qe,X as Jo,bk as an,I as Qo}from"./index-CVdepxGv.js";import{D as dn,K as ei}from"./Dropdown-RP-qMgtG.js";import{_ as ti}from"./SearchBar.vue_vue_type_script_setup_true_lang-DN1ooQvR.js";import{K as ni}from"./KanbanTicket-q5FIE-zG.js";import{F as cn}from"./fuse-Ch1WBRTM.js";import{l as oi}from"./lodash-B3d4OLnQ.js";import"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-CmN4Y1lP.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-wykwBgHR.js";const ii={class:"kanban-table space-y-4 px-4 h-[85vh] mt-4 overflow-y-auto"},si={class:"w-full table-fixed border-collapse rounded-[6px] shadow-sm bg-bg-body/20 text-sm border border-border/60"},ri={class:"bg-bg-surface border-b border-border sticky top-[-1px] z-10"},li={class:"text-text-secondary"},ai=["onMousedown"],di={class:"w-10 p-2 text-center relative"},ci={class:"relative inline-block"},ui={key:0,class:"column-menu absolute w-[200px] -right-1 bg-bg-dropdown border border-border rounded shadow z-50"},pi=["checked","onChange"],mi={class:"bg-bg-surface/20"},hi=["colspan"],fi=["onClick"],vi=["colspan"],gi=["onMouseenter"],bi=["colspan"],yi=["onUpdate:modelValue","onBlur"],xi=["colspan"],wi=Tt({__name:"TableView",props:{columns:{},rows:{},isPending:{type:Boolean},canCreate:{type:Boolean,default:!0},canCreateVariable:{type:Boolean,default:!0}},emits:["update:rows","create","toggleVisibility","addVar"],setup(e,{emit:t}){const n=e,o=t,i=It(n.rows||[]);Ae(()=>n.rows,w=>{w&&i.splice(0,i.length,...w)});const s=It({id:null,field:""}),r=P(null),a=P(null),d=se(()=>i.some(w=>s.id===w.id&&!w[s.field])),p=(w,M)=>{s.id=w.id,s.field=M,vt(()=>{var _;return(_=a.value)==null?void 0:_.focus()})},u=()=>{s.id=null,s.field=""},f=w=>{var M;if(!((M=w[s.field])!=null&&M.trim())){const _=i.findIndex(J=>J.id===w.id);_!==-1&&i.splice(_,1)}u(),o("update:rows",i.slice()),o("create",w)},m=w=>{var _;const M={id:Date.now()};n.columns.forEach(J=>M[J.key]=""),i.splice(w,0,M),p(M,((_=n.columns[0])==null?void 0:_.key)||""),r.value=null,o("update:rows",i.slice())};function y(w,M){if(!(!w||!M))return M.includes(".")?M.split(".").reduce((_,J)=>_==null?_:_[J],w):w[M]}function x(w,M){return M!=null&&M.accessor?M.accessor(w):y(w,M.key)}const v=w=>{var _;const M=x(w.row,w.column);return(_=w.column)!=null&&_.render?w.column.render({row:w==null?void 0:w.row,column:w==null?void 0:w.column,value:M,index:w==null?void 0:w.index}):ae("span",String(M??""))},h=It({});Ae(()=>n.columns,w=>{w.forEach((M,_)=>{_==0?h[M.key]=250:_==3?h[M.key]=100:h[M.key]||(h[M.key]=150)})},{immediate:!0});let b=null,$=0,A=0;const j=(w,M)=>{b=M,$=w.clientX,A=h[M],document.addEventListener("mousemove",I),document.addEventListener("mouseup",C)},I=w=>{if(!b)return;const M=w.clientX-$,_=Math.max(80,A+M);h[b]=_},C=()=>{b=null,document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",C)};document.addEventListener("click",w=>{w.target.closest(".column-menu")||(D.value=!1)});const T=P(n.columns.filter(w=>w.visible??!0).map(w=>w.key)),k=se(()=>n.columns.filter(w=>T.value.includes(w.key))),D=P(!1);document.addEventListener("click",w=>{w.target.closest(".column-menu")||(D.value=!1)});const G=w=>{const M=T.value.indexOf(w);M===-1?(o("toggleVisibility",w,!0),T.value.push(w)):(o("toggleVisibility",w,!1),T.value.splice(M,1))};return(w,M)=>(S(),O("div",ii,[E("table",si,[E("thead",ri,[E("tr",li,[M[8]||(M[8]=E("th",{class:"w-2 p-0"},null,-1)),(S(!0),O(me,null,je(k.value,_=>(S(),O("th",{key:_==null?void 0:_.key,class:"relative font-bold p-2 uppercase text-left text-[11px] tracking-wide border-r border-border/40 select-none whitespace-nowrap min-w-[200px]",style:Ye({width:h[_.key]?h[_.key]+"px":"100%"})},[E("span",null,de(_==null?void 0:_.label),1),E("div",{class:"absolute right-0 top-0 h-full w-2 cursor-col-resize z-30 hover:bg-accent/20 active:bg-accent/40 transition",onMousedown:J=>j(J,_.key)},null,40,ai)],4))),128)),E("th",di,[E("div",ci,[E("button",{onClick:M[0]||(M[0]=ge(_=>D.value=!D.value,["stop"])),class:"p-1 rounded hover:bg-bg-surface/50 cursor-pointer"},M[6]||(M[6]=[E("i",{class:"fa-regular fa-columns-3"},null,-1)])),D.value?(S(),O("div",ui,[(S(!0),O(me,null,je(n.columns,_=>(S(),O("div",{key:"toggle-"+_.key,class:"flex items-center space-x-2 px-3 py-1.5 capitalize font-medium cursor-pointer hover:bg-bg-dropdown-menu-hover text-[12px] text-text-primary gap-2"},[E("input",{type:"checkbox",checked:T.value.includes(_.key),onChange:J=>G(_.key),class:"h-4 w-4 mt-0.5 rounded border-border accent-accent cursor-pointer flex-shrink-0"},null,40,pi),E("span",null,de(_.label),1)]))),128)),w.canCreateVariable?(S(),O("div",{key:0,onClick:M[1]||(M[1]=_=>o("addVar")),class:"sticky bottom-0 bg-bg-dropdown shadow-md mt-2 shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},M[7]||(M[7]=[E("i",{class:"fa-solid fa-plus"},null,-1),Me(" Add new ")]))):ne("",!0)])):ne("",!0)])])])]),E("tbody",mi,[w.isPending?(S(),O(me,{key:0},je(5,_=>E("tr",{key:"sk-"+_,class:"border-b border-border animate-pulse"},[M[10]||(M[10]=E("td",null,[E("div",{class:"w-4 h-4 bg-bg-surface rounded"})],-1)),(S(!0),O(me,null,je(w.columns,(J,we)=>(S(),O("td",{key:J.key,class:"border-r border-border",style:Ye({width:h[J.key]+"px"}),colspan:we===k.value.length-1?2:1},M[9]||(M[9]=[E("div",{class:"w-full h-4 bg-bg-surface rounded"},null,-1)]),12,hi))),128))])),64)):(S(!0),O(me,{key:1},je(i,(_,J)=>{var we;return S(),O(me,{key:_==null?void 0:_.id},[r.value===J&&!d.value?(S(),O("tr",{key:0,class:"relative bg-bg-surface/20 transition-all cursor-pointer border border-accent",onMouseleave:M[2]||(M[2]=Y=>r.value=null)},[E("td",{class:"!p-0 w-8",onClick:Y=>m(J)},M[11]||(M[11]=[E("span",{class:"absolute left-[-6px] top-[-6px] bg-bg-surface border border-border w-6 h-6 text-sm rounded-md flex justify-center items-center shadow-sm hover:bg-bg-surface/70"},"+",-1)]),8,fi),E("td",{class:"!p-0",colspan:(we=w.columns)==null?void 0:we.length},null,8,vi)],32)):ne("",!0),E("tr",{onMouseenter:Y=>r.value=J,class:"border-b border-border hover:bg-bg-surface/40 transition-colors"},[M[12]||(M[12]=E("td",null,null,-1)),(S(!0),O(me,null,je(k.value,(Y,Fe)=>(S(),O("td",{key:Y==null?void 0:Y.key,class:"border-r border-border overflow-visible relative",style:Ye({width:h[Y.key]+"px"}),colspan:Fe===k.value.length-1?2:1},[(s==null?void 0:s.id)===(_==null?void 0:_.id)&&(s==null?void 0:s.field)===(Y==null?void 0:Y.key)?ft((S(),O("input",{key:0,"onUpdate:modelValue":ye=>_[Y==null?void 0:Y.key]=ye,onBlur:ye=>f(_),class:"w-full p-1 border border-border/60 rounded-sm focus:outline-none focus:ring-2 focus:ring-blue-300 bg-bg-surface",ref_for:!0,ref:ye=>ye&&(s==null?void 0:s.id)===(_==null?void 0:_.id)&&(s==null?void 0:s.field)===(Y==null?void 0:Y.key)&&(a.value=ye)},null,40,yi)),[[Ft,_[Y==null?void 0:Y.key]]]):Vt(w.$slots,Y.key,{key:2,row:_,column:Y,index:`r-${_._id}`},()=>[(S(),Ce(Do(v),{row:_,column:Y,index:_._id},null,8,["row","column","index"]))])],12,bi))),128))],40,gi)],64)}),128)),!d.value&&w.canCreate?(S(),O("tr",{key:2,onClick:M[3]||(M[3]=_=>m(i==null?void 0:i.length)),class:"sticky bottom-0 bg-bg-surface border-t border-border cursor-pointer transition hover:bg-bg-surface/70",onMouseenter:M[4]||(M[4]=_=>r.value=i==null?void 0:i.length),onMouseleave:M[5]||(M[5]=_=>r.value=null)},[E("td",{colspan:w.columns.length,class:"text-text-secondary"},M[13]||(M[13]=[E("span",{class:"inline-flex w-5 h-5 border border-border rounded-full justify-center items-center text-secondary hover:bg-bg-surface/50 transition"},"+",-1),Me(" Add New Row ")]),8,xi)],32)):ne("",!0)])])]))}});(function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".mind-elixir{--gap: 30px;--root-radius: 30px;--main-radius: 20px;--root-color: #ffffff;--root-bgcolor: #4c4f69;--main-color: #444446;--main-bgcolor: #ffffff;--topic-padding: 3px;--color: #777777;--bgcolor: #f6f6f6;--selected: #4dc4ff;--panel-color: #444446;--panel-bgcolor: #ffffff;--panel-border-color: #eaeaea;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif}.mind-elixir .hyper-link{text-decoration:none;margin-left:.3em}.map-container{-webkit-user-select:none;user-select:none;height:100%;width:100%;overflow:scroll;font-size:15px}.map-container *{box-sizing:border-box}.map-container::-webkit-scrollbar{width:0px;height:0px}.map-container .selected{box-shadow:0 0 0 2px var(--selected)}.map-container .lhs{direction:rtl}.map-container .lhs me-tpc{direction:ltr}.map-container .map-canvas{height:20000px;width:20000px;position:relative;-webkit-user-select:none;user-select:none;transition:transform .3s;transform:scale(1);background-color:var(--bgcolor)}.map-container .map-canvas me-nodes{position:absolute;display:flex;justify-content:center;align-items:center;height:fit-content;width:fit-content}.map-container .map-canvas me-root{position:relative}.map-container .map-canvas me-root me-tpc{display:block;font-size:25px;color:var(--root-color);padding:10px var(--gap);border-radius:var(--root-radius);white-space:pre-wrap;background-color:var(--root-bgcolor)}.map-container .map-canvas me-root me-tpc #input-box{padding:10px var(--gap)}.map-container me-main>me-wrapper{position:relative;margin:45px 65px}.map-container me-main>me-wrapper>me-parent{margin:10px;padding:0}.map-container me-main>me-wrapper>me-parent>me-tpc{border-radius:var(--main-radius);background-color:var(--main-bgcolor);border:2px solid var(--main-color);color:var(--main-color);padding:8px 25px}.map-container me-main>me-wrapper>me-parent>me-tpc #input-box{padding:8px 25px}.map-container me-wrapper{display:block;pointer-events:none;width:fit-content}.map-container me-children,.map-container me-parent{display:inline-block;vertical-align:middle}.map-container me-parent{position:relative;cursor:pointer;padding:6px var(--gap);margin-top:10px}.map-container me-parent me-tpc{position:relative;display:block;border-radius:3px;color:var(--color);pointer-events:all;max-width:35em;white-space:pre-wrap;padding:var(--topic-padding)}.map-container me-parent me-tpc .insert-preview{position:absolute;width:100%;left:0;z-index:9}.map-container me-parent me-tpc .show{background:#7ad5ff;pointer-events:none;opacity:.7}.map-container me-parent me-tpc .before{height:14px;top:-14px}.map-container me-parent me-tpc .in{height:100%;top:0}.map-container me-parent me-tpc .after{height:14px;bottom:-14px}.map-container me-parent me-epd{position:absolute;height:18px;width:18px;opacity:.8;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NDcxNzI0MiIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNDgwaC0xMzguNjY2NjY3VjM0MS4zMzMzMzNjMC0xNy4wNjY2NjctMTQuOTMzMzMzLTMyLTMyLTMycy0zMiAxNC45MzMzMzMtMzIgMzJ2MTM4LjY2NjY2N0gzNDEuMzMzMzMzYy0xNy4wNjY2NjcgMC0zMiAxNC45MzMzMzMtMzIgMzJzMTQuOTMzMzMzIDMyIDMyIDMyaDEzOC42NjY2NjdWNjgyLjY2NjY2N2MwIDE3LjA2NjY2NyAxNC45MzMzMzMgMzIgMzIgMzJzMzItMTQuOTMzMzMzIDMyLTMydi0xMzguNjY2NjY3SDY4Mi42NjY2NjdjMTcuMDY2NjY3IDAgMzItMTQuOTMzMzMzIDMyLTMycy0xNC45MzMzMzMtMzItMzItMzJ6Ij48L3BhdGg+Cjwvc3ZnPg==);background-repeat:no-repeat;background-size:contain;background-position:center;pointer-events:all;z-index:9}.map-container me-parent me-epd.minus{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NTU2NDk4NSIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNTQ0SDM0MS4zMzMzMzNjLTE3LjA2NjY2NyAwLTMyLTE0LjkzMzMzMy0zMi0zMnMxNC45MzMzMzMtMzIgMzItMzJoMzQxLjMzMzMzNGMxNy4wNjY2NjcgMCAzMiAxNC45MzMzMzMgMzIgMzJzLTE0LjkzMzMzMyAzMi0zMiAzMnoiPjwvcGF0aD4KPC9zdmc+)!important;transition:opacity .3s;opacity:0}.map-container me-parent me-epd.minus:hover{opacity:.8}.map-container .icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}.map-container .lines,.map-container .summary,.map-container .subLines,.map-container .topiclinks,.map-container .linkcontroller{position:absolute;height:102%;width:100%;top:0;left:0}.map-container .topiclinks,.map-container .linkcontroller,.map-container .summary{pointer-events:none}.map-container .topiclinks text,.map-container .linkcontroller text,.map-container .summary text{pointer-events:all}.map-container .topiclinks .selected,.map-container .linkcontroller .selected,.map-container .summary .selected{pointer-events:none}.map-container .lines,.map-container .subLines{pointer-events:none;z-index:-1}.map-container .topiclinks *,.map-container .linkcontroller *{z-index:100}.map-container .topiclinks g{cursor:pointer}.map-container #input-box{position:absolute;top:0;left:0;padding:var(--topic-padding);color:var(--color);background-color:var(--bgcolor);width:max-content;max-width:35em;z-index:11;direction:ltr;-webkit-user-select:auto;user-select:auto;pointer-events:all}.map-container me-tpc>*{pointer-events:none}.map-container me-tpc>img{display:block;margin-bottom:8px;object-fit:cover}.map-container me-tpc>.text{display:inline-block}.map-container .circle{position:absolute;height:10px;width:10px;margin-top:-5px;margin-left:-5px;border-radius:100%;background:#757575;border:2px solid #ffffff;cursor:pointer}.map-container .tags{direction:ltr}.map-container .tags span{display:inline-block;border-radius:3px;padding:2px 4px;background:#d6f0f8;color:#276f86;margin:2px 3px 0 0;font-size:12px;line-height:1.3em}.map-container .icons{display:inline-block;direction:ltr;margin-right:10px}.map-container .icons span{display:inline-block;line-height:1.3em}.map-container .mind-elixir-ghost{position:fixed;top:-100%;left:-100%;box-sizing:content-box;opacity:.5;background-color:#f6f6f6;max-width:200px;width:fit-content;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:8px 16px;border-radius:6px;border:#666666 2px solid}.map-container .selection-area{background:#4f90f22d;border:1px solid #4f90f2}.mind-elixir .context-menu{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99}.mind-elixir .context-menu .menu-list{position:fixed;list-style:none;margin:0;padding:0;font:300 15px Roboto,sans-serif;color:var(--panel-color);box-shadow:0 12px 15px #0003}.mind-elixir .context-menu .menu-list li{min-width:200px;overflow:hidden;white-space:nowrap;padding:10px 14px;background:var(--panel-bgcolor);border-bottom:1px solid var(--panel-border-color)}.mind-elixir .context-menu .menu-list li a{color:#333;text-decoration:none}.mind-elixir .context-menu .menu-list li.disabled{display:none;color:#5e5e5e;background-color:#f7f7f7}.mind-elixir .context-menu .menu-list li.disabled:hover{cursor:default;background-color:#f7f7f7}.mind-elixir .context-menu .menu-list li:hover{cursor:pointer;filter:brightness(.9)}.mind-elixir .context-menu .menu-list li:first-child{border-radius:5px 5px 0 0}.mind-elixir .context-menu .menu-list li:last-child{border-bottom:0;border-radius:0 0 5px 5px}.mind-elixir .context-menu .menu-list li span:last-child{float:right}.mind-elixir .tips{position:absolute;bottom:20px;left:50%;transform:translate(-50%);color:var(--panel-color);font-weight:bolder}.mind-elixir .mobile-menu{position:absolute;left:20px;bottom:70px;z-index:99;margin:0;padding:0;color:#333;border-radius:5px;box-shadow:0 12px 15px #0003;overflow:hidden}.mind-elixir .mobile-menu *{transition:color .4s,background-color .4s}.mind-elixir .mobile-menu div{float:left;text-align:center;width:30px;overflow:hidden;white-space:nowrap;padding:8px;background-color:#fff;border-bottom:1px solid #ecf0f1}.mind-elixir .mobile-menu div a{color:#333;text-decoration:none}.mind-elixir .mobile-menu div.disabled{color:#5e5e5e;background-color:#f7f7f7}.mind-elixir .mobile-menu div.disabled:hover{cursor:default;background-color:#f7f7f7}.mind-elixir .mobile-menu div:hover{cursor:pointer;background-color:#ecf0f1}.mind-elixir-toolbar{font-family:iconfont;position:absolute;color:var(--panel-color);background:var(--panel-bgcolor);padding:10px;border-radius:5px;box-shadow:0 1px 2px #0003}.mind-elixir-toolbar svg{display:inline-block}.mind-elixir-toolbar span:active{opacity:.5}.mind-elixir-toolbar.rb{right:20px;bottom:20px}.mind-elixir-toolbar.rb span+span{margin-left:10px}.mind-elixir-toolbar.lt{font-size:20px;left:20px;top:20px}.mind-elixir-toolbar.lt span{display:block}.mind-elixir-toolbar.lt span+span{margin-top:10px}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();(function(e){var t,n,o,i,s,r,a='<svg><symbol id="icon-edit" viewBox="0 0 1024 1024"><path d="M423.765333 128a42.666667 42.666667 0 0 1 3.2 85.205333L423.765333 213.333333H234.666667a64 64 0 0 0-63.872 60.245334L170.666667 277.333333v512a64 64 0 0 0 60.245333 63.872L234.666667 853.333333h512a64 64 0 0 0 63.872-60.245333L810.666667 789.333333v-189.098666a42.666667 42.666667 0 0 1 85.205333-3.2l0.128 3.2V789.333333a149.333333 149.333333 0 0 1-144.213333 149.248L746.666667 938.666667h-512a149.333333 149.333333 0 0 1-149.248-144.213334L85.333333 789.333333v-512a149.333333 149.333333 0 0 1 144.213334-149.248L234.666667 128h189.098666z m324.949334-53.248a42.666667 42.666667 0 0 1 60.330666 0l150.869334 150.869333a42.666667 42.666667 0 0 1 0 60.330667l-329.386667 329.386667a42.666667 42.666667 0 0 1-29.44 12.458666l-153.386667 2.517334a42.666667 42.666667 0 0 1-43.349333-43.349334l2.56-153.386666a42.666667 42.666667 0 0 1 12.458667-29.44z m30.165333 90.496L491.946667 452.266667l-1.493334 91.989333 92.032-1.493333 286.976-286.976-90.538666-90.538667z"  ></path></symbol><symbol id="icon-rising" viewBox="0 0 1024 1024"><path d="M553.173333 803.84h-64l0.021334-474.581333-224.021334 224-45.269333-45.226667L521.6 206.293333l301.717333 301.696-45.269333 45.269334-224.853333-224.896v475.477333z"  ></path></symbol><symbol id="icon-falling" viewBox="0 0 1024 1024"><path d="M553.173333 238.314667h-64l0.021334 474.602666-224.021334-224-45.269333 45.226667L521.6 835.861333l301.717333-301.717333-45.269333-45.226667-224.853333 224.853334V238.336z"  ></path></symbol><symbol id="icon-shanchu2" viewBox="0 0 1024 1024"><path d="M516.60601807 107.93026734c-82.64382935 0-149.71865844 65.51751709-152.5729065 147.77160644H171.37136841c-21.40603638 0-38.92044068 17.38504028-38.92044068 38.92126465 0 21.40686036 17.38504028 38.92208862 38.92126466 38.92208862h42.94308471v435.40136719c0 81.73498536 55.39828492 148.55026245 123.90106201 148.55026245h348.99444581c68.37341309 0 123.90106201-66.42553711 123.901062-148.55026245V333.80477906h38.92126465c21.40686036 0 38.92126464-17.38586426 38.92126465-38.92208863 0-21.40686036-17.38504028-38.92126464-38.92126465-38.92126465H668.91854859C666.45321656 173.44860839 599.24902344 107.93109131 516.60601807 107.93109131z m-79.65939331 147.77160644c2.85424805-42.16442872 37.2354126-74.85809326 79.78875732-74.85809326s76.93450927 32.82302857 79.39984131 74.85809326H436.94662476z m-98.86047364 589.01165771c-24.2611084 0-50.98754883-31.13717651-50.98754883-75.76693725V333.80477906h450.97036744V769.33551026c0 44.50039673-26.72644043 75.76776123-50.98754884 75.76776122H338.08615112v-0.38973999z m0 0"  ></path><path d="M390.37063599 751.17263794c17.77313232 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.77478027 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.27124023 40.08883667 32.43493653 40.08883667z m117.41308594 0c17.7739563 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.7739563 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.66098023 40.08883667 32.43493653 40.08883667z m123.51049804 0c17.7739563 0 32.43493653-17.7739563 32.43493652-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43493652-40.08966065-17.7739563 0-32.43411255 17.77478027-32.43411255 40.08966065v228.72875976c0 22.18469239 14.14105224 40.08883667 32.43411255 40.08883667z m0 0"  ></path></symbol><symbol id="icon-zijiedian" viewBox="0 0 1024 1024"><path d="M312.208 472c19.568-157.856 153.432-280 315.656-280 175.68 0 318.112 143.272 318.112 320S803.552 832 627.864 832c-162.224 0-296.08-122.144-315.656-280H120a40 40 0 0 1 0-80h192.208zM632 752c132.552 0 240-107.448 240-240 0-132.552-107.448-240-240-240-132.552 0-240 107.448-240 240 0 132.552 107.448 240 240 240z m-40-280v-80a40 40 0 0 1 80 0v80h80a40 40 0 0 1 0 80h-80v80a40 40 0 0 1-80 0v-80h-80a40 40 0 0 1 0-80h80z"  ></path></symbol><symbol id="icon-tongjijiedian-" viewBox="0 0 1024 1024"><path d="M803.84 131.626667H410.24A59.733333 59.733333 0 0 0 350.506667 192v45.226667H199.68a51.626667 51.626667 0 0 0-51.626667 51.626666v465.92a51.626667 51.626667 0 0 0 51.626667 51.626667h187.52v-55.466667h-162.133333a21.333333 21.333333 0 0 1-21.333334-21.333333V313.386667a21.333333 21.333333 0 0 1 21.333334-21.333334h125.653333v64a59.733333 59.733333 0 0 0 59.733333 59.733334h393.386667a59.733333 59.733333 0 0 0 59.733333-59.733334V192a59.733333 59.733333 0 0 0-59.733333-60.373333z m4.266667 224.64a4.266667 4.266667 0 0 1-4.266667 4.266666H410.24a4.266667 4.266667 0 0 1-4.266667-4.266666V192a4.266667 4.266667 0 0 1 4.266667-4.266667h393.6a4.266667 4.266667 0 0 1 4.266667 4.266667zM716.16 749.44h-81.28v-81.493333a27.733333 27.733333 0 0 0-55.466667 0v81.28h-81.493333a27.733333 27.733333 0 1 0 0 55.466666h81.28v81.28a27.733333 27.733333 0 1 0 55.466667 0v-81.066666h81.28a27.733333 27.733333 0 0 0 0-55.466667z"  ></path></symbol><symbol id="icon-close" viewBox="0 0 1024 1024"><path d="M557.312 513.248l265.28-263.904c12.544-12.48 12.608-32.704 0.128-45.248-12.512-12.576-32.704-12.608-45.248-0.128L512.128 467.904l-263.04-263.84c-12.448-12.48-32.704-12.544-45.248-0.064-12.512 12.48-12.544 32.736-0.064 45.28l262.976 263.776L201.6 776.8c-12.544 12.48-12.608 32.704-0.128 45.248a31.937 31.937 0 0 0 22.688 9.44c8.16 0 16.32-3.104 22.56-9.312l265.216-263.808 265.44 266.24c6.24 6.272 14.432 9.408 22.656 9.408a31.94 31.94 0 0 0 22.592-9.344c12.512-12.48 12.544-32.704 0.064-45.248L557.312 513.248z" fill="" ></path></symbol><symbol id="icon-menu" viewBox="0 0 1024 1024"><path d="M109.714 292.571h804.572c21.943 0 36.571-21.942 36.571-43.885 0-14.629-14.628-29.257-36.571-29.257H109.714c-21.943 0-36.571 14.628-36.571 36.571 0 14.629 14.628 36.571 36.571 36.571zM914.286 512H109.714c-21.943 0-36.571 14.629-36.571 36.571 0 14.629 14.628 36.572 36.571 36.572h804.572c21.943 0 36.571-21.943 36.571-43.886 0-14.628-14.628-29.257-36.571-29.257z m0 292.571H109.714c-21.943 0-36.571 14.629-36.571 36.572s14.628 36.571 36.571 36.571h804.572c21.943 0 36.571-21.943 36.571-36.571 0-21.943-14.628-36.572-36.571-36.572z"  ></path></symbol><symbol id="icon-right" viewBox="0 0 1024 1024"><path d="M385 560.69999999L385 738.9c0 36.90000001 26.4 68.5 61.3 68.5l150.2 0c1.5 0 3-0.1 4.5-0.3 10.2 38.7 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-42 0-77.3 28.6-87.5 67.39999999-1.4-0.3-2.9-0.4-4.5-0.39999999L446.3 760.4c-6.8 0-14.3-8.9-14.3-21.49999999l0-427.00000001c0-12.7 7.40000001-21.5 14.30000001-21.5l150.19999999 0c1.5 0 3-0.2 4.5-0.4 10.2 38.8 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.4 0-49.9-40.5-90.6-90.5-90.59999999-42 0-77.3 28.6-87.5 67.39999999-1.4-0.2-2.9-0.4-4.49999999-0.4L446.3 243.3c-34.80000001 0-61.3 31.6-61.3 68.50000001L385 513.7l-79.1 0c-10.4-38.5-45.49999999-67-87.4-67-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c41.79999999 0 77.00000001-28.4 87.4-67L385 560.69999999z" fill="" ></path></symbol><symbol id="icon-left" viewBox="0 0 1024 1024"><path d="M639 463.30000001L639 285.1c0-36.90000001-26.4-68.5-61.3-68.5l-150.2 0c-1.5 0-3 0.1-4.5 0.3-10.2-38.7-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c42 0 77.3-28.6 87.5-67.39999999 1.4 0.3 2.9 0.4 4.5 0.39999999L577.7 263.6c6.8 0 14.3 8.9 14.3 21.49999999l0 427.00000001c0 12.7-7.40000001 21.5-14.30000001 21.5l-150.19999999 0c-1.5 0-3 0.2-4.5 0.4-10.2-38.8-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.4 0 49.9 40.5 90.6 90.5 90.59999999 42 0 77.3-28.6 87.5-67.39999999 1.4 0.2 2.9 0.4 4.49999999 0.4L577.7 780.7c34.80000001 0 61.3-31.6 61.3-68.50000001L639 510.3l79.1 0c10.4 38.5 45.49999999 67 87.4 67 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-41.79999999 0-77.00000001 28.4-87.4 67L639 463.30000001z" fill="" ></path></symbol><symbol id="icon-side" viewBox="0 0 1024 1024"><path d="M851.91168 328.45312c-59.97056 0-108.6208 48.47104-108.91264 108.36992l-137.92768 38.4a109.14304 109.14304 0 0 0-63.46752-46.58688l1.39264-137.11872c47.29344-11.86816 82.31936-54.66624 82.31936-105.64096 0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.76288-108.91776 108.91776c0 49.18784 32.60928 90.75712 77.38368 104.27392l-1.41312 138.87488a109.19936 109.19936 0 0 0-63.50336 48.55808l-138.93632-39.48544 0.01024-0.72704c0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.75776-108.91776 108.91776c0 60.15488 48.76288 108.91264 108.91776 108.91264 39.3984 0 73.91232-20.92032 93.03552-52.2496l139.19232 39.552-0.00512 0.2304c0 25.8304 9.00096 49.5616 24.02816 68.23424l-90.14272 132.63872a108.7488 108.7488 0 0 0-34.2528-5.504c-60.15488 0-108.91776 48.768-108.91776 108.91776 0 60.16 48.76288 108.91776 108.91776 108.91776 60.16 0 108.92288-48.75776 108.92288-108.91776 0-27.14624-9.9328-51.968-26.36288-71.04l89.04704-131.03104a108.544 108.544 0 0 0 37.6832 6.70208 108.672 108.672 0 0 0 36.48512-6.272l93.13792 132.57216a108.48256 108.48256 0 0 0-24.69888 69.0688c0 60.16 48.768 108.92288 108.91776 108.92288 60.16 0 108.91776-48.76288 108.91776-108.92288 0-60.14976-48.75776-108.91776-108.91776-108.91776a108.80512 108.80512 0 0 0-36.69504 6.3488l-93.07136-132.48a108.48768 108.48768 0 0 0 24.79616-72.22784l136.09984-37.888c18.99008 31.93856 53.84192 53.3504 93.69088 53.3504 60.16 0 108.92288-48.75776 108.92288-108.91264-0.00512-60.15488-48.77312-108.92288-108.92288-108.92288z"  ></path></symbol><symbol id="icon-B" viewBox="0 0 1024 1024"><path d="M98.067692 65.457231H481.28c75.854769 0 132.411077 3.150769 169.668923 9.452307 37.336615 6.301538 70.656 19.534769 100.036923 39.620924 29.459692 20.007385 53.956923 46.710154 73.570462 80.029538 19.692308 33.398154 29.459692 70.734769 29.459692 112.167385 0 44.898462-12.130462 86.094769-36.233846 123.588923a224.886154 224.886154 0 0 1-98.461539 84.283077c58.368 17.092923 103.266462 46.08 134.695385 87.04 31.350154 40.96 47.025231 89.088 47.025231 144.462769 0 43.638154-10.082462 86.016-30.404923 127.212308-20.243692 41.196308-47.891692 74.043077-83.02277 98.697846-35.052308 24.654769-78.296615 39.778462-129.732923 45.449846-32.295385 3.465846-110.119385 5.671385-233.472 6.537846H98.067692V65.457231z m193.536 159.507692V446.621538h126.818462c75.460923 0 122.328615-1.024 140.603077-3.229538 33.083077-3.938462 59.155692-15.36 78.139077-34.343385 18.904615-18.904615 28.435692-43.874462 28.435692-74.830769 0-29.696-8.192-53.720615-24.497231-72.310154-16.384-18.510769-40.644923-29.696-72.940307-33.634461-19.140923-2.205538-74.279385-3.308308-165.415385-3.308308h-111.064615z m0 381.243077v256.315077h179.2c69.710769 0 113.979077-1.969231 132.726154-5.907692 28.750769-5.198769 52.145231-17.959385 70.262154-38.281847 18.116923-20.243692 27.096615-47.340308 27.096615-81.368615 0-28.750769-6.931692-53.169231-20.873846-73.255385a118.232615 118.232615 0 0 0-60.494769-43.795692c-26.387692-9.137231-83.574154-13.705846-171.638154-13.705846H291.603692z"  ></path></symbol><symbol id="icon-a" viewBox="0 0 1024 1024"><path d="M757.76 665.6q0 20.48 1.536 34.304t7.68 22.016 18.944 12.288 34.304 4.096q-3.072 25.6-15.36 44.032-11.264 16.384-33.28 29.696t-62.976 13.312q-11.264 0-20.48-0.512t-17.408-2.56l-6.144-2.048-1.024 0q-4.096-1.024-10.24-4.096-2.048-2.048-4.096-2.048-1.024-1.024-2.048-1.024-14.336-8.192-23.552-17.408t-14.336-17.408q-6.144-10.24-9.216-20.48-63.488 75.776-178.176 75.776-48.128 0-88.064-15.36t-69.12-44.032-45.056-68.096-15.872-88.576 16.896-89.088 47.616-67.584 74.24-42.496 96.768-14.848q48.128 0 88.576 17.408t66.048 49.152q0-8.192 0.512-16.384t0.512-15.36q0-71.68-39.936-104.448t-128-32.768q-43.008 0-84.992 6.656t-84.992 17.92q14.336-28.672 25.088-47.616t24.064-29.184q30.72-24.576 158.72-24.576 79.872 0 135.168 13.824t90.624 43.52 51.2 75.264 15.872 108.032l0 200.704zM487.424 743.424q50.176 0 79.872-33.28t29.696-95.744q0-61.44-28.672-93.696t-76.8-32.256q-52.224 0-82.944 33.28t-30.72 94.72q0 58.368 31.744 92.672t77.824 34.304z"  ></path></symbol><symbol id="icon-full" viewBox="0 0 1024 1024"><path d="M639.328 416c8.032 0 16.096-3.008 22.304-9.056l202.624-197.184-0.8 143.808c-0.096 17.696 14.144 32.096 31.808 32.192 0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808l1.248-222.208c0-0.672-0.352-1.248-0.384-1.92 0.032-0.512 0.288-0.896 0.288-1.408 0.032-17.664-14.272-32-31.968-32.032L671.552 96l-0.032 0c-17.664 0-31.968 14.304-32 31.968C639.488 145.632 653.824 160 671.488 160l151.872 0.224-206.368 200.8c-12.672 12.32-12.928 32.608-0.64 45.248C622.656 412.736 630.976 416 639.328 416z"  ></path><path d="M896.032 639.552 896.032 639.552c-17.696 0-32 14.304-32.032 31.968l-0.224 151.872-200.832-206.4c-12.32-12.64-32.576-12.96-45.248-0.64-12.672 12.352-12.928 32.608-0.64 45.248l197.184 202.624-143.808-0.8c-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808-0.096 17.696 14.144 32.096 31.808 32.192l222.24 1.248c0.064 0 0.128 0 0.192 0 0.64 0 1.12-0.32 1.76-0.352 0.512 0.032 0.896 0.288 1.408 0.288l0.032 0c17.664 0 31.968-14.304 32-31.968L928 671.584C928.032 653.952 913.728 639.584 896.032 639.552z"  ></path><path d="M209.76 159.744l143.808 0.8c0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808 0.096-17.696-14.144-32.096-31.808-32.192L131.68 95.328c-0.064 0-0.128 0-0.192 0-0.672 0-1.248 0.352-1.888 0.384-0.448 0-0.8-0.256-1.248-0.256 0 0-0.032 0-0.032 0-17.664 0-31.968 14.304-32 31.968L96 352.448c-0.032 17.664 14.272 32 31.968 32.032 0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968l0.224-151.936 200.832 206.4c6.272 6.464 14.624 9.696 22.944 9.696 8.032 0 16.096-3.008 22.304-9.056 12.672-12.32 12.96-32.608 0.64-45.248L209.76 159.744z"  ></path><path d="M362.368 617.056l-202.624 197.184 0.8-143.808c0.096-17.696-14.144-32.096-31.808-32.192-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808l-1.248 222.24c0 0.704 0.352 1.312 0.384 2.016 0 0.448-0.256 0.832-0.256 1.312-0.032 17.664 14.272 32 31.968 32.032L352.448 928c0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968s-14.272-32-31.968-32.032l-151.936-0.224 206.4-200.832c12.672-12.352 12.96-32.608 0.64-45.248S375.008 604.704 362.368 617.056z"  ></path></symbol><symbol id="icon-add" viewBox="0 0 1024 1024"><path d="M863.328 482.56l-317.344-1.12L545.984 162.816c0-17.664-14.336-32-32-32s-32 14.336-32 32l0 318.4L159.616 480.064c-0.032 0-0.064 0-0.096 0-17.632 0-31.936 14.24-32 31.904C127.424 529.632 141.728 544 159.392 544.064l322.592 1.152 0 319.168c0 17.696 14.336 32 32 32s32-14.304 32-32l0-318.944 317.088 1.12c0.064 0 0.096 0 0.128 0 17.632 0 31.936-14.24 32-31.904C895.264 496.992 880.96 482.624 863.328 482.56z"  ></path></symbol><symbol id="icon-move" viewBox="0 0 1024 1024"><path d="M863.744 544 163.424 544c-17.664 0-32-14.336-32-32s14.336-32 32-32l700.32 0c17.696 0 32 14.336 32 32S881.44 544 863.744 544z"  ></path></symbol><symbol id="icon-living" viewBox="0 0 1024 1024"><path d="M514.133333 488.533333m-106.666666 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z" fill="" ></path><path d="M512 64C264.533333 64 64 264.533333 64 512c0 236.8 183.466667 428.8 416 445.866667v-134.4c-53.333333-59.733333-200.533333-230.4-200.533333-334.933334 0-130.133333 104.533333-234.666667 234.666666-234.666666s234.666667 104.533333 234.666667 234.666666c0 61.866667-49.066667 153.6-145.066667 270.933334l-59.733333 68.266666V960C776.533333 942.933333 960 748.8 960 512c0-247.466667-200.533333-448-448-448z" fill="" ></path></symbol></svg>',d=(d=document.getElementsByTagName("script"))[d.length-1].getAttribute("data-injectcss");if(d&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(u){console&&console.log(u)}}function p(){s||(s=!0,o())}t=function(){var u,f,m,y;(y=document.createElement("div")).innerHTML=a,a=null,(m=y.getElementsByTagName("svg")[0])&&(m.setAttribute("aria-hidden","true"),m.style.position="absolute",m.style.width=0,m.style.height=0,m.style.overflow="hidden",u=m,(f=document.body).firstChild?(y=u,(m=f.firstChild).parentNode.insertBefore(y,m)):f.appendChild(u))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(o=t,i=e.document,s=!1,(r=function(){try{i.documentElement.doScroll("left")}catch{return void setTimeout(r,50)}p()})(),i.onreadystatechange=function(){i.readyState=="complete"&&(i.onreadystatechange=null,p())})})(window);const be=0,Be=1,zt=2,ze=30,zn={name:"Latte",palette:["#dd7878","#ea76cb","#8839ef","#e64553","#fe640b","#df8e1d","#40a02b","#209fb5","#1e66f5","#7287fd"],cssVar:{"--main-color":"#444446","--main-bgcolor":"#ffffff","--color":"#777777","--bgcolor":"#f6f6f6","--panel-color":"#444446","--panel-bgcolor":"#ffffff","--panel-border-color":"#eaeaea"}},jn={name:"Dark",palette:["#848FA0","#748BE9","#D2F9FE","#4145A5","#789AFA","#706CF4","#EF987F","#775DD5","#FCEECF","#DA7FBC"],cssVar:{"--main-color":"#ffffff","--main-bgcolor":"#4c4f69","--color":"#cccccc","--bgcolor":"#252526","--panel-color":"#ffffff","--panel-bgcolor":"#2d3748","--panel-border-color":"#696969"}};function kt(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}const Ci=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Et=function(e,t){if(t.id===e)return t;if(t.children&&t.children.length){for(let n=0;n<t.children.length;n++){const o=Et(e,t.children[n]);if(o)return o}return null}else return null},De=(e,t)=>{if(e.parent=t,e.children)for(let n=0;n<e.children.length;n++)De(e.children[n],e)};function Wt(e){if(e.id=gt(),e.children)for(let t=0;t<e.children.length;t++)Wt(e.children[t])}const Mi=(e,t)=>{let n=Date.now();return function(...o){Date.now()-n<t||(e(...o),n=Date.now())}};function An(e,t,n,o){const i=o-t,s=e-n;let r=Math.atan(Math.abs(i)/Math.abs(s))/3.14*180;s<0&&i>0&&(r=180-r),s<0&&i<0&&(r=180+r),s>0&&i<0&&(r=360-r);const a=15,d=30,p=r+d,u=r-d;return{x1:n+Math.cos(Math.PI*p/180)*a,y1:o-Math.sin(Math.PI*p/180)*a,x2:n+Math.cos(Math.PI*u/180)*a,y2:o-Math.sin(Math.PI*u/180)*a}}function gt(){return(new Date().getTime().toString(16)+Math.random().toString(16).substr(2)).substr(2,16)}const _i=function(){const e=gt();return{topic:this.newTopicName,id:e}};function Ut(e){return JSON.parse(JSON.stringify(e,(t,n)=>{if(t!=="parent")return n}))}const $e=(e,t)=>{let n=0,o=0;for(;t&&t!==e;)n+=t.offsetLeft,o+=t.offsetTop,t=t.offsetParent;return{offsetLeft:n,offsetTop:o}},K=(e,t)=>{for(const n in t)e.setAttribute(n,t[n])},Bt=e=>e?e.tagName==="ME-TPC":!1,jt=e=>e.filter(t=>{for(let n=0;n<e.length;n++)if(t!==e[n]&&e[n].parentElement.parentElement.contains(t))return!1;return!0}),ve={moved:!1,mousedown:!1,onMove(e,t){if(this.mousedown){this.moved=!0;const n=e.movementX,o=e.movementY;t.scrollTo(t.scrollLeft-n,t.scrollTop-o)}},clear(){this.moved=!1,this.mousedown=!1}};function Ni(e){e.map.addEventListener("click",t=>{var n,o;if(t.button!==0)return;if((n=e.helper1)!=null&&n.moved){e.helper1.clear();return}if((o=e.helper2)!=null&&o.moved){e.helper2.clear();return}if(ve.moved){ve.clear();return}e.clearSelection();const i=t.target;if(i.tagName==="ME-EPD")e.expandNode(i.previousSibling);else if(e.editable)Bt(i)?e.selectNode(i,!1,t):i.tagName==="text"?i.dataset.type==="custom-link"?e.selectArrow(i.parentElement):e.selectSummary(i.parentElement):i.className;else return}),e.map.addEventListener("dblclick",t=>{if(t.preventDefault(),!e.editable)return;const n=t.target;Bt(n)?e.beginEdit(n):n.tagName==="text"&&(n.dataset.type==="custom-link"?e.editArrowLabel(n.parentElement):e.editSummary(n.parentElement))}),e.map.addEventListener("mousemove",t=>{t.target.contentEditable!=="true"&&ve.onMove(t,e.container)}),e.map.addEventListener("mousedown",t=>{const n=e.mouseSelectionButton===0?2:0;t.button===n&&t.target.contentEditable!=="true"&&(ve.moved=!1,ve.mousedown=!0)}),e.map.addEventListener("mouseleave",t=>{const n=e.mouseSelectionButton===0?2:0;t.button===n&&ve.clear()}),e.map.addEventListener("mouseup",t=>{const n=e.mouseSelectionButton===0?2:0;t.button===n&&ve.clear()}),e.map.addEventListener("contextmenu",t=>{t.preventDefault()})}const ki={create(){return{handlers:{},showHandler:function(){console.log(this.handlers)},addListener:function(e,t){this.handlers[e]===void 0&&(this.handlers[e]=[]),this.handlers[e].push(t)},fire:function(e,...t){if(this.handlers[e]instanceof Array){const n=this.handlers[e];for(let o=0;o<n.length;o++)n[o](...t)}},removeListener:function(e,t){if(!this.handlers[e])return;const n=this.handlers[e];if(!t)n.length=0;else if(n.length)for(let o=0;o<n.length;o++)n[o]===t&&this.handlers[e].splice(o,1)}}}},St=document,Ei=function(){console.time("layout"),this.nodes.innerHTML="";const e=this.createTopic(this.nodeData);Kt(e,this.nodeData),e.draggable=!1;const t=St.createElement("me-root");t.appendChild(e);const n=this.nodeData.children||[];if(this.direction===zt){let o=0,i=0;n.map(s=>{s.direction===be?o+=1:s.direction===Be?i+=1:o<=i?(s.direction=be,o+=1):(s.direction=Be,i+=1)})}Si(this,n,t),console.timeEnd("layout")},Si=function(e,t,n){const o=St.createElement("me-main");o.className="lhs";const i=St.createElement("me-main");i.className="rhs";for(let s=0;s<t.length;s++){const r=t[s],{grp:a}=e.createWrapper(r);e.direction===zt?r.direction===be?o.appendChild(a):i.appendChild(a):e.direction===be?o.appendChild(a):i.appendChild(a)}e.nodes.appendChild(o),e.nodes.appendChild(n),e.nodes.appendChild(i),e.nodes.appendChild(e.lines)},Li=function(e,t){const n=St.createElement("me-children");for(let o=0;o<t.length;o++){const i=t[o],{grp:s}=e.createWrapper(i);n.appendChild(s)}return n},ce=document,Z=(e,t)=>{const n=(t?t.mindElixirBox:ce).querySelector(`[data-nodeid=me${e}]`);if(!n)throw new Error(`FindEle: Node ${e} not found, maybe it's collapsed.`);return n},Kt=function(e,t){if(e.innerHTML="",t.style&&(e.style.color=t.style.color||"",e.style.background=t.style.background||"",e.style.fontSize=t.style.fontSize+"px",e.style.fontWeight=t.style.fontWeight||"normal"),t.dangerouslySetInnerHTML){e.innerHTML=t.dangerouslySetInnerHTML;return}if(t.image){const n=t.image;if(n.url&&n.width&&n.height){const o=ce.createElement("img");o.src=n.url,o.style.width=n.width+"px",o.style.height=n.height+"px",e.appendChild(o),e.image=o}else console.warn("image url/width/height are required")}else e.image&&(e.image=void 0);{const n=ce.createElement("span");n.className="text",n.textContent=t.topic,e.appendChild(n),e.text=n}if(t.hyperLink){const n=ce.createElement("a");n.className="hyper-link",n.target="_blank",n.innerText="ðŸ”—",n.href=t.hyperLink,e.appendChild(n),e.linkContainer=n}else e.linkContainer&&(e.linkContainer=void 0);if(t.icons&&t.icons.length){const n=ce.createElement("span");n.className="icons",n.innerHTML=t.icons.map(o=>`<span>${kt(o)}</span>`).join(""),e.appendChild(n),e.icons=n}else e.icons&&(e.icons=void 0);if(t.tags&&t.tags.length){const n=ce.createElement("div");n.className="tags",n.innerHTML=t.tags.map(o=>`<span>${kt(o)}</span>`).join(""),e.appendChild(n),e.tags=n}else e.tags&&(e.tags=void 0)},Ti=function(e,t){const n=ce.createElement("me-wrapper"),{p:o,tpc:i}=this.createParent(e);if(n.appendChild(o),!t&&e.children&&e.children.length>0){const s=Zt(e.expanded);if(o.appendChild(s),e.expanded!==!1){const r=Li(this,e.children);n.appendChild(r)}}return{grp:n,top:o,tpc:i}},zi=function(e){const t=ce.createElement("me-parent"),n=this.createTopic(e);return Kt(n,e),t.appendChild(n),{p:t,tpc:n}},ji=function(e){const t=ce.createElement("me-children");return t.append(...e),t},Ai=function(e){const t=ce.createElement("me-tpc");return t.nodeObj=e,t.dataset.nodeid="me"+e.id,t.draggable=this.draggable,t};function Dn(e){const t=ce.createRange();t.selectNodeContents(e);const n=window.getSelection();n&&(n.removeAllRanges(),n.addRange(t))}const Di=function(e){if(console.time("editTopic"),!e)return;const t=ce.createElement("div"),n=e.text.textContent;e.appendChild(t),t.id="input-box",t.textContent=n,t.contentEditable="true",t.spellcheck=!1,t.style.cssText=`min-width:${e.offsetWidth-8}px;`,this.direction===be&&(t.style.right="0"),t.focus(),Dn(t),this.bus.fire("operation",{name:"beginEdit",obj:e.nodeObj}),t.addEventListener("keydown",o=>{o.stopPropagation();const i=o.key;if(i==="Enter"||i==="Tab"){if(o.shiftKey)return;o.preventDefault(),t==null||t.blur(),this.map.focus()}}),t.addEventListener("blur",()=>{var o;if(!t)return;const i=e.nodeObj,s=((o=t.textContent)==null?void 0:o.trim())||"";console.log(s),s===""?i.topic=n:i.topic=s,t.remove(),s!==n&&(e.text.textContent=i.topic,this.linkDiv(),this.bus.fire("operation",{name:"finishEdit",obj:i,origin:n}))}),console.timeEnd("editTopic")},Zt=function(e){const t=ce.createElement("me-epd");return t.expanded=e!==!1,t.className=e!==!1?"minus":"",t},it=document,st="http://www.w3.org/2000/svg",$n=function(e,t,n){const o=it.createElementNS(st,"path");return K(o,{d:e,stroke:t||"#666",fill:"none","stroke-width":n}),o},ht=function(e){const t=it.createElementNS(st,"svg");return t.setAttribute("class",e),t.setAttribute("overflow","visible"),t},un=function(){const e=it.createElementNS(st,"line");return e.setAttribute("stroke","#bbb"),e.setAttribute("fill","none"),e.setAttribute("stroke-width","2"),e},$i=function(e,t){const n={stroke:"rgb(235, 95, 82)",fill:"none","stroke-linecap":"cap","stroke-width":"2"},o=it.createElementNS(st,"g"),i=it.createElementNS(st,"path"),s=it.createElementNS(st,"path");return K(s,{d:t,...n}),K(i,{d:e,...n,"stroke-dasharray":"8,2"}),o.appendChild(i),o.appendChild(s),o},On=function(e,t,n){if(console.time("editSummary"),!t)return;const o=document.createElement("div");e.nodes.appendChild(o);const i=t.innerHTML;o.id="input-box",o.textContent=i,o.contentEditable="true",o.spellcheck=!1;const s=t.getAttribute("x"),r=t.getAttribute("y");o.style.cssText=`min-width:88px;position:absolute;left:${s}px;top:${r}px;`;const a=t.getAttribute("text-anchor");a==="end"?o.style.cssText+="transform: translate(-100%, -100%);":a==="middle"?o.style.cssText+="transform: translate(-50%, -100%);":o.style.cssText+="transform: translate(0, -100%);",o.focus(),Dn(o),o.addEventListener("keydown",d=>{d.stopPropagation();const p=d.key;if(p==="Enter"||p==="Tab"){if(d.shiftKey)return;d.preventDefault(),o.blur(),e.map.focus()}}),o.addEventListener("blur",()=>{o&&n(o)}),console.timeEnd("editSummary")},Oi=function(e){console.time("linkDiv"),this.nodes.style.top=`${1e4-this.nodes.offsetHeight/2}px`,this.nodes.style.left=`${1e4-this.nodes.offsetWidth/2}px`;const t=this.map.querySelectorAll("me-main > me-wrapper");this.lines.innerHTML="";const n=this.map.querySelector("me-root"),o=n.offsetTop,i=n.offsetLeft,s=n.offsetWidth,r=n.offsetHeight;for(let a=0;a<t.length;a++){const d=t[a],p=d.querySelector("me-tpc"),{offsetLeft:u,offsetTop:f}=$e(this.nodes,p),m=p.offsetWidth,y=p.offsetHeight,x=d.parentNode.className,v=this.generateMainBranch({pT:o,pL:i,pW:s,pH:r,cT:f,cL:u,cW:m,cH:y,direction:x,containerHeight:this.nodes.offsetHeight}),h=this.theme.palette,b=p.nodeObj.branchColor||h[a%h.length];p.style.borderColor=b,this.lines.appendChild($n(v,b,"3"));const $=d.children[0].children[1];if($&&($.style.top=($.parentNode.offsetHeight-$.offsetHeight)/2+"px",x==="lhs"?$.style.left="-10px":$.style.right="-10px"),!(e&&e!==d)&&d.childElementCount){const A=ht("subLines"),j=d.lastChild;j.tagName==="svg"&&j.remove(),d.appendChild(A),In(this,A,b,d,x,!0)}}this.renderArrow(),this.renderSummary(),console.timeEnd("linkDiv")},In=function(e,t,n,o,i,s){const r=o.firstChild,a=o.children[1].children,d=r.offsetTop,p=r.offsetLeft,u=r.offsetWidth,f=r.offsetHeight;for(let m=0;m<a.length;m++){const y=a[m],x=y.firstChild,v=x.offsetTop,h=x.offsetLeft,b=x.offsetWidth,$=x.offsetHeight,A=x.firstChild.nodeObj.branchColor||n,j=e.generateSubBranch({pT:d,pL:p,pW:u,pH:f,cT:v,cL:h,cW:b,cH:$,direction:i,isFirst:s});t.appendChild($n(j,A,"2"));const I=x.children[1];if(I){if(I.style.bottom=-(I.offsetHeight/2)+"px",i==="lhs"?I.style.left="10px":i==="rhs"&&(I.style.right="10px"),!I.expanded)continue}else continue;y.children[1].children.length>0&&In(e,t,A,y,i)}},pn={addChild:"æ’å…¥å­èŠ‚ç‚¹",addParent:"æ’å…¥çˆ¶èŠ‚ç‚¹",addSibling:"æ’å…¥åŒçº§èŠ‚ç‚¹",removeNode:"åˆ é™¤èŠ‚ç‚¹",focus:"ä¸“æ³¨",cancelFocus:"å–æ¶ˆä¸“æ³¨",moveUp:"ä¸Šç§»",moveDown:"ä¸‹ç§»",link:"è¿žæŽ¥",clickTips:"è¯·ç‚¹å‡»ç›®æ ‡èŠ‚ç‚¹",summary:"æ‘˜è¦"},mn={cn:pn,zh_CN:pn,zh_TW:{addChild:"æ’å…¥å­ç¯€é»ž",addParent:"æ’å…¥çˆ¶ç¯€é»ž",addSibling:"æ’å…¥åŒç´šç¯€é»ž",removeNode:"åˆªé™¤ç¯€é»ž",focus:"å°ˆæ³¨",cancelFocus:"å–æ¶ˆå°ˆæ³¨",moveUp:"ä¸Šç§»",moveDown:"ä¸‹ç§»",link:"é€£æŽ¥",clickTips:"è«‹é»žæ“Šç›®æ¨™ç¯€é»ž",summary:"æ‘˜è¦"},en:{addChild:"Add child",addParent:"Add parent",addSibling:"Add sibling",removeNode:"Remove node",focus:"Focus Mode",cancelFocus:"Cancel Focus Mode",moveUp:"Move up",moveDown:"Move down",link:"Link",clickTips:"Please click the target node",summary:"Summary"},ru:{addChild:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð´Ð¾Ñ‡ÐµÑ€Ð½Ð¸Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",addParent:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",addSibling:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð° ÑÑ‚Ð¾Ð¼ ÑƒÑ€Ð¾Ð²Ð½Ðµ",removeNode:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÑƒÐ·ÐµÐ»",focus:"Ð ÐµÐ¶Ð¸Ð¼ Ñ„Ð¾ÐºÑƒÑÐ¸Ñ€Ð¾Ð²ÐºÐ¸",cancelFocus:"ÐžÑ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ€ÐµÐ¶Ð¸Ð¼ Ñ„Ð¾ÐºÑƒÑÐ¸Ñ€Ð¾Ð²ÐºÐ¸",moveUp:"ÐŸÐ¾Ð´Ð½ÑÑ‚ÑŒ Ð²Ñ‹ÑˆÐµ",moveDown:"ÐžÐ¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð½Ð¸Ð¶Ðµ",link:"Ð¡ÑÑ‹Ð»ÐºÐ°",clickTips:"ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð½Ð° Ñ†ÐµÐ»ÐµÐ²Ð¾Ð¹ ÑƒÐ·ÐµÐ»",summary:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ"},ja:{addChild:"å­ãƒŽãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹",addParent:"è¦ªãƒŽãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™",addSibling:"å…„å¼ŸãƒŽãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹",removeNode:"ãƒŽãƒ¼ãƒ‰ã‚’å‰Šé™¤",focus:"é›†ä¸­",cancelFocus:"é›†ä¸­è§£é™¤",moveUp:"ä¸Šã¸ç§»å‹•",moveDown:"ä¸‹ã¸ç§»å‹•",link:"ã‚³ãƒã‚¯ãƒˆ",clickTips:"ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒŽãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„",summary:"æ¦‚è¦"},pt:{addChild:"Adicionar item filho",addParent:"Adicionar item pai",addSibling:"Adicionar item irmao",removeNode:"Remover item",focus:"Modo Foco",cancelFocus:"Cancelar Modo Foco",moveUp:"Mover para cima",moveDown:"Mover para baixo",link:"Link",clickTips:"Favor clicar no item alvo",summary:"Resumo"}};function Ii(e,t){const n=A=>{const j=document.createElement("div");return j.innerText=A,j.className="tips",j},o=(A,j,I)=>{const C=document.createElement("li");return C.id=A,C.innerHTML=`<span>${kt(j)}</span><span>${kt(I)}</span>`,C},i=mn[e.locale]?e.locale:"en",s=mn[i],r=o("cm-add_child",s.addChild,"tab"),a=o("cm-add_parent",s.addParent,""),d=o("cm-add_sibling",s.addSibling,"enter"),p=o("cm-remove_child",s.removeNode,"delete"),u=o("cm-fucus",s.focus,""),f=o("cm-unfucus",s.cancelFocus,""),m=o("cm-up",s.moveUp,"PgUp"),y=o("cm-down",s.moveDown,"Pgdn"),x=o("cm-down",s.link,""),v=o("cm-down",s.summary,""),h=document.createElement("ul");if(h.className="menu-list",h.appendChild(r),h.appendChild(a),h.appendChild(d),h.appendChild(p),(!t||t.focus)&&(h.appendChild(u),h.appendChild(f)),h.appendChild(m),h.appendChild(y),h.appendChild(v),(!t||t.link)&&h.appendChild(x),t&&t.extend)for(let A=0;A<t.extend.length;A++){const j=t.extend[A],I=o(j.name,j.name,j.key||"");h.appendChild(I),I.onclick=C=>{j.onclick(C)}}const b=document.createElement("div");b.className="context-menu",b.appendChild(h),b.hidden=!0,e.container.append(b);let $=!0;e.container.oncontextmenu=function(A){if(A.preventDefault(),!e.editable)return;const j=A.target;if(Bt(j)){j.parentElement.tagName==="ME-ROOT"?$=!0:$=!1,$?(u.className="disabled",m.className="disabled",y.className="disabled",a.className="disabled",d.className="disabled",p.className="disabled"):(u.className="",m.className="",y.className="",a.className="",d.className="",p.className=""),e.currentNodes||e.selectNode(j),b.hidden=!1,ve.mousedown&&(ve.mousedown=!1),h.style.top="",h.style.bottom="",h.style.left="",h.style.right="";const I=h.getBoundingClientRect(),C=h.offsetHeight,T=h.offsetWidth,k=A.clientY-I.top,D=A.clientX-I.left;C+k>window.innerHeight?(h.style.top="",h.style.bottom="0px"):(h.style.bottom="",h.style.top=k+15+"px"),T+D>window.innerWidth?(h.style.left="",h.style.right="0px"):(h.style.right="",h.style.left=D+10+"px")}},b.onclick=A=>{A.target===b&&(b.hidden=!0)},r.onclick=()=>{e.addChild(),b.hidden=!0},a.onclick=()=>{e.insertParent(),b.hidden=!0},d.onclick=()=>{$||(e.insertSibling("after"),b.hidden=!0)},p.onclick=()=>{$||(e.removeNode(),b.hidden=!0)},u.onclick=()=>{$||(e.focusNode(e.currentNode),b.hidden=!0)},f.onclick=()=>{e.cancelFocus(),b.hidden=!0},m.onclick=()=>{$||(e.moveUpNode(),b.hidden=!0)},y.onclick=()=>{$||(e.moveDownNode(),b.hidden=!0)},x.onclick=()=>{b.hidden=!0;const A=e.currentNode,j=n(s.clickTips);e.container.appendChild(j),e.map.addEventListener("click",I=>{I.preventDefault(),j.remove();const C=I.target;C.parentElement.tagName==="ME-PARENT"||C.parentElement.tagName==="ME-ROOT"?e.createArrow(A,C):console.log("link cancel")},{once:!0})},v.onclick=()=>{b.hidden=!0,e.createSummary(),e.unselectNodes()}}const Vi=e=>{const t=e.map.querySelectorAll(".lhs>me-wrapper>me-parent>me-tpc");e.selectNode(t[Math.ceil(t.length/2)-1])},Pi=e=>{const t=e.map.querySelectorAll(".rhs>me-wrapper>me-parent>me-tpc");e.selectNode(t[Math.ceil(t.length/2)-1])},Hi=e=>{e.selectNode(e.map.querySelector("me-root>me-tpc"))},Bi=function(e,t){const n=t.parentElement.parentElement.parentElement.previousSibling;if(n){const o=n.firstChild;e.selectNode(o)}},Ri=function(e,t){const n=t.parentElement.nextSibling;if(n&&n.firstChild){const o=n.firstChild.firstChild.firstChild;e.selectNode(o)}},hn=function(e,t){var n,o;const i=e.currentNode||((n=e.currentNodes)==null?void 0:n[0]);if(!i)return;const s=i.nodeObj,r=i.offsetParent.offsetParent.parentElement;s.root?t==="lhs"?Vi(e):Pi(e):r.className===t?Ri(e,i):(o=s.parent)!=null&&o.root?Hi(e):Bi(e,i)},fn=function(e,t){var n;const o=e.currentNode||((n=e.currentNodes)==null?void 0:n[0]);if(!o||o.nodeObj.root)return;const i=t+"Sibling",s=o.parentElement.parentElement[i];s&&e.selectNode(s.firstChild.firstChild)};function Yi(e){const t=()=>{e.currentArrow?e.removeArrow():e.currentSummary?e.removeSummary(e.currentSummary.summaryObj.id):e.currentNode?e.removeNode():e.currentNodes&&e.removeNodes(e.currentNodes)},n={13:o=>{o.shiftKey?e.insertSibling("before"):o.ctrlKey?e.insertParent():e.insertSibling("after")},9:()=>{e.addChild()},112:()=>{e.toCenter()},113:()=>{e.beginEdit()},38:o=>{if(o.altKey)e.moveUpNode();else{if(o.metaKey||o.ctrlKey)return e.initSide();fn(e,"previous")}},40:o=>{o.altKey?e.moveDownNode():fn(e,"next")},37:o=>{if(o.metaKey||o.ctrlKey)return e.initLeft();hn(e,"lhs")},39:o=>{if(o.metaKey||o.ctrlKey)return e.initRight();hn(e,"rhs")},33(){e.moveUpNode()},34(){e.moveDownNode()},67:o=>{(o.metaKey||o.ctrlKey)&&(e.currentNode?e.waitCopy=[e.currentNode]:e.currentNodes&&(e.waitCopy=e.currentNodes))},86:o=>{!e.waitCopy||!e.currentNode||(o.metaKey||o.ctrlKey)&&(e.waitCopy.length===1?e.copyNode(e.waitCopy[0],e.currentNode):e.copyNodes(e.waitCopy,e.currentNode))},187:o=>{if(o.metaKey||o.ctrlKey){if(e.scaleVal>1.6)return;e.scale(e.scaleVal+=.2)}},189:o=>{if(o.metaKey||o.ctrlKey){if(e.scaleVal<.6)return;e.scale(e.scaleVal-=.2)}},48:o=>{(o.metaKey||o.ctrlKey)&&e.scale(1)},8:t,46:t};e.map.onkeydown=o=>{if(o.preventDefault(),!e.editable||o.target!==o.currentTarget)return;const i=n[o.keyCode];i&&i(o)}}function Fi(e,t){const n=(m,y)=>{const x=document.createElement("div");return x.id=m,x.innerHTML=`<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-${y}"></use>
  </svg>`,x},o=n("cm-add_child","zijiedian"),i=n("cm-add_sibling","tongjijiedian-"),s=n("cm-remove_child","shanchu2"),r=n("cm-up","rising"),a=n("cm-down","falling"),d=n("cm-edit","edit"),p=document.createElement("ul");p.className="menu-list";const u=document.createElement("mmenu");u.className="mobile-menu",u.appendChild(o),u.appendChild(i),u.appendChild(s),u.appendChild(r),u.appendChild(a),u.appendChild(d),u.hidden=!0,e.container.append(u);let f=!0;e.bus.addListener("unselectNode",function(){u.hidden=!0}),e.bus.addListener("selectNode",function(m){u.hidden=!1,m.root?f=!0:f=!1}),u.onclick=m=>{m.target===u&&(u.hidden=!0)},o.onclick=()=>{e.addChild()},i.onclick=()=>{f||e.insertSibling("after")},s.onclick=()=>{f||e.removeNode()},r.onclick=m=>{f||e.moveUpNode()},a.onclick=m=>{f||e.moveDownNode()},d.onclick=m=>{e.beginEdit()}}const Rt=document,qi=function(e,t){if(!t)return Yt(e),e;let n=e.querySelector(".insert-preview");const o=`insert-preview ${t} show`;return n||(n=Rt.createElement("div"),e.appendChild(n)),n.className=o,e},Yt=function(e){if(!e)return;const t=e.querySelectorAll(".insert-preview");for(const n of t||[])n.remove()},vn=function(e,t){for(const n of t){const o=n.parentElement.parentElement.contains(e);if(!(e&&e.tagName==="ME-TPC"&&e!==n&&!o&&e.nodeObj.root!==!0))return!1}return!0},Wi=function(e){const t=document.createElement("div");return t.className="mind-elixir-ghost",e.map.appendChild(t),t};function Ui(e){let t=null,n=null,o=null;const i=Wi(e),s=12;e.map.addEventListener("dragstart",r=>{var a,d;const p=r.target;if((p==null?void 0:p.tagName)!=="ME-TPC"){r.preventDefault();return}(a=e.currentNodes)!=null&&a.includes(p)||(e.unselectNodes(),e.selectNode(p)),e.currentNodes?(t=e.currentNodes,i.innerHTML=e.currentNodes.length+" nodes"):(t=[p],i.innerHTML=p.innerHTML);for(const u of t)u.parentElement.parentElement.style.opacity="0.5";(d=r.dataTransfer)==null||d.setDragImage(i,0,0),ve.clear()}),e.map.addEventListener("dragend",async r=>{if(!t)return;for(const d of t)d.parentElement.parentElement.style.opacity="1";const a=r.target;a.style.opacity="",o&&(Yt(o),n==="before"?e.moveNodeBefore(t,o):n==="after"?e.moveNodeAfter(t,o):n==="in"&&e.moveNodeIn(t,o),t=null)}),e.map.addEventListener("dragover",Mi(function(r){if(!t)return;Yt(o);const a=Rt.elementFromPoint(r.clientX,r.clientY-s);if(vn(a,t)){o=a;const d=a.getBoundingClientRect().y;r.clientY>d+a.clientHeight?n="after":n="in"}else{const d=Rt.elementFromPoint(r.clientX,r.clientY+s);if(vn(d,t)){o=d;const p=d.getBoundingClientRect().y;r.clientY<p?n="before":n="in"}else n=o=null}o&&qi(o,n)},100))}const Ki=function(e){return["createSummary","removeSummary","finishEditSummary"].includes(e.name)?{type:"summary",value:e.obj.id}:["createArrow","removeArrow","finishEditArrowLabel"].includes(e.name)?{type:"arrow",value:e.obj.id}:["removeNodes","copyNodes","moveNodeBefore","moveNodeAfter","moveNodeIn"].includes(e.name)?{type:"nodes",value:e.objs.map(t=>t.id)}:{type:"node",value:e.obj.id}};function Zi(e){let t=[],n=-1,o=e.getData();e.bus.addListener("operation",i=>{if(i.name==="beginEdit")return;t=t.slice(0,n+1);const s=e.getData();t.push({prev:o,currentObject:Ki(i),next:s}),o=s,n=t.length-1}),e.undo=function(){if(n>-1){const i=t[n];o=i.prev,e.refresh(i.prev),i.currentObject.type==="node"?e.selectNode(Z(i.currentObject.value)):i.currentObject.type==="nodes"&&e.selectNodes(i.currentObject.value.map(s=>Z(s))),n--,console.log("current",o)}},e.redo=function(){if(n<t.length-1){n++;const i=t[n];o=i.next,e.refresh(i.next),i.currentObject.type==="node"?e.selectNode(Z(i.currentObject.value)):i.currentObject.type==="nodes"&&e.selectNodes(i.currentObject.value.map(s=>Z(s)))}},e.map.addEventListener("keydown",i=>{(i.metaKey||i.ctrlKey)&&i.shiftKey&&i.key==="Z"?e.redo():(i.metaKey||i.ctrlKey)&&i.key==="z"&&e.undo()})}const Re=(e,t)=>{const n=document.createElement("span");return n.id=e,n.innerHTML=`<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-${t}"></use>
  </svg>`,n};function Xi(e){const t=document.createElement("div"),n=Re("fullscreen","full"),o=Re("toCenter","living"),i=Re("zoomout","move"),s=Re("zoomin","add"),r=document.createElement("span");return r.innerText="100%",t.appendChild(n),t.appendChild(o),t.appendChild(i),t.appendChild(s),t.className="mind-elixir-toolbar rb",n.onclick=()=>{e.container.requestFullscreen()},o.onclick=()=>{e.toCenter()},i.onclick=()=>{e.scaleVal<.6||e.scale(e.scaleVal-=.2)},s.onclick=()=>{e.scaleVal>1.6||e.scale(e.scaleVal+=.2)},t}function Gi(e){const t=document.createElement("div"),n=Re("tbltl","left"),o=Re("tbltr","right"),i=Re("tblts","side");return t.appendChild(n),t.appendChild(o),t.appendChild(i),t.className="mind-elixir-toolbar lt",n.onclick=()=>{e.initLeft()},o.onclick=()=>{e.initRight()},i.onclick=()=>{e.initSide()},t}function Ji(e){e.container.append(Xi(e)),e.container.append(Gi(e))}/*! @viselect/vanilla v3.3.1 MIT | https://github.com/Simonwep/selection/tree/master/packages/vanilla */var Qi=Object.defineProperty,es=(e,t,n)=>t in e?Qi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U=(e,t,n)=>(es(e,typeof t!="symbol"?t+"":t,n),n);class ts{constructor(){U(this,"_listeners",new Map),U(this,"on",this.addEventListener),U(this,"off",this.removeEventListener),U(this,"emit",this.dispatchEvent)}addEventListener(t,n){const o=this._listeners.get(t)??new Set;return this._listeners.set(t,o),o.add(n),this}removeEventListener(t,n){var o;return(o=this._listeners.get(t))==null||o.delete(n),this}dispatchEvent(t,...n){let o=!0;for(const i of this._listeners.get(t)??[])o=i(...n)!==!1&&o;return o}unbindAllListeners(){this._listeners.clear()}}const gn=(e,t="px")=>typeof e=="number"?e+t:e;function Le({style:e},t,n){if(typeof t=="object")for(const[o,i]of Object.entries(t))i!==void 0&&(e[o]=gn(i));else n!==void 0&&(e[t]=gn(n))}function Vn(e){return(t,n,o,i={})=>{t instanceof HTMLCollection||t instanceof NodeList?t=Array.from(t):Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);for(const s of t)for(const r of n)s[e](r,o,{capture:!1,...i});return[t,n,o,i]}}const et=Vn("addEventListener"),Te=Vn("removeEventListener"),Mt=e=>{var t;const{clientX:n,clientY:o,target:i}=((t=e.touches)==null?void 0:t[0])??e;return{x:n,y:o,target:i}};function bn(e,t,n="touch"){switch(n){case"center":{const o=t.left+t.width/2,i=t.top+t.height/2;return o>=e.left&&o<=e.right&&i>=e.top&&i<=e.bottom}case"cover":return t.left>=e.left&&t.top>=e.top&&t.right<=e.right&&t.bottom<=e.bottom;case"touch":return e.right>=t.left&&e.left<=t.right&&e.bottom>=t.top&&e.top<=t.bottom}}function tt(e,t=document){const n=Array.isArray(e)?e:[e];let o=[];for(let i=0,s=n.length;i<s;i++){const r=n[i];typeof r=="string"?o=o.concat(Array.from(t.querySelectorAll(r))):r instanceof Element&&o.push(r)}return o}const ns=()=>matchMedia("(hover: none), (pointer: coarse)").matches,os=()=>"safari"in window,is=e=>{let t,n=-1,o=!1;return{next(...i){t=i,o||(o=!0,n=requestAnimationFrame(()=>{e(...t),o=!1}))},cancel(){cancelAnimationFrame(n),o=!1}}},{abs:He,max:yn,min:xn,ceil:wn}=Math;class Pn extends ts{constructor(t){var n,o,i,s,r;super(),U(this,"_options"),U(this,"_selection",{stored:[],selected:[],touched:[],changed:{added:[],removed:[]}}),U(this,"_area"),U(this,"_clippingElement"),U(this,"_targetElement"),U(this,"_targetRect"),U(this,"_selectables",[]),U(this,"_latestElement"),U(this,"_areaRect",new DOMRect),U(this,"_areaLocation",{y1:0,x2:0,y2:0,x1:0}),U(this,"_singleClick",!0),U(this,"_frame"),U(this,"_scrollAvailable",!0),U(this,"_scrollingActive",!1),U(this,"_scrollSpeed",{x:0,y:0}),U(this,"_scrollDelta",{x:0,y:0}),U(this,"disable",this._bindStartEvents.bind(this,!1)),U(this,"enable",this._bindStartEvents),this._options={selectionAreaClass:"selection-area",selectionContainerClass:void 0,selectables:[],document:window.document,startAreas:["html"],boundaries:["html"],container:"body",...t,behaviour:{overlap:"invert",intersect:"touch",...t.behaviour,startThreshold:(n=t.behaviour)!=null&&n.startThreshold?typeof t.behaviour.startThreshold=="number"?t.behaviour.startThreshold:{x:10,y:10,...t.behaviour.startThreshold}:{x:10,y:10},scrolling:{speedDivider:10,manualSpeed:750,...(o=t.behaviour)==null?void 0:o.scrolling,startScrollMargins:{x:0,y:0,...(s=(i=t.behaviour)==null?void 0:i.scrolling)==null?void 0:s.startScrollMargins}}},features:{range:!0,touch:!0,...t.features,singleTap:{allow:!0,intersect:"native",...(r=t.features)==null?void 0:r.singleTap}}};for(const u of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))typeof this[u]=="function"&&(this[u]=this[u].bind(this));const{document:a,selectionAreaClass:d,selectionContainerClass:p}=this._options;this._area=a.createElement("div"),this._clippingElement=a.createElement("div"),this._clippingElement.appendChild(this._area),this._area.classList.add(d),p&&this._clippingElement.classList.add(p),Le(this._area,{willChange:"top, left, bottom, right, width, height",top:0,left:0,position:"fixed"}),Le(this._clippingElement,{overflow:"hidden",position:"fixed",transform:"translate3d(0, 0, 0)",pointerEvents:"none",zIndex:"1"}),this._frame=is(u=>{this._recalculateSelectionAreaRect(),this._updateElementSelection(),this._emitEvent("move",u),this._redrawSelectionArea()}),this.enable()}_bindStartEvents(t=!0){const{document:n,features:o}=this._options,i=t?et:Te;i(n,"mousedown",this._onTapStart),o.touch&&i(n,"touchstart",this._onTapStart,{passive:!1})}_onTapStart(t,n=!1){const{x:o,y:i,target:s}=Mt(t),{_options:r}=this,{document:a}=this._options,d=s.getBoundingClientRect(),p=tt(r.startAreas,r.document),u=tt(r.boundaries,r.document);this._targetElement=u.find(y=>bn(y.getBoundingClientRect(),d));const f=t.composedPath();if(!this._targetElement||!p.find(y=>f.includes(y))||!u.find(y=>f.includes(y))||!n&&this._emitEvent("beforestart",t)===!1)return;this._areaLocation={x1:o,y1:i,x2:0,y2:0};const m=a.scrollingElement??a.body;this._scrollDelta={x:m.scrollLeft,y:m.scrollTop},this._singleClick=!0,this.clearSelection(!1,!0),et(a,["touchmove","mousemove"],this._delayedTapMove,{passive:!1}),et(a,["mouseup","touchcancel","touchend"],this._onTapStop),et(a,"scroll",this._onScroll)}_onSingleTap(t){const{singleTap:{intersect:n},range:o}=this._options.features,i=Mt(t);let s;if(n==="native")s=i.target;else if(n==="touch"){this.resolveSelectables();const{x:a,y:d}=i;s=this._selectables.find(p=>{const{right:u,left:f,top:m,bottom:y}=p.getBoundingClientRect();return a<u&&a>f&&d<y&&d>m})}if(!s)return;for(this.resolveSelectables();!this._selectables.includes(s);){if(!s.parentElement)return;s=s.parentElement}const{stored:r}=this._selection;if(this._emitEvent("start",t),t.shiftKey&&o&&this._latestElement){const a=this._latestElement,[d,p]=a.compareDocumentPosition(s)&4?[s,a]:[a,s],u=[...this._selectables.filter(f=>f.compareDocumentPosition(d)&4&&f.compareDocumentPosition(p)&2),d,p];this.select(u),this._latestElement=a}else r.includes(s)&&(r.length===1||t.ctrlKey||r.every(a=>this._selection.stored.includes(a)))?this.deselect(s):(this.select(s),this._latestElement=s);this._emitEvent("stop",t)}_delayedTapMove(t){const{container:n,document:o,behaviour:{startThreshold:i}}=this._options,{x1:s,y1:r}=this._areaLocation,{x:a,y:d}=Mt(t);if(typeof i=="number"&&He(a+d-(s+r))>=i||typeof i=="object"&&He(a-s)>=i.x||He(d-r)>=i.y){if(Te(o,["mousemove","touchmove"],this._delayedTapMove,{passive:!1}),this._emitEvent("beforedrag",t)===!1){Te(o,["mouseup","touchcancel","touchend"],this._onTapStop);return}et(o,["mousemove","touchmove"],this._onTapMove,{passive:!1}),Le(this._area,"display","block"),tt(n,o)[0].appendChild(this._clippingElement),this.resolveSelectables(),this._singleClick=!1,this._targetRect=this._targetElement.getBoundingClientRect(),this._scrollAvailable=this._targetElement.scrollHeight!==this._targetElement.clientHeight||this._targetElement.scrollWidth!==this._targetElement.clientWidth,this._scrollAvailable&&(et(o,"wheel",this._manualScroll,{passive:!1}),this._selectables=this._selectables.filter(p=>this._targetElement.contains(p))),this._setupSelectionArea(),this._emitEvent("start",t),this._onTapMove(t)}this._handleMoveEvent(t)}_setupSelectionArea(){const{_clippingElement:t,_targetElement:n,_area:o}=this,i=this._targetRect=n.getBoundingClientRect();this._scrollAvailable?(Le(t,{top:i.top,left:i.left,width:i.width,height:i.height}),Le(o,{marginTop:-i.top,marginLeft:-i.left})):(Le(t,{top:0,left:0,width:"100%",height:"100%"}),Le(o,{marginTop:0,marginLeft:0}))}_onTapMove(t){const{x:n,y:o}=Mt(t),{_scrollSpeed:i,_areaLocation:s,_options:r,_frame:a}=this,{speedDivider:d}=r.behaviour.scrolling,p=this._targetElement;if(s.x2=n,s.y2=o,this._scrollAvailable&&!this._scrollingActive&&(i.y||i.x)){this._scrollingActive=!0;const u=()=>{if(!i.x&&!i.y){this._scrollingActive=!1;return}const{scrollTop:f,scrollLeft:m}=p;i.y&&(p.scrollTop+=wn(i.y/d),s.y1-=p.scrollTop-f),i.x&&(p.scrollLeft+=wn(i.x/d),s.x1-=p.scrollLeft-m),a.next(t),requestAnimationFrame(u)};requestAnimationFrame(u)}else a.next(t);this._handleMoveEvent(t)}_handleMoveEvent(t){const{features:n}=this._options;(n.touch&&ns()||this._scrollAvailable&&os())&&t.preventDefault()}_onScroll(){const{_scrollDelta:t,_options:{document:n}}=this,{scrollTop:o,scrollLeft:i}=n.scrollingElement??n.body;this._areaLocation.x1+=t.x-i,this._areaLocation.y1+=t.y-o,t.x=i,t.y=o,this._setupSelectionArea(),this._frame.next(null)}_manualScroll(t){const{manualSpeed:n}=this._options.behaviour.scrolling,o=t.deltaY?t.deltaY>0?1:-1:0,i=t.deltaX?t.deltaX>0?1:-1:0;this._scrollSpeed.y+=o*n,this._scrollSpeed.x+=i*n,this._onTapMove(t),t.preventDefault()}_recalculateSelectionAreaRect(){const{_scrollSpeed:t,_areaLocation:n,_areaRect:o,_targetElement:i,_options:s}=this,{scrollTop:r,scrollHeight:a,clientHeight:d,scrollLeft:p,scrollWidth:u,clientWidth:f}=i,m=this._targetRect,{x1:y,y1:x}=n;let{x2:v,y2:h}=n;const{behaviour:{scrolling:{startScrollMargins:b}}}=s;v<m.left+b.x?(t.x=p?-He(m.left-v+b.x):0,v=v<m.left?m.left:v):v>m.right-b.x?(t.x=u-p-f?He(m.left+m.width-v-b.x):0,v=v>m.right?m.right:v):t.x=0,h<m.top+b.y?(t.y=r?-He(m.top-h+b.y):0,h=h<m.top?m.top:h):h>m.bottom-b.y?(t.y=a-r-d?He(m.top+m.height-h-b.y):0,h=h>m.bottom?m.bottom:h):t.y=0;const $=xn(y,v),A=xn(x,h),j=yn(y,v),I=yn(x,h);o.x=$,o.y=A,o.width=j-$,o.height=I-A}_redrawSelectionArea(){const{x:t,y:n,width:o,height:i}=this._areaRect,{style:s}=this._area;s.left=`${t}px`,s.top=`${n}px`,s.width=`${o}px`,s.height=`${i}px`}_onTapStop(t,n){var o;const{document:i,features:s}=this._options,{_singleClick:r}=this;Te(i,["mousemove","touchmove"],this._delayedTapMove),Te(i,["touchmove","mousemove"],this._onTapMove),Te(i,["mouseup","touchcancel","touchend"],this._onTapStop),Te(i,"scroll",this._onScroll),this._keepSelection(),t&&r&&s.singleTap.allow?this._onSingleTap(t):!r&&!n&&(this._updateElementSelection(),this._emitEvent("stop",t)),this._scrollSpeed.x=0,this._scrollSpeed.y=0,this._scrollAvailable&&Te(i,"wheel",this._manualScroll,{passive:!0}),this._clippingElement.remove(),(o=this._frame)==null||o.cancel(),Le(this._area,"display","none")}_updateElementSelection(){const{_selectables:t,_options:n,_selection:o,_areaRect:i}=this,{stored:s,selected:r,touched:a}=o,{intersect:d,overlap:p}=n.behaviour,u=p==="invert",f=[],m=[],y=[];for(let v=0;v<t.length;v++){const h=t[v];if(bn(i,h.getBoundingClientRect(),d)){if(r.includes(h))s.includes(h)&&!a.includes(h)&&a.push(h);else if(u&&s.includes(h)){y.push(h);continue}else m.push(h);f.push(h)}}u&&m.push(...s.filter(v=>!r.includes(v)));const x=p==="keep";for(let v=0;v<r.length;v++){const h=r[v];!f.includes(h)&&!(x&&s.includes(h))&&y.push(h)}o.selected=f,o.changed={added:m,removed:y},this._latestElement=void 0}_emitEvent(t,n){return this.emit(t,{event:n,store:this._selection,selection:this})}_keepSelection(){const{_options:t,_selection:n}=this,{selected:o,changed:i,touched:s,stored:r}=n,a=o.filter(d=>!r.includes(d));switch(t.behaviour.overlap){case"drop":{n.stored=[...a,...r.filter(d=>!s.includes(d))];break}case"invert":{n.stored=[...a,...r.filter(d=>!i.removed.includes(d))];break}case"keep":{n.stored=[...r,...o.filter(d=>!r.includes(d))];break}}}trigger(t,n=!0){this._onTapStart(t,n)}resolveSelectables(){this._selectables=tt(this._options.selectables,this._options.document)}clearSelection(t=!0,n=!1){const{selected:o,stored:i,changed:s}=this._selection;s.added=[],s.removed.push(...o,...t?i:[]),n||(this._emitEvent("move",null),this._emitEvent("stop",null)),this._selection={stored:t?[]:i,selected:[],touched:[],changed:{added:[],removed:[]}}}getSelection(){return this._selection.stored}getSelectionArea(){return this._area}cancel(t=!1){this._onTapStop(null,!t)}destroy(){this.cancel(),this.disable(),this._clippingElement.remove(),super.unbindAllListeners()}select(t,n=!1){const{changed:o,selected:i,stored:s}=this._selection,r=tt(t,this._options.document).filter(a=>!i.includes(a)&&!s.includes(a));return s.push(...r),i.push(...r),o.added.push(...r),o.removed=[],this._latestElement=void 0,n||(this._emitEvent("move",null),this._emitEvent("stop",null)),r}deselect(t,n=!1){const{selected:o,stored:i,changed:s}=this._selection,r=tt(t,this._options.document).filter(a=>o.includes(a)||i.includes(a));r.length&&(this._selection.stored=i.filter(a=>!r.includes(a)),this._selection.selected=o.filter(a=>!r.includes(a)),this._selection.changed.added=[],this._selection.changed.removed.push(...r.filter(a=>!s.removed.includes(a))),this._latestElement=void 0,n||(this._emitEvent("move",null),this._emitEvent("stop",null)))}}U(Pn,"version","3.3.1");function ss(e){const t=new Pn({selectables:[".map-container me-tpc"],boundaries:[e.container],container:"body",behaviour:{scrolling:{speedDivider:10,manualSpeed:750,startScrollMargins:{x:10,y:10}}}}).on("beforestart",({event:n})=>{if(n.button!==e.mouseSelectionButton||n.target.tagName==="ME-TPC"||n.target.id==="input-box"||n.target.className==="circle")return!1;const o=t.getSelectionArea();return o.style.background="#4f90f22d",o.style.border="1px solid #4f90f2",o.parentElement&&(o.parentElement.style.zIndex="9999"),!0}).on("start",({event:n})=>{!n.ctrlKey&&!n.metaKey&&(e.clearSelection(),t.clearSelection(!0,!0))}).on("move",({store:{changed:{added:n,removed:o}}})=>{ve.moved=!0;for(const i of n)i.classList.add("selected");for(const i of o)i.classList.remove("selected")}).on("stop",({store:{stored:n}})=>{e.selectNodes(n)});e.selection=t}const rs=function(e,t=!0){this.theme=e;const n=this.theme.cssVar,o=Object.keys(n);for(let i=0;i<o.length;i++){const s=o[i];this.mindElixirBox.style.setProperty(s,n[s])}t&&this.refresh()};function Hn(e){return{nodeData:e.isFocusMode?e.nodeDataBackup:e.nodeData,arrows:e.arrows,summaries:e.summaries,direction:e.direction,theme:e.theme}}const ls=function(e,t,n){if(e){if(console.time("selectNode"),this.clearSelection(),typeof e=="string"){const o=Z(e);return o?this.selectNode(o):void 0}e.className="selected",e.scrollIntoView({block:"nearest",inline:"nearest"}),this.currentNode=e,t?this.bus.fire("selectNewNode",e.nodeObj):this.bus.fire("selectNode",e.nodeObj,n),console.timeEnd("selectNode")}},as=function(){this.currentNode&&(this.currentNode.className=""),this.currentNode=null,this.bus.fire("unselectNode")},ds=function(e){console.time("selectNodes"),this.clearSelection();for(const t of e)t.className="selected";this.currentNodes=e,this.bus.fire("selectNodes",e.map(t=>t.nodeObj)),console.timeEnd("selectNodes")},cs=function(){if(this.currentNodes)for(const e of this.currentNodes)e.classList.remove("selected");this.currentNodes=null,this.bus.fire("unselectNodes")},us=function(){this.unselectNode(),this.unselectNodes(),this.unselectSummary(),this.unselectArrow()},ps=function(){const e=Hn(this);return JSON.stringify(e,(t,n)=>{if(!(t==="parent"&&typeof n!="string"))return n})},ms=function(){return JSON.parse(this.getDataString())},hs=function(){const e=Hn(this).nodeData;let t="# "+e.topic+`

`;function n(o,i){for(let s=0;s<o.length;s++)i<=6?t+="".padStart(i,"#")+" "+o[s].topic+`

`:t+="".padStart(i-7,"	")+"- "+o[s].topic+`
`,o[s].children&&n(o[s].children||[],i+1)}return n(e.children||[],2),t},fs=function(){this.editable=!0},vs=function(){this.editable=!1},gs=function(e){this.scaleVal=e,this.map.style.transform="scale("+e+")"},bs=function(){this.container.scrollTo(1e4-this.container.offsetWidth/2,1e4-this.container.offsetHeight/2)},ys=function(e){e(this)},xs=function(e){e.nodeObj.root||(this.tempDirection===null&&(this.tempDirection=this.direction),this.isFocusMode||(this.nodeDataBackup=this.nodeData,this.isFocusMode=!0),this.nodeData=e.nodeObj,this.nodeData.root=!0,this.initRight(),this.toCenter())},ws=function(){this.isFocusMode=!1,this.tempDirection!==null&&(delete this.nodeData.root,this.nodeData=this.nodeDataBackup,this.direction=this.tempDirection,this.tempDirection=null,this.refresh(),this.toCenter())},Cs=function(){this.direction=0,this.refresh()},Ms=function(){this.direction=1,this.refresh()},_s=function(){this.direction=2,this.refresh()},Ns=function(e){this.locale=e,this.refresh()},ks=function(e,t){const n=e.nodeObj;typeof t=="boolean"?n.expanded=t:n.expanded!==!1?n.expanded=!1:n.expanded=!0,this.layout(),this.linkDiv(),this.bus.fire("expandNode",n)},Es=function(e){e&&(e=JSON.parse(JSON.stringify(e)),this.nodeData=e.nodeData,this.arrows=e.arrows||[],this.summaries=e.summaries||[]),De(this.nodeData),this.layout(),this.linkDiv()},Ss=Object.freeze(Object.defineProperty({__proto__:null,cancelFocus:ws,clearSelection:us,disableEdit:vs,enableEdit:fs,expandNode:ks,focusNode:xs,getData:ms,getDataMd:hs,getDataString:ps,initLeft:Cs,initRight:Ms,initSide:_s,install:ys,refresh:Es,scale:gs,selectNode:ls,selectNodes:ds,setLocale:Ns,toCenter:bs,unselectNode:as,unselectNodes:cs},Symbol.toStringTag,{value:"Module"})),lt=e=>{var t;const n=(t=e.parent)==null?void 0:t.children,o=n.indexOf(e);return{siblings:n,index:o}};function Ls(e){const{siblings:t,index:n}=lt(e),o=t[n];n===0?(t[n]=t[t.length-1],t[t.length-1]=o):(t[n]=t[n-1],t[n-1]=o)}function Ts(e){const{siblings:t,index:n}=lt(e),o=t[n];n===t.length-1?(t[n]=t[0],t[0]=o):(t[n]=t[n+1],t[n+1]=o)}function Xt(e){const{siblings:t,index:n}=lt(e);return t.splice(n,1),t.length}function zs(e,t,n){const{siblings:o,index:i}=lt(n);t==="before"?o.splice(i,0,e):o.splice(i+1,0,e)}function js(e,t){const{siblings:n,index:o}=lt(e);n[o]=t,t.children=[e]}function Bn(e,t,n){if(Xt(t),e==="in")n.children?n.children.push(t):n.children=[t];else{t.direction!==void 0&&(t.direction=n.direction);const{siblings:o,index:i}=lt(n);e==="before"?o.splice(i,0,t):o.splice(i+1,0,t)}}const As=function(e,t){var n,o;if(e===be)return be;if(e===Be)return Be;if(e===zt){const i=((n=document.querySelector(".lhs"))==null?void 0:n.childElementCount)||0,s=((o=document.querySelector(".rhs"))==null?void 0:o.childElementCount)||0;return i<=s?(t.direction=be,be):(t.direction=Be,Be)}},Rn=function(e,t,n){var o,i;const s=n.children[0].children[0],r=t.parentElement;if(r.tagName==="ME-PARENT"){if(At(s),r.children[1])r.nextSibling.appendChild(n);else{const a=e.createChildren([n]);r.appendChild(Zt(!0)),r.insertAdjacentElement("afterend",a)}e.linkDiv(n.offsetParent)}else r.tagName==="ME-ROOT"&&(As(e.direction,s.nodeObj)===be?(o=document.querySelector(".lhs"))==null||o.appendChild(n):(i=document.querySelector(".rhs"))==null||i.appendChild(n),e.linkDiv())},Gt=function(e,t,n){if(!t)return null;const o=t.nodeObj;o.expanded===!1&&(e.expandNode(t,!0),t=Z(o.id));const i=n||e.generateNewObj();o.children?o.children.push(i):o.children=[i],De(e.nodeData);const{grp:s,top:r}=e.createWrapper(i);return Rn(e,t,s),{newTop:r,newNodeObj:i}},Yn=function(e,t){const n=e.parentNode;if(t===0){const o=n.parentNode.parentNode;o.tagName!=="ME-MAIN"&&o.previousSibling.children[1].remove()}n.parentNode.remove()},Fn={before:"beforebegin",after:"afterend"},At=function(e){const t=e.parentElement.parentElement.lastElementChild;(t==null?void 0:t.tagName)==="svg"&&(t==null||t.remove())},Ds=function(e,t){const n=e.nodeObj,o=Ut(n);o.style&&t.style&&(t.style=Object.assign(o.style,t.style));const i=Object.assign(n,t);Kt(e,i),this.linkDiv(),this.bus.fire("operation",{name:"reshapeNode",obj:i,origin:o})},$s=function(e,t,n){var o,i,s;const r=t||this.currentNode;if(!r)return;const a=r.nodeObj;if(a.root===!0){this.addChild();return}else if(((o=a.parent)==null?void 0:o.root)===!0&&((s=(i=a.parent)==null?void 0:i.children)==null?void 0:s.length)===1){this.addChild(Z(a.parent.id));return}const d=n||this.generateNewObj();zs(d,e,a),De(this.nodeData);const p=r.parentElement;console.time("insertSibling_DOM");const{grp:u,top:f}=this.createWrapper(d);p.parentElement.insertAdjacentElement(Fn[e],u),this.linkDiv(u.offsetParent),n||this.editTopic(f.firstChild),this.selectNode(f.firstChild,!0),console.timeEnd("insertSibling_DOM"),this.bus.fire("operation",{name:"insertSibling",type:e,obj:d})},Os=function(e,t){const n=e||this.currentNode;if(!n)return;At(n);const o=n.nodeObj;if(o.root===!0)return;const i=t||this.generateNewObj();js(o,i),De(this.nodeData);const s=n.parentElement.parentElement;console.time("insertParent_DOM");const{grp:r,top:a}=this.createWrapper(i,!0);a.appendChild(Zt(!0)),s.insertAdjacentElement("afterend",r);const d=this.createChildren([s]);a.insertAdjacentElement("afterend",d),this.linkDiv(),t||this.editTopic(a.firstChild),this.selectNode(a.firstChild,!0),console.timeEnd("insertParent_DOM"),this.bus.fire("operation",{name:"insertParent",obj:i})},Is=function(e,t){console.time("addChild");const n=e||this.currentNode;if(!n)return;const o=Gt(this,n,t);if(!o)return;const{newTop:i,newNodeObj:s}=o;this.bus.fire("operation",{name:"addChild",obj:s}),console.timeEnd("addChild"),t||this.editTopic(i.firstChild),this.selectNode(i.firstChild,!0)},Vs=function(e,t){console.time("copyNode");const n=Ut(e.nodeObj);Wt(n);const o=Gt(this,t,n);if(!o)return;const{newNodeObj:i}=o;console.timeEnd("copyNode"),this.selectNode(Z(i.id)),this.bus.fire("operation",{name:"copyNode",obj:i})},Ps=function(e,t){e=jt(e);const n=[];for(let o=0;o<e.length;o++){const i=e[o],s=Ut(i.nodeObj);Wt(s);const r=Gt(this,t,s);if(!r)return;const{newNodeObj:a}=r;n.push(a)}this.selectNodes(n.map(o=>Z(o.id))),this.bus.fire("operation",{name:"copyNodes",objs:n})},Hs=function(e){const t=e||this.currentNode;if(!t)return;const n=t.nodeObj;Ls(n);const o=t.parentNode.parentNode;o.parentNode.insertBefore(o,o.previousSibling),this.linkDiv(),this.bus.fire("operation",{name:"moveUpNode",obj:n})},Bs=function(e){const t=e||this.currentNode;if(!t)return;const n=t.nodeObj;Ts(n);const o=t.parentNode.parentNode;o.nextSibling?o.nextSibling.insertAdjacentElement("afterend",o):o.parentNode.prepend(o),this.linkDiv(),this.bus.fire("operation",{name:"moveDownNode",obj:n})},Rs=function(e){var t;const n=e||this.currentNode;if(!n)return;const o=n.nodeObj;if(o.root===!0)throw new Error("Can not remove root node");const i=o.parent.children,s=i.findIndex(a=>a===o),r=Xt(o);if(Yn(n,r),i.length!==0){const a=i[s]||i[s-1];this.selectNode(Z(a.id))}else this.selectNode(Z(o.parent.id));this.linkDiv(),this.bus.fire("operation",{name:"removeNode",obj:o,originIndex:s,originParentId:(t=o==null?void 0:o.parent)==null?void 0:t.id})},Ys=function(e){e=jt(e);for(const t of e){const n=t.nodeObj;if(n.root===!0)continue;const o=Xt(n);Yn(t,o)}this.linkDiv(),this.bus.fire("operation",{name:"removeNodes",objs:e.map(t=>t.nodeObj)})},Fs=function(e,t){e=jt(e);const n=t.nodeObj;n.expanded===!1&&(this.expandNode(t,!0),t=Z(n.id)),console.time("moveNodeIn");for(const o of e){const i=o.nodeObj;Bn("in",i,n),De(this.nodeData);const s=o.parentElement;Rn(this,t,s.parentElement)}this.linkDiv(),this.bus.fire("operation",{name:"moveNodeIn",objs:e.map(o=>o.nodeObj),toObj:n}),console.timeEnd("moveNodeIn")},qn=(e,t,n,o)=>{e=jt(e),t==="after"&&(e=e.reverse());const i=n.nodeObj;for(const s of e){const r=s.nodeObj;Bn(t,r,i),De(o.nodeData),At(s);const a=s.parentElement.parentNode;n.parentElement.parentNode.insertAdjacentElement(Fn[t],a)}o.linkDiv(),o.bus.fire("operation",{name:t==="before"?"moveNodeBefore":"moveNodeAfter",objs:e.map(s=>s.nodeObj),toObj:i})},qs=function(e,t){qn(e,"before",t,this)},Ws=function(e,t){qn(e,"after",t,this)},Us=function(e){const t=e||this.currentNode;t&&(t.nodeObj.dangerouslySetInnerHTML||this.editTopic(t))},Ks=function(e,t){e.text.textContent=t,e.nodeObj.topic=t,this.linkDiv()},Wn=Object.freeze(Object.defineProperty({__proto__:null,addChild:Is,beginEdit:Us,copyNode:Vs,copyNodes:Ps,insertParent:Os,insertSibling:$s,mainToSub:At,moveDownNode:Bs,moveNodeAfter:Ws,moveNodeBefore:qs,moveNodeIn:Fs,moveUpNode:Hs,removeNode:Rs,removeNodes:Ys,reshapeNode:Ds,setNodeTopic:Ks},Symbol.toStringTag,{value:"Module"})),Zs=function(e){return{dom:e,moved:!1,mousedown:!1,handleMouseMove(t){this.mousedown&&(this.moved=!0,this.cb&&this.cb(t.movementX,t.movementY))},handleMouseDown(t){t.button===0&&(this.mousedown=!0)},handleClear(t){this.mousedown=!1},cb:null,init(t,n){this.cb=n,this.handleClear=this.handleClear.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),t.addEventListener("mousemove",this.handleMouseMove),t.addEventListener("mouseleave",this.handleClear),t.addEventListener("mouseup",this.handleClear),this.dom.addEventListener("mousedown",this.handleMouseDown)},destory(t){t.removeEventListener("mousemove",this.handleMouseMove),t.removeEventListener("mouseleave",this.handleClear),t.removeEventListener("mouseup",this.handleClear),this.dom.removeEventListener("mousedown",this.handleMouseDown)},clear(){this.moved=!1,this.mousedown=!1}}},Cn={create:Zs};function Lt(e,t,n){const{offsetLeft:o,offsetTop:i}=$e(e.nodes,t),s=t.offsetWidth,r=t.offsetHeight,a=o+s/2,d=i+r/2,p=a+n.x,u=d+n.y;return{w:s,h:r,cx:a,cy:d,ctrlX:p,ctrlY:u}}function ot(e){let t,n;const o=(e.cy-e.ctrlY)/(e.ctrlX-e.cx);return o>e.h/e.w||o<-e.h/e.w?e.cy-e.ctrlY<0?(t=e.cx-e.h/2/o,n=e.cy+e.h/2):(t=e.cx+e.h/2/o,n=e.cy-e.h/2):e.cx-e.ctrlX<0?(t=e.cx+e.w/2,n=e.cy-e.w*o/2):(t=e.cx-e.w/2,n=e.cy+e.w*o/2),{x:t,y:n}}const Xs=function(e,t,n,o){const i=document.createElementNS("http://www.w3.org/2000/svg","text");return K(i,{"text-anchor":"middle",x:t+"",y:n+"",fill:o||"#666"}),i.dataset.type="custom-link",i.innerHTML=e,i},Un=function(e,t,n,o,i){if(!t||!n)return;const s=performance.now(),r=Lt(e,t,o.delta1),a=Lt(e,n,o.delta2),{x:d,y:p}=ot(r),{ctrlX:u,ctrlY:f}=r,{ctrlX:m,ctrlY:y}=a,{x,y:v}=ot(a),h=An(m,y,x,v),b=$i(`M ${d} ${p} C ${u} ${f} ${m} ${y} ${x} ${v}`,`M ${h.x1} ${h.y1} L ${x} ${v} L ${h.x2} ${h.y2}`),$=d/8+u*3/8+m*3/8+x/8,A=p/8+f*3/8+y*3/8+v/8,j=Xs(o.label,$,A,e.theme.cssVar["--color"]);b.appendChild(j),b.arrowObj=o,b.dataset.linkid=o.id,e.linkSvgGroup.appendChild(b),i||(e.arrows.push(o),e.currentArrow=b,Zn(e,o,r,a));const I=performance.now();console.log(`DrawArrow Execution time: ${I-s} ms`)},Gs=function(e,t){const n={id:gt(),label:"Custom Link",from:e.nodeObj.id,to:t.nodeObj.id,delta1:{x:0,y:-200},delta2:{x:0,y:-200}};Un(this,e,t,n),this.bus.fire("operation",{name:"createArrow",obj:n})},Js=function(e){let t;if(e?t=e:t=this.currentArrow,!t)return;Kn(this);const n=t.arrowObj.id;this.arrows=this.arrows.filter(o=>o.id!==n),t.remove(),this.bus.fire("operation",{name:"removeArrow",obj:{id:n}})},Qs=function(e){this.currentArrow=e;const t=e.arrowObj,n=Z(t.from),o=Z(t.to),i=Lt(this,n,t.delta1),s=Lt(this,o,t.delta2);Zn(this,t,i,s)},er=function(){this.currentArrow=null,Kn(this)},Kn=function(e){e.linkController.style.display="none",e.P2.style.display="none",e.P3.style.display="none"},Zn=function(e,t,n,o){var i;e.linkController.style.display="initial",e.P2.style.display="initial",e.P3.style.display="initial",e.nodes.appendChild(e.linkController),e.nodes.appendChild(e.P2),e.nodes.appendChild(e.P3);let{x:s,y:r}=ot(n),{ctrlX:a,ctrlY:d}=n,{ctrlX:p,ctrlY:u}=o,{x:f,y:m}=ot(o);e.P2.style.cssText=`top:${d}px;left:${a}px;`,e.P3.style.cssText=`top:${u}px;left:${p}px;`,K(e.line1,{x1:s+"",y1:r+"",x2:a+"",y2:d+""}),K(e.line2,{x1:p+"",y1:u+"",x2:f+"",y2:m+""}),e.helper1&&(e.helper1.destory(e.map),(i=e.helper2)==null||i.destory(e.map)),e.helper1=Cn.create(e.P2),e.helper2=Cn.create(e.P3),e.helper1.init(e.map,(y,x)=>{var v;a=a+y/e.scaleVal,d=d+x/e.scaleVal;const h=ot({...n,ctrlX:a,ctrlY:d});s=h.x,r=h.y;const b=s/8+a*3/8+p*3/8+f/8,$=r/8+d*3/8+u*3/8+m/8;e.P2.style.top=d+"px",e.P2.style.left=a+"px",(v=e.currentArrow)==null||v.children[0].setAttribute("d",`M ${s} ${r} C ${a} ${d} ${p} ${u} ${f} ${m}`),K(e.currentArrow.children[2],{x:b+"",y:$+""}),K(e.line1,{x1:s+"",y1:r+"",x2:a+"",y2:d+""}),t.delta1.x=a-n.cx,t.delta1.y=d-n.cy}),e.helper2.init(e.map,(y,x)=>{var v,h;p=p+y/e.scaleVal,u=u+x/e.scaleVal;const b=ot({...o,ctrlX:p,ctrlY:u});f=b.x,m=b.y;const $=s/8+a*3/8+p*3/8+f/8,A=r/8+d*3/8+u*3/8+m/8,j=An(p,u,f,m);e.P3.style.top=u+"px",e.P3.style.left=p+"px",(v=e.currentArrow)==null||v.children[0].setAttribute("d",`M ${s} ${r} C ${a} ${d} ${p} ${u} ${f} ${m}`),(h=e.currentArrow)==null||h.children[1].setAttribute("d",`M ${j.x1} ${j.y1} L ${f} ${m} L ${j.x2} ${j.y2}`),K(e.currentArrow.children[2],{x:$+"",y:A+""}),K(e.line2,{x1:p+"",y1:u+"",x2:f+"",y2:m+""}),t.delta2.x=p-o.cx,t.delta2.y=u-o.cy})};function tr(){this.linkSvgGroup.innerHTML="";for(let e=0;e<this.arrows.length;e++){const t=this.arrows[e];try{Un(this,Z(t.from),Z(t.to),t,!0)}catch{console.warn("Node may not be expanded")}}this.nodes.appendChild(this.linkSvgGroup)}function nr(e){if(console.time("editSummary"),!e)return;const t=e.children[2];console.log(t,e),On(this,t,n=>{var o;const i=e.arrowObj,s=((o=n.textContent)==null?void 0:o.trim())||"";s===""?i.label=origin:i.label=s,n.remove(),s!==origin&&(t.innerHTML=i.label,this.linkDiv(),this.bus.fire("operation",{name:"finishEditArrowLabel",obj:i}))}),console.timeEnd("editSummary")}function or(){this.arrows=this.arrows.filter(e=>Et(e.from,this.nodeData)&&Et(e.to,this.nodeData))}const ir=Object.freeze(Object.defineProperty({__proto__:null,createArrow:Gs,editArrowLabel:nr,removeArrow:Js,renderArrow:tr,selectArrow:Qs,tidyArrow:or,unselectArrow:er},Symbol.toStringTag,{value:"Module"})),sr=function(e){var t,n;if(e.length===0)throw new Error("No selected node.");if(e.length===1){const u=e[0].nodeObj,f=e[0].nodeObj.parent;if(!f)throw new Error("Can not select root node.");const m=f.children.findIndex(y=>u===y);return{parent:f.id,start:m,end:m}}let o=0;const i=e.map(u=>{let f=u.nodeObj;const m=[];for(;f.parent;){const y=f.parent,x=y.children,v=x==null?void 0:x.indexOf(f);f=y,m.unshift({node:f,index:v})}return m.length>o&&(o=m.length),m});let s=0;e:for(;s<o;s++){const u=(t=i[0][s])==null?void 0:t.node;for(let f=1;f<i.length;f++)if(((n=i[f][s])==null?void 0:n.node)!==u)break e}if(!s)throw new Error("Can not select root node.");const r=i.map(u=>u[s-1].index).sort(),a=r[0]||0,d=r[r.length-1]||0,p=i[0][s-1].node;if(p.root)throw new Error("Please select nodes in the same main topic.");return{parent:p.id,start:a,end:d}},rr=function(e){const t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.setAttribute("id",e),t},Mn=function(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","path");return K(n,{d:e,stroke:t||"#666",fill:"none","stroke-linecap":"round","stroke-width":"2"}),n},_n=function(e,t,n,o,i){const s=document.createElementNS("http://www.w3.org/2000/svg","text");return K(s,{"text-anchor":o,x:t+"",y:n+"",fill:i||"#666"}),s.innerHTML=e,s},lr=e=>Z(e).parentElement.parentElement,ar=function({parent:e,start:t}){var n,o;const i=Z(e),s=i.nodeObj;let r;return s.root===!0?r=(n=Z(s.children[t].id).closest("me-main"))==null?void 0:n.className:r=(o=i.closest("me-main"))==null?void 0:o.className,r},Xn=function(e,t){var n;const{id:o,text:i,parent:s,start:r,end:a}=t,d=e.nodes,p=Z(s).nodeObj,u=ar(t);let f=1/0,m=0,y=0,x=0;for(let C=r;C<=a;C++){const T=(n=p.children)==null?void 0:n[C];if(!T)return console.warn("Child not found"),e.removeSummary(o),null;const k=lr(T.id),{offsetLeft:D,offsetTop:G}=$e(d,k);C===r&&(y=G),C===a&&(x=G+k.offsetHeight),D<f&&(f=D),k.offsetWidth+D>m&&(m=k.offsetWidth+D)}let v,h;const b=y+10,$=x+10,A=(b+$)/2,j=e.theme.cssVar["--color"];u==="lhs"?(v=Mn(`M ${f+10} ${b} c -5 0 -10 5 -10 10 L ${f} ${$-10} c 0 5 5 10 10 10 M ${f} ${A} h -10`,j),h=_n(i,f-20,A+6,"end",j)):(v=Mn(`M ${m-10} ${b} c 5 0 10 5 10 10 L ${m} ${$-10} c 0 5 -5 10 -10 10 M ${m} ${A} h 10`,j),h=_n(i,m+20,A+6,"start",j));const I=rr("s-"+o);return I.appendChild(v),I.appendChild(h),I.summaryObj=t,e.summarySvg.appendChild(I),I},dr=function(){let e=[];this.currentNode?e=[this.currentNode]:this.currentNodes&&(e=this.currentNodes);const{parent:t,start:n,end:o}=sr(e),i={id:gt(),parent:t,start:n,end:o,text:"summary"},s=Xn(this,i);this.summaries.push(i),this.editSummary(s),this.bus.fire("operation",{name:"createSummary",obj:i})},cr=function(e){var t;const n=this.summaries.findIndex(o=>o.id===e);n>-1&&(this.summaries.splice(n,1),(t=document.querySelector("#s-"+e))==null||t.remove()),this.bus.fire("operation",{name:"removeSummary",obj:{id:e}})},ur=function(e){const t=e.children[1].getBBox(),n=6,o=3,i=document.createElementNS("http://www.w3.org/2000/svg","rect");K(i,{x:t.x-n+"",y:t.y-n+"",width:t.width+n*2+"",height:t.height+n*2+"",rx:o+"",stroke:this.theme.cssVar["--selected"]||"#4dc4ff","stroke-width":"2",fill:"none"}),i.classList.add("selected"),e.appendChild(i),this.currentSummary=e},pr=function(){var e,t;(t=(e=this.currentSummary)==null?void 0:e.querySelector("rect"))==null||t.remove(),this.currentSummary=null},mr=function(){this.summarySvg.innerHTML="",this.summaries.forEach(e=>{try{Xn(this,e)}catch{console.warn("Node may not be expanded")}}),this.nodes.insertAdjacentElement("beforeend",this.summarySvg)},hr=function(e){if(console.time("editSummary"),!e)return;const t=e.childNodes[1];On(this,t,n=>{var o;const i=e.summaryObj,s=((o=n.textContent)==null?void 0:o.trim())||"";s===""?i.text=origin:i.text=s,n.remove(),s!==origin&&(t.innerHTML=i.text,this.linkDiv(),this.bus.fire("operation",{name:"finishEditSummary",obj:i}))}),console.timeEnd("editSummary")},fr=Object.freeze(Object.defineProperty({__proto__:null,createSummary:dr,editSummary:hr,removeSummary:cr,renderSummary:mr,selectSummary:ur,unselectSummary:pr},Symbol.toStringTag,{value:"Module"})),ue="http://www.w3.org/2000/svg";function vr(e,t){const n=document.createElementNS(ue,"svg");return K(n,{version:"1.1",xmlns:ue,height:e,width:t}),n}function gr(e,t){return(parseInt(e)-parseInt(t))/2}function br(e,t,n,o){const i=document.createElementNS(ue,"g");let s="";return e.text?s=e.text.textContent:s=e.childNodes[0].textContent,s.split(`
`).forEach((r,a)=>{const d=document.createElementNS(ue,"text");K(d,{x:n+parseInt(t.paddingLeft)+"",y:o+parseInt(t.paddingTop)+gr(t.lineHeight,t.fontSize)*(a+1)+parseFloat(t.fontSize)*(a+1)+"","text-anchor":"start","font-family":t.fontFamily,"font-size":`${t.fontSize}`,"font-weight":`${t.fontWeight}`,fill:`${t.color}`}),d.innerHTML=r,i.appendChild(d)}),i}function yr(e,t,n,o){var i;let s="";(i=e.nodeObj)!=null&&i.dangerouslySetInnerHTML?s=e.nodeObj.dangerouslySetInnerHTML:e.text?s=e.text.textContent:s=e.childNodes[0].textContent;const r=document.createElementNS(ue,"foreignObject");K(r,{x:n+parseInt(t.paddingLeft)+"",y:o+parseInt(t.paddingTop)+"",width:t.width,height:t.height});const a=document.createElement("div");return K(a,{xmlns:"http://www.w3.org/1999/xhtml",style:`font-family: ${t.fontFamily}; font-size: ${t.fontSize}; font-weight: ${t.fontWeight}; color: ${t.color}; white-space: pre-wrap;`}),a.innerHTML=s,r.appendChild(a),r}function xr(e,t){const n=getComputedStyle(t),{offsetLeft:o,offsetTop:i}=$e(e.nodes,t),s=document.createElementNS(ue,"rect");return K(s,{x:o+"",y:i+"",rx:n.borderRadius,ry:n.borderRadius,width:n.width,height:n.height,fill:n.backgroundColor,stroke:n.borderColor,"stroke-width":n.borderWidth}),s}function _t(e,t,n=!1){const o=getComputedStyle(t),{offsetLeft:i,offsetTop:s}=$e(e.nodes,t),r=document.createElementNS(ue,"rect");K(r,{x:i+"",y:s+"",rx:o.borderRadius,ry:o.borderRadius,width:o.width,height:o.height,fill:o.backgroundColor,stroke:o.borderColor,"stroke-width":o.borderWidth});const a=document.createElementNS(ue,"g");a.appendChild(r);let d;return n?d=yr(t,o,i,s):d=br(t,o,i,s),a.appendChild(d),a}function wr(e,t){const n=getComputedStyle(t),{offsetLeft:o,offsetTop:i}=$e(e.nodes,t),s=document.createElementNS(ue,"a"),r=document.createElementNS(ue,"text");return K(r,{x:o+"",y:i+parseInt(n.fontSize)+"","text-anchor":"start","font-family":n.fontFamily,"font-size":`${n.fontSize}`,"font-weight":`${n.fontWeight}`,fill:`${n.color}`}),r.innerHTML=t.textContent,s.appendChild(r),s.setAttribute("href",t.href),s}function Cr(e,t){const n=getComputedStyle(t),{offsetLeft:o,offsetTop:i}=$e(e.nodes,t),s=document.createElementNS(ue,"image");return K(s,{x:o+"",y:i+"",width:n.width+"",height:n.height+"",href:t.src}),s}const Nt=100,Mr='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',_r=(e,t=!1)=>{var n,o,i;const s=e.nodes,r=s.offsetHeight+Nt*2,a=s.offsetWidth+Nt*2,d=vr(r+"px",a+"px"),p=document.createElementNS(ue,"svg"),u=document.createElementNS(ue,"rect");K(u,{x:"0",y:"0",width:`${a}`,height:`${r}`,fill:e.theme.cssVar["--bgcolor"]}),d.appendChild(u),s.querySelectorAll(".subLines").forEach(x=>{const v=x.cloneNode(!0),{offsetLeft:h,offsetTop:b}=$e(s,x.parentElement);v.setAttribute("x",`${h}`),v.setAttribute("y",`${b}`),p.appendChild(v)});const f=(n=s.querySelector(".lines"))==null?void 0:n.cloneNode(!0);f&&p.appendChild(f);const m=(o=s.querySelector(".topiclinks"))==null?void 0:o.cloneNode(!0);m&&p.appendChild(m);const y=(i=s.querySelector(".summary"))==null?void 0:i.cloneNode(!0);return y&&p.appendChild(y),s.querySelectorAll("me-tpc").forEach(x=>{x.nodeObj.dangerouslySetInnerHTML?p.appendChild(_t(e,x,!t)):(p.appendChild(xr(e,x)),p.appendChild(_t(e,x.text,!t)))}),s.querySelectorAll(".tags > span").forEach(x=>{p.appendChild(_t(e,x))}),s.querySelectorAll(".icons > span").forEach(x=>{p.appendChild(_t(e,x))}),s.querySelectorAll(".hyper-link").forEach(x=>{p.appendChild(wr(e,x))}),s.querySelectorAll("img").forEach(x=>{p.appendChild(Cr(e,x))}),K(p,{x:Nt+"",y:Nt+"",overflow:"visible"}),d.appendChild(p),d},Nr=(e,t)=>(t&&e.insertAdjacentHTML("afterbegin","<style>"+t+"</style>"),Mr+e.outerHTML);function kr(e){return new Promise((t,n)=>{const o=new FileReader;o.onload=i=>{t(i.target.result)},o.onerror=i=>{n(i)},o.readAsDataURL(e)})}const Er=function(e=!1,t){const n=_r(this,e),o=Nr(n,t);return new Blob([o],{type:"image/svg+xml"})},Sr=async function(e=!1,t){const n=this.exportSvg(e,t),o=await kr(n);return new Promise((i,s)=>{const r=new Image;r.setAttribute("crossOrigin","anonymous"),r.onload=()=>{const a=document.createElement("canvas");a.width=r.width,a.height=r.height,a.getContext("2d").drawImage(r,0,0),a.toBlob(i,"image/png",1)},r.src=o,r.onerror=s})},Lr=Object.freeze(Object.defineProperty({__proto__:null,exportPng:Sr,exportSvg:Er},Symbol.toStringTag,{value:"Module"}));function Tr(e,t){return async function(...n){const o=this.before[t];o&&!await o.apply(this,n)||e.apply(this,n)}}const Nn=Object.keys(Wn),Gn={};for(let e=0;e<Nn.length;e++){const t=Nn[e];Gn[t]=Tr(Wn[t],t)}const zr={getObjById:Et,generateNewObj:_i,layout:Ei,linkDiv:Oi,editTopic:Di,createWrapper:Ti,createParent:zi,createChildren:ji,createTopic:Ai,findEle:Z,changeTheme:rs,...Ss,...Gn,...ir,...fr,...Lr,init(e){if(!e||!e.nodeData)return new Error("MindElixir: `data` is required");e.direction!==void 0&&(this.direction=e.direction),this.changeTheme(e.theme||this.theme,!1),this.nodeData=e.nodeData,De(this.nodeData),this.arrows=e.arrows||[],this.summaries=e.summaries||[],this.tidyArrow(),this.toolBar&&Ji(this),this.keypress&&Yi(this),this.editable&&ss(this),Ci()&&this.mobileMenu?Fi(this):this.contextMenu&&Ii(this,this.contextMenuOption),this.draggable&&Ui(this),this.allowUndo&&Zi(this),this.toCenter(),this.layout(),this.linkDiv()}};function jr({pT:e,pL:t,pW:n,pH:o,cT:i,cL:s,cW:r,cH:a,direction:d,containerHeight:p}){let u=t+n/2;const f=e+o/2;let m;d==="lhs"?m=s+r:m=s;const y=i+a/2,x=(1-Math.abs(y-f)/p)*.25*(n/2);return d==="lhs"?u=u-n/10-x:u=u+n/10+x,`M ${u} ${f} Q ${u} ${y} ${m} ${y}`}function Ar({pT:e,pL:t,pW:n,pH:o,cT:i,cL:s,cW:r,cH:a,direction:d,isFirst:p}){let u=0,f=0;p?u=e+o/2:u=e+o;const m=i+a;let y=0,x=0,v=0;const h=Math.abs(u-m)/300*ze;return d==="lhs"?(v=t,y=v+ze,x=v-ze,f=s+ze,`M ${y} ${u} C ${v} ${u} ${v+h} ${m} ${x} ${m} H ${f}`):(v=t+n,y=v-ze,x=v+ze,f=s+r-ze,`M ${y} ${u} C ${v} ${u} ${v-h} ${m} ${x} ${m} H ${f}`)}const mt=document;function he({el:e,direction:t,locale:n,draggable:o,editable:i,contextMenu:s,contextMenuOption:r,toolBar:a,keypress:d,mouseSelectionButton:p,before:u,newTopicName:f,allowUndo:m,generateMainBranch:y,generateSubBranch:x,overflowHidden:v,mobileMenu:h,theme:b}){console.log("ME_version "+he.version,this);let $=null;const A=Object.prototype.toString.call(e);if(A==="[object HTMLDivElement]"?$=e:A==="[object String]"&&($=document.querySelector(e)),!$)throw new Error("MindElixir: el is not a valid element");$.className+=" mind-elixir",$.innerHTML="",$.style.setProperty("--gap",ze+"px"),this.mindElixirBox=$,this.before=u||{},this.locale=n||"en",this.contextMenuOption=r,this.contextMenu=s===void 0?!0:s,this.toolBar=a===void 0?!0:a,this.keypress=d===void 0?!0:d,this.mouseSelectionButton=p||0,this.mobileMenu=h||!1,this.direction=typeof t=="number"?t:1,this.draggable=o===void 0?!0:o,this.newTopicName=f||"new node",this.editable=i===void 0?!0:i,this.allowUndo=m===void 0?!1:m,this.currentNode=null,this.currentArrow=null,this.scaleVal=1,this.tempDirection=null,this.generateMainBranch=y||jr,this.generateSubBranch=x||Ar,this.overflowHidden=v||!1,this.bus=ki.create(),this.container=mt.createElement("div"),this.container.className="map-container";const j=window.matchMedia("(prefers-color-scheme: dark)");this.theme=b||(j.matches?jn:zn);const I=mt.createElement("div");I.className="map-canvas",this.map=I,this.map.setAttribute("tabindex","0"),this.container.appendChild(this.map),this.mindElixirBox.appendChild(this.container),this.nodes=mt.createElement("me-nodes"),this.nodes.className="main-node-container",this.lines=ht("lines"),this.summarySvg=ht("summary"),this.linkController=ht("linkcontroller"),this.P2=mt.createElement("div"),this.P3=mt.createElement("div"),this.P2.className=this.P3.className="circle",this.P2.style.display=this.P3.style.display="none",this.line1=un(),this.line2=un(),this.linkController.appendChild(this.line1),this.linkController.appendChild(this.line2),this.linkSvgGroup=ht("topiclinks"),this.map.appendChild(this.nodes),this.overflowHidden?this.container.style.overflow="hidden":Ni(this)}he.prototype=zr;he.LEFT=be;he.RIGHT=Be;he.SIDE=zt;he.THEME=zn;he.DARK_THEME=jn;he.version="4.0.0";he.E=Z;he.new=e=>({nodeData:{id:gt(),topic:e||"new topic",root:!0,children:[]}});const Dr={key:0,class:"truncate font-normal text-[12px] text-text-primary"},$r={key:1,class:"truncate text-text-secondary opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-2 text-xs font-medium"},Or={key:1,class:"relative w-full"},Ir=["placeholder"],Vr={class:"max-h-50 overflow-y-auto"},Pr=["onMousedown"],Hr={key:1,class:"px-3 py-2 text-center text-text-secondary text-sm"},kn=Tt({__name:"TableSearchCell",props:{modelValue:{},options:{default:()=>[]},placeholder:{default:"Type to search..."},disabled:{type:Boolean,default:!1},displayField:{},emptyText:{}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=e,o=t,i=P(!1),s=P(!1),r=P(""),a=P(null),d=P(null),p=P(null),u=P({top:"0px",left:"0px",width:"100%"}),f=()=>{if(!a.value||!p.value)return;const C=a.value.getBoundingClientRect(),T=p.value.offsetHeight||200,D=window.innerHeight-C.bottom;let w=C.bottom+window.scrollY+6;D<T&&C.top>T&&(w=C.top+window.scrollY-T-5),u.value={top:`${w}px`,left:`${C.left+window.scrollX}px`,width:`${C.width}px`}},m=C=>typeof C=="string"?C:String(C.title??C.label??C.value??""),y=se(()=>{if(!n.modelValue)return"";const C=n.options.find(T=>{var k,D;return typeof T=="string"?T===n.modelValue:typeof n.modelValue!="object"?T._id==n.modelValue||T.value==n.modelValue:T._id==((k=n.modelValue)==null?void 0:k._id)||T.value==((D=n.modelValue)==null?void 0:D.value)});return C?m(C):""}),x=se(()=>(n.options??[]).map(C=>typeof C=="string"?{value:C,label:C}:C));Ae(()=>n.modelValue,C=>{const T=x.value.find(k=>k._id==C||k.value==C);r.value=T?m(T):""},{immediate:!0});const v=se(()=>{if(!r.value||r.value===y.value)return x.value;const C=r.value.toLowerCase();return x.value.filter(T=>m(T).toLowerCase().includes(C))}),h=async()=>{var C,T;n.disabled||(i.value=!0,r.value=y.value,s.value=!0,await vt(),(C=a.value)==null||C.focus(),(T=a.value)==null||T.select(),f(),window.addEventListener("scroll",f,!0),window.addEventListener("resize",f))},b=()=>{i.value=!1,s.value=!1,r.value="",window.removeEventListener("scroll",f,!0),window.removeEventListener("resize",f)},$=C=>{let T;typeof C=="string"?T=C:T=C._id??C.value??C.title,o("update:modelValue",T),o("change",T);const k=x.value.find(D=>D._id==T||D.value==T);r.value=k?m(k):"",b()},A=()=>{if(v.value.length>0){const C=v.value.find(T=>m(T).toLowerCase()===r.value.toLowerCase());if(C){$(C);return}}o("update:modelValue",r.value),o("change",r.value),b()},j=()=>{setTimeout(()=>{i.value&&A()},150)},I=C=>{d.value&&!d.value.contains(C.target)&&p.value&&!p.value.contains(C.target)&&i.value&&A()};return qt(()=>{document.addEventListener("mousedown",I)}),En(()=>{document.removeEventListener("mousedown",I),window.removeEventListener("scroll",f,!0),window.removeEventListener("resize",f)}),(C,T)=>(S(),O("div",{class:"relative w-full h-full",ref_key:"containerRef",ref:d,onClick:T[2]||(T[2]=ge(()=>{},["stop"]))},[i.value?(S(),O("div",Or,[ft(E("input",{ref_key:"inputRef",ref:a,"onUpdate:modelValue":T[0]||(T[0]=k=>r.value=k),onBlur:j,onKeydown:[rt(A,["enter"]),rt(b,["esc"])],onInput:T[1]||(T[1]=k=>s.value=!0),class:"absolute left-0 top-1/2 -translate-y-1/2 min-w-[200px] w-full p-1 border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-bg-body z-50 text-[12px]",placeholder:C.placeholder},null,40,Ir),[[Ft,r.value]]),(S(),Ce(Sn,{to:"body"},[s.value?(S(),O("div",{key:0,ref_key:"dropdownRef",ref:p,class:"fixed z-[9999] bg-bg-dropdown border border-border rounded-md shadow-lg py-2",style:Ye(u.value)},[E("div",Vr,[v.value.length>0?(S(!0),O(me,{key:0},je(v.value,k=>(S(),O("div",{key:k._id??k.value,onMousedown:ge(D=>$(k),["prevent"]),class:"px-3 py-1.5 capitalize font-medium cursor-pointer hover:bg-bg-dropdown-menu-hover text-[12px] text-text-primary flex items-center gap-2"},[Vt(C.$slots,"option",{option:k},()=>[Me(de(m(k)),1)])],40,Pr))),128)):(S(),O("div",Hr," No match found "))])],4)):ne("",!0)]))])):(S(),O("div",{key:0,onClick:h,class:nt(["h-full flex items-center px-3 py-1.5 cursor-pointer hover:bg-bg-surface-hover rounded-md truncate transition-all duration-200 group",{"opacity-50 cursor-not-allowed":C.disabled}])},[Vt(C.$slots,"display",{},()=>[y.value?(S(),O("span",Dr,de(y.value),1)):C.emptyText&&!C.disabled?(S(),O("span",$r,[T[3]||(T[3]=E("i",{class:"fa-solid fa-plus text-[10px]"},null,-1)),Me(" Add "+de(C.emptyText),1)])):ne("",!0)])],2))],512))}}),Br={key:0,class:"flex gap-2 items-center truncate"},Rr=["src"],Yr={key:2,class:"w-6 h-6 bg-bg-body border border-border rounded-full flex justify-center items-center flex-shrink-0"},Fr={class:"text-[11px] text-text-primary truncate"},qr={key:1,class:"truncate text-text-secondary opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1.5 text-xs"},Wr={key:1,class:"relative w-full"},Ur={class:"max-h-60 overflow-y-auto"},Kr=["onMousedown"],Zr=["src"],Xr={key:2,class:"w-6 h-6 bg-bg-body border border-border rounded-full flex justify-center items-center flex-shrink-0"},Gr={class:"min-w-0"},Jr={class:"text-xs font-medium truncate"},Qr={class:"text-[10px] text-text-secondary truncate"},el={key:1,class:"px-4 py-3 text-center text-sm text-text-secondary"},tl=Tt({__name:"TableAssigneeCell",props:{assigneeId:{},disabled:{type:Boolean},seat:{},workspaceId:{},name:{},emptyText:{}},emits:["update:modelValue","assign","unassign"],setup(e,{emit:t}){const n=e,o=t,{canAssignCard:i}=Ln(),{workspaceId:s}=Tn(),{data:r}=$o((n==null?void 0:n.workspaceId)??s.value),a=P(n.assigneeId??n.seat),d=P(!1),p=P(!1),u=P(""),f=P(null),m=P(null),y=P(null),x=P({top:"0px",left:"0px",width:"100%"}),v=se(()=>[{_id:null,name:"Unassign",email:""},...r.value||[]]),h=se(()=>{const k=u.value.trim().toLowerCase(),D=v.value;return k?D.filter(G=>(G.title||G.name||"").toLowerCase().includes(k)||(G.email||"").toLowerCase().includes(k)):D}),b=()=>{if(!f.value||!y.value)return;const k=f.value.getBoundingClientRect(),D=y.value.offsetHeight||200,w=window.innerHeight-k.bottom;let _=k.bottom+window.scrollY+6;w<D&&k.top>D&&(_=k.top+window.scrollY-D-5),x.value={top:`${_}px`,left:`${k.left+window.scrollX}px`,width:`${k.width}px`}},$=async()=>{var D,G,w,M,_;if(n.disabled||!i.value)return;d.value=!0,p.value=!0;const k=((D=a.value)==null?void 0:D.name)||((G=a.value)==null?void 0:G.title)||((w=a.value)==null?void 0:w.u_full_name);u.value=k||"",await vt(),(M=f.value)==null||M.focus(),(_=f.value)==null||_.select(),b(),window.addEventListener("scroll",b,!0),window.addEventListener("resize",b)},A=()=>{d.value=!1,p.value=!1,u.value="",window.removeEventListener("scroll",b,!0),window.removeEventListener("resize",b)},j=k=>{const D=v.value.find(G=>G._id===k);D?(a.value=D,o("assign",D),o("update:modelValue",k)):k==null&&(a.value=null,o("unassign"),o("update:modelValue",null)),A()},I=()=>{h.value.length>0?j(h.value[0]._id):A()},C=()=>{setTimeout(()=>{d.value&&A()},150)},T=k=>{m.value&&!m.value.contains(k.target)&&y.value&&!y.value.contains(k.target)&&d.value&&A()};return qt(()=>{document.addEventListener("mousedown",T)}),En(()=>{document.removeEventListener("mousedown",T),window.removeEventListener("scroll",b,!0),window.removeEventListener("resize",b)}),Ae(()=>n.seat,k=>{a.value=k}),(k,D)=>{var G,w,M,_,J,we,Y,Fe,ye,Oe,bt,at,qe,le,fe,yt,We,Ue,dt,Ke,re,_e,oe,Ze,xe,Ie;return S(),O("div",{class:"relative w-full h-full",ref_key:"containerRef",ref:m,onClick:D[3]||(D[3]=ge(()=>{},["stop"]))},[d.value?(S(),O("div",Wr,[ft(E("input",{ref_key:"inputRef",ref:f,"onUpdate:modelValue":D[0]||(D[0]=q=>u.value=q),onBlur:C,onKeydown:[rt(I,["enter"]),rt(A,["esc"])],onInput:D[1]||(D[1]=q=>p.value=!0),class:"absolute left-0 top-1/2 -translate-y-1/2 min-w-[200px] w-full p-1 border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-bg-body z-50 text-[12px]",placeholder:"Search people..."},null,544),[[Ft,u.value]]),(S(),Ce(Sn,{to:"body"},[p.value?(S(),O("div",{key:0,ref_key:"dropdownRef",ref:y,class:"fixed z-[9999] bg-bg-dropdown border border-border rounded-md shadow-lg",style:Ye(x.value),onMousedown:D[2]||(D[2]=ge(()=>{},["prevent"]))},[E("div",Ur,[h.value.length>0?(S(!0),O(me,{key:0},je(h.value,q=>{var Ne;return S(),O("div",{key:q._id,onMousedown:ge(Dt=>j(q._id),["prevent"]),class:"px-3 py-2 cursor-pointer hover:bg-bg-dropdown-menu-hover text-[12px] text-text-primary flex items-center gap-3"},[(Ne=q==null?void 0:q.user)!=null&&Ne.avatar?(S(),O("img",{key:0,src:q.user.avatar,class:"w-6 h-6 rounded-full object-cover flex-shrink-0",alt:""},null,8,Zr)):q.name?(S(),O("div",{key:1,class:"w-6 h-6 border border-border rounded-full text-xs font-semibold flex items-center justify-center flex-shrink-0",style:Ye({backgroundColor:q!=null&&q.email?H(Pt)({name:q.name,email:q.email,_id:q._id}):""})},de(H(Ht)(q.name)),5)):(S(),O("div",Xr,D[6]||(D[6]=[E("i",{class:"fa-regular fa-user text-xs"},null,-1)]))),E("div",Gr,[E("div",Jr,de(q.name||q.title),1),E("div",Qr,de(q.role_title),1)])],40,Kr)}),128)):(S(),O("div",el," No match found "))])],36)):ne("",!0)]))])):(S(),O("div",{key:0,onClick:$,class:nt(["w-full h-full flex items-center px-3 py-1.5 cursor-pointer hover:bg-bg-surface-hover rounded-md truncate transition-all duration-200 min-h-[36px] group",{"opacity-50 cursor-not-allowed":k.disabled}])},[(w=(G=a.value)==null?void 0:G.user)!=null&&w.avatar||(M=a.value)!=null&&M._id||(_=k.seat)!=null&&_._id?(S(),O("div",Br,[(we=(J=a.value)==null?void 0:J.avatar)!=null&&we.src||(Fe=(Y=a.value)==null?void 0:Y.user)!=null&&Fe.avatar||(ye=a.value)!=null&&ye.u_profile_image?(S(),O("img",{key:0,src:((bt=(Oe=a.value)==null?void 0:Oe.avatar)==null?void 0:bt.src)??((at=a.value)==null?void 0:at.u_profile_image)??((le=(qe=a.value)==null?void 0:qe.user)==null?void 0:le.avatar),class:"w-5 h-5 object-cover rounded-full flex-shrink-0",alt:""},null,8,Rr)):(fe=a.value)!=null&&fe.u_full_name||(yt=a.value)!=null&&yt.name?(S(),O("div",{key:1,class:"w-5 h-5 aspect-square rounded-full text-[11px] bg-bg-surface text-text-primary flex items-center justify-center flex-shrink-0",style:Ye({backgroundColor:((We=a.value)==null?void 0:We.u_full_name)??((Ue=a.value)==null?void 0:Ue.title)?H(Pt)({name:((dt=a.value)==null?void 0:dt.u_full_name)??((Ke=a.value)==null?void 0:Ke.title),_id:(re=a.value)==null?void 0:re._id}):""})},de(H(Ht)(((_e=a.value)==null?void 0:_e.u_full_name)??((oe=a.value)==null?void 0:oe.name))),5)):(S(),O("div",Yr,D[4]||(D[4]=[E("i",{class:"fa-regular fa-user text-xs"},null,-1)]))),E("span",Fr,de((((Ze=a.value)==null?void 0:Ze.name)||((xe=a.value)==null?void 0:xe.title)||((Ie=a.value)==null?void 0:Ie.u_full_name))??"Unassigned"),1)])):(S(),O("span",qr,[D[5]||(D[5]=E("i",{class:"fa-solid fa-plus text-[10px]"},null,-1)),Me(" Add "+de(k.emptyText||"Assignee"),1)]))],2))],512)}}}),nl={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-[6px] shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex-col flex scrollbar-visible"},ol={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1"},il={key:1},sl={class:"flex gap-3 items-center"},rl={class:"flex items-center gap-3 bg-bg-surface/50 h-[32px] px-2 rounded-md"},ll={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible"},al={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},dl={key:0,class:"bg-bg-body rounded-lg p-4"},cl={class:"flex items-center mt-3 gap-3"},ul=["disabled"],pl={class:"flex items-center mt-3 gap-3"},ml=Tt({__name:"Product",setup(e){const{canEditSheet:t,canDeleteSheet:n,canCreateVariable:o,canCreateSheet:i,canCreateCard:s,canEditCard:r,canAssignCard:a}=Ln(),d=P(!1),p=P(null),u=P(!1),f=P(null),m=P(null),y=P(!1),x=P(!1),v=P("kanban"),h=P(null),b=P(null),$=P(!1),A=Go(),{workspaceId:j,moduleId:I}=Tn(),C=Oo(),T=P(!1),k=P(),D=async()=>{if(f.value)try{x.value=!0,await rn({url:`workspace/card/${f.value}`,method:"DELETE"}),M(f.value),await Ie(),u.value=!1,p.value=null,Se.success("Ticket deleted successfully")}catch(c){Se.error(ln(c))}finally{x.value=!1}},G=async()=>{await D()},w=async(c,l)=>{if(c!=null&&c._id){m.value=c,y.value=!0;try{await rn({url:"/workspace/cards/update",method:"PATCH",data:{card_id:c._id,variables:{"card-status":l}}}),c["card-status"]=l,Se.success("Ticket status updated successfully"),await Ie()}catch(g){Se.error(ln(g))}finally{y.value=!1,m.value=null}}},M=c=>{var l,g;(g=(l=xe.value)==null?void 0:l.sheets)==null||g.forEach(N=>{var L;(L=N.sheet_lists)==null||L.forEach(W=>{W.cards=W.cards.filter(X=>X._id!==c)})})},_=Je(()=>Qe(()=>import("./CreateTaskModal-D4MKn5vp.js"),__vite__mapDeps([0,1,2,3]))),J=Je(()=>Qe(()=>import("./CreateSheetModal-BAkKmMfV.js"),__vite__mapDeps([4,2,3,5,6,7,8]))),we=Je(()=>Qe(()=>import("./CreateVariableModal-DTqf1fqG.js"),__vite__mapDeps([9,2,3]))),Y=Je(()=>Qe(()=>import("./ConfirmDeleteModal-D3Kxkw7Z.js"),__vite__mapDeps([10,11,2,3]))),Fe=Je(()=>Qe(()=>import("./SidePanel-BtojKexA.js"),__vite__mapDeps([12,2,3,13]))),ye=Je(()=>Qe(()=>import("./KanbanBoard-ITnNL55W.js"),__vite__mapDeps([14,15,2,3,16,11,17]))),{data:Oe,refetch:bt,isPending:at}=Io({workspace_id:j,workspace_module_id:I}),qe=se(()=>{var c;return Oe.value?(c=Oe.value[0])==null?void 0:c._id:""}),le=P(qe.value),{data:fe,isPending:yt}=Vo(j.value,I.value,le),{mutate:We,isPending:Ue}=Po({onSuccess:()=>{C.invalidateQueries({queryKey:["sheet-list"]}),Xe.value="",Ve.value=!1,ct.value=!1,Ve.value=!1}}),dt=c=>{We({workspace_id:j.value,module_id:I.value,variable_id:re.value,value:c})};Ae(qe,()=>{le.value=qe.value});const Ke=se(()=>{var c;return fe!=null&&fe.value?(c=fe==null?void 0:fe.value[0])==null?void 0:c._id:""}),re=P(Ke.value);Ae(Ke,()=>{re.value=Ke.value});const _e=Ho(),{data:oe,isPending:Ze}=Bo(I,le,se(()=>[..._e.selectedLaneIds]),re),{data:xe,refetch:Ie}=Ro(I,re,se(()=>[..._e.selectedLaneIds])),q=c=>{k.value=c},Ne=P(!1),Dt=()=>{Pe.value={},Ne.value=!Ne.value},Jn=Yo(),Qn=Fo();function eo(c){c.type==="column"?Jn.mutate({payload:{workspace_id:j.value,workspace_module_id:I.value,variable_id:re.value,moved_value:c.meta.id,new_index:c.meta.newIndex}},{onSuccess:()=>{Ie()}}):Qn.mutate({payload:{workspace_id:j.value,card_id:c.meta.moved._id,group_value:c.meta.fromColumnId,group_variable_id:re.value,new_index:c.meta.newIndex,sheet_id:le.value}},{onSuccess:()=>{Ie()}})}const to=c=>{},no=se(()=>(Oe.value||[]).map(c=>({_id:c._id,title:c==null?void 0:c.variables["sheet-title"],description:c==null?void 0:c.variables["sheet-description"],icon:c.icon,status:c==null?void 0:c.generation_status})));Ae(Oe,c=>{var l;(c==null?void 0:c.length)>0&&(le.value=(l=c[0])==null?void 0:l._id)});const ct=P(!1),Xe=P("");function xt(){ct.value=!ct.value}function wt(){const c=Xe.value.trim();c&&dt(c)}const oo=c=>{We({workspace_id:A.params.id,module_id:A.params.module_id,new_value:c.title,value:c.oldTitle,variable_id:re.value})},Ve=P(!1),ke=P(),io=()=>{We({value:ke.value.title,workspace_id:j.value,module_id:I.value,newValue:ke.value.title,variable_id:re.value,is_trash:!0})},so=c=>{Ve.value=!0,ke.value=c},ro=c=>{T.value=!0,ke.value=c},Pe=P();function lo(c){d.value=!0,Pe.value=c}const{mutate:ao,isPending:co}=qo({onSuccess:()=>{bt(),d.value=!1}});function uo(){var c;ao({sheet_id:(c=Pe.value)==null?void 0:c._id,workspace_module_id:I.value,is_trash:!0})}function po(c){Ne.value=!0,Pe.value=c}const ut=P(""),mo=P("");Ae(ut,oi.debounce(c=>{mo.value=c},200));const ho=se(()=>{const c=oe.value.flatMap(l=>l.cards.map(g=>({...g,columnId:l.title})));return new cn(c,{keys:["card-title","card-description"],threshold:.3})}),Jt=se(()=>{var c;if(v.value==="kanban"){if(!ut.value)return oe.value;const l=ho.value.search(ut.value).map(g=>g.item);return oe.value.map(g=>({...g,cards:l.filter(N=>N.columnId===g.title)}))}else{const l=(c=ut.value)==null?void 0:c.trim();if(!l){let N=[];return(oe.value??[]).forEach(L=>{N=[...N,...L==null?void 0:L.cards]}),N}return new cn(go.value,{keys:["card-title","card-description"],threshold:.3}).search(l).map(N=>N.item)}}),{data:$t}=Wo(j),Qt=se(()=>(($t==null?void 0:$t.value)??[]).map(c=>{var l;return{_id:c._id,title:((l=c==null?void 0:c.variables)==null?void 0:l["lane-title"])??String(c._id)}})),fo=se(()=>{var c;return[{key:"card-title",label:"Title",render:({row:l,value:g})=>ae("div",{class:"flex items-center gap-1 w-full"},[ae("a",{onClick:()=>k.value=l,class:"text-[12px] underline text-blue-500 shrink-0 overflow-ellipsis cursor-pointer"},l["card-code"]),ae("div",{class:"flex-1 min-w-0"},[ae("input",{onFocusout:N=>{var L;en(l==null?void 0:l._id,"card-title",(L=N==null?void 0:N.target)==null?void 0:L.value)},class:"text-[12px] w-full overflow-ellipsis cursor-pointer text-text-primary capitalize outline-none border-none focus:border active:bg-bg-surface focus:bg-bg-card backdrop-blur focus:border-accent p-1 rounded-md",defaultValue:g,disabled:!r.value})])])},{key:"end-date",label:"Due Date",render:({row:l,value:g})=>{const N=P(g);return ae(Jo,{class:" capitalize flex items-center gap-2 text-[12px]",placeholder:"Set start date",modelValue:N.value,disabled:!r.value,"onUpdate:modelValue":L=>wo(l==null?void 0:l._id,L),emptyText:"Date"})}},{key:"lane",label:"Lane",render:({row:l})=>{var g;return ae(kn,{options:Qt.value??[],placeholder:"Select lane",modelValue:((g=l.lane)==null?void 0:g._id)||null,disabled:!r.value,"onUpdate:modelValue":N=>Co(l==null?void 0:l._id,N),displayField:"title",emptyText:"Lane"})}},{key:"created_by",label:"Owner",render:({value:l})=>ae("div",{class:"capitalize flex items-center gap-2  px-3"},[ae("div",{class:" rounded-full  "},[l!=null&&l.u_profile_image?ae("img",{class:"w-6 h-6 rounded-full",src:l==null?void 0:l.u_profile_image}):ae("div",{class:"w-5 h-5 rounded-full flex justify-center items-center text-[11px] ",style:`background:${l!=null&&l.u_full_name?Pt({name:l.u_full_name,email:l.u_email}):""}`},Ht(l==null?void 0:l.u_full_name))]),ae("span",{class:"text-[12px]"},l?l==null?void 0:l.u_full_name:"")])},{key:"seat",label:"Assignee",render:({row:l,value:g})=>ae(tl,{class:"capitalize flex items-center gap-2 ",onAssign:N=>vo(l==null?void 0:l._id,N),assigneeId:g,seat:g,name:!0,disabled:!a.value,emptyText:"Assignee"})},...((c=fe.value)==null?void 0:c.filter(l=>{var g;return((g=l==null?void 0:l.type)==null?void 0:g.title)==="Select"}).map(l=>({key:l==null?void 0:l.slug,label:l==null?void 0:l.slug,render:({row:g,value:N})=>{var W;let L=N;if(Array.isArray(g==null?void 0:g.variables)){const X=g.variables.find(V=>V.slug===l.slug);X&&(L=X.value)}else L=((W=g==null?void 0:g.variables)==null?void 0:W[l.slug])??(g==null?void 0:g[l.slug])??N;return ae("div",{class:"capitalize flex items-center gap-2"},[ae(kn,{options:bo(l.data??[]),modelValue:L,disabled:!r.value,emptyText:l.slug,"onUpdate:modelValue":X=>{en(g==null?void 0:g._id,l.slug,X)}})])},visible:l==null?void 0:l.is_visible})))??[]]}),vo=(c,l)=>{Ot(c,g=>{g.seat=l}),Ct.mutate({card_id:c,seat_id:l==null?void 0:l._id})},go=se(()=>{let c=[];return(oe.value??[]).forEach(l=>{c=[...c,...l==null?void 0:l.cards]}),c}),bo=c=>c.map(l=>({_id:l.value??l,title:l.value??l})),Ct=Uo({onSuccess:()=>{}}),Ot=(c,l)=>{if(!oe.value)return;const g=oe.value.findIndex(N=>N.cards.some(L=>L._id===c));if(g!==-1){const N=oe.value[g].cards.findIndex(L=>L._id===c);if(N!==-1){const L={...oe.value[g].cards[N]};l(L),oe.value[g].cards[N]=L,an(oe)}}},{mutate:yo}=Ko({onSuccess:()=>{}});function en(c,l,g){Ot(c,N=>{if(l==="card-title"&&(N[l]=g),Array.isArray(N.variables)){const L=N.variables.find(W=>W.slug===l);L?L.value=g:N.variables.push({slug:l,value:g,type:"Select"})}else N.variables&&typeof N.variables=="object"?N.variables[l]=g:N[l]=g}),Ct.mutate({card_id:c,variables:{[l]:g.trim()}})}function xo(c){if(c["card-title"]){const l={sheet_list_id:"To Do",workspace_id:j.value,sheet_id:le.value,variables:{"card-title":c["card-title"].trim()},createdAt:new Date().toISOString()};yo(l)}}const wo=(c,l)=>{const g=oe.value.findIndex(N=>N.cards.some(L=>L._id===c));if(g!==-1){const N=oe.value[g].cards.findIndex(L=>L._id===c);N!==-1&&(oe.value[g].cards[N]["end-date"]=l)}Ct.mutate({card_id:c,variables:{"start-date":l}})};function Co(c,l){Ot(c,g=>{const N=Qt.value.find(L=>L._id===l);console.log(N,"its new"),N&&(g.lane=N),console.log(g.lane,"after")}),an(oe),Ct.mutate({card_id:c,workspace_lane_id:l})}const{mutate:Mo}=Zo(),_o=(c,l)=>{Mo({payload:{sheet_id:le.value,workspace_id:j.value,variable_slug:c,is_visible:l}})};function No(c){const l={id:"root",topic:localStorage.getItem("currentName")||"Root Node",isRoot:!0,children:[]};if(!Array.isArray(c))return l;const g={"In Progress":"#FFB979","To Do":"#A9EAFF",Done:"#9AFFC6"};return c.forEach((N,L)=>{const X=(N.variables||{})["sheet-title"]||`Variable ${L+1}`,V={id:`variable-${L}`,topic:X,children:[]},F=Array.isArray(N.sheet_lists)?N.sheet_lists:[];F.forEach((B,R)=>{const z={id:`sheetlist-${L}-${R}`,topic:B.title||`Untitled Sheet List ${R+1}`,children:[]},ee=Array.isArray(B.cards)?B.cards:[];ee.forEach((ie,te)=>{const Q=ie.seat,Eo=(Ee=>Ee?Ee.split(" ").map(Ao=>Ao[0]).join("").toUpperCase().slice(0,2):"UN")(Q==null?void 0:Q.status),So=(Q==null?void 0:Q.status)==="assigned",tn=ie["card-status"]||"To Do",Lo=g[tn]||"#D3D3D3",To=F.map(Ee=>Ee.title||"Untitled"),zo=`
      <div class="card-content" style=" 
        width: 350px;
        height: 110px;
        background: #AFF4EF;
        padding: 5px;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        font-family: DM Sans, sans-serif;
        margin: 0;
        pointer-events:auto;
      ">
        <div style="display:flex; justify-content:space-between;">
          <div style="
            width:auto;
            height:40px;
            display:flex;
            color:#2B2C30;
            align-items:center;
            overflow:hidden;
            text-overflow:ellipsis;
            white-space:nowrap;
            font-weight:500;
            font-size:14px;
            padding-left:10px;
          ">
            ${(ie["card-title"]||"Untitled").slice(0,25)}...
          </div>

          <select class="status-select" style="
            background:${Lo};      
            pointer-events:auto;
            color:#2B2C30;
            border:none;
            border-radius:20px;
            font-size:11px;
            font-weight:500;
            height:30px;
            display:flex;
            justify-content:center;
            align-items:center;
            padding:5px 12px;
            margin-top:7px;
            cursor:pointer;
          " onchange="handleStatusChange(event, ${L}, ${R}, ${te})">
            ${To.map(Ee=>`<option value="${Ee}" ${Ee===tn?"selected":""} style="pointer-events:auto;">${Ee}</option>`).join("")}
          </select>

          <div 
  style="position:relative; margin-right:10px; margin-top:-35px; height:20px; width:20px; pointer-events:auto;"
>
  <svg 
    width="20" height="20" viewBox="0 0 20 20" fill="none" 
    class="menu-wrapper" 
    style="cursor:pointer; pointer-events:auto;"
    onclick="event.stopPropagation(); event.stopImmediatePropagation(); toggleMenu(this);"
    onmousedown="event.stopPropagation(); event.stopImmediatePropagation();"
    onpointerdown="event.stopPropagation(); event.stopImmediatePropagation();" 
    data-cardid="card-${L}-${R}-${te}"
  >
    <circle cx="5.23717" cy="9.99986" r="1.42857" fill="#2B2C30" fill-opacity="0.8"></circle>
    <circle cx="10.0008" cy="9.99986" r="1.42857" fill="#2B2C30" fill-opacity="0.8"></circle>
    <circle cx="14.7626" cy="9.99986" r="1.42857" fill="#2B2C30" fill-opacity="0.8"></circle>
  </svg>

  <ul class="menu-dropdown" 
    style="display:none; pointer-events:auto; position:absolute; top:70px; right:0; background:white; border-radius:6px; list-style:none; padding-top: -30px;width:100px; height: 80px; font-size:13px; z-index:9999; overflow: hidden;"
    onclick="event.stopPropagation(); event.stopImmediatePropagation();"
    onmousedown="event.stopPropagation(); event.stopImmediatePropagation();"
  >
    <li style="margin-top:-25px; padding-left: 5px; padding-right: 5px; cursor:pointer; color: #2B2C30;"  
      onclick="handleEdit(event)"
    >Edit Ticket</li>

    <li style="margin-top:-45px; padding-left: 5px; padding-right: 5px; cursor:pointer; color: #2B2C30;" 
      onclick="handleDelete(event)"
    >Delete Ticket</li>
  </ul>
</div>

        </div>

        <div style="display:flex; justify-content:space-between; margin-top:20px; width:320px; height:100px; overflow:hidden; margin-left:10px;">
          <div style="height:30px; width:100px; font-size:12px; display:flex;">
            <span style="margin-top:-25px !important;">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect width="20" height="20" rx="3.33333" fill="#29BF7F"/> <path d="M6.43164 14.3018L9.29004 12.167L9.29102 12.166C9.47176 12.0328 9.69053 11.9609 9.91504 11.9609C10.0834 11.9609 10.2482 12.0017 10.3965 12.0781L10.5391 12.166L10.54 12.167L13.373 14.291V5.91699H6.43164V14.3018ZM14.4316 14.3789C14.4277 14.5672 14.3725 14.7506 14.2725 14.9102C14.1723 15.0699 14.0303 15.1996 13.8623 15.2852C13.6944 15.3706 13.5064 15.4094 13.3184 15.3965C13.1304 15.3835 12.9495 15.3196 12.7949 15.2119L12.79 15.208L9.91504 13.0518L7.01465 15.209C6.83427 15.3432 6.61546 15.4161 6.39062 15.417H6.38965C6.2298 15.4164 6.07171 15.38 5.92773 15.3105V15.3096C5.75087 15.2261 5.60123 15.0946 5.49609 14.9297C5.3907 14.7642 5.33364 14.5721 5.33301 14.376V5.87402C5.3338 5.7361 5.36234 5.59971 5.41602 5.47266C5.46971 5.3456 5.54812 5.23049 5.64648 5.13379C5.74485 5.0371 5.86131 4.96069 5.98926 4.90918C6.1165 4.85797 6.2525 4.83272 6.38965 4.83398V4.83301H13.3906C13.6661 4.83457 13.9302 4.94494 14.125 5.13965C14.3198 5.33446 14.4301 5.59852 14.4316 5.87402V14.3789Z" fill="white" stroke="white" stroke-width="0.333333"/> </svg>
            </span>
            <span style="color:#2B2C30B2; margin-top:-30px !important; font-size: 14px; display:flex; margin-left:-3px;">
              ${ie["card-code"]||"N/A"}
            </span>
          </div>

          <div style="
            height:26px;
            width:26px;
            padding:5px;
            color:white;
            border:1px solid white;
            display:flex;
            justify-content:center;
            border-radius:50%;
            align-items:center;
            margin-top: 5px;
            pointer-events:none;
            background:${So?"#4ADE80":"#9CA3AF"};
          " onclick="event.stopPropagation();">
            <span style="font-size: 13px;">${Eo}</span>
          </div>
        </div>
      </div>
    `,jo=te===ee.length-1;z.children.push({id:`card-${L}-${R}-${te}`,dangerouslySetInnerHTML:`<div disabled id="card-inner-${L}-${R}-${te}" style="pointer-events:auto; height: 110px; width: 0px;">${zo}</div>`,expanded:!1,isLastCard:jo,selectable:!1})}),V.children.push(z)}),l.children.push(V)}),l}const ko=c=>{var g,N,L,W;if(!c.shiftKey)return;c.preventDefault(),c.stopPropagation(),c.deltaY<0?(N=(g=b.value)==null?void 0:g.execCommand)==null||N.call(g,"zoomIn"):(W=(L=b.value)==null?void 0:L.execCommand)==null||W.call(L,"zoomOut")};return qt(()=>{vt(()=>{const c=h.value;c&&c.addEventListener("wheel",ko,{passive:!1})})}),Xo(()=>{var c;v.value==="mindmap"&&h.value&&((c=xe.value)!=null&&c.sheets)&&vt(()=>{var L,W,X;const l=No(xe.value.sheets);b.value&&((W=(L=b.value).destroy)==null||W.call(L),b.value=null);const g=()=>{const V=document.querySelector(".mind-elixir .context-menu");V&&(V.style.display="",V.style.visibility="",V.style.opacity="",V.style.pointerEvents="",V.classList.remove("show","visible","open"),V.hidden=!0,requestAnimationFrame(()=>{V&&(V.hidden=!0)}))},N=new he({el:h.value,direction:he.RIGHT,draggable:!0,contextMenu:!0,contextMenuOption:{link:!1,focus:!0,addChild:!1,addParent:!1,summary:!1,extend:[{id:"cm-addVariable",name:"Add Variable",onclick:()=>{var F,B;const V=(B=(F=b.value)==null?void 0:F.currentNode)==null?void 0:B.nodeObj;V&&(V.isRoot?Dt():Se.error("Add Variable is only allowed on the root node."),g())}},{id:"cm-addList",name:"Add List",onclick:()=>{var F,B,R;const V=(B=(F=b.value)==null?void 0:F.currentNode)==null?void 0:B.nodeObj;V&&((R=V.id)!=null&&R.startsWith("variable")?xt():Se.error("Add List is only allowed on variable nodes."),g())}},{id:"cm-deleteList",name:"Delete List",onclick:()=>{var F,B,R,z,ee;const V=(B=(F=b.value)==null?void 0:F.currentNode)==null?void 0:B.nodeObj;if(V){if((R=V.id)!=null&&R.startsWith("sheetlist")){const[ie,te]=V.id.split("-").map(Number),Q=(ee=(z=xe.value)==null?void 0:z.sheets)==null?void 0:ee[te],pt=Q==null?void 0:Q.variables;ke.value={...pt,title:V.topic},Ve.value=!0}else Se.error("Delete List is only allowed on variable nodes.");g()}}},{id:"cm-addTask",name:"Add Task",onclick:()=>{var F,B,R;const V=(B=(F=b.value)==null?void 0:F.currentNode)==null?void 0:B.nodeObj;V&&((R=V.id)!=null&&R.startsWith("sheetlist")?T.value=!0:Se.error("Add Task is only allowed on sheet list nodes."),g())}}]}});b.value=N,N.init({nodeData:l}),(X=h.value)==null||X.addEventListener("contextmenu",()=>{setTimeout(()=>{var B,R;const V=(R=(B=b.value)==null?void 0:B.currentNode)==null?void 0:R.nodeObj;if(!V)return;Array.from(document.querySelectorAll(".mind-elixir .context-menu li")).forEach(z=>{var ie,te,Q;const ee=z.id;V.isRoot?z.style.display=ee==="Add Variable"?"":"none":(ie=V.id)!=null&&ie.startsWith("variable")?z.style.display=ee==="Add List"?"":"none":(te=V.id)!=null&&te.startsWith("sheetlist")?z.style.display=ee==="Add Task"||ee==="Delete List"?"":"none":(Q=V.id)!=null&&Q.startsWith("card")&&(z.style.display="none")})},10)})})}),window.toggleMenu=function(c){const l=c.nextElementSibling;if(!l)return;const g=l.style.display==="block";l.style.display=g?"none":"block";const N=L=>{L.target.closest(".menu-wrapper")||(document.querySelectorAll(".menu-dropdown").forEach(W=>{W.style.display="none"}),document.removeEventListener("click",N))};document.addEventListener("click",N)},window.handleEdit=function(c){var z,ee,ie,te;c.stopPropagation(),c.stopImmediatePropagation();const g=c.target.closest(".menu-wrapper");if(!g)return;const N=g.getAttribute("data-cardid");if(!N)return;const[L,W,X,V]=N.split("-").map(Number),F=(ee=(z=xe.value)==null?void 0:z.sheets)==null?void 0:ee[W],B=(ie=F==null?void 0:F.sheet_lists)==null?void 0:ie[X],R=(te=B==null?void 0:B.cards)==null?void 0:te[V];R&&(q(R),document.querySelectorAll(".menu-dropdown").forEach(Q=>{Q.style.display="none"}))},window.handleDelete=function(c){var z,ee,ie,te;c.stopPropagation(),c.stopImmediatePropagation();const g=c.target.closest(".menu-wrapper");if(!g)return;const N=g.getAttribute("data-cardid");if(!N)return;const[L,W,X,V]=N.split("-").map(Number),F=(ee=(z=xe.value)==null?void 0:z.sheets)==null?void 0:ee[W],B=(ie=F==null?void 0:F.sheet_lists)==null?void 0:ie[X],R=(te=B==null?void 0:B.cards)==null?void 0:te[V];R&&(p.value=R,f.value=R._id,u.value=!0,document.querySelectorAll(".menu-dropdown").forEach(Q=>{Q.style.display="none"}))},window.handleStatusChange=function(c,l,g,N){var X,V,F,B,R,z;const L=(z=(R=(B=(F=(V=(X=xe.value)==null?void 0:X.sheets)==null?void 0:V[l])==null?void 0:F.sheet_lists)==null?void 0:B[g])==null?void 0:R.cards)==null?void 0:z[N];if(!L)return;const W=c.target.value;w(L,W)},(c,l)=>{var g,N,L,W,X,V,F,B,R;return S(),O(me,null,[E("div",nl,[E("div",ol,[v.value!=="mindmap"?(S(),Ce(dn,{key:0,onEditOption:po,modelValue:le.value,"onUpdate:modelValue":l[1]||(l[1]=z=>le.value=z),canEdit:H(t),canDelete:H(n),onDeleteOption:lo,options:no.value,variant:"secondary"},{more:Ge(()=>[H(i)?(S(),O("div",{key:0,onClick:l[0]||(l[0]=z=>Dt()),class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},l[28]||(l[28]=[E("i",{class:"fa-solid fa-plus"},null,-1),Me(" Add new ")]))):ne("",!0)]),_:1},8,["modelValue","canEdit","canDelete","options"])):ne("",!0),v.value==="mindmap"?(S(),O("div",il,l[29]||(l[29]=[E("h3",{class:"font-bold text-xl"},"Mind Map",-1)]))):ne("",!0),E("div",sl,[(v.value=="kanban",S(),Ce(dn,{key:0,actions:!1,prefix:"View by",modelValue:re.value,"onUpdate:modelValue":l[3]||(l[3]=z=>re.value=z),options:H(fe),variant:"secondary"},{more:Ge(()=>[H(o)?(S(),O("div",{key:0,onClick:l[2]||(l[2]=()=>{$.value=!0}),class:"sticky bottom-0 bg-bg-dropdown shadow-md shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},l[30]||(l[30]=[E("i",{class:"fa-solid fa-plus"},null,-1),Me(" Add new ")]))):ne("",!0)]),_:1},8,["modelValue","options"])),pe(ti,{onOnChange:l[4]||(l[4]=z=>{ut.value=z}),placeholder:"Search in Orchit AI space"}),E("div",rl,[E("button",{class:nt(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",v.value==="kanban"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"List view",onClick:l[5]||(l[5]=z=>v.value="kanban")},l[31]||(l[31]=[E("i",{class:"fa-solid fa-chart-kanban"},null,-1)]),2),E("button",{onClick:l[6]||(l[6]=z=>v.value="table"),class:nt(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",v.value==="table"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gallery view"},l[32]||(l[32]=[E("i",{class:"fa-solid fa-align-left"},null,-1)]),2),E("button",{onClick:l[7]||(l[7]=z=>v.value="mindmap"),class:nt(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",v.value==="mindmap"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"MindMap view"},l[33]||(l[33]=[E("i",{class:"fa-solid fa-chart-diagram"},null,-1)]),2)])])]),v.value=="kanban"?(S(),O(me,{key:0},[ft(pe(ei,null,null,512),[[nn,H(Ze)||H(at)]]),ft(E("div",ll,[pe(H(ye),{onOnPlus:ro,board:Jt.value,"onDelete:column":l[8]||(l[8]=z=>so(z)),"onUpdate:column":l[9]||(l[9]=z=>oo(z)),onReorder:eo,onAddColumn:dt,"onSelect:ticket":q,onOnBoardUpdate:to,variable_id:re.value,sheet_id:le.value},{"column-footer":Ge(z=>{var ee,ie,te,Q,pt;return[(ie=(ee=H(_e))==null?void 0:ee.transitions)!=null&&ie.all_allowed&&!((pt=(Q=(te=H(_e))==null?void 0:te.transitions)==null?void 0:Q.all_allowed)!=null&&pt.includes(z.column.title))&&H(_e).transitions.currentColumn!=z.column.title?(S(),O("div",al," Disbale ( you can't drop here ) ")):ne("",!0)]}),ticket:Ge(({ticket:z})=>[pe(ni,{selectedVar:re.value,onSelect:()=>{q(z)},ticket:z},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"]),E("div",{class:"min-w-[328px]",onClick:l[11]||(l[11]=ge(()=>{},["stop"]))},[ct.value?(S(),O("div",dl,[pe(on,{autofocus:!0,modelValue:Xe.value,"onUpdate:modelValue":l[10]||(l[10]=z=>Xe.value=z),placeholder:"Add New list",onKeyup:rt(wt,["enter"])},null,8,["modelValue"]),l[34]||(l[34]=E("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),E("div",cl,[pe(sn,{onClick:wt,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:Ge(()=>[Me(de(H(Ue)?"Adding...":"Add list"),1)]),_:1}),E("i",{class:"fa-solid fa-close",onClick:xt})])])):(S(),O("button",{key:1,disabled:!H(o),class:nt(["text-sm text-text-primary py-2.5 font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",H(o)?"cursor-pointer":"cursor-not-allowed"]),onClick:ge(xt,["stop"])}," + Add List ",10,ul))])],512),[[nn,!H(Ze)&&!H(at)]])],64)):ne("",!0),v.value=="table"?(S(),Ce(wi,{key:1,onToggleVisibility:_o,onAddVar:l[12]||(l[12]=()=>{$.value=!0}),isPending:H(Ze)||H(yt),columns:fo.value,rows:Jt.value,canCreate:H(s),canCreateVariable:H(o),onCreate:xo},null,8,["isPending","columns","rows","canCreate","canCreateVariable"])):ne("",!0),v.value==="mindmap"?(S(),O(me,{key:2},[E("div",{ref_key:"mindMapRef",ref:h,class:"w-full h-[90vh] rounded-md relative"},null,512),ct.value?(S(),O("div",{key:0,class:"absolute top-40 left-70 bg-bg-body rounded-lg p-4 shadow-lg z-100 min-w-[328px] border",onClick:l[14]||(l[14]=ge(()=>{},["stop"]))},[pe(on,{autofocus:!0,modelValue:Xe.value,"onUpdate:modelValue":l[13]||(l[13]=z=>Xe.value=z),placeholder:"Add New list",onKeyup:rt(wt,["enter"])},null,8,["modelValue"]),l[35]||(l[35]=E("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),E("div",pl,[pe(sn,{onClick:wt,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:Ge(()=>[Me(de(H(Ue)?"Adding...":"Add list"),1)]),_:1}),E("i",{class:"fa-solid fa-close cursor-pointer",onClick:xt})])])):ne("",!0)],64)):ne("",!0)]),pe(H(Y),{onClick:l[15]||(l[15]=ge(()=>{},["stop"])),modelValue:Ve.value,"onUpdate:modelValue":l[16]||(l[16]=z=>Ve.value=z),title:"Delete List",itemLabel:"list",itemName:(g=ke.value)==null?void 0:g.title,requireMatchText:(N=ke.value)==null?void 0:N.title,confirmText:"Delete List",cancelText:"Cancel",size:"md",loading:H(Ue),onConfirm:io,onCancel:l[17]||(l[17]=()=>{Ve.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),T.value?(S(),Ce(H(_),{selectedVariable:re.value,listId:(L=ke.value)==null?void 0:L.title,sheet_id:le.value,key:"createTaskModalKey",modelValue:T.value,"onUpdate:modelValue":l[18]||(l[18]=z=>T.value=z),onSubmit:l[19]||(l[19]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):ne("",!0),(W=k.value)!=null&&W._id?(S(),Ce(H(Fe),{key:1,details:k.value,onClose:l[20]||(l[20]=()=>{q({variables:{}})}),showPanel:!!((X=k.value)!=null&&X._id)},null,8,["details","showPanel"])):ne("",!0),pe(H(J),{size:"md",sheet:Pe.value,modelValue:Ne.value,"onUpdate:modelValue":l[21]||(l[21]=z=>Ne.value=z)},null,8,["sheet","modelValue"]),$.value?(S(),Ce(H(we),{key:2,modelValue:$.value,"onUpdate:modelValue":l[22]||(l[22]=z=>$.value=z),sheetID:le.value},null,8,["modelValue","sheetID"])):ne("",!0),pe(H(Y),{onClick:l[23]||(l[23]=ge(()=>{},["stop"])),modelValue:d.value,"onUpdate:modelValue":l[24]||(l[24]=z=>d.value=z),title:"Delete Sheet",itemLabel:"Sheet",itemName:(V=Pe.value)==null?void 0:V.title,requireMatchText:(F=Pe.value)==null?void 0:F.title,confirmText:"Delete Sheet",cancelText:"Cancel",size:"md",loading:H(co),onConfirm:uo,onCancel:l[25]||(l[25]=()=>{d.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),pe(H(Y),{modelValue:u.value,"onUpdate:modelValue":l[26]||(l[26]=z=>u.value=z),title:"Delete Ticket",itemLabel:"Ticket",itemName:(B=p.value)==null?void 0:B.title,requireMatchText:(R=p.value)==null?void 0:R.title,confirmText:"Delete Ticket",cancelText:"Cancel",size:"md",loading:x.value,onConfirm:G,onCancel:l[27]||(l[27]=()=>{u.value=!1,p.value=null})},null,8,["modelValue","itemName","requireMatchText","loading"]),l[36]||(l[36]=E("div",null,null,-1))],64)}}}),Ml=Qo(ml,[["__scopeId","data-v-d22f4a47"]]);export{Ml as default};
