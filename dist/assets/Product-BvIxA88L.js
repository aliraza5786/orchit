const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-CNtPViHO.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-9K3ykgmj.js","assets/index-BwDegMQR.js","assets/index-CtUylECF.css","assets/CreateSheetModal-Dd7I2MvT.js","assets/useOpenAIGeneration-DYtWPseQ.js","assets/CreateSheetModal-BPf3BB8o.css","assets/CreateVariableModal-Bt2uvdQI.js","assets/ConfirmDeleteModal-B4AwgacM.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-BtEcibsL.js","assets/SidePanel-B3bD0s9k.js","assets/SidePanel-D0jmQaof.css","assets/KanbanBoard-A6fi2rIM.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-FP483xO8.js","assets/index-Cj6ciq7q.js","assets/workspace-CqnIlRFj.js","assets/KanbanBoard-D-U-s5tF.css"])))=>i.map(i=>d[i]);
import{d as ge,r as d,W as ye,X as Ve,a as Ce,Y as ke,Z as Ae,c as k,m as E,a8 as De,$ as he,a0 as Le,i as A,e as o,h as i,b as O,j as D,A as J,w as h,f as R,n as t,C as ee,a1 as c,g as U,a4 as Ie,_ as Pe,t as Te,B as Ee,F as Oe,a2 as _,p as Re,o as u}from"./index-BwDegMQR.js";import{u as Ue}from"./workspace-CqnIlRFj.js";import{D as ae,K as Be}from"./KanbanSkeleton-CaozuWBb.js";import{_ as Me}from"./SearchBar.vue_vue_type_script_setup_true_lang-D1E2iujg.js";import"./index-Cj6ciq7q.js";const Se={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-2xl shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex-col flex"},Ke={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1"},Ne={class:"flex gap-3 items-center"},$e={class:"flex overflow-x-auto gap-3 p-4"},je={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},qe={key:0,class:"bg-bg-body rounded-lg p-4"},ze={class:"flex items-center mt-3 gap-3"},Ze=ge({__name:"Product",setup(He){const le=c(()=>_(()=>import("./CreateTaskModal-CNtPViHO.js"),__vite__mapDeps([0,1,2,3]))),te=c(()=>_(()=>import("./CreateSheetModal-Dd7I2MvT.js"),__vite__mapDeps([4,2,3,5,6]))),oe=c(()=>_(()=>import("./CreateVariableModal-Bt2uvdQI.js"),__vite__mapDeps([7,2,3]))),se=c(()=>_(()=>import("./ConfirmDeleteModal-B4AwgacM.js"),__vite__mapDeps([8,9,2,3]))),de=c(()=>_(()=>import("./SidePanel-B3bD0s9k.js"),__vite__mapDeps([10,2,3,11]))),re=c(()=>_(()=>import("./KanbanBoard-A6fi2rIM.js"),__vite__mapDeps([12,2,3,13,14,9,15,16]))),f=d(!1),B=Re(),{workspaceId:v,moduleId:m}=ye(),{data:L}=Ve(v.value,m.value),ie=Ce(),{mutate:I,isPending:M}=ke({onSuccess:()=>{ie.invalidateQueries({queryKey:["sheet-list"]}),C.value="",p.value=!1,V.value=!1,p.value=!1}}),S=a=>{I({workspace_id:v.value,module_id:m.value,variable_id:s.value,value:a})},{data:b}=Ae({workspace_id:v,workspace_module_id:m}),P=k(()=>{var a;return b.value?(a=b.value[0])==null?void 0:a._id:""}),r=d(P.value);E(P,()=>{r.value=P.value});const T=k(()=>{var a;return L.value?(a=L.value[0])==null?void 0:a._id:""}),s=d(T.value);E(T,()=>{s.value=T.value});const w=Ue(),{data:ne,isPending:K}=De(m,r,k(()=>[...w.selectedLaneIds]),s),x=d(!1),g=d(),N=a=>{g.value=a},y=d(!1),ue=()=>{y.value=!y.value},ve=he(),me=Le();function pe(a){a.type=="column"?ve.mutate({payload:{workspace_id:v.value,workspace_module_id:m.value,variable_id:s.value,moved_value:a.meta.id,new_index:a.meta.newIndex}}):me.mutate({payload:{workspace_id:v.value,card_id:a.meta.moved._id,group_value:a.meta.fromColumnId,group_variable_id:s.value,new_index:a.meta.newIndex,sheet_id:r.value}})}const ce=a=>{},_e=k(()=>(b.value||[]).map(a=>({_id:a._id,title:a.variables["sheet-title"],description:a.variables["sheet-description"],icon:a.icon})));E(b,a=>{var e;(a==null?void 0:a.length)>0&&(r.value=(e=a[0])==null?void 0:e._id)});const V=d(!1),C=d("");function $(){V.value=!V.value}function j(){const a=C.value.trim();a&&S(a)}const fe=a=>{I({workspace_id:B.params.id,module_id:B.params.module_id,new_value:a.title,value:a.oldTitle,variable_id:s.value})},p=d(!1),n=d(),be=()=>{I({value:n.value.title,workspace_id:v.value,module_id:m.value,newValue:n.value.title,variable_id:s.value,is_trash:!0})},we=a=>{p.value=!0,n.value=a},xe=a=>{x.value=!0,n.value=a};return(a,e)=>{var q,z,H,F,Q;return u(),A(Oe,null,[o("div",Se,[o("div",Ke,[i(ae,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l),options:_e.value,variant:"secondary"},{more:h(()=>[o("div",{onClick:e[0]||(e[0]=l=>ue()),class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[16]||(e[16]=[o("i",{class:"fa-solid fa-plus"},null,-1),R(" Add new ")]))]),_:1},8,["modelValue","options"]),o("div",Ne,[i(ae,{prefix:"View by",modelValue:s.value,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value=l),options:t(L),variant:"secondary"},{more:h(()=>[o("div",{onClick:e[2]||(e[2]=l=>f.value=!0),class:"sticky bottom-0 bg-bg-dropdown shadow-md shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[17]||(e[17]=[o("i",{class:"fa-solid fa-plus"},null,-1),R(" Add new ")]))]),_:1},8,["modelValue","options"]),i(Me,{placeholder:"Search in Orchit AI space"})])]),J(i(Be,null,null,512),[[ee,t(K)]]),J(o("div",$e,[i(t(re),{onOnPlus:xe,"onDelete:column":e[4]||(e[4]=l=>we(l)),"onUpdate:column":e[5]||(e[5]=l=>fe(l)),onReorder:pe,onAddColumn:S,"onSelect:ticket":N,board:t(ne),onOnBoardUpdate:ce,variable_id:s.value,sheet_id:r.value},{"column-footer":h(l=>{var W,Y,X,Z,G;return[(Y=(W=t(w))==null?void 0:W.transitions)!=null&&Y.all_allowed&&!((G=(Z=(X=t(w))==null?void 0:X.transitions)==null?void 0:Z.all_allowed)!=null&&G.includes(l.column.title))&&t(w).transitions.currentColumn!=l.column.title?(u(),A("div",je," Disbale ( you can't drop here )")):D("",!0)]}),_:1},8,["board","variable_id","sheet_id"]),o("div",{class:"min-w-[328px]",onClick:e[7]||(e[7]=U(()=>{},["stop"]))},[V.value?(u(),A("div",qe,[i(Pe,{autofocus:!0,modelValue:C.value,"onUpdate:modelValue":e[6]||(e[6]=l=>C.value=l),placeholder:"Add New list",onKeyup:Ie(j,["enter"])},null,8,["modelValue"]),e[18]||(e[18]=o("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),o("div",ze,[i(Ee,{onClick:j,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:h(()=>[R(Te(t(M)?"Adding...":"Add list"),1)]),_:1}),o("i",{class:"fa-solid fa-close",onClick:$})])])):(u(),A("button",{key:1,class:"text-sm text-text-primary py-2.5 cursor-pointer font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",onClick:U($,["stop"])}," + Add List "))])],512),[[ee,!t(K)]])]),i(t(se),{onClick:e[8]||(e[8]=U(()=>{},["stop"])),modelValue:p.value,"onUpdate:modelValue":e[9]||(e[9]=l=>p.value=l),title:"Delete List",itemLabel:"list",itemName:(q=n.value)==null?void 0:q.title,requireMatchText:(z=n.value)==null?void 0:z.title,confirmText:"Delete workspace",cancelText:"Cancel",size:"md",loading:t(M),onConfirm:be,onCancel:e[10]||(e[10]=()=>{p.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),x.value?(u(),O(t(le),{selectedVariable:s.value,listId:(H=n.value)==null?void 0:H.title,sheet_id:r.value,key:"createTaskModalKey",modelValue:x.value,"onUpdate:modelValue":e[11]||(e[11]=l=>x.value=l),onSubmit:e[12]||(e[12]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):D("",!0),(F=g.value)!=null&&F._id?(u(),O(t(de),{key:1,details:g.value,onClose:e[13]||(e[13]=()=>{N({variables:{}})}),showPanel:!!((Q=g.value)!=null&&Q._id)},null,8,["details","showPanel"])):D("",!0),i(t(te),{size:"md",modelValue:y.value,"onUpdate:modelValue":e[14]||(e[14]=l=>y.value=l)},null,8,["modelValue"]),f.value?(u(),O(t(oe),{key:2,modelValue:f.value,"onUpdate:modelValue":e[15]||(e[15]=l=>f.value=l),sheetID:r.value},null,8,["modelValue","sheetID"])):D("",!0)],64)}}});export{Ze as default};
