import{d as E,V as T,r as x,c as F,n as l,j as C,o as w,i as s,w as m,l as i}from"./index-CuDA-aHM.js";const I={class:"max-h-[calc(100vh-100px)]"},j=E({__name:"GanttChartView",props:{data:{}},emits:["select:ticket"],setup(u,{emit:h}){const g=u,{isDark:o}=T(),r=x(null),c=["#DBEAFE","#DCFCE7","#FEF3C7","#FCE7F3","#EDE9FE","#ECFEFF","#FFE4E6"],f={id:"TaskID",name:"TaskName",startDate:"StartDate",endDate:"EndDate",duration:"Duration",progress:"Progress",child:"subtasks"},D=F(()=>g.data.map((e,a)=>{const t=new Date(e["start-date"]),n=e["end-date"]?new Date(e["end-date"]):t,d=Math.ceil((n.getTime()-t.getTime())/(1e3*60*60*24))||1,p=c[a%c.length];return{TaskID:e._id,TaskName:e["card-title"],StartDate:t,EndDate:n,Duration:d,Progress:0,barColor:p,foreground:"#374151",extendedProps:{card:e}}})),_=h,k=e=>{const a=e.data.extendedProps.card;_("select:ticket",a)};return l(o,()=>{var a;const e=(a=r.value)==null?void 0:a.ej2Instances;e&&(console.log("ejgantt chart",e),e.theme=o.value?"Material3Dark":"Material3",e.refresh())},{immediate:!0}),l(o,()=>{var n;const e=document.getElementById("light-theme"),a=document.getElementById("dark-theme");e&&a&&(e.disabled=o.value,a.disabled=!o.value);const t=(n=r.value)==null?void 0:n.ej2Instances;t&&t.refresh()},{immediate:!0}),(e,a)=>{const t=i("e-column"),n=i("e-columns"),d=i("ejs-gantt");return w(),C("div",I,[s(d,{ref_key:"ganttRef",ref:r,dataSource:D.value,treeColumnIndex:1,taskFields:f,height:"100%",onRowSelected:k},{default:m(()=>[s(n,null,{default:m(()=>[s(t,{field:"TaskID",headerText:"Task ID",textAlign:"Right",width:"70"}),s(t,{field:"TaskName",headerText:"Task Name",textAlign:"Left",width:"200"}),s(t,{field:"StartDate",headerText:"Start Date",textAlign:"Right",format:"yMd",width:"90"}),s(t,{field:"Duration",headerText:"Duration",textAlign:"Right",width:"80"})]),_:1})]),_:1},8,["dataSource"])])}}});export{j as default};
