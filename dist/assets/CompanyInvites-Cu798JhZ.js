import{d as A,Y as E,b9 as G,r as p,i as o,e,n as a,R as P,t as r,f as v,j as x,P as U,h as H,w as J,B as L,b8 as R,l as O,o as d}from"./index-Dp_Ec3Oc.js";const $={class:"min-h-[100dvh] flex items-center justify-center bg-bg-body px-4"},q={class:"w-full max-w-xl"},z={class:"rounded-2xl border border-border bg-bg-card 1F2430] shadow-sm overflow-hidden"},K={key:0,class:"p-6"},M={key:1,class:"p-6"},Q={class:"rounded-lg border border-red-200 bg-red-50 p-4 text-red-800 dark:border-red-900/50 dark:bg-red-950/40 red-200"},X={class:"text-sm leading-relaxed"},Z={class:"mt-4 flex gap-2"},ee={key:2,class:"p-6"},te={class:"rounded-lg border border-emerald-200 bg-emerald-50 p-4 text-emerald-800 emerald-200"},se={class:"text-sm leading-relaxed"},ae={key:3,class:"p-6"},oe={key:4,class:"p-6"},de={class:"flex items-start gap-4"},ie=["src"],ne=["src"],re={class:"text-lg font-medium text-text-primary"},le={class:"text-sm text-text-secondary text-secondary-300"},ce={class:"font-medium"},ue={key:0},pe={class:"font-medium text-xs"},ve={key:0,class:"text-xs text-red-500 mt-1"},xe={key:1,class:"text-xs text-text-secondary -500 text-secondary-400 mt-1"},me={key:0,class:"mt-4 rounded-lg border p-3 text-sm text-text-secondary -700 text-secondary-200 dark:border-border 1F2430]"},be={class:"mt-6 flex flex-wrap gap-2"},ge=["disabled"],ye={key:0},_e={key:1},fe={key:1,class:"mt-3 text-xs text-emerald-600 emerald-400"},we=A({__name:"CompanyInvites",setup(he){const _=O(),{token:m}=E(),{data:s,refetch:V,isPending:D}=G(m.value),c=p(null),l=p(!1),u=p(null),b=p(null),g=p(!1),f=p(!1);function S(i){return i?i.replace(/[_-]+/g," ").replace(/\b\w/g,t=>t.toUpperCase()):""}async function Y(){var i,t;if(!(!s.value||s.value.status=="expired")){l.value=!0,u.value="accepted",c.value=null;try{await R.post("/workspace/company/invitations/accept",{token:m.value}),g.value=!0}catch(n){c.value=((t=(i=n==null?void 0:n.response)==null?void 0:i.data)==null?void 0:t.message)||"Could not accept the invitation."}finally{l.value=!1,u.value=null}}}async function F(){var i,t;if(s.value){l.value=!0,u.value="decline",c.value=null;try{await R.post(`/workspace/invitation/accept/${encodeURIComponent(m.value)}`,{status:"rejected"}),f.value=!0}catch(n){c.value=((t=(i=n==null?void 0:n.response)==null?void 0:i.data)==null?void 0:t.message)||"Could not decline the invitation."}finally{l.value=!1,u.value=null}}}function y(){_.push({name:"home"}).catch(()=>{})}function W(){var i;(i=s.value)!=null&&i.workspace_id?_.push({name:"workspace",params:{id:s.value.workspace_id}}).catch(()=>{}):y()}return(i,t)=>{var n,h,k,w,C,j,I,T,B,N;return d(),o("div",$,[e("div",q,[e("div",z,[t[9]||(t[9]=e("div",{class:"px-6 py-5 border-b border-border"},[e("h1",{class:"text-2xl font-semibold text-text-primary"},"Space invitation"),e("p",{class:"text-sm text-text-secondary text-secondary-300 mt-1"}," Accept the invite to join this space, or decline to ignore it. ")],-1)),a(D)?(d(),o("div",K,t[1]||(t[1]=[P('<div class="animate-pulse space-y-4"><div class="h-5 w-56 bg-bg-surface"></div><div class="h-4 w-40 bg-bg-surface"></div><div class="h-24 w-full bg-bg-surface rounded-lg"></div><div class="flex gap-2"><div class="h-10 w-28 bg-bg-surface"></div><div class="h-10 w-28 bg-bg-surface"></div></div></div>',1)]))):c.value?(d(),o("div",M,[e("div",Q,[t[2]||(t[2]=e("div",{class:"font-medium mb-1"},"We couldnâ€™t open this invite.",-1)),e("p",X,r(c.value),1)]),e("div",Z,[e("button",{class:"px-4 py-2 rounded-md border text-sm border-border",onClick:t[0]||(t[0]=()=>a(V)())},"Try again"),e("button",{class:"px-4 py-2 rounded-md bg-black text-text-primary text-sm",onClick:y},"Go to home")])])):g.value?(d(),o("div",ee,[e("div",te,[t[5]||(t[5]=e("div",{class:"font-medium mb-1"},"Youâ€™re in! ðŸŽ‰",-1)),e("p",se,[t[3]||(t[3]=v(" Youâ€™ve joined ")),e("strong",null,r((h=(n=a(s))==null?void 0:n.company)==null?void 0:h.title),1),t[4]||(t[4]=v(". "))])]),e("div",{class:"mt-4 flex gap-2"},[e("button",{class:"px-4 py-2 rounded-md bg-black text-sm text-text-primary",onClick:W},"Open workspace")])])):f.value?(d(),o("div",ae,[t[6]||(t[6]=e("div",{class:"rounded-lg border border-gray-200 bg-gray-50 p-4 text-text-secondary -800 dark:border-border 1F2430] dark:bg-[#171922] text-secondary-200"},[e("div",{class:"font-medium mb-1"},"Invite declined"),e("p",{class:"text-sm leading-relaxed"},"Weâ€™ve let the workspace know you wonâ€™t be joining.")],-1)),e("div",{class:"mt-4 flex gap-2"},[e("button",{class:"px-4 py-2 rounded-md bg-black text-white text-sm dark:bg-white text-primary",onClick:y},"Go to home")])])):(d(),o("div",oe,[e("div",de,[a(s).workspace_logo?(d(),o("img",{key:0,src:a(s).workspace_logo,alt:"",class:"h-12 w-12 rounded-xl object-contain border border-border"},null,8,ie)):(d(),o("div",{key:1,src:a(s).workspace_logo,alt:"",class:"h-12 w-12 bg-bg-surface flex justify-center items-center rounded-xl object-contain border border-border"},r(a(U)((w=(k=a(s))==null?void 0:k.company)==null?void 0:w.title)),9,ne)),e("div",null,[e("h2",re,r((j=(C=a(s))==null?void 0:C.company)==null?void 0:j.title),1),e("p",le,[t[7]||(t[7]=v(" Invited by ")),e("span",ce,r(a(s).invited_by.name||a(s).email),1),a(s).role_title?(d(),o("span",ue," for the "+r(S(a(s).role_title))+" Role",1)):x("",!0),t[8]||(t[8]=e("br",null,null,-1)),e("span",pe,r(a(s).invited_by.email),1)]),(I=a(s))!=null&&I.is_expire?(d(),o("p",ve,"This invite has expired.")):(T=a(s))!=null&&T.is_expire?(d(),o("p",xe," This Invitation Link has been Expire ")):x("",!0)])]),(B=b.value)!=null&&B.message?(d(),o("div",me," â€œ"+r(b.value.message)+"â€ ",1)):x("",!0),e("div",be,[H(L,{disabled:a(s).is_expire||l.value,onClick:Y},{default:J(()=>[v(r(l.value&&u.value==="accepted"?"Joiningâ€¦":"Accept invitation"),1)]),_:1},8,["disabled"]),e("button",{class:"px-4 py-2 rounded-md text-sm border dark:border-border 353D50] hover:bg-gray-50 dark:hover:bg-[#1a1a1f] disabled:opacity-60 disabled:cursor-not-allowed",disabled:l.value||a(s).is_expire,onClick:F},[l.value&&u.value==="decline"?(d(),o("span",ye,"Decliningâ€¦")):(d(),o("span",_e,"Decline"))],8,ge)]),((N=b.value)==null?void 0:N.status)==="accepted"&&!g.value?(d(),o("p",fe," Youâ€™ve already accepted this invite. ")):x("",!0)]))]),t[10]||(t[10]=e("p",{class:"text-center text-xs text-text-secondary -500 text-secondary-400 mt-4"}," If this wasnâ€™t you, you can safely ignore this page. ",-1))])])}}});export{we as default};
