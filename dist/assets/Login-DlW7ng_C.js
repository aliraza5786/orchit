import{d as M,u as N,r as c,c as o,a as Q,b as z,e as A,w as p,o as E,f as s,s as n,g as r,h as D,i as m,j as K,k as T,_ as V,t as B,B as H,l as R,m as U}from"./index-0D4unOmS.js";import{_ as j}from"./AuthLayout.vue_vue_type_script_setup_true_lang-DqkllSuF.js";import{l as O}from"./auth-BC_l3q2b.js";import"./favicon-BAFXWHLW.js";import"./Header-BW7dcSj3.js";import"./useTheme-Cexi_EwX.js";import"./dark-logo-Mcb_sJlF.js";const W={class:"max-w-[500px] md:mx-auto w-full text-text-primary bg-bg-body"},G={key:0,class:"text-red-500 text-sm text-center mt-2"},J={class:"text-center mt-4"},re=M({name:"LoginPage",__name:"Login",setup(X){const w=N(),P=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,i=c(""),u=c(""),a=c(""),l={email:!1,password:!1},f=o(()=>l.email?i.value.trim()?P.test(i.value)?"":"Invalid email":"Email is required":""),I=o(()=>!!f.value),v=o(()=>l.password?u.value?u.value.length<6?"Password must be at least 6 characters":"":"Password is required":""),S=o(()=>!!v.value),C=o(()=>!f.value&&!v.value),x=U(),{mutateAsync:q,isPending:b}=Q({mutationFn:O}),L=o(()=>b.value),$=o(()=>b.value?"Signing In...":"Continue");function k(){a.value&&(a.value="")}const g=z();async function F(){var y,e,d;if(a.value="",l.email=!0,l.password=!0,!C.value){a.value="Please fill all fields correctly.";return}try{const t=await q({u_email:i.value,u_password:u.value});localStorage.setItem("token",(y=t==null?void 0:t.data)==null?void 0:y.token),g.invalidateQueries({queryKey:["me"]}),g.invalidateQueries({queryKey:["workspaces"]}),g.invalidateQueries({queryKey:["profile"]}),w.pricing?x.push("/dashboard?stripePayment=true"):w.workspace?x.push("/create-workspace"):x.push("/dashboard")}catch(t){a.value=((d=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:d.message)||"Login failed. Please try again."}}return(y,e)=>{const d=R("router-link");return E(),A(j,null,{form:p(()=>[s("div",W,[e[0]||(n(-1,!0),(e[0]=s("h2",{class:"text-[32px] font-medium mb-12 text-center text-text-primary"},[e[7]||(e[7]=r(" Sign in to Orchit AI "))])).cacheIndex=0,n(1),e[0]),s("form",{onSubmit:D(F,["prevent"]),class:"space-y-4 w-full"},[m(V,{modelValue:i.value,"onUpdate:modelValue":[e[1]||(e[1]=t=>i.value=t),k],label:"Email",placeholder:"Email address",size:"lg",error:I.value,message:f.value,onBlur:e[2]||(e[2]=t=>l.email=!0)},null,8,["modelValue","error","message"]),m(V,{modelValue:u.value,"onUpdate:modelValue":[e[3]||(e[3]=t=>u.value=t),k],label:"Password",placeholder:"Enter your password",size:"lg",type:"password",error:S.value,message:v.value,onBlur:e[4]||(e[4]=t=>l.password=!0)},null,8,["modelValue","error","message"]),m(H,{disabled:L.value,size:"lg",block:!0,type:"submit"},{default:p(()=>[r(B($.value),1)]),_:1},8,["disabled"]),a.value?(E(),K("p",G,B(a.value),1)):T("",!0),s("div",J,[m(d,{to:"/forgot-password",class:"text-sm text-accent hover:underline"},{default:p(()=>e[8]||(e[8]=[r(" Forgot password? ")])),_:1,__:[8]})])],32),e[5]||(n(-1,!0),(e[5]=s("p",{class:"text-sm font-medium text-text-secondary text-center mt-6"},[e[9]||(e[9]=r(" By signing in, you agree to the ")),e[10]||(e[10]=s("span",{class:"text-text-primary font-bold"},"Privacy Policy",-1)),e[11]||(e[11]=r(" and ")),e[12]||(e[12]=s("span",{class:"text-text-primary font-bold"},"Terms of Service",-1)),e[13]||(e[13]=r(". "))])).cacheIndex=5,n(1),e[5]),e[6]||(n(-1,!0),(e[6]=s("p",{class:"text-sm font-medium text-text-secondary text-center mt-8"},[e[15]||(e[15]=r(" Donâ€™t have an account? ")),m(d,{to:"/register",class:"text-text-primary font-bold underline"},{default:p(()=>e[14]||(e[14]=[r("Sign up")])),_:1,__:[14]})])).cacheIndex=6,n(1),e[6])])]),_:1})}}});export{re as default};
