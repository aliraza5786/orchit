import{d as L,W as Y,N as F,M as H,r as n,n as X,ae as Z,a9 as ee,c as te,cW as ae,e as k,w as v,Y as se,o as d,f as s,t as I,j as V,k as P,i as c,_ as B,g as M,p as w,B as q,z as le,D as ie,P as oe,ao as Q,J as ne}from"./index-DjjQuEnm.js";import{I as re}from"./IconPicker-8hAEE0Qr.js";import{_ as ue}from"./AudioRecorder.vue_vue_type_script_setup_true_lang-pLfgDPZg.js";const de={class:"flex justify-between items-start px-6 border-b border-border pb-4"},ce={class:"text-xl font-semibold"},ve={class:"px-6 py-6 space-y-6"},me={key:0,class:"space-y-4"},pe={class:"flex justify-end gap-2 pt-2"},fe={key:1,class:"space-y-6"},he={class:"relative w-full"},ge={class:"absolute bottom-4 right-4"},xe={class:"px-6 mt-5"},ye=L({__name:"CreateSheetModal",props:{modelValue:{type:Boolean},sheet:{}},emits:["update:modelValue"],setup(R,{emit:z}){var C,U,A;const l=R,{canCreateSheet:S,canEditSheet:K}=Y(),j=z,r=F(),{workspaceId:g,moduleId:x}=H(),t=n({title:(C=l==null?void 0:l.sheet)==null?void 0:C.title,description:(U=l==null?void 0:l.sheet)==null?void 0:U.description,icon:(A=l==null?void 0:l.sheet)==null?void 0:A.icon}),u=n({});X(l,()=>{t.value=l.sheet});function D(){const i={};return t.value.title.trim()||(i.title="Please enter a sheet name."),t.value.description.trim()||(i.description="Please enter a description."),u.value=i,Object.keys(i).length===0}const{mutate:N,isPending:W}=Z({onSuccess:()=>{r.invalidateQueries({queryKey:["sheets"]}),r.invalidateQueries({queryKey:["sheet-list"]}),m()}}),{mutate:$,isPending:T}=ee({onSuccess:()=>{r.invalidateQueries({queryKey:["sheets"]}),r.invalidateQueries({queryKey:["sheet-list"]}),m()}});function E(){var i;if(D())if((i=l.sheet)!=null&&i._id){if(!K.value)return;$({sheet_id:l.sheet._id,icon:t.value.icon,variables:{"sheet-title":t.value.title,"sheet-description":t.value.description},is_ai_generated:!1,workspace_id:g.value,workspace_module_id:x.value})}else{if(!S.value)return;N({icon:t.value.icon,variables:{"sheet-title":t.value.title,"sheet-description":t.value.description},is_ai_generated:!1,workspace_id:g.value,workspace_module_id:x.value})}}function m(){t.value={title:"",description:"",icon:null},u.value={},y.value=!1,f.value="ai"}const y=te({get:()=>l.modelValue,set:i=>j("update:modelValue",i)}),_=n(!1),b=n(null),o=n(""),p=n(!1),{mutate:O,isPending:G}=ae({onSuccess:()=>{r.invalidateQueries({queryKey:["sheets"]}),r.invalidateQueries({queryKey:["sheet-list"]}),m(),p.value=!1},onError:()=>{p.value=!1}});function J(){o.value.trim()&&S.value&&(p.value=!0,O({module_id:x.value,idea:o.value,workspace_id:g.value}))}const f=n("ai");return(i,e)=>(d(),k(se,{modelValue:y.value,"onUpdate:modelValue":e[9]||(e[9]=h=>y.value=h),size:"lg"},{default:v(()=>{var h;return[s("div",de,[s("h2",ce,I((h=i.sheet)!=null&&h._id?"Update Sheet":"Add a new Sheet"),1)]),s("div",ve,[f.value==="manual"?(d(),V("section",me,[c(re,{modelValue:t.value.icon,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.icon=a)},null,8,["modelValue"]),c(B,{modelValue:t.value.title,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.title=a),label:"Sheet name",size:"lg",placeholder:"Design Ideas",error:!!u.value.title,message:u.value.title},null,8,["modelValue","error","message"]),c(B,{modelValue:t.value.description,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.description=a),label:"Description",size:"lg",textarea:"",placeholder:"A short description",error:!!u.value.description,message:u.value.description},null,8,["modelValue","error","message"]),s("div",pe,[s("button",{class:"px-4 py-2 rounded-md text-sm text-text-secondary border",onClick:m},"Cancel"),c(q,{class:"px-4",onClick:E},{default:v(()=>[M(I(w(W)||w(T)?"Saving...":"Save"),1)]),_:1})])])):f.value==="ai"?(d(),V("section",fe,[s("div",he,[s("div",{class:le(`${w(G)||p.value?"neon-flow-border":""} bg-bg-input flex h-[200px] p-4 rounded-2xl relative`)},[!_.value&&!b.value?ie((d(),V("textarea",{key:0,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value=a),placeholder:"Ask Orchit AI to create a sheet...",class:"w-full h-full resize-none outline-none bg-transparent text-sm"},null,512)),[[oe,o.value]]):P("",!0),o.value?(d(),k(Q,{key:2,name:"rotate-fade",appear:""},{default:v(()=>[s("div",{onClick:e[7]||(e[7]=a=>J()),class:"absolute bottom-4 right-4 w-9 h-9 bg-accent rounded-md flex items-center justify-center cursor-pointer shadow"},e[10]||(e[10]=[s("i",{class:"text-white fa-solid fa-arrow-right"},null,-1)]))]),_:1})):(d(),k(Q,{key:1,name:"fade-slide",appear:""},{default:v(()=>[s("div",ge,[c(ue,{modelValue:o.value,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value=a),isRecording:_.value,"onUpdate:isRecording":e[5]||(e[5]=a=>_.value=a),hasAudio:b.value,"onUpdate:hasAudio":e[6]||(e[6]=a=>b.value=a)},null,8,["modelValue","isRecording","hasAudio"])])]),_:1}))],2)]),e[12]||(e[12]=s("div",{class:"flex w-full px-6 text-sm text-text-secondary items-center gap-4 mt-6"},[s("hr",{class:"flex-auto text-border"}),s("span",null,"OR"),s("hr",{class:"flex-auto text-border"})],-1)),s("div",xe,[c(q,{variant:"secondary",color:"dark",block:!0,onClick:e[8]||(e[8]=a=>f.value="manual")},{default:v(()=>e[11]||(e[11]=[M(" Create Manually ")])),_:1,__:[11]})])])):P("",!0)])]}),_:1},8,["modelValue"]))}}),Ve=ne(ye,[["__scopeId","data-v-7420d346"]]);export{Ve as default};
