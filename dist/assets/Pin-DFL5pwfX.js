const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ConfirmDeleteModal-hUSRVApa.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-ayEUY4OT.js","assets/index-Bau3eFG3.js","assets/index-BMLa60ps.css","assets/CreateVariableModal-6i1pJjBJ.js","assets/KanbanBoard-zzL4KArj.js","assets/vuedraggable.umd-DbtxoQuf.js","assets/_commonjsHelpers-_d1bhYXs.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-BnXG96nX.js","assets/index-sNcY8Umf.js","assets/KanbanBoard-BPQQrwQ8.css"])))=>i.map(i=>d[i]);
import{d as ce,r as o,C as Ae,D as qe,m as V,o as k,g as l,h as v,t as G,ap as ze,w as U,n as Y,ai as te,l as x,G as le,E as he,N as Ye,W as Se,c as R,x as Q,S as Le,ab as Je,ar as Xe,ah as $e,F as Be,y as de,f as ae,J as ue,s as xe,k as Z,Z as ye,i as m,Q as et,u as tt,a0 as at,a2 as lt,as as st,a6 as ot,a7 as it,a8 as nt,a9 as rt,at as dt,_ as ut,B as we,ae as ne,A as ct,H as re}from"./index-Bau3eFG3.js";import pt from"./Dropdown-B823XLSz.js";import{_ as mt}from"./DropMenu.vue_vue_type_script_setup_true_lang-BnXG96nX.js";import{_ as vt}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-ayEUY4OT.js";import ft from"./KanbanSkeleton-ChpisjV4.js";import{_ as gt}from"./CreateTaskModal.vue_vue_type_script_setup_true_lang-4b_mPd1E.js";import bt from"./SidePanel-B8c6BGOh.js";import kt from"./CreateSheetModal-DMXPhMBM.js";import{F as Ct}from"./fuse-Ch1WBRTM.js";import{l as xt}from"./lodash-CQYOKM_D.js";import{_ as yt}from"./SearchBar.vue_vue_type_script_setup_true_lang-8PLdgqQ0.js";import"./index-sNcY8Umf.js";import"./sidePanelStore-BqzaOVcm.js";import"./IconPicker-DJt22hgw.js";import"./AudioRecorder.vue_vue_type_script_setup_true_lang-Bx9sIAn5.js";import"./_commonjsHelpers-_d1bhYXs.js";const wt="data:image/png;base64,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",At=["aria-expanded","disabled"],ht={class:"truncate"},St=["onKeydown"],Lt=["aria-checked","onClick","onKeydown"],Bt={class:"rounded-full hover:bg-bg-dropdown-menu-hover px-1 text-text-primary"},It=ce({__name:"TypeChanger",props:{default:{},disabled:{type:Boolean,default:!1},cardId:{},data:{},placeholder:{}},emits:["onselect"],setup(J,{emit:H}){const M=J,K=o(M.default),i=o(!1),P=o(null),W=o(null);function E(r){if(M.data)return M.data.find(c=>c===r)}function D(){M.disabled||(i.value=!i.value)}function y(){i.value=!1}function _(r){K.value=r,L("onselect",r),y()}function h(r){var b;const c=(b=W.value)==null?void 0:b.querySelectorAll('button[role="menuitemradio"]');if(!(c!=null&&c.length))return;const g=c.length-1,B=Math.max(0,Math.min(r,g));c[B].focus()}function u(r){P.value&&(P.value.contains(r.target)||y())}Ae(()=>document.addEventListener("click",u)),qe(()=>document.removeEventListener("click",u));const L=H;return(r,c)=>(k(),V("div",{ref_key:"root",ref:P,class:"relative inline-block text-left"},[l("button",{type:"button",class:"inline-flex !text-text-primary max-w-50 line-clamp-1 text-[10px] items-center gap-2 rounded-full px-3 py-1 focus:outline-none hover:opacity-90 bg-bg-body cursor-pointer","aria-expanded":i.value?"true":"false",onClick:D,disabled:r.disabled},[l("span",ht,G(E(K.value)??r.placeholder),1)],8,At),v(ze,{name:"fade"},{default:U(()=>[i.value?(k(),V("div",{key:0,role:"menu",class:"absolute z-50 mt-2 max-w-20 origin-top-left rounded-md border border-border shadow-2xl bg-bg-dropdown p-2 left-0",onKeydown:te(x(y,["prevent","stop"]),["esc"])},[l("ul",{class:"space-y-2 max-h-50 overflow-y-auto",ref_key:"list",ref:W},[(k(!0),V(le,null,he(r.data,(g,B)=>(k(),V("li",{key:B},[l("button",{role:"menuitemradio","aria-checked":K.value===g?"true":"false",class:"flex !text-text-primary w-full items-center justify-between cursor-pointer rounded px-1 py-1 text-[10px] gap-1 focus:outline-none focus:ring-2 hover:bg-bg-dropdown-menu-hover",onClick:b=>_(g),onKeydown:[te(x(b=>h(B+1),["prevent"]),["down"]),te(x(b=>h(B-1),["prevent"]),["up"])]},[l("span",Bt,G(g),1)],40,Lt)]))),128))],512)],40,St)):Y("",!0)]),_:1})],512))}}),Vt=Ye(It,[["__scopeId","data-v-319c18d3"]]),Et={class:"flex justify-between gap-2 items-center"},Dt={class:"flex gap-2 py-2 flex-wrap"},_t={class:"flex items-start justify-between mb-2"},Ft={class:"text-sm font-medium text-card-foreground leading-tight"},Rt={class:"flex justify-end pt-2 items-center text-xs gap-4 text-text-secondary"},Mt={class:"flex justify-center items-center text-xs gap-1 text-text-secondary"},Pt={class:"flex justify-center items-center text-xs gap-1 text-text-secondary"},Wt=ce({__name:"KanbanCard",props:{ticket:{}},emits:["click"],setup(J,{emit:H}){const{canViewCard:M,canDeleteCard:K}=Se(),i=J,P={critical:"border-l-priority-critical",high:"border-l-priority-high",medium:"border-l-priority-medium",low:"border-l-priority-low"},W=R(()=>P[i.ticket.priority]??"border-l-gray-300"),E=o(!1),D=o(i.ticket["end-date"]??null);Q(()=>{var s;return(s=i.ticket)==null?void 0:s.end_date},s=>{D.value=s??null});const y=R(()=>i.ticket["start-date"]),_=R(()=>i.ticket["end-date"]),h=o(i.ticket["start-date"]??null);Q(y,()=>h.value=y.value),Q(_,()=>D.value=_.value);const u=Le(),L=Je({onSuccess:()=>{u.invalidateQueries({queryKey:["people-lists"]}),u.invalidateQueries({queryKey:["get-sheets"]}),u.invalidateQueries({queryKey:["sheet-list"]}),u.invalidateQueries({queryKey:["roles"]})}}),{mutate:r,isPending:c}=Xe(i.ticket._id,{onSuccess:()=>{u.invalidateQueries({queryKey:["sheet-list"]}),E.value=!1}}),g=s=>{L.mutate({card_id:i.ticket._id,variables:s})};function B(){return[M.value?{label:"View Card",action:()=>oe("click",i.ticket),icon:{prefix:"fa-regular",iconName:"fa-eye"}}:null,K.value?{label:"Delete",danger:!0,action:()=>{E.value=!0},icon:{prefix:"fa-regular",iconName:"fa-trash"}}:null].filter(Boolean)}const b=()=>{r({})},F=s=>{L.mutate({card_id:i.ticket._id,variables:{"start-date":s}})},se=s=>{L.mutate({card_id:i.ticket._id,variables:{"end-date":s}})},oe=H;return(s,a)=>{var w,X,q,A,I;return k(),V(le,null,[l("div",{onClick:a[5]||(a[5]=d=>s.$emit("click")),class:Be(["bg-bg-card rounded-lg p-4 pt-0 shadow-sm cursor-grab border-t-4 hover:shadow-md transition-all duration-200 active:cursor-grabbing",W.value]),style:$e({borderColor:(X=(w=s.ticket)==null?void 0:w.lane)==null?void 0:X.variables["lane-color"]})},[l("div",Et,[l("div",Dt,[(k(!0),V(le,null,he(s.ticket.variables,(d,ie)=>{var N;return de((k(),ae(Vt,{key:ie,onClick:a[0]||(a[0]=x(()=>{},["stop"])),default:d==null?void 0:d.value,data:d==null?void 0:d.data,cardId:(N=s.ticket)==null?void 0:N._id,onOnselect:a[1]||(a[1]=$=>g($))},null,8,["default","data","cardId"])),[[ue,(d==null?void 0:d.type)==="Select"&&(d==null?void 0:d.visible_on_card)]])}),128))]),v(mt,{onClick:a[2]||(a[2]=x(()=>{},["stop"])),items:B()},{trigger:U(()=>a[12]||(a[12]=[l("i",{class:"cursor-pointer fa-solid fa-ellipsis"},null,-1)])),_:1},8,["items"])]),l("div",_t,[l("h3",Ft,G(s.ticket["card-title"]),1)]),a[3]||(xe(-1,!0),(a[3]=l("p",{innerHTML:s.ticket["card-description"],class:"text-xs text-muted-foreground mb-3 text-text-secondary line-clamp-2"},null,8,["innerHTML"])).cacheIndex=3,xe(1),a[3]),l("div",Rt,[l("div",Mt,[a[13]||(a[13]=l("i",{class:"fa-regular fa-message"},null,-1)),Z(" "+G((q=s.ticket)==null?void 0:q.comments_count),1)]),l("div",Pt,[a[14]||(a[14]=l("i",{class:"fa-regular fa-file"},null,-1)),Z(" "+G((I=(A=s.ticket)==null?void 0:A.attachments)==null?void 0:I.length),1)])]),l("div",{onClick:a[4]||(a[4]=x(()=>{},["stop"])),class:"flex gap-2 text-xs text-text-secondary mt-2"},[v(ye,{placeholder:"set start date","model-value":h.value,theme:"dark","emit-as":"ymd","onUpdate:modelValue":F},null,8,["model-value"]),a[15]||(a[15]=Z(" - ")),v(ye,{placeholder:"set end date","model-value":D.value,theme:"dark","emit-as":"ymd","onUpdate:modelValue":se},null,8,["model-value"])])],6),l("div",{class:"no-drag-zone",draggable:"false",onMousedown:a[9]||(a[9]=x(()=>{},["stop"])),onTouchstart:a[10]||(a[10]=x(()=>{},["stop"])),onPointerdown:a[11]||(a[11]=x(()=>{},["stop"]))},[v(vt,{onClick:a[6]||(a[6]=x(()=>{},["stop"])),modelValue:E.value,"onUpdate:modelValue":a[7]||(a[7]=d=>E.value=d),title:"Delete Ticket",itemLabel:"Ticket",itemName:s.ticket.title,requireMatchText:s.ticket.title,confirmText:"Delete Ticket",cancelText:"Cancel",size:"md",loading:m(c),onConfirm:b,onCancel:a[8]||(a[8]=()=>{E.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"])],32)],64)}}}),Tt={class:"flex-auto flex-grow h-full bg-bg-card rounded-[6px] border border-border overflow-x-auto flex-col flex"},jt={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1"},Kt={class:"flex overflow-x-auto gap-3 p-4"},Ot={class:"flex flex-col items-center justify-center gap-2 py-10"},Ut={key:0,class:"bg-bg-body rounded-lg p-4"},Qt={class:"flex items-center mt-3 gap-3"},Ht=["disabled"],na=ce({__name:"Pin",setup(J){var be,ke;const H=ne(()=>re(()=>import("./ConfirmDeleteModal-hUSRVApa.js"),__vite__mapDeps([0,1,2,3]))),M=ne(()=>re(()=>import("./CreateVariableModal-6i1pJjBJ.js"),__vite__mapDeps([4,2,3]))),K=ne(()=>re(()=>import("./KanbanBoard-zzL4KArj.js"),__vite__mapDeps([5,6,7,2,3,8,9,10]))),{canEditSheet:i,canDeleteSheet:P,canCreateVariable:W,canCreateSheet:E}=Se(),D=o(!1),y=o(!1),_=o(!1),h=o(!1),u=o(),L=o(!1),r=o(""),c=o(),g=o([]),B=ct(),{workspaceId:b,moduleId:F}=et(),se=tt(),oe=Le(),{data:s,refetch:a}=at({workspace_id:b,workspace_module_id:F},{onSuccess:()=>ie()}),w=o(((ke=(be=s.value)==null?void 0:be[0])==null?void 0:ke._id)??null),{data:X}=lt(b,F,w),q=R(()=>{var e,t;return((t=(e=X.value)==null?void 0:e[0])==null?void 0:t._id)??""}),A=o(q.value);Q(q,e=>A.value=e),Q(s,e=>{e!=null&&e.length&&(w.value=e[0]._id)});const{data:I,isPending:d,refetch:ie}=st(F,w,R(()=>[...se.selectedLaneIds]),A);Q(I,e=>{g.value=Array.isArray(e)?JSON.parse(JSON.stringify(e)):[]}),Ae(()=>{g.value=Array.isArray(I.value)?JSON.parse(JSON.stringify(I.value)):[]});const{mutate:N,isPending:$}=ot({onSuccess:(e,t)=>{t.is_trash?(g.value=g.value.filter(p=>p.title!==t.value),h.value=!1):g.value=[...g.value,{title:e==null?void 0:e.value}],L.value=!1,r.value="",oe.invalidateQueries({queryKey:["sheet-list"]}),Object.assign({newColumn:"",showDelete:!1,activeAddList:!1})}});function pe(e){N({workspace_id:b.value,module_id:F.value,variable_id:A.value,value:e})}const Ie=R(()=>{const e={};return i.value&&(e["onEdit-option"]=Qe),P.value&&(e["onDelete-option"]=Oe),e});function me(){const e=r.value.trim();e&&pe(e)}function Ve({title:e,oldTitle:t}){N({workspace_id:B.params.id,module_id:B.params.module_id,new_value:e,value:t,variable_id:A.value})}function Ee(){N({value:u.value.title,workspace_id:b.value,module_id:F.value,newValue:u.value.title,variable_id:A.value,is_trash:!0})}function De(e){h.value=!0,u.value=e}const _e=it(),Fe=nt();function Re(e){const{type:t,meta:p}=e;t==="column"?_e.mutate({payload:{workspace_id:b.value,workspace_module_id:F.value,variable_id:A.value,moved_value:p.id,new_index:p.newIndex}}):Fe.mutate({payload:{workspace_id:b.value,card_id:p.moved._id,group_value:p.fromColumnId,group_variable_id:A.value,new_index:p.newIndex,sheet_id:w.value}})}function Me(e){}function ve(e){c.value=e}function Pe(e){c.value=e}function fe(e){_.value=!0,u.value=e}function We(){O.value={},y.value=!y.value}function ge(){L.value=!L.value}const Te=R(()=>(s.value||[]).map(e=>({_id:e._id,title:e.variables["sheet-title"],description:e.variables["sheet-description"],icon:e.icon}))),z=o(!1),O=o(),{mutate:je,isPending:Ke}=rt({onSuccess:()=>{console.log(">>. clicong"),z.value=!1,a()}});function Oe(e){z.value=!0,O.value=e}function Ue(){var e;je({sheet_id:(e=O.value)==null?void 0:e._id,workspace_module_id:F.value,is_trash:!0})}function Qe(e){y.value=!0,O.value=e}const ee=o(""),He=o("");Q(ee,xt.debounce(e=>{He.value=e},200));const Ne=R(()=>{var p,T,j;const e=Array.isArray((j=(T=(p=I.value)==null?void 0:p.pages)==null?void 0:T[0])==null?void 0:j.data)?I.value.pages[0].data:[];console.log("lists data",e);const t=e.flatMap(C=>(C.cards||[]).map(f=>({...f,columnId:C.title,"card-title":f["card-title"]||"","card-description":f["card-description"]||""})));return new Ct(t,{keys:["card-title","card-description"],threshold:.3})}),Ge=R(()=>{var p,T,j;const e=Array.isArray((j=(T=(p=I.value)==null?void 0:p.pages)==null?void 0:T[0])==null?void 0:j.data)?I.value.pages[0].data:[];if(!ee.value)return e.map(C=>({...C,cards:(C.cards||[]).map(f=>({_id:f._id,"card-title":f["card-title"],"card-description":f["card-description"],created_at:f.created_at,"card-code":f["card-code"],variables:f.variables||{}}))}));const t=Ne.value.search(ee.value).map(C=>C.item);return e.map(C=>{const f=t.filter(S=>S.columnId===C.title).map(S=>({_id:S._id,"card-title":S["card-title"],"card-description":S["card-description"],created_at:S.created_at,"card-code":S["card-code"],variables:S.variables||{}}));return{...C,cards:f}})});return(e,t)=>{var p,T,j,C,f,S,Ce;return k(),V(le,null,[l("div",Tt,[l("div",jt,[v(pt,dt({modelValue:w.value,"onUpdate:modelValue":t[0]||(t[0]=n=>w.value=n),options:Te.value,variant:"secondary"},Ie.value,{canEdit:m(i),canDelete:m(P)}),{more:U(()=>[m(E)?(k(),V("div",{key:0,onClick:We,class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},t[13]||(t[13]=[l("i",{class:"fa-solid fa-plus"},null,-1),Z(" Add new ")]))):Y("",!0)]),_:1},16,["modelValue","options","canEdit","canDelete"]),v(yt,{class:"max-w-[250px]",onOnChange:t[1]||(t[1]=n=>{ee.value=n}),placeholder:"Search in Orchit AI space"})]),de(v(ft,null,null,512),[[ue,m(d)]]),de(l("div",Kt,[v(m(K),{onOnPlus:fe,"onDelete:column":De,"onUpdate:column":Ve,onReorder:Re,onAddColumn:pe,"onSelect:ticket":ve,onOnBoardUpdate:Me,board:Ge.value,variable_id:A.value,sheet_id:w.value},{ticket:U(({ticket:n})=>[v(Wt,{onClick:Ze=>Pe(n),ticket:n},null,8,["onClick","ticket"])]),emptyState:U(({column:n})=>[l("div",Ot,[t[15]||(t[15]=l("img",{src:wt,alt:""},null,-1)),t[16]||(t[16]=l("h1",{class:"text-sm text-text-primary mt-2"},"Start creating your pins",-1)),t[17]||(t[17]=l("p",{class:"text-sm text-text-secondary mb-2 text-center"}," Create pins and add your ideas into the related pins. ",-1)),v(we,{disabled:!m(W),size:"sm",onClick:Ze=>fe(n)},{default:U(()=>t[14]||(t[14]=[Z("Create Pin")])),_:2,__:[14]},1032,["disabled","onClick"])])]),_:1},8,["board","variable_id","sheet_id"]),l("div",{class:"min-w-[328px]",onClick:t[3]||(t[3]=x(()=>{},["stop"]))},[L.value?(k(),V("div",Ut,[v(ut,{autofocus:!0,modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=n=>r.value=n),placeholder:"Add New list",onKeyup:te(me,["enter"])},null,8,["modelValue"]),t[18]||(t[18]=l("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),l("div",Qt,[v(we,{onClick:me,variant:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:U(()=>[Z(G(m($)?"Adding...":"Add list"),1)]),_:1}),l("i",{class:"fa-solid fa-close",onClick:ge})])])):(k(),V("button",{key:1,class:Be(["text-sm text-text-primary py-2.5 font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",m(W)?"cursor-pointer":"cursor-not-allowed"]),onClick:x(ge,["stop"]),disabled:!m(W)}," + Add List ",10,Ht))])],512),[[ue,!m(d)]]),v(m(H),{modelValue:h.value,"onUpdate:modelValue":t[4]||(t[4]=n=>h.value=n),title:"Delete List",itemLabel:"list",itemName:(p=u.value)==null?void 0:p.title,requireMatchText:(T=u.value)==null?void 0:T.title,confirmText:"Delete List",cancelText:"Cancel",size:"md",loading:m($),onConfirm:Ee,onCancel:t[5]||(t[5]=()=>h.value=!1)},null,8,["modelValue","itemName","requireMatchText","loading"]),_.value?(k(),ae(gt,{size:"md",pin:!0,selectedVariable:A.value,listId:(j=u.value)==null?void 0:j.title,sheet_id:w.value,key:"createTaskModalKey",modelValue:_.value,"onUpdate:modelValue":t[6]||(t[6]=n=>_.value=n)},null,8,["selectedVariable","listId","sheet_id","modelValue"])):Y("",!0),v(kt,{sheet:O.value,size:"md",modelValue:y.value,"onUpdate:modelValue":t[7]||(t[7]=n=>y.value=n)},null,8,["sheet","modelValue"]),D.value?(k(),ae(m(M),{key:1,modelValue:D.value,"onUpdate:modelValue":t[8]||(t[8]=n=>D.value=n),sheetID:w.value},null,8,["modelValue","sheetID"])):Y("",!0),v(m(H),{onClick:t[9]||(t[9]=x(()=>{},["stop"])),modelValue:z.value,"onUpdate:modelValue":t[10]||(t[10]=n=>z.value=n),title:"Delete Sheet",itemLabel:"Sheet",itemName:(C=O.value)==null?void 0:C.title,requireMatchText:(f=O.value)==null?void 0:f.title,confirmText:"Delete Sheet",cancelText:"Cancel",size:"md",loading:m(Ke),onConfirm:Ue,onCancel:t[11]||(t[11]=()=>{z.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"])]),(S=c.value)!=null&&S._id?(k(),ae(bt,{key:0,pin:!0,details:c.value,showPanel:!!((Ce=c.value)!=null&&Ce._id),onClose:t[12]||(t[12]=()=>ve({variables:{}}))},null,8,["details","showPanel"])):Y("",!0)],64)}}});export{na as default};
