import{d as Y,N as ue,c as Q,r as a,p as H,O as J,l as ce,P as T,h as m,F as M,a as de,i as F,b as t,m as l,g as d,R,w as b,J as fe,v as pe,x as G,t as w,L as x,f as y,T as X,e as me,k as ge,o as c,Q as ve,_ as be,j as xe}from"./index-rFytiIBb.js";import{l as ye,d as he}from"./dark-logo-Mcb_sJlF.js";import{u as we}from"./useTheme-BrkTxAax.js";import{L as ke}from"./Loader-D4U6zqUE.js";import{u as _e}from"./workspace-C0mwNU9d.js";import"./favicon-BAFXWHLW.js";const Re={class:"sticky top-0 z-10 w-full border-b border-border bg-bg-body/80 backdrop-blur supports-[backdrop-filter]:bg-bg-body/60",role:"navigation","aria-label":"Primary"},Ce={class:"mx-auto flex max-w-[1400px] items-center justify-between px-6"},Le={key:0,src:ye,alt:"Orchit AI logo",class:"w-30",loading:"eager",decoding:"async"},Te={key:1,src:he,alt:"Orchit AI logo",class:"w-30",loading:"eager",decoding:"async"},Fe=["onClick","onMouseenter"],Me={class:"flex items-center gap-4"},Ae=["aria-expanded","aria-controls","onKeydown"],ze=["onKeydown"],$e={class:"flex items-center gap-3 rounded-xl p-3"},Be={class:"grid h-11 w-11 place-items-center rounded-full bg-orange-500 text-base font-bold text-text-primary"},Ee={class:"min-w-0"},Ne={class:"truncate font-semibold leading-5"},Ie={class:"truncate text-xs text-text-secondary"},Ke={class:"p-1"},Pe=["aria-expanded"],Se=Y({__name:"Navbar",setup(Z){const A=_e(),{theme:z,setTheme:h}=we(),k=ge(),{data:ee,isPending:te}=ue({queryKey:["profile"],queryFn:ve,staleTime:1e3*60*5}),C=Q(()=>{var n;return((n=ee.value)==null?void 0:n.data)??null}),$=Q(()=>{var o,s;const n=((s=(o=C.value)==null?void 0:o.u_full_name)==null?void 0:s.trim())||"";return n?n.split(/\s+/).slice(0,3).map(r=>r[0]).join("").toUpperCase():"U"}),i=a(!1),u=a(!1),B=a(null),E=a(null),ne=a(null),N=a(!1);function L(){i.value=!i.value,i.value||(u.value=!1)}function f(){i.value=!1,u.value=!1}function I(){const n=E.value;if(!n)return;const e=n.getBoundingClientRect(),o=200,s=window.innerWidth-e.right;N.value=s<o}function K(){u.value||(u.value=!0,T(()=>I()))}function P(){u.value=!1}let g=null;function S(){!i.value||!u.value||(g&&cancelAnimationFrame(g),g=requestAnimationFrame(()=>{I(),g=null}))}function O(n){const e=B.value;e&&(e.contains(n.target)||f())}H(()=>{document.addEventListener("click",O),window.addEventListener("resize",S)}),J(()=>{document.removeEventListener("click",O),window.removeEventListener("resize",S),g&&cancelAnimationFrame(g)});async function oe(){try{f(),A.setWorkspace(null),localStorage.clear(),k.push("/login")}catch(n){console.error("Logout failed",n)}}function se(){f(),k.push("/switch-account")}const re=[{label:"Workspaces",to:"/",exact:!0},{label:"My Task",to:"/task"},{label:"Users",to:"/users"}],W=a(null),p=new Map,q=a(0),j=a(0);function ae(n,e){if(!e)return p.delete(n);p.set(n,e)}function U(n){const e=W.value;if(!e||!n)return;const o=e.getBoundingClientRect(),s=n.getBoundingClientRect();q.value=s.left-o.left,j.value=s.width}function _(){const n=k.currentRoute.value.path;let e;if(p.has(n))e=p.get(n);else{for(const[o,s]of p.entries())if(n.startsWith(o)&&o!=="/"){e=s;break}e||(e=p.get("/"))}U(e||null)}function le(n){const e=p.get(n)||null;U(e)}ce(()=>k.currentRoute.value.path,async()=>{await T(),_()});let v=null;function V(){v&&cancelAnimationFrame(v),v=requestAnimationFrame(()=>{_(),v=null})}return H(()=>{window.addEventListener("resize",V),T(_)}),J(()=>{window.removeEventListener("resize",V),v&&cancelAnimationFrame(v)}),(n,e)=>(c(),m(M,null,[l(te)?(c(),de(ke,{key:0})):F("",!0),t("nav",Re,[t("div",Ce,[d(l(R),{to:"/",class:"flex items-center gap-2"},{default:b(()=>[l(z)==="light"?(c(),m("img",Le)):(c(),m("img",Te))]),_:1}),t("ul",{class:"relative hidden items-stretch py-4 gap-9 text-sm font-medium text-text-primary md:flex",ref_key:"linksContainerRef",ref:W},[t("div",{class:"pointer-events-none absolute bottom-0 h-[2px] rounded-full bg-text-primary transition-all duration-300 ease-out",style:fe({left:q.value+"px",width:j.value+"px"})},null,4),(c(),m(M,null,pe(re,o=>d(l(R),{key:o.to,to:o.to,custom:""},{default:b(({navigate:s,isActive:r,isExactActive:ie})=>[t("li",{ref_for:!0,ref:D=>ae(o.to,D),onClick:s,class:G(["relative cursor-pointer py-3 transition-colors",[r||o.exact&&ie?"text-text-primary":"text-text-secondary hover:text-text-primary"]]),onMouseenter:()=>le(o.to),onMouseleave:e[0]||(e[0]=D=>_())},w(o.label),43,Fe)]),_:2},1032,["to"])),64))],512),t("div",Me,[e[14]||(e[14]=t("button",{class:"grid h-9 w-9 place-items-center rounded-xl border border-transparent text-text-secondary transition-[transform,background,box-shadow] hover:scale-105 hover:bg-bg-dropdown-menu-hover hover:text-text-primary focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-300","aria-label":"Notifications",type:"button"},[t("i",{class:"fa-regular fa-bell"})],-1)),e[15]||(e[15]=t("button",{class:"grid h-9 w-9 place-items-center rounded-xl border border-transparent text-text-secondary transition-[transform,background,box-shadow] hover:scale-105 hover:bg-bg-dropdown-menu-hover hover:text-text-primary focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-300","aria-label":"Help",type:"button"},[t("i",{class:"fa-regular fa-circle-question"})],-1)),t("div",{class:"relative",ref_key:"menuRef",ref:B},[t("button",{class:"h-9 w-9 overflow-hidden rounded-full bg-orange-500 text-sm font-bold text-text-primary ring-offset-2 transition hover:brightness-95 focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-300","aria-haspopup":"menu","aria-expanded":i.value?"true":"false","aria-controls":i.value?"user-menu":void 0,onClick:L,onKeydown:[x(y(L,["prevent"]),["enter"]),x(y(L,["prevent"]),["space"]),x(y(f,["prevent"]),["esc"])],type:"button"},w($.value),41,Ae),d(X,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"opacity-0 -translate-y-1 scale-95","enter-to-class":"opacity-100 translate-y-0 scale-100","leave-active-class":"transition duration-120 ease-in","leave-from-class":"opacity-100 translate-y-0 scale-100","leave-to-class":"opacity-0 -translate-y-1 scale-95"},{default:b(()=>{var o,s;return[i.value?(c(),m("div",{key:0,id:"user-menu",class:"absolute right-0 mt-2 w-80 origin-top-right rounded-2xl bg-bg-dropdown p-1.5 text-sm shadow-xl ring-1 ring-black/5",role:"menu",onKeydown:x(y(f,["stop","prevent"]),["esc"])},[t("div",$e,[t("div",Be,w($.value),1),t("div",Ee,[t("p",Ne,w(((o=C.value)==null?void 0:o.u_full_name)||"—"),1),t("p",Ie,w(((s=C.value)==null?void 0:s.u_email)||"—"),1)])]),e[13]||(e[13]=t("div",{class:"h-px w-full bg-bg-dropdown-menu-hover/50"},null,-1)),t("ul",Ke,[t("li",null,[d(l(R),{to:"/profile",class:"flex items-center gap-3 rounded-lg px-3 py-2 hover:bg-bg-dropdown-menu-hover",role:"menuitem",onClick:f},{default:b(()=>e[8]||(e[8]=[t("i",{class:"fa-regular fa-user"},null,-1),t("span",null,"Profile",-1)])),_:1,__:[8]})]),t("li",null,[d(l(R),{to:"/settings",class:"flex items-center gap-3 rounded-lg px-3 py-2 hover:bg-bg-dropdown-menu-hover",role:"menuitem",onClick:f},{default:b(()=>e[9]||(e[9]=[t("i",{class:"fa-regular fa-gear"},null,-1),t("span",null,"Account settings",-1)])),_:1,__:[9]})]),t("li",{class:"relative",onMouseenter:e[6]||(e[6]=r=>K()),onMouseleave:e[7]||(e[7]=r=>P())},[t("button",{ref_key:"themeTriggerRef",ref:E,class:"flex w-full items-center justify-between rounded-lg px-3 py-2 hover:bg-bg-dropdown-menu-hover",role:"menuitem","aria-haspopup":"menu","aria-expanded":u.value?"true":"false",onKeydown:[e[1]||(e[1]=x(y(r=>K(),["prevent"]),["right"])),e[2]||(e[2]=x(y(r=>P(),["prevent"]),["left"]))],type:"button"},e[10]||(e[10]=[t("span",{class:"flex items-center gap-3"},[t("i",{class:"fa-regular fa-circle"}),me(" Theme ")],-1),t("i",{class:"fa-solid fa-chevron-right"},null,-1)]),40,Pe),d(X,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"opacity-0 translate-x-1 scale-95","enter-to-class":"opacity-100 translate-x-0 scale-100","leave-active-class":"transition duration-120 ease-in","leave-from-class":"opacity-100 translate-x-0 scale-100","leave-to-class":"opacity-0 translate-x-1 scale-95"},{default:b(()=>[u.value?(c(),m("div",{key:0,ref_key:"themeMenuRef",ref:ne,class:G(["absolute top-0 z-10 w-48 origin-top-left rounded-xl bg-bg-dropdown p-1 shadow-lg ring-1 ring-black/5",N.value?"right-full mr-2":"left-full ml-2"]),role:"menu"},[t("button",{class:"block w-full rounded-lg px-3 py-2 text-left hover:bg-bg-dropdown-menu-hover",onClick:e[3]||(e[3]=r=>l(h)("system")),type:"button"}," System "),t("button",{class:"block w-full rounded-lg px-3 py-2 text-left hover:bg-bg-dropdown-menu-hover",onClick:e[4]||(e[4]=r=>l(h)("light")),type:"button"}," Light "),t("button",{class:"block w-full rounded-lg px-3 py-2 text-left hover:bg-bg-dropdown-menu-hover",onClick:e[5]||(e[5]=r=>l(h)("dark")),type:"button"}," Dark ")],2)):F("",!0)]),_:1})],32),t("li",null,[t("button",{class:"flex w-full items-center gap-3 rounded-lg px-3 py-2 hover:bg-bg-dropdown-menu-hover",role:"menuitem",type:"button",onClick:se},e[11]||(e[11]=[t("i",{class:"fa-solid fa-repeat"},null,-1),t("span",null,"Switch account",-1)]))]),t("li",null,[t("button",{class:"flex w-full items-center gap-3 rounded-lg px-3 py-2 hover:bg-bg-dropdown-menu-hover",role:"menuitem",type:"button",onClick:oe},e[12]||(e[12]=[t("i",{class:"fa-solid fa-arrow-right-from-bracket rotate-180"},null,-1),t("span",null,"Log out",-1)]))])])],40,ze)):F("",!0)]}),_:1})],512)])])])],64))}}),Oe=be(Se,[["__scopeId","data-v-75ffa3c3"]]),Qe=Y({__name:"LandingPageLayout",setup(Z){return(A,z)=>{const h=xe("router-view");return c(),m(M,null,[d(Oe),d(h)],64)}}});export{Qe as default};
