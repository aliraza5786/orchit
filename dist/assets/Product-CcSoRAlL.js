const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-DJ628ey2.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-6ubf0DDI.js","assets/index-CpkaSGis.js","assets/index-IuSZbDpJ.css","assets/CreateSheetModal-A7l306Xm.js","assets/IconPicker-BxH3qqWJ.js","assets/IconPicker-CIMr_3tu.css","assets/AudioRecorder.vue_vue_type_script_setup_true_lang-Ba5rHoMC.js","assets/CreateSheetModal--7RYCgy-.css","assets/CreateVariableModal-MOicBXmW.js","assets/ConfirmDeleteModal-B-A9fKVv.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-BTt7LMxC.js","assets/SidePanel-4PICUqlH.js","assets/SidePanel-U7OOMI6M.css","assets/KanbanBoard-BqllhXPP.js","assets/vuedraggable.umd-DQFG5fc4.js","assets/_commonjsHelpers-_d1bhYXs.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-aVkdv0Z5.js","assets/KanbanBoard-Dffh696C.css"])))=>i.map(i=>d[i]);
import{d as ta,W as aa,r as i,M as la,N as oa,n as K,a0 as na,c as T,a2 as sa,a6 as ra,u as ia,ar as da,a7 as ua,a8 as ca,a9 as pa,a1 as va,ac as _,Z as fa,ad as ba,Q as ma,ab as ga,a3 as ya,aa as _a,ae as xa,af as ka,j as g,f as n,i as k,e as I,k as f,w as Q,p as d,z as N,F as se,D as ze,E as Ze,h as re,ah as Xe,_ as et,B as tt,ag as xe,t as ie,y as at,P as ha,q as wa,ai as lt,aj as Ca,o as c,g as ke,ak as H,A as Y,T as Sa,U as ot,bn as Da,al as Va,J as Ta}from"./index-CpkaSGis.js";import{D as nt}from"./Dropdown-DUAIAWk3.js";import{_ as Aa}from"./SearchBar.vue_vue_type_script_setup_true_lang-BSEMRG5-.js";import{K as Ea}from"./KanbanSkeleton-dN_NhtGj.js";import{K as La}from"./KanbanTicket-CpcBeiPQ.js";import{F as st}from"./fuse-Ch1WBRTM.js";import{l as Fa}from"./lodash-CQYOKM_D.js";import{_ as rt,a as Ia,b as Na,C as Ma,c as qa,T as za,k as Pa}from"./TimelineView-SNrhHGAY.js";import"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-BTt7LMxC.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-aVkdv0Z5.js";import"./_commonjsHelpers-_d1bhYXs.js";const $a={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-[6px] shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex-col flex scrollbar-visible"},Ua={class:"overflow-x-auto shrink-0 sticky top-0 z-20 bg-bg-card"},Ba={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1 min-w-max h-full"},Oa={class:"flex gap-3 items-center"},Ra={class:"flex items-center gap-3 bg-bg-surface/50 h-[32px] px-2 rounded-md"},Wa={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible h-full"},ja={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},Ka={key:0,class:"bg-bg-body rounded-lg p-4"},Qa={class:"flex items-center mt-3 gap-3"},Ha=["disabled"],Ya={class:"relative w-full h-full flex overflow-hidden"},Ga={key:0,class:"format-sidebar h-full py-4 px-4 w-[320px] border-l bg-bg-card overflow-x-hidden overflow-y-auto flex flex-col"},Ja={class:"format-content space-y-6"},Za={class:"format-group relative mb-3"},Xa={class:"text-xs text-secondary"},el={key:0,class:"absolute z-50 mt-2 p-3 bg-bg-card rounded-lg shadow-lg border w-[240px]"},tl={class:"grid grid-cols-10 gap-1 mb-3"},al=["onClick"],ll={class:"flex items-center gap-2"},ol=["value"],nl=["value"],sl={class:"format-group relative mb-3"},rl={class:"text-xs text-secondary"},il={key:0,class:"absolute z-50 mt-2 p-3 bg-bg-card rounded-lg shadow-lg border w-[240px]"},dl={class:"grid grid-cols-10 gap-1 mb-3"},ul=["onClick"],cl={class:"flex items-center gap-2"},pl=["value"],vl=["value"],fl={class:"grid grid-cols-1 gap-3"},bl=["value"],ml={class:"mt-6 pt-4"},gl=["disabled"],yl={key:0,class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},_l={key:0,class:"fixed inset-0 bg-black/30 flex items-center justify-center"},xl={class:"bg-white p-6 rounded-xl w-80"},kl={class:"flex justify-end gap-2 mt-4"},hl=["disabled"],wl={class:"flex items-center mt-3 gap-3"},Cl=ta({__name:"Product",setup(Sl){const{canEditSheet:it,canDeleteSheet:dt,canCreateVariable:de,canCreateSheet:ut,canCreateCard:ct,canEditCard:ue,canAssignCard:pt}=aa(),G=i(!1),ce=i(null),pe=i(!1),he=i(null),we=i(!1),v=i("kanban"),Ce=i(null),ve=i(null),J=i(!1),Pe=wa(),{workspaceId:h,moduleId:A}=la(),$=oa(),fe=i(!1),Z=i(),M=i(null),U=i(!0),be=i(!1),q=i(""),Se=i(null);function vt(t){q.value="",be.value=!0,Se.value=t}function ft(){Se.value&&Se.value(q.value),be.value=!1}function bt(){be.value=!1}const mt=i(null),gt=t=>{mt.value=t},B=i(!1),$e=["#FFFFFF","#F2F2F2","#D9D9D9","#BFBFBF","#A6A6A6","#808080","#404040","#000000","#FFE066","#FF9AA2","#8EE4AF","#00EAD3","#90DBF4","#4D96FF","#6C63FF","#C77DFF","#F7A1C4","#FFC300","#FF5733","#2ECC71","#00B894","#17A2B8","#0984E3","#3F51B5","#9C27B0","#E84393","#FF8C00","#E74C3C","#1E8449","#006D6F","#004C6D","#0057A8","#1A237E","#4A148C","#7D3C98"],O=i(!1);K(B,t=>{t&&(O.value=!1)}),K(O,t=>{t&&(B.value=!1)});const yt=async()=>{if(he.value)try{we.value=!0,await Sa({url:`workspace/card/${he.value}`,method:"DELETE"}),xt(he.value),await ge(),pe.value=!1,ce.value=null,ot.success("Ticket deleted successfully")}catch(t){ot.error(Da(t))}finally{we.value=!1}},_t=async()=>{await yt()},xt=t=>{var e,a;(a=(e=b.value)==null?void 0:e.sheets)==null||a.forEach(l=>{var o;(o=l.sheet_lists)==null||o.forEach(p=>{p.cards=p.cards.filter(r=>r._id!==t)})})},kt=H(()=>Y(()=>import("./CreateTaskModal-DJ628ey2.js"),__vite__mapDeps([0,1,2,3]))),ht=H(()=>Y(()=>import("./CreateSheetModal-A7l306Xm.js"),__vite__mapDeps([4,2,3,5,6,7,8]))),wt=H(()=>Y(()=>import("./CreateVariableModal-MOicBXmW.js"),__vite__mapDeps([9,2,3]))),De=H(()=>Y(()=>import("./ConfirmDeleteModal-B-A9fKVv.js"),__vite__mapDeps([10,11,2,3]))),Ct=H(()=>Y(()=>import("./SidePanel-4PICUqlH.js"),__vite__mapDeps([12,2,3,13]))),St=H(()=>Y(()=>import("./KanbanBoard-BqllhXPP.js"),__vite__mapDeps([14,15,16,2,3,17,11,18]))),{data:me,refetch:ge,isPending:Ue}=na({workspace_id:h,workspace_module_id:A}),Ve=T(()=>{var t;return me.value?(t=me.value[0])==null?void 0:t._id:""}),x=i(Ve.value),{data:L,isPending:Dt}=sa(h.value,A.value,x),{mutate:Te,isPending:Ae}=ra({onSuccess:()=>{$.invalidateQueries({queryKey:["sheet-list"]}),R.value="",W.value=!1,ee.value=!1,W.value=!1}}),Be=t=>{Te({workspace_id:h.value,module_id:A.value,variable_id:w.value,value:t})};K(Ve,()=>{x.value=Ve.value});const Ee=T(()=>{var t;return L!=null&&L.value?(t=L==null?void 0:L.value[0])==null?void 0:t._id:""}),w=i(Ee.value);K(Ee,()=>{w.value=Ee.value});const ye=ia(),{data:b,isPending:Le,refetch:Oe}=da(A,x,T(()=>[...ye.selectedLaneIds]),w),F=t=>{t._id||(t._id=t.id),Z.value=t};window.selectCardHandler=F;const X=i(!1),Vt=()=>{P.value={},X.value=!X.value},Tt=ua(),At=ca();function Et(t){t.type==="column"?Tt.mutate({payload:{workspace_id:h.value,workspace_module_id:A.value,variable_id:w.value,moved_value:t.meta.id,new_index:t.meta.newIndex}},{onSuccess:()=>{ge()}}):At.mutate({payload:{workspace_id:h.value,card_id:t.meta.moved._id,group_value:t.meta.fromColumnId,group_variable_id:w.value,new_index:t.meta.newIndex,sheet_id:x.value}},{onSuccess:()=>{ge()}})}const Lt=t=>{},Ft=T(()=>(me.value||[]).map(t=>({_id:t._id,title:t==null?void 0:t.variables["sheet-title"],description:t==null?void 0:t.variables["sheet-description"],icon:t.icon,status:t==null?void 0:t.generation_status})));K(me,t=>{var e;(t==null?void 0:t.length)>0&&(x.value=(e=t[0])==null?void 0:e._id)});const ee=i(!1),R=i("");function Fe(){ee.value=!ee.value}function _e(){const t=R.value.trim();t&&Be(t)}const It=t=>{Te({workspace_id:Pe.params.id,module_id:Pe.params.module_id,new_value:t.title,value:t.oldTitle,variable_id:w.value})},W=i(!1),z=i(),Nt=()=>{Te({value:z.value.title,workspace_id:h.value,module_id:A.value,newValue:z.value.title,variable_id:w.value,is_trash:!0})},Mt=t=>{W.value=!0,z.value=t},qt=t=>{fe.value=!0,z.value=t},P=i();function zt(t){G.value=!0,P.value=t}const{mutate:Re,isPending:Pt}=pa({onSuccess:()=>{ge(),G.value=!1}});function $t(){var t;Re({sheet_id:(t=P.value)==null?void 0:t._id,workspace_module_id:A.value,is_trash:!0})}function Ut(t){X.value=!0,P.value=t}const te=i(""),Bt=i("");K(te,Fa.debounce(t=>{Bt.value=t},200));const Ot=T(()=>{const t=b.value.flatMap(e=>e.cards.map(a=>({...a,columnId:e.title})));return new st(t,{keys:["card-title","card-description"],threshold:.3})}),ae=T(()=>{var t;if(v.value==="kanban"){if(!te.value)return b.value;const e=Ot.value.search(te.value).map(a=>a.item);return b.value.map(a=>({...a,cards:e.filter(l=>l.columnId===a.title)}))}else{const e=(t=te.value)==null?void 0:t.trim();if(!e){let l=[];return(b.value??[]).forEach(o=>{l=[...l,...o==null?void 0:o.cards]}),l}return new st(jt.value,{keys:["card-title","card-description"],threshold:.3}).search(e).map(l=>l.item)}}),{data:Ie}=va(h),We=T(()=>((Ie==null?void 0:Ie.value)??[]).map(t=>{var e;return{_id:t._id,title:((e=t==null?void 0:t.variables)==null?void 0:e["lane-title"])??String(t._id)}})),Rt=T(()=>{var t;return[{key:"card-title",label:"Title",render:({row:e,value:a})=>_("div",{class:"flex items-center gap-1 w-full"},[_("a",{onClick:()=>Z.value=e,class:"text-[12px] underline text-blue-500 shrink-0 overflow-ellipsis cursor-pointer"},e["card-code"]),_("div",{class:"flex-1 min-w-0"},[_("input",{onFocusout:l=>{var o;je(e==null?void 0:e._id,"card-title",(o=l==null?void 0:l.target)==null?void 0:o.value)},class:"text-[12px] w-full overflow-ellipsis capitalize p-1 w-full p-1 focus:border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-transparent focus:bg-bg-body text-[12px] h-8",defaultValue:a,disabled:!ue.value})])])},{key:"end-date",label:"Due Date",render:({row:e,value:a})=>{const l=i(a);return _(fa,{class:" capitalize flex items-center gap-2 text-[12px]",placeholder:"Set start date",tableInputClass:!0,modelValue:l.value,disabled:!ue.value,"onUpdate:modelValue":o=>Ht(e==null?void 0:e._id,o),emptyText:"Date"})}},{key:"lane",label:"Lane",render:({row:e})=>{var a;return _(rt,{options:We.value??[],placeholder:"Select lane",modelValue:((a=e.lane)==null?void 0:a._id)||null,disabled:!ue.value,"onUpdate:modelValue":l=>Yt(e==null?void 0:e._id,l),displayField:"title",emptyText:"Lane"})}},{key:"created_by",label:"Owner",render:({value:e})=>_("div",{class:"capitalize flex items-center gap-2  px-3"},[_("div",{class:" rounded-full  "},[e!=null&&e.u_profile_image?_("img",{class:"w-6 h-6 rounded-full",src:e==null?void 0:e.u_profile_image}):_("div",{class:"w-5 h-5 rounded-full flex justify-center items-center text-[11px] ",style:`background:${e!=null&&e.u_full_name?ba({name:e.u_full_name,email:e.u_email}):""}`},ma(e==null?void 0:e.u_full_name))]),_("span",{class:"text-[12px]"},e?e==null?void 0:e.u_full_name:"")])},{key:"seat",label:"Assignee",render:({row:e,value:a})=>_(Ia,{class:"capitalize flex items-center gap-2 ",onAssign:l=>Wt(e==null?void 0:e._id,l),assigneeId:a,seat:a,name:!0,disabled:!pt.value,emptyText:"Assignee"})},...((t=L.value)==null?void 0:t.filter(e=>{var a;return((a=e==null?void 0:e.type)==null?void 0:a.title)==="Select"}).map(e=>({key:e==null?void 0:e.slug,label:e==null?void 0:e.slug,render:({row:a,value:l})=>{var p;let o=l;if(Array.isArray(a==null?void 0:a.variables)){const r=a.variables.find(u=>u.slug===e.slug);r&&(o=r.value)}else o=((p=a==null?void 0:a.variables)==null?void 0:p[e.slug])??(a==null?void 0:a[e.slug])??l;return _("div",{class:"capitalize flex items-center gap-2"},[_(rt,{options:Kt(e.data??[]),modelValue:o,disabled:!ue.value,emptyText:e.slug,"onUpdate:modelValue":r=>{je(a==null?void 0:a._id,e.slug,r)},columnName:e.slug})])},visible:e==null?void 0:e.is_visible})))??[]]}),Wt=(t,e)=>{Ne(t,a=>{a.seat=e}),le.mutate({card_id:t,seat_id:e==null?void 0:e._id})},jt=T(()=>{let t=[];return(b.value??[]).forEach(e=>{t=[...t,...e==null?void 0:e.cards]}),t}),Kt=t=>t.map(e=>({_id:e.value??e,title:e.value??e})),le=ga({onSuccess:()=>{$.invalidateQueries({queryKey:["get-sheets"]}),$.invalidateQueries({queryKey:["sheet-list"]}),$.invalidateQueries({queryKey:["roles"]})}}),Ne=(t,e)=>{if(!b.value)return;const a=b.value.findIndex(l=>l.cards.some(o=>o._id===t));if(a!==-1){const l=b.value[a].cards.findIndex(o=>o._id===t);if(l!==-1){const o={...b.value[a].cards[l]};e(o),b.value[a].cards[l]=o,lt(b)}}},{mutate:Me}=ya({onSuccess:()=>{}});function je(t,e,a){Ne(t,l=>{if(e==="card-title"&&(l[e]=a),Array.isArray(l.variables)){const o=l.variables.find(p=>p.slug===e);o?o.value=a:l.variables.push({slug:e,value:a,type:"Select"})}else l.variables&&typeof l.variables=="object"?l.variables[e]=a:l[e]=a}),le.mutate({card_id:t,variables:{[e]:a.trim()}})}function Qt(t){if(t["card-title"]){const e={sheet_list_id:"To Do",workspace_id:h.value,sheet_id:x.value,variables:{"card-title":t["card-title"].trim()},createdAt:new Date().toISOString()};Me(e)}}const Ht=(t,e)=>{const a=b.value.findIndex(l=>l.cards.some(o=>o._id===t));if(a!==-1){const l=b.value[a].cards.findIndex(o=>o._id===t);l!==-1&&(b.value[a].cards[l]["end-date"]=e)}le.mutate({card_id:t,variables:{"start-date":e}})};function Yt(t,e){Ne(t,a=>{const l=We.value.find(o=>o._id===e);l&&(a.lane=l)}),lt(b),le.mutate({card_id:t,workspace_lane_id:e})}const{mutate:Gt}=_a(),Jt=(t,e)=>{Gt({payload:{sheet_id:x.value,workspace_id:h.value,variable_slug:t,is_visible:e}})},E=T(()=>{var t,e;return(e=(t=M.value)==null?void 0:t.nodeObj)!=null&&e.style?M.value.nodeObj.style:qe(C)});function D(t,e,a){return t!==void 0?t:e!==void 0?e:a}function oe(t,e){var r;if(!((r=M.value)!=null&&r.nodeObj))return;const a=M.value.nodeObj;a.style||(a.style={});const l=e.target,o=l.type==="number"?Number(l.value):l.value;switch(t){case"bg_color":a.style.background=o;break;case"color":a.style.color=o;break;case"font_size":a.style.fontSize=`${o}px`;break;case"font_weight":a.style.fontWeight=o;break;case"font_style":a.style.fontStyle=o;break;case"font_family":a.style.fontFamily=o;break;case"border_color":a.style.borderColor=o;break;case"border_width":a.style.borderWidth=`${o}px`;break;case"border_radius":a.style.borderRadius=`${o}px`;break;case"padding":a.style.padding=`${o}px`;break}const p=document.getElementById(a.id);p&&Qe(a,p)}const C={bg_color:"#ffffff",color:"#000000",font_size:14,font_weight:"normal",font_style:"normal",font_family:"Inter",border_color:"#cccccc",border_width:0,border_radius:0,padding:0},j=i(!1);async function Ke(){var e;const t=(e=M.value)==null?void 0:e.nodeObj;if(!(!t||j.value)){j.value=!0;try{const a=Ca(t);a._originalStyle||(a._originalStyle={});const l=a.style||{},o=a._originalStyle,p={bg_color:D(l.background,o.bg_color,C.bg_color),color:D(l.color,o.color,C.color),font_size:D(l.fontSize?parseInt(l.fontSize):void 0,o.font_size,C.font_size),font_weight:D(l.fontWeight,o.font_weight,C.font_weight),font_style:D(l.fontStyle,o.font_style,C.font_style),font_family:D(l.fontFamily,o.font_family,C.font_family),border_color:D(l.borderColor,o.border_color,C.border_color),border_width:D(l.borderWidth?parseInt(l.borderWidth):void 0,o.border_width,C.border_width),border_radius:D(l.borderRadius?parseInt(l.borderRadius):void 0,o.border_radius,C.border_radius),padding:D(l.padding?parseInt(l.padding):void 0,o.padding,C.padding),hyperLink:q.value||a.hyperLink||""};a._originalStyle={...p};const r=a.unique_name==="sheet"?{sheet_id:a.id,workspace_id:h.value,workspace_module_id:A.value,style:p}:{card_id:a.id,seat_id:a.seat_id,style:p};a.unique_name==="sheet"?await Re(r):await le.mutateAsync(r)}finally{j.value=!1}}}const Zt=i([]);function Xt(t){const e={id:"root",topic:localStorage.getItem("currentName")??"",isRoot:!0,children:[],style:{},_originalStyle:{},unique_name:"root"};if(!Array.isArray(t))return e;const a={};return t.forEach(l=>{var u,m;const o=((u=l.variables)==null?void 0:u["sheet-title"])||"Untitled",p=((m=l.style)==null?void 0:m.hyperLink)||"";a[o]||(a[o]={id:l._id,topic:o,variables:l==null?void 0:l.variables,children:[],style:l==null?void 0:l.style,_originalStyle:(l==null?void 0:l.style)||{},unique_name:"sheet",hyperLink:p||""},e.children.push(a[o]));const r={id:l==null?void 0:l._id,topic:l.title,children:[],style:qe(l==null?void 0:l.style),_originalStyle:l.style||{},unique_name:"List",hyperLink:p||""};(l.cards||[]).forEach((y,V)=>{var ne;const s=((ne=y.style)==null?void 0:ne.hyperLink)||"",S={id:y._id||`card-${V}`,seat_id:y.seat_id,topic:y["card-title"],style:qe(y.style),_originalStyle:y.style||{},children:[],unique_name:"card",hyperLink:s||""};r.children.push(S),Zt.value=S}),a[o].children.push(r)}),e}const{mutateAsync:ea}=xa({onSuccess:()=>{$.invalidateQueries({queryKey:["sheets"]}),$.invalidateQueries({queryKey:["sheet-list"]}),close()}});ka(()=>{v.value!=="mindmap"||!Ce.value||!b.value||Va(()=>{var o,p;const t=Xt(b.value);ve.value&&((p=(o=ve.value).destroy)==null||p.call(o),ve.value=null);const e=new Pa({el:Ce.value,theme:void 0,draggable:!0,contextMenu:!0,contextMenuOption:{Update:!0,extend:[{name:"Update Node",onclick:()=>{var u;U.value&&(U.value=!1);const r=(u=M.value)==null?void 0:u.nodeObj;r&&F(r)}},{name:"Add Hyperlink",onclick:()=>{vt(async()=>{await Ke()})}}]}});ve.value=e,e.init({nodeData:t}),e.bus.addListener("selectNode",r=>{r&&(M.value={nodeObj:r},U.value=!0)}),e.bus.addListener("renderNode",r=>{!(r!=null&&r.nodeObj)||!(r!=null&&r.element)||Qe(r.nodeObj,r.element)});const a=new Set;e.bus.addListener("operation",async r=>{var y,V,s;if(!r||r.name!=="insertSibling"&&r.name!=="addChild")return;const u=r.obj;if(!u||!u.id||a.has(u.id))return;a.add(u.id);let m;if(r.name==="addChild"?m=(y=e.currentNode)==null?void 0:y.nodeObj:m=(s=(V=e.currentNode)==null?void 0:V.nodeObj)==null?void 0:s.parent,!(!m||!("unique_name"in m))&&m.unique_name==="List")try{const S=He({topic:u.topic??"New Card",id:u.id},m);await Me(S),await Oe()}catch(S){console.error("Error creating card or refetching sheets:",S)}});const l=new Set;e.bus.addListener("operation",async r=>{var y,V;if(!r)return;const u=r.obj;if(!(u!=null&&u.id))return;const m=u.parent??((V=(y=e.currentNode)==null?void 0:y.nodeObj)==null?void 0:V.parent);if(!(!m||!("unique_name"in m))){if(r.name==="addChild"&&m.unique_name==="root"&&!l.has(u.id)){l.add(u.id);try{await ea({variables:{"sheet-title":u.topic??"New Sheet","sheet-description":"This is custom description"},is_ai_generated:!1,workspace_id:h.value,workspace_module_id:A.value})}catch(s){console.error("Error creating workspace sheet:",s)}return}if(m.unique_name==="List")try{const s=He({topic:u.topic??"New Card",id:u.id},m);await Me(s),await Oe()}catch(s){console.error("Error creating card or refetching sheets:",s)}}})})});function Qe(t,e){if(!t||!e||!t.style)return;const a=e.querySelector(".topic"),l=e.querySelector(".node")??e,o=t.style;o.background&&(l.style.background=o.background),o.color&&a&&(a.style.color=o.color),a&&(o.fontSize&&(a.style.fontSize=o.fontSize),o.fontFamily&&(a.style.fontFamily=o.fontFamily),o.fontWeight&&(a.style.fontWeight=o.fontWeight),o.fontStyle&&(a.style.fontStyle=o.fontStyle)),o.borderColor&&(l.style.borderColor=o.borderColor),o.borderWidth&&(l.style.borderWidth=o.borderWidth),o.borderRadius&&(l.style.borderRadius=o.borderRadius),o.padding&&(l.style.padding=o.padding)}function qe(t={}){return{background:t.bg_color,color:t.color,fontSize:t.font_size!=null?`${t.font_size}px`:void 0,fontWeight:t.font_weight,fontStyle:t.font_style,fontFamily:t.font_family,borderColor:t.border_color,borderWidth:t.border_width!=null?`${t.border_width}px`:void 0,borderRadius:t.border_radius!=null?`${t.border_radius}px`:void 0,padding:t.padding!=null?`${t.padding}px`:void 0,hyperLink:t.hyperLink||void 0}}function He(t,e){const a=new Date,l=a.toISOString().split("T")[0],o=new Date(a.getTime()+3*24*60*60*1e3).toISOString().split("T")[0];return{sheet_list_id:(e==null?void 0:e.topic)||"In Progress",workspace_id:h.value,sheet_id:x.value,workspace_lane_id:(t==null?void 0:t.workspace_lane_id)||null,variables:{"card-status":(e==null?void 0:e.topic)||"In Progress","card-type":null,priority:null,process:null,"card-title":t.topic||"New Card","card-description":"","start-date":l,"end-date":o},createdAt:new Date().toISOString()}}return(t,e)=>{var a,l,o,p,r,u,m,y,V;return c(),g(se,null,[n("div",$a,[n("div",Ua,[n("div",Ba,[k(nt,{onEditOption:Ut,modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=s=>x.value=s),canEdit:d(it),canDelete:d(dt),onDeleteOption:zt,options:Ft.value,variant:"secondary",customClasses:"fixed w-auto"},{more:Q(()=>[d(ut)?(c(),g("div",{key:0,onClick:e[0]||(e[0]=s=>Vt()),class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[38]||(e[38]=[n("i",{class:"fa-solid fa-plus"},null,-1),ke(" Add new ")]))):f("",!0)]),_:1},8,["modelValue","canEdit","canDelete","options"]),n("div",Oa,[(v.value=="kanban",c(),I(nt,{key:0,actions:!1,modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=s=>w.value=s),options:d(L),variant:"secondary",customClasses:"fixed w-auto",onNestedSelect:gt},{more:Q(()=>[d(de)?(c(),g("div",{key:0,onClick:e[2]||(e[2]=()=>{J.value=!0}),class:"sticky bottom-0 bg-bg-dropdown shadow-md shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[39]||(e[39]=[n("i",{class:"fa-solid fa-plus"},null,-1),ke(" Add new ")]))):f("",!0)]),_:1},8,["modelValue","options"])),k(Aa,{onOnChange:e[4]||(e[4]=s=>{te.value=s}),placeholder:"Search in Orchit AI space"}),v.value==="mindmap"?(c(),g("button",{key:1,class:"cursor-pointer w-8 h-8 rounded-full bg-bg-surface",title:"Show formatting sidebar",onClick:e[5]||(e[5]=s=>U.value=!U.value)},e[40]||(e[40]=[n("i",{class:"fa-solid fa-sidebar"},null,-1)]))):f("",!0),n("div",Ra,[n("button",{class:N(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",v.value==="kanban"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"List view",onClick:e[6]||(e[6]=s=>v.value="kanban")},e[41]||(e[41]=[n("i",{class:"fa-solid fa-chart-kanban"},null,-1)]),2),n("button",{onClick:e[7]||(e[7]=s=>v.value="table"),class:N(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",v.value==="table"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gallery view"},e[42]||(e[42]=[n("i",{class:"fa-solid fa-align-left"},null,-1)]),2),n("button",{onClick:e[8]||(e[8]=s=>v.value="mindmap"),class:N(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",v.value==="mindmap"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"MindMap view"},e[43]||(e[43]=[n("i",{class:"fa-solid fa-chart-diagram"},null,-1)]),2),n("button",{onClick:e[9]||(e[9]=s=>v.value="calendar"),class:N(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",v.value==="calendar"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Calendar view"},e[44]||(e[44]=[n("i",{class:"fa-regular fa-calendar"},null,-1)]),2),n("button",{onClick:e[10]||(e[10]=s=>v.value="gantt"),class:N(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",v.value==="gantt"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gantt Chart view"},e[45]||(e[45]=[n("i",{class:"fa-solid fa-chart-gantt"},null,-1)]),2),n("button",{onClick:e[11]||(e[11]=s=>v.value="timeline"),class:N(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",v.value==="timeline"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Timeline view"},e[46]||(e[46]=[n("i",{class:"fa-solid fa-timeline"},null,-1)]),2)])])])]),v.value=="kanban"?(c(),g(se,{key:0},[ze(k(Ea,null,null,512),[[Ze,d(Le)||d(Ue)]]),ze(n("div",Wa,[k(d(St),{onOnPlus:qt,board:ae.value,"onDelete:column":e[12]||(e[12]=s=>Mt(s)),"onUpdate:column":e[13]||(e[13]=s=>It(s)),onReorder:Et,onAddColumn:Be,"onSelect:ticket":F,onOnBoardUpdate:Lt,variable_id:w.value,sheet_id:x.value},{"column-footer":Q(s=>{var S,ne,Ye,Ge,Je;return[(ne=(S=d(ye))==null?void 0:S.transitions)!=null&&ne.all_allowed&&!((Je=(Ge=(Ye=d(ye))==null?void 0:Ye.transitions)==null?void 0:Ge.all_allowed)!=null&&Je.includes(s.column.title))&&d(ye).transitions.currentColumn!=s.column.title?(c(),g("div",ja," Disbale ( you can't drop here ) ")):f("",!0)]}),ticket:Q(({ticket:s})=>[k(La,{selectedVar:w.value,onSelect:()=>{F(s)},ticket:s},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"]),n("div",{class:"min-w-[270px] sm:min-w-[328px]",onClick:e[15]||(e[15]=re(()=>{},["stop"]))},[ee.value?(c(),g("div",Ka,[k(et,{autofocus:!0,modelValue:R.value,"onUpdate:modelValue":e[14]||(e[14]=s=>R.value=s),placeholder:"Add New list",onKeyup:Xe(_e,["enter"])},null,8,["modelValue"]),e[47]||(e[47]=n("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),n("div",Qa,[k(tt,{onClick:_e,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:Q(()=>[ke(ie(d(Ae)?"Adding...":"Add list"),1)]),_:1}),n("i",{class:"fa-solid fa-close",onClick:Fe})])])):(c(),g("button",{key:1,disabled:!d(de),class:N(["text-sm text-text-primary py-2.5 font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",d(de)?"cursor-pointer":"cursor-not-allowed"]),onClick:re(Fe,["stop"])}," + Add List ",10,Ha))])],512),[[Ze,!d(Le)&&!d(Ue)]])],64)):f("",!0),v.value=="table"?(c(),I(Na,{key:1,onToggleVisibility:Jt,onAddVar:e[16]||(e[16]=()=>{J.value=!0}),isPending:d(Le)||d(Dt),columns:Rt.value,rows:ae.value,canCreate:d(ct),canCreateVariable:d(de),onCreate:Qt},null,8,["isPending","columns","rows","canCreate","canCreateVariable"])):f("",!0),v.value==="mindmap"?(c(),g(se,{key:2},[n("div",Ya,[n("div",{ref_key:"mindMapRef",ref:Ce,class:"flex-1 h-full overflow-hidden rounded-md relative"},null,512),U.value?(c(),g("div",Ga,[e[53]||(e[53]=n("div",{class:"flex items-center justify-between pb-3 mb-4 border-b"},[n("h3",{class:"text-sm font-semibold text-secondary"},"Format Node")],-1)),n("div",Ja,[n("div",null,[e[50]||(e[50]=n("h4",{class:"text-xs font-semibold text-secondary uppercase mb-3"}," Colors ",-1)),n("div",Za,[e[48]||(e[48]=n("label",{class:"block text-xs text-secondary mb-1"},"Background",-1)),n("div",{class:"flex items-center gap-2 cursor-pointer",onClick:e[17]||(e[17]=s=>B.value=!B.value)},[n("div",{class:"w-full h-7 rounded border",style:xe({background:E.value.background})},null,4),n("span",Xa,ie(E.value.background),1)]),B.value?(c(),g("div",el,[n("div",tl,[(c(),g(se,null,at($e,s=>n("button",{key:s,class:"w-5 h-5 rounded border",style:xe({background:s}),onClick:S=>{oe("bg_color",{target:{value:s}}),B.value=!1}},null,12,al)),64))]),n("div",ll,[n("input",{type:"color",value:E.value.background,class:"w-8 h-8 cursor-pointer",onInput:e[18]||(e[18]=s=>oe("bg_color",s))},null,40,ol),n("input",{type:"text",class:"flex-1 text-xs border rounded px-2 py-1",value:E.value.background,readonly:""},null,8,nl)])])):f("",!0)]),n("div",sl,[e[49]||(e[49]=n("label",{class:"block text-xs text-secondary mb-1"},"Text",-1)),n("div",{class:"flex items-center gap-2 cursor-pointer",onClick:e[19]||(e[19]=s=>O.value=!O.value)},[n("div",{class:"w-full h-7 rounded border",style:xe({background:E.value.color})},null,4),n("span",rl,ie(E.value.color),1)]),O.value?(c(),g("div",il,[n("div",dl,[(c(),g(se,null,at($e,s=>n("button",{key:s,class:"w-5 h-5 rounded border",style:xe({background:s}),onClick:S=>{oe("color",{target:{value:s}}),O.value=!1}},null,12,ul)),64))]),n("div",cl,[n("input",{type:"color",value:E.value.color,class:"w-8 h-8 cursor-pointer",onInput:e[20]||(e[20]=s=>oe("color",s))},null,40,pl),n("input",{type:"text",class:"flex-1 text-xs border rounded px-2 py-1",value:E.value.color,readonly:""},null,8,vl)])])):f("",!0)])]),n("div",null,[n("div",fl,[n("div",null,[e[52]||(e[52]=n("label",{class:"block text-xs text-secondary mb-1"},"Weight",-1)),n("select",{class:"w-full h-8 border rounded px-2 text-sm",value:E.value.fontWeight,onChange:e[21]||(e[21]=s=>oe("font_weight",s))},e[51]||(e[51]=[n("option",{value:"lighter"},"Light",-1),n("option",{value:"normal"},"Normal",-1),n("option",{value:"bold"},"Bold",-1),n("option",{value:"bolder"},"Extra Bold",-1)]),40,bl)])])])]),n("div",ml,[n("button",{class:"w-full cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium hover:shadow-md disabled:opacity-60",disabled:j.value,onClick:Ke},[j.value?(c(),g("span",yl)):f("",!0),n("span",null,ie(j.value?"Updating...":"Update"),1)],8,gl)])])):f("",!0)]),be.value?(c(),g("div",_l,[n("div",xl,[e[54]||(e[54]=n("h3",{class:"text-lg font-semibold mb-4"},"Insert Web Link",-1)),ze(n("input",{"onUpdate:modelValue":e[22]||(e[22]=s=>q.value=s),type:"text",placeholder:"Enter or paste a URL",class:"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[ha,q.value]]),n("div",kl,[n("button",{onClick:bt,class:"px-4 py-2 rounded-md bg-gray-200 hover:bg-gray-300"}," Cancel "),n("button",{disabled:!q.value,onClick:ft,class:N(["px-4 py-2 rounded-md text-white",q.value?"bg-blue-500 hover:bg-blue-600":"bg-blue-300 cursor-not-allowed"])}," Insert ",10,hl)])])])):f("",!0),ee.value?(c(),g("div",{key:1,class:"absolute top-40 left-70 bg-bg-body rounded-lg p-4 shadow-lg z-100 min-w-[328px] border",onClick:e[24]||(e[24]=re(()=>{},["stop"]))},[k(et,{autofocus:!0,modelValue:R.value,"onUpdate:modelValue":e[23]||(e[23]=s=>R.value=s),placeholder:"Add New list",onKeyup:Xe(_e,["enter"])},null,8,["modelValue"]),e[55]||(e[55]=n("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),n("div",wl,[k(tt,{onClick:_e,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:Q(()=>[ke(ie(d(Ae)?"Adding...":"Add list"),1)]),_:1}),n("i",{class:"fa-solid fa-close cursor-pointer",onClick:Fe})])])):f("",!0)],64)):f("",!0),v.value==="calendar"?(c(),I(Ma,{key:3,data:ae.value,"onSelect:ticket":F},null,8,["data"])):f("",!0),v.value==="gantt"?(c(),I(qa,{key:4,data:ae.value,"onSelect:ticket":F},null,8,["data"])):f("",!0),v.value==="timeline"?(c(),I(za,{key:5,data:ae.value,"onSelect:ticket":F},null,8,["data"])):f("",!0)]),k(d(De),{onClick:e[25]||(e[25]=re(()=>{},["stop"])),modelValue:W.value,"onUpdate:modelValue":e[26]||(e[26]=s=>W.value=s),title:"Delete List",itemLabel:"list",itemName:(a=z.value)==null?void 0:a.title,requireMatchText:(l=z.value)==null?void 0:l.title,confirmText:"Delete List",cancelText:"Cancel",size:"md",loading:d(Ae),onConfirm:Nt,onCancel:e[27]||(e[27]=()=>{W.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),fe.value?(c(),I(d(kt),{selectedVariable:w.value,listId:(o=z.value)==null?void 0:o.title,sheet_id:x.value,key:"createTaskModalKey",modelValue:fe.value,"onUpdate:modelValue":e[28]||(e[28]=s=>fe.value=s),onSubmit:e[29]||(e[29]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):f("",!0),(p=Z.value)!=null&&p._id?(c(),I(d(Ct),{key:1,details:Z.value,onClose:e[30]||(e[30]=()=>{F({variables:{}})}),showPanel:!!((r=Z.value)!=null&&r._id)},null,8,["details","showPanel"])):f("",!0),k(d(ht),{size:"md",sheet:P.value,modelValue:X.value,"onUpdate:modelValue":e[31]||(e[31]=s=>X.value=s)},null,8,["sheet","modelValue"]),J.value?(c(),I(d(wt),{key:2,modelValue:J.value,"onUpdate:modelValue":e[32]||(e[32]=s=>J.value=s),sheetID:x.value},null,8,["modelValue","sheetID"])):f("",!0),k(d(De),{onClick:e[33]||(e[33]=re(()=>{},["stop"])),modelValue:G.value,"onUpdate:modelValue":e[34]||(e[34]=s=>G.value=s),title:"Delete Sheet",itemLabel:"Sheet",itemName:(u=P.value)==null?void 0:u.title,requireMatchText:(m=P.value)==null?void 0:m.title,confirmText:"Delete Sheet",cancelText:"Cancel",size:"md",loading:d(Pt),onConfirm:$t,onCancel:e[35]||(e[35]=()=>{G.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),k(d(De),{modelValue:pe.value,"onUpdate:modelValue":e[36]||(e[36]=s=>pe.value=s),title:"Delete Ticket",itemLabel:"Ticket",itemName:(y=ce.value)==null?void 0:y.title,requireMatchText:(V=ce.value)==null?void 0:V.title,confirmText:"Delete Ticket",cancelText:"Cancel",size:"md",loading:we.value,onConfirm:_t,onCancel:e[37]||(e[37]=()=>{pe.value=!1,ce.value=null})},null,8,["modelValue","itemName","requireMatchText","loading"]),e[56]||(e[56]=n("div",null,null,-1))],64)}}}),zl=Ta(Cl,[["__scopeId","data-v-8f915b31"]]);export{zl as default};
