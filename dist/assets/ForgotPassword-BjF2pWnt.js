import{d as S,r as x,O as M,c as l,e as N,f as $,w as o,o as u,g as t,m as f,l as z,h as r,n as D,_ as I,k as n,t as c,B as k,j}from"./index-BSovCUIB.js";import{_ as A}from"./AuthLayout.vue_vue_type_script_setup_true_lang-BP9wz1IE.js";import{f as L}from"./auth-Blaje7DU.js";import"./dark-logo-Mcb_sJlF.js";const R={class:"max-w-[500px] md:mx-auto w-full text-text-primary bg-bg-body"},h={key:0},q={key:0,class:"text-red-500 text-sm text-center mt-2"},H={class:"text-center mt-6"},O={key:1,class:"text-center"},T={class:"text-sm text-text-secondary mb-8"},U={class:"text-text-primary"},W={class:"mt-8"},Y=S({name:"ForgotPasswordPage",__name:"ForgotPassword",setup(G){const v=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,s=x(""),a=x(""),d=x(!1),i=M({email:!1}),p=l(()=>i.email?s.value.trim()?v.test(s.value)?"":"Invalid email":"Email is required":""),E=l(()=>!!p.value),y=l(()=>v.test(s.value)),{mutateAsync:B,isPending:g}=N({mutationFn:L}),P=l(()=>g.value||!y.value),F=l(()=>g.value?"Sending...":"Send reset instructions");function V(){a.value&&(a.value="")}async function _(){if(a.value="",i.email=!0,!y.value){a.value="Please enter a valid email address.";return}try{await B({u_email:s.value}),d.value=!0}catch(m){a.value=(m==null?void 0:m.message)||"Failed to send reset email. Please try again."}}function C(){d.value=!1,i.email=!1,_()}return(m,e)=>{const b=j("router-link");return u(),$(A,null,{form:o(()=>[t("div",R,[d.value?(u(),f("div",O,[e[9]||(e[9]=t("div",{class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"},[t("i",{class:"fa-solid fa-check text-green-600 text-2xl"})],-1)),e[10]||(e[10]=t("h2",{class:"text-2xl font-medium mb-4 text-text-primary"}," Check your email ",-1)),t("p",T,[e[5]||(e[5]=n(" We've sent password reset instructions to")),e[6]||(e[6]=t("br",null,null,-1)),t("strong",U,c(s.value),1)]),e[11]||(e[11]=t("p",{class:"text-sm text-text-secondary mb-6"}," Didn't receive the email? Check your spam folder or ",-1)),r(k,{size:"md",variant:"secondary",onClick:C},{default:o(()=>e[7]||(e[7]=[n(" Resend email ")])),_:1,__:[7]}),t("div",W,[r(b,{to:"/login",class:"text-sm text-text-secondary hover:text-text-primary"},{default:o(()=>e[8]||(e[8]=[t("i",{class:"fa-solid fa-arrow-left mr-2"},null,-1),n("Back to login ")])),_:1,__:[8]})])])):(u(),f("div",h,[e[3]||(e[3]=t("h2",{class:"text-[32px] font-medium mb-4 text-center text-text-primary"}," Forgot Password? ",-1)),e[4]||(e[4]=t("p",{class:"text-sm text-text-secondary text-center mb-8"}," Enter your email address and we'll send you instructions to reset your password. ",-1)),t("form",{onSubmit:z(_,["prevent"]),class:"space-y-4 w-full"},[r(I,{modelValue:s.value,"onUpdate:modelValue":[e[0]||(e[0]=w=>s.value=w),V],label:"Email",placeholder:"Email address",size:"lg",error:E.value,message:p.value,onBlur:e[1]||(e[1]=w=>i.email=!0)},null,8,["modelValue","error","message"]),r(k,{disabled:P.value,size:"lg",block:!0,type:"submit"},{default:o(()=>[n(c(F.value),1)]),_:1},8,["disabled"]),a.value?(u(),f("p",q,c(a.value),1)):D("",!0)],32),t("div",H,[r(b,{to:"/login",class:"text-sm text-text-secondary hover:text-text-primary"},{default:o(()=>e[2]||(e[2]=[t("i",{class:"fa-solid fa-arrow-left mr-2"},null,-1),n("Back to login ")])),_:1,__:[2]})])]))])]),_:1})}}});export{Y as default};
