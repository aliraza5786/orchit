const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-CP80fe1C.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-C8yXMB-a.js","assets/index-CivBloh4.js","assets/index-B1Qp1Dcf.css","assets/ConfirmDeleteModal-zSvP0es9.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-C2hfOyw_.js","assets/SidePanel-DZf_qMTV.js","assets/SidePanel-U7OOMI6M.css","assets/KanbanBoard-Cla7ayuN.js","assets/vuedraggable.umd-kCR0tpIZ.js","assets/_commonjsHelpers-_d1bhYXs.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-8wXsQUEG.js","assets/KanbanBoard-Dffh696C.css"])))=>i.map(i=>d[i]);
import{R as kt,S as Ot,p as g,T as Te,c as T,r as b,n as j,K as ht,U as Ct,d as wt,V as pl,W as fl,X as Pl,j as m,f as t,h as De,z as J,i as q,F as ge,y as he,o as u,t as L,Q as vl,J as ll,g as ae,e as fe,w as re,Y as ml,_ as gl,B as Re,I as ul,k as F,Z as Nt,D as ot,P as bl,N as yl,M as jl,$ as zl,a0 as Rl,a1 as Hl,a2 as Wl,a3 as Kl,E as tl,a4 as Zl,a5 as Xl,a6 as Yl,u as ea,a7 as ta,a8 as la,a9 as aa,aa as sa,ab as na,ac as _e,ad as oa,ae as ra,af as ia,ag as ue,ah as el,q as da,ai as Ll,aj as ua,l as Al,ak as Jt,A as Zt,al as El,am as ca,v as Ml,an as pa,ao as Fl,ap as fa}from"./index-CivBloh4.js";import{L as va}from"./Loader-C1K8HYaR.js";import{_ as ma}from"./BaseTextAreaField.vue_vue_type_script_setup_true_lang-4m0kktkf.js";import{_ as ga}from"./SearchBar.vue_vue_type_script_setup_true_lang-DJfSud0J.js";import{o as Xt,_ as ba}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-C2hfOyw_.js";import{_ as Bl,a as ya,b as xa,C as _a,c as ha,d as ka,k as wa}from"./TimelineView-CsrEt9DB.js";import{K as Ql}from"./KanbanSkeleton-BXlBouRK.js";import{K as Ca}from"./KanbanTicket-DqSflQXk.js";import{F as Il}from"./fuse-Ch1WBRTM.js";import{l as Sa}from"./lodash-CQYOKM_D.js";import"./favicon-BAFXWHLW.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-8wXsQUEG.js";import"./_commonjsHelpers-_d1bhYXs.js";const $a="data:image/svg+xml,%3csvg%20width='60'%20height='46'%20viewBox='0%200%2060%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M59.7443%2034.8967L50.5682%2025.7206C50.4457%2025.5984%2050.2897%2025.5152%2050.1199%2025.4816C49.9501%2025.4479%2049.7742%2025.4653%2049.6143%2025.5315C49.4544%2025.5976%2049.3176%2025.7097%2049.2213%2025.8535C49.125%2025.9973%2049.0734%2026.1664%2049.073%2026.3394V30.517H25.9775V40.5114H49.0755V44.689C49.0759%2044.8621%2049.1275%2045.0312%2049.2238%2045.175C49.3201%2045.3187%2049.4569%2045.4308%2049.6168%2045.497C49.7767%2045.5632%2049.9527%2045.5805%2050.1224%2045.5468C50.2922%2045.5132%2050.4482%2045.43%2050.5708%2045.3078L59.7468%2036.1318C59.9095%2035.9672%2060.0005%2035.7451%2060.0001%2035.5137C59.9996%2035.2823%2059.9076%2035.0605%2059.7443%2034.8967Z'%20fill='%23C6DBA9'/%3e%3cpath%20d='M32.3149%2030.5293C30.664%2031.5967%2028.7394%2032.1633%2026.7734%2032.1609V40.5237H34.7295C39.2829%2038.5638%2042.9649%2035.0102%2045.0851%2030.5293H32.3149Z'%20fill='url(%23paint0_linear_250_16424)'/%3e%3cpath%20d='M46.2209%2020.2832C46.2317%2015.0884%2044.2448%2010.0884%2040.6714%206.3179C37.0981%202.54738%2032.2119%200.295026%2027.024%200.0269855C21.8362%20-0.241055%2016.7439%201.49574%2012.801%204.87791C8.85809%208.26009%206.36647%2013.0287%205.84178%2018.1969L2.46233%2017.8913C2.31055%2017.8782%202.15829%2017.9103%202.02467%2017.9835C1.89106%2018.0566%201.78205%2018.1677%201.71134%2018.3026C1.64063%2018.4376%201.61138%2018.5904%201.62726%2018.7419C1.64313%2018.8934%201.70343%2019.0368%201.80058%2019.1542L9.51927%2028.406C9.79205%2028.7344%2010.277%2028.7773%2010.378%2028.5045L19.6298%2020.7833C20.3876%2020.3413%2020.1173%2019.4825%2019.4328%2019.4194L15.8008%2019.091C16.0297%2017.1283%2016.8213%2015.2735%2018.0802%2013.7503C19.3391%2012.2271%2021.0115%2011.1004%2022.8961%2010.5059C24.7806%209.9114%2026.7969%209.8745%2028.7019%2010.3996C30.6069%2010.9248%2032.3195%2011.9896%2033.6332%2013.4657C34.947%2014.9419%2035.8059%2016.7664%2036.1065%2018.7195C36.4071%2020.6726%2036.1365%2022.6709%2035.3274%2024.4738C34.5183%2026.2766%2033.2051%2027.8071%2031.5462%2028.8807C29.8872%2029.9544%2027.9531%2030.5254%2025.977%2030.5251H25.9283V40.5094C31.2249%2040.4031%2036.7093%2038.2263%2040.4202%2034.4455C44.1311%2030.6648%2046.2134%2025.5808%2046.2209%2020.2832Z'%20fill='%23D7A39E'/%3e%3cpath%20d='M25.9773%2030.5293H0V40.5237H25.9773V30.5293Z'%20fill='url(%23paint1_linear_250_16424)'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_250_16424'%20x1='6.53714'%20y1='35.5252'%20x2='47.0198'%20y2='35.5252'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%236C798F'/%3e%3cstop%20offset='1'%20stop-color='%236C798F'%20stop-opacity='0.1'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_250_16424'%20x1='0'%20y1='36'%20x2='26'%20y2='36'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23E8D4D3'%20stop-opacity='0'/%3e%3cstop%20offset='1'%20stop-color='%23E2A39F'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Da=(k,h,I={})=>Ot({queryKey:T(()=>["sprint-list",g(k),g(h)]),queryFn:({signal:D})=>Te({url:`sprints/${g(k)}`,method:"GET",signal:D,params:{sprintType:g(h)}}),...I}),Ta=(k,h={})=>{const I=T(()=>!!g(k));return Ot({queryKey:["sprint-cards",k],queryFn:({signal:D})=>Te({url:`sprints/${g(k)}/backlog`,method:"GET",signal:D}),enabled:I,...h})},Va=(k,h={})=>Ot({queryKey:["sprint-kanban",k],queryFn:({signal:I})=>Te({url:"workspace/cards/sprintgrouped",method:"GET",signal:I,params:{sprint_id:g(k),variable_id:"68b6c96e0a95eef7d14e6981"}}),...h}),La=(k,h={})=>kt({key:["sprint-complete"]},{mutationFn:I=>Te({url:`sprints/${g(k)}/complete`,method:"POST",data:I.payload}),...h}),Aa=(k,h={})=>{const I=T(()=>!!g(k));return Ot({queryKey:["sprint-detail",k],queryFn:({signal:D})=>Te({url:`sprints/detail/${g(k)}?include_cards=true`,method:"GET",signal:D}),enabled:I,...h})},cl=(k,h,I=null,D={})=>Ot({queryKey:["backlog-list",k,g(h),g(I)],queryFn:({signal:Q})=>Te({url:`sprints/workspace/${g(k)}/cards`,method:"GET",signal:Q,params:{include_sprint_cards:!1,sprintType:g(h),module_id:g(I)}}),...D}),Ea=(k={})=>kt({key:["add-sprint"]},{mutationFn:h=>Te({url:"/sprints",method:"POST",data:h.payload}),...k}),Gl=(k={})=>kt({key:["move-card-to-sprint"]},{mutationFn:h=>Te({url:`/sprints/${h.id}/cards`,method:"POST",data:h.payload}),...k}),Nl=(k={})=>kt({key:["add-sprint"]},{mutationFn:h=>Te({url:`/sprints/${h.id}`,method:"PUT",data:h.payload}),...k}),Ma=(k={})=>kt({key:["start-sprint"]},{mutationFn:h=>Te({url:`/sprints/${h.id}/start`,method:"POST",data:h.payload}),...k}),Fa=(k={})=>kt({key:["delete-sprint"]},{mutationFn:h=>Te({url:`/sprints/${h}`,method:"DELETE"}),...k}),Ba=(k={})=>kt({key:["remove-card-from-sprint"]},{mutationFn:h=>Te({url:`sprints/${g(h.sprintId)}/cards/remove `,method:"POST",data:{card_ids:[h.cardId]}}),...k}),Jl="jira-like:";function Ol(k="id"){return`${k}_${Math.random().toString(36).slice(2,9)}`}function ql(k,h){try{localStorage.setItem(Jl+k,JSON.stringify(h))}catch{}}function Ul(k,h){try{const I=localStorage.getItem(Jl+k);return I?JSON.parse(I):h}catch{return h}}function Ia(k){switch(k){case"Highest":return"rounded-md bg-red-50 px-2 py-0.5 text-xs text-red-700";case"High":return"rounded-md bg-orange-50 px-2 py-0.5 text-xs text-orange-700";case"Medium":return"rounded-md bg-amber-50 px-2 py-0.5 text-xs text-amber-700";case"Low":return"rounded-md bg-gray-100 px-2 py-0.5 text-xs text-gray-600"}}function Na(){const k=b(Ul("backlog",[])),h=b(Ul("sprints",[]));if(h.value.length===0)h.value.push({id:Ol("sprint"),name:"Sprint 1",goal:"",start:"",end:"",started:!1,tickets:[]});else if(h.value.length>1){for(let d=1;d<h.value.length;d++)k.value.push(...h.value[d].tickets);h.value=[h.value[0]]}const I=b(h.value[0].id);j([k,h],()=>{ql("backlog",k.value),ql("sprints",h.value)},{deep:!0});const D=b([]),Q=ht({}),O=T(()=>k.value.length>0&&D.value.length===k.value.length),i=d=>{var o;const p=h.value.find(s=>s.id===d);return!!p&&p.tickets.length>0&&(((o=Q[d])==null?void 0:o.length)||0)===p.tickets.length};function N(d,p,o){const s=p.target.checked;if(d==="backlog")D.value=s?k.value.map(c=>c.id):[];else if(o){const c=h.value.find(x=>x.id===o);Q[o]=s&&c?c.tickets.map(x=>x.id):[]}}function P(d,p,o,s){const c=o.target.checked,x=d==="backlog"?D.value:Q[s]||(Q[s]=[]);if(c&&!x.includes(p)&&x.push(p),!c){const te=x.indexOf(p);te>=0&&x.splice(te,1)}}function W(){return h.value.find(d=>d.id===I.value)||h.value[0]}function U(){const p=[...k.value,...h.value.flatMap(s=>s.tickets)].map(s=>Number(String(s.key).replace(/[^0-9]/g,""))).filter(s=>!Number.isNaN(s));return`PRJ-${p.length?Math.max(...p)+1:1}`}const{mutate:A}=Gl({onSuccess:()=>{Ct.success("Cards moved to sprint successfully")},onError:d=>{Ct.error("Failed to move cards: "+(d.message||"Unknown error"))}});function X(){var s,c;const d=W();if(!d||!D.value.length)return;const p=[],o=[];for(const x of k.value)(D.value.includes(x.id)?o:p).push(x);k.value=p,d.tickets.push(...o),D.value=[],o.length>0&&A({id:d.id,payload:{card_ids:o.map(x=>x.id),priority:((c=(s=o[0])==null?void 0:s.priority)==null?void 0:c.toLowerCase())||"medium",story_points:o.reduce((x,te)=>x+(te.storyPoints||0),0)}})}function K(d){const p=h.value.find(x=>x.id===d);if(!p)return;const o=Q[d]||[],s=[],c=[];for(const x of p.tickets)(o.includes(x.id)?c:s).push(x);p.tickets=s,k.value.push(...c),Q[d]=[]}function ie(d,p){if(d==="backlog")k.value=k.value.filter(o=>!D.value.includes(o.id)),D.value=[];else if(p){const o=Q[p]||[],s=h.value.find(c=>c.id===p);if(!s)return;s.tickets=s.tickets.filter(c=>!o.includes(c.id)),Q[p]=[]}}function z(d,p){const o={id:Ol("T"),key:U(),createdAt:new Date().toISOString(),...p};if(d==="backlog")k.value.push(o);else{const s=W();s==null||s.tickets.push(o)}}function R(d){const p=W();p&&(p.name=d.name??p.name,p.goal=d.goal??p.goal,p.start=d.start??p.start,p.end=d.end??p.end)}function B(){const d=W();d&&(d.started=!d.started)}function $(d){return d.tickets.reduce((p,o)=>p+(o.storyPoints||0),0)}return{backlog:k,sprints:h,activeSprintId:I,selectedBacklogIds:D,selectedSprintIds:Q,allBacklogChecked:O,allSprintChecked:i,toggleAll:N,toggleOne:P,getActiveSprint:W,createTicket:z,saveSprintMeta:R,toggleStartSprint:B,sprintPoints:$,moveSelectedToSprint:X,moveSelectedToBacklog:K,deleteSelected:ie,priorityClass:Ia}}const Oa={class:"h-full min-h-0 mt-2 overflow-y-hidden"},qa={key:0,class:"empty-state flex flex-col justify-center items-center h-full"},Ua=["disabled"],Pa={key:1,class:"overflow-y-auto h-[calc(100%-50px)]"},ja={class:"flex flex-col flex-1 gap-[4px] min-w-0 me-1"},za={key:0,class:"flex items-center justify-center py-10"},Ra=["onDragstart","onClick"],Ha=["checked","onChange"],Wa={class:"flex items-center text-[14px] font-sans font-medium capitalize text-text-secondary flex-1 min-w-0"},Ka={class:"truncate"},Qa={class:"flex-shrink-0"},Ga={key:0,class:"flex justify-center text-gray-500 items-center text-[11px] aspect-square w-[24px] h-[24px] bg-bg-body rounded-full border-border-input border-2"},Ja={key:1,class:"w-6 h-6 rounded-full"},Za=["src"],Xa={key:2,class:"text-[11px] aspect-square w-[24px] h-[24px] flex justify-center items-center bg-accent/30 text-accent border-accent border rounded-full"},Ya=wt({__name:"BacklogTable",props:{searchQuery:{type:String,default:""},sprintType:{type:String,default:""},checkedAll:{type:Boolean,default:!1},moduleId:{type:String,default:""}},emits:["ticket-dragged-to-sprint","open-ticket","ticket-moved-to-backlog","open-create-ticket"],setup(k,{emit:h}){const{isDark:I}=pl(),{canCreateCard:D}=fl(),Q=h,O=k,{workspaceId:i}=Pl(),N=b(O.moduleId??null),{data:P,isPending:W}=cl(i,O.sprintType,N),U=b([]),A=b(!1),X=b([]),K=b([]);j(P,o=>{o!=null&&o.cards&&(U.value=o.cards.map(s=>{var E,ke,be,He;const c=((E=s.card)==null?void 0:E.variables)??{},x=((ke=s.card)==null?void 0:ke._id)??s.card_id,te=String(c["card-status"]??"").trim(),_=String(c.priority??"").trim();return{id:x,key:c["card-code"]||(x==null?void 0:x.slice(-6))||"PRJ-?",summary:c["card-title"]||"(untitled)",type:"Story",status:te,assignee:((be=s.card)==null?void 0:be.assigned_to)??"Unassigned",storyPoints:Number(s.story_points??0)||0,priority:z(_),createdAt:((He=s.card)==null?void 0:He.created_at)??new Date().toISOString(),description:c["card-description"]||""}}))},{immediate:!0}),j(U,o=>{const s=new Set(o.map(c=>c.id));K.value=K.value.filter(c=>s.has(c))});const ie=T(()=>{if(console.log(O.searchQuery,"this is query"),!O.searchQuery)return U.value;const o=O.searchQuery.toLowerCase();return U.value.filter(s=>{var x;const c=typeof s.assignee=="string"?s.assignee:((x=s.assignee)==null?void 0:x.u_full_name)||"";return s.key.toLowerCase().includes(o)||s.summary.toLowerCase().includes(o)||c.toLowerCase().includes(o)})});function z(o){const s=String(o??"").toLowerCase();return["highest","blocker","critical"].includes(s)?"Highest":["high","major"].includes(s)?"High":["medium","normal"].includes(s)?"Medium":"Low"}function R(o,s,c){var E;const x=K.value.includes(s.id)?[...K.value]:[s.id],te=x.map(ke=>U.value.find(be=>be.id===ke)).filter(Boolean);X.value=x;const _=JSON.stringify({id:s.id,ids:x,from:c,tickets:te});(E=o.dataTransfer)==null||E.setData("text/plain",_),o.dataTransfer&&(o.dataTransfer.effectAllowed="move")}function B(o){var s;A.value=!1,((s=o.dataTransfer)==null?void 0:s.dropEffect)!=="none"&&X.value.length&&(U.value=U.value.filter(c=>!X.value.includes(c.id)),K.value=K.value.filter(c=>!X.value.includes(c))),X.value=[]}function $(o){var s;o.preventDefault(),A.value=!1;try{const c=(s=o.dataTransfer)==null?void 0:s.getData("text/plain");if(!c)return;const x=JSON.parse(c);if(x.from!=="sprint")return;const _=(x.tickets&&x.tickets.length?x.tickets:x.ticket?[x.ticket]:[]).filter(Boolean).filter(ke=>!U.value.some(be=>be.id===ke.id));_.length&&U.value.push(..._);const E=x.ids&&x.ids.length?x.ids:x.id?[x.id]:[];E.length&&Q("ticket-moved-to-backlog",E,x.sprintId),console.log(x.sprintId,"sprintId ....")}catch(c){console.error("Drop error:",c)}}function d(o,s){s?K.value.includes(o)||K.value.push(o):K.value=K.value.filter(c=>c!==o)}function p(o,s){const c=s.target.checked;d(o,c)}return j(()=>O.checkedAll,o=>{o?(K.value=U.value.map(s=>s.id),console.log(K.value)):K.value=[]}),(o,s)=>(u(),m("section",Oa,[t("div",{class:J(["rounded-lg flex flex-col h-full",A.value?"ring-2 ring-blue-400":""]),onDragover:s[3]||(s[3]=De(()=>{},["prevent"])),onDragenter:s[4]||(s[4]=c=>A.value=!0),onDragleave:s[5]||(s[5]=c=>A.value=!1),onDrop:s[6]||(s[6]=c=>$(c))},[!g(W)&&ie.value.length===0?(u(),m("div",qa,[s[7]||(s[7]=t("img",{src:$a,class:"mb-4",alt:"backlog-plan"},null,-1)),s[8]||(s[8]=t("h6",{class:"text-sm text-text-primary font-semibold mb-1"}," Get started in the backlog ",-1)),s[9]||(s[9]=t("p",{class:"text-sm text-text-primary/90 mb-4"}," Plan and start a sprint to see issues here. ",-1)),t("button",{disabled:!g(D),onClick:s[0]||(s[0]=c=>o.$emit("open-create-ticket")),class:J(["relative inline-flex items-center justify-center font-medium py-1.5 px-3 text-sm rounded-md focus:outline-none transition h-[34px] bg-accent text-white hover:bg-accent-hover border-border-input border",g(D)?"cursor-pointer":"cursor-not-allowed"])}," Create Ticket ",10,Ua)])):(u(),m("div",Pa,[t("div",ja,[g(W)?(u(),m("div",za,[q(va)])):(u(!0),m(ge,{key:1},he(ie.value,c=>{var x,te;return u(),m("div",{key:c.id,draggable:"true",class:J(["flex items-center gap-3 p-[8px] cursor-pointer transition-colors rounded-[8px]",K.value.includes(c.id)?"border-2 border-[#5a2d7f]":"border border-border-input",g(I)?"bg-bg-body hover:bg-bg-surface":"bg-bg-charcoal hover:bg-bg-body"]),onDragstart:_=>R(_,c,"backlog"),onDragend:s[2]||(s[2]=_=>B(_)),onClick:_=>o.$emit("open-ticket",c)},[t("input",{type:"checkbox",class:"custom-checkbox bg-bg-body border border-border-input flex-shrink-0",checked:K.value.includes(c.id),onClick:s[1]||(s[1]=De(()=>{},["stop"])),onChange:_=>p(c.id,_)},null,40,Ha),t("div",Wa,[t("span",Ka,L(c.summary),1)]),t("div",Qa,[(c==null?void 0:c.assignee)==="Unassigned"?(u(),m("span",Ga," UA ")):(x=c==null?void 0:c.assignee)!=null&&x.u_profile_image?(u(),m("div",Ja,[t("img",{src:c.assignee.u_profile_image,alt:""},null,8,Za)])):(u(),m("span",Xa,L(g(vl)((te=c==null?void 0:c.assignee)==null?void 0:te.u_full_name)),1))])],42,Ra)}),128))])]))],34)]))}}),es=ll(Ya,[["__scopeId","data-v-cd65d75f"]]),ts="data:image/svg+xml,%3csvg%20width='60'%20height='60'%20viewBox='0%200%2060%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M9.375%2030C11.6402%2030%2013.4766%2028.1637%2013.4766%2025.8984C13.4766%2023.6332%2011.6402%2021.7969%209.375%2021.7969C7.10977%2021.7969%205.27344%2023.6332%205.27344%2025.8984C5.27344%2028.1637%207.10977%2030%209.375%2030Z'%20fill='%23AE2A19'/%3e%3cpath%20d='M26.25%2024.375C28.5152%2024.375%2030.3516%2022.5387%2030.3516%2020.2734C30.3516%2018.0082%2028.5152%2016.1719%2026.25%2016.1719C23.9848%2016.1719%2022.1484%2018.0082%2022.1484%2020.2734C22.1484%2022.5387%2023.9848%2024.375%2026.25%2024.375Z'%20fill='%23BF63F3'/%3e%3cpath%20d='M15.3931%2035.8594H11.0159V33.0938C9.93587%2033.3387%208.81469%2033.3387%207.73465%2033.0938V35.8594H1.87528C1.55115%2035.8601%201.2345%2035.9568%200.965283%2036.1373C0.696064%2036.3178%200.486343%2036.574%200.362583%2036.8736C0.238824%2037.1731%200.206573%2037.5027%200.269899%2037.8205C0.333226%2038.1384%200.489292%2038.4304%200.718404%2038.6597L7.05872%2045L0.718404%2051.3403C0.489292%2051.5696%200.333226%2051.8616%200.269899%2052.1795C0.206573%2052.4973%200.238824%2052.8269%200.362583%2053.1264C0.486343%2053.426%200.696064%2053.6822%200.965283%2053.8627C1.2345%2054.0432%201.55115%2054.1399%201.87528%2054.1406H15.3931L21.7503%2045L15.3931%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M34.4562%2035.8594H27.8937V27.4688C26.8137%2027.7138%2025.6925%2027.7138%2024.6125%2027.4688V35.8594H19.3896L25.7487%2045L19.3896%2054.1406H34.4562L40.8143%2045L34.4562%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M43.8281%2019.6875H55.3125C55.7475%2019.6873%2056.1647%2019.5143%2056.4723%2019.2067C56.7799%2018.8991%2056.9529%2018.4819%2056.9531%2018.0469V9.375C56.9529%208.93996%2056.7799%208.5228%2056.4723%208.21518C56.1647%207.90755%2055.7475%207.73462%2055.3125%207.73438H43.8281V7.5C43.8281%207.06488%2043.6553%206.64758%2043.3476%206.3399C43.0399%206.03223%2042.6226%205.85938%2042.1875%205.85938C41.7524%205.85938%2041.3351%206.03223%2041.0274%206.3399C40.7197%206.64758%2040.5469%207.06488%2040.5469%207.5V32.5781H43.8281V19.6875Z'%20fill='%23FCA700'/%3e%3cpath%20d='M59.2843%2043.8403L51.7843%2036.3403C51.6322%2036.1878%2051.4514%2036.0668%2051.2524%2035.9842C51.0534%2035.9017%2050.8401%2035.8593%2050.6246%2035.8594H38.4521L44.8121%2045L38.4531%2054.1406H50.6246C50.8401%2054.1407%2051.0534%2054.0983%2051.2524%2054.0158C51.4514%2053.9332%2051.6322%2053.8122%2051.7843%2053.6597L59.2843%2046.1597C59.4368%2046.0075%2059.5577%2045.8267%2059.6402%2045.6277C59.7228%2045.4287%2059.7652%2045.2154%2059.7652%2045C59.7652%2044.7846%2059.7228%2044.5713%2059.6402%2044.3723C59.5577%2044.1733%2059.4368%2043.9925%2059.2843%2043.8403Z'%20fill='%2382B536'/%3e%3c/g%3e%3c/svg%3e",ls={class:"h-full min-h-0 px-2"},as={key:0,class:"overflow-y-auto h-[calc(100%-50px)]"},ss={class:"flex flex-col flex-1 gap-[4px] min-w-0 me-1"},ns=["onDragstart","onClick"],os=["checked","onChange"],rs={class:"flex items-center text-[14px] font-sans font-medium capitalize text-text-secondary flex-1 min-w-0"},is={class:"truncate"},ds={class:"flex-shrink-0"},us={key:0,class:"flex justify-center text-gray-500 items-center text-[11px] aspect-square w-[24px] h-[24px] bg-bg-body rounded-full border-border-input border-2"},cs={key:1,class:"w-6 h-6 rounded-full"},ps=["src"],fs={key:2,class:"text-[11px] aspect-square w-[24px] flex justify-center items-center h-[24px] bg-accent/30 text-accent border-accent border rounded-full"},vs={key:1,class:"empty-state flex flex-col justify-center items-center border-dashed border-3 p-2 border-border h-[calc(100%-50px)] min-h-0"},ms={class:"text-sm text-text-primary font-semibold mb-1 text-center"},gs={class:"text-sm text-text-primary/90 mb-3 max-w-120 text-center"},bs={class:"font-bold"},ys=wt({__name:"SprintCard",props:{sprint:{},sprintId:{},searchQuery:{},checkedSprintAll:{type:Boolean},searchedData:{},label:{}},emits:["edit-sprint","toggle-start","open-ticket","move-selected-to-backlog","delete-selected-sprint","refresh"],setup(k,{emit:h}){const{isDark:I}=pl(),D=k,Q=h,O=b([]),i=b([]);j(()=>D.sprint&&D.sprint.tickets,$=>{O.value=[...$||[]];const d=new Set(O.value.map(p=>p.id));i.value=i.value.filter(p=>d.has(p))},{immediate:!0,deep:!0});const N=T(()=>{var d,p;if((d=D.searchedData)!=null&&d.length)return O.value.filter(o=>D.searchedData.some(s=>s.card_id===o.id));const $=((p=D.searchQuery)==null?void 0:p.toLowerCase())||"";return $?O.value.filter(o=>{var c;const s=((c=o.assignee)==null?void 0:c.u_full_name)??"";return o.key.toLowerCase().includes($)||o.summary.toLowerCase().includes($)||s.toLowerCase().includes($)}):O.value}),P=b(!1),W=b([]),{mutate:U}=Gl({onSuccess:()=>{Ct.success("Card moved to sprint successfully"),Q("refresh")},onError:$=>{Ct.error("Failed to move card: "+($.message||"Unknown error"))}});function A($,d,p,o){var te;const s=i.value.includes(d.id)?[...i.value]:[d.id],c=s.map(_=>O.value.find(E=>E.id===_)).filter(Boolean);W.value=s;const x=JSON.stringify({id:d.id,ids:s,from:p,sprintId:o,ticket:d,tickets:c});(te=$.dataTransfer)==null||te.setData("text/plain",x),$.dataTransfer&&($.dataTransfer.effectAllowed="move")}function X($){var d;P.value=!1,((d=$.dataTransfer)==null?void 0:d.dropEffect)!=="none"&&W.value.length&&(O.value=O.value.filter(p=>!W.value.includes(p.id)),i.value=i.value.filter(p=>!W.value.includes(p))),W.value=[]}function K(){P.value=!0}function ie(){P.value=!1}function z($){var d;$.preventDefault(),P.value=!1;try{const p=(d=$.dataTransfer)==null?void 0:d.getData("text/plain");if(!p)return;const o=JSON.parse(p);if(o.from!=="backlog")return;const c=(o.tickets&&o.tickets.length?o.tickets:o.ticket?[o.ticket]:[]).filter(Boolean).filter(x=>!O.value.some(te=>te.id===x.id));if(!c.length)return;O.value.push(...c),c.forEach(x=>{U({id:D.sprintId,payload:{card_ids:[x.id],priority:(x.priority||"Medium").toLowerCase(),story_points:x.storyPoints||0}})})}catch(p){console.error("Drop error:",p)}}function R($,d){d?i.value.includes($)||i.value.push($):i.value=i.value.filter(p=>p!==$)}function B($,d){const p=d.target.checked;R($,p)}return j(()=>D.checkedSprintAll,$=>{$?(i.value=N.value.map(d=>d.id),console.log(N.value)):i.value=[]}),($,d)=>(u(),m("div",ls,[t("div",{class:J([P.value?"ring-2 ring-blue-400 rounded-lg":"","h-full box-border mt-3"]),onDragover:d[2]||(d[2]=De(()=>{},["prevent"])),onDragenter:K,onDragleave:ie,onDrop:z},[N.value.length>0&&$.sprint?(u(),m("div",as,[t("div",ss,[(u(!0),m(ge,null,he(N.value,p=>{var o,s;return u(),m("div",{key:p.id,draggable:"true",class:J(["flex items-center  gap-3 p-[8px] cursor-pointer transition-colors rounded-[8px]",i.value.includes(p.id)?"border-2 border-[#5a2d7f]":"border border-border-input",g(I)?"bg-bg-body hover:bg-bg-surface":"bg-bg-charcoal hover:bg-bg-body"]),onDragstart:c=>A(c,p,"sprint",$.sprint.id),onDragend:d[1]||(d[1]=c=>X(c)),onClick:c=>$.$emit("open-ticket",p)},[t("input",{type:"checkbox",class:J(["custom-checkbox border border-border-input flex-shrink-0",g(I)?"bg-bg-charcoal":"bg-bg-body "]),checked:i.value.includes(p.id),onClick:d[0]||(d[0]=De(()=>{},["stop"])),onChange:c=>B(p.id,c)},null,42,os),t("div",rs,[t("span",is,L(p.summary),1)]),t("div",ds,[(p==null?void 0:p.assignee)=="Unassigned"?(u(),m("span",us,"UA")):(o=p.assignee)!=null&&o.u_profile_image?(u(),m("div",cs,[t("img",{src:p.assignee.u_profile_image,alt:""},null,8,ps)])):(u(),m("span",fs,L(g(vl)(((s=p.assignee)==null?void 0:s.u_full_name)??"")),1))])],42,ns)}),128))])])):(u(),m("div",vs,[d[6]||(d[6]=t("img",{src:ts,class:"mb-4",alt:"backlog-plan"},null,-1)),t("h6",ms," Plan your "+L($.label),1),t("p",gs,[d[3]||(d[3]=ae(" Drag work items from the ")),d[4]||(d[4]=t("span",{class:"font-bold"},"Backlog",-1)),ae(" section or create new ones to plan the work for this "+L($.label)+". Select ",1),t("span",bs,"Start "+L($.label),1),d[5]||(d[5]=ae(" when you're ready. "))])]))],34)]))}}),xs=ll(ys,[["__scopeId","data-v-60fe4c29"]]),_s={class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-input pb-4"},hs={class:"text-xl font-semibold"},ks={class:"px-6 gap-4 bg-bg-input pt-5 pb-8"},ws={class:"mt-3"},Cs={class:"flex justify-end gap-2 p-6 sticky bottom-0 bg-bg-input border-t border-border"},Ss=wt({__name:"SprintModal",props:{modelValue:{type:Boolean,default:!1},lable:{},sprint:{},creatingSprint:{type:Boolean},sprints:{}},emits:["update:modelValue","save","close"],setup(k,{emit:h}){const I=h,D=k,Q=T(()=>D.lable?D.lable.charAt(0).toUpperCase()+D.lable.slice(1):""),O=T({get:()=>D.modelValue,set:R=>I("update:modelValue",R)}),i=ht({name:"",sprintType:"",description:""}),N=ht({name:!1,sprintType:!1,description:!1}),P=T(()=>N.name&&!String(i.name||"").trim()?"Name is required":""),W=T(()=>!!String(i.name||"").trim()&&!P.value);function U(){O.value=!1,I("close")}function A(){N.name=!0,W.value&&I("save",{name:String(i.name||"").trim(),value:String(D.lable||"").trim(),description:String(i.description||"").trim()})}function X(){N.name=!1,N.sprintType=!1,N.description=!1}j(()=>D.sprint,R=>{if(!R){i.name="",i.sprintType=null;return}i.name="",i.description="",i.sprintType=R.sprintType??null,X()},{immediate:!0});const K=[{title:"Milestone",_id:"milestone",dot:"#2e9bda"},{title:"Sprint",_id:"sprint",dot:"#7d68c8"},{title:"Huddle",_id:"huddle",dot:"#eea832"}],ie=T(()=>K.map(R=>({...R})));j(()=>D.lable,R=>{const B=ie.value.find($=>$.title===R);i.sprintType=(B==null?void 0:B._id)??""},{immediate:!0});function z(){const R=D.sprints||[],B=D.lable||"Sprint",$=B.charAt(0).toUpperCase()+B.slice(1);i.name=`${$} ${R.length+1}`}return j(()=>D.sprints,()=>{(!i.name||i.name.trim()==="")&&z()},{immediate:!0,deep:!0}),(R,B)=>(u(),fe(ml,{modelValue:O.value,"onUpdate:modelValue":B[3]||(B[3]=$=>O.value=$),modalClass:"!py-0",size:"md"},{default:re(()=>[t("div",_s,[t("h2",hs,"Add New "+L(R.lable),1)]),t("div",ks,[q(gl,{class:"rounded-1",modelValue:i.name,"onUpdate:modelValue":B[0]||(B[0]=$=>i.name=$),label:"Name",placeholder:R.lable,error:!!P.value,message:P.value,onBlur:B[1]||(B[1]=$=>N.name=!0)},null,8,["modelValue","placeholder","error","message"]),t("div",ws,[q(ma,{modelValue:i.description,"onUpdate:modelValue":B[2]||(B[2]=$=>i.description=$),label:"Description",placeholder:`${Q.value} description...`,type:"textarea",rows:4},null,8,["modelValue","placeholder"])]),B[4]||(B[4]=t("div",null,null,-1))]),t("div",Cs,[q(Re,{variant:"secondary",onClick:U},{default:re(()=>B[5]||(B[5]=[ae("Cancel")])),_:1,__:[5]}),q(Re,{variant:"primary",disabled:!W.value,onClick:A},{default:re(()=>[ae(L(R.creatingSprint?"Saving...":"Save"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue"]))}}),$s="/assets/filter-JX25xO5j.svg",Ds={class:"sticky top-0 z-10 flex justify-between items-center py-6 px-6 border-b border-border bg-bg-input"},Ts={class:"text-xl font-semibold"},Vs={class:"px-6 grid grid-cols-2 gap-4 bg-bg-input pt-5"},Ls={class:"flex flex-col col-span-2"},As={class:"flex flex-col col-span-2"},Es={class:"flex gap-1 flex-col col-span-2 sm:col-span-1"},Ms={key:0,class:"text-xs text-red-500"},Fs={class:"flex gap-1 flex-col col-span-2 sm:col-span-1"},Bs={key:0,class:"text-xs text-red-500"},Is={class:"flex flex-col col-span-2"},Ns={class:"flex flex-col col-span-2"},Os={class:"bg-bg-body wfull px-4 py-3 rounded-lg text-xs text-text-secondary"},qs={class:"flex justify-end gap-2 p-6 sticky bottom-0 bg-bg-input"},Us=wt({__name:"StartSprintModal",props:{modelValue:{type:Boolean,default:!1},sprint:{},creatingSprint:{type:Boolean},sprintType:{}},emits:["update:modelValue","save","close"],setup(k,{emit:h}){const I=h,D=k,Q=[{_id:1,title:"1 Week"},{_id:2,title:"2 Weeks"},{_id:3,title:"3 Weeks"},{_id:4,title:"4 Weeks"},{_id:5,title:"Custom"}],O=T({get:()=>D.modelValue,set:o=>I("update:modelValue",o)}),i=ht({goal:"",start:new Date().toISOString().slice(0,10),end:"",sprint_name:"",duration:null}),N=T(()=>D.sprintType?D.sprintType.charAt(0).toUpperCase()+D.sprintType.slice(1):""),P=ht({start:!1,end:!1}),W=T(()=>!i.start&&P.start?"Start date is required":""),U=T(()=>{if(!i.end&&P.end)return"End date is required";if(i.start&&i.end){const o=B(i.start),s=B(i.end);if(Number.isFinite(o)&&Number.isFinite(s)&&s<o)return"End date cannot be before start date"}return""}),A=T(()=>!W.value&&!U.value);function X(o){i.start=o||"",P.start=!0}function K(o){i.end=o||"",P.end=!0}function ie(){O.value=!1,i.duration=null,I("close")}function z(){P.start=!0,P.end=!0,A.value&&I("save",{title:i.sprint_name||"new sprint",duration:String(p.value)||null,start:i.start||"",end:i.end||"",goal:i.goal??""})}function R(){P.start=!1,P.end=!1}function B(o){return o?new Date(`${o}T00:00:00`).getTime():NaN}const $=T(()=>i.duration===5);j(()=>i.duration,o=>{if(!o)return;const s=typeof o=="object"?o._id:o;if(s!==5&&i.start){const c=d(i.start,s*7);i.end=c}}),j(()=>i.start,o=>{o&&(i.duration&&i.duration!==5&&(i.end=d(i.start,i.duration*7)),i.end&&B(i.end)<B(i.start)&&(i.end=i.start))});function d(o,s){const c=new Date(o);return c.setDate(c.getDate()+s),c.toISOString().slice(0,10)}const p=T(()=>!i.start||!i.end?0:i.duration!==5?i.duration*7:(B(i.end)-B(i.start))/864e5);return j(()=>D.sprint,o=>{if(!o){i.start=new Date().toISOString().slice(0,10),i.end="",i.sprint_name="",i.goal="",R();return}i.goal=o.goal??"",i.start=o.start??new Date().toISOString().slice(0,10),i.end=o.end??"",i.sprint_name=o.title??"",R()},{immediate:!0}),(o,s)=>(u(),fe(ml,{modelValue:O.value,"onUpdate:modelValue":s[3]||(s[3]=c=>O.value=c),modalClass:"!py-0",size:"md"},{default:re(()=>[t("div",Ds,[t("h2",Ts,"Start "+L(o.sprintType),1),t("span",{onClick:ie,class:"text-sm text-text-secondary cursor-pointer"},s[4]||(s[4]=[t("i",{class:"fa-solid fa-xmark text-text-primary text-[19px]"},null,-1)]))]),t("div",Vs,[t("div",Ls,[q(gl,{modelValue:i.sprint_name,"onUpdate:modelValue":s[0]||(s[0]=c=>i.sprint_name=c),label:`${N.value} Name`,placeholder:`Enter ${o.sprintType} name`,size:"md",class:"rounded-1"},null,8,["modelValue","label","placeholder"])]),t("div",As,[q(ul,{modelValue:i.duration,"onUpdate:modelValue":s[1]||(s[1]=c=>i.duration=c),options:Q,label:"Duration",placeholder:"Select duration"},null,8,["modelValue"])]),t("div",Es,[s[6]||(s[6]=t("label",{class:"text-sm font-medium"},"Start date",-1)),t("div",{class:J(["border relative flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",W.value?"border-red-500":""])},[q(Nt,{placeholder:"Set start date",class:"w-full z-1","model-value":i.start,"emit-as":"ymd","onUpdate:modelValue":X},null,8,["model-value"]),s[5]||(s[5]=t("i",{class:"fa-regular fa-calendar absolute right-2 top-3 z-0"},null,-1))],2),W.value?(u(),m("p",Ms,L(W.value),1)):F("",!0)]),t("div",Fs,[s[7]||(s[7]=t("label",{class:"text-sm font-medium"},"End date",-1)),t("div",{class:J(["border relative flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",U.value?"border-red-500":""])},[q(Nt,{placeholder:"Set end date",class:"w-full","model-value":i.end,"emit-as":"ymd",disabled:!$.value,"onUpdate:modelValue":K,"min-date":i.start},null,8,["model-value","disabled","min-date"]),t("i",{class:J(["fa-regular fa-calendar absolute right-2 top-3 z-0",{"text-text-secondary/30 pointer-events-none":!$.value,"text-text-primary":$.value}])},null,2)],2),U.value?(u(),m("p",Bs,L(U.value),1)):F("",!0)]),t("div",Is,[s[8]||(s[8]=t("label",{class:"text-sm font-medium pb-1"},"Goal (optional)",-1)),ot(t("textarea",{"onUpdate:modelValue":s[2]||(s[2]=c=>i.goal=c),class:"w-full text-sm rounded-md border border-border px-3 py-2 bg-bg-input",rows:"2",placeholder:"Ship onboarding flow"},null,512),[[bl,i.goal]])]),t("div",Ns,[t("p",Os," Duration: "+L(i.start?p.value+" days":""),1)])]),t("div",qs,[q(Re,{variant:"secondary",onClick:ie},{default:re(()=>s[9]||(s[9]=[ae("Cancel")])),_:1,__:[9]}),q(Re,{variant:"primary",disabled:!A.value,onClick:z},{default:re(()=>[ae(L(o.creatingSprint?"Starting...":"Start"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue"]))}}),Ps={class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-body pb-4 mb-4"},js={class:"text-sm text-text-secondary mt-1"},zs={class:"flex items-center gap-2 mt-4 w-full"},Rs={class:"flex items-center gap-2 flex-1"},Hs={class:"px-6 min-h-[400px]"},Ws={key:0},Ks={key:0,class:"flex items-center justify-center py-12"},Qs={key:1,class:"text-center py-12 text-text-secondary"},Gs={key:2,class:"grid grid-cols-2 gap-3"},Js=["onClick"],Zs={class:"flex items-center gap-3"},Xs={class:"w-10 h-10 rounded-lg bg-bg-input flex items-center justify-center group-hover:bg-primary/10 transition-colors"},Ys={class:"font-medium"},en={key:1},tn={key:0,class:"flex items-center justify-center py-12"},ln={key:1,class:"text-center py-12 text-text-secondary"},an={key:2,class:"grid grid-cols-2 gap-3"},sn=["onClick"],nn={class:"flex items-center gap-3"},on={class:"w-10 h-10 rounded-lg bg-bg-input flex items-center justify-center group-hover:bg-primary/10 transition-colors"},rn={class:"font-medium"},dn={key:2},un={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},cn={key:0,class:"flex flex-col"},pn={class:"flex gap-1 flex-col"},fn={key:0,class:"text-xs text-red-500"},vn={class:"flex gap-1 flex-col"},mn={key:0,class:"text-xs text-red-500"},gn={class:"flex flex-col gap-1"},bn={class:"mt-2"},yn={class:"mt-4"},xn={key:0,class:"text-xs text-red-500 mt-1 px-1"},_n={class:"flex justify-between gap-2 p-6 mt-8 sticky bottom-0 bg-bg-body border-t border-border"},hn={key:1},kn={class:"flex gap-2"},wn=wt({__name:"CreateBacklogTicketWithModuleSelection",props:{modelValue:{type:Boolean,default:!1},listId:{},selectedVariable:{}},emits:["update:modelValue","created"],setup(k,{emit:h}){const I=h,D=k,Q=yl(),{workspaceId:O}=jl(),i=b(1),N=b(null),P=b(null),{data:W,isLoading:U}=zl(O.value),A=T(()=>{var y;return((y=W.value)==null?void 0:y.modules)||[]}),{data:X,isFetching:K,refetch:ie}=Rl({workspace_module_id:N,workspace_id:O},{enabled:T(()=>!!N.value)});j(()=>N.value,()=>{ie()});const z=T(()=>X.value||[]),{data:R}=Hl(O.value),{data:B}=Wl(O.value,N,{enabled:T(()=>!!N.value)}),{mutate:$,isPending:d}=Kl({onSuccess:()=>{dt(),Q.invalidateQueries({queryKey:["sheet-list"]}),Q.invalidateQueries({queryKey:["backlog-list"]}),p.value=!1}}),p=T({get:()=>D.modelValue,set:y=>I("update:modelValue",y)}),o=T(()=>{switch(i.value){case 1:return"Select a module to create the ticket in";case 2:return"Select a sheet within the module";case 3:return"Provide the ticket details below and click Add Ticket";default:return""}}),s=T(()=>((B==null?void 0:B.value)??[]).filter(y=>{var C;return((C=y==null?void 0:y.type)==null?void 0:C.title)==="Select"})),c=y=>y.map(C=>({_id:C,title:C})),x=T(()=>((R==null?void 0:R.value)??[]).map(y=>{var C;return{_id:y._id,title:((C=y==null?void 0:y.variables)==null?void 0:C["lane-title"])??String(y._id)}})),te=y=>y.slug,_=ht({title:"",description:"",startDate:null,endDate:null,lane_id:null,assignee:null,variables:{}});j(s,y=>{for(const C of y){const S=te(C);S in _.variables||(_.variables[S]=null)}},{immediate:!0});const E=ht({title:!1,description:!1,startDate:!1,endDate:!1,lane:!1}),ke=T(()=>!!_.title.trim()&&!!_.lane_id&&!!_.startDate&&!!_.endDate&&!se.value&&!Ke.value&&!ve.value&&!Ve.value&&!ut.value);function be(y){_.startDate=y,E.startDate=!0}function He(y){_.endDate=y,E.endDate=!0}function St(y){_.lane_id=y,E.lane=!0}function Se(y){_.assignee=y}function We(y){N.value=y._id,i.value=2}function rt(y){P.value=y._id,i.value=3}function it(){i.value>1&&i.value--}function Ee(){p.value=!1,dt()}function dt(){i.value=1,N.value=null,P.value=null,_.title="",_.description="",_.startDate=null,_.endDate=null,_.lane_id=null,_.assignee=null,_.variables={},E.title=!1,E.description=!1,E.startDate=!1,E.endDate=!1,E.lane=!1}const ce=T(()=>{var y;return(y=B==null?void 0:B.value)==null?void 0:y.find(C=>(C==null?void 0:C._id)==D.selectedVariable)}),se=T(()=>E.title&&!_.title.trim()?"Title is required":""),Ke=T(()=>E.startDate?_.startDate?"":"Start date is required":""),ve=T(()=>E.endDate?_.endDate?_.startDate&&_.endDate&&_.endDate<_.startDate?"End date cannot be before start date":"":"End date is required":""),Ve=T(()=>E.lane?_.lane_id?"":"Lane is required":""),ut=T(()=>E.description&&!_.description.trim()?"Description is required":""),le=new Date().toISOString().split("T")[0];function ct(){var C,S;if(E.title=!0,E.lane=!0,E.description=!0,E.startDate=!0,E.endDate=!0,!ke.value||d.value)return;const y={sheet_list_id:D.listId,workspace_id:O.value,sheet_id:P.value,workspace_lane_id:_.lane_id,variables:{..._.variables,[`${(C=ce.value)==null?void 0:C.slug}`]:D.listId,"card-title":_.title.trim(),"card-description":_.description.trim(),"start-date":_.startDate,"end-date":_.endDate},seat_id:((S=_.assignee)==null?void 0:S._id)??null,createdAt:new Date().toISOString()};$(y)}return j(()=>_.title,y=>{y!=null&&y.trim()&&E.title&&(E.title=!1)}),j(()=>_.lane_id,y=>{y&&E.lane&&(E.lane=!1)}),j(()=>_.startDate,y=>{y&&E.startDate&&(E.startDate=!1)}),j(()=>_.endDate,y=>{y&&E.endDate&&(E.endDate=!1)}),j(()=>_.description,y=>{y!=null&&y.trim()&&E.description&&(E.description=!1)}),(y,C)=>(u(),fe(ml,{modelValue:p.value,"onUpdate:modelValue":C[5]||(C[5]=S=>p.value=S),modalClass:"!py-0",size:"lg"},{default:re(()=>[t("div",Ps,[C[6]||(C[6]=t("h2",{class:"text-xl font-semibold"},"Create Backlog Ticket",-1)),t("p",js,L(o.value),1),t("div",zs,[(u(),m(ge,null,he(3,S=>t("div",{key:S,class:"flex items-center flex-1"},[t("div",Rs,[t("div",{class:J(["h-1 flex-1 rounded-full transition-colors",i.value>=S?"bg-primary":"bg-border"])},null,2)])])),64))])]),t("div",Hs,[i.value===1?(u(),m("div",Ws,[C[8]||(C[8]=t("h3",{class:"text-lg font-medium mb-4"},"Select Module",-1)),g(U)?(u(),m("div",Ks,C[7]||(C[7]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):!A.value||A.value.length===0?(u(),m("div",Qs," No modules available ")):(u(),m("div",Gs,[(u(!0),m(ge,null,he(A.value,S=>{var Le,Ne,pt,ft,Z;return u(),m("button",{key:S._id,onClick:ne=>We(S),class:J(["p-4 border rounded-lg hover:border-primary transition-all text-left group",N.value===S._id?"border-primary bg-primary/5":"border-border"])},[t("div",Zs,[t("div",Xs,[t("i",{class:J([`${(Ne=(Le=S==null?void 0:S.variables)==null?void 0:Le["module-icon"])==null?void 0:Ne.prefix} ${(ft=(pt=S==null?void 0:S.variables)==null?void 0:pt["module-icon"])==null?void 0:ft.iconName}`,"text-lg"])},null,2)]),t("div",null,[t("p",Ys,L(((Z=S.variables)==null?void 0:Z["module-title"])||"Untitled"),1)])])],10,Js)}),128))]))])):i.value===2?(u(),m("div",en,[C[10]||(C[10]=t("h3",{class:"text-lg font-medium mb-4"},"Select Sheet",-1)),g(K)?(u(),m("div",tn,C[9]||(C[9]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):!z.value||z.value.length===0?(u(),m("div",ln," No sheets available for this module ")):(u(),m("div",an,[(u(!0),m(ge,null,he(z.value,S=>{var Le,Ne;return u(),m("button",{key:S._id,onClick:pt=>rt(S),class:J(["p-4 border rounded-lg hover:border-primary transition-all text-left group",P.value===S._id?"border-primary bg-primary/5":"border-border"])},[t("div",nn,[t("div",on,[t("i",{class:J(`${(Le=S==null?void 0:S.variables["sheet-icon"])==null?void 0:Le.prefix} ${(Ne=S==null?void 0:S.variables["sheet-icon"])==null?void 0:Ne.iconName} text-lg`)},null,2)]),t("div",null,[t("p",rn,L((S==null?void 0:S.variables["sheet-title"])||"Untitled Sheet"),1)])])],10,sn)}),128))]))])):i.value===3?(u(),m("div",dn,[C[14]||(C[14]=t("h3",{class:"text-lg font-medium mb-4"},"Ticket Details",-1)),t("div",un,[q(gl,{modelValue:_.title,"onUpdate:modelValue":C[0]||(C[0]=S=>_.title=S),label:"Ticket Title",placeholder:"e.g., Implement real-time notifications",error:!!se.value,message:se.value,onBlur:C[1]||(C[1]=S=>E.title=!0)},null,8,["modelValue","error","message"]),x.value.length>0?(u(),m("div",cn,[q(ul,{size:"md",label:"Lane",options:x.value,placeholder:"Select lane",allowCustom:!1,"model-value":_.lane_id,"onUpdate:modelValue":St,error:!!Ve.value,message:Ve.value},null,8,["options","model-value","error","message"])])):F("",!0),(u(!0),m(ge,null,he(s.value,S=>ot((u(),fe(ul,{size:"md",key:te(S),modelValue:_.variables[S.slug],"onUpdate:modelValue":Le=>_.variables[S.slug]=Le,options:c(S.data),label:S.title,placeholder:"Select value",allowCustom:!0},null,8,["modelValue","onUpdate:modelValue","options","label"])),[[tl,(S==null?void 0:S._id)!=y.selectedVariable]])),128)),t("div",pn,[C[11]||(C[11]=t("label",{class:"text-sm"},"Start date",-1)),t("div",{class:J(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",Ke.value?"border-red-500":""])},[q(Nt,{placeholder:"Set start date",class:"w-full","model-value":_.startDate,"emit-as":"ymd","onUpdate:modelValue":be,"min-date":g(le)},null,8,["model-value","min-date"])],2),Ke.value?(u(),m("p",fn,L(Ke.value),1)):F("",!0)]),t("div",vn,[C[12]||(C[12]=t("label",{class:"text-sm"},"End date",-1)),t("div",{class:J(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",ve.value?"border-red-500":""])},[q(Nt,{placeholder:"Set end date",class:"w-full","model-value":_.endDate,"emit-as":"ymd","onUpdate:modelValue":He,"min-date":_.startDate||g(le)},null,8,["model-value","min-date"])],2),ve.value?(u(),m("p",mn,L(ve.value),1)):F("",!0)]),t("div",gn,[C[13]||(C[13]=t("label",{class:"text-sm"},"Assignee",-1)),t("div",bn,[q(Zl,{name:!0,workspaceId:g(O),onAssign:Se,onUnassign:C[2]||(C[2]=S=>Se(null)),assigneeId:_.assignee,seat:null,disabled:!1,skipPermissionCheck:!0,class:"w-full"},null,8,["workspaceId","assigneeId"])])])]),t("div",yn,[q(Xl,{label:"Description",placeholder:"What needs to be done, acceptance criteria, linksâ€¦",modelValue:_.description,"onUpdate:modelValue":C[3]||(C[3]=S=>_.description=S),onBlur:C[4]||(C[4]=S=>E.description=!0)},null,8,["modelValue"]),ut.value?(u(),m("p",xn,L(ut.value),1)):F("",!0)])])):F("",!0)]),t("div",_n,[i.value>1?(u(),fe(Re,{key:0,variant:"secondary",onClick:it},{default:re(()=>C[15]||(C[15]=[ae("Back")])),_:1,__:[15]})):(u(),m("div",hn)),t("div",kn,[q(Re,{variant:"secondary",onClick:Ee},{default:re(()=>C[16]||(C[16]=[ae("Cancel")])),_:1,__:[16]}),i.value===3?(u(),fe(Re,{key:0,variant:"primary",disabled:!ke.value||g(d),onClick:ct},{default:re(()=>[ae(L(g(d)?"Addingâ€¦":"Add Ticket"),1)]),_:1},8,["disabled"])):F("",!0)])])]),_:1},8,["modelValue"]))}}),Cn={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-[6px] shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full border border-border flex flex-col overflow-x-auto overflow-y-auto scrollbar-visible pb-4"},Sn={class:"header px-4 py-3 flex items-center justify-between gap-1 w-[100%]"},$n={class:"flex gap-4"},Dn={class:"px-4 py-1 rounded-2xl bg-accent text-white font-medium cursor-pointer"},Tn={class:"flex gap-3 items-center"},Vn={class:"flex items-center gap-3 bg-bg-surface/50 h-[32px] px-2 rounded-md"},Ln={class:"overflow-x-auto"},An={key:0,class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex scrollbar-visible"},En={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible"},Mn={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},Fn={class:"relative w-full h-full flex overflow-hidden"},Bn={key:0,class:"format-sidebar h-full py-4 px-4 w-[320px] border-l bg-bg-card overflow-hidden flex flex-col"},In={class:"flex items-center justify-between pb-3 mb-4 border-b"},Nn={class:"format-content space-y-6"},On={class:"format-group relative mb-3"},qn={class:"text-xs text-secondary"},Un={key:0,class:"absolute z-50 mt-2 p-3 bg-bg-card rounded-lg shadow-lg border w-[240px]"},Pn={class:"grid grid-cols-10 gap-1 mb-3"},jn=["onClick"],zn={class:"flex items-center gap-2"},Rn=["value"],Hn=["value"],Wn={class:"format-group relative mb-3"},Kn={class:"text-xs text-secondary"},Qn={key:0,class:"absolute z-50 mt-2 p-3 bg-bg-card rounded-lg shadow-lg border w-[240px]"},Gn={class:"grid grid-cols-10 gap-1 mb-3"},Jn=["onClick"],Zn={class:"flex items-center gap-2"},Xn=["value"],Yn=["value"],eo={class:"grid grid-cols-1 gap-3"},to=["value"],lo={class:"mt-6 pt-4"},ao=["disabled"],so={key:0,class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},no={key:0,class:"fixed inset-0 bg-black/30 flex items-center justify-center"},oo={class:"bg-white p-6 rounded-xl w-80"},ro={class:"flex justify-end gap-2 mt-4"},io=["disabled"],uo={class:"flex items-center mt-3 gap-3"},co=wt({__name:"ActiveSprint",props:{sptint_id:{},searchQuery:{},activeSprint:{}},setup(k){const h=k,I=Jt(()=>Zt(()=>import("./CreateTaskModal-CP80fe1C.js"),__vite__mapDeps([0,1,2,3]))),D=Jt(()=>Zt(()=>import("./ConfirmDeleteModal-zSvP0es9.js"),__vite__mapDeps([4,5,2,3]))),Q=Jt(()=>Zt(()=>import("./SidePanel-DZf_qMTV.js"),__vite__mapDeps([6,2,3,7]))),O=Jt(()=>Zt(()=>import("./KanbanBoard-Cla7ayuN.js"),__vite__mapDeps([8,9,10,2,3,11,5,12]))),i=b(!1),N=b(""),P=b(null),W=b(null),U=b(null),A=b("");function X(l){N.value="",i.value=!0,P.value=l}function K(){P.value&&P.value(N.value),i.value=!1}function ie(){i.value=!1}const{mutate:z}=Kl({onSuccess:()=>{}});function R(){const l=Me.value.trim();l&&it(l)}function B(){Oe.value=!Oe.value}const $=da(),d=b("kanban"),{workspaceId:p,moduleId:o}=jl(),s=b(""),c=b(!1),x=b(!0),{canCreateVariable:te,canCreateCard:_,canEditCard:E,canAssignCard:ke}=fl(),{data:be}=zl(p.value),He=b(be.value.modules||[]),St=T(()=>(He.value||[]).map(l=>{var e,n;return{_id:l._id,title:((e=l.variables)==null?void 0:e["module-title"])??"Untitled module",description:((n=l.variables)==null?void 0:n["module-description"])??"",icon:l.icon??null,status:l.status??null}})),Se=yl(),{mutate:We,isPending:rt}=Yl({onSuccess:()=>{Se.invalidateQueries({queryKey:["sheet-list"]}),Me.value="",Qe.value=!1,Oe.value=!1,Qe.value=!1}}),it=l=>{We({workspace_id:p.value,module_id:o.value,variable_id:ve.value,value:l})};j(St,l=>{if(l.length&&!s.value){const e=l.find(n=>n.title==="Tasks")||l[0];s.value=e._id}},{immediate:!0});const{data:Ee,refetch:dt}=Rl({workspace_id:p.value,workspace_module_id:T(()=>s.value)});j(s,l=>{l&&dt()});const ce=T(()=>{var l;return Ee.value?(l=Ee.value[0])==null?void 0:l._id:""}),se=b(ce),Ke=T(()=>{var l;return $t.value?(l=$t.value[0])==null?void 0:l._id:""}),ve=b(Ke),Ve=ea(),ut=T(()=>h.sptint_id),{data:le,isPending:ct}=Va(ut),y=b(!1),C=b(),S=l=>{C.value=l},Le=ta(),Ne=la();function pt(l){l.type=="column"?Le.mutate({payload:{workspace_id:p.value,workspace_module_id:o.value,variable_id:ve.value,moved_value:l.meta.id,new_index:l.meta.newIndex}}):Ne.mutate({payload:{workspace_id:p.value,card_id:l.meta.moved._id,group_value:l.meta.fromColumnId,group_variable_id:ve.value,new_index:l.meta.newIndex,sheet_id:se.value}})}const ft=l=>{},{mutate:Z}=aa({onSuccess:()=>{dt(),ol.value=!1}}),ne=T(()=>!Ee.value||!Ee.value.length?[]:Ee.value.map(l=>{var e,n;return{_id:l._id,title:((e=l.variables)==null?void 0:e["sheet-title"])||"Untitled Sheet",description:((n=l.variables)==null?void 0:n["sheet-description"])||"",icon:l.icon||null,status:l.generation_status||null}}));j(ne,l=>{l.length>0&&!se.value&&(se.value=l[0]._id)},{immediate:!0}),j(ne,l=>{l.length>0?A.value=l[0].title:A.value=""},{immediate:!0}),j(Ee,l=>{var e;(l==null?void 0:l.length)>0&&(se.value=(e=l[0])==null?void 0:e._id)});const Oe=b(!1),Me=b(""),qt=l=>{We({workspace_id:$.params.id,module_id:$.params.module_id,new_value:l.title,value:l.oldTitle,variable_id:ve.value})},Qe=b(!1),Fe=b(),vt=()=>{We({value:Fe.value.title,workspace_id:p.value,module_id:o.value,newValue:Fe.value.title,variable_id:ve.value,is_trash:!0})},al=l=>{Qe.value=!0,Fe.value=l},qe=l=>{y.value=!0,Fe.value=l},Ge=T(()=>h.searchQuery),mt=b("");j(Ge,Sa.debounce(l=>{mt.value=l},200));const sl=T(()=>{var e;const l=(e=le.value)==null?void 0:e.flatMap(n=>n.cards.map(f=>({...f,columnId:n.title})));return new Il(l,{keys:["card-title","card-description"],threshold:.3})}),gt=T(()=>{var l,e;if(d.value==="kanban"){if(!Ge.value)return le.value;const n=sl.value.search(Ge.value).map(f=>f.item);return le.value.map(f=>({...f,cards:n.filter(v=>v.columnId===f.title)}))}else{const n=(l=Ge.value)==null?void 0:l.trim();if(!n){let v=[];return(e=le.value??[])==null||e.forEach(ee=>{v=[...v,...ee==null?void 0:ee.cards]}),v}return new Il(nl.value,{keys:["card-title","card-description"],threshold:.3}).search(n).map(v=>v.item)}}),nl=T(()=>{let l=[];return(le.value??[]).forEach(e=>{l=[...l,...e==null?void 0:e.cards]}),l}),ol=b(!1),{data:$t,isPending:Be}=Wl(p.value,s,se),{mutate:Ut}=sa(),rl=(l,e)=>{Ut({payload:{sheet_id:se.value,workspace_id:p.value,variable_slug:l,is_visible:e}})},{data:Dt}=Hl(p),Pt=T(()=>((Dt==null?void 0:Dt.value)??[]).map(l=>{var e;return{_id:l._id,title:((e=l==null?void 0:l.variables)==null?void 0:e["lane-title"])??String(l._id)}})),jt=l=>l.map(e=>({_id:e.value??e,title:e.value??e})),bt=na({onSuccess:()=>{Se.invalidateQueries({queryKey:["get-sheets"]}),Se.invalidateQueries({queryKey:["sheet-list"]}),Se.invalidateQueries({queryKey:["roles"]})}}),Tt=(l,e)=>{if(!le.value)return;const n=le.value.findIndex(f=>f.cards.some(v=>v._id===l));if(n!==-1){const f=le.value[n].cards.findIndex(v=>v._id===l);if(f!==-1){const v={...le.value[n].cards[f]};e(v),le.value[n].cards[f]=v,Ll(le)}}};function Vt(l,e){Tt(l,n=>{const f=Pt.value.find(v=>v._id===e);f&&(n.lane=f)}),Ll(le),bt.mutate({card_id:l,workspace_lane_id:e})}const zt=(l,e)=>{Tt(l,n=>{n.seat=e}),bt.mutate({card_id:l,seat_id:e==null?void 0:e._id})},Rt=T(()=>{var l;return[{key:"card-title",label:"Title",render:({row:e,value:n})=>_e("div",{class:"flex items-center gap-1 w-full"},[_e("a",{onClick:()=>C.value=e,class:"text-[12px] underline text-blue-500 shrink-0 overflow-ellipsis cursor-pointer"},e["card-code"]),_e("div",{class:"flex-1 min-w-0"},[_e("input",{onFocusout:f=>{var v;Ue(e==null?void 0:e._id,"card-title",(v=f==null?void 0:f.target)==null?void 0:v.value)},class:"text-[12px] w-full overflow-ellipsis capitalize p-1 w-full p-1 focus:border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-transparent focus:bg-bg-body text-[12px] h-8",defaultValue:n,disabled:!E.value})])])},{key:"end-date",label:"Due Date",render:({row:e,value:n})=>{const f=b(n);return _e(Nt,{class:" capitalize flex items-center gap-2 text-[12px]",placeholder:"Set start date",tableInputClass:!0,modelValue:f.value,disabled:!E.value,"onUpdate:modelValue":v=>Lt(e==null?void 0:e._id,v),emptyText:"Date"})}},{key:"lane",label:"Lane",render:({row:e})=>{var n;return _e(Bl,{options:Pt.value??[],placeholder:"Select lane",modelValue:((n=e.lane)==null?void 0:n._id)||null,disabled:!E.value,"onUpdate:modelValue":f=>Vt(e==null?void 0:e._id,f),displayField:"title",emptyText:"Lane"})}},{key:"created_by",label:"Owner",render:({value:e})=>_e("div",{class:"capitalize flex items-center gap-2  px-3"},[_e("div",{class:" rounded-full  "},[e!=null&&e.u_profile_image?_e("img",{class:"w-6 h-6 rounded-full",src:e==null?void 0:e.u_profile_image}):_e("div",{class:"w-5 h-5 rounded-full flex justify-center items-center text-[11px] ",style:`background:${e!=null&&e.u_full_name?oa({name:e.u_full_name,email:e.u_email}):""}`},vl(e==null?void 0:e.u_full_name))]),_e("span",{class:"text-[12px]"},e?e==null?void 0:e.u_full_name:"")])},{key:"seat",label:"Assignee",render:({row:e,value:n})=>_e(ya,{class:"capitalize flex items-center gap-2 ",onAssign:f=>zt(e==null?void 0:e._id,f),assigneeId:n,seat:n,name:!0,disabled:!ke.value,emptyText:"Assignee"})},...((l=$t.value)==null?void 0:l.filter(e=>{var n;return((n=e==null?void 0:e.type)==null?void 0:n.title)==="Select"}).map(e=>({key:e==null?void 0:e.slug,label:e==null?void 0:e.slug,render:({row:n,value:f})=>{var ee;let v=f;if(Array.isArray(n==null?void 0:n.variables)){const M=n.variables.find(H=>H.slug===e.slug);M&&(v=M.value)}else v=((ee=n==null?void 0:n.variables)==null?void 0:ee[e.slug])??(n==null?void 0:n[e.slug])??f;return _e("div",{class:"capitalize flex items-center gap-2"},[_e(Bl,{options:jt(e.data??[]),modelValue:v,disabled:!E.value,emptyText:e.slug,"onUpdate:modelValue":M=>{Ue(n==null?void 0:n._id,e.slug,M)},columnName:e.slug})])},visible:e==null?void 0:e.is_visible})))??[]]});function Ue(l,e,n){Tt(l,f=>{if(e==="card-title"&&(f[e]=n),Array.isArray(f.variables)){const v=f.variables.find(ee=>ee.slug===e);v?v.value=n:f.variables.push({slug:e,value:n,type:"Select"})}else f.variables&&typeof f.variables=="object"?f.variables[e]=n:f[e]=n}),bt.mutate({card_id:l,variables:{[e]:n.trim()}})}function il(l){if(l["card-title"]){const e={sheet_list_id:"To Do",workspace_id:p.value,sheet_id:se.value,variables:{"card-title":l["card-title"].trim()},createdAt:new Date().toISOString()};z(e)}}const Lt=(l,e)=>{const n=le.value.findIndex(f=>f.cards.some(v=>v._id===l));if(n!==-1){const f=le.value[n].cards.findIndex(v=>v._id===l);f!==-1&&(le.value[n].cards[f]["end-date"]=e)}bt.mutate({card_id:l,variables:{"start-date":e}})},Pe=b(null),Je=b(!1),At=["#FFFFFF","#F2F2F2","#D9D9D9","#BFBFBF","#A6A6A6","#808080","#404040","#000000","#FFE066","#FF9AA2","#8EE4AF","#00EAD3","#90DBF4","#4D96FF","#6C63FF","#C77DFF","#F7A1C4","#FFC300","#FF5733","#2ECC71","#00B894","#17A2B8","#0984E3","#3F51B5","#9C27B0","#E84393","#FF8C00","#E74C3C","#1E8449","#006D6F","#004C6D","#0057A8","#1A237E","#4A148C","#7D3C98"],Ze=b(!1);j(Je,l=>{l&&(Ze.value=!1)}),j(Ze,l=>{l&&(Je.value=!1)});const ye=T(()=>{var l,e;return(e=(l=Pe.value)==null?void 0:l.nodeObj)!=null&&e.style?Pe.value.nodeObj.style:xt(xe)});function we(l,e,n){return l!==void 0?l:e!==void 0?e:n}function yt(l,e){var M;if(!((M=Pe.value)!=null&&M.nodeObj))return;const n=Pe.value.nodeObj;n.style||(n.style={});const f=e.target,v=f.type==="number"?Number(f.value):f.value;switch(l){case"bg_color":n.style.background=v;break;case"color":n.style.color=v;break;case"font_size":n.style.fontSize=`${v}px`;break;case"font_weight":n.style.fontWeight=v;break;case"font_style":n.style.fontStyle=v;break;case"font_family":n.style.fontFamily=v;break;case"border_color":n.style.borderColor=v;break;case"border_width":n.style.borderWidth=`${v}px`;break;case"border_radius":n.style.borderRadius=`${v}px`;break;case"padding":n.style.padding=`${v}px`;break}const ee=document.getElementById(n.id);ee&&et(n,ee)}const xe={bg_color:"#ffffff",color:"#000000",font_size:14,font_weight:"normal",font_style:"normal",font_family:"Inter",border_color:"#cccccc",border_width:0,border_radius:0,padding:0},Xe=b(!1);async function Ht(){var e;const l=(e=Pe.value)==null?void 0:e.nodeObj;if(!(!l||Xe.value)){Xe.value=!0;try{const n=ua(l);n._originalStyle||(n._originalStyle={});const f=n.style||{},v=n._originalStyle,ee={bg_color:we(f.background,v.bg_color,xe.bg_color),color:we(f.color,v.color,xe.color),font_size:we(f.fontSize?parseInt(f.fontSize):void 0,v.font_size,xe.font_size),font_weight:we(f.fontWeight,v.font_weight,xe.font_weight),font_style:we(f.fontStyle,v.font_style,xe.font_style),font_family:we(f.fontFamily,v.font_family,xe.font_family),border_color:we(f.borderColor,v.border_color,xe.border_color),border_width:we(f.borderWidth?parseInt(f.borderWidth):void 0,v.border_width,xe.border_width),border_radius:we(f.borderRadius?parseInt(f.borderRadius):void 0,v.border_radius,xe.border_radius),padding:we(f.padding?parseInt(f.padding):void 0,v.padding,xe.padding),hyperLink:N.value||n.hyperLink||""};n._originalStyle={...ee};const M=n.unique_name==="sheet"?{sheet_id:n.id,workspace_id:p.value,workspace_module_id:o.value,style:ee}:{card_id:n.id,seat_id:n.seat_id,style:ee};n.unique_name==="sheet"?await Z(M):await bt.mutateAsync(M)}finally{Xe.value=!1}}}const dl=b([]);function Wt(l){const e={id:"root",topic:localStorage.getItem("currentName")??"",isRoot:!0,children:[],style:{},_originalStyle:{},unique_name:"root"};if(!Array.isArray(l))return e;const n={};return l.forEach(f=>{var H;const v=A.value,ee=((H=f.style)==null?void 0:H.hyperLink)||"";n[v]||(n[v]={id:f._id,topic:v,variables:f==null?void 0:f.variables,children:[],style:f==null?void 0:f.style,_originalStyle:(f==null?void 0:f.style)||{},unique_name:"sheet",hyperLink:ee||""},e.children.push(n[v]));const M={id:f==null?void 0:f._id,topic:f.title,children:[],style:xt(f==null?void 0:f.style),_originalStyle:f.style||{},unique_name:"List",hyperLink:ee||""};(f.cards||[]).forEach((Y,V)=>{var pe;const me=((pe=Y.style)==null?void 0:pe.hyperLink)||"",de={id:Y._id||`card-${V}`,seat_id:Y.seat_id,topic:Y["card-title"],style:xt(Y.style),_originalStyle:Y.style||{},children:[],unique_name:"card",hyperLink:me||""};M.children.push(de),dl.value=de}),n[v].children.push(M)}),e}const{mutateAsync:Kt}=ra({onSuccess:()=>{Se.invalidateQueries({queryKey:["sheets"]}),Se.invalidateQueries({queryKey:["sheet-list"]}),close()}});ia(()=>{d.value!=="mindmap"||!W.value||!le.value||El(()=>{var v,ee;const l=Wt(le.value);U.value&&((ee=(v=U.value).destroy)==null||ee.call(v),U.value=null);const e=new wa({el:W.value,theme:void 0,draggable:!0,contextMenu:!0,contextMenuOption:{Update:!0,extend:[{name:"Update Node",onclick:()=>{var H;x.value&&(x.value=!1);const M=(H=Pe.value)==null?void 0:H.nodeObj;M&&S(M)}},{name:"Add Hyperlink",onclick:()=>{X(async()=>{await Ht()})}}]}});U.value=e,e.init({nodeData:l}),El(()=>{e.toCenter(),e.scale(1)}),e.bus.addListener("selectNode",M=>{M&&(Pe.value={nodeObj:M},x.value=!0)}),e.bus.addListener("renderNode",M=>{!(M!=null&&M.nodeObj)||!(M!=null&&M.element)||et(M.nodeObj,M.element)});const n=new Set;e.bus.addListener("operation",async M=>{var V,me,de;if(!M||M.name!=="insertSibling"&&M.name!=="addChild")return;const H=M.obj;if(!H||!H.id||n.has(H.id))return;n.add(H.id);let Y;if(M.name==="addChild"?Y=(V=e.currentNode)==null?void 0:V.nodeObj:Y=(de=(me=e.currentNode)==null?void 0:me.nodeObj)==null?void 0:de.parent,!(!Y||!("unique_name"in Y))&&Y.unique_name==="List")try{const pe=Qt({topic:H.topic??"New Card",id:H.id},Y);await z(pe)}catch(pe){console.error("Error creating card or refetching sheets:",pe)}});const f=new Set;e.bus.addListener("operation",async M=>{var V,me;if(!M)return;const H=M.obj;if(!(H!=null&&H.id))return;const Y=H.parent??((me=(V=e.currentNode)==null?void 0:V.nodeObj)==null?void 0:me.parent);if(!(!Y||!("unique_name"in Y))){if(M.name==="addChild"&&Y.unique_name==="root"&&!f.has(H.id)){f.add(H.id);try{await Kt({variables:{"sheet-title":H.topic??"New Sheet","sheet-description":"This is custom description"},is_ai_generated:!1,workspace_id:p.value,workspace_module_id:o.value})}catch(de){console.error("Error creating workspace sheet:",de)}return}if(Y.unique_name==="List")try{const de=Qt({topic:H.topic??"New Card",id:H.id},Y);await z(de)}catch(de){console.error("Error creating card or refetching sheets:",de)}}})})});function Ye(){const l=document.querySelector(".mind-elixir-toolbar.rb");if(!l){requestAnimationFrame(Ye);return}if(l.querySelector(".open-sidebar-btn"))return;const e=document.createElement("button");e.className="open-sidebar-btn me-toolbar-btn ms-2",e.title="Open Formatting Sidebar",e.innerHTML='<i class="fa-solid fa-sidebar"></i> ',e.addEventListener("click",()=>{x.value=!x.value}),l.appendChild(e)}Ye();function et(l,e){if(!l||!e||!l.style)return;const n=e.querySelector(".topic"),f=e.querySelector(".node")??e,v=l.style;v.background&&(f.style.background=v.background),v.color&&n&&(n.style.color=v.color),n&&(v.fontSize&&(n.style.fontSize=v.fontSize),v.fontFamily&&(n.style.fontFamily=v.fontFamily),v.fontWeight&&(n.style.fontWeight=v.fontWeight),v.fontStyle&&(n.style.fontStyle=v.fontStyle)),v.borderColor&&(f.style.borderColor=v.borderColor),v.borderWidth&&(f.style.borderWidth=v.borderWidth),v.borderRadius&&(f.style.borderRadius=v.borderRadius),v.padding&&(f.style.padding=v.padding)}function xt(l={}){return{background:l.bg_color,color:l.color,fontSize:l.font_size!=null?`${l.font_size}px`:void 0,fontWeight:l.font_weight,fontStyle:l.font_style,fontFamily:l.font_family,borderColor:l.border_color,borderWidth:l.border_width!=null?`${l.border_width}px`:void 0,borderRadius:l.border_radius!=null?`${l.border_radius}px`:void 0,padding:l.padding!=null?`${l.padding}px`:void 0,hyperLink:l.hyperLink||void 0}}function Qt(l,e){const n=new Date,f=n.toISOString().split("T")[0],v=new Date(n.getTime()+3*24*60*60*1e3).toISOString().split("T")[0];return{sheet_list_id:(e==null?void 0:e.topic)||"In Progress",workspace_id:p.value,sheet_id:se.value,workspace_lane_id:(l==null?void 0:l.workspace_lane_id)||null,variables:{"card-status":(e==null?void 0:e.topic)||"In Progress","card-type":null,priority:null,process:null,"card-title":l.topic||"New Card","card-description":"","start-date":f,"end-date":v},createdAt:new Date().toISOString()}}return(l,e)=>{var v,ee,M,H,Y;const n=Al("Button"),f=Al("BaseTextField");return u(),m("div",Cn,[t("div",Sn,[t("div",$n,[q(n,{class:"lg:flex hidden cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white items-center justify-center gap-1 px-2 py-1.5 rounded-md text-xs font-medium",onClick:e[0]||(e[0]=V=>l.$emit("go-back"))},{default:re(()=>e[26]||(e[26]=[t("i",{class:"fa-solid fa-chevron-left text-xs"},null,-1),ae(" Go Back")])),_:1,__:[26]}),q(n,{class:"flex sm:hidden cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white items-center justify-center px-2 py-2 rounded-md text-xs font-medium",onClick:e[1]||(e[1]=V=>l.$emit("go-back"))},{default:re(()=>e[27]||(e[27]=[t("i",{class:"fa-solid fa-chevron-left text-xs"},null,-1)])),_:1,__:[27]}),t("div",Dn,L(l.activeSprint),1)]),t("div",Tn,[t("div",Vn,[t("button",{class:J(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",d.value==="kanban"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"List view",onClick:e[2]||(e[2]=V=>d.value="kanban")},e[28]||(e[28]=[t("i",{class:"fa-solid fa-chart-kanban"},null,-1)]),2),t("button",{onClick:e[3]||(e[3]=V=>d.value="table"),class:J(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",d.value==="table"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gallery view"},e[29]||(e[29]=[t("i",{class:"fa-solid fa-align-left"},null,-1)]),2),t("button",{onClick:e[4]||(e[4]=V=>d.value="mindmap"),class:J(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",d.value==="mindmap"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"MindMap view"},e[30]||(e[30]=[t("i",{class:"fa-solid fa-chart-diagram"},null,-1)]),2),t("button",{onClick:e[5]||(e[5]=V=>d.value="calendar"),class:J(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",d.value==="calendar"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Calendar view"},e[31]||(e[31]=[t("i",{class:"fa-regular fa-calendar"},null,-1)]),2),t("button",{onClick:e[6]||(e[6]=V=>d.value="gantt"),class:J(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",d.value==="gantt"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gantt Chart view"},e[32]||(e[32]=[t("i",{class:"fa-solid fa-chart-gantt"},null,-1)]),2),t("button",{onClick:e[7]||(e[7]=V=>d.value="timeline"),class:J(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",d.value==="timeline"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Timeline view"},e[33]||(e[33]=[t("i",{class:"fa-solid fa-timeline"},null,-1)]),2)])])]),t("div",Ln,[d.value=="kanban"?(u(),m("div",An,[ot(q(Ql,null,null,512),[[tl,g(ct)]]),ot(t("div",En,[q(g(O),{onOnPlus:qe,"onDelete:column":e[8]||(e[8]=V=>al(V)),"onUpdate:column":e[9]||(e[9]=V=>qt(V)),onReorder:pt,onAddColumn:it,"onSelect:ticket":S,board:gt.value,onOnBoardUpdate:ft,variable_id:ve.value,sheet_id:se.value},{"column-footer":re(V=>{var me,de,pe,Gt,r;return[(de=(me=g(Ve))==null?void 0:me.transitions)!=null&&de.all_allowed&&!((r=(Gt=(pe=g(Ve))==null?void 0:pe.transitions)==null?void 0:Gt.all_allowed)!=null&&r.includes(V.column.title))&&g(Ve).transitions.currentColumn!=V.column.title?(u(),m("div",Mn," Disbale ( you can't drop here ) ")):F("",!0)]}),ticket:re(({ticket:V})=>[q(Ca,{selectedVar:ve.value,onSelect:()=>{S(V)},ticket:V},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"])],512),[[tl,!g(ct)]])])):F("",!0),d.value=="table"?(u(),fe(xa,{key:1,onToggleVisibility:rl,onAddVar:e[10]||(e[10]=()=>{c.value=!0}),isPending:g(ct)||g(Be),columns:Rt.value,rows:gt.value,canCreate:g(_),canCreateVariable:g(te),onCreate:il},null,8,["isPending","columns","rows","canCreate","canCreateVariable"])):F("",!0),d.value==="mindmap"?(u(),m(ge,{key:2},[t("div",Fn,[t("div",{ref_key:"mindMapRef",ref:W,class:"flex-1 h-full overflow-y-hidden rounded-md relative"},null,512),x.value?(u(),m("div",Bn,[t("div",In,[e[35]||(e[35]=t("h3",{class:"text-sm font-semibold text-secondary"},"Format Node",-1)),t("button",{onClick:e[11]||(e[11]=V=>x.value=!1),class:"text-gray-400 hover:text-gray-700"},e[34]||(e[34]=[t("i",{class:"fa-solid fa-times"},null,-1)]))]),t("div",Nn,[t("div",null,[e[38]||(e[38]=t("h4",{class:"text-xs font-semibold text-secondary uppercase mb-3"}," Colors ",-1)),t("div",On,[e[36]||(e[36]=t("label",{class:"block text-xs text-secondary mb-1"},"Background",-1)),t("div",{class:"flex items-center gap-2 cursor-pointer",onClick:e[12]||(e[12]=V=>Je.value=!Je.value)},[t("div",{class:"w-full h-7 rounded border",style:ue({background:ye.value.background})},null,4),t("span",qn,L(ye.value.background),1)]),Je.value?(u(),m("div",Un,[t("div",Pn,[(u(),m(ge,null,he(At,V=>t("button",{key:V,class:"w-5 h-5 rounded border",style:ue({background:V}),onClick:me=>{yt("bg_color",{target:{value:V}}),Je.value=!1}},null,12,jn)),64))]),t("div",zn,[t("input",{type:"color",value:ye.value.background,class:"w-8 h-8 cursor-pointer",onInput:e[13]||(e[13]=V=>yt("bg_color",V))},null,40,Rn),t("input",{type:"text",class:"flex-1 text-xs border rounded px-2 py-1",value:ye.value.background,readonly:""},null,8,Hn)])])):F("",!0)]),t("div",Wn,[e[37]||(e[37]=t("label",{class:"block text-xs text-secondary mb-1"},"Text",-1)),t("div",{class:"flex items-center gap-2 cursor-pointer",onClick:e[14]||(e[14]=V=>Ze.value=!Ze.value)},[t("div",{class:"w-full h-7 rounded border",style:ue({background:ye.value.color})},null,4),t("span",Kn,L(ye.value.color),1)]),Ze.value?(u(),m("div",Qn,[t("div",Gn,[(u(),m(ge,null,he(At,V=>t("button",{key:V,class:"w-5 h-5 rounded border",style:ue({background:V}),onClick:me=>{yt("color",{target:{value:V}}),Ze.value=!1}},null,12,Jn)),64))]),t("div",Zn,[t("input",{type:"color",value:ye.value.color,class:"w-8 h-8 cursor-pointer",onInput:e[15]||(e[15]=V=>yt("color",V))},null,40,Xn),t("input",{type:"text",class:"flex-1 text-xs border rounded px-2 py-1",value:ye.value.color,readonly:""},null,8,Yn)])])):F("",!0)])]),t("div",null,[t("div",eo,[t("div",null,[e[40]||(e[40]=t("label",{class:"block text-xs text-secondary mb-1"},"Weight",-1)),t("select",{class:"w-full h-8 border rounded px-2 text-sm",value:ye.value.fontWeight,onChange:e[16]||(e[16]=V=>yt("font_weight",V))},e[39]||(e[39]=[t("option",{value:"lighter"},"Light",-1),t("option",{value:"normal"},"Normal",-1),t("option",{value:"bold"},"Bold",-1),t("option",{value:"bolder"},"Extra Bold",-1)]),40,to)])])])]),t("div",lo,[t("button",{class:"w-full cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium hover:shadow-md disabled:opacity-60",disabled:Xe.value,onClick:Ht},[Xe.value?(u(),m("span",so)):F("",!0),t("span",null,L(Xe.value?"Updating...":"Update"),1)],8,ao)])])):F("",!0)]),i.value?(u(),m("div",no,[t("div",oo,[e[41]||(e[41]=t("h3",{class:"text-lg font-semibold mb-4"},"Insert Web Link",-1)),ot(t("input",{"onUpdate:modelValue":e[17]||(e[17]=V=>N.value=V),type:"text",placeholder:"Enter or paste a URL",class:"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[bl,N.value]]),t("div",ro,[t("button",{onClick:ie,class:"px-4 py-2 rounded-md bg-gray-200 hover:bg-gray-300"}," Cancel "),t("button",{disabled:!N.value,onClick:K,class:J(["px-4 py-2 rounded-md text-white",N.value?"bg-blue-500 hover:bg-blue-600":"bg-blue-300 cursor-not-allowed"])}," Insert ",10,io)])])])):F("",!0),Oe.value?(u(),m("div",{key:1,class:"absolute top-40 left-70 bg-bg-body rounded-lg p-4 shadow-lg z-100 min-w-[328px] border",onClick:e[19]||(e[19]=De(()=>{},["stop"]))},[q(f,{autofocus:!0,modelValue:Me.value,"onUpdate:modelValue":e[18]||(e[18]=V=>Me.value=V),placeholder:"Add New list",onKeyup:el(R,["enter"])},null,8,["modelValue"]),e[42]||(e[42]=t("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),t("div",uo,[q(n,{onClick:R,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:re(()=>[ae(L(g(rt)?"Adding...":"Add list"),1)]),_:1}),t("i",{class:"fa-solid fa-close cursor-pointer",onClick:B})])])):F("",!0)],64)):F("",!0),d.value==="calendar"?(u(),fe(_a,{key:3,data:gt.value,"onSelect:ticket":S,class:"min-h-[600px]"},null,8,["data"])):F("",!0),d.value==="gantt"?(u(),fe(ha,{key:4,data:gt.value,"onSelect:ticket":S},null,8,["data"])):F("",!0),d.value==="timeline"?(u(),fe(ka,{key:5,data:gt.value,"onSelect:ticket":S},null,8,["data"])):F("",!0),q(g(D),{onClick:e[20]||(e[20]=De(()=>{},["stop"])),modelValue:Qe.value,"onUpdate:modelValue":e[21]||(e[21]=V=>Qe.value=V),title:"Delete List",itemLabel:"list",itemName:(v=Fe.value)==null?void 0:v.title,requireMatchText:(ee=Fe.value)==null?void 0:ee.title,confirmText:"Delete workspace",cancelText:"Cancel",size:"md",loading:g(rt),onConfirm:vt,onCancel:e[22]||(e[22]=()=>{Qe.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),y.value?(u(),fe(g(I),{selectedVariable:ve.value,listId:(M=Fe.value)==null?void 0:M.title,sheet_id:se.value,key:"createTaskModalKey",modelValue:y.value,"onUpdate:modelValue":e[23]||(e[23]=V=>y.value=V),onSubmit:e[24]||(e[24]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):F("",!0),(H=C.value)!=null&&H._id?(u(),fe(g(Q),{key:7,details:C.value,onClose:e[25]||(e[25]=()=>{S({variables:{}})}),showPanel:!!((Y=C.value)!=null&&Y._id)},null,8,["details","showPanel"])):F("",!0)])])}}}),po=ll(co,[["__scopeId","data-v-c98ebd25"]]),fo={class:"flex-auto flex-grow h-full min-h-0 bg-bg-card rounded-[6px] border border-border overflow-x-auto flex-col flex"},vo={key:1,class:"flex flex-col flex-1 min-h-0"},mo={key:1,class:"p-4 w-full min-w-0 flex flex-col flex-1 min-h-0"},go={class:"flex items-center justify-between mt-2"},bo={class:"text-sm font-semibold flex gap-2 items-center"},yo={class:"flex items-center gap-2 relative",ref:"filterDropdownRef"},xo={class:"mt-3"},_o={key:0,class:"flex items-center gap-2 overflow-x-auto no-scrollbar py-1"},ho=["onClick"],ko={key:1,class:"relative flex items-center gap-3"},wo={class:"relative flex-shrink-0"},Co={class:"flex items-center gap-2 truncate"},So=["src"],$o={class:"truncate"},Do={key:0,class:"absolute left-0 top-full mt-1 w-44 bg-bg-card border border-gray-200 rounded-lg shadow-lg z-[9999]"},To={class:"flex flex-col"},Vo=["onClick"],Lo={class:"flex gap-2 overflow-x-auto no-scrollbar flex-1"},Ao=["onClick"],Eo={key:0,class:"w-full h-full min-h-[250px] flex justify-center items-center"},Mo={key:1,class:"flex-1 min-h-0 overflow-y-auto"},Fo={class:"rounded-md relative pt-2 flex flex-col flex-1 min-h-0 border border-border-input overflow-hidden"},Bo={class:"flex justify-between gap-4 px-3 pb-2 border-b border-border-input"},Io={class:"flex items-center gap-2 bg-bg-card min-w-0"},No=["onClick"],Oo={class:"flex items-center lg:gap-2 max-w-full"},qo={class:"flex items-center lg:gap-2 max-w-full"},Uo={class:"truncate max-w-[160px]"},Po={key:1,class:"absolute left-0 mt-2 w-60 bg-bg-card border-accent-hover rounded-xl shadow-lg z-50 max-h-64 overflow-y-auto overflow-x-hidden"},jo={class:"relative flex-1"},zo=["onClick"],Ro=["onBlur","onKeyup"],Ho={class:"relative ml-2 flex gap-2"},Wo=["onClick"],Ko=["onClick"],Qo={class:"flex justify-end items-center"},Go={class:"flex gap-2"},Jo={class:"gap-2 hidden lg:flex"},Zo={key:0,class:"flex gap-2"},Xo={key:0,class:"gap-2"},Yo={class:"hidden lg:fxex bg-[#E6E1F5] text-accent px-3 py-1 rounded-2xl justify-center items-center"},er={key:0,class:"flex lg:hidden"},tr=["title"],lr=["disabled"],ar={class:"absolute z-50 top-10 mb-2 -translate-x-2/3 bg-card border border-accent text-accent text-xs px-2 py-1 rounded whitespace-nowrap"},sr={key:0,class:"fixed inset-0 z-50 flex items-center justify-center w-full"},nr={class:"relative bg-bg-card rounded-lg p-4 mx-3 w-full max-w-md lg:max-w-2xl xl:max-w-3xl"},or={class:"flex flex-col gap-2 mt-4"},rr={class:"text-sm text-muted mb-2"},ir={class:"flex gap-2 w-full"},dr={key:0,class:"mt-1 w-full bg-bg-card rounded-md max-h-64 overflow-y-auto"},ur=["onClick"],cr={class:"flex items-center justify-between"},pr={class:"font-medium"},fr={class:"text-muted text-xs ml-2"},vr={class:"flex gap-2 text-xs"},mr={class:"text-muted border border-border-input rounded-md px-3 py-1"},gr={key:1,class:"absolute top-full left-0 mt-1 w-full bg-bg-card border border-border-input rounded-md shadow-md p-4 z-50 text-center text-muted"},br={key:0,class:"w-full h-full min-h-[250px] flex justify-center items-center"},yr={class:"flex-1 min-h-0 overflow-y-auto"},xr={key:1,class:"bg-bg-card w-full p-6 flex flex-col items-center justify-center text-center gap-4 h-[100%] mt-3"},_r={class:"text-lg font-semibold text-accent"},hr={class:"text-sm text-muted max-w-md"},kr={key:2,class:"w-full h-full min-h-[250px] flex flex-col items-center justify-center text-center gap-4 p-6"},wr={class:"text-xl font-semibold text-accent"},Cr={class:"text-sm text-muted max-w-md"},Yt=400,Sr=wt({__name:"Plan",setup(k){const{isDark:h}=pl(),I=b(!1),D=b(""),Q=b(!1),O=b(!1),{canCreateCard:i}=fl(),N=b(!1),P=b(null),W=b(!1),U=b(!1),A=T(()=>z.value.value),X=b(""),K=[{label:"Milestone",value:"milestone",dot:"#2e9bda"},{label:"Sprint",value:"sprint",dot:"#7d68c8"},{label:"Huddle",value:"huddle",dot:"#eea832"}],ie=T(()=>A.value?A.value.charAt(0).toUpperCase()+A.value.slice(1):""),z=b(K[0]),R=b(null),B=b(!1);Xt(R,()=>{B.value=!1});const $=()=>{I.value=!1},d=()=>{N.value=!0},p=b(!1),o=()=>{p.value=!p.value},{workspaceId:s}=Pl(),c=b(!1),{moveSelectedToSprint:x,moveSelectedToBacklog:te,deleteSelected:_,saveSprintMeta:E,toggleStartSprint:ke}=Na();function be(r){X.value=r,pe.value=!1}function He(r){X.value=r,pe.value=!1}function St(r){X.value=r,pe.value=!1}const{data:Se,refetch:We}=cl(s,A,X);j(X,()=>{We()});const{data:rt}=ca(s),it=T(()=>{var r;return((r=rt.value)==null?void 0:r.modules.filter(a=>{var G;return((G=a==null?void 0:a.variables)==null?void 0:G["module-title"])!=="Pin"}))||[]});j(()=>A.value,(r,a)=>{r!==a&&We()});const{mutate:Ee,isPending:dt}=Fa({onSuccess:()=>{Lt.invalidateQueries({queryKey:["sprint-list"]}),se.value=!1}}),ce=b(null),se=b(!1),Ke=()=>{var r;Ee((r=ce.value)==null?void 0:r._id)},{mutate:ve,isPending:Ve}=Nl({onSuccess:r=>{E({name:r.title}),ut({id:Z.value,payload:{title:r.title,start_date:r.start_date,end_date:r.end_date,goal:r.goal,duration:Number(r.duration_days)}}),Me.value=!1}}),{mutate:ut,isPending:le}=Ma({onSuccess:()=>{Oe()}}),ct=async r=>{Ve.value=!0;try{await ve({id:Z.value,payload:{title:r.title,duration:r.duration,start_date:r.start,end_date:r.end,goal:r.goal}})}finally{Ve.value=!1,Me.value=!1}},{data:y,refetch:C,isLoading:S}=Da(s.value,A);console.log("sprint lists",y.value);const Le=T(()=>{var r;return((r=y.value)==null?void 0:r.sprints)??[]});j(()=>A.value,(r,a)=>{r!==a&&C()});const{refetch:Ne,isPending:pt}=cl(s,A),ft=T(()=>{var r,a;return(a=(r=y==null?void 0:y.value)==null?void 0:r.sprints[0])==null?void 0:a._id}),Z=b(ft.value);j(()=>ft.value,r=>{Z.value=r}),j(()=>Z.value,r=>{var a;ce.value=((a=y.value)==null?void 0:a.sprints.find(G=>G._id===r))||null});const{data:ne,refetch:Oe}=Aa(Z,{enabled:T(()=>!!Z.value)}),Me=b(!1),qt=()=>{localStorage.setItem("asFirstTime",JSON.stringify(!0)),Me.value=!0},Qe=()=>JSON.parse(localStorage.getItem("asFirstTime")||"false"),Fe=()=>{var r;((r=ne.value)==null?void 0:r.status)==="active"&&Qe()&&(N.value=!0,localStorage.setItem("asFirstTime",JSON.stringify(!1)))};Ml(()=>{Fe()}),j(()=>{var r;return(r=ne.value)==null?void 0:r.status},()=>{Fe()});const{data:vt,refetch:al}=Ta(Z);j(()=>Z.value,()=>{Z.value&&Oe()});const qe=b(""),Ge=b(null),mt=T(()=>{const r=vt.value;if(!qe.value||!(r!=null&&r.backlog_items))return[];const a=qe.value.toLowerCase().trim();return r.backlog_items.filter(G=>{var tt,lt,at,st,nt,Et,Mt,Ft,Bt,It;const Ce=((at=(lt=(tt=G.card)==null?void 0:tt.variables)==null?void 0:lt["card-title"])==null?void 0:at.toLowerCase())||"",Ae=((Et=(nt=(st=G.card)==null?void 0:st.variables)==null?void 0:nt["card-code"])==null?void 0:Et.toLowerCase())||"",_t=((Bt=(Ft=(Mt=G.card)==null?void 0:Mt.variables)==null?void 0:Ft["card-status"])==null?void 0:Bt.toLowerCase())||"",oe=((It=G.priority)==null?void 0:It.toLowerCase())||"",Ie=String(G._id||"").toLowerCase(),je=String(G.card_id||"").toLowerCase();return Ce.includes(a)||Ae.includes(a)||_t.includes(a)||oe.includes(a)||Ie.includes(a)||je.includes(a)})});function sl(r){qe.value=r}function gt(){mt.value.length===1&&Ut(mt.value[0])}const nl={high:"bg-red-500/20 text-red-500",medium:"bg-yellow-500/20 text-yellow-500",low:"bg-green-500/20 text-green-500"};function ol(r){const a=r==null?void 0:r.toLowerCase();return nl[a]??"bg-gray-500/20 text-gray-500"}function $t(r){Ge.value=r,Y.value=!1}const Be=T(()=>{var G,Ce,Ae,_t;const r=(G=vt.value)==null?void 0:G.backlog_items;if(!r)return null;const a=(r||[]).map(oe=>{var tt,lt,at,st,nt;const Ie=((tt=oe==null?void 0:oe.card)==null?void 0:tt.variables)||{},je=((lt=oe==null?void 0:oe.card)==null?void 0:lt._id)||oe.card_id;return{id:je,key:Ie["card-code"]||(je==null?void 0:je.slice(-6))||"PRJ-?",summary:Ie["card-title"]||"(untitled)",type:"Story",status:rl(String(Ie["card-status"]||"").trim()),assignee:((st=(at=oe==null?void 0:oe.card)==null?void 0:at.assigned_to)==null?void 0:st.name)||"Unassigned",storyPoints:Number(oe.story_points||0),priority:Dt(String(Ie.priority||"").trim()),createdAt:((nt=oe==null?void 0:oe.card)==null?void 0:nt.created_at)||new Date().toISOString(),description:Ie["card-description"]||""}});return{id:(Ce=vt.value)==null?void 0:Ce._id,name:((Ae=vt.value)==null?void 0:Ae.title)||"Sprint 1",title:(_t=vt.value)==null?void 0:_t.title,goal:"",start:"",end:"",started:!1,tickets:a}});function Ut(r){console.log("selected sprint id",r),Z.value=r._id,H.value=!1}function rl(r){const a=r.toLowerCase();return a.includes("progress")?"In Progress":a.includes("done")||a.includes("complete")?"Done":"Todo"}function Dt(r){const a=r.toLowerCase();return a==="highest"||a==="blocker"||a==="critical"?"Highest":a==="high"||a==="major"?"High":a==="medium"||a==="normal"?"Medium":"Low"}const{mutate:Pt}=Ba({onSuccess:()=>{Ct.success("Card removed from sprint successfully"),jt()},onError:r=>{Ct.error("Failed to remove card from sprint",r)}});function jt(){al(),C(),Ne(),Oe()}function bt(r,a){const G=Array.isArray(r)?r:[r],Ce=a||Z.value;!Ce||!G.length||G.forEach(Ae=>{Pt({sprintId:Ce,cardId:Ae})})}const Tt=b(!1),Vt=b(null);function zt(){c.value=!0,Vt.value=null}function Rt(r){Vt.value=r,I.value=!0,Tt.value=!0}const Ue=b(!1);function il(){Ue.value=!0}const Lt=yl(),{mutate:Pe,isPending:Je}=Ea({onSuccess:r=>{E({name:r.title}),Lt.invalidateQueries({queryKey:["sprint-list"]}),Ue.value=!1}}),{mutate:At,isPending:Ze}=Nl({onSuccess:r=>{E({name:r.title}),Lt.invalidateQueries({queryKey:["sprint-list"]}),Ue.value=!1}}),ye=b("");function we(r){const a=ye.value.trim();if(!a||a===r.title){v();return}At({id:r._id,payload:{workspace_id:s.value,title:a}}),n.value=null}function yt(r){var a;ce.value?At({id:(a=ce.value)==null?void 0:a._id,payload:{workspace_id:s.value,title:r.name,sprintType:r.value,description:r.description}}):Pe({payload:{workspace_id:s.value,title:r.name,sprintType:r.value,description:r.description}})}const xe=b([]);function Xe(r){ce.value=null,Ue.value=!0,xe.value=r}function Ht(r){ce.value=r,se.value=!0}const{mutate:dl,isPending:Wt}=La(Z,{onSuccess:()=>{Oe()}}),Kt=()=>{dl({})},Ye=b(null),et=b(0);let xt=!1;Ml(()=>{if(!Ye.value)return;const r=Ye.value.offsetWidth;et.value=r/3});function Qt(){xt=!0,document.addEventListener("mousemove",l),document.addEventListener("mouseup",e)}function l(r){if(!xt||!Ye.value)return;const a=Ye.value.getBoundingClientRect(),G=r.clientX-a.left;G<Yt?et.value=Yt:G>a.width-Yt?et.value=a.width-Yt:et.value=G}function e(){xt=!1,document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",e)}const n=b(null);function f(r){n.value=r._id,r.tempTitle=r.title,ye.value=r.title}function v(){var a;const r=(a=y.value)==null?void 0:a.sprints.find(G=>G._id===n.value);r&&(r.tempTitle=r.title),n.value=null}Xt(P,()=>{U.value=!1});const ee=r=>{console.log("selected type",r),z.value=r,W.value=!1};Xt(R,()=>{W.value=!1});const M=b(null),H=b(!1);Xt(M,()=>{H.value=!1});const Y=b(!1),V=()=>{Y.value=!0},me=()=>{Y.value=!1,qe.value=""},de=b("all"),pe=b(!1),Gt=T(()=>{var a,G,Ce;if(de.value==="all")return"All Milestones";const r=(G=(a=rt.value)==null?void 0:a.modules)==null?void 0:G.find(Ae=>Ae._id===de.value);return((Ce=r==null?void 0:r.variables)==null?void 0:Ce["module-title"])||"Select Module"});return(r,a)=>{var G,Ce,Ae,_t,oe,Ie,je,tt,lt,at,st,nt,Et,Mt,Ft,Bt,It,xl,_l,hl,kl,wl,Cl,Sl;return u(),m("div",fo,[N.value?(u(),fe(po,{key:0,sptint_id:Z.value,searchQuery:D.value,"active-sprint":A.value,onGoBack:a[0]||(a[0]=w=>N.value=!1)},null,8,["sptint_id","searchQuery","active-sprint"])):F("",!0),N.value?F("",!0):(u(),m("div",vo,[g(le)?(u(),fe(Ql,{key:0})):F("",!0),g(le)?F("",!0):(u(),m("div",mo,[t("div",{ref_key:"containerRef",ref:Ye,class:"flex gap-2 flex-1 min-h-0 overflow-x-auto group"},[t("section",{class:"px-4 rounded-md relative flex flex-col min-h-0 border border-border",style:ue({width:et.value+"px"})},[t("div",go,[t("h2",bo,[ot(t("input",{type:"checkbox",class:"custom-checkbox bg-bg-body border border-border-input flex-shrink-0","onUpdate:modelValue":a[1]||(a[1]=w=>Q.value=w)},null,512),[[pa,Q.value]]),ae(" Tickets ("+L((Ce=(G=g(Se))==null?void 0:G.cards)==null?void 0:Ce.length)+" "+L(((_t=(Ae=g(Se))==null?void 0:Ae.cards)==null?void 0:_t.length)>1?"Tasks":"Task")+") ",1)]),t("div",yo,[g(i)?(u(),m("button",{key:0,class:"w-8 h-8 rounded cursor-pointer text-sm hover:bg-bg-body flex items-center justify-center",onClick:zt},a[22]||(a[22]=[t("i",{class:"text-text-primary fa-regular fa-plus"},null,-1)]))):F("",!0)],512)]),t("div",xo,[A.value==="milestone"?(u(),m("div",_o,[t("button",{onClick:a[2]||(a[2]=w=>be("")),class:J(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium transition-colors whitespace-nowrap",X.value===""?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])}," All Modules ",2),(u(!0),m(ge,null,he(it.value,w=>(u(),m("button",{key:w._id,onClick:$e=>be(w._id),class:J(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium transition-colors whitespace-nowrap cursor-pointer",X.value===w._id?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])},L(w.variables["module-title"]),11,ho))),128))])):A.value==="huddle"||A.value==="sprint"?(u(),m("div",ko,[t("div",wo,[t("button",{class:"h-8 min-w-[160px] flex items-center justify-between px-2 rounded-md border text-sm border-border hover:bg-bg-body",onClick:a[3]||(a[3]=w=>pe.value=!pe.value)},[t("span",Co,[t("img",{src:g($s),alt:"filter",class:"w-4 h-4"},null,8,So),t("span",$o,L(Gt.value||"All Milestones"),1)]),a[23]||(a[23]=t("i",{class:"fas fa-chevron-down text-xs ml-2"},null,-1))]),pe.value?(u(),m("div",Do,[t("ul",To,[t("li",{class:"px-3 py-2 cursor-pointer hover:bg-gray-50 hover:text-gray-600",onClick:a[4]||(a[4]=w=>be(""))}," All Milestones "),(u(!0),m(ge,null,he(it.value,w=>(u(),m("li",{key:w._id,class:"px-3 py-2 cursor-pointer hover:bg-gray-50 hover:text-gray-600",onClick:$e=>He(w._id)},L(w.variables["module-title"]),9,Vo))),128))])])):F("",!0)]),t("div",Lo,[(u(!0),m(ge,null,he(Le.value,w=>(u(),m("button",{key:w._id,onClick:$e=>St(w._id),class:J(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium whitespace-nowrap transition-colors",X.value===w._id?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])},L(w.title),11,Ao))),128))])])):F("",!0)]),g(pt)?(u(),m("div",Eo,a[24]||(a[24]=[t("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):(u(),m("div",Mo,[q(es,{checkedAll:Q.value,"sprint-type":A.value,searchQuery:D.value,"module-id":X.value,onMoveSelectedToSprint:g(x),onDeleteSelectedBacklog:a[5]||(a[5]=w=>g(_)("backlog")),onOpenTicket:Rt,onTicketMovedToBacklog:bt,onOpenCreateTicket:zt},null,8,["checkedAll","sprint-type","searchQuery","module-id","onMoveSelectedToSprint"])]))],4),t("div",{class:"h-full w-[3px] relative z-10 opacity-0 group-hover:opacity-100 bg-red hover:bg-accent cursor-col-resize transition",onMousedown:Qt},null,32),t("section",Fo,[t("div",Bo,[t("div",Io,[t("div",{ref_key:"elipseWrapperSprint",ref:P,class:"relative inline-block"},[t("button",{onClick:a[6]||(a[6]=De(w=>U.value=!U.value,["stop"])),class:"flex items-center gap-2 lg:px-3 px-2 py-1.5 text-sm font-medium bg-transparent rounded-lg",style:ue({border:"1px solid "+z.value.dot})},[t("span",{class:"w-2 h-2 rounded-full hidden lg:flex",style:ue({backgroundColor:z.value.dot})},null,4),ae(" "+L(z.value.label)+" ",1),a[25]||(a[25]=t("i",{class:"fas fa-chevron-down text-xs"},null,-1))],4),q(Fl,{name:"fade"},{default:re(()=>[U.value?(u(),m("ul",{key:0,onClick:a[7]||(a[7]=De(()=>{},["stop"])),class:"absolute left-0 mt-2 w-44 bg-bg-dropdown border border-border rounded-xl shadow-lg z-50"},[(u(),m(ge,null,he(K,w=>t("li",{key:w.value,onClick:$e=>(ee(w),U.value=!U.value),class:"flex items-center gap-3 px-4 py-2 text-sm cursor-pointer"},[t("span",{class:"w-2 h-2 rounded-full",style:ue({backgroundColor:w.dot})},null,4),ae(" "+L(w.label),1)],8,No)),64))])):F("",!0)]),_:1})],512),t("div",Oo,[t("div",qo,[t("div",{ref_key:"sprintDropdownWrapperRef",ref:M,class:"relative min-w-0"},[(oe=g(y))!=null&&oe.sprints.length?(u(),m("button",{key:0,onClick:a[8]||(a[8]=w=>H.value=!H.value),class:J(["flex items-center gap-3 lg:px-6 px-1 py-1.5 rounded-lg text-sm font-medium transition-all",Z.value?"text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"]),style:ue(Z.value?{backgroundColor:z.value.dot}:{})},[t("span",Uo,L((tt=(je=(Ie=g(y))==null?void 0:Ie.sprints)==null?void 0:je.find(w=>w._id===Z.value))==null?void 0:tt.title),1),a[26]||(a[26]=t("i",{class:"fas fa-chevron-down text-xs"},null,-1))],6)):F("",!0),H.value?(u(),m("div",Po,[(u(!0),m(ge,null,he((lt=g(y))==null?void 0:lt.sprints,w=>{var $e;return u(),m("div",{key:w._id,class:"relative px-4 py-2 flex items-center justify-between text-sm cursor-pointer transition-color"},[t("div",jo,[n.value!==w._id?(u(),m("button",{key:0,class:"text-left truncate w-full",onClick:ze=>Ut(w)},L(w.title),9,zo)):ot((u(),m("input",{key:1,ref_for:!0,ref:"editingInputRef","onUpdate:modelValue":a[9]||(a[9]=ze=>ye.value=ze),class:"w-full px-1 py-1 text-sm rounded outline-none bg-bg-card border border-[#7d68c8]",placeholder:"Enter new name",onClick:a[10]||(a[10]=De(()=>{},["stop"])),onBlur:ze=>we(w),onKeyup:[el(ze=>we(w),["enter"]),el(v,["esc"])]},null,40,Ro)),[[bl,ye.value]])]),t("div",Ho,[t("button",{class:"ml-2 text-xs text-gray-400 hover:text-accent",onClick:De(ze=>f(w),["stop"])},a[27]||(a[27]=[t("i",{class:"fas fa-pen"},null,-1)]),8,Wo),($e=g(y))!=null&&$e.sprints.length&&n.value!==w._id?(u(),m("button",{key:0,onClick:De(ze=>Ht(w),["stop"]),class:"w-4 h-4 rounded-full flex items-center justify-center text-red-500"},a[28]||(a[28]=[t("i",{class:"fas fa-times text-xs"},null,-1)]),8,Ko)):F("",!0)])])}),128))])):F("",!0)],512)])]),t("button",{onClick:a[11]||(a[11]=w=>{var $e;return Xe(($e=g(y))==null?void 0:$e.sprints)}),class:J(["w-8 h-8 lg:flex sm:hidden items-center justify-center rounded-full border text-white transition-colors shrink-0"]),style:ue({backgroundColor:z.value.dot})},a[29]||(a[29]=[t("i",{class:"fa-solid fa-plus"},null,-1)]),4)]),t("div",Qo,[t("div",Go,[(st=(at=g(ne))==null?void 0:at.cards)!=null&&st.length?(u(),m("button",{key:0,class:"flex items-center justify-center w-8 h-8 me-2 rounded-full bg-accent",onClick:V,style:ue(Z.value?{backgroundColor:z.value.dot}:{})},a[30]||(a[30]=[t("i",{class:"fa-solid fa-magnifying-glass text-white"},null,-1)]),4)):F("",!0),((nt=g(ne))==null?void 0:nt.status)==="active"&&g(ne).cards.length?(u(),m("button",{key:1,class:"flex lg:hidden cursor-pointer text-white items-center justify-center rounded-full ms-2 w-7 h-7 text-sm font-medium",onClick:d,style:ue(Z.value?{backgroundColor:z.value.dot}:{})},a[31]||(a[31]=[t("i",{class:"fa-regular fa-eye text-sm"},null,-1)]),4)):F("",!0)]),t("div",Jo,[((Et=g(ne))==null?void 0:Et.status)==="active"?(u(),m("div",Zo,[q(Re,{size:"sm",onClick:Kt,variant:(g(h),"primary"),class:"border-border-input border",style:ue(Z.value?{backgroundColor:z.value.dot}:{})},{default:re(()=>[ae(L(g(Wt)?"Ending...":"End"),1)]),_:1},8,["variant","style"]),t("button",{class:"cursor-pointer text-white flex items-center justify-end gap-1 px-2 py-1 rounded-md text-sm font-medium",onClick:d,style:ue(Z.value?{backgroundColor:z.value.dot}:{})},a[32]||(a[32]=[t("i",{class:"fa-regular fa-eye text-sm"},null,-1),ae(" Preview ")]),4)])):(u(),fe(Re,{key:1,size:"sm",variant:(g(h),"primary"),class:"border-border-input border",onClick:qt,disabled:!Be.value||Be.value.tickets.length===0||g(ne).status==="completed",style:ue({backgroundColor:z.value.dot})},{default:re(()=>[ae(" Start "+L(z.value.label),1)]),_:1},8,["variant","disabled","style"]))]),Be.value&&Be.value.tickets.length?(u(),m("div",Xo,[t("span",Yo,L((Mt=g(ne))==null?void 0:Mt.status),1),((Ft=g(ne))==null?void 0:Ft.status)==="active"?(u(),m("div",er,[t("button",{onClick:Kt,class:"w-7 h-7 flex items-center justify-center rounded-full bg-accent",title:g(Wt)?"Ending...":"End Sprint",style:ue(Z.value?{backgroundColor:z.value.dot}:{})},a[33]||(a[33]=[t("i",{class:"fa-solid fa-flag-checkered text-white"},null,-1)]),12,tr)])):(u(),m("button",{key:1,onClick:qt,disabled:!Be.value||Be.value.tickets.length===0||g(ne).status==="completed",class:"w-7 h-7 flex items-center justify-center rounded-full text-white bg-accent disabled:opacity-50 disabled:cursor-not-allowed lg:hidden",title:"Start Sprint",style:ue(Z.value?{backgroundColor:z.value.dot}:{})},a[34]||(a[34]=[t("i",{class:"fa-solid fa-play text-sm"},null,-1)]),12,lr))])):F("",!0),((Bt=g(ne))==null?void 0:Bt.status)==="active"?(u(),m("div",{key:1,class:"relative inline-flex",onMouseenter:a[12]||(a[12]=w=>p.value=!0),onMouseleave:a[13]||(a[13]=w=>p.value=!1),onClick:o},[a[35]||(a[35]=t("span",{class:"flex lg:hidden bg-emerald-500 text-white w-7 h-7 rounded-full justify-center items-center cursor-pointer"},[t("i",{class:"fa-solid fa-check"})],-1)),ot(t("div",ar," Sprint is active ",512),[[tl,p.value]])],32)):F("",!0)]),q(Fl,{name:"fade"},{default:re(()=>[Y.value?(u(),m("div",sr,[t("div",{class:"absolute inset-0 bg-black/10 backdrop-blur-sm",onClick:me}),t("div",nr,[t("div",{class:"flex justify-end"},[t("button",{onClick:me,class:"px-2 py-1 rounded bg-bg-input border border-border-input text-accent"},a[36]||(a[36]=[t("i",{class:"fa-solid fa-xmark"},null,-1)]))]),t("div",or,[t("p",rr," Search for "+L(A.value)+" by name, status, or priority. Start typing to filter results. ",1),t("div",ir,[q(ga,{placeholder:`Search in ${A.value}`,onOnChange:sl,onKeyup:el(gt,["enter"]),class:"flex-1"},null,8,["placeholder"])]),mt.value.length&&qe.value?(u(),m("div",dr,[t("ul",null,[(u(!0),m(ge,null,he(mt.value,w=>{var $e,ze,$l,Dl,Tl,Vl;return u(),m("li",{key:w._id,onClick:$r=>$t(w),class:"px-4 py-2 cursor-pointer hover:bg-bg-hover text-text-primary border-b border-border-input"},[t("div",cr,[t("div",null,[t("span",pr,L((ze=($e=w.card)==null?void 0:$e.variables)==null?void 0:ze["card-title"]),1),t("span",fr," ("+L((Dl=($l=w.card)==null?void 0:$l.variables)==null?void 0:Dl["card-code"])+") ",1)]),t("div",vr,[t("span",{class:J(["px-3 py-1 rounded text-md",ol(w.priority)])},L(w.priority),3),t("span",mr,L((Vl=(Tl=w.card)==null?void 0:Tl.variables)==null?void 0:Vl["card-status"]),1)])])],8,ur)}),128))])])):qe.value&&!mt.value.length?(u(),m("div",gr," No "+L(A.value)+' found matching "'+L(qe.value)+'" ',1)):F("",!0)])])])):F("",!0)]),_:1})]),g(S)?(u(),m("div",br,a[37]||(a[37]=[t("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):F("",!0),t("div",yr,[Be.value&&g(ne)&&((It=g(ne))==null?void 0:It.status)==="planning"||((xl=g(ne))==null?void 0:xl.status)==="active"?(u(),fe(xs,{key:0,searchQuery:D.value,sprintId:Z.value,searchedData:Ge.value?[Ge.value]:[],label:A.value,checkedSprintAll:O.value,sprint:Be.value,onOpenTicket:Rt,onEditSprint:il,onToggleStart:g(ke),onMoveSelectedToBacklog:g(te),onDeleteSelectedSprint:a[14]||(a[14]=w=>g(_)("sprint",w)),onRefresh:jt},null,8,["searchQuery","sprintId","searchedData","label","checkedSprintAll","sprint","onToggleStart","onMoveSelectedToBacklog"])):F("",!0),((_l=g(ne))==null?void 0:_l.status)==="completed"?(u(),m("div",xr,[a[40]||(a[40]=t("div",{class:"w-20 h-20 flex justify-center items-center text-white rounded-full text-3xl"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 117.72 117.72","aria-hidden":"true"},[t("path",{fill:"#42ba96",d:`M58.86,0c9.13,0,17.77,2.08,25.49,5.79c-3.16,2.5-6.09,4.9-8.82,7.21c-5.2-1.89-10.81-2.92-16.66-2.92\r
                  c-13.47,0-25.67,5.46-34.49,14.29c-8.83,8.83-14.29,21.02-14.29,34.49c0,13.47,5.46,25.66,14.29,34.49\r
                  c8.83,8.83,21.02,14.29,34.49,14.29s25.67-5.46,34.49-14.29c8.83-8.83,14.29-21.02,14.29-34.49\r
                  c0-3.2-0.31-6.34-0.9-9.37c2.53-3.3,5.12-6.59,7.77-9.85c2.08,6.02,3.21,12.49,3.21,19.22\r
                  c0,16.25-6.59,30.97-17.24,41.62c-10.65,10.65-25.37,17.24-41.62,17.24c-16.25,0-30.97-6.59-41.62-17.24\r
                  C6.59,89.83,0,75.11,0,58.86c0-16.25,6.59-30.97,17.24-41.62S42.61,0,58.86,0z\r
                  M31.44,49.19L45.8,49l1.07,0.28c2.9,1.67,5.63,3.58,8.18,5.74c1.84,1.56,3.6,3.26,5.27,5.1\r
                  c5.15-8.29,10.64-15.9,16.44-22.9c6.35-7.67,13.09-14.63,20.17-20.98l1.4-0.54H114l-3.16,3.51\r
                  C101.13,30,92.32,41.15,84.36,52.65C76.4,64.16,69.28,76.04,62.95,88.27l-1.97,3.8l-1.81-3.87\r
                  c-3.34-7.17-7.34-13.75-12.11-19.63c-4.77-5.88-10.32-11.1-16.79-15.54L31.44,49.19z`})])],-1)),t("h4",_r,L(ie.value)+" Completed ",1),t("p",hr,[ae(" This "+L(A.value)+" has been successfully completed. To continue planning work, create a new "+L(A.value)+" by clicking the ",1),a[38]||(a[38]=t("strong",null,"plus (+)",-1)),a[39]||(a[39]=ae(" button and start organizing upcoming tasks. "))])])):F("",!0),((hl=g(ne))==null?void 0:hl.length)<1||((kl=g(y))==null?void 0:kl.sprints.length)<1?(u(),m("div",kr,[a[43]||(a[43]=t("div",{class:"w-20 h-20 flex items-center justify-center rounded-full bg-muted/10 text-accent"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-20 h-20",fill:"none",viewBox:"0 0 24 24",stroke:"#ff3333","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("h4",wr," No "+L(A.value)+"s available ",1),t("p",Cr,[ae(" You donâ€™t have any "+L(A.value)+"s yet. Create a new "+L(A.value)+" to start planning and organizing your work. Click the ",1),a[41]||(a[41]=t("strong",null,"plus (+)",-1)),a[42]||(a[42]=ae(" button to get started. "))])])):F("",!0)])])],512)]))])),q(ba,{onClick:a[15]||(a[15]=De(()=>{},["stop"])),modelValue:se.value,"onUpdate:modelValue":a[16]||(a[16]=w=>se.value=w),title:`Delete ${A.value}`,itemLabel:A.value,itemName:(wl=ce.value)==null?void 0:wl.title,requireMatchText:(Cl=ce.value)==null?void 0:Cl.title,confirmText:`Delete ${A.value}`,cancelText:"Cancel",size:"md",loading:g(dt),onConfirm:Ke,onCancel:a[17]||(a[17]=()=>{ce.value=null,se.value=!1})},null,8,["modelValue","title","itemLabel","itemName","requireMatchText","confirmText","loading"]),q(Ss,{modelValue:Ue.value,"onUpdate:modelValue":a[18]||(a[18]=w=>Ue.value=w),onSave:yt,sprint:ce.value,lable:A.value,creatingSprint:ce.value?g(Ze):g(Je),sprints:xe.value},null,8,["modelValue","sprint","lable","creatingSprint","sprints"]),q(Us,{sprint:ce.value,modelValue:Me.value,"onUpdate:modelValue":a[19]||(a[19]=w=>Me.value=w),onSave:ct,creatingSprint:g(le)||g(Ve),sprintType:A.value},null,8,["sprint","modelValue","creatingSprint","sprintType"]),q(fa,{modelValue:I.value,"onUpdate:modelValue":a[20]||(a[20]=w=>I.value=w),cardId:(Sl=Vt.value)==null?void 0:Sl.id,onClose:$},null,8,["modelValue","cardId"]),q(wn,{modelValue:c.value,"onUpdate:modelValue":a[21]||(a[21]=w=>c.value=w)},null,8,["modelValue"])])}}}),Ur=ll(Sr,[["__scopeId","data-v-ae93f1fa"]]);export{Ur as default};
