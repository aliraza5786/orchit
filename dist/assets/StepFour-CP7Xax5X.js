import{L as A}from"./Loader-Dra8kK7P.js";import{d as D,bd as R,be as q,r as H,a5 as M,c as P,bf as O,b as G,i as n,n as h,e as t,j as p,f as u,t as r,F as B,x as W,S as I,l as J,o as a}from"./index-By-MWQyp.js";import{u as K}from"./workspace-jQGMSF7j.js";import"./favicon-BAFXWHLW.js";const Q={key:1,class:"w-full flex flex-col"},U={class:"flex-wrap flex md:flex-nowrap gap-4 mb-6"},X={class:"bg-bg-surface w-full text-text-primary rounded-xl p-6 flex-auto"},Y={class:"text-text-primary text-base font-semibold"},Z={class:"mt-5 text-text-primary text-base font-semibold capitalize"},ee={key:0,class:"mt-5 ttext-text-primary text-base font-semibold"},te={key:0,class:"bg-bg-surface w-full text-text-primary rounded-xl p-6"},se={class:"text-4xl font-bold"},oe={class:"space-y-3"},re={class:"flex justify-between"},ae={class:"flex gap-2 items-center text-text-primary text-base font-semibold"},le={key:0,class:"mr-2 text-lg"},ne={key:0,class:"mb-6 h-full flex-grow flec flex-col"},ie={class:"grid grid-cols-3 flex-wrap gap-4"},ce={class:"bg-bg-surface text-text-primary px-4 py-3 rounded-lg"},pe={class:"flex gap-4 items-center"},ue={class:"text-sm font-medium"},de={class:"text-xs text-text-secondary line-clamp-2"},_e=D({__name:"StepFour",props:{ai:{type:Boolean}},emits:["back"],setup(C,{expose:L,emit:me}){const d=K(),x=J(),{mutate:E,isPending:N}=R({onSuccess:s=>{d.setWorkspace(null),x.push(`/workspace/peak/${s.workspace_id}/${s.job_id}`)}}),{mutate:T,isPending:$}=q({onError:s=>console.error("Error creating workspace:",s),onSuccess:s=>{z.ai?E({workspace_id:s._id}):x.push(`/workspace/peak/${s._id}`),d.setWorkspace(null)}}),o=H({title:"",description:"",workspace_type:"",roles:[],lanes:[]});M(()=>{try{const s=d.workspace??{};s&&(o.value=s)}catch(s){console.error("Error parsing workspace from localStorage",s)}});const f=P(()=>{var s,e;return(s=o.value.variables)!=null&&s.roles?(e=o.value.variables)==null?void 0:e.roles.reduce((i,c)=>c.max_num_people+i,0):0}),F=P(()=>{var s,e;return(s=o.value.variables)!=null&&s.roles?(e=o.value.variables)==null?void 0:e.roles.reduce((i,c)=>c.people.length+i,0):0}),{data:m}=O();function V(){var s;T({company_id:(s=m==null?void 0:m.value)==null?void 0:s._id,...o.value})}L({createProjectHandler:V});const z=C;return(s,e)=>{var i,c,b,v,_,g,y,k,w,j,S;return h($)||h(N)?(a(),G(A,{key:0})):(a(),n("div",Q,[e[10]||(e[10]=t("div",{class:"text-left w-full mb-6 pt-4"},[t("h2",{class:"text-xl md:text-4xl font-semibold text-text-primary mb-1"}," Project Summary "),t("p",{class:"text-sm md:text-lg text-text-secondary"}," Review your project details before creation ")],-1)),t("div",U,[t("div",X,[e[6]||(e[6]=t("h3",{class:"text-xl font-semibold mb-5.5"},"Project Overview",-1)),t("p",Y,[e[0]||(e[0]=t("strong",{class:"text-text-secondary text-sm font-medium"},"Project Name",-1)),e[1]||(e[1]=t("br",null,null,-1)),u(r((c=(i=o.value)==null?void 0:i.variables)==null?void 0:c.title),1)]),t("p",Z,[e[2]||(e[2]=t("strong",{class:"text-text-secondary text-sm font-medium"},"Project Type",-1)),e[3]||(e[3]=t("br",null,null,-1)),u(r((b=o.value)!=null&&b.variables?(v=o.value)==null?void 0:v.variables["workspace-type"]:"")+" Project ",1)]),(g=(_=o.value)==null?void 0:_.variables)!=null&&g.idea?(a(),n("p",ee,[e[4]||(e[4]=t("strong",{class:"text-text-secondary text-sm font-medium"},"Description",-1)),e[5]||(e[5]=t("br",null,null,-1)),u(" "+r((k=(y=o.value)==null?void 0:y.variables)==null?void 0:k.idea),1)])):p("",!0)]),f.value?(a(),n("div",te,[e[7]||(e[7]=t("h3",{class:"text-lg font-semibold mb-4"},"Team Assignment",-1)),t("p",se,r(F.value)+" / "+r(f.value),1),e[8]||(e[8]=t("p",{class:"text-sm text-text-secondary mb-4"},"Total team Assigned",-1)),t("ul",oe,[(a(!0),n(B,null,W((w=o.value.variables)==null?void 0:w.roles,l=>(a(),n("li",re,[t("span",ae,[l.role_emoji?(a(),n("span",le,r(l.role_emoji),1)):p("",!0),u(" "+r(l.title),1)]),t("span",null,r(l.people.length)+" / "+r(l.max_num_people),1)]))),256))])])):p("",!0)]),((S=(j=o.value)==null?void 0:j.lanes)==null?void 0:S.length)>0?(a(),n("div",ne,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold text-text-primary mb-4"}," Selected Project Lanes ",-1)),t("div",ie,[(a(!0),n(B,null,W(o.value.lanes,l=>(a(),n("div",ce,[t("div",pe,[t("div",{class:"w-4 h-4 rounded-full aspect-square",style:I(`background:${l.variables["lane-color"]}`)},null,4),t("div",null,[t("p",ue,r(l.variables["lane-title"]),1),t("p",de,r(l.variables["lane-description"]),1)])])]))),256))])])):p("",!0)]))}}});export{_e as default};
