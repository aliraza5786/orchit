import{d as dt,r as p,V as rt,M as ut,bA as ct,n as $,v as we,aw as vt,K as ye,c as U,a0 as mt,bB as pt,bC as ft,bD as ht,bE as bt,bF as xt,N as gt,aa as _t,as as wt,j as d,e as yt,p as r,f as s,an as F,w as y,o as n,D as N,E as kt,z as I,i as h,y as P,F as g,k,t as c,I as se,ae as ke,h as Ce,P as ae,a4 as Ct,aQ as St,a3 as Dt,Y as Se,B as le,g as Y,U as oe,ak as De,J as Vt}from"./index-j3-bp8Lo.js";const Et={key:0,class:"flex max-w-[380px] min-w-full sm:min-w-[380px] justify-center min-h-[400px] items-center h-full w-full"},Ut={class:"sticky top-0 z-10 border-b border-border px-4 sm:px-6 py-[9px] flex items-center justify-between bg-bg-card"},It={class:"flex items-center gap-2"},Pt=["aria-label"],Tt={class:"py-5 px-4 sm:px-6 flex flex-col gap-5 flex-grow"},Bt={key:0,class:"space-y-2 sm:col-span-1"},Lt={class:"text-xs uppercase tracking-wider text-text-secondary"},zt={class:"capitalize"},At=["disabled","title","onKeydown"],Mt=["title"],jt=["disabled"],$t=["innerHTML"],Ft={key:1,class:"opacity-60"},Ot={key:"tab-details",class:"space-y-6"},Kt={class:"grid grid-cols-2 gap-4 text-sm"},qt={class:"rounded-xl bg-orchit-white/5 border border-orchit-white/10 p-4"},Nt={class:"mt-1 font-medium"},Yt={class:"rounded-xl bg-orchit-white/5 border border-orchit-white/10 p-4"},Ht={class:"mt-1 font-medium"},Qt={class:"rounded-2xl border border-orchit-white/10 bg-orchit-white/5 p-4 grid grid-cols-1 gap-4"},Rt={class:"space-y-2"},Wt={class:"space-y-2"},Jt={class:"space-y-2"},Gt={class:"h-8 px-3 flex items-center gap-2 rounded-lg bg-bg-input border border-orchit-white/10"},Xt={class:"space-y-2"},Zt={key:0,class:"text-xs text-red-400 mt-1"},es={key:0,class:"space-y-2 sm:col-span-1"},ts={class:"text-xs uppercase tracking-wider text-text-secondary"},ss={key:1},as={class:"relative border-l border-orchit-white/10 pl-5 space-y-4 ml-1"},ls={class:"rounded-xl bg-orchit-white/5 border border-orchit-white/10 p-3 hover:bg-orchit-white/7 transition"},os={class:"font-semibold"},is={class:"font-semibold"},ns={key:"tab-comments",class:"space-y-4"},ds={class:"flex items-center gap-3 mb-2"},rs={class:"h-8 w-8 rounded-full bg-accent/15 text-accent flex items-center justify-center text-xs font-semibold"},us={class:"flex-1"},cs={class:"text-sm font-medium"},vs={class:"text-xs text-text-secondary"},ms={key:0,class:"flex items-center gap-2"},ps=["disabled","onClick"],fs=["disabled","onClick"],hs={class:"flex items-center gap-2 justify-end"},bs={key:0,class:"mt-3 grid grid-cols-2 gap-2"},xs=["href"],gs={class:"text-xs truncate"},_s={class:"rounded-xl border border-orchit-white/10 bg-orchit-white/5 overflow-hidden"},ws=["disabled"],ys={class:"flex items-center w-full justify-between p-2 border-t border-orchit-white/10"},ks={key:"tab-attachments",class:"space-y-3"},Cs={class:"text-xs text-text-secondary"},Ss={class:"grid sm:grid-cols-2 gap-4"},Ds={class:"p-3"},Vs={key:0,class:"rounded-lg overflow-hidden"},Es=["src"],Us={key:1,class:"rounded-lg overflow-hidden"},Is=["src"],Ps={key:2,class:"h-40 rounded-lg bg-black/5 grid place-items-center"},Ts={class:"mt-3"},Bs={class:"font-medium truncate"},Ls={class:"text-xs text-text-secondary capitalize"},zs={class:"p-3 pt-0"},As=["href"],Ms=dt({__name:"SidePanel",props:{pin:{type:Boolean,default:!1},showPanel:{type:Boolean,default:!0},details:{type:Object,default:()=>({})}},emits:["close","update:details","comment:post","priority:change"],setup(T,{emit:Ve}){var he,be,xe;const B=p(!1),{canCreateComment:H,canEditComment:O,canViewComment:ie,canDeleteComment:Ee,canEditCard:b,canViewAttachment:Ue,canAssignCard:Ie}=rt(),{workspaceId:Pe}=ut(),m=T,Te=Ve,ne=p(m.details._id),{data:i,isPending:de,isFetching:re}=ct(ne);$(m,()=>{ne.value=m.details._id});const L=p("details"),Be=[{label:"Details",value:"details"},{label:"Comments",value:"comments",disabled:ie},{label:"History",value:"history"},{label:"Attachment",value:"attachment"}],K=p(!1),w=p(i.value?i.value["card-title"]:""),Q=p(null);function Le(){b.value&&(K.value=!0,De(()=>{var t,e;(t=Q.value)==null||t.focus(),(e=Q.value)==null||e.select()}))}function ue(){var t;w.value.trim()||(w.value=m.details["card-title"]??""),b.value?S.mutate({card_id:m.details._id,variables:{"card-title":w.value.trim()}}):(w.value=((t=i.value)==null?void 0:t["card-title"])??"",oe.error("You do not have permission to do that"),console.log("you  dont have access to do that")),K.value=!1}const V=p(i!=null&&i.value?i==null?void 0:i.value["card-description"]:""),q=p(!1),R=p(null);function ze(t){var v,f;const e=(v=t==null?void 0:t.querySelector)==null?void 0:v.call(t,".ProseMirror");if(!e)return;e.focus();const a=(f=window.getSelection)==null?void 0:f.call(window),o=document.createRange();o.selectNodeContents(e),o.collapse(!1),a==null||a.removeAllRanges(),a==null||a.addRange(o)}async function Ae(){b.value&&(q.value=!0,await De(),ze(R.value||void 0))}function ce(t){console.log(t,"???"),S.mutate({card_id:m.details._id,attachments:t??[],variables:{"card-description":V.value}}),q.value=!1}function ve(t){var a;if(!q.value)return;const e=t.target;(a=R.value)!=null&&a.contains(e)||ce()}we(()=>document.addEventListener("mousedown",ve)),vt(()=>document.removeEventListener("mousedown",ve));const W=ye({posted_on:((he=m.details)==null?void 0:he.posted_on)??((be=m.details)==null?void 0:be.created_at)??""}),Me=U({get:()=>W.posted_on?new Date(W.posted_on).toISOString().slice(0,10):"",set:t=>{W.posted_on=t?new Date(t+"T00:00:00").toISOString():""}}),{data:J}=mt(Pe.value),G=p(i!=null&&i.value?i.value.workspace_lane_id:"");$([()=>i.value,()=>re.value],()=>{i!=null&&i.value&&(w.value=i==null?void 0:i.value["card-title"],V.value=i.value["card-description"],G.value=i.value.workspace_lane_id)});const je=U(()=>((J==null?void 0:J.value)??[]).map(t=>{var e;return{_id:t._id,title:((e=t==null?void 0:t.variables)==null?void 0:e["lane-title"])??String(t._id)}}));function $e(t){G.value=t,S.mutate({card_id:m.details._id,workspace_lane_id:t})}const x=p({startDate:null,endDate:null});$(()=>i.value,t=>{x.value.startDate=(t==null?void 0:t["start-date"])??null,x.value.endDate=(t==null?void 0:t["end-date"])??null},{immediate:!0,deep:!0});const X=U(()=>x!=null&&x.value.startDate&&x.value.endDate&&x.value.endDate<x.value.startDate?"End date cannot be before start date":""),Fe=t=>{x.value.startDate=t??null,S.mutate({card_id:m.details._id,variables:{"start-date":t}})},Oe=t=>{x.value.endDate=t??null,S.mutate({card_id:m.details._id,variables:{"end-date":t}})},Ke=U(()=>i==null?void 0:i.value.assigned_to),qe=t=>{S.mutate({card_id:m.details._id,seat_id:t==null?void 0:t._id})},Ne=U(()=>{var t;return(t=m.details)==null?void 0:t._id}),{data:Z}=pt(Ne),u=p((xe=Z.value)==null?void 0:xe.comments);$(()=>Z.value,()=>{var t;u.value=(t=Z.value)==null?void 0:t.comments});const{mutate:Ye,isPending:He}=ft({onSuccess:t=>{z.value="",M.value=[],u.value=[...u.value,t]}}),z=p(""),Qe=t=>(t??"").split(" ").map(e=>e[0]).filter(Boolean).slice(0,2).join("").toUpperCase(),Re=t=>t?new Date(t).toLocaleString():"",{data:We}=ht(),Je=t=>{var e;return((e=t==null?void 0:t.created_by)==null?void 0:e._id)===We.value},A=p(null),C=p(""),{mutate:Ge,isPending:me}=bt({onSuccess:t=>{const e=u.value.findIndex(a=>a._id===t._id);e>-1&&(u.value[e]={...u.value[e],comment_text:t.comment_text}),A.value=null,C.value=""}}),{mutate:Xe}=xt();function Ze(t){A.value=t._id,C.value=t.comment_text??""}function ee(){A.value=null,C.value="",K.value=!1}function et(t){const e=C.value.trim();if(!e)return;const a=u.value.findIndex(v=>v._id===t._id),o=a>-1?{...u.value[a]}:null;a>-1&&(u.value[a]={...u.value[a],comment_text:e}),Ge({id:t._id,payload:{comment_text:e}},{onError:()=>{a>-1&&o&&(u.value[a]=o)},onSuccess:v=>{a>-1&&(u.value[a]=v??u.value[a]),ee()}})}function tt(t){const e=u.value.findIndex(o=>o._id===t._id),a=e>-1?u.value[e]:null;e>-1&&u.value.splice(e,1),Xe({id:t._id},{onError:()=>{a&&u.value.splice(e,0,a)}})}const st=U(()=>{var t,e;return console.log((t=m.details)==null?void 0:t.attachments,">>>"),(e=i.value)==null?void 0:e.attachments.map(a=>{var o;return{_id:a._id??a.id??((o=crypto.randomUUID)==null?void 0:o.call(crypto))??Math.random(),name:a.name??a.filename??"file",url:a.url,kind:(a.type??a.kind??"").toLowerCase().includes("image")?"image":(a.type??a.kind??"").toLowerCase().includes("video")?"video":"file"}})}),te=gt(),S=_t({onSuccess:()=>{te.invalidateQueries({queryKey:["get-sheets"]}),te.invalidateQueries({queryKey:["sheet-list"]}),te.invalidateQueries({queryKey:["roles"]})}}),M=p([]),{mutate:at}=wt({onSuccess:t=>{M.value=[t]}});function lt(t){const e=t.target.files;Array.from(e).forEach(a=>{const o=new FormData;o.append("file",a),at(o)})}function ot(){const t=z.value.trim();!t&&!M.value.length||Ye({id:m.details._id,payload:{comment_text:t,attachments:M.value.map(e=>({name:e.data.name,url:e.data.url}))}})}const j=ye({}),pe=()=>{var t;(t=i==null?void 0:i.value)!=null&&t.variables&&(i.value.variables??[]).forEach(a=>{var v,f;if(!a||a.type!=="Select")return;const o=Array.isArray(a.data)&&a.data.length?((v=a.data[0])==null?void 0:v.value)??((f=a.data[0])==null?void 0:f._id)??a.data[0]:void 0;j[a.slug]=a.value??j[a.slug]??o??null})};we(pe),$(()=>i.value,pe,{deep:!0});function fe(t,e){var o,v;j[e]=t,((v=(((o=i.value)==null?void 0:o.variables)??[]).find(f=>f.slug===e))==null?void 0:v.value)!==t&&S.mutate({card_id:m.details._id,variables:{[e]:t}})}function it(t){return t==="comments"&&!ie.value?(oe.error("You do not have permission to view comments"),!1):t==="attachment"&&!Ue.value?(oe.error("You do not have permission to view attachments"),!1):!0}return(t,e)=>r(re)||r(de)?(n(),d("div",Et,e[8]||(e[8]=[s("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):(n(),yt(F,{key:1,name:"panel",appear:""},{default:y(()=>{var a;return[N(s("div",{class:I(["flex flex-col h-full overflow-y-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-[6px] shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] border border-orchit-white/5 overflow-hidden transition-all duration-300 ease-in-out",B.value?"min-w-full max-w-full":"min-w-full max-w-[380px] sm:min-w-[380px]"]),role:"complementary","aria-label":"Details panel"},[s("div",Ut,[e[10]||(e[10]=s("h5",{class:"text-[18px] font-semibold tracking-tight"},"Details",-1)),s("div",It,[s("button",{class:"p-2 rounded-xl hover:bg-orchit-white/5 active:scale-[.98] cursor-pointer transition",onClick:e[0]||(e[0]=o=>B.value=!B.value),"aria-label":B.value?"Collapse details":"Expand details"},[s("i",{class:I(["fa-solid",B.value?"fa-compress":"fa-expand","text-lg"])},null,2)],8,Pt),s("button",{class:"p-2 rounded-xl hover:bg-orchit-white/5 active:scale-[.98] cursor-pointer transition",onClick:e[1]||(e[1]=()=>Te("close")),"aria-label":"Close details"},e[9]||(e[9]=[s("i",{class:"fa-solid fa-xmark text-lg"},null,-1)]))])]),s("div",Tt,[(n(!0),d(g,null,P((a=r(i))==null?void 0:a.variables,(o,v)=>(n(),d(g,{key:o.slug||`var-${v}`},[(o==null?void 0:o.type)==="Select"&&o.slug=="card-type"?(n(),d("div",Bt,[s("div",Lt,c(o.title),1),h(se,{disabled:!r(b),size:"sm",options:o==null?void 0:o.data.map(f=>({_id:f,title:f})),placeholder:"Select option",allowCustom:!1,"model-value":j[o.slug],"onUpdate:modelValue":f=>fe(f,o.slug)},null,8,["disabled","options","model-value","onUpdate:modelValue"])])):k("",!0)],64))),128)),s("div",zt,[h(F,{name:"fade-scale",mode:"out-in"},{default:y(()=>[K.value?N((n(),d("input",{disabled:!r(b),title:r(b)?"":"You do not have permission to edit this card",key:"title-edit",ref_key:"titleInput",ref:Q,"onUpdate:modelValue":e[2]||(e[2]=o=>w.value=o),onBlur:ue,onKeydown:[ke(Ce(ue,["prevent"]),["enter"]),ke(Ce(ee,["prevent"]),["esc"])],class:"w-full text-2xl font-semibold rounded-xl px-3 py-2 bg-orchit-white/5 border border-orchit-white/10 focus:outline-none focus:ring-2 focus:ring-accent/40 transition",type:"text","aria-label":"Edit title"},null,40,At)),[[ae,w.value]]):(n(),d("h1",{key:"title-view",class:I([r(b)?"cursor-text":"cursor-not-allowed","text-[20px] leading-[28px] font-semibold tracking-tight rounded-lg px-2 py-1 hover:bg-orchit-white/5 transition"]),onClick:Le,"aria-label":"Card title",title:r(b)?"":"You do not have permission to edit this card"},c(w.value||"Untitled"),11,Mt))]),_:1})]),s("div",null,[e[11]||(e[11]=s("h3",{class:"mb-2 text-base font-semibold tracking-wide px-1"},"Description",-1)),h(F,{name:"fade-scale",mode:"out-in"},{default:y(()=>[q.value?(n(),d("div",{key:"desc-edit",ref_key:"descEditorWrap",ref:R,class:"rounded-xl overflow-hidden border border-orchit-white/10 shadow-sm"},[h(Ct,{modelValue:V.value,"onUpdate:modelValue":e[3]||(e[3]=o=>V.value=o),onFocusOut:ce},null,8,["modelValue"])],512)):(n(),d("div",{key:"desc-view",class:I(["text-[15px] leading-6 text-text-secondary whitespace-pre-wrap rounded-xl px-4 py-3 border border-orchit-white/10 bg-orchit-white/5 hover:border-orchit-white/20 transition",r(b)?"cursor-text":"cursor-not-allowed"]),disabled:!r(b),onClick:Ae},[V.value?(n(),d("div",{key:0,innerHTML:V.value},null,8,$t)):(n(),d("span",Ft,"Click to add a description…"))],10,jt))]),_:1})]),h(St,{modelValue:L.value,"onUpdate:modelValue":e[4]||(e[4]=o=>L.value=o),options:Be,size:"md",beforeChange:it},null,8,["modelValue"]),h(F,{name:"section",mode:"out-in"},{default:y(()=>{var o,v,f,ge;return[L.value==="details"?(n(),d("section",Ot,[s("div",Kt,[s("div",qt,[e[12]||(e[12]=s("div",{class:"text-xs uppercase tracking-wider text-text-secondary"},"Posted On",-1)),s("div",Nt,c(Me.value),1)]),s("div",Yt,[e[13]||(e[13]=s("div",{class:"text-xs uppercase tracking-wider text-text-secondary"},"ID",-1)),s("div",Ht,c(T.details["card-code"]),1)])]),s("div",Qt,[s("div",Rt,[e[14]||(e[14]=s("div",{class:"text-xs uppercase tracking-wider text-text-secondary"},"Lane",-1)),h(se,{disabled:!r(b),size:"sm",options:je.value,placeholder:"Select lane",allowCustom:!1,"model-value":G.value,"onUpdate:modelValue":$e},null,8,["disabled","options","model-value"])]),s("div",Wt,[e[15]||(e[15]=s("div",{class:"text-xs uppercase tracking-wider text-text-secondary"},"Assign",-1)),h(Dt,{disabled:!r(Ie),onAssign:e[5]||(e[5]=l=>qe(l)),assigneeId:Ke.value,seat:r(i).seat},null,8,["disabled","assigneeId","seat"])]),T.pin?k("",!0):(n(),d(g,{key:0},[s("div",Jt,[e[17]||(e[17]=s("div",{class:"text-xs uppercase tracking-wider text-text-secondary"},"Start Date",-1)),s("div",Gt,[e[16]||(e[16]=s("i",{class:"fa-regular fa-calendar"},null,-1)),h(Se,{disabled:!r(b),placeholder:"Set start date",class:"w-full","model-value":x.value.startDate,"emit-as":"ymd","onUpdate:modelValue":Fe},null,8,["disabled","model-value"])])]),s("div",Xt,[e[19]||(e[19]=s("div",{class:"text-xs uppercase tracking-wider text-text-secondary"},"Target End",-1)),s("div",{class:I(["h-8 px-3 flex items-center gap-2 rounded-lg bg-bg-input border transition-colors",X.value?"border-red-500":"border-orchit-white/10"])},[e[18]||(e[18]=s("i",{class:"fa-regular fa-calendar"},null,-1)),h(Se,{disabled:!r(b),placeholder:"Set end date",class:"w-full","model-value":x.value.endDate,"emit-as":"ymd","onUpdate:modelValue":Oe},null,8,["disabled","model-value"])],2),X.value?(n(),d("p",Zt,c(X.value),1)):k("",!0)])],64)),r(de)?(n(),d(g,{key:1},[e[20]||(e[20]=s("div",{class:"bg-bg-surface/40 w-full animate-pulse h-8 p-1"},null,-1)),e[21]||(e[21]=s("div",{class:"bg-bg-surface/40 w-full animate-pulse h-8 p-1"},null,-1)),e[22]||(e[22]=s("div",{class:"bg-bg-surface/40 w-full animate-pulse h-8 p-1"},null,-1)),e[23]||(e[23]=s("div",{class:"bg-bg-surface/40 w-full animate-pulse h-6 p-1"},null,-1))],64)):(o=r(i))!=null&&o.variables?(n(!0),d(g,{key:2},P((v=r(i))==null?void 0:v.variables,(l,E)=>(n(),d(g,{key:l.slug||`var-${E}`},[l.type==="Select"&&l.slug!=="card-type"?(n(),d("div",es,[s("div",ts,c(l.title),1),h(se,{disabled:!r(b),size:"sm",options:l==null?void 0:l.data.map(D=>({_id:D,title:D})),placeholder:"Select option",allowCustom:!1,"model-value":j[l.slug],"onUpdate:modelValue":D=>fe(D,l.slug)},null,8,["disabled","options","model-value","onUpdate:modelValue"])])):k("",!0)],64))),128)):k("",!0)])])):L.value==="history"?(n(),d("section",ss,[s("div",null,[e[26]||(e[26]=s("h3",{class:"text-sm font-semibold tracking-wide mb-3"},"History",-1)),s("ol",as,[(n(!0),d(g,null,P((f=r(i))==null?void 0:f.history,(l,E)=>(n(),d("li",{key:E,class:"group"},[e[25]||(e[25]=s("span",{class:"absolute -left-[5px] top-0 w-2 h-2 rounded-full bg-accent/70 ring-4 ring-accent/10"},null,-1)),s("div",ls,[s("span",os,c(l.user.u_full_name),1),e[24]||(e[24]=s("span",{class:"text-text-secondary"}," changed ",-1)),s("span",is,c(l.field_name),1)])]))),128))])])])):L.value==="comments"?(n(),d("section",ns,[(n(!0),d(g,null,P(u.value??[],l=>{var E,D,_e;return n(),d("div",{key:l._id,class:"rounded-xl border border-orchit-white/10 bg-orchit-white/5 p-4 hover:bg-orchit-white/7 transition"},[s("div",ds,[s("div",rs,c(Qe((E=l.commented_by)==null?void 0:E.u_full_name)),1),s("div",us,[s("div",cs,c((D=l.commented_by)==null?void 0:D.u_full_name),1),s("div",vs,c(Re(l.created_at)),1)]),Je(l)?(n(),d("div",ms,[A.value!==l._id?(n(),d("button",{key:0,disabled:!r(O),class:"text-xs text-accent hover:underline",onClick:_=>Ze(l)},"Edit",8,ps)):k("",!0),s("button",{disabled:!r(Ee),class:"text-xs text-red-400 hover:underline",onClick:_=>tt(l)},"Delete",8,fs)])):k("",!0)]),h(F,{name:"fade",mode:"out-in"},{default:y(()=>[A.value!==l._id?(n(),d("p",{key:`c-view-${l._id}`,class:"text-[15px] leading-6"},c(l.comment_text),1)):(n(),d("div",{key:`c-edit-${l._id}`,class:"space-y-2"},[N(s("textarea",{"onUpdate:modelValue":e[6]||(e[6]=_=>C.value=_),rows:"3",class:"w-full p-3 rounded-lg bg-bg-input/80 border border-orchit-white/10 focus:ring-2 focus:ring-accent/40 outline-none"},null,512),[[ae,C.value]]),s("div",hs,[h(le,{variant:"secondary",size:"sm",onClick:ee},{default:y(()=>e[27]||(e[27]=[Y("Cancel")])),_:1,__:[27]}),h(le,{class:"btn",size:"sm",onClick:_=>et(l),disabled:!C.value.trim()||r(me)||!r(O)},{default:y(()=>[Y(c(r(me)?"Saving…":"Save"),1)]),_:2},1032,["onClick","disabled"])])]))]),_:2},1024),(_e=l==null?void 0:l.attachments)!=null&&_e.length?(n(),d("div",bs,[(n(!0),d(g,null,P(l.attachments,(_,nt)=>(n(),d("a",{key:nt,href:_.url,target:"_blank",class:"group flex items-center gap-2 rounded-lg border border-orchit-white/10 bg-orchit-white/5 px-2 py-1 hover:bg-orchit-white/10 transition"},[e[28]||(e[28]=s("i",{class:"fa-regular fa-file text-text-secondary group-hover:text-text-primary transition"},null,-1)),s("span",gs,c(_==null?void 0:_.name),1)],8,xs))),128))])):k("",!0)])}),128)),s("div",_s,[N(s("textarea",{disabled:!r(H)||!r(O),"onUpdate:modelValue":e[7]||(e[7]=l=>z.value=l),rows:"3",class:I([r(H)||r(O)?"cursor-text":"cursor-not-allowed","w-full p-3 bg-transparent outline-none text-sm"]),placeholder:"Write a comment"},null,10,ws),[[ae,z.value]]),s("div",ys,[s("input",{type:"file",multiple:"",onChange:lt,class:"max-w-full text-ellipsis text-xs text-text-secondary file:mr-3 col-span-2 file:px-3 file:py-1.5 file:rounded-md file:border file:border-orchit-white/10 file:bg-orchit-white/10 hover:file:bg-orchit-white/15 file:text-text-primary transition inline w-fit"},null,32),h(le,{variant:"primary",class:"min-w-[70px]",size:"sm",onClick:ot,disabled:!z.value.trim()&&!M.value.length||!r(H)},{default:y(()=>[Y(c(r(He)?"Posting…":"Post"),1)]),_:1},8,["disabled"])])])])):(n(),d("section",ks,[s("div",Cs," Files attached to this "+c(((ge=T.details)==null?void 0:ge.type)??"item")+". ",1),s("div",Ss,[(n(!0),d(g,null,P(st.value,l=>(n(),d("div",{key:l._id,class:"rounded-2xl overflow-hidden border border-orchit-white/10 bg-orchit-white/5 hover:bg-orchit-white/8 transition group"},[s("div",Ds,[l.kind==="image"?(n(),d("div",Vs,[s("img",{src:l.url,class:"w-full h-40 object-cover group-hover:scale-[1.02] transition"},null,8,Es)])):l.kind==="video"?(n(),d("div",Us,[s("video",{src:l.url,controls:"",class:"w-full h-40 object-cover"},null,8,Is)])):(n(),d("div",Ps,e[29]||(e[29]=[s("i",{class:"fa-regular fa-file text-3xl text-text-secondary"},null,-1)]))),s("div",Ts,[s("div",Bs,c(l.name),1),s("div",Ls,c(l.kind),1)])]),s("div",zs,[s("a",{href:l.url,target:"_blank",rel:"noopener",class:"w-full inline-flex items-center justify-center gap-2 h-9 rounded-lg bg-accent text-orchit-white text-sm hover:opacity-90 transition"},e[30]||(e[30]=[s("i",{class:"fa-regular fa-arrow-up-right-from-square"},null,-1),Y(" View ")]),8,As)])]))),128))])]))]}),_:1})])],2),[[kt,T.showPanel]])]}),_:1}))}}),$s=Vt(Ms,[["__scopeId","data-v-92f632ba"]]);export{$s as default};
