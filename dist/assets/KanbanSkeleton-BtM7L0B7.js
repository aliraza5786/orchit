import{d as J,r as k,c as n,m as re,i as t,e,h as oe,y as o,j as c,b as W,aQ as q,t as _,a8 as ne,w as ie,g as w,I as de,F as S,x as D,f as G,o as s,H as U,D as ue,R as ce}from"./index-DblamYeD.js";import{o as ve}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-Bp2Cdcnx.js";const pe=["src"],fe={key:0,class:"font-bold"},me={class:"text-nowrap"},xe=["onClick"],be={class:"flex items-center gap-2 min-w-0 flex-1"},he=["src"],ye={class:"flex flex-col gap-1 max-w-40"},we={class:"overflow-hidden font-semibold overflow-ellipsis"},ge={key:0,class:"min-w-40 line-clamp-2 text-wrap text-text-secondary text-xs"},ke={key:1,class:"fa-regular text-left fa-arrows-spin animate-spin duration-250"},_e={key:0,class:"pl-2 flex items-center relative"},Ce=["onClick","aria-expanded","aria-label"],$e={class:"rounded-md border border-border bg-bg-dropdown shadow-lg w-28 py-1 flex flex-col text-sm"},ze=["onClick"],Se=["onClick"],De=J({__name:"Dropdown",props:{prefix:{},options:{default:()=>[]},modelValue:{default:""},variant:{default:"primary"},icon:{},size:{default:"md"},actions:{type:Boolean,default:!0}},emits:["update:modelValue","edit-option","delete-option"],setup(C,{emit:m}){const x=C,h=m,v=k(!1),r=k(null),y=n({get:()=>x.modelValue,set:l=>h("update:modelValue",l)}),u=n(()=>x.options.find(l=>l._id===y.value)??null);function N(){v.value=!v.value}function b(l){y.value=l._id,v.value=!1}const i=k(null),f=k(null);function $(l){f.value=null,i.value=i.value===l?null:l}function X(l){h("edit-option",l),i.value=null,f.value=null}function Y(l){h("delete-option",l),i.value=null,f.value=null}ve(r,()=>{v.value=!1,i.value=null,f.value=null});const p=n(()=>x.size==="sm"),Z=n(()=>p.value?"px-2 py-1 text-xs":"px-3 py-1.5 text-sm"),ee=n(()=>p.value?"text-xs":"text-sm"),se=n(()=>p.value?"text-xs":"text-sm"),ae=n(()=>p.value?"px-3 py-1":"px-4 py-2"),V=n(()=>p.value?"w-3.5 h-3.5":"w-4 h-4"),g=n(()=>p.value?"w-3.5 h-3.5":"w-4 h-4"),B=n(()=>p.value?"text-base":"text-lg"),te=n(()=>p.value?"w-3.5 h-3.5":"w-4 h-4"),le=n(()=>"dark:border-light-black border-border-gray");return re(()=>x.options,()=>{},{deep:!0}),(l,d)=>{var I,A,j,P,R,E,K,L,M,O,T;return s(),t("div",{ref_key:"dropdownRef",ref:r,class:"relative inline-block text-left"},[e("button",{onClick:N,type:"button",class:o(["text-nowrap inline-flex justify-between items-center gap-1 border rounded-md font-medium cursor-pointer transition bg-bg-surface",[Z.value,l.variant==="secondary"?"!bg-bg-body border-0":"border-border"]])},[(I=u.value)!=null&&I.prefix?(s(),t("span",{key:0,class:o(V.value)},[typeof((A=u.value)==null?void 0:A.prefix)=="string"?(s(),t("img",{key:0,src:(j=u.value)==null?void 0:j.prefix,class:o(g.value)},null,10,pe)):(s(),W(q((P=u.value)==null?void 0:P.prefix),{key:1,class:o(g.value)},null,8,["class"]))],2)):c("",!0),e("i",{class:o(`${(E=(R=u.value)==null?void 0:R.icon)==null?void 0:E.prefix} ${(L=(K=u.value)==null?void 0:K.icon)!=null&&L.iconName?(O=(M=u.value)==null?void 0:M.icon)==null?void 0:O.iconName:"file"} ${B.value}`)},null,2),e("span",{class:o(ee.value)},[l.prefix?(s(),t("span",fe,_(l.prefix)+":",1)):c("",!0),e("span",me,_((T=u.value)==null?void 0:T.title),1)],2),(s(),t("svg",{class:o([te.value,"text-text-secondary"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},d[2]||(d[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),oe(ne,{name:"fade-scale","enter-active-class":"transition duration-200 ease-out","leave-active-class":"transition duration-150 ease-in","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:ie(()=>[v.value?(s(),t("div",{key:0,class:o(["absolute max-h-[500px] overflow-visible z-12 mt-1 w-full min-w-fit rounded-md border border-border shadow-lg bg-bg-dropdown",le.value]),onClick:d[1]||(d[1]=w(()=>{},["stop"]))},[e("ul",{class:o(["py-1 z-[2]",se.value])},[(s(!0),t(S,null,D(l.options,a=>{var F,H,Q;return s(),t("li",{key:a._id,class:o(["group cursor-pointer flex items-stretch text-nowrap hover:bg-bg-dropdown-menu-hover",ae.value]),onClick:z=>b(a)},[e("div",be,[a.prefix?(s(),t("span",{key:0,class:o(V.value)},[typeof a.prefix=="string"?(s(),t("img",{key:0,src:a.prefix,class:o(g.value)},null,10,he)):(s(),W(q(a.prefix),{key:1,class:o(["text-text-primary",g.value])},null,8,["class"]))],2)):c("",!0),e("i",{class:o(`${(F=a.icon)==null?void 0:F.prefix} ${(H=a.icon)!=null&&H.iconName?(Q=a.icon)==null?void 0:Q.iconName:"file"} ${B.value}`)},null,2),e("div",ye,[e("span",we,_(a.title),1),a.description?(s(),t("p",ge,_(a.description),1)):c("",!0)]),(a==null?void 0:a.status)=="running"?(s(),t("i",ke)):c("",!0)]),l.actions?(s(),t("div",_e,[e("button",{class:"opacity-0 cursor-pointer group-hover:opacity-100 focus:opacity-100 transition rounded-md px-1.5 py-1 text-text-secondary hover:bg-bg-dropdown-menu-hover",onClick:w(z=>$(a._id),["stop"]),"aria-expanded":i.value===a._id?"true":"false","aria-label":`Actions for ${a.title}`}," â‹¯ ",8,Ce),i.value===a._id?(s(),t("div",{key:0,class:"absolute left-[100%] right-0 top-full mt-1 z-[20]",onClick:d[0]||(d[0]=w(()=>{},["stop"]))},[e("div",$e,[e("button",{class:"px-3 py-1.5 text-left hover:bg-bg-dropdown-menu-hover cursor-pointer",onClick:w(z=>X(a),["stop"])},d[3]||(d[3]=[e("i",{class:"fa-regular fa-edit"},null,-1),G(" Edit ")]),8,ze),e("button",{class:"px-3 py-1.5 text-left text-red-600 cursor-pointer",onClick:w(z=>Y(a),["stop"])},d[4]||(d[4]=[e("i",{class:"fa-regular fa-trash"},null,-1),G(" Delete ")]),8,Se)])])):c("",!0)])):c("",!0)],10,xe)}),128)),de(l.$slots,"more",{},void 0,!0)],2)],2)):c("",!0)]),_:3})],512)}}}),Pe=U(De,[["__scopeId","data-v-efeb28a5"]]),Ne={class:"p-4 overflow-x-auto flex-auto flex gap-6","aria-busy":"true","aria-live":"polite"},Ve={class:"flex-1 w-full overflow-y-auto space-y-3 px-2 pb-2",role:"presentation"},Be={key:0,class:"min-w-[328px]",role:"presentation"},Ie=J({__name:"KanbanSkeleton",props:{columns:{default:3},cardsPerColumn:{default:3},showAddList:{type:Boolean,default:!0}},setup(C){const m=C,x=n(()=>Array.from({length:m.columns},(v,r)=>r)),h=n(()=>Array.from({length:m.cardsPerColumn},(v,r)=>r));return(v,r)=>(s(),t("div",Ne,[(s(!0),t(S,null,D(x.value,(y,u,N,b)=>{const i=[m.cardsPerColumn];if(b&&b.key===y&&ue(b,i))return b;const f=(s(),t("div",{key:y,class:"kanban-col max-w-[328px] min-w-[328px] min-h-[555px] h-full bg-bg-body rounded-lg p-2 flex flex-col",role:"presentation"},[r[4]||(r[4]=e("div",{class:"flex justify-between items-center py-3 px-4 sticky top-0 bg-bg-body rounded-xl mb-2 z-10",role:"presentation"},[e("div",{class:"flex items-center gap-2"},[e("div",{class:"h-4 w-24 rounded shimmer","aria-hidden":"true"}),e("div",{class:"h-4 w-4 rounded-full shimmer","aria-hidden":"true"})]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"h-4 w-4 rounded shimmer","aria-hidden":"true"}),e("div",{class:"h-4 w-4 rounded shimmer","aria-hidden":"true"})])],-1)),e("div",Ve,[(s(!0),t(S,null,D(h.value,$=>(s(),t("div",{key:$,class:"bg-bg-card rounded-xl border border-border p-3 space-y-3 shadow-sm",role:"presentation"},r[2]||(r[2]=[ce('<div class="flex gap-2" data-v-5a4807f3><div class="h-5 w-14 rounded-full shimmer" aria-hidden="true" data-v-5a4807f3></div><div class="h-5 w-10 rounded-full shimmer" aria-hidden="true" data-v-5a4807f3></div></div><div data-v-5a4807f3><div class="h-4 w-3/4 rounded shimmer mb-2" aria-hidden="true" data-v-5a4807f3></div><div class="h-3 w-full rounded shimmer" aria-hidden="true" data-v-5a4807f3></div><div class="h-3 w-5/6 rounded shimmer mt-1" aria-hidden="true" data-v-5a4807f3></div></div><div class="flex justify-between items-center" data-v-5a4807f3><div class="h-4 w-20 rounded shimmer" aria-hidden="true" data-v-5a4807f3></div><div class="flex -space-x-2" data-v-5a4807f3><div class="w-6 h-6 rounded-full border-2 border-border shimmer" aria-hidden="true" data-v-5a4807f3></div><div class="w-6 h-6 rounded-full border-2 border-border shimmer" aria-hidden="true" data-v-5a4807f3></div></div></div>',3)])))),128)),r[3]||(r[3]=e("div",{class:"h-9 rounded shimmer mt-3","aria-hidden":"true"},null,-1))])]));return f.memo=i,f},r,0),128)),m.showAddList?(s(),t("div",Be,r[5]||(r[5]=[e("div",{class:"bg-bg-body rounded-lg p-4"},[e("div",{class:"h-9 rounded shimmer","aria-hidden":"true"})],-1)]))):c("",!0)]))}}),Re=U(Ie,[["__scopeId","data-v-5a4807f3"]]);export{Pe as D,Re as K};
