const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ConfirmDeleteModal-zSvP0es9.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-C2hfOyw_.js","assets/index-CivBloh4.js","assets/index-B1Qp1Dcf.css","assets/CreateVariableModal-GkB9OQCp.js","assets/KanbanBoard-Cla7ayuN.js","assets/vuedraggable.umd-kCR0tpIZ.js","assets/_commonjsHelpers-_d1bhYXs.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-8wXsQUEG.js","assets/KanbanBoard-Dffh696C.css"])))=>i.map(i=>d[i]);
import{d as ne,r as o,v as Ae,x as Ze,j as S,o as b,f as l,i as p,t as O,ao as Ge,w as P,k as q,ah as Y,h as k,F as X,y as he,J as Ye,W as Se,c as E,n as W,N as Le,ab as Je,aq as Xe,ag as $e,z as Be,D as se,e as J,E as oe,s as Ce,g as U,Z as ye,p as m,M as et,u as tt,a0 as at,a2 as lt,ar as st,a6 as ot,a7 as nt,a8 as it,a9 as rt,as as dt,_ as ut,B as we,ak as ae,q as ct,A as le}from"./index-CivBloh4.js";import{D as vt}from"./Dropdown-CBhClYka.js";import{_ as mt}from"./DropMenu.vue_vue_type_script_setup_true_lang-8wXsQUEG.js";import{_ as pt}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-C2hfOyw_.js";import{K as ft}from"./KanbanSkeleton-BXlBouRK.js";import{_ as gt}from"./CreateTaskModal.vue_vue_type_script_setup_true_lang-C8yXMB-a.js";import bt from"./SidePanel-DZf_qMTV.js";import kt from"./CreateSheetModal-B-3Mqe6h.js";import{F as xt}from"./fuse-Ch1WBRTM.js";import{l as Ct}from"./lodash-CQYOKM_D.js";import{_ as yt}from"./SearchBar.vue_vue_type_script_setup_true_lang-DJfSud0J.js";import"./IconPicker-CVKQTR0t.js";import"./AudioRecorder.vue_vue_type_script_setup_true_lang-CZuZRj6T.js";import"./_commonjsHelpers-_d1bhYXs.js";const wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAwTSURBVHgB7Z1rTxzXGcefMzM7C4Q1MYuXgLGNaws7GKtqljR1UlX0opKLkJNUqEriNFWj5kVcRf0I+RLJm7zqLW0dxVFbV44tVbHdWLh2iFSREsB2jS8YG3YX8GLY25yT84w9Foa9zOXMZRd+EtLCDrss/32u5zlnCawzBgcHVRZt/ymhrB2/J0RKU8LSoOVTMpAEDbGbH73//iL4BIF1RHd3t9ra1TPQEnssWu46ykhSgcKIH+KsK0F6evv6Wre3dzW3tJj+HSbRCSLRL7wSZt0IsvepH8Yl0OItsVZobWsDq3gljAzrgO7uvkYSpv14O6SGYVNTE1iFMBIlTOnsjveS0eHzM+AS60KQ2M4dP+O+IIy3qVaA6JYY2IPxxyDbenoPdHU/9cTk6IULORBMzQuy97vf7yKE7DG+p5TC5mgUZNnJS+fCaGTP/viTS//78kISBCJBjSODHF/9s4W5FDiGEJUSuW/w8OEDIJCaDupoHRKR+lb/vKExAjt37QJRYJoshfInRAT8mrYQXujtLPbzpcW0/iUKibAo0dSBwbffbgSH1GwM6e4eVCF8t6/U/RKPIZFNm0AcLIxZWNe++PTYfy8sg01q1kJYOFm22FhIzfFuSR6EPiejESUsDbz81m+tFzr3qV1BQlp7ufs1qkFCRHBfDQ/2MtCBn//6cBfYoHZjCIOK/ZG52zPCrcQAMzA7otSsILLMmitdg1YyM3Mb3AJFseq+atdlsXuVeSVSiQRklpbALWSm9b/0i8NRs9fXpCB7nnkmYuX66elpcA0eUzDQm02Ja75SNwPWJAluKa7BRTFbp9SkIPJcexYskuBWks9nwC0wJab5UH+l62qyMJydHdW2dOyIW/kdxoPO8nIWNjdXzAVsQwg07Pter8q7xDdKXVOzLouvX1jujbjuupC8vH/wrd/sL3V37aa9qmyr0Xd76oarWZcOI/FS8aQmBcGCbEvsMdvti2uTV1yNJxjkGQ31Fbur5mIIioEFGeNF3/zcHNgBF7Hu3lkEK8MQViEMIvviT+ZWLwfXlIUYYuBtXPOQQ/bfb5lsBm5cuwaugq5r8F115Y9qRpCVYhi0bHb2DseVxdsutlbQdUFs9qFssCZcVjExEEkNwZzDrGlpcRGYRKDxEcdrT8WhUuu+p+LjxsBE1VtIKTGQunAdd10N4BQsGt20FEalXuN2VVtIOTEMwqpqO7ivBC0ll8vZmumqBKE8wO96fnR09JRWtRZiRgwEg3vTZjHVN8aUy2Nj4lNijCUtKb1YrEpBzIphgKOjTjKulWD2deXiZeGiMEb0uqnqXJZVMRAcipOIDIvpOyACrFOSswmhwR7rkt3f3jdRVYLYEcOgvqEBMpllyGUtN4JLYsSV+oYwF10Bp6hETlaNIE7EMGjctInHgTn9HS6KLBf5zvwCEEWB+vp6cAJlkHNtchE3x9BNsXZghShoSkSRoLhtM5oqEMqLhVxy7Pz5onOyIsQwyOfzcPniGGh5DUSDCUTH9q0QCtWBHZgiJYQKgiKwhliXLEEnJbTd6u9jy1wi0oSWZuM8BdS7tSLFMMDAPHn5oiuiIJjVtbbFLAuD2+uECIJCyJHW/ZRoPWaHCyohadLErp6upKrWCR1mNsAU1u1elR1hHAvyeG9fj6TQuCghDPDFdGzfDm7ihSiIFWFsC4K7kqRG6LPjmiqBLY9de/eCF3glCoKva3NrDCK8nVNMHAZs0pYg3Qf6m4mW6WeEWRq3MUtX9z7+B4fAK3DpFkXJuzTFWAx8fXU8FQ9zkWR+W1akZCidPGZZEF0Mtjwg2kUZiN67YRYU48rFCU9FMeBJ+GQhefP0pUuXspbqEH3zZKjwPOP/N3CJBl75utHAqwRW87j3UOLvtLt374JXUAmGxs6dGUqlUnrKZ6m8pPV0J+8WuOKmgkIL73s18aXb6akbkF5YALegjN4kGhkeG/73Q2OTlgSRZdLDAw+4CaXu1AZWQP++vXPng7EgkcJgraWBNjx2/vOJYvebFgR3JDFy23XrWEr7dszIGjCebedfGFcSfIEKhbETYwiBrEZpEi1idPhM2UFi04JQmop40avHLQL4zsR/RlBAi2nb2qF/oSD4981M35rgFX9ElqXm1QkOYZRbAaR5OzhFCspULn3tFgZsM89lWhAWzeSg4E0vMpWaC5QgK0FxNj/adOrkR398yOXs2XNv4n58/Kyj3aSmBdEHmCMuTmCsYFF3DRnbTTo3kZh26q8fvLfG/zsV4sHjm71wdPSjnJ15WTug27o97dpxIrYpJYbQ57BysSZpLu5seRhsaYjcS+4UL8TQn8fKxSSrXgEPwXaG5kPlvBqvxNCfy8rFJBudxhQOPAIzmqmpG+AnXoqBWEqbcCNMdOs2hQAR3uEtBa6Buzo5WAavxdCfEywipdtGvLQSBCcHF9zY5F8GP8RALBcWflgJcoenwuH6eqircz8V9ksM/bnBBn5YCTLNg7zbu5v8FAOxVXrrVtK+bZkQ0gkeghsz78zPQ4hbiRuW4rcYiO1eSGLqWjLa3tlOPG7HG6JIigINDeKWZYIghv53gAOYWjjlh+tCcHOmqC0CQREDcdQtTF6/nmvZsmueyHQ3+ICIUc4giYE4bt8mbl1ZiG7tVLmltIIPGKOcOMaJZ/JaYWlxYfiT333wFQQIIUsc0mJsmAATelyqFfQBhcuX70+OmNsmgNdevXTV9tZptxCywIFZV3Pnthsyk/DALudj4DZBa8FtAujGFL5uUWyUCAW7NnkVFu8sAI4xbWl6ZGR2dtb/deP7CJ3tffw7P9pB1ELFA1a8wph9kqR77ztjtW8lMtDhkf98PgwBQegSoB5POraB11V8KXDbAfbC0HLwK59bezI4YTLMTE3WTlBfDa9Pph9r/1YjdwfuHYMgkKC5LVfmFrS7LUMNdQ3BWV2qAHv00cAEd1cEefe9t9VfvflGpMmHCUQ7MKaIPFHZEcIFOfLZZ42FdGYAxXj90KtQFaIwavqQSrcRLkh2PtPL+016f6tqRGGSCgFBqCC/P3aiR5LYQ4cHG6Lg3oigojBae4Kgq5I17eli96Eoh16vEvflM0IEOXLkiIpxo9w1rbFY9cQUHxEiSKE+EjfiRjmCGlMKRBL+WVJ2cSzIX47+s4tRtt/s9UEUJeTRRKYZHAmCcYMqkqXzcZGgiZKXWWD2QDgSBOOGGVdVjCCJQnLM5cN6zWNbkD99ciJuVwwDQxS/2yxfr9pW5ie2BPnDx5+2gaRZdlWroYSkH2nc8vEXpz/9M2VkBHxAYvQmBAjLguj1Roj1gUNICMbnJi8efePln+grjWPnTw9RvjYBHlMACEzrHbG8updLLz+Nh22BTfhaSZYy+uVrz7+wxiLG+ELR3vgPcnIInnBrH/xqWIgFxl0hltZDMG4QwrrBJuiispD72y9fHLhe6prE9NWZ5h0d/5c1udP4/Fq3oIROjA+dDZSFmHZZ6KqcxA0ikRF0UW8ePFgxgI+fPZsuhArH8B8GLsJkFpilWwNTa+pGS91OVoUuilA4/cpLz02CDbgL2++GCwvaWrqBKQtZ2VK3AiPyzWXIHbUrBjI2fGakIGtHRe5vxMcKohhIRQvBlnqpLm7ZB+Yu6tWB54ZAIPhhw/jpz05OIUIx0B2iW4QAUjao63Ejk/8xWDlggAduFpZOHnrhua9BMDjg3dzZcRW4++Ku0PIqn36iAgsdHz93eh4CSlkL+fDvx1+x4qrQRWVZ5rSZwO0U/Gg8opG4TOU2MxZz74wR5eTY+X/5NmFphpKCfPiP4wesdHG5cEOHXnzBl2obXRn3kZ0yI9HV4ujHXBCYKCRvfWX2eAs/KSoIttQ1mfSBCdBF0ULopFFx+83u3bvDSvMOfYcoW8jkRJ2w4BVrBLGS4mL7I3Hp0rl33nkn8O+8amFNsDYjRrn2xwbOeEiQey11rawY6KJyLHfszRcPVpUrqBYeFIZmWupW2h8b2EO3kPtxo4+VOL3vQfvjoP2KewNz6IKUa6ljbZHB2uKlDavwAgXjBjCts9id6KJeG+gX2v7YoDwKkWjPak+FgRtUcur1Z58N1OLNemBN2osuKocu6tkNF+UHClPUU1TLPS0zULG2OHSwf6O28JFvAIIRkdP2le58AAAAAElFTkSuQmCC",At=["aria-expanded","disabled"],ht={class:"truncate"},St=["onKeydown"],Lt=["aria-checked","onClick","onKeydown"],Bt={class:"rounded-full hover:bg-bg-dropdown-menu-hover px-1 text-text-primary"},It=ne({__name:"TypeChanger",props:{default:{},disabled:{type:Boolean,default:!1},cardId:{},data:{},placeholder:{}},emits:["onselect"],setup(N,{emit:j}){const D=N,M=o(D.default),n=o(!1),F=o(null),R=o(null);function L(r){if(D.data)return D.data.find(v=>v===r)}function B(){D.disabled||(n.value=!n.value)}function x(){n.value=!1}function I(r){M.value=r,A("onselect",r),x()}function w(r){var f;const v=(f=R.value)==null?void 0:f.querySelectorAll('button[role="menuitemradio"]');if(!(v!=null&&v.length))return;const u=v.length-1,h=Math.max(0,Math.min(r,u));v[h].focus()}function c(r){F.value&&(F.value.contains(r.target)||x())}Ae(()=>document.addEventListener("click",c)),Ze(()=>document.removeEventListener("click",c));const A=j;return(r,v)=>(b(),S("div",{ref_key:"root",ref:F,class:"relative inline-block text-left"},[l("button",{type:"button",class:"inline-flex !text-text-primary max-w-50 line-clamp-1 text-[10px] items-center gap-2 rounded-full px-3 py-1 focus:outline-none hover:opacity-90 bg-bg-body cursor-pointer","aria-expanded":n.value?"true":"false",onClick:B,disabled:r.disabled},[l("span",ht,O(L(M.value)??r.placeholder),1)],8,At),p(Ge,{name:"fade"},{default:P(()=>[n.value?(b(),S("div",{key:0,role:"menu",class:"absolute z-50 mt-2 max-w-20 origin-top-left rounded-md border border-border shadow-2xl bg-bg-dropdown p-2 left-0",onKeydown:Y(k(x,["prevent","stop"]),["esc"])},[l("ul",{class:"space-y-2 max-h-50 overflow-y-auto",ref_key:"list",ref:R},[(b(!0),S(X,null,he(r.data,(u,h)=>(b(),S("li",{key:h},[l("button",{role:"menuitemradio","aria-checked":M.value===u?"true":"false",class:"flex !text-text-primary w-full items-center justify-between cursor-pointer rounded px-1 py-1 text-[10px] gap-1 focus:outline-none focus:ring-2 hover:bg-bg-dropdown-menu-hover",onClick:f=>I(u),onKeydown:[Y(k(f=>w(h+1),["prevent"]),["down"]),Y(k(f=>w(h-1),["prevent"]),["up"])]},[l("span",Bt,O(u),1)],40,Lt)]))),128))],512)],40,St)):q("",!0)]),_:1})],512))}}),Vt=Ye(It,[["__scopeId","data-v-319c18d3"]]),Et={class:"flex justify-between gap-2 items-center"},Dt={class:"flex gap-2 py-2 flex-wrap"},Ft={class:"flex items-start justify-between mb-2"},Rt={class:"text-sm font-medium text-card-foreground leading-tight"},Mt={class:"flex justify-end pt-2 items-center text-xs gap-4 text-text-secondary"},_t={class:"flex justify-center items-center text-xs gap-1 text-text-secondary"},Pt={class:"flex justify-center items-center text-xs gap-1 text-text-secondary"},Wt=ne({__name:"KanbanCard",props:{ticket:{}},emits:["click"],setup(N,{emit:j}){const{canViewCard:D,canDeleteCard:M}=Se(),n=N,F={critical:"border-l-priority-critical",high:"border-l-priority-high",medium:"border-l-priority-medium",low:"border-l-priority-low"},R=E(()=>F[n.ticket.priority]??"border-l-gray-300"),L=o(!1),B=o(n.ticket["end-date"]??null);W(()=>{var s;return(s=n.ticket)==null?void 0:s.end_date},s=>{B.value=s??null});const x=E(()=>n.ticket["start-date"]),I=E(()=>n.ticket["end-date"]),w=o(n.ticket["start-date"]??null);W(x,()=>w.value=x.value),W(I,()=>B.value=I.value);const c=Le(),A=Je({onSuccess:()=>{c.invalidateQueries({queryKey:["people-lists"]}),c.invalidateQueries({queryKey:["get-sheets"]}),c.invalidateQueries({queryKey:["sheet-list"]}),c.invalidateQueries({queryKey:["roles"]})}}),{mutate:r,isPending:v}=Xe(n.ticket._id,{onSuccess:()=>{c.invalidateQueries({queryKey:["sheet-list"]}),L.value=!1}}),u=s=>{A.mutate({card_id:n.ticket._id,variables:s})};function h(){return[D.value?{label:"View Card",action:()=>ee("click",n.ticket),icon:{prefix:"fa-regular",iconName:"fa-eye"}}:null,M.value?{label:"Delete",danger:!0,action:()=>{L.value=!0},icon:{prefix:"fa-regular",iconName:"fa-trash"}}:null].filter(Boolean)}const f=()=>{r({})},V=s=>{A.mutate({card_id:n.ticket._id,variables:{"start-date":s}})},$=s=>{A.mutate({card_id:n.ticket._id,variables:{"end-date":s}})},ee=j;return(s,a)=>{var C,z,Q,y,K;return b(),S(X,null,[l("div",{onClick:a[5]||(a[5]=d=>s.$emit("click")),class:Be(["bg-bg-card rounded-lg p-4 pt-0 shadow-sm cursor-grab border-t-4 hover:shadow-md transition-all duration-200 active:cursor-grabbing",R.value]),style:$e({borderColor:(z=(C=s.ticket)==null?void 0:C.lane)==null?void 0:z.variables["lane-color"]})},[l("div",Et,[l("div",Dt,[(b(!0),S(X,null,he(s.ticket.variables,(d,te)=>{var T;return se((b(),J(Vt,{key:te,onClick:a[0]||(a[0]=k(()=>{},["stop"])),default:d==null?void 0:d.value,data:d==null?void 0:d.data,cardId:(T=s.ticket)==null?void 0:T._id,onOnselect:a[1]||(a[1]=Z=>u(Z))},null,8,["default","data","cardId"])),[[oe,(d==null?void 0:d.type)==="Select"&&(d==null?void 0:d.visible_on_card)]])}),128))]),p(mt,{onClick:a[2]||(a[2]=k(()=>{},["stop"])),items:h()},{trigger:P(()=>a[12]||(a[12]=[l("i",{class:"cursor-pointer fa-solid fa-ellipsis"},null,-1)])),_:1},8,["items"])]),l("div",Ft,[l("h3",Rt,O(s.ticket["card-title"]),1)]),a[3]||(Ce(-1,!0),(a[3]=l("p",{innerHTML:s.ticket["card-description"],class:"text-xs text-muted-foreground mb-3 text-text-secondary line-clamp-2"},null,8,["innerHTML"])).cacheIndex=3,Ce(1),a[3]),l("div",Mt,[l("div",_t,[a[13]||(a[13]=l("i",{class:"fa-regular fa-message"},null,-1)),U(" "+O((Q=s.ticket)==null?void 0:Q.comments_count),1)]),l("div",Pt,[a[14]||(a[14]=l("i",{class:"fa-regular fa-file"},null,-1)),U(" "+O((K=(y=s.ticket)==null?void 0:y.attachments)==null?void 0:K.length),1)])]),l("div",{onClick:a[4]||(a[4]=k(()=>{},["stop"])),class:"flex gap-2 text-xs text-text-secondary mt-2"},[p(ye,{placeholder:"set start date","model-value":w.value,theme:"dark","emit-as":"ymd","onUpdate:modelValue":V},null,8,["model-value"]),a[15]||(a[15]=U(" - ")),p(ye,{placeholder:"set end date","model-value":B.value,theme:"dark","emit-as":"ymd","onUpdate:modelValue":$},null,8,["model-value"])])],6),l("div",{class:"no-drag-zone",draggable:"false",onMousedown:a[9]||(a[9]=k(()=>{},["stop"])),onTouchstart:a[10]||(a[10]=k(()=>{},["stop"])),onPointerdown:a[11]||(a[11]=k(()=>{},["stop"]))},[p(pt,{onClick:a[6]||(a[6]=k(()=>{},["stop"])),modelValue:L.value,"onUpdate:modelValue":a[7]||(a[7]=d=>L.value=d),title:"Delete Ticket",itemLabel:"Ticket",itemName:s.ticket.title,requireMatchText:s.ticket.title,confirmText:"Delete Ticket",cancelText:"Cancel",size:"md",loading:m(v),onConfirm:f,onCancel:a[8]||(a[8]=()=>{L.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"])],32)],64)}}}),jt={class:"flex-auto flex-grow h-full bg-bg-card rounded-[6px] border border-border overflow-x-auto flex-col flex"},Kt={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1"},Tt={class:"flex overflow-x-auto gap-3 p-4"},Ot={class:"flex flex-col items-center justify-center gap-2 py-10"},Ut={key:0,class:"bg-bg-body rounded-lg p-4"},Qt={class:"flex items-center mt-3 gap-3"},Ht=["disabled"],oa=ne({__name:"Pin",setup(N){var ve,me;const j=ae(()=>le(()=>import("./ConfirmDeleteModal-zSvP0es9.js"),__vite__mapDeps([0,1,2,3]))),D=ae(()=>le(()=>import("./CreateVariableModal-GkB9OQCp.js"),__vite__mapDeps([4,2,3]))),M=ae(()=>le(()=>import("./KanbanBoard-Cla7ayuN.js"),__vite__mapDeps([5,6,7,2,3,8,1,9]))),{canEditSheet:n,canDeleteSheet:F,canCreateVariable:R,canCreateSheet:L}=Se(),B=o(!1),x=o(!1),I=o(!1),w=o(!1),c=o(),A=o(!1),r=o(""),v=o(),u=o([]),h=ct(),{workspaceId:f,moduleId:V}=et(),$=tt(),ee=Le(),{data:s,refetch:a}=at({workspace_id:f,workspace_module_id:V},{onSuccess:()=>te()}),C=o(((me=(ve=s.value)==null?void 0:ve[0])==null?void 0:me._id)??null),{data:z}=lt(f.value,V.value,C),Q=E(()=>{var t,e;return((e=(t=z.value)==null?void 0:t[0])==null?void 0:e._id)??""}),y=o(Q.value);W(Q,t=>y.value=t),W(s,t=>{t!=null&&t.length&&(C.value=t[0]._id)});const{data:K,isPending:d,refetch:te}=st(V,C,E(()=>[...$.selectedLaneIds]),y);W(K,()=>u.value=JSON.parse(JSON.stringify(K.value||[]))),Ae(()=>u.value=JSON.parse(JSON.stringify(K.value||[])));const{mutate:T,isPending:Z}=ot({onSuccess:(t,e)=>{e.is_trash?(u.value=u.value.filter(g=>g.title!==e.value),w.value=!1):u.value=[...u.value,{title:t==null?void 0:t.value}],A.value=!1,r.value="",ee.invalidateQueries({queryKey:["sheet-list"]}),Object.assign({newColumn:"",showDelete:!1,activeAddList:!1})}});function ie(t){T({workspace_id:f.value,module_id:V.value,variable_id:y.value,value:t})}const Ie=E(()=>{const t={};return n.value&&(t["onEdit-option"]=Qe),F.value&&(t["onDelete-option"]=Oe),t});function re(){const t=r.value.trim();t&&ie(t)}function Ve({title:t,oldTitle:e}){T({workspace_id:h.params.id,module_id:h.params.module_id,new_value:t,value:e,variable_id:y.value})}function Ee(){T({value:c.value.title,workspace_id:f.value,module_id:V.value,newValue:c.value.title,variable_id:y.value,is_trash:!0})}function De(t){w.value=!0,c.value=t}const Fe=nt(),Re=it();function Me(t){const{type:e,meta:g}=t;e==="column"?Fe.mutate({payload:{workspace_id:f.value,workspace_module_id:V.value,variable_id:y.value,moved_value:g.id,new_index:g.newIndex}}):Re.mutate({payload:{workspace_id:f.value,card_id:g.moved._id,group_value:g.fromColumnId,group_variable_id:y.value,new_index:g.newIndex,sheet_id:C.value}})}function _e(t){}function de(t){v.value=t}function Pe(t){v.value=t}function ue(t){I.value=!0,c.value=t}function We(){_.value={},x.value=!x.value}function ce(){A.value=!A.value}const je=E(()=>(s.value||[]).map(t=>({_id:t._id,title:t.variables["sheet-title"],description:t.variables["sheet-description"],icon:t.icon}))),H=o(!1),_=o(),{mutate:Ke,isPending:Te}=rt({onSuccess:()=>{console.log(">>. clicong"),H.value=!1,a()}});function Oe(t){H.value=!0,_.value=t}function Ue(){var t;Ke({sheet_id:(t=_.value)==null?void 0:t._id,workspace_module_id:V.value,is_trash:!0})}function Qe(t){x.value=!0,_.value=t}const G=o(""),He=o("");W(G,Ct.debounce(t=>{He.value=t},200));const qe=E(()=>{const t=u.value.flatMap(e=>e.cards.map(g=>({...g,columnId:e.title})));return new xt(t,{keys:["card-title","card-description"],threshold:.3})}),Ne=E(()=>{if(!G.value)return u.value;const t=qe.value.search(G.value).map(e=>e.item);return u.value.map(e=>({...e,cards:t.filter(g=>g.columnId===e.title)}))});return(t,e)=>{var g,pe,fe,ge,be,ke,xe;return b(),S(X,null,[l("div",jt,[l("div",Kt,[p(vt,dt({modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=i=>C.value=i),options:je.value,variant:"secondary"},Ie.value,{canEdit:m(n),canDelete:m(F)}),{more:P(()=>[m(L)?(b(),S("div",{key:0,onClick:We,class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[13]||(e[13]=[l("i",{class:"fa-solid fa-plus"},null,-1),U(" Add new ")]))):q("",!0)]),_:1},16,["modelValue","options","canEdit","canDelete"]),p(yt,{class:"max-w-[250px]",onOnChange:e[1]||(e[1]=i=>{G.value=i}),placeholder:"Search in Orchit AI space"})]),se(p(ft,null,null,512),[[oe,m(d)]]),se(l("div",Tt,[p(m(M),{onOnPlus:ue,"onDelete:column":De,"onUpdate:column":Ve,onReorder:Me,onAddColumn:ie,"onSelect:ticket":de,onOnBoardUpdate:_e,board:Ne.value,variable_id:y.value,sheet_id:C.value},{ticket:P(({ticket:i})=>[p(Wt,{onClick:ze=>Pe(i),ticket:i},null,8,["onClick","ticket"])]),emptyState:P(({column:i})=>[l("div",Ot,[e[15]||(e[15]=l("img",{src:wt,alt:""},null,-1)),e[16]||(e[16]=l("h1",{class:"text-sm text-text-primary mt-2"},"Start creating your pins",-1)),e[17]||(e[17]=l("p",{class:"text-sm text-text-secondary mb-2 text-center"}," Create pins and add your ideas into the related pins. ",-1)),p(we,{disabled:!m(R),size:"sm",onClick:ze=>ue(i)},{default:P(()=>e[14]||(e[14]=[U("Create Pin")])),_:2,__:[14]},1032,["disabled","onClick"])])]),_:1},8,["board","variable_id","sheet_id"]),l("div",{class:"min-w-[328px]",onClick:e[3]||(e[3]=k(()=>{},["stop"]))},[A.value?(b(),S("div",Ut,[p(ut,{autofocus:!0,modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=i=>r.value=i),placeholder:"Add New list",onKeyup:Y(re,["enter"])},null,8,["modelValue"]),e[18]||(e[18]=l("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),l("div",Qt,[p(we,{onClick:re,variant:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:P(()=>[U(O(m(Z)?"Adding...":"Add list"),1)]),_:1}),l("i",{class:"fa-solid fa-close",onClick:ce})])])):(b(),S("button",{key:1,class:Be(["text-sm text-text-primary py-2.5 font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",m(R)?"cursor-pointer":"cursor-not-allowed"]),onClick:k(ce,["stop"]),disabled:!m(R)}," + Add List ",10,Ht))])],512),[[oe,!m(d)]]),p(m(j),{modelValue:w.value,"onUpdate:modelValue":e[4]||(e[4]=i=>w.value=i),title:"Delete List",itemLabel:"list",itemName:(g=c.value)==null?void 0:g.title,requireMatchText:(pe=c.value)==null?void 0:pe.title,confirmText:"Delete List",cancelText:"Cancel",size:"md",loading:m(Z),onConfirm:Ee,onCancel:e[5]||(e[5]=()=>w.value=!1)},null,8,["modelValue","itemName","requireMatchText","loading"]),I.value?(b(),J(gt,{size:"md",pin:!0,selectedVariable:y.value,listId:(fe=c.value)==null?void 0:fe.title,sheet_id:C.value,key:"createTaskModalKey",modelValue:I.value,"onUpdate:modelValue":e[6]||(e[6]=i=>I.value=i)},null,8,["selectedVariable","listId","sheet_id","modelValue"])):q("",!0),p(kt,{sheet:_.value,size:"md",modelValue:x.value,"onUpdate:modelValue":e[7]||(e[7]=i=>x.value=i)},null,8,["sheet","modelValue"]),B.value?(b(),J(m(D),{key:1,modelValue:B.value,"onUpdate:modelValue":e[8]||(e[8]=i=>B.value=i),sheetID:C.value},null,8,["modelValue","sheetID"])):q("",!0),p(m(j),{onClick:e[9]||(e[9]=k(()=>{},["stop"])),modelValue:H.value,"onUpdate:modelValue":e[10]||(e[10]=i=>H.value=i),title:"Delete Sheet",itemLabel:"Sheet",itemName:(ge=_.value)==null?void 0:ge.title,requireMatchText:(be=_.value)==null?void 0:be.title,confirmText:"Delete Sheet",cancelText:"Cancel",size:"md",loading:m(Te),onConfirm:Ue,onCancel:e[11]||(e[11]=()=>{H.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"])]),(ke=v.value)!=null&&ke._id?(b(),J(bt,{key:0,pin:!0,details:v.value,showPanel:!!((xe=v.value)!=null&&xe._id),onClose:e[12]||(e[12]=()=>de({variables:{}}))},null,8,["details","showPanel"])):q("",!0)],64)}}});export{oa as default};
