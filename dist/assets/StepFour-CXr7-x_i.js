import{L as R}from"./Loader-CifcslBl.js";import{d as q,r as B,u as H,m as K,dl as M,dm as O,n as Y,aK as G,c as L,cY as I,e as J,j as n,p as W,o as r,f as t,k as d,g as u,t as a,F as C,y as E,ag as Q}from"./index-CtBe4ox5.js";import"./favicon-BAFXWHLW.js";const U={key:1,class:"w-full flex flex-col mb-[60px]"},X={class:"flex-wrap flex md:flex-nowrap gap-4 mb-6"},Z={class:"bg-bg-surface w-full text-text-primary rounded-xl p-6 flex-auto"},ee={class:"text-text-primary text-base font-semibold"},te={class:"mt-5 text-text-primary text-base font-semibold capitalize"},se={key:0,class:"mt-5 ttext-text-primary text-base font-semibold"},oe={key:0,class:"bg-bg-surface w-full text-text-primary rounded-xl p-6"},ae={class:"text-4xl font-bold"},re={class:"space-y-3"},le={class:"flex justify-between"},ne={class:"flex gap-2 items-center text-text-primary text-base font-semibold"},ie={key:0,class:"mr-2 text-lg"},ce={key:0,class:"h-full flex-grow flec flex-col"},de={class:"grid grid-cols-2 md:grid-cols-3 flex-wrap gap-3 md:gap-4"},ue={class:"bg-bg-surface text-text-primary px-4 py-3 rounded-lg"},me={class:"flex gap-4 items-center"},pe={class:"flex-1 min-w-0"},xe={class:"text-sm font-medium"},fe={class:"text-xs text-text-secondary line-clamp-2"},ye=q({__name:"StepFour",props:{ai:{type:Boolean}},emits:["back"],setup(N,{expose:T,emit:be}){const x=B(!1),m=H(),f=K(),{mutate:$,isPending:F}=M({onSuccess:s=>{f.push(`/workspace/peak/${s.workspace_id}/${s.job_id}`),m.setWorkspace(null)}}),{mutate:V,isPending:b}=O({onError:s=>console.error("Error creating workspace:",s),onSuccess:s=>{D.ai?$({workspace_id:s._id}):f.push(`/workspace/peak/${s._id}`),m.setWorkspace(null)}});Y(()=>b.value,s=>{s==!0&&(x.value=!0)});const o=B({title:"",description:"",workspace_type:"",roles:[],lanes:[]});G(()=>{try{const s=m.workspace??{};s&&(o.value=s)}catch(s){console.error("Error parsing workspace from localStorage",s)}});const v=L(()=>{var s,e;return(s=o.value.variables)!=null&&s.roles?(e=o.value.variables)==null?void 0:e.roles.reduce((i,c)=>c.max_num_people+i,0):0}),z=L(()=>{var s,e;return(s=o.value.variables)!=null&&s.roles?(e=o.value.variables)==null?void 0:e.roles.reduce((i,c)=>c.people.length+i,0):0}),{data:p}=I();function A(){var s;V({company_id:(s=p==null?void 0:p.value)==null?void 0:s._id,...o.value})}T({createProjectHandler:A});const D=N;return(s,e)=>{var i,c,_,g,y,k,w,j,h,S,P;return W(b)||W(F)||x.value?(r(),J(R,{key:0})):(r(),n("div",U,[e[10]||(e[10]=t("div",{class:"text-left w-full mb-6"},[t("h2",{class:"text-2xl md:text-4xl font-semibold text-text-primary text-left m-0"}," Project Summary "),t("p",{class:"text-sm md:text-base text-text-secondary text-left mt-3 sm:mt-5 mb-0 md:mb-4"}," Review your project details before creation ")],-1)),t("div",X,[t("div",Z,[e[6]||(e[6]=t("h3",{class:"text-xl font-semibold mb-5.5"},"Project Overview",-1)),t("p",ee,[e[0]||(e[0]=t("strong",{class:"text-text-secondary text-sm font-medium"},"Project Name",-1)),e[1]||(e[1]=t("br",null,null,-1)),u(a((c=(i=o.value)==null?void 0:i.variables)==null?void 0:c.title),1)]),t("p",te,[e[2]||(e[2]=t("strong",{class:"text-text-secondary text-sm font-medium"},"Project Type",-1)),e[3]||(e[3]=t("br",null,null,-1)),u(a((_=o.value)!=null&&_.variables?(g=o.value)==null?void 0:g.variables["workspace-type"]:"")+" Project ",1)]),(k=(y=o.value)==null?void 0:y.variables)!=null&&k.idea?(r(),n("p",se,[e[4]||(e[4]=t("strong",{class:"text-text-secondary text-sm font-medium"},"Description",-1)),e[5]||(e[5]=t("br",null,null,-1)),u(" "+a((j=(w=o.value)==null?void 0:w.variables)==null?void 0:j.idea),1)])):d("",!0)]),v.value?(r(),n("div",oe,[e[7]||(e[7]=t("h3",{class:"text-lg font-semibold mb-4"},"Team Assignment",-1)),t("p",ae,a(z.value)+" / "+a(v.value),1),e[8]||(e[8]=t("p",{class:"text-sm text-text-secondary mb-4"},"Total team Assigned",-1)),t("ul",re,[(r(!0),n(C,null,E((h=o.value.variables)==null?void 0:h.roles,l=>(r(),n("li",le,[t("span",ne,[l.role_emoji?(r(),n("span",ie,a(l.role_emoji),1)):d("",!0),u(" "+a(l.title),1)]),t("span",null,a(l.people.length)+" / "+a(l.max_num_people),1)]))),256))])])):d("",!0)]),((P=(S=o.value)==null?void 0:S.lanes)==null?void 0:P.length)>0?(r(),n("div",ce,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold text-text-primary mb-4"}," Selected Project Lanes ",-1)),t("div",de,[(r(!0),n(C,null,E(o.value.lanes,l=>(r(),n("div",ue,[t("div",me,[t("div",{class:"w-4 h-4 rounded-full aspect-square",style:Q(`background:${l.variables["lane-color"]}`)},null,4),t("div",pe,[t("p",xe,a(l.variables["lane-title"]),1),t("p",fe,a(l.variables["lane-description"]),1)])])]))),256))])])):d("",!0)]))}}});export{ye as default};
