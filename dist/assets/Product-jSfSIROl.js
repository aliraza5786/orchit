const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dropdown-N4wBajQH.js","assets/index-DkDAC3Va.js","assets/index-BMLa60ps.css","assets/index-CD16Swx0.js","assets/Dropdown-D_r5nJzj.css","assets/SearchBar-D9fewsho.js","assets/SearchBar.vue_vue_type_script_setup_true_lang-C9ByG9b5.js","assets/KanbanSkeleton-Cvw40GCw.js","assets/KanbanSkeleton-BjQaxKe3.css","assets/KanbanColumnCardsSkeleton-Bl2HBImu.js","assets/KanbanColumnCardsSkeleton-BDqNLelp.css","assets/BaseTextField-DYlezkNB.js","assets/KanbanTicket-Qq2Y9_RC.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-sIHymcp_.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-Cj7hP43k.js","assets/KanbanTicket-dlS9DisH.css","assets/TableView-CMwl4dIf.js","assets/TableView.vue_vue_type_script_setup_true_lang-CydDl_Mf.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-DYWAXxAd.js","assets/TableSearchCell-zk4oD_C_.js","assets/TableAssigneeCell-J8X9xX0O.js","assets/CalendarView-DwSj_f2u.js","assets/CalendarView-BkzIJC_N.css","assets/GanttChartView-FhdCeGfJ.js","assets/TimelineView-BC9bVCtm.js","assets/TimelineView-k1H_fj-O.css","assets/CreateTaskModal-CLHvsSOn.js","assets/CreateSheetModal-ZdUkar4v.js","assets/IconPicker-Bmsum0dM.js","assets/IconPicker-CIMr_3tu.css","assets/AudioRecorder.vue_vue_type_script_setup_true_lang-CUdj1R9Q.js","assets/CreateSheetModal--7RYCgy-.css","assets/CreateVariableModal-CHxhgx64.js","assets/ConfirmDeleteModal-DHWWnNdh.js","assets/SidePanel-BImeSGVA.js","assets/sidePanelStore-Dvr9tGsY.js","assets/SidePanel-CXc43vY9.css","assets/KanbanBoard-BW33x5UN.js","assets/vuedraggable.umd-ygNpMSOO.js","assets/_commonjsHelpers-_d1bhYXs.js","assets/KanbanBoard-BPQQrwQ8.css"])))=>i.map(i=>d[i]);
import{d as Ua,W as za,r as f,Q as ja,S as Ba,c as V,a2 as $a,x as U,a0 as Ha,a6 as Wa,u as Fa,as as Ka,ag as St,C as Tt,A as Qa,a7 as Za,a8 as Ga,a9 as Ya,a1 as Ja,ac as E,ad as Xa,U as el,ae as y,ab as tl,a3 as al,aa as ll,a as rl,af as il,m as L,g as o,h as D,f as N,n as k,w as K,i as v,F as z,G as Ze,l as be,ai as Vt,ah as Et,t as Ge,y as ol,T as sl,aj as Ye,ak as nl,H as h,o as p,k as Ee,am as At,V as Je,an as dl,al as Xe,N as ul}from"./index-DkDAC3Va.js";import{F as cl}from"./fuse-Ch1WBRTM.js";import{l as vl}from"./lodash-CQYOKM_D.js";import{k as me}from"./MindElixir-Ch35iPok.js";import{u as fl}from"./sidePanelStore-Dvr9tGsY.js";import"./_commonjsHelpers-_d1bhYXs.js";const pl={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-[6px] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex-col flex scrollbar-visible"},bl={class:"overflow-x-auto shrink-0 sticky top-0 z-20 bg-bg-card"},ml={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1 min-w-max h-full"},_l={class:"flex gap-3 items-center"},gl={class:"flex items-center gap-3 bg-bg-surface/50 h-[32px] px-2 rounded-md"},yl={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},hl={key:0,class:"bg-bg-body rounded-lg p-4"},xl={class:"flex items-center mt-3 gap-3"},kl=["disabled"],wl={class:"relative w-full h-full flex overflow-hidden"},Cl={key:0,class:"format-sidebar h-full py-4 px-4 w-[320px] border-l bg-bg-card overflow-x-hidden overflow-y-auto flex flex-col"},Sl={class:"flex items-center justify-between pb-3 mb-4 border-b"},Tl={class:"format-content space-y-6"},Vl={class:"format-group mb-3"},El={class:"flex items-center gap-2"},Al=["value"],Ll={class:"format-group mb-3"},Dl={class:"flex items-center gap-2"},Il=["value"],Pl={class:"grid grid-cols-1 gap-3"},Nl=["value"],Ml={class:"mt-6 pt-4"},Ol=["disabled"],ql={key:0,class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},Rl={key:0,class:"fixed inset-0 bg-black/30 flex items-center justify-center"},Ul={class:"bg-white p-6 rounded-xl w-80"},zl={class:"flex justify-end gap-2 mt-4"},jl=["disabled"],Bl={class:"flex items-center mt-3 gap-3"},$l=Ua({__name:"Product",setup(Hl){const et=y(()=>h(()=>import("./Dropdown-N4wBajQH.js"),__vite__mapDeps([0,1,2,3,4]))),Lt=y(()=>h(()=>import("./SearchBar-D9fewsho.js"),__vite__mapDeps([5,6,1,2]))),Dt=y(()=>h(()=>import("./KanbanSkeleton-Cvw40GCw.js"),__vite__mapDeps([7,1,2,8]))),It=y(()=>h(()=>import("./KanbanColumnCardsSkeleton-Bl2HBImu.js"),__vite__mapDeps([9,1,2,10]))),_e=y(()=>h(()=>import("./BaseTextField-DYlezkNB.js"),__vite__mapDeps([11,1,2]))),tt=y(()=>h(()=>import("./index-DkDAC3Va.js").then(t=>t.dq),__vite__mapDeps([1,2]))),Pt=y(()=>h(()=>import("./KanbanTicket-Qq2Y9_RC.js"),__vite__mapDeps([12,1,2,13,3,14,15]))),Nt=y(()=>h(()=>import("./TableView-CMwl4dIf.js"),__vite__mapDeps([16,17,1,2,18]))),Mt=y(()=>h(()=>import("./index-DkDAC3Va.js").then(t=>t.ds),__vite__mapDeps([1,2]))),at=y(()=>h(()=>import("./TableSearchCell-zk4oD_C_.js"),__vite__mapDeps([19,1,2]))),Ot=y(()=>h(()=>import("./TableAssigneeCell-J8X9xX0O.js"),__vite__mapDeps([20,1,2]))),qt=y(()=>h(()=>import("./CalendarView-DwSj_f2u.js"),__vite__mapDeps([21,1,2,22]))),Rt=y(()=>h(()=>import("./GanttChartView-FhdCeGfJ.js"),__vite__mapDeps([23,1,2]))),Ut=y(()=>h(()=>import("./TimelineView-BC9bVCtm.js"),__vite__mapDeps([24,1,2,25]))),zt=y(()=>h(()=>import("./CreateTaskModal-CLHvsSOn.js"),__vite__mapDeps([26,18,1,2]))),jt=y(()=>h(()=>import("./CreateSheetModal-ZdUkar4v.js"),__vite__mapDeps([27,1,2,28,29,30,31]))),Bt=y(()=>h(()=>import("./CreateVariableModal-CHxhgx64.js"),__vite__mapDeps([32,1,2]))),Ae=y(()=>h(()=>import("./ConfirmDeleteModal-DHWWnNdh.js"),__vite__mapDeps([33,14,1,2]))),$t=y(()=>h(()=>import("./SidePanel-BImeSGVA.js"),__vite__mapDeps([34,1,2,35,36]))),Ht=y(()=>h(()=>import("./KanbanBoard-BW33x5UN.js"),__vite__mapDeps([37,38,39,1,2,13,3,40]))),{canEditSheet:Le,canDeleteSheet:Wt,canCreateVariable:Q,canCreateSheet:ge,canCreateCard:j,canEditCard:M,canDeleteCard:lt,canAssignCard:De}=za(),te=f(!1),ae=f(null),le=f(!1),re=f(null),Ie=f(!1),b=f("kanban"),ie=f(null),Z=f(null),oe=f(!1),ye=Qa(),{workspaceId:A,moduleId:O}=ja(),T=Ba(),se=f(!1),S=f(),B=f(null),G=f(!1),he=f(!1),$=f(""),Pe=f(null),Ne=fl();function Ft(t){$.value="",he.value=!0,Pe.value=t}function Kt(){Pe.value&&Pe.value($.value),he.value=!1}function Qt(){he.value=!1}const rt=f([]),it=f([]),Zt=t=>{rt.value=t.filter(e=>!e._id),it.value=t.map(e=>e._id||e.id)},Me=f(null),Gt=t=>{Me.value=t},Yt=V(()=>{var t;return(t=I.value)==null?void 0:t.find(e=>e._id===C.value)}),ot=f(!1),st=f(!1);U(ot,t=>{t&&(st.value=!1)}),U(st,t=>{t&&(ot.value=!1)});const nt=async()=>{if(re.value)try{Ie.value=!0,await At({url:`workspace/card/${re.value}`,method:"DELETE"}),Xt(re.value),le.value=!1,ae.value=null,Je.success("Ticket deleted successfully"),await ne(),await we()}catch(t){Je.error(dl(t))}finally{Ie.value=!1}},Jt=async()=>{await nt()},Xt=t=>{var e;(e=g.value)==null||e.forEach(a=>{var r;(r=a.sheet_lists)==null||r.forEach(l=>{l.cards=l.cards.filter(u=>u._id!==t)})})},{data:xe,refetch:ne}=Ha({workspace_id:A,workspace_module_id:O}),Oe=V(()=>{var t;return xe.value?(t=xe.value[0])==null?void 0:t._id:""}),w=f(Oe.value),{data:I,isPending:ea}=$a(A,O,w),{mutate:qe,isPending:Re}=Wa({onSuccess:()=>{T.invalidateQueries({queryKey:["sheet-list"]}),Y.value="",J.value=!1,ue.value=!1,J.value=!1}}),dt=V(()=>{var t;return((t=Yt.value)==null?void 0:t.title)==="Process"&&Me.value?{variable_slug:"card-type",type_value:Me.value.title}:{}}),ut=t=>{const e={workspace_id:A.value,module_id:O.value,variable_id:C.value,value:t,...dt.value};qe(e)};U(Oe,()=>{w.value=Oe.value});const Ue=V(()=>{var t;return I!=null&&I.value?(t=I==null?void 0:I.value[0])==null?void 0:t._id:""}),C=f(Ue.value);U(Ue,()=>{C.value=Ue.value});const ke=Fa(),g=f([]),{data:ta,isLoading:aa,isFetchingNextPage:ze,fetchNextPage:ct,hasNextPage:vt,refetch:we}=Ka(O,w,V(()=>[...ke.selectedLaneIds]),C,dt);St(()=>{var r;const e=(((r=ta.value)==null?void 0:r.pages)||[]).flatMap(l=>l.data||[]),a=new Map;e.forEach(l=>{const u=l.title;if(!a.has(u))a.set(u,{...l,cards:[...l.cards||[]]});else{const d=a.get(u),c=new Set((d.cards||[]).map(i=>i._id)),n=(l.cards||[]).filter(i=>!c.has(i._id));n.length>0&&(d.cards=[...d.cards,...n]),l.transitions&&(d.transitions=l.transitions),l.flow_metadata&&(d.flow_metadata=l.flow_metadata),l.style&&(d.style=l.style)}}),g.value=Array.from(a.values()),g.value.sort((l,u)=>{var n,i;const d=((n=l.flow_metadata)==null?void 0:n.sort_order)??l.sort_order??999,c=((i=u.flow_metadata)==null?void 0:i.sort_order)??u.sort_order??999;return d-c})});const la=V(()=>aa.value&&!g.value.length),ra=V(()=>ze.value),ft=f(null),pt=t=>{const e=t.target;!vt.value||ze.value||e.scrollLeft+e.clientWidth>=e.scrollWidth-200&&ct()},bt=t=>{const e=t.target;!vt.value||ze.value||e.scrollTop+e.clientHeight>=e.scrollHeight-200&&ct()};Tt(()=>{var t,e;(e=(t=ft.value)==null?void 0:t.$el)==null||e.addEventListener("scroll",bt)}),Tt(()=>{mt()}),U(()=>ye.params.card_id,()=>mt());async function mt(){const t=ye.params.card_id;if(!t)return;Ne.saveLocalId(t),R({_id:t,id:t})}const R=t=>{t._id||(t._id=t.id),S.value=t,Ne.selectTaskCard(t)};window.selectCardHandler=R;const ia=()=>{S.value=null,Ne.clearSelectedCard()},de=f(!1),oa=()=>{W.value={},de.value=!de.value},sa=Za(),na=Ga();function da(t){t.type==="column"?sa.mutate({payload:{workspace_id:A.value,workspace_module_id:O.value,variable_id:C.value,moved_value:t.meta.id,new_index:t.meta.newIndex}},{onSuccess:()=>{ne(),we()}}):na.mutate({payload:{workspace_id:A.value,card_id:t.meta.moved._id,group_value:t.meta.fromColumnId,group_variable_id:C.value,new_index:t.meta.newIndex,sheet_id:w.value}},{onSuccess:()=>{ne(),we()}})}const ua=t=>{},ca=V(()=>(xe.value||[]).map(t=>({_id:t._id,title:t==null?void 0:t.variables["sheet-title"],description:t==null?void 0:t.variables["sheet-description"],icon:t.icon,status:t==null?void 0:t.generation_status})));U(xe,t=>{var e;(t==null?void 0:t.length)>0&&(w.value=(e=t[0])==null?void 0:e._id)});const ue=f(!1),Y=f("");function je(){ue.value=!ue.value}function Ce(){const t=Y.value.trim();t&&ut(t)}const va=t=>{qe({workspace_id:ye.params.id,module_id:ye.params.module_id,new_value:t.title,value:t.oldTitle,variable_id:C.value})},J=f(!1),H=f(),fa=()=>{qe({value:H.value.title,workspace_id:A.value,module_id:O.value,newValue:H.value.title,variable_id:C.value,is_trash:!0})},pa=t=>{J.value=!0,H.value=t},ba=t=>{se.value=!0,H.value=t,localStorage.setItem("selectedStatusTitle",t==null?void 0:t.title)},Be=f(null),ma=()=>{se.value=!1,Be.value&&(Be.value.scrollLeft=0),T.resetQueries({queryKey:["sheetList",O.value,w.value]})},W=f();function _a(t){te.value=!0,W.value=t}const{mutate:_t,isPending:ga}=Ya({onSuccess:()=>{ne(),te.value=!1}});function ya(){var t;_t({sheet_id:(t=W.value)==null?void 0:t._id,workspace_module_id:O.value,is_trash:!0})}function ha(t){de.value=!0,W.value=t}const X=f(""),xa=f("");U(X,vl.debounce(t=>{xa.value=t},200));const gt=V(()=>{const e=(g.value||[]).flatMap(a=>(a.cards||[]).map(r=>{const l=Array.isArray(r.variables)?r.variables.find(u=>u.slug==="card-description"):null;return{...r,columnId:a.title,"card-description":r["card-description"]||(l==null?void 0:l.value)||""}}));return new cl(e,{keys:["card-title","card-description"],threshold:.3})}),ka=V(()=>{if(b.value!=="kanban"||!X.value)return g.value;const t=gt.value.search(X.value).map(e=>e.item);return g.value.map(e=>{var r;const a=t.filter(l=>l.columnId===e.title);return a.length===(((r=e.cards)==null?void 0:r.length)??0)&&a.every((l,u)=>{var d;return l._id===((d=e.cards[u])==null?void 0:d._id)})?e:{...e,cards:a}})}),Se=V(()=>{let t=g.value.flatMap(e=>(e.cards||[]).map(a=>{var r;return{...a,columnId:e.title,columnTitle:e.title,column_sort_order:((r=e.flow_metadata)==null?void 0:r.sort_order)??e.sort_order??999,"card-status":a["card-status"]||e.title}}));return X.value&&(t=gt.value.search(X.value).map(a=>a.item)),t.sort((e,a)=>e.column_sort_order!==a.column_sort_order?e.column_sort_order-a.column_sort_order:(e.sort_order||0)-(a.sort_order||0)),t}),{data:$e}=Ja(A),He=V(()=>(($e==null?void 0:$e.value)??[]).map(t=>{var e;return{_id:t._id,title:((e=t==null?void 0:t.variables)==null?void 0:e["lane-title"])??String(t._id)}})),wa=V(()=>{var t;return[{key:"card-title",label:"Title",render:({row:e,value:a})=>E("div",{class:"flex items-center gap-1 w-full ps-2"},[E("a",{onClick:()=>S.value=e,class:"text-[12px] underline text-blue-500 shrink-0 overflow-ellipsis cursor-pointer"},e["card-code"]),E("div",{class:"flex-1 min-w-0"},[E("input",{onFocusout:r=>{var l;ht(e,"card-title",(l=r==null?void 0:r.target)==null?void 0:l.value)},class:"text-[12px] w-full overflow-ellipsis capitalize p-1 w-full p-1 focus:border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-transparent focus:bg-bg-body text-[12px] h-8",defaultValue:a,disabled:!M.value})])])},{key:"end-date",label:"Due Date",render:({row:e,value:a})=>{const r=f(a);return E(Mt,{class:" capitalize flex items-center gap-2 text-[12px]",placeholder:"Set start date",tableInputClass:!0,modelValue:r.value,disabled:!M.value,"onUpdate:modelValue":l=>Aa(e,l),emptyText:"Date"})}},{key:"lane",label:"Lane",render:({row:e})=>{var a;return E(at,{options:He.value??[],placeholder:"Select lane",modelValue:((a=e.lane)==null?void 0:a._id)||null,disabled:!M.value,"onUpdate:modelValue":r=>La(e,r),displayField:"title",emptyText:"Lane"})}},{key:"created_by",label:"Owner",render:({value:e})=>E("div",{class:"capitalize flex items-center gap-2  px-3"},[E("div",{class:" rounded-full  "},[e!=null&&e.u_profile_image?E("img",{class:"w-6 h-6 rounded-full",src:e==null?void 0:e.u_profile_image}):E("div",{class:"w-5 h-5 rounded-full flex justify-center items-center text-[11px] ",style:`background:${e!=null&&e.u_full_name?Xa({name:e.u_full_name,email:e.u_email}):""}`},el(e==null?void 0:e.u_full_name))]),E("span",{class:"text-[12px]"},e?e==null?void 0:e.u_full_name:"")])},{key:"seat",label:"Assignee",render:({row:e,value:a})=>E(Ot,{class:"capitalize flex items-center gap-2 ",onAssign:r=>Ca(e,r),assigneeId:a,seat:a,name:!0,disabled:!De.value,emptyText:"Assignee"})},...((t=I.value)==null?void 0:t.filter(e=>{var a;return((a=e==null?void 0:e.type)==null?void 0:a.title)==="Select"}).map(e=>({key:e==null?void 0:e.slug,label:e==null?void 0:e.slug,render:({row:a,value:r})=>{var u;let l=r;if(Array.isArray(a==null?void 0:a.variables)){const d=a.variables.find(c=>c.slug===e.slug);d&&(l=d.value)}else l=((u=a==null?void 0:a.variables)==null?void 0:u[e.slug])??(a==null?void 0:a[e.slug])??r;return E("div",{class:"capitalize flex items-center gap-2"},[E(at,{options:Sa(e.data??[]),modelValue:l,disabled:!M.value,emptyText:e.slug,"onUpdate:modelValue":d=>{ht(a,e.slug,d)},columnName:e.slug})])},visible:e==null?void 0:e.is_visible})))??[]]}),Ca=(t,e)=>{const a=t==null?void 0:t._id;a?(Te(a,r=>{r.seat=e}),ce.mutate({card_id:a,seat_id:e==null?void 0:e._id})):(t.seat=e,ve(t))},Sa=t=>t.map(e=>({_id:e.value??e,title:e.value??e})),Ta=(t,e)=>{if(!g.value)return!1;let a=!1;const r=g.value.map(l=>{const u=(l.cards||[]).map(d=>{if(d._id!==t)return d;a=!0;const c={...d,...e};if(Array.isArray(d.variables)){const n=[...d.variables];Object.entries(e).forEach(([i,m])=>{const s=n.findIndex(_=>_.slug===i);s!==-1?n[s]={...n[s],value:m}:n.push({slug:i,value:m,type:"Text"})}),c.variables=n}else c.variables={...d.variables||{},...e};return c});return{...l,cards:u}});return g.value=r,a},ce=tl({onMutate:async t=>{const{card_id:e,variables:a}=t;await T.cancelQueries({queryKey:["product-card",e]}),await T.cancelQueries({queryKey:["sheet-list"]});const r=T.getQueryData(["product-card",e]),l=T.getQueryData(["sheet-list"]),u=d=>{if(!d)return d;const c={...d,variables:Array.isArray(d.variables)?[...d.variables]:{...d.variables||{}}};return a&&(Object.assign(c,a),Array.isArray(c.variables)?Object.entries(a).forEach(([n,i])=>{const m=c.variables.findIndex(s=>s.slug===n);m!==-1?c.variables[m]={...c.variables[m],value:i}:c.variables.push({slug:n,value:i,type:"Text"})}):Object.assign(c.variables,a)),t.optimisticUser&&(c.seat=t.optimisticUser),t.workspace_lane_id&&(c.workspace_lane_id=t.workspace_lane_id),c};return a&&g.value&&Ta(e,a),S.value&&S.value._id===e&&(S.value=u(S.value)),T.setQueryData(["product-card",e],u),T.setQueriesData({queryKey:["sheet-list"]},d=>Array.isArray(d)?d.map(c=>{var n;return{...c,cards:(n=c.cards)==null?void 0:n.map(i=>i._id===e?u(i):i)}}):d),Ye(g),{previousCard:r,previousLists:l}},onError:(t,e,a)=>{a!=null&&a.previousCard&&T.setQueryData(["product-card",e.card_id],a.previousCard),a!=null&&a.previousLists&&T.setQueryData(["sheet-list"],a.previousLists),S.value&&S.value._id===e.card_id&&(a!=null&&a.previousCard)&&(S.value=a.previousCard),console.log(t)}});function Va({cardId:t}){T.setQueriesData({queryKey:["sheet-list"]},e=>Array.isArray(e)?e.map(a=>({...a,cards:a.cards.map(r=>r._id===t?{...r,comment_count:(r.comment_count||0)+1}:r)})):e)}const Te=(t,e)=>{if(g.value)for(const a of g.value){if(!a.cards)continue;const r=a.cards.findIndex(l=>l._id===t);if(r!==-1){const l=a.cards[r];e(l),Ye(g);break}}},{mutate:yt}=al({onSuccess:()=>{T.invalidateQueries({queryKey:["sheet-list"]}),rt.value=[],it.value=[]}});function ve(t){var u,d;const e=t["card-title"],a=((u=t.lane)==null?void 0:u._id)||t.workspace_lane_id;let r=t["card-status"],l=t["card-type"];if(Array.isArray(t.variables)){const c=t.variables.find(i=>i.slug==="card-status");c&&(r=c.value);const n=t.variables.find(i=>i.slug==="card-type");n&&(l=n.value)}else typeof t.variables=="object"&&t.variables!==null&&(r=t.variables["card-status"]||r,l=t.variables["card-type"]||l);if(e&&r&&l){const c={};I.value&&I.value.forEach(i=>{c[i.slug]=null}),c["card-title"]=e.trim(),c["card-status"]=r,c["card-type"]=l,Object.keys(t).forEach(i=>{c.hasOwnProperty(i)&&(c[i]=t[i])}),Array.isArray(t.variables)?t.variables.forEach(i=>{c.hasOwnProperty(i.slug)&&(c[i.slug]=i.value)}):typeof t.variables=="object"&&t.variables!==null&&Object.entries(t.variables).forEach(([i,m])=>{c.hasOwnProperty(i)&&(c[i]=m)});const n={sheet_list_id:r,workspace_id:A.value,sheet_id:w.value,workspace_lane_id:a,seat_id:((d=t.seat)==null?void 0:d._id)||t.seat_id||null,variables:c,"start-date":t["start-date"]||null,"end-date":t["end-date"]||null,createdAt:new Date().toISOString()};yt(n)}}function ht(t,e,a){const r=t==null?void 0:t._id,l=typeof a=="string"?a.trim():a;if(r)Te(r,u=>{var d;if(u[e]=l,Array.isArray(u.variables)){const c=u.variables.findIndex(n=>n.slug===e);c!==-1?u.variables[c].value=l:u.variables.push({slug:e,value:l,type:"Text"})}else typeof u.variables=="object"&&u.variables!==null&&(u.variables[e]=l);((d=S.value)==null?void 0:d._id)===r&&(S.value[e]=l)}),ce.mutate({card_id:r,variables:{[e]:l}});else{if(t[e]=l,Array.isArray(t.variables)){const u=t.variables.findIndex(d=>d.slug===e);u!==-1?t.variables[u].value=l:t.variables.push({slug:e,value:l,type:"Text"})}else t.variables||(t.variables={}),t.variables[e]=l;ve(t)}}function Ea(t){ve(t)}const Aa=(t,e)=>{const a=t==null?void 0:t._id;a?(Te(a,r=>{r["end-date"]=e}),ce.mutate({card_id:a,variables:{"start-date":e}})):(t["end-date"]=e,ve(t))};function La(t,e){const a=t==null?void 0:t._id;if(a)Te(a,r=>{const l=He.value.find(u=>u._id===e);l&&(r.lane=l)}),Ye(g),ce.mutate({card_id:a,workspace_lane_id:e});else{const r=He.value.find(l=>l._id===e);r&&(t.lane=r,t.workspace_lane_id=e),ve(t)}}const{mutate:Da}=ll(),Ia=(t,e)=>{Da({payload:{sheet_id:w.value,workspace_id:A.value,variable_slug:t,is_visible:e}})},F=V(()=>{var t,e;return(e=(t=B.value)==null?void 0:t.nodeObj)!=null&&e.style?B.value.nodeObj.style:Qe(P)});function q(t,e,a){return t!==void 0?t:e!==void 0?e:a}function We(t,e){var d;if(!((d=B.value)!=null&&d.nodeObj))return;const a=B.value.nodeObj;a.style||(a.style={});const r=e.target,l=r.type==="number"?Number(r.value):r.value;switch(t){case"bg_color":a.style.background=l;break;case"color":a.style.color=l;break;case"font_size":a.style.fontSize=`${l}px`;break;case"font_weight":a.style.fontWeight=l;break;case"font_style":a.style.fontStyle=l;break;case"font_family":a.style.fontFamily=l;break;case"border_color":a.style.borderColor=l;break;case"border_width":a.style.borderWidth=`${l}px`;break;case"border_radius":a.style.borderRadius=`${l}px`;break;case"padding":a.style.padding=`${l}px`;break}const u=document.getElementById(a.id);u&&wt(a,u)}const P={bg_color:"#ffffff",color:"#000000",font_size:14,font_weight:"normal",font_style:"normal",font_family:"Inter",border_color:"#cccccc",border_width:0,border_radius:0,padding:0},ee=f(!1);async function xt(){var e;const t=(e=B.value)==null?void 0:e.nodeObj;if(!(!t||ee.value)){ee.value=!0;try{const a=nl(t);a._originalStyle||(a._originalStyle={});const r=a.style||{},l=a._originalStyle,u={bg_color:q(r.background,l.bg_color,P.bg_color),color:q(r.color,l.color,P.color),font_size:q(r.fontSize?parseInt(r.fontSize):void 0,l.font_size,P.font_size),font_weight:q(r.fontWeight,l.font_weight,P.font_weight),font_style:q(r.fontStyle,l.font_style,P.font_style),font_family:q(r.fontFamily,l.font_family,P.font_family),border_color:q(r.borderColor,l.border_color,P.border_color),border_width:q(r.borderWidth?parseInt(r.borderWidth):void 0,l.border_width,P.border_width),border_radius:q(r.borderRadius?parseInt(r.borderRadius):void 0,l.border_radius,P.border_radius),padding:q(r.padding?parseInt(r.padding):void 0,l.padding,P.padding),hyperLink:$.value||a.hyperLink||""};a._originalStyle={...u};const d=a.unique_name==="sheet"?{sheet_id:a.id,workspace_id:A.value,workspace_module_id:O.value,style:u}:{card_id:a.id,seat_id:a.seat_id,style:u};a.unique_name==="sheet"?await _t(d):await ce.mutateAsync(d)}finally{ee.value=!1}}}const Pa=f([]),{isDark:Fe}=rl();function Na(t){const e={id:"root",topic:localStorage.getItem("currentName")??"",isRoot:!0,children:[],style:{},_originalStyle:{},unique_name:"root"};if(!Array.isArray(t))return e;const a={};return t.forEach(r=>{var c,n;const l=((c=r.variables)==null?void 0:c["sheet-title"])||"Untitled",u=((n=r.style)==null?void 0:n.hyperLink)||"";a[l]||(a[l]={id:r._id,topic:l,variables:r==null?void 0:r.variables,children:[],style:r==null?void 0:r.style,_originalStyle:(r==null?void 0:r.style)||{},unique_name:"sheet",hyperLink:u||""},e.children.push(a[l]));const d={id:r==null?void 0:r._id,topic:r.title,children:[],style:Qe(r==null?void 0:r.style),_originalStyle:r.style||{},unique_name:"List",hyperLink:u||""};(r.cards||[]).forEach((i,m)=>{var x;const s=((x=i.style)==null?void 0:x.hyperLink)||"",_={id:i._id||`card-${m}`,seat_id:i.seat_id,topic:i["card-title"],style:Qe(i.style),_originalStyle:i.style||{},children:[],unique_name:"card",hyperLink:s||""};d.children.push(_),Pa.value=_}),a[l].children.push(d)}),e}const{mutateAsync:Ma}=il({onSuccess:()=>{T.invalidateQueries({queryKey:["sheets"]}),T.invalidateQueries({queryKey:["sheet-list"]}),close()}}),Oa=async t=>{try{await At({url:"workspace/cards/group-card-order",method:"PATCH",data:t}),ne(),we()}catch(e){console.error("Failed to reorder card:",e)}};function kt(){const t=ie.value;if(!t)return;const e=window.matchMedia("(max-width: 768px)").matches,a=e?".mind-elixir-toolbar.lt":".mind-elixir-toolbar.rb",r=t.querySelector(a);if(!r||r.querySelector(".open-sidebar-btn"))return;const l=document.createElement("button");l.className=`open-sidebar-btn me-toolbar-btn ${e?"mt-2":"ms-2"}`,l.title="Open Formatting Sidebar",l.innerHTML='<i class="fa-solid fa-sidebar"></i>',l.addEventListener("click",()=>{G.value=!G.value}),r.appendChild(l)}let fe=null;function qa(){var e,a;fe&&(fe.disconnect(),fe=null);const t=(a=(e=ie.value)==null?void 0:e.querySelector(".mind-elixir-toolbar.rb"))==null?void 0:a.parentElement;t&&(fe=new MutationObserver(()=>{kt()}),fe.observe(t,{childList:!0,subtree:!0}),kt())}const Ke=[];(M||Le)&&(Ke.push({name:"Update Node",onclick:()=>{var e;G.value&&(G.value=!1);const t=(e=B.value)==null?void 0:e.nodeObj;t&&R(t)}}),Ke.push({name:"Add Hyperlink",onclick:()=>{Ft(async()=>{await xt()})}})),St(()=>{b.value!=="mindmap"||!ie.value||!g.value||Xe(()=>{var d,c;const t=Na(g.value);Z.value&&((c=(d=Z.value).destroy)==null||c.call(d),Z.value=null);const e=new Set,a=new Set,r=new Set,l=new me({el:ie.value,theme:Fe.value?me.DARK_THEME:me.THEME,draggable:!0,contextMenu:!0,toolBar:!0,keypress:!0,locale:"en",overflowHidden:!1,contextMenuOption:{Update:M&&Le&&j,extend:Ke}});Z.value=l,l.init({nodeData:t}),Xe(()=>{setTimeout(()=>{l.toCenter()},300)}),Xe(()=>{qa()}),l.bus.addListener("selectNode",n=>{n&&(B.value={nodeObj:n})}),l.bus.addListener("renderNode",n=>{!(n!=null&&n.nodeObj)||!(n!=null&&n.element)||wt(n.nodeObj,n.element)});const u=n=>{let i=n;for(;i;){if(i.unique_name==="sheet")return i;i=i.parent}return null};l.bus.addListener("operation",async n=>{if(!n&&j&&M&&ge){Je.error("You do not have permission to perform this action.");return}if(n.name==="moveNode"||n.name==="moveNodeBefore"||n.name==="moveNodeAfter"){if(!M)return;const i=n.obj,m=n.target;if(!i||i.unique_name!=="card"||!m)return;const s=i._originalParent||i.parent;if(!s||s.unique_name!=="List")return;const _=m.unique_name==="List"?m:m.parent;if(!_||_.unique_name!=="List")return;const x=u(_);if(!x)return;const pe=_.children.findIndex(Ve=>Ve.id===i.id);if(pe===-1)return;i._originalParent=_,await Oa({workspace_id:A.value,card_id:i.id,group_value:_.topic,group_variable_id:C.value,new_index:pe,sheet_id:x.id});return}if(n.name==="removeNode"){const i=n.obj;if(!i||!i.id||i.unique_name!=="card"||!lt)return;re.value=i.id,await nt();return}if(n.name==="addChild"||n.name==="insertSibling"){const i=n.obj;if(!i||!i.id||i.unique_name==="sheet"&&!ge||i.unique_name==="List"&&!Q||i.unique_name==="card"&&!j)return;e.add(i.id);return}if(n.name==="beginEdit"){const i=n.obj;console.log(i);return}if(n.name==="finishEdit"){const i=n.obj;if(!i||!i.id)return;const m=e.has(i.id),s=a.has(i.id);if(!m&&!s||s)return;if(m){e.delete(i.id),a.add(i.id);const _=i.parent;if(!_||!("unique_name"in _)){a.delete(i.id);return}if(_.unique_name==="root"&&!r.has(i.id)){if(!ge){a.delete(i.id);return}r.add(i.id);try{await Ma({variables:{"sheet-title":i.topic??"New Sheet","sheet-description":"This is custom description"},is_ai_generated:!1,workspace_id:A.value,workspace_module_id:O.value})}catch(x){console.error("Error creating workspace sheet:",x),a.delete(i.id),r.delete(i.id)}return}if(_.unique_name==="List"){if(!j){a.delete(i.id);return}try{const x=Ra({topic:i.topic??"New Card",id:i.id},_);x.variables&&(x.variables["card-description"]="This is a default description"),await yt(x)}catch(x){console.error("Error creating card:",x),a.delete(i.id)}return}if(_.unique_name==="sheet"){if(!Q)return;try{console.log("Creating new list under sheet...")}catch(x){console.error("Error creating list:",x),a.delete(i.id)}return}}}})})}),U(Fe,()=>{Z.value&&Z.value.changeTheme(Fe.value?me.DARK_THEME:me.THEME)},{immediate:!0});function wt(t,e){if(!t||!e||!t.style)return;const a=e.querySelector(".topic"),r=e.querySelector(".node")??e,l=t.style;l.background&&(r.style.background=l.background),l.color&&a&&(a.style.color=l.color),a&&(l.fontSize&&(a.style.fontSize=l.fontSize),l.fontFamily&&(a.style.fontFamily=l.fontFamily),l.fontWeight&&(a.style.fontWeight=l.fontWeight),l.fontStyle&&(a.style.fontStyle=l.fontStyle)),l.borderColor&&(r.style.borderColor=l.borderColor),l.borderWidth&&(r.style.borderWidth=l.borderWidth),l.borderRadius&&(r.style.borderRadius=l.borderRadius),l.padding&&(r.style.padding=l.padding)}function Qe(t={}){return{background:t.bg_color,color:t.color,fontSize:t.font_size!=null?`${t.font_size}px`:void 0,fontWeight:t.font_weight,fontStyle:t.font_style,fontFamily:t.font_family,borderColor:t.border_color,borderWidth:t.border_width!=null?`${t.border_width}px`:void 0,borderRadius:t.border_radius!=null?`${t.border_radius}px`:void 0,padding:t.padding!=null?`${t.padding}px`:void 0,hyperLink:t.hyperLink||void 0}}function Ra(t,e){const a=new Date,r=a.toISOString().split("T")[0],l=new Date(a.getTime()+3*24*60*60*1e3).toISOString().split("T")[0];return{sheet_list_id:(e==null?void 0:e.topic)||"In Progress",workspace_id:A.value,sheet_id:w.value,workspace_lane_id:(t==null?void 0:t.workspace_lane_id)||null,variables:{"card-status":(e==null?void 0:e.topic)||"In Progress","card-type":"General",priority:"medium",process:null,"card-title":t.topic||"New Card","card-description":"","start-date":r,"end-date":l},createdAt:new Date().toISOString()}}return(t,e)=>{var a,r,l,u,d,c,n,i,m;return p(),L(Ze,null,[o("div",pl,[o("div",bl,[o("div",ml,[D(v(et),{onEditOption:ha,modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=s=>w.value=s),canEdit:v(Le),canDelete:v(Wt),onDeleteOption:_a,options:ca.value,variant:"secondary",customClasses:"fixed w-auto"},{more:K(()=>[v(ge)?(p(),L("div",{key:0,onClick:e[0]||(e[0]=s=>oa()),class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[36]||(e[36]=[o("i",{class:"fa-solid fa-plus"},null,-1),Ee(" Add new ")]))):k("",!0)]),_:1},8,["modelValue","canEdit","canDelete","options"]),o("div",_l,[(b.value=="kanban",p(),N(v(et),{key:0,actions:!1,modelValue:C.value,"onUpdate:modelValue":e[3]||(e[3]=s=>C.value=s),options:v(I),variant:"secondary",customClasses:"fixed w-auto",onNestedSelect:Gt},{more:K(()=>[v(Q)?(p(),L("div",{key:0,onClick:e[2]||(e[2]=()=>{oe.value=!0}),class:"sticky bottom-0 bg-bg-dropdown shadow-md shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[37]||(e[37]=[o("i",{class:"fa-solid fa-plus"},null,-1),Ee(" Add new ")]))):k("",!0)]),_:1},8,["modelValue","options"])),D(v(Lt),{onOnChange:e[4]||(e[4]=s=>{X.value=s}),placeholder:"Search in Orchit AI space"}),o("div",gl,[o("button",{class:z(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",b.value==="kanban"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Kanban view",onClick:e[5]||(e[5]=s=>b.value="kanban")},e[38]||(e[38]=[o("i",{class:"fa-solid fa-chart-kanban"},null,-1)]),2),o("button",{onClick:e[6]||(e[6]=s=>b.value="table"),class:z(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",b.value==="table"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"List view"},e[39]||(e[39]=[o("i",{class:"fa-solid fa-align-left"},null,-1)]),2),o("button",{onClick:e[7]||(e[7]=s=>b.value="mindmap"),class:z(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",b.value==="mindmap"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"MindMap view"},e[40]||(e[40]=[o("i",{class:"fa-solid fa-chart-diagram"},null,-1)]),2),o("button",{onClick:e[8]||(e[8]=s=>b.value="calendar"),class:z(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",b.value==="calendar"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Calendar view"},e[41]||(e[41]=[o("i",{class:"fa-regular fa-calendar"},null,-1)]),2),o("button",{onClick:e[9]||(e[9]=s=>b.value="gantt"),class:z(["aspect-square cursor-pointer rounded-sm p-0",b.value==="gantt"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gantt Chart view"},e[42]||(e[42]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M4 6h2v12H4V6Zm4 4h10v2H8v-2Zm0 4h10v2H8v-2Zm0-8h10v2H8V6Z"})],-1)]),2),o("button",{onClick:e[10]||(e[10]=s=>b.value="timeline"),class:z(["aspect-square cursor-pointer rounded-sm p-0",b.value==="timeline"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Timeline view"},e[43]||(e[43]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M4 12a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm16 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm-8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm0-16a2 2 0 1 1 0-4 2 2 0 0 1 0 4Z",opacity:"0"}),o("path",{d:"M4 12h4m8 0h4M9 12h6M9 12v-6M15 12v6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),2)])])])]),b.value=="kanban"?(p(),L(Ze,{key:0},[la.value?(p(),N(v(Dt),{key:0})):(p(),L("div",{key:1,ref_key:"kanbanScroll",ref:Be,class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible h-full",onScroll:pt},[(p(),N(v(Ht),{onOnPlus:ba,board:ka.value,key:`kanban-${w.value}-${C.value}`,"onDelete:column":e[11]||(e[11]=s=>pa(s)),"onUpdate:column":e[12]||(e[12]=s=>va(s)),onReorder:da,onAddColumn:ut,onScroll:pt,"onSelect:ticket":R,onOnBoardUpdate:ua,variable_id:C.value,sheet_id:w.value},{"column-footer":K(s=>{var _,x,pe,Ve,Ct;return[(x=(_=v(ke))==null?void 0:_.transitions)!=null&&x.all_allowed&&!((Ct=(Ve=(pe=v(ke))==null?void 0:pe.transitions)==null?void 0:Ve.all_allowed)!=null&&Ct.includes(s.column.title))&&v(ke).transitions.currentColumn!=s.column.title?(p(),L("div",yl," Disbale ( you can't drop here ) ")):k("",!0)]}),ticket:K(({ticket:s})=>[D(v(Pt),{selectedVar:C.value,onSelect:()=>{R(s)},ticket:s},null,8,["selectedVar","onSelect","ticket"])]),default:K(()=>[ra.value?(p(),N(v(It),{key:0,cards:2})):k("",!0)]),_:1},8,["board","variable_id","sheet_id"])),o("div",{class:"min-w-[270px] sm:min-w-[328px]",onClick:e[14]||(e[14]=be(()=>{},["stop"]))},[ue.value?(p(),L("div",hl,[D(v(_e),{autofocus:!0,modelValue:Y.value,"onUpdate:modelValue":e[13]||(e[13]=s=>Y.value=s),placeholder:"Add New list",onKeyup:Vt(Ce,["enter"])},null,8,["modelValue"]),e[44]||(e[44]=o("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),o("div",xl,[D(v(tt),{onClick:Ce,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:K(()=>[Ee(Ge(v(Re)?"Adding...":"Add list"),1)]),_:1}),o("i",{class:"fa-solid fa-close",onClick:je})])])):(p(),L("button",{key:1,disabled:!v(Q),class:z(["text-sm text-text-primary py-2.5 font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",v(Q)?"cursor-pointer":"cursor-not-allowed"]),onClick:be(je,["stop"])}," + Add List ",10,kl))])],544))],64)):k("",!0),b.value=="table"?(p(),N(v(Nt),{ref_key:"tableRef",ref:ft,onToggleVisibility:Ia,onScroll:bt,key:`table-${w.value}-${C.value}`,onAddVar:e[15]||(e[15]=()=>{oe.value=!0}),isPending:v(ea),columns:wa.value,rows:Se.value,canCreate:v(j),canCreateVariable:v(Q),canDelete:v(lt),onDelete:e[16]||(e[16]=s=>{ae.value=s,re.value=s._id,le.value=!0}),onCreate:Ea,"onUpdate:rows":Zt},null,8,["isPending","columns","rows","canCreate","canCreateVariable","canDelete"])):k("",!0),b.value==="mindmap"?(p(),L(Ze,{key:2},[o("div",wl,[o("div",{ref_key:"mindMapRef",ref:ie,class:"flex-1 h-full overflow-hidden rounded-md relative",style:{height:"600px",width:"100%"}},null,512),G.value&&v(De)&&v(M)&&v(j)?(p(),L("div",Cl,[o("div",Sl,[e[46]||(e[46]=o("h3",{class:"text-sm font-semibold text-secondary"},"Format Node",-1)),o("button",{onClick:e[17]||(e[17]=s=>G.value=!1),class:"text-gray-400 hover:text-gray-700"},e[45]||(e[45]=[o("i",{class:"fa-solid fa-times"},null,-1)]))]),o("div",Tl,[o("div",null,[e[49]||(e[49]=o("h4",{class:"text-xs font-semibold text-secondary uppercase mb-3"}," Colors ",-1)),o("div",Vl,[e[47]||(e[47]=o("label",{class:"block text-xs text-secondary mb-1"},"Background",-1)),o("div",El,[o("div",{class:"h-10 w-10 rounded-md border cursor-pointer relative",style:Et({backgroundColor:F.value.background})},[o("input",{type:"color",value:F.value.background,class:"absolute inset-0 opacity-0 cursor-pointer",onInput:e[18]||(e[18]=s=>We("bg_color",s)),style:{"pointer-events":"all"}},null,40,Al)],4),D(v(_e),{modelValue:F.value.background,placeholder:"#3b82f6",class:"flex-1",readonly:""},null,8,["modelValue"])])]),o("div",Ll,[e[48]||(e[48]=o("label",{class:"block text-xs text-secondary mb-1"},"Text",-1)),o("div",Dl,[o("div",{class:"h-10 w-10 rounded-md border cursor-pointer relative",style:Et({backgroundColor:F.value.color})},[o("input",{type:"color",value:F.value.color,class:"absolute inset-0 opacity-0 cursor-pointer",onInput:e[19]||(e[19]=s=>We("color",s)),style:{"pointer-events":"all"}},null,40,Il)],4),D(v(_e),{modelValue:F.value.color,placeholder:"#3b82f6",class:"flex-1",readonly:""},null,8,["modelValue"])])])]),o("div",null,[o("div",Pl,[o("div",null,[e[51]||(e[51]=o("label",{class:"block text-xs text-secondary mb-1"},"Weight",-1)),o("select",{class:"w-full h-8 border rounded px-2 text-sm",value:F.value.fontWeight,onChange:e[20]||(e[20]=s=>We("font_weight",s))},e[50]||(e[50]=[o("option",{value:"lighter"},"Light",-1),o("option",{value:"normal"},"Normal",-1),o("option",{value:"bold"},"Bold",-1),o("option",{value:"bolder"},"Extra Bold",-1)]),40,Nl)])])])]),o("div",Ml,[o("button",{class:"w-full cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium hover:shadow-md disabled:opacity-60",disabled:ee.value,onClick:xt},[ee.value?(p(),L("span",ql)):k("",!0),o("span",null,Ge(ee.value?"Updating...":"Update"),1)],8,Ol)])])):k("",!0)]),he.value&&v(De)&&v(M)&&v(j)?(p(),L("div",Rl,[o("div",Ul,[e[52]||(e[52]=o("h3",{class:"text-lg font-semibold mb-4"},"Insert Web Link",-1)),ol(o("input",{"onUpdate:modelValue":e[21]||(e[21]=s=>$.value=s),type:"text",placeholder:"Enter or paste a URL",class:"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[sl,$.value]]),o("div",zl,[o("button",{onClick:Qt,class:"px-4 py-2 rounded-md bg-gray-200 hover:bg-gray-300"}," Cancel "),o("button",{disabled:!$.value,onClick:Kt,class:z(["px-4 py-2 rounded-md text-white",$.value?"bg-blue-500 hover:bg-blue-600":"bg-blue-300 cursor-not-allowed"])}," Insert ",10,jl)])])])):k("",!0),ue.value?(p(),L("div",{key:1,class:"absolute top-40 left-70 bg-bg-body rounded-lg p-4 shadow-lg z-100 min-w-[328px] border",onClick:e[23]||(e[23]=be(()=>{},["stop"]))},[D(v(_e),{autofocus:!0,modelValue:Y.value,"onUpdate:modelValue":e[22]||(e[22]=s=>Y.value=s),placeholder:"Add New list",onKeyup:Vt(Ce,["enter"])},null,8,["modelValue"]),e[53]||(e[53]=o("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),o("div",Bl,[D(v(tt),{onClick:Ce,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:K(()=>[Ee(Ge(v(Re)?"Adding...":"Add list"),1)]),_:1}),o("i",{class:"fa-solid fa-close cursor-pointer",onClick:je})])])):k("",!0)],64)):k("",!0),b.value==="calendar"?(p(),N(v(qt),{key:3,data:Se.value,"onSelect:ticket":R},null,8,["data"])):k("",!0),b.value==="gantt"?(p(),N(v(Rt),{key:4,data:Se.value,"onSelect:ticket":R},null,8,["data"])):k("",!0),b.value==="timeline"?(p(),N(v(Ut),{key:5,data:Se.value,"onSelect:ticket":R},null,8,["data"])):k("",!0)]),D(v(Ae),{onClick:e[24]||(e[24]=be(()=>{},["stop"])),modelValue:J.value,"onUpdate:modelValue":e[25]||(e[25]=s=>J.value=s),title:"Delete List",itemLabel:"list",itemName:(a=H.value)==null?void 0:a.title,requireMatchText:(r=H.value)==null?void 0:r.title,confirmText:"Delete List",cancelText:"Cancel",size:"md",loading:v(Re),onConfirm:fa,onCancel:e[26]||(e[26]=()=>{J.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),se.value?(p(),N(v(zt),{selectedVariable:C.value,listId:(l=H.value)==null?void 0:l.title,sheet_id:w.value,key:"createTaskModalKey",modelValue:se.value,"onUpdate:modelValue":e[27]||(e[27]=s=>se.value=s),onSubmit:ma},null,8,["selectedVariable","listId","sheet_id","modelValue"])):k("",!0),(u=S.value)!=null&&u._id?(p(),N(v($t),{key:1,details:S.value,onClose:e[28]||(e[28]=()=>{R({variables:{}})}),onCloseSidePanel:ia,"onComment:post":Va,showPanel:!!((d=S.value)!=null&&d._id)},null,8,["details","showPanel"])):k("",!0),D(v(jt),{size:"md",sheet:W.value,modelValue:de.value,"onUpdate:modelValue":e[29]||(e[29]=s=>de.value=s)},null,8,["sheet","modelValue"]),oe.value?(p(),N(v(Bt),{key:2,modelValue:oe.value,"onUpdate:modelValue":e[30]||(e[30]=s=>oe.value=s),sheetID:w.value},null,8,["modelValue","sheetID"])):k("",!0),D(v(Ae),{onClick:e[31]||(e[31]=be(()=>{},["stop"])),modelValue:te.value,"onUpdate:modelValue":e[32]||(e[32]=s=>te.value=s),title:"Delete Sheet",itemLabel:"Sheet",itemName:(c=W.value)==null?void 0:c.title,requireMatchText:(n=W.value)==null?void 0:n.title,confirmText:"Delete Sheet",cancelText:"Cancel",size:"md",loading:v(ga),onConfirm:ya,onCancel:e[33]||(e[33]=()=>{te.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),D(v(Ae),{modelValue:le.value,"onUpdate:modelValue":e[34]||(e[34]=s=>le.value=s),title:"Delete Ticket",itemLabel:"Ticket",itemName:(i=ae.value)==null?void 0:i.title,requireMatchText:(m=ae.value)==null?void 0:m.title,confirmText:"Delete Ticket",cancelText:"Cancel",size:"md",loading:Ie.value,onConfirm:Jt,onCancel:e[35]||(e[35]=()=>{le.value=!1,ae.value=null})},null,8,["modelValue","itemName","requireMatchText","loading"]),e[54]||(e[54]=o("div",null,null,-1))],64)}}}),Yl=ul($l,[["__scopeId","data-v-06e897f2"]]);export{Yl as default};
