const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-BeiSGsq7.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-BhTkqdZl.js","assets/index-BwKA9U36.js","assets/index-CklGJa1o.css","assets/ConfirmDeleteModal-DDeJku86.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-dAbirjs4.js","assets/SidePanel-BNSGeQRN.js","assets/sidePanelStore-v_ljdZp6.js","assets/SidePanel-CA_AZfQK.css","assets/KanbanBoard-CfESG6za.js","assets/vuedraggable.umd-B2GsrpSj.js","assets/_commonjsHelpers-_d1bhYXs.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-BpqcvVF3.js","assets/index-Cl2SmGb7.js","assets/KanbanBoard-IqVBNhxM.css","assets/TableSearchCell-BmzFUT-N.js","assets/TableAssigneeCell-tnliMH8g.js","assets/CalendarView-B2n4AQxr.js","assets/CalendarView-BkzIJC_N.css","assets/GanttChartView-DGFs_H8B.js","assets/TimelineView-BM9IWJWF.js","assets/TimelineView-BsFP6voT.css","assets/BaseTextField-Ch-JIrOy.js"])))=>i.map(i=>d[i]);
import{U as ft,V as Lt,v as f,W as Se,c as V,r as b,q as z,M as pt,X as ot,d as vt,N as Zt,Y as ml,Z as Rl,j as g,f as e,h as Ae,C as X,i as q,F as De,A as Ie,o as p,t as M,T as gl,L as Gt,g as ne,e as me,w as fe,$ as bl,_ as yl,B as Ye,K as fl,k as N,a0 as Kt,G as rt,S as xl,Q as _l,P as Hl,a1 as Wl,a2 as Kl,a3 as Ql,a4 as Zl,a5 as Gl,H as Qt,a6 as es,a7 as ts,a8 as ls,u as ss,a9 as as,aa as ns,ab as rs,ac as os,ad as is,ae as we,af as ds,ag as Ee,ah as us,ai as cs,aj as he,ak as Wt,x as ps,al as Bl,am as fs,D as Me,an as Nl,ao as vs,ap as ms,y as Ol,aq as gs,ar as Pl,as as bs}from"./index-BwKA9U36.js";import{L as ys}from"./Loader-DatTZ1pr.js";import{_ as xs}from"./BaseTextAreaField.vue_vue_type_script_setup_true_lang-9cT9yaLT.js";import{_ as _s}from"./SearchBar.vue_vue_type_script_setup_true_lang-B17D6noy.js";import{_ as hs}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-dAbirjs4.js";import{_ as ks}from"./TableView.vue_vue_type_script_setup_true_lang-CgsK7tAp.js";import{k as Vt}from"./MindElixir-Ch35iPok.js";import Jl from"./KanbanSkeleton-B6xmZgjI.js";import ws from"./KanbanTicket-DHHI0JAz.js";import{F as ql}from"./fuse-Ch1WBRTM.js";import{l as Ss}from"./lodash-CQYOKM_D.js";import{o as Rt}from"./index-Cl2SmGb7.js";import"./favicon-BAFXWHLW.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-BpqcvVF3.js";import"./_commonjsHelpers-_d1bhYXs.js";const Cs="data:image/svg+xml,%3csvg%20width='60'%20height='46'%20viewBox='0%200%2060%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M59.7443%2034.8967L50.5682%2025.7206C50.4457%2025.5984%2050.2897%2025.5152%2050.1199%2025.4816C49.9501%2025.4479%2049.7742%2025.4653%2049.6143%2025.5315C49.4544%2025.5976%2049.3176%2025.7097%2049.2213%2025.8535C49.125%2025.9973%2049.0734%2026.1664%2049.073%2026.3394V30.517H25.9775V40.5114H49.0755V44.689C49.0759%2044.8621%2049.1275%2045.0312%2049.2238%2045.175C49.3201%2045.3187%2049.4569%2045.4308%2049.6168%2045.497C49.7767%2045.5632%2049.9527%2045.5805%2050.1224%2045.5468C50.2922%2045.5132%2050.4482%2045.43%2050.5708%2045.3078L59.7468%2036.1318C59.9095%2035.9672%2060.0005%2035.7451%2060.0001%2035.5137C59.9996%2035.2823%2059.9076%2035.0605%2059.7443%2034.8967Z'%20fill='%23C6DBA9'/%3e%3cpath%20d='M32.3149%2030.5293C30.664%2031.5967%2028.7394%2032.1633%2026.7734%2032.1609V40.5237H34.7295C39.2829%2038.5638%2042.9649%2035.0102%2045.0851%2030.5293H32.3149Z'%20fill='url(%23paint0_linear_250_16424)'/%3e%3cpath%20d='M46.2209%2020.2832C46.2317%2015.0884%2044.2448%2010.0884%2040.6714%206.3179C37.0981%202.54738%2032.2119%200.295026%2027.024%200.0269855C21.8362%20-0.241055%2016.7439%201.49574%2012.801%204.87791C8.85809%208.26009%206.36647%2013.0287%205.84178%2018.1969L2.46233%2017.8913C2.31055%2017.8782%202.15829%2017.9103%202.02467%2017.9835C1.89106%2018.0566%201.78205%2018.1677%201.71134%2018.3026C1.64063%2018.4376%201.61138%2018.5904%201.62726%2018.7419C1.64313%2018.8934%201.70343%2019.0368%201.80058%2019.1542L9.51927%2028.406C9.79205%2028.7344%2010.277%2028.7773%2010.378%2028.5045L19.6298%2020.7833C20.3876%2020.3413%2020.1173%2019.4825%2019.4328%2019.4194L15.8008%2019.091C16.0297%2017.1283%2016.8213%2015.2735%2018.0802%2013.7503C19.3391%2012.2271%2021.0115%2011.1004%2022.8961%2010.5059C24.7806%209.9114%2026.7969%209.8745%2028.7019%2010.3996C30.6069%2010.9248%2032.3195%2011.9896%2033.6332%2013.4657C34.947%2014.9419%2035.8059%2016.7664%2036.1065%2018.7195C36.4071%2020.6726%2036.1365%2022.6709%2035.3274%2024.4738C34.5183%2026.2766%2033.2051%2027.8071%2031.5462%2028.8807C29.8872%2029.9544%2027.9531%2030.5254%2025.977%2030.5251H25.9283V40.5094C31.2249%2040.4031%2036.7093%2038.2263%2040.4202%2034.4455C44.1311%2030.6648%2046.2134%2025.5808%2046.2209%2020.2832Z'%20fill='%23D7A39E'/%3e%3cpath%20d='M25.9773%2030.5293H0V40.5237H25.9773V30.5293Z'%20fill='url(%23paint1_linear_250_16424)'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_250_16424'%20x1='6.53714'%20y1='35.5252'%20x2='47.0198'%20y2='35.5252'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%236C798F'/%3e%3cstop%20offset='1'%20stop-color='%236C798F'%20stop-opacity='0.1'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_250_16424'%20x1='0'%20y1='36'%20x2='26'%20y2='36'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23E8D4D3'%20stop-opacity='0'/%3e%3cstop%20offset='1'%20stop-color='%23E2A39F'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",$s=(k,x,O={})=>Lt({queryKey:V(()=>["sprint-list",f(k),f(x)]),queryFn:({signal:D})=>Se({url:`sprints/${f(k)}`,method:"GET",signal:D,params:{sprintType:f(x)}}),...O}),Ts=(k,x={})=>{const O=V(()=>!!f(k));return Lt({queryKey:["sprint-cards",k],queryFn:({signal:D})=>Se({url:`sprints/${f(k)}/backlog`,method:"GET",signal:D}),enabled:O,...x})},Ds=(k,x={})=>Lt({queryKey:["sprint-kanban",k],queryFn:({signal:O})=>Se({url:"workspace/cards/sprintgrouped",method:"GET",signal:O,params:{sprint_id:f(k),variable_id:"68b6c96e0a95eef7d14e6981"}}),...x}),Vs=(k,x={})=>ft({key:["sprint-complete"]},{mutationFn:O=>Se({url:`sprints/${f(k)}/complete`,method:"POST",data:O.payload}),...x}),Ls=(k,x={})=>{const O=V(()=>!!f(k));return Lt({queryKey:["sprint-detail",k],queryFn:({signal:D})=>Se({url:`sprints/detail/${f(k)}?include_cards=true`,method:"GET",signal:D}),enabled:O,...x})},vl=(k,x,O=null,D={})=>Lt({queryKey:["backlog-list",k,f(x),f(O)],queryFn:({signal:Y})=>Se({url:`sprints/workspace/${f(k)}/cards`,method:"GET",signal:Y,params:{include_sprint_cards:!1,sprintType:f(x),module_id:f(O)}}),...D}),Es=(k={})=>ft({key:["add-sprint"]},{mutationFn:x=>Se({url:"/sprints",method:"POST",data:x.payload}),...k}),Xl=(k={})=>ft({key:["move-card-to-sprint"]},{mutationFn:x=>Se({url:`/sprints/${x.id}/cards`,method:"POST",data:x.payload}),...k}),zl=(k={})=>ft({key:["add-sprint"]},{mutationFn:x=>Se({url:`/sprints/${x.id}`,method:"PUT",data:x.payload}),...k}),Ms=(k={})=>ft({key:["start-sprint"]},{mutationFn:x=>Se({url:`/sprints/${x.id}/start`,method:"POST",data:x.payload}),...k}),As=(k={})=>ft({key:["delete-sprint"]},{mutationFn:x=>Se({url:`/sprints/${x}`,method:"DELETE"}),...k}),Is=(k={})=>ft({key:["remove-card-from-sprint"]},{mutationFn:x=>Se({url:`sprints/${f(x.sprintId)}/cards/remove `,method:"POST",data:{card_ids:[x.cardId]}}),...k}),Yl="jira-like:";function Ul(k="id"){return`${k}_${Math.random().toString(36).slice(2,9)}`}function jl(k,x){try{localStorage.setItem(Yl+k,JSON.stringify(x))}catch{}}function Fl(k,x){try{const O=localStorage.getItem(Yl+k);return O?JSON.parse(O):x}catch{return x}}function Bs(k){switch(k){case"Highest":return"rounded-md bg-red-50 px-2 py-0.5 text-xs text-red-700";case"High":return"rounded-md bg-orange-50 px-2 py-0.5 text-xs text-orange-700";case"Medium":return"rounded-md bg-amber-50 px-2 py-0.5 text-xs text-amber-700";case"Low":return"rounded-md bg-gray-100 px-2 py-0.5 text-xs text-gray-600"}}function Ns(){const k=b(Fl("backlog",[])),x=b(Fl("sprints",[]));if(x.value.length===0)x.value.push({id:Ul("sprint"),name:"Sprint 1",goal:"",start:"",end:"",started:!1,tickets:[]});else if(x.value.length>1){for(let m=1;m<x.value.length;m++)k.value.push(...x.value[m].tickets);x.value=[x.value[0]]}const O=b(x.value[0].id);z([k,x],()=>{jl("backlog",k.value),jl("sprints",x.value)},{deep:!0});const D=b([]),Y=pt({}),P=V(()=>k.value.length>0&&D.value.length===k.value.length),d=m=>{var r;const v=x.value.find(n=>n.id===m);return!!v&&v.tickets.length>0&&(((r=Y[m])==null?void 0:r.length)||0)===v.tickets.length};function H(m,v,r){const n=v.target.checked;if(m==="backlog")D.value=n?k.value.map(u=>u.id):[];else if(r){const u=x.value.find(w=>w.id===r);Y[r]=n&&u?u.tickets.map(w=>w.id):[]}}function W(m,v,r,n){const u=r.target.checked,w=m==="backlog"?D.value:Y[n]||(Y[n]=[]);if(u&&!w.includes(v)&&w.push(v),!u){const se=w.indexOf(v);se>=0&&w.splice(se,1)}}function K(){return x.value.find(m=>m.id===O.value)||x.value[0]}function Q(){const v=[...k.value,...x.value.flatMap(n=>n.tickets)].map(n=>Number(String(n.key).replace(/[^0-9]/g,""))).filter(n=>!Number.isNaN(n));return`PRJ-${v.length?Math.max(...v)+1:1}`}const{mutate:I}=Xl({onSuccess:()=>{ot.success("Cards moved to sprint successfully")},onError:m=>{ot.error("Failed to move cards: "+(m.message||"Unknown error"))}});function J(){var n,u;const m=K();if(!m||!D.value.length)return;const v=[],r=[];for(const w of k.value)(D.value.includes(w.id)?r:v).push(w);k.value=v,m.tickets.push(...r),D.value=[],r.length>0&&I({id:m.id,payload:{card_ids:r.map(w=>w.id),priority:((u=(n=r[0])==null?void 0:n.priority)==null?void 0:u.toLowerCase())||"medium",story_points:r.reduce((w,se)=>w+(se.storyPoints||0),0)}})}function Z(m){const v=x.value.find(w=>w.id===m);if(!v)return;const r=Y[m]||[],n=[],u=[];for(const w of v.tickets)(r.includes(w.id)?u:n).push(w);v.tickets=n,k.value.push(...u),Y[m]=[]}function re(m,v){if(m==="backlog")k.value=k.value.filter(r=>!D.value.includes(r.id)),D.value=[];else if(v){const r=Y[v]||[],n=x.value.find(u=>u.id===v);if(!n)return;n.tickets=n.tickets.filter(u=>!r.includes(u.id)),Y[v]=[]}}function U(m,v){const r={id:Ul("T"),key:Q(),createdAt:new Date().toISOString(),...v};if(m==="backlog")k.value.push(r);else{const n=K();n==null||n.tickets.push(r)}}function F(m){const v=K();v&&(v.name=m.name??v.name,v.goal=m.goal??v.goal,v.start=m.start??v.start,v.end=m.end??v.end)}function B(){const m=K();m&&(m.started=!m.started)}function _(m){return m.tickets.reduce((v,r)=>v+(r.storyPoints||0),0)}return{backlog:k,sprints:x,activeSprintId:O,selectedBacklogIds:D,selectedSprintIds:Y,allBacklogChecked:P,allSprintChecked:d,toggleAll:H,toggleOne:W,getActiveSprint:K,createTicket:U,saveSprintMeta:F,toggleStartSprint:B,sprintPoints:_,moveSelectedToSprint:J,moveSelectedToBacklog:Z,deleteSelected:re,priorityClass:Bs}}const Os={class:"h-full min-h-0 mt-2"},Ps={key:0,class:"empty-state flex flex-col justify-center items-center h-full"},qs=["disabled"],zs={key:1,class:"overflow-y-auto h-[calc(100%-50px)] tickets-scroll mt-2"},Us={class:"flex flex-col flex-1 gap-[4px] min-w-0 me-1"},js={key:0,class:"flex items-center justify-center py-10"},Fs=["onDragstart","onClick"],Rs=["checked","onChange"],Hs={class:"flex items-center text-[14px] font-sans font-medium capitalize text-text-secondary flex-1 min-w-0"},Ws={class:"truncate"},Ks={class:"flex-shrink-0"},Qs={key:0,class:"flex justify-center text-gray-500 items-center text-[11px] aspect-square w-[24px] h-[24px] bg-bg-body rounded-full border-border-input border-2"},Zs={key:1,class:"w-6 h-6 rounded-full"},Gs=["src"],Js={key:2,class:"text-[11px] aspect-square w-[24px] h-[24px] flex justify-center items-center bg-accent/30 text-accent border-accent border rounded-full"},Xs=vt({__name:"BacklogTable",props:{searchQuery:{type:String,default:""},sprintType:{type:String,default:""},checkedAll:{type:Boolean,default:!1},moduleId:{type:String,default:""}},emits:["ticket-dragged-to-sprint","open-ticket","ticket-moved-to-backlog","open-create-ticket"],setup(k,{emit:x}){const{isDark:O}=Zt(),{canCreateCard:D}=ml(),Y=x,P=k,{workspaceId:d}=Rl(),H=b(P.moduleId??null),{data:W,isPending:K}=vl(d,P.sprintType,H),Q=b([]),I=b(!1),J=b([]),Z=b([]);z(W,r=>{r!=null&&r.cards&&(Q.value=r.cards.map(n=>{var A,Ce,ge,te;const u=((A=n.card)==null?void 0:A.variables)??{},w=((Ce=n.card)==null?void 0:Ce._id)??n.card_id,se=String(u["card-status"]??"").trim(),y=String(u.priority??"").trim();return{id:w,key:u["card-code"]||(w==null?void 0:w.slice(-6))||"PRJ-?",summary:u["card-title"]||"(untitled)",type:"Story",status:se,assignee:((ge=n.card)==null?void 0:ge.assigned_to)??"Unassigned",storyPoints:Number(n.story_points??0)||0,priority:U(y),createdAt:((te=n.card)==null?void 0:te.created_at)??new Date().toISOString(),description:u["card-description"]||""}}))},{immediate:!0}),z(Q,r=>{const n=new Set(r.map(u=>u.id));Z.value=Z.value.filter(u=>n.has(u))});const re=V(()=>{if(!P.searchQuery)return Q.value;const r=P.searchQuery.toLowerCase();return Q.value.filter(n=>{var w;const u=typeof n.assignee=="string"?n.assignee:((w=n.assignee)==null?void 0:w.u_full_name)||"";return n.key.toLowerCase().includes(r)||n.summary.toLowerCase().includes(r)||u.toLowerCase().includes(r)})});function U(r){const n=String(r??"").toLowerCase();return["highest","blocker","critical"].includes(n)?"Highest":["high","major"].includes(n)?"High":["medium","normal"].includes(n)?"Medium":"Low"}function F(r,n,u){var A;const w=Z.value.includes(n.id)?[...Z.value]:[n.id],se=w.map(Ce=>Q.value.find(ge=>ge.id===Ce)).filter(Boolean);J.value=w;const y=JSON.stringify({id:n.id,ids:w,from:u,tickets:se});(A=r.dataTransfer)==null||A.setData("text/plain",y),r.dataTransfer&&(r.dataTransfer.effectAllowed="move")}function B(r){var n;I.value=!1,((n=r.dataTransfer)==null?void 0:n.dropEffect)!=="none"&&J.value.length&&(Q.value=Q.value.filter(u=>!J.value.includes(u.id)),Z.value=Z.value.filter(u=>!J.value.includes(u))),J.value=[]}function _(r){var n;r.preventDefault(),I.value=!1;try{const u=(n=r.dataTransfer)==null?void 0:n.getData("text/plain");if(!u)return;const w=JSON.parse(u);if(w.from!=="sprint")return;const y=(w.tickets&&w.tickets.length?w.tickets:w.ticket?[w.ticket]:[]).filter(Boolean).filter(Ce=>!Q.value.some(ge=>ge.id===Ce.id));y.length&&Q.value.push(...y);const A=w.ids&&w.ids.length?w.ids:w.id?[w.id]:[];A.length&&Y("ticket-moved-to-backlog",A,w.sprintId),console.log(w.sprintId,"sprintId ....")}catch(u){console.error("Drop error:",u)}}function m(r,n){n?Z.value.includes(r)||Z.value.push(r):Z.value=Z.value.filter(u=>u!==r)}function v(r,n){const u=n.target.checked;m(r,u)}return z(()=>P.checkedAll,r=>{r?(Z.value=Q.value.map(n=>n.id),console.log(Z.value)):Z.value=[]}),(r,n)=>(p(),g("section",Os,[e("div",{class:X(["rounded-lg flex flex-col h-full",I.value?"ring-2 ring-blue-400":""]),onDragover:n[3]||(n[3]=Ae(()=>{},["prevent"])),onDragenter:n[4]||(n[4]=u=>I.value=!0),onDragleave:n[5]||(n[5]=u=>I.value=!1),onDrop:n[6]||(n[6]=u=>_(u))},[!f(K)&&re.value.length===0?(p(),g("div",Ps,[n[7]||(n[7]=e("img",{src:Cs,class:"mb-4",alt:"backlog-plan"},null,-1)),n[8]||(n[8]=e("h6",{class:"text-sm text-text-primary font-semibold mb-1"}," Get started in the backlog ",-1)),n[9]||(n[9]=e("p",{class:"text-sm text-text-primary/90 mb-4"}," Plan and start a sprint to see issues here. ",-1)),e("button",{disabled:!f(D),onClick:n[0]||(n[0]=u=>r.$emit("open-create-ticket")),class:X(["relative inline-flex items-center justify-center font-medium py-1.5 px-3 text-sm rounded-md focus:outline-none transition h-[34px] bg-accent text-white hover:bg-accent-hover border-border-input border",f(D)?"cursor-pointer":"cursor-not-allowed"])}," Create Ticket ",10,qs)])):(p(),g("div",zs,[e("div",Us,[f(K)?(p(),g("div",js,[q(ys)])):(p(!0),g(De,{key:1},Ie(re.value,u=>{var w,se;return p(),g("div",{key:u.id,draggable:"true",class:X(["flex items-center gap-3 p-[8px] cursor-pointer transition-colors rounded-[8px]",Z.value.includes(u.id)?"border-2 border-[#5a2d7f]":"border border-border-input",f(O)?"bg-bg-body hover:bg-bg-surface":"bg-bg-charcoal hover:bg-bg-body"]),onDragstart:y=>F(y,u,"backlog"),onDragend:n[2]||(n[2]=y=>B(y)),onClick:y=>r.$emit("open-ticket",u)},[e("input",{type:"checkbox",class:"custom-checkbox bg-bg-body border border-border-input flex-shrink-0",checked:Z.value.includes(u.id),onClick:n[1]||(n[1]=Ae(()=>{},["stop"])),onChange:y=>v(u.id,y)},null,40,Rs),e("div",Hs,[e("span",Ws,M(u.summary),1)]),e("div",Ks,[(u==null?void 0:u.assignee)==="Unassigned"?(p(),g("span",Qs," UA ")):(w=u==null?void 0:u.assignee)!=null&&w.u_profile_image?(p(),g("div",Zs,[e("img",{src:u.assignee.u_profile_image,alt:"",class:"rounded-full"},null,8,Gs)])):(p(),g("span",Js,M(f(gl)((se=u==null?void 0:u.assignee)==null?void 0:se.u_full_name)),1))])],42,Fs)}),128))])]))],34)]))}}),Ys=Gt(Xs,[["__scopeId","data-v-169e7913"]]),ea="data:image/svg+xml,%3csvg%20width='60'%20height='60'%20viewBox='0%200%2060%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M9.375%2030C11.6402%2030%2013.4766%2028.1637%2013.4766%2025.8984C13.4766%2023.6332%2011.6402%2021.7969%209.375%2021.7969C7.10977%2021.7969%205.27344%2023.6332%205.27344%2025.8984C5.27344%2028.1637%207.10977%2030%209.375%2030Z'%20fill='%23AE2A19'/%3e%3cpath%20d='M26.25%2024.375C28.5152%2024.375%2030.3516%2022.5387%2030.3516%2020.2734C30.3516%2018.0082%2028.5152%2016.1719%2026.25%2016.1719C23.9848%2016.1719%2022.1484%2018.0082%2022.1484%2020.2734C22.1484%2022.5387%2023.9848%2024.375%2026.25%2024.375Z'%20fill='%23BF63F3'/%3e%3cpath%20d='M15.3931%2035.8594H11.0159V33.0938C9.93587%2033.3387%208.81469%2033.3387%207.73465%2033.0938V35.8594H1.87528C1.55115%2035.8601%201.2345%2035.9568%200.965283%2036.1373C0.696064%2036.3178%200.486343%2036.574%200.362583%2036.8736C0.238824%2037.1731%200.206573%2037.5027%200.269899%2037.8205C0.333226%2038.1384%200.489292%2038.4304%200.718404%2038.6597L7.05872%2045L0.718404%2051.3403C0.489292%2051.5696%200.333226%2051.8616%200.269899%2052.1795C0.206573%2052.4973%200.238824%2052.8269%200.362583%2053.1264C0.486343%2053.426%200.696064%2053.6822%200.965283%2053.8627C1.2345%2054.0432%201.55115%2054.1399%201.87528%2054.1406H15.3931L21.7503%2045L15.3931%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M34.4562%2035.8594H27.8937V27.4688C26.8137%2027.7138%2025.6925%2027.7138%2024.6125%2027.4688V35.8594H19.3896L25.7487%2045L19.3896%2054.1406H34.4562L40.8143%2045L34.4562%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M43.8281%2019.6875H55.3125C55.7475%2019.6873%2056.1647%2019.5143%2056.4723%2019.2067C56.7799%2018.8991%2056.9529%2018.4819%2056.9531%2018.0469V9.375C56.9529%208.93996%2056.7799%208.5228%2056.4723%208.21518C56.1647%207.90755%2055.7475%207.73462%2055.3125%207.73438H43.8281V7.5C43.8281%207.06488%2043.6553%206.64758%2043.3476%206.3399C43.0399%206.03223%2042.6226%205.85938%2042.1875%205.85938C41.7524%205.85938%2041.3351%206.03223%2041.0274%206.3399C40.7197%206.64758%2040.5469%207.06488%2040.5469%207.5V32.5781H43.8281V19.6875Z'%20fill='%23FCA700'/%3e%3cpath%20d='M59.2843%2043.8403L51.7843%2036.3403C51.6322%2036.1878%2051.4514%2036.0668%2051.2524%2035.9842C51.0534%2035.9017%2050.8401%2035.8593%2050.6246%2035.8594H38.4521L44.8121%2045L38.4531%2054.1406H50.6246C50.8401%2054.1407%2051.0534%2054.0983%2051.2524%2054.0158C51.4514%2053.9332%2051.6322%2053.8122%2051.7843%2053.6597L59.2843%2046.1597C59.4368%2046.0075%2059.5577%2045.8267%2059.6402%2045.6277C59.7228%2045.4287%2059.7652%2045.2154%2059.7652%2045C59.7652%2044.7846%2059.7228%2044.5713%2059.6402%2044.3723C59.5577%2044.1733%2059.4368%2043.9925%2059.2843%2043.8403Z'%20fill='%2382B536'/%3e%3c/g%3e%3c/svg%3e",ta={class:"h-full min-h-0 px-2"},la={key:0,class:"overflow-y-auto h-[calc(100%-50px)] tickets-scroll"},sa={class:"flex flex-col flex-1 gap-[4px] min-w-0 me-1"},aa=["onDragstart","onClick"],na=["checked","onChange"],ra={class:"flex items-center text-[14px] font-sans font-medium capitalize text-text-secondary flex-1 min-w-0"},oa={class:"truncate"},ia={class:"flex-shrink-0"},da={key:0,class:"flex justify-center text-gray-500 items-center text-[11px] aspect-square w-[24px] h-[24px] bg-bg-body rounded-full border-border-input border-2"},ua={key:1,class:"w-6 h-6 rounded-full"},ca=["src"],pa={key:2,class:"text-[11px] aspect-square w-[24px] flex justify-center items-center h-[24px] bg-accent/30 text-accent border-accent border rounded-full"},fa={key:1,class:"empty-state flex flex-col justify-center items-center border-dashed border-3 p-2 border-border h-[calc(100%-50px)] min-h-0"},va={class:"text-sm text-text-primary font-semibold mb-1 text-center"},ma={class:"text-sm text-text-primary/90 mb-3 max-w-120 text-center"},ga={class:"font-bold"},ba=vt({__name:"SprintCard",props:{sprint:{},sprintId:{},searchQuery:{},checkedSprintAll:{type:Boolean},searchedData:{},label:{}},emits:["edit-sprint","toggle-start","open-ticket","move-selected-to-backlog","delete-selected-sprint","refresh"],setup(k,{emit:x}){const{isDark:O}=Zt(),D=k,Y=x,P=b([]),d=b([]);z(()=>D.sprint&&D.sprint.tickets,_=>{P.value=[..._||[]];const m=new Set(P.value.map(v=>v.id));d.value=d.value.filter(v=>m.has(v))},{immediate:!0,deep:!0});const H=V(()=>{var m,v;if((m=D.searchedData)!=null&&m.length)return P.value.filter(r=>D.searchedData.some(n=>n.card_id===r.id));const _=((v=D.searchQuery)==null?void 0:v.toLowerCase())||"";return _?P.value.filter(r=>{var u;const n=((u=r.assignee)==null?void 0:u.u_full_name)??"";return r.key.toLowerCase().includes(_)||r.summary.toLowerCase().includes(_)||n.toLowerCase().includes(_)}):P.value}),W=b(!1),K=b([]),{mutate:Q}=Xl({onSuccess:()=>{ot.success("Card moved to sprint successfully"),Y("refresh")},onError:_=>{ot.error("Failed to move card: "+(_.message||"Unknown error"))}});function I(_,m,v,r){var se;const n=d.value.includes(m.id)?[...d.value]:[m.id],u=n.map(y=>P.value.find(A=>A.id===y)).filter(Boolean);K.value=n;const w=JSON.stringify({id:m.id,ids:n,from:v,sprintId:r,ticket:m,tickets:u});(se=_.dataTransfer)==null||se.setData("text/plain",w),_.dataTransfer&&(_.dataTransfer.effectAllowed="move")}function J(_){var m;W.value=!1,((m=_.dataTransfer)==null?void 0:m.dropEffect)!=="none"&&K.value.length&&(P.value=P.value.filter(v=>!K.value.includes(v.id)),d.value=d.value.filter(v=>!K.value.includes(v))),K.value=[]}function Z(){W.value=!0}function re(){W.value=!1}function U(_){var m;_.preventDefault(),W.value=!1;try{const v=(m=_.dataTransfer)==null?void 0:m.getData("text/plain");if(!v)return;const r=JSON.parse(v);if(r.from!=="backlog")return;const u=(r.tickets&&r.tickets.length?r.tickets:r.ticket?[r.ticket]:[]).filter(Boolean).filter(w=>!P.value.some(se=>se.id===w.id));if(!u.length)return;P.value.push(...u),u.forEach(w=>{Q({id:D.sprintId,payload:{card_ids:[w.id],priority:(w.priority||"Medium").toLowerCase(),story_points:w.storyPoints||0}})})}catch(v){console.error("Drop error:",v)}}function F(_,m){m?d.value.includes(_)||d.value.push(_):d.value=d.value.filter(v=>v!==_)}function B(_,m){const v=m.target.checked;F(_,v)}return z(()=>D.checkedSprintAll,_=>{_?(d.value=H.value.map(m=>m.id),console.log(H.value)):d.value=[]}),(_,m)=>(p(),g("div",ta,[e("div",{class:X([W.value?"ring-2 ring-blue-400 rounded-lg":"","h-full box-border mt-3"]),onDragover:m[2]||(m[2]=Ae(()=>{},["prevent"])),onDragenter:Z,onDragleave:re,onDrop:U},[H.value.length>0&&_.sprint?(p(),g("div",la,[e("div",sa,[(p(!0),g(De,null,Ie(H.value,v=>{var r,n;return p(),g("div",{key:v.id,draggable:"true",class:X(["flex items-center  gap-3 p-[8px] cursor-pointer transition-colors rounded-[8px]",d.value.includes(v.id)?"border-2 border-[#5a2d7f]":"border border-border-input",f(O)?"bg-bg-body hover:bg-bg-surface":"bg-bg-charcoal hover:bg-bg-body"]),onDragstart:u=>I(u,v,"sprint",_.sprint.id),onDragend:m[1]||(m[1]=u=>J(u)),onClick:u=>_.$emit("open-ticket",v)},[e("input",{type:"checkbox",class:X(["custom-checkbox border border-border-input flex-shrink-0",f(O)?"bg-bg-charcoal":"bg-bg-body "]),checked:d.value.includes(v.id),onClick:m[0]||(m[0]=Ae(()=>{},["stop"])),onChange:u=>B(v.id,u)},null,42,na),e("div",ra,[e("span",oa,M(v.summary),1)]),e("div",ia,[(v==null?void 0:v.assignee)=="Unassigned"?(p(),g("span",da,"UA")):(r=v.assignee)!=null&&r.u_profile_image?(p(),g("div",ua,[e("img",{src:v.assignee.u_profile_image,alt:""},null,8,ca)])):(p(),g("span",pa,M(f(gl)(((n=v.assignee)==null?void 0:n.u_full_name)??"")),1))])],42,aa)}),128))])])):(p(),g("div",fa,[m[6]||(m[6]=e("img",{src:ea,class:"mb-4",alt:"backlog-plan"},null,-1)),e("h6",va," Plan your "+M(_.label),1),e("p",ma,[m[3]||(m[3]=ne(" Drag work items from the ")),m[4]||(m[4]=e("span",{class:"font-bold"},"Backlog",-1)),ne(" section or create new ones to plan the work for this "+M(_.label)+". Select ",1),e("span",ga,"Start "+M(_.label),1),m[5]||(m[5]=ne(" when you're ready. "))])]))],34)]))}}),ya=Gt(ba,[["__scopeId","data-v-2a11402d"]]),xa={class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-input pb-4"},_a={class:"text-xl font-semibold"},ha={class:"px-6 gap-4 bg-bg-input pt-5 pb-8"},ka={class:"mt-3"},wa={class:"flex justify-end gap-2 p-6 sticky bottom-0 bg-bg-input border-t border-border"},Sa=vt({__name:"SprintModal",props:{modelValue:{type:Boolean,default:!1},lable:{},sprint:{},creatingSprint:{type:Boolean},sprints:{}},emits:["update:modelValue","save","close"],setup(k,{emit:x}){const O=x,D=k,Y=V(()=>D.lable?D.lable.charAt(0).toUpperCase()+D.lable.slice(1):""),P=V({get:()=>D.modelValue,set:F=>O("update:modelValue",F)}),d=pt({name:"",sprintType:"",description:""}),H=pt({name:!1,sprintType:!1,description:!1}),W=V(()=>H.name&&!String(d.name||"").trim()?"Name is required":""),K=V(()=>!!String(d.name||"").trim()&&!W.value);function Q(){P.value=!1,O("close")}function I(){H.name=!0,K.value&&O("save",{name:String(d.name||"").trim(),value:String(D.lable||"").trim(),description:String(d.description||"").trim()})}function J(){H.name=!1,H.sprintType=!1,H.description=!1}z(()=>D.sprint,F=>{if(!F){d.name="",d.sprintType=null;return}d.name="",d.description="",d.sprintType=F.sprintType??null,J()},{immediate:!0});const Z=[{title:"Milestone",_id:"milestone",dot:"#2e9bda"},{title:"Sprint",_id:"sprint",dot:"#7d68c8"},{title:"Huddle",_id:"huddle",dot:"#eea832"}],re=V(()=>Z.map(F=>({...F})));z(()=>D.lable,F=>{const B=re.value.find(_=>_.title===F);d.sprintType=(B==null?void 0:B._id)??""},{immediate:!0});function U(){const F=D.sprints||[],B=D.lable||"Sprint",_=B.charAt(0).toUpperCase()+B.slice(1);d.name=`${_} ${F.length+1}`}return z(()=>D.sprints,()=>{(!d.name||d.name.trim()==="")&&U()},{immediate:!0,deep:!0}),(F,B)=>(p(),me(bl,{modelValue:P.value,"onUpdate:modelValue":B[3]||(B[3]=_=>P.value=_),modalClass:"!py-0",size:"md"},{default:fe(()=>[e("div",xa,[e("h2",_a,"Add New "+M(F.lable),1)]),e("div",ha,[q(yl,{class:"rounded-1",modelValue:d.name,"onUpdate:modelValue":B[0]||(B[0]=_=>d.name=_),label:"Name",placeholder:F.lable,error:!!W.value,message:W.value,onBlur:B[1]||(B[1]=_=>H.name=!0)},null,8,["modelValue","placeholder","error","message"]),e("div",ka,[q(xs,{modelValue:d.description,"onUpdate:modelValue":B[2]||(B[2]=_=>d.description=_),label:"Description",placeholder:`${Y.value} description...`,type:"textarea",rows:4},null,8,["modelValue","placeholder"])]),B[4]||(B[4]=e("div",null,null,-1))]),e("div",wa,[q(Ye,{variant:"secondary",onClick:Q},{default:fe(()=>B[5]||(B[5]=[ne("Cancel")])),_:1,__:[5]}),q(Ye,{variant:"primary",disabled:!K.value,onClick:I},{default:fe(()=>[ne(M(F.creatingSprint?"Saving...":"Save"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue"]))}}),Ca="/assets/filter-JX25xO5j.svg",$a={class:"sticky top-0 z-10 flex justify-between items-center py-6 px-6 border-b border-border bg-bg-input"},Ta={class:"text-xl font-semibold"},Da={class:"px-6 grid grid-cols-2 gap-4 bg-bg-input pt-5"},Va={class:"flex flex-col col-span-2"},La={class:"flex flex-col col-span-2"},Ea={class:"flex gap-1 flex-col col-span-2 sm:col-span-1"},Ma={key:0,class:"text-xs text-red-500"},Aa={class:"flex gap-1 flex-col col-span-2 sm:col-span-1"},Ia={key:0,class:"text-xs text-red-500"},Ba={class:"flex flex-col col-span-2"},Na={class:"flex flex-col col-span-2"},Oa={class:"bg-bg-body wfull px-4 py-3 rounded-lg text-xs text-text-secondary"},Pa={class:"flex justify-end gap-2 p-6 sticky bottom-0 bg-bg-input"},qa=vt({__name:"StartSprintModal",props:{modelValue:{type:Boolean,default:!1},sprint:{},creatingSprint:{type:Boolean},sprintType:{}},emits:["update:modelValue","save","close"],setup(k,{emit:x}){const O=x,D=k,Y=[{_id:1,title:"1 Week"},{_id:2,title:"2 Weeks"},{_id:3,title:"3 Weeks"},{_id:4,title:"4 Weeks"},{_id:5,title:"Custom"}],P=V({get:()=>D.modelValue,set:r=>O("update:modelValue",r)}),d=pt({goal:"",start:new Date().toISOString().slice(0,10),end:"",sprint_name:"",duration:null}),H=V(()=>D.sprintType?D.sprintType.charAt(0).toUpperCase()+D.sprintType.slice(1):""),W=pt({start:!1,end:!1}),K=V(()=>!d.start&&W.start?"Start date is required":""),Q=V(()=>{if(!d.end&&W.end)return"End date is required";if(d.start&&d.end){const r=B(d.start),n=B(d.end);if(Number.isFinite(r)&&Number.isFinite(n)&&n<r)return"End date cannot be before start date"}return""}),I=V(()=>!K.value&&!Q.value);function J(r){d.start=r||"",W.start=!0}function Z(r){d.end=r||"",W.end=!0}function re(){P.value=!1,d.duration=null,O("close")}function U(){W.start=!0,W.end=!0,I.value&&O("save",{title:d.sprint_name||"new sprint",duration:String(v.value)||null,start:d.start||"",end:d.end||"",goal:d.goal??""})}function F(){W.start=!1,W.end=!1}function B(r){return r?new Date(`${r}T00:00:00`).getTime():NaN}const _=V(()=>d.duration===5);z(()=>d.duration,r=>{if(!r)return;const n=typeof r=="object"?r._id:r;if(n!==5&&d.start){const u=m(d.start,n*7);d.end=u}}),z(()=>d.start,r=>{r&&(d.duration&&d.duration!==5&&(d.end=m(d.start,d.duration*7)),d.end&&B(d.end)<B(d.start)&&(d.end=d.start))});function m(r,n){const u=new Date(r);return u.setDate(u.getDate()+n),u.toISOString().slice(0,10)}const v=V(()=>!d.start||!d.end?0:d.duration!==5?d.duration*7:(B(d.end)-B(d.start))/864e5);return z(()=>D.sprint,r=>{if(!r){d.start=new Date().toISOString().slice(0,10),d.end="",d.sprint_name="",d.goal="",F();return}d.goal=r.goal??"",d.start=r.start??new Date().toISOString().slice(0,10),d.end=r.end??"",d.sprint_name=r.title??"",F()},{immediate:!0}),(r,n)=>(p(),me(bl,{modelValue:P.value,"onUpdate:modelValue":n[3]||(n[3]=u=>P.value=u),modalClass:"!py-0",size:"md"},{default:fe(()=>[e("div",$a,[e("h2",Ta,"Start "+M(r.sprintType),1),e("span",{onClick:re,class:"text-sm text-text-secondary cursor-pointer"},n[4]||(n[4]=[e("i",{class:"fa-solid fa-xmark text-text-primary text-[19px]"},null,-1)]))]),e("div",Da,[e("div",Va,[q(yl,{modelValue:d.sprint_name,"onUpdate:modelValue":n[0]||(n[0]=u=>d.sprint_name=u),label:`${H.value} Name`,placeholder:`Enter ${r.sprintType} name`,size:"md",class:"rounded-1"},null,8,["modelValue","label","placeholder"])]),e("div",La,[q(fl,{modelValue:d.duration,"onUpdate:modelValue":n[1]||(n[1]=u=>d.duration=u),options:Y,label:"Duration",placeholder:"Select duration"},null,8,["modelValue"])]),e("div",Ea,[n[6]||(n[6]=e("label",{class:"text-sm font-medium"},"Start date",-1)),e("div",{class:X(["border relative flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",K.value?"border-red-500":""])},[q(Kt,{placeholder:"Set start date",class:"w-full z-1","model-value":d.start,"emit-as":"ymd","onUpdate:modelValue":J},null,8,["model-value"]),n[5]||(n[5]=e("i",{class:"fa-regular fa-calendar absolute right-2 top-3 z-0"},null,-1))],2),K.value?(p(),g("p",Ma,M(K.value),1)):N("",!0)]),e("div",Aa,[n[7]||(n[7]=e("label",{class:"text-sm font-medium"},"End date",-1)),e("div",{class:X(["border relative flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",Q.value?"border-red-500":""])},[q(Kt,{placeholder:"Set end date",class:"w-full","model-value":d.end,"emit-as":"ymd",disabled:!_.value,"onUpdate:modelValue":Z,"min-date":d.start},null,8,["model-value","disabled","min-date"]),e("i",{class:X(["fa-regular fa-calendar absolute right-2 top-3 z-0",{"text-text-secondary/30 pointer-events-none":!_.value,"text-text-primary":_.value}])},null,2)],2),Q.value?(p(),g("p",Ia,M(Q.value),1)):N("",!0)]),e("div",Ba,[n[8]||(n[8]=e("label",{class:"text-sm font-medium pb-1"},"Goal (optional)",-1)),rt(e("textarea",{"onUpdate:modelValue":n[2]||(n[2]=u=>d.goal=u),class:"w-full text-sm rounded-md border border-border px-3 py-2 bg-bg-input",rows:"2",placeholder:"Ship onboarding flow"},null,512),[[xl,d.goal]])]),e("div",Na,[e("p",Oa," Duration: "+M(d.start?v.value+" days":""),1)])]),e("div",Pa,[q(Ye,{variant:"secondary",onClick:re},{default:fe(()=>n[9]||(n[9]=[ne("Cancel")])),_:1,__:[9]}),q(Ye,{variant:"primary",disabled:!I.value,onClick:U},{default:fe(()=>[ne(M(r.creatingSprint?"Starting...":"Start"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue"]))}}),za={class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-body pb-4 mb-4"},Ua={class:"w-full flex items-start justify-between"},ja={class:"text-sm text-text-secondary mt-1"},Fa={class:"flex items-center gap-2 mt-4 w-full"},Ra={class:"flex items-center gap-2 flex-1"},Ha={class:"px-6 min-h-[400px]"},Wa={key:0},Ka={key:0,class:"flex items-center justify-center py-12"},Qa={key:1,class:"text-center py-12 text-text-secondary"},Za={key:2,class:"grid grid-cols-2 gap-3"},Ga=["onClick"],Ja={class:"flex items-center gap-3"},Xa={class:"w-10 h-10 rounded-lg bg-bg-input flex items-center justify-center group-hover:bg-primary/10 transition-colors"},Ya={class:"font-medium"},en={key:1},tn={key:0,class:"flex items-center justify-center py-12"},ln={key:1,class:"text-center py-12 text-text-secondary"},sn={key:2,class:"grid grid-cols-2 gap-3"},an=["onClick"],nn={class:"flex items-center gap-3"},rn={class:"w-10 h-10 rounded-lg bg-bg-input flex items-center justify-center group-hover:bg-primary/10 transition-colors"},on={class:"font-medium"},dn={key:2},un={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},cn={key:0,class:"flex flex-col"},pn={class:"flex gap-1 flex-col"},fn={key:0,class:"text-xs text-red-500"},vn={class:"flex gap-1 flex-col"},mn={key:0,class:"text-xs text-red-500"},gn={class:"flex flex-col gap-1"},bn={class:"mt-2"},yn={class:"mt-4"},xn={class:"flex justify-between gap-2 p-6 mt-8 sticky bottom-0 bg-bg-body border-t border-border"},_n={key:1},hn={class:"flex gap-2"},kn=vt({__name:"CreateBacklogTicketWithModuleSelection",props:{modelValue:{type:Boolean,default:!1},listId:{},selectedVariable:{}},emits:["update:modelValue","created"],setup(k,{emit:x}){const O=x,D=k,Y=_l(),{workspaceId:P}=Hl(),d=b(1),H=b(null),W=b(null),K=b(""),{data:Q,isLoading:I}=Wl(P.value),J=V(()=>{var S;return((S=Q.value)==null?void 0:S.modules)||[]}),{data:Z,isFetching:re,refetch:U}=Kl({workspace_module_id:K,workspace_id:P},{enabled:V(()=>!!K)});z(()=>H.value,()=>{U()});const F=V(()=>Z.value||[]),{data:B}=Ql(P.value);z(H,S=>{K.value=S??""});const{data:_}=Zl(P,K,b("")),{mutate:m,isPending:v}=Gl({onSuccess:()=>{bt(),Y.invalidateQueries({queryKey:["backlog-list"]}),r.value=!1}}),r=V({get:()=>D.modelValue,set:S=>O("update:modelValue",S)}),n=V(()=>{switch(d.value){case 1:return"Select a module to create the ticket in";case 2:return"Select a sheet within the module";case 3:return"Provide the ticket details below and click Add Ticket";default:return""}}),u=V(()=>((_==null?void 0:_.value)??[]).filter(S=>{var h;return((h=S==null?void 0:S.type)==null?void 0:h.title)==="Select"&&(S==null?void 0:S.slug)!=="process"})),w=V(()=>((B==null?void 0:B.value)??[]).map(S=>{var h;return{_id:S._id,title:((h=S==null?void 0:S.variables)==null?void 0:h["lane-title"])??String(S._id)}})),se=S=>S.slug,y=pt({title:"",description:"",startDate:null,endDate:null,lane_id:null,assignee:null,variables:{}});z(u,S=>{for(const h of S){const $=se(h);$ in y.variables||(y.variables[$]=null)}},{immediate:!0});const A=pt({title:!1,description:!1,startDate:!1,endDate:!1,lane:!1}),Ce=V(()=>!!y.title.trim()&&!!y.lane_id&&!!y.startDate&&!!y.endDate&&!Oe.value&&!et.value&&!tt.value&&!He.value);function ge(S){y.startDate=S,A.startDate=!0}function te(S){y.endDate=S,A.endDate=!0}function de(S){y.lane_id=S,A.lane=!0}function Be(S){y.assignee=S}function ze(S){H.value=S._id,d.value=2}function mt(S){W.value=S._id,d.value=3}function Ne(){d.value>1&&d.value--}function gt(){r.value=!1,bt()}function bt(){d.value=1,H.value=null,W.value=null,y.title="",y.description="",y.startDate=null,y.endDate=null,y.lane_id=null,y.assignee=null,y.variables={},A.title=!1,A.description=!1,A.startDate=!1,A.endDate=!1,A.lane=!1}const oe=V(()=>{var S;return(S=_==null?void 0:_.value)==null?void 0:S.find(h=>(h==null?void 0:h._id)==D.selectedVariable)}),Oe=V(()=>A.title&&!y.title.trim()?"Title is required":""),et=V(()=>A.startDate?y.startDate?"":"Start date is required":""),tt=V(()=>A.endDate?y.endDate?y.startDate&&y.endDate&&y.endDate<y.startDate?"End date cannot be before start date":"":"End date is required":""),He=V(()=>A.lane?y.lane_id?"":"Lane is required":""),Pe=new Date().toISOString().split("T")[0];function We(){var h,$;if(A.title=!0,A.lane=!0,A.description=!0,A.startDate=!0,A.endDate=!0,!Ce.value||v.value)return;const S={sheet_list_id:D.listId,workspace_id:P.value,sheet_id:W.value,workspace_lane_id:y.lane_id,variables:{...y.variables,[`${(h=oe.value)==null?void 0:h.slug}`]:D.listId,"card-title":y.title.trim(),"card-description":y.description.trim(),"start-date":y.startDate,"end-date":y.endDate},seat_id:(($=y.assignee)==null?void 0:$._id)??null,createdAt:new Date().toISOString()};m(S)}return z(()=>y.title,S=>{S!=null&&S.trim()&&A.title&&(A.title=!1)}),z(()=>y.lane_id,S=>{S&&A.lane&&(A.lane=!1)}),z(()=>y.startDate,S=>{S&&A.startDate&&(A.startDate=!1)}),z(()=>y.endDate,S=>{S&&A.endDate&&(A.endDate=!1)}),z(()=>y.description,S=>{S!=null&&S.trim()&&A.description&&(A.description=!1)}),(S,h)=>(p(),me(bl,{modelValue:r.value,"onUpdate:modelValue":h[5]||(h[5]=$=>r.value=$),modalClass:"!py-0",size:"lg"},{default:fe(()=>[e("div",za,[e("div",Ua,[e("div",null,[h[6]||(h[6]=e("h2",{class:"text-xl font-semibold"},"Create Backlog Ticket",-1)),e("p",ja,M(n.value),1)]),e("button",{class:"ml-4 p-2 rounded-md hover:bg-border transition-colors cursor-pointer",onClick:gt,"aria-label":"Close"},h[7]||(h[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 8.586l4.95-4.95a1 1 0 111.414 1.414L11.414 10l4.95 4.95a1 1 0 01-1.414 1.414L10 11.414l-4.95 4.95a1 1 0 01-1.414-1.414L8.586 10 3.636 5.05a1 1 0 011.414-1.414L10 8.586z","clip-rule":"evenodd"})],-1)]))]),e("div",Fa,[(p(),g(De,null,Ie(3,$=>e("div",{key:$,class:"flex items-center flex-1"},[e("div",Ra,[e("div",{class:X(["h-1 flex-1 rounded-full transition-colors",d.value>=$?"bg-primary":"bg-border"])},null,2)])])),64))])]),e("div",Ha,[d.value===1?(p(),g("div",Wa,[h[9]||(h[9]=e("h3",{class:"text-lg font-medium mb-4"},"Select Module",-1)),f(I)?(p(),g("div",Ka,h[8]||(h[8]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):!J.value||J.value.length===0?(p(),g("div",Qa," No modules available ")):(p(),g("div",Za,[(p(!0),g(De,null,Ie(J.value,$=>{var ie,Ke,ve,yt,be;return p(),g("button",{key:$._id,onClick:ee=>ze($),class:X(["p-4 border rounded-lg hover:border-primary transition-all text-left group",H.value===$._id?"border-primary bg-primary/5":"border-border"])},[e("div",Ja,[e("div",Xa,[e("i",{class:X([`${(Ke=(ie=$==null?void 0:$.variables)==null?void 0:ie["module-icon"])==null?void 0:Ke.prefix} ${(yt=(ve=$==null?void 0:$.variables)==null?void 0:ve["module-icon"])==null?void 0:yt.iconName}`,"text-lg"])},null,2)]),e("div",null,[e("p",Ya,M(((be=$.variables)==null?void 0:be["module-title"])||"Untitled"),1)])])],10,Ga)}),128))]))])):d.value===2?(p(),g("div",en,[h[11]||(h[11]=e("h3",{class:"text-lg font-medium mb-4"},"Select Sheet",-1)),f(re)?(p(),g("div",tn,h[10]||(h[10]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):!F.value||F.value.length===0?(p(),g("div",ln," No sheets available for this module ")):(p(),g("div",sn,[(p(!0),g(De,null,Ie(F.value,$=>{var ie,Ke;return p(),g("button",{key:$._id,onClick:ve=>mt($),class:X(["p-4 border rounded-lg hover:border-primary transition-all text-left group",W.value===$._id?"border-primary bg-primary/5":"border-border"])},[e("div",nn,[e("div",rn,[e("i",{class:X(`${(ie=$==null?void 0:$.variables["sheet-icon"])==null?void 0:ie.prefix} ${(Ke=$==null?void 0:$.variables["sheet-icon"])==null?void 0:Ke.iconName} text-lg`)},null,2)]),e("div",null,[e("p",on,M(($==null?void 0:$.variables["sheet-title"])||"Untitled Sheet"),1)])])],10,an)}),128))]))])):d.value===3?(p(),g("div",dn,[h[15]||(h[15]=e("h3",{class:"text-lg font-medium mb-4"},"Ticket Details",-1)),e("div",un,[q(yl,{modelValue:y.title,"onUpdate:modelValue":h[0]||(h[0]=$=>y.title=$),label:"Ticket Title",placeholder:"e.g., Implement real-time notifications",error:!!Oe.value,message:Oe.value,onBlur:h[1]||(h[1]=$=>A.title=!0)},null,8,["modelValue","error","message"]),w.value.length>0?(p(),g("div",cn,[q(fl,{size:"md",label:"Lane",options:w.value,placeholder:"Select lane",allowCustom:!1,"model-value":y.lane_id,"onUpdate:modelValue":de,error:!!He.value,message:He.value},null,8,["options","model-value","error","message"])])):N("",!0),(p(!0),g(De,null,Ie(u.value,$=>rt((p(),me(fl,{size:"md",key:se($),modelValue:y.variables[$.slug],"onUpdate:modelValue":ie=>y.variables[$.slug]=ie,options:$.data.filter(ie=>ie!=="process").map(ie=>({_id:ie,title:ie})),label:$.title,placeholder:"Select value",allowCustom:!0},null,8,["modelValue","onUpdate:modelValue","options","label"])),[[Qt,($==null?void 0:$._id)!=S.selectedVariable]])),128)),e("div",pn,[h[12]||(h[12]=e("label",{class:"text-sm"},"Start date",-1)),e("div",{class:X(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",et.value?"border-red-500":""])},[q(Kt,{placeholder:"Set start date",class:"w-full","model-value":y.startDate,"emit-as":"ymd","onUpdate:modelValue":ge,"min-date":f(Pe)},null,8,["model-value","min-date"])],2),et.value?(p(),g("p",fn,M(et.value),1)):N("",!0)]),e("div",vn,[h[13]||(h[13]=e("label",{class:"text-sm"},"End date",-1)),e("div",{class:X(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",tt.value?"border-red-500":""])},[q(Kt,{placeholder:"Set end date",class:"w-full","model-value":y.endDate,"emit-as":"ymd","onUpdate:modelValue":te,"min-date":y.startDate||f(Pe)},null,8,["model-value","min-date"])],2),tt.value?(p(),g("p",mn,M(tt.value),1)):N("",!0)]),e("div",gn,[h[14]||(h[14]=e("label",{class:"text-sm"},"Assignee",-1)),e("div",bn,[q(es,{name:!0,workspaceId:f(P),onAssign:Be,onUnassign:h[2]||(h[2]=$=>Be(null)),assigneeId:y.assignee,seat:null,disabled:!1,skipPermissionCheck:!0,class:"w-full"},null,8,["workspaceId","assigneeId"])])])]),e("div",yn,[q(ts,{label:"Description",placeholder:"What needs to be done, acceptance criteria, linksâ€¦",modelValue:y.description,"onUpdate:modelValue":h[3]||(h[3]=$=>y.description=$),onBlur:h[4]||(h[4]=$=>A.description=!0)},null,8,["modelValue"])])])):N("",!0)]),e("div",xn,[d.value>1?(p(),me(Ye,{key:0,variant:"secondary",onClick:Ne},{default:fe(()=>h[16]||(h[16]=[ne("Back")])),_:1,__:[16]})):(p(),g("div",_n)),e("div",hn,[q(Ye,{variant:"secondary",onClick:gt},{default:fe(()=>h[17]||(h[17]=[ne("Cancel")])),_:1,__:[17]}),d.value===3?(p(),me(Ye,{key:0,variant:"primary",disabled:!Ce.value||f(v),onClick:We},{default:fe(()=>[ne(M(f(v)?"Addingâ€¦":"Add Ticket"),1)]),_:1},8,["disabled"])):N("",!0)])])]),_:1},8,["modelValue"]))}}),wn={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-[6px] shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full border border-border flex flex-col overflow-x-auto overflow-y-auto scrollbar-visible pb-4"},Sn={class:"header lg:px-4 px-2 py-5 flex justify-between items-center gap-1 overflow-auto"},Cn={class:"flex lg:gap-4 gap-2 py-1"},$n={class:"hidden sm:flex"},Tn={class:"flex sm:hidden"},Dn={class:"px-2 py-1 h-8 mt-1 rounded-2xl bg-accent text-white font-medium cursor-pointer"},Vn={class:"flex gap-3 items-center"},Ln={class:"flex items-center gap-3 bg-bg-surface/50 h-[32px] px-2 rounded-md"},En={class:"overflow-x-auto"},Mn={key:0,class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex scrollbar-visible"},An={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible"},In={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},Bn={class:"relative w-full h-full flex overflow-hidden"},Nn={key:0,class:"format-sidebar h-full py-4 px-4 w-[320px] border-l bg-bg-card overflow-x-hidden overflow-y-auto flex flex-col"},On={class:"flex items-center justify-between pb-3 mb-4 border-b"},Pn={class:"format-content space-y-6"},qn={class:"format-group mb-3"},zn={class:"flex items-center gap-2"},Un=["value"],jn={class:"format-group mb-3"},Fn={class:"flex items-center gap-2"},Rn=["value"],Hn={class:"grid grid-cols-1 gap-3"},Wn=["value"],Kn={class:"mt-6 pt-4"},Qn=["disabled"],Zn={key:0,class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},Gn={key:0,class:"fixed inset-0 bg-black/30 flex items-center justify-center"},Jn={class:"bg-white p-6 rounded-xl w-80"},Xn={class:"flex justify-end gap-2 mt-4"},Yn=["disabled"],er={class:"flex items-center mt-3 gap-3"},tr=vt({__name:"ActiveSprint",props:{sptint_id:{},searchQuery:{},activeSprint:{}},setup(k){const x=k,O=Ee(()=>Me(()=>import("./CreateTaskModal-BeiSGsq7.js"),__vite__mapDeps([0,1,2,3]))),D=Ee(()=>Me(()=>import("./ConfirmDeleteModal-DDeJku86.js"),__vite__mapDeps([4,5,2,3]))),Y=Ee(()=>Me(()=>import("./SidePanel-BNSGeQRN.js"),__vite__mapDeps([6,2,3,7,8]))),P=Ee(()=>Me(()=>import("./KanbanBoard-CfESG6za.js"),__vite__mapDeps([9,10,11,2,3,12,13,14]))),d=Ee(()=>Me(()=>import("./index-BwKA9U36.js").then(l=>l.ds),__vite__mapDeps([2,3]))),H=Ee(()=>Me(()=>import("./TableSearchCell-BmzFUT-N.js"),__vite__mapDeps([15,2,3]))),W=Ee(()=>Me(()=>import("./TableAssigneeCell-tnliMH8g.js"),__vite__mapDeps([16,2,3]))),K=Ee(()=>Me(()=>import("./CalendarView-B2n4AQxr.js"),__vite__mapDeps([17,2,3,18]))),Q=Ee(()=>Me(()=>import("./GanttChartView-DGFs_H8B.js"),__vite__mapDeps([19,2,3]))),I=Ee(()=>Me(()=>import("./TimelineView-BM9IWJWF.js"),__vite__mapDeps([20,2,3,21]))),J=Ee(()=>Me(()=>import("./index-BwKA9U36.js").then(l=>l.dq),__vite__mapDeps([2,3]))),Z=Ee(()=>Me(()=>import("./BaseTextField-Ch-JIrOy.js"),__vite__mapDeps([22,2,3]))),re=b(!1),U=b(""),F=b(null),B=b(null),_=b(null),m=b(""),{isDark:v}=Zt(),r=b(null),n=b(!1);function u(l){U.value="",re.value=!0,F.value=l}function w(){F.value&&F.value(U.value),re.value=!1}function se(){re.value=!1}const{mutate:y}=Gl({onSuccess:()=>{}});function A(){const l=ht.value.trim();l&&h(l)}function Ce(){_t.value=!_t.value}const ge=ps(),te=b("kanban"),{workspaceId:de,moduleId:Be}=Hl(),ze=b(""),mt=b(!1),Ne=b(!1),{canCreateVariable:gt,canCreateCard:bt,canEditCard:oe,canAssignCard:Oe}=ml(),{data:et}=Wl(de.value),tt=b(et.value.modules||[]),He=V(()=>(tt.value||[]).map(l=>{var t,a;return{_id:l._id,title:((t=l.variables)==null?void 0:t["module-title"])??"Untitled module",description:((a=l.variables)==null?void 0:a["module-description"])??"",icon:l.icon??null,status:l.status??null}})),Pe=_l(),{mutate:We,isPending:S}=ls({onSuccess:()=>{Pe.invalidateQueries({queryKey:["sheet-list"]}),ht.value="",ye.value=!1,_t.value=!1,ye.value=!1}}),h=l=>{We({workspace_id:de.value,module_id:Be.value,variable_id:be.value,value:l})};z(He,l=>{if(l.length&&!ze.value){const t=l.find(a=>a.title==="Tasks")||l[0];ze.value=t._id}},{immediate:!0});const{data:$,refetch:ie}=Kl({workspace_id:de.value,workspace_module_id:V(()=>ze.value)});z(ze,l=>{l&&ie()});const Ke=V(()=>{var l;return $.value?(l=$.value[0])==null?void 0:l._id:""}),ve=b(Ke),yt=V(()=>{var l;return je.value?(l=je.value[0])==null?void 0:l._id:""}),be=b(yt),ee=ss(),ce=V(()=>x.sptint_id),{data:ae,isPending:Qe,refetch:St}=Ds(ce),xt=b(!1),lt=b(),$e=l=>{lt.value=l},Jt=as(),Xt=ns();function Ze(l){l.type=="column"?Jt.mutate({payload:{workspace_id:de.value,workspace_module_id:Be.value,variable_id:be.value,moved_value:l.meta.id,new_index:l.meta.newIndex}}):Xt.mutate({payload:{workspace_id:de.value,card_id:l.meta.moved._id,group_value:l.meta.fromColumnId,group_variable_id:be.value,new_index:l.meta.newIndex,sheet_id:ve.value}})}const Et=l=>{},{mutate:it}=rs({onSuccess:()=>{ie(),It.value=!1}}),Mt=V(()=>!$.value||!$.value.length?[]:$.value.map(l=>{var t,a;return{_id:l._id,title:((t=l.variables)==null?void 0:t["sheet-title"])||"Untitled Sheet",description:((a=l.variables)==null?void 0:a["sheet-description"])||"",icon:l.icon||null,status:l.generation_status||null}}));z(Mt,l=>{l.length>0&&!ve.value&&(ve.value=l[0]._id)},{immediate:!0}),z(Mt,l=>{l.length>0?m.value=l[0].title:m.value=""},{immediate:!0}),z($,l=>{var t;(l==null?void 0:l.length)>0&&(ve.value=(t=l[0])==null?void 0:t._id)});const _t=b(!1),ht=b(""),Yt=l=>{We({workspace_id:ge.params.id,module_id:ge.params.module_id,new_value:l.title,value:l.oldTitle,variable_id:be.value})},ye=b(!1),Ue=b(),el=()=>{We({value:Ue.value.title,workspace_id:de.value,module_id:Be.value,newValue:Ue.value.title,variable_id:be.value,is_trash:!0})},tl=l=>{ye.value=!0,Ue.value=l},ll=l=>{xt.value=!0,Ue.value=l},dt=V(()=>x.searchQuery),sl=b("");z(dt,Ss.debounce(l=>{sl.value=l},200));const al=V(()=>{var t;const l=(t=ae.value)==null?void 0:t.flatMap(a=>a.cards.map(i=>({...i,columnId:a.title})));return new ql(l,{keys:["card-title","card-description"],threshold:.3})}),Ge=V(()=>{var l,t;if(te.value==="kanban"){if(!dt.value)return ae.value;const a=al.value.search(dt.value).map(i=>i.item);return ae.value.map(i=>({...i,cards:a.filter(c=>c.columnId===i.title)}))}else{const a=(l=dt.value)==null?void 0:l.trim();if(!a){let c=[];return(t=ae.value??[])==null||t.forEach(j=>{c=[...c,...j==null?void 0:j.cards]}),c}return new ql(At.value,{keys:["card-title","card-description"],threshold:.3}).search(a).map(c=>c.item)}}),At=V(()=>{let l=[];return(ae.value??[]).forEach(t=>{l=[...l,...t==null?void 0:t.cards]}),l}),It=b(!1),{data:je,isPending:nl}=Zl(de,ze,ve),{mutate:Ct}=os(),rl=(l,t)=>{Ct({payload:{sheet_id:ve.value,workspace_id:de.value,variable_slug:l,is_visible:t}})},{data:$t}=Ql(de),Tt=V(()=>(($t==null?void 0:$t.value)??[]).map(l=>{var t;return{_id:l._id,title:((t=l==null?void 0:l.variables)==null?void 0:t["lane-title"])??String(l._id)}})),ol=l=>l.map(t=>({_id:t.value??t,title:t.value??t})),Fe=is({onSuccess:()=>{Pe.invalidateQueries({queryKey:["get-sheets"]}),Pe.invalidateQueries({queryKey:["sheet-list"]}),Pe.invalidateQueries({queryKey:["roles"]})}}),kt=(l,t)=>{if(!ae.value)return;const a=ae.value.findIndex(i=>i.cards.some(c=>c._id===l));if(a!==-1){const i=ae.value[a].cards.findIndex(c=>c._id===l);if(i!==-1){const c={...ae.value[a].cards[i]};t(c),ae.value[a].cards[i]=c,Bl(ae)}}};function il(l,t){kt(l,a=>{const i=Tt.value.find(c=>c._id===t);i&&(a.lane=i)}),Bl(ae),Fe.mutate({card_id:l,workspace_lane_id:t})}const Bt=(l,t)=>{kt(l,a=>{a.seat=t}),Fe.mutate({card_id:l,seat_id:t==null?void 0:t._id})},dl=V(()=>{var l;return[{key:"card-title",label:"Title",render:({row:t,value:a})=>we("div",{class:"flex items-center gap-1 w-full"},[we("a",{onClick:()=>lt.value=t,class:"text-[12px] underline text-blue-500 shrink-0 overflow-ellipsis cursor-pointer"},t["card-code"]),we("div",{class:"flex-1 min-w-0"},[we("input",{onFocusout:i=>{var c;Nt(t==null?void 0:t._id,"card-title",(c=i==null?void 0:i.target)==null?void 0:c.value)},class:"text-[12px] w-full overflow-ellipsis capitalize p-1 w-full p-1 focus:border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-transparent focus:bg-bg-body text-[12px] h-8",defaultValue:a,disabled:!oe.value})])])},{key:"end-date",label:"Due Date",render:({row:t,value:a})=>{const i=b(a);return we(d,{class:" capitalize flex items-center gap-2 text-[12px]",placeholder:"Set start date",tableInputClass:!0,modelValue:i.value,disabled:!oe.value,"onUpdate:modelValue":c=>Ot(t==null?void 0:t._id,c),emptyText:"Date"})}},{key:"lane",label:"Lane",render:({row:t})=>{var a;return we(H,{options:Tt.value??[],placeholder:"Select lane",modelValue:((a=t.lane)==null?void 0:a._id)||null,disabled:!oe.value,"onUpdate:modelValue":i=>il(t==null?void 0:t._id,i),displayField:"title",emptyText:"Lane"})}},{key:"created_by",label:"Owner",render:({value:t})=>we("div",{class:"capitalize flex items-center gap-2  px-3"},[we("div",{class:" rounded-full  "},[t!=null&&t.u_profile_image?we("img",{class:"w-6 h-6 rounded-full",src:t==null?void 0:t.u_profile_image}):we("div",{class:"w-5 h-5 rounded-full flex justify-center items-center text-[11px] ",style:`background:${t!=null&&t.u_full_name?ds({name:t.u_full_name,email:t.u_email}):""}`},gl(t==null?void 0:t.u_full_name))]),we("span",{class:"text-[12px]"},t?t==null?void 0:t.u_full_name:"")])},{key:"seat",label:"Assignee",render:({row:t,value:a})=>we(W,{class:"capitalize flex items-center gap-2 ",onAssign:i=>Bt(t==null?void 0:t._id,i),assigneeId:a,seat:a,name:!0,disabled:!Oe.value,emptyText:"Assignee"})},...((l=je.value)==null?void 0:l.filter(t=>{var a;return((a=t==null?void 0:t.type)==null?void 0:a.title)==="Select"}).map(t=>({key:t==null?void 0:t.slug,label:t==null?void 0:t.slug,render:({row:a,value:i})=>{var j;let c=i;if(Array.isArray(a==null?void 0:a.variables)){const G=a.variables.find(L=>L.slug===t.slug);G&&(c=G.value)}else c=((j=a==null?void 0:a.variables)==null?void 0:j[t.slug])??(a==null?void 0:a[t.slug])??i;return we("div",{class:"capitalize flex items-center gap-2"},[we(H,{options:ol(t.data??[]),modelValue:c,disabled:!oe.value,emptyText:t.slug,"onUpdate:modelValue":G=>{Nt(a==null?void 0:a._id,t.slug,G)},columnName:t.slug})])},visible:t==null?void 0:t.is_visible})))??[]]});function Nt(l,t,a){kt(l,i=>{if(t==="card-title"&&(i[t]=a),Array.isArray(i.variables)){const c=i.variables.find(j=>j.slug===t);c?c.value=a:i.variables.push({slug:t,value:a,type:"Select"})}else i.variables&&typeof i.variables=="object"?i.variables[t]=a:i[t]=a}),Fe.mutate({card_id:l,variables:{[t]:a.trim()}})}function ul(l){if(l["card-title"]){const t={sheet_list_id:"To Do",workspace_id:de.value,sheet_id:ve.value,variables:{"card-title":l["card-title"].trim()},createdAt:new Date().toISOString()};y(t)}}const Ot=(l,t)=>{const a=ae.value.findIndex(i=>i.cards.some(c=>c._id===l));if(a!==-1){const i=ae.value[a].cards.findIndex(c=>c._id===l);i!==-1&&(ae.value[a].cards[i]["end-date"]=t)}Fe.mutate({card_id:l,variables:{"start-date":t}})},Re=b(null),st=b(!1),at=b(!1);z(st,l=>{l&&(at.value=!1)}),z(at,l=>{l&&(st.value=!1)});const qe=V(()=>{var l,t;return(t=(l=Re.value)==null?void 0:l.nodeObj)!=null&&t.style?Re.value.nodeObj.style:R(ke)});function Ve(l,t,a){return l!==void 0?l:t!==void 0?t:a}function wt(l,t){var G;if(!((G=Re.value)!=null&&G.nodeObj))return;const a=Re.value.nodeObj;a.style||(a.style={});const i=t.target,c=i.type==="number"?Number(i.value):i.value;switch(l){case"bg_color":a.style.background=c;break;case"color":a.style.color=c;break;case"font_size":a.style.fontSize=`${c}px`;break;case"font_weight":a.style.fontWeight=c;break;case"font_style":a.style.fontStyle=c;break;case"font_family":a.style.fontFamily=c;break;case"border_color":a.style.borderColor=c;break;case"border_width":a.style.borderWidth=`${c}px`;break;case"border_radius":a.style.borderRadius=`${c}px`;break;case"padding":a.style.padding=`${c}px`;break}const j=document.getElementById(a.id);j&&s(a,j)}const ke={bg_color:"#ffffff",color:"#000000",font_size:14,font_weight:"normal",font_style:"normal",font_family:"Inter",border_color:"#cccccc",border_width:0,border_radius:0,padding:0},Te=b(!1);async function Pt(){var t;const l=(t=Re.value)==null?void 0:t.nodeObj;if(!(!l||Te.value)){Te.value=!0;try{const a=fs(l);a._originalStyle||(a._originalStyle={});const i=a.style||{},c=a._originalStyle,j={bg_color:Ve(i.background,c.bg_color,ke.bg_color),color:Ve(i.color,c.color,ke.color),font_size:Ve(i.fontSize?parseInt(i.fontSize):void 0,c.font_size,ke.font_size),font_weight:Ve(i.fontWeight,c.font_weight,ke.font_weight),font_style:Ve(i.fontStyle,c.font_style,ke.font_style),font_family:Ve(i.fontFamily,c.font_family,ke.font_family),border_color:Ve(i.borderColor,c.border_color,ke.border_color),border_width:Ve(i.borderWidth?parseInt(i.borderWidth):void 0,c.border_width,ke.border_width),border_radius:Ve(i.borderRadius?parseInt(i.borderRadius):void 0,c.border_radius,ke.border_radius),padding:Ve(i.padding?parseInt(i.padding):void 0,c.padding,ke.padding),hyperLink:U.value||a.hyperLink||""};a._originalStyle={...j};const G=a.unique_name==="sheet"?{sheet_id:a.id,workspace_id:de.value,workspace_module_id:Be.value,style:j}:{card_id:a.id,seat_id:a.seat_id,style:j};a.unique_name==="sheet"?await it(G):await Fe.mutateAsync(G)}finally{Te.value=!1}}}const qt=b([]);function cl(l){const t={id:"root",topic:localStorage.getItem("currentName")??"",isRoot:!0,children:[],style:{},_originalStyle:{},unique_name:"root"};if(!Array.isArray(l))return t;const a={};return l.forEach(i=>{var L;const c=m.value,j=((L=i.style)==null?void 0:L.hyperLink)||"";a[c]||(a[c]={id:i._id,topic:c,variables:i==null?void 0:i.variables,children:[],style:i==null?void 0:i.style,_originalStyle:(i==null?void 0:i.style)||{},unique_name:"sheet",hyperLink:j||""},t.children.push(a[c]));const G={id:i==null?void 0:i._id,topic:i.title,children:[],style:R(i==null?void 0:i.style),_originalStyle:i.style||{},unique_name:"List",hyperLink:j||""};(i.cards||[]).forEach((E,T)=>{var le;const ue=((le=E.style)==null?void 0:le.hyperLink)||"",pe={id:E._id||`card-${T}`,seat_id:E.seat_id,topic:E["card-title"],style:R(E.style),_originalStyle:E.style||{},children:[],unique_name:"card",hyperLink:ue||""};G.children.push(pe),qt.value=pe}),a[c].children.push(G)}),t}const{mutateAsync:zt}=us({onSuccess:()=>{Pe.invalidateQueries({queryKey:["sheets"]}),Pe.invalidateQueries({queryKey:["sheet-list"]}),close()}}),ut=l=>{var t,a;(a=(t=ae.value)==null?void 0:t.sheets)==null||a.forEach(i=>{var c;(c=i.sheet_lists)==null||c.forEach(j=>{j.cards=j.cards.filter(G=>G._id!==l)})})},Dt=b(!1),pl=b(null),Ut=async()=>{if(r.value)try{n.value=!0,await Se({url:`workspace/card/${r.value}`,method:"DELETE"}),ut(r.value),Dt.value=!1,pl.value=null,ot.success("Ticket deleted successfully"),await ie(),await St()}catch(l){ot.error(vs(l))}finally{n.value=!1}},jt=async l=>{try{await Se({url:"workspace/cards/group-card-order",method:"PATCH",data:l}),ie(),St()}catch(t){console.error("Failed to reorder card:",t)}};function Je(){var a;const l=(a=B.value)==null?void 0:a.querySelector(".mind-elixir-toolbar.rb");if(!l||l.querySelector(".open-sidebar-btn"))return;const t=document.createElement("button");t.className="open-sidebar-btn me-toolbar-btn ms-2",t.title="Open Formatting Sidebar",t.innerHTML='<i class="fa-solid fa-sidebar"></i>',t.addEventListener("click",()=>{Ne.value=!Ne.value}),l.appendChild(t)}let ct=null;function o(){var t,a;ct&&(ct.disconnect(),ct=null);const l=(a=(t=B.value)==null?void 0:t.querySelector(".mind-elixir-toolbar.rb"))==null?void 0:a.parentElement;l&&(ct=new MutationObserver(()=>{Je()}),ct.observe(l,{childList:!0,subtree:!0}),Je())}cs(()=>{te.value!=="mindmap"||!B.value||!ae.value||Nl(()=>{var G,L;const l=cl(ae.value);_.value&&((L=(G=_.value).destroy)==null||L.call(G),_.value=null);const t=new Set,a=new Set,i=new Set,c=new Vt({el:B.value,theme:v.value?Vt.DARK_THEME:Vt.THEME,draggable:!0,contextMenu:!0,toolBar:!0,keypress:!0,locale:"en",overflowHidden:!1,contextMenuOption:{Update:!0,extend:[{name:"Update Node",onclick:()=>{var T;Ne.value&&(Ne.value=!1);const E=(T=Re.value)==null?void 0:T.nodeObj;E&&$e(E)}},{name:"Add Hyperlink",onclick:()=>{u(async()=>{await Pt()})}}]}});_.value=c,c.init({nodeData:l}),setTimeout(()=>{c.toCenter()},100),Nl(()=>{o()}),c.bus.addListener("selectNode",E=>{E&&(Re.value={nodeObj:E})}),c.bus.addListener("renderNode",E=>{!(E!=null&&E.nodeObj)||!(E!=null&&E.element)||s(E.nodeObj,E.element)});const j=E=>{let T=E;for(;T;){if(T.unique_name==="sheet")return T;T=T.parent}return null};c.bus.addListener("operation",async E=>{if(E){if(E.name==="moveNode"||E.name==="moveNodeBefore"||E.name==="moveNodeAfter"){const T=E.obj,ue=E.target;if(!T||T.unique_name!=="card"||!ue)return;const pe=T._originalParent||T.parent;if(!pe||pe.unique_name!=="List")return;const le=ue.unique_name==="List"?ue:ue.parent;if(!le||le.unique_name!=="List")return;const _e=j(le);if(!_e)return;const nt=le.children.findIndex(Ft=>Ft.id===T.id);if(nt===-1)return;T._originalParent=le,await jt({workspace_id:de.value,card_id:T.id,group_value:le.topic,group_variable_id:be.value,new_index:nt,sheet_id:_e.id});return}if(E.name==="removeNode"){const T=E.obj;if(!T||!T.id||T.unique_name!=="card")return;r.value=T.id,await Ut();return}if(E.name==="addChild"||E.name==="insertSibling"){const T=E.obj;if(!T||!T.id)return;t.add(T.id);return}if(E.name==="finishEdit"){const T=E.obj;if(!T||!T.id)return;const ue=t.has(T.id),pe=a.has(T.id);if(!ue&&!pe||pe)return;if(ue){t.delete(T.id),a.add(T.id);const le=T.parent;if(!le||!("unique_name"in le)){a.delete(T.id);return}if(le.unique_name==="root"&&!i.has(T.id)){i.add(T.id);try{await zt({variables:{"sheet-title":T.topic??"New Sheet","sheet-description":"This is custom description"},is_ai_generated:!1,workspace_id:de.value,workspace_module_id:Be.value})}catch{a.delete(T.id),i.delete(T.id)}return}if(le.unique_name==="List"){try{const _e=xe({topic:T.topic??"New Card",id:T.id},le);_e.variables&&(_e.variables["card-description"]="This is a default description"),await y(_e)}catch{a.delete(T.id)}return}if(le.unique_name==="sheet"){try{console.log("Creating new list under sheet...")}catch{a.delete(T.id)}return}}}}})})}),z(v,()=>{_.value&&_.value.changeTheme(v.value?Vt.DARK_THEME:Vt.THEME)},{immediate:!0});function s(l,t){if(!l||!t||!l.style)return;const a=t.querySelector(".topic"),i=t.querySelector(".node")??t,c=l.style;c.background&&(i.style.background=c.background),c.color&&a&&(a.style.color=c.color),a&&(c.fontSize&&(a.style.fontSize=c.fontSize),c.fontFamily&&(a.style.fontFamily=c.fontFamily),c.fontWeight&&(a.style.fontWeight=c.fontWeight),c.fontStyle&&(a.style.fontStyle=c.fontStyle)),c.borderColor&&(i.style.borderColor=c.borderColor),c.borderWidth&&(i.style.borderWidth=c.borderWidth),c.borderRadius&&(i.style.borderRadius=c.borderRadius),c.padding&&(i.style.padding=c.padding)}function R(l={}){return{background:l.bg_color,color:l.color,fontSize:l.font_size!=null?`${l.font_size}px`:void 0,fontWeight:l.font_weight,fontStyle:l.font_style,fontFamily:l.font_family,borderColor:l.border_color,borderWidth:l.border_width!=null?`${l.border_width}px`:void 0,borderRadius:l.border_radius!=null?`${l.border_radius}px`:void 0,padding:l.padding!=null?`${l.padding}px`:void 0,hyperLink:l.hyperLink||void 0}}function xe(l,t){const a=new Date,i=a.toISOString().split("T")[0],c=new Date(a.getTime()+3*24*60*60*1e3).toISOString().split("T")[0];return{sheet_list_id:(t==null?void 0:t.topic)||"In Progress",workspace_id:de.value,sheet_id:ve.value,workspace_lane_id:(l==null?void 0:l.workspace_lane_id)||null,variables:{"card-status":(t==null?void 0:t.topic)||"In Progress","card-type":null,priority:null,process:null,"card-title":l.topic||"New Card","card-description":"","start-date":i,"end-date":c},createdAt:new Date().toISOString()}}return(l,t)=>{var a,i,c,j,G;return p(),g("div",wn,[e("div",Sn,[e("div",Cn,[e("div",$n,[e("button",{class:"cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white items-center justify-center gap-1 px-2 rounded-md text-xs font-medium",onClick:t[0]||(t[0]=L=>l.$emit("go-back"))},t[24]||(t[24]=[e("i",{class:"fa-solid fa-chevron-left"},null,-1),ne(" Go Back ")]))]),e("div",Tn,[e("button",{class:"cursor-pointer bg-gradient-to-tr from-accent to-accent-hover px-2 text-white items-center justify-center py-1 rounded-md font-medium",onClick:t[1]||(t[1]=L=>l.$emit("go-back"))},t[25]||(t[25]=[e("i",{class:"fa-solid fa-chevron-left"},null,-1)]))]),e("div",Dn,M(l.activeSprint),1)]),e("div",Vn,[e("div",Ln,[e("button",{class:X(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",te.value==="kanban"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"List view",onClick:t[2]||(t[2]=L=>te.value="kanban")},t[26]||(t[26]=[e("i",{class:"fa-solid fa-chart-kanban"},null,-1)]),2),e("button",{onClick:t[3]||(t[3]=L=>te.value="table"),class:X(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",te.value==="table"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gallery view"},t[27]||(t[27]=[e("i",{class:"fa-solid fa-align-left"},null,-1)]),2),e("button",{onClick:t[4]||(t[4]=L=>te.value="mindmap"),class:X(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",te.value==="mindmap"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"MindMap view"},t[28]||(t[28]=[e("i",{class:"fa-solid fa-chart-diagram"},null,-1)]),2),e("button",{onClick:t[5]||(t[5]=L=>te.value="calendar"),class:X(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",te.value==="calendar"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Calendar view"},t[29]||(t[29]=[e("i",{class:"fa-regular fa-calendar"},null,-1)]),2),e("button",{onClick:t[6]||(t[6]=L=>te.value="gantt"),class:X(["aspect-square cursor-pointer rounded-sm p-0",te.value==="gantt"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gantt Chart view"},t[30]||(t[30]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M4 6h2v12H4V6Zm4 4h10v2H8v-2Zm0 4h10v2H8v-2Zm0-8h10v2H8V6Z"})],-1)]),2),e("button",{onClick:t[7]||(t[7]=L=>te.value="timeline"),class:X(["aspect-square cursor-pointer rounded-sm p-0",te.value==="timeline"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Timeline view"},t[31]||(t[31]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M4 12a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm16 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm-8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm0-16a2 2 0 1 1 0-4 2 2 0 0 1 0 4Z",opacity:"0"}),e("path",{d:"M4 12h4m8 0h4M9 12h6M9 12v-6M15 12v6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),2)])])]),e("div",En,[te.value=="kanban"?(p(),g("div",Mn,[rt(q(Jl,null,null,512),[[Qt,f(Qe)]]),rt(e("div",An,[q(f(P),{onOnPlus:ll,"onDelete:column":t[8]||(t[8]=L=>tl(L)),"onUpdate:column":t[9]||(t[9]=L=>Yt(L)),onReorder:Ze,onAddColumn:h,"onSelect:ticket":$e,board:Ge.value,onOnBoardUpdate:Et,variable_id:be.value,sheet_id:ve.value},{"column-footer":fe(L=>{var E,T,ue,pe,le;return[(T=(E=f(ee))==null?void 0:E.transitions)!=null&&T.all_allowed&&!((le=(pe=(ue=f(ee))==null?void 0:ue.transitions)==null?void 0:pe.all_allowed)!=null&&le.includes(L.column.title))&&f(ee).transitions.currentColumn!=L.column.title?(p(),g("div",In," Disbale ( you can't drop here ) ")):N("",!0)]}),ticket:fe(({ticket:L})=>[q(ws,{selectedVar:be.value,onSelect:()=>{$e(L)},ticket:L},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"])],512),[[Qt,!f(Qe)]])])):N("",!0),te.value=="table"?(p(),me(ks,{key:1,onToggleVisibility:rl,onAddVar:t[10]||(t[10]=()=>{mt.value=!0}),isPending:f(Qe)||f(nl),columns:dl.value,rows:Ge.value,canCreate:f(bt),canCreateVariable:f(gt),onCreate:ul},null,8,["isPending","columns","rows","canCreate","canCreateVariable"])):N("",!0),te.value==="mindmap"?(p(),g(De,{key:2},[e("div",Bn,[e("div",{ref_key:"mindMapRef",ref:B,class:"flex-1 h-full overflow-y-hidden rounded-md relative"},null,512),Ne.value?(p(),g("div",Nn,[e("div",On,[t[33]||(t[33]=e("h3",{class:"text-sm font-semibold text-secondary"},"Format Node",-1)),e("button",{onClick:t[11]||(t[11]=L=>Ne.value=!1),class:"text-gray-400 hover:text-gray-700"},t[32]||(t[32]=[e("i",{class:"fa-solid fa-times"},null,-1)]))]),e("div",Pn,[e("div",null,[t[36]||(t[36]=e("h4",{class:"text-xs font-semibold text-secondary uppercase mb-3"}," Colors ",-1)),e("div",qn,[t[34]||(t[34]=e("label",{class:"block text-xs text-secondary mb-1"},"Background",-1)),e("div",zn,[e("div",{class:"h-10 w-10 rounded-md border cursor-pointer relative",style:he({backgroundColor:qe.value.background})},[e("input",{type:"color",value:qe.value.background,class:"absolute inset-0 opacity-0 cursor-pointer",onInput:t[12]||(t[12]=L=>wt("bg_color",L)),style:{"pointer-events":"all"}},null,40,Un)],4),q(f(Z),{modelValue:qe.value.background,placeholder:"#3b82f6",class:"flex-1",readonly:""},null,8,["modelValue"])])]),e("div",jn,[t[35]||(t[35]=e("label",{class:"block text-xs text-secondary mb-1"},"Text",-1)),e("div",Fn,[e("div",{class:"h-10 w-10 rounded-md border cursor-pointer relative",style:he({backgroundColor:qe.value.color})},[e("input",{type:"color",value:qe.value.color,class:"absolute inset-0 opacity-0 cursor-pointer",onInput:t[13]||(t[13]=L=>wt("color",L)),style:{"pointer-events":"all"}},null,40,Rn)],4),q(f(Z),{modelValue:qe.value.color,placeholder:"#3b82f6",class:"flex-1",readonly:""},null,8,["modelValue"])])])]),e("div",null,[e("div",Hn,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-xs text-secondary mb-1"},"Weight",-1)),e("select",{class:"w-full h-8 border rounded px-2 text-sm",value:qe.value.fontWeight,onChange:t[14]||(t[14]=L=>wt("font_weight",L))},t[37]||(t[37]=[e("option",{value:"lighter"},"Light",-1),e("option",{value:"normal"},"Normal",-1),e("option",{value:"bold"},"Bold",-1),e("option",{value:"bolder"},"Extra Bold",-1)]),40,Wn)])])])]),e("div",Kn,[e("button",{class:"w-full cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium hover:shadow-md disabled:opacity-60",disabled:Te.value,onClick:Pt},[Te.value?(p(),g("span",Zn)):N("",!0),e("span",null,M(Te.value?"Updating...":"Update"),1)],8,Qn)])])):N("",!0)]),re.value?(p(),g("div",Gn,[e("div",Jn,[t[39]||(t[39]=e("h3",{class:"text-lg font-semibold mb-4"},"Insert Web Link",-1)),rt(e("input",{"onUpdate:modelValue":t[15]||(t[15]=L=>U.value=L),type:"text",placeholder:"Enter or paste a URL",class:"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[xl,U.value]]),e("div",Xn,[e("button",{onClick:se,class:"px-4 py-2 rounded-md bg-gray-200 hover:bg-gray-300"}," Cancel "),e("button",{disabled:!U.value,onClick:w,class:X(["px-4 py-2 rounded-md text-white",U.value?"bg-blue-500 hover:bg-blue-600":"bg-blue-300 cursor-not-allowed"])}," Insert ",10,Yn)])])])):N("",!0),_t.value?(p(),g("div",{key:1,class:"absolute top-40 left-70 bg-bg-body rounded-lg p-4 shadow-lg z-100 min-w-[328px] border",onClick:t[17]||(t[17]=Ae(()=>{},["stop"]))},[q(f(Z),{autofocus:!0,modelValue:ht.value,"onUpdate:modelValue":t[16]||(t[16]=L=>ht.value=L),placeholder:"Add New list",onKeyup:Wt(A,["enter"])},null,8,["modelValue"]),t[40]||(t[40]=e("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),e("div",er,[q(f(J),{onClick:A,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:fe(()=>[ne(M(f(S)?"Adding...":"Add list"),1)]),_:1}),e("i",{class:"fa-solid fa-close cursor-pointer",onClick:Ce})])])):N("",!0)],64)):N("",!0),te.value==="calendar"?(p(),me(f(K),{key:3,data:Ge.value,"onSelect:ticket":$e,class:"min-h-[600px]"},null,8,["data"])):N("",!0),te.value==="gantt"?(p(),me(f(Q),{key:4,data:Ge.value,"onSelect:ticket":$e},null,8,["data"])):N("",!0),te.value==="timeline"?(p(),me(f(I),{key:5,data:Ge.value,"onSelect:ticket":$e},null,8,["data"])):N("",!0),q(f(D),{onClick:t[18]||(t[18]=Ae(()=>{},["stop"])),modelValue:ye.value,"onUpdate:modelValue":t[19]||(t[19]=L=>ye.value=L),title:"Delete List",itemLabel:"list",itemName:(a=Ue.value)==null?void 0:a.title,requireMatchText:(i=Ue.value)==null?void 0:i.title,confirmText:"Delete workspace",cancelText:"Cancel",size:"md",loading:f(S),onConfirm:el,onCancel:t[20]||(t[20]=()=>{ye.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),xt.value?(p(),me(f(O),{selectedVariable:be.value,listId:(c=Ue.value)==null?void 0:c.title,sheet_id:ve.value,key:"createTaskModalKey",modelValue:xt.value,"onUpdate:modelValue":t[21]||(t[21]=L=>xt.value=L),onSubmit:t[22]||(t[22]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):N("",!0),(j=lt.value)!=null&&j._id?(p(),me(f(Y),{key:7,details:lt.value,onClose:t[23]||(t[23]=()=>{$e({variables:{}})}),showPanel:!!((G=lt.value)!=null&&G._id)},null,8,["details","showPanel"])):N("",!0)])])}}}),lr=Gt(tr,[["__scopeId","data-v-de6d1d1c"]]),sr={class:"flex-auto min-h-0 rounded-[6px] overflow-x-auto flex-col flex"},ar={key:1,class:"flex flex-col flex-1 min-h-0"},nr={class:"h-screen w-full flex flex-col -mt-3.5"},rr={class:"overflow-x-auto w-full flex-1"},or={class:"min-w-[1200px] h-full flex flex-col"},ir={key:0,class:"px-0.5 py-4 w-full min-w-0 flex flex-col min-h-0 overflow-x-auto h-full"},dr={class:"flex items-center justify-between mt-2"},ur={class:"text-sm font-semibold flex gap-2 items-center"},cr={class:"flex items-center gap-2 relative",ref:"filterDropdownRef"},pr={class:"mt-3"},fr={key:0,class:"flex items-center gap-2 overflow-x-auto no-scrollbar py-1"},vr=["onClick"],mr={key:1,class:"relative flex items-center gap-3"},gr={class:"relative flex-shrink-0"},br={class:"flex items-center gap-2 truncate"},yr=["src"],xr={class:"truncate"},_r={key:0,class:"absolute left-0 top-full mt-1 w-44 bg-bg-card border border-gray-200 rounded-lg shadow-lg z-[9999]"},hr={class:"flex flex-col"},kr=["onClick"],wr={class:"flex gap-2 overflow-x-auto no-scrollbar flex-1"},Sr=["onClick"],Cr={key:0,class:"w-full h-full flex justify-center items-center"},$r={key:1,class:"flex-1 min-h-0 overflow-y-auto"},Tr={class:"relative z-10 group"},Dr={class:"rounded-md relative pt-2 flex flex-col flex-1 bg-bg-card min-h-0"},Vr={class:"flex justify-between gap-4 px-3 pb-2 border-b border-border-input"},Lr={class:"flex items-center gap-2 min-w-0 py-1"},Er=["onClick"],Mr={class:"flex items-center lg:gap-2 max-w-full"},Ar={class:"flex items-center lg:gap-2 max-w-full"},Ir={class:"truncate max-w-[160px]"},Br={key:1,class:"absolute left-0 mt-2 w-60 bg-bg-card border-accent-hover rounded-xl shadow-lg z-50 max-h-64 overflow-y-auto overflow-x-hidden"},Nr={class:"relative flex-1"},Or=["onClick"],Pr=["onBlur","onKeyup"],qr={class:"relative ml-2 flex gap-2"},zr=["onClick"],Ur=["onClick"],jr={class:"flex justify-end items-center"},Fr={class:"flex gap-2"},Rr={class:"gap-2 hidden lg:flex"},Hr={key:0,class:"flex gap-2"},Wr={key:1},Kr={key:0,class:"gap-2"},Qr={class:"hidden lg:fxex bg-[#E6E1F5] text-accent px-3 py-1 rounded-2xl justify-center items-center"},Zr={key:0,class:"flex lg:hidden ms-2"},Gr=["title"],Jr=["disabled"],Xr={class:"absolute z-50 top-10 mb-2 -translate-x-2/3 bg-card border border-accent text-accent text-xs px-2 py-1 rounded whitespace-nowrap"},Yr={key:0,class:"fixed inset-0 z-50 flex items-center justify-center w-full"},eo={class:"relative bg-bg-card rounded-lg p-4 mx-3 w-full max-w-md lg:max-w-2xl xl:max-w-3xl"},to={class:"flex flex-col gap-2 mt-4"},lo={class:"text-sm text-muted mb-2"},so={class:"flex gap-2 w-full"},ao={key:0,class:"mt-1 w-full bg-bg-card rounded-md max-h-64 overflow-y-auto"},no={class:"flex items-center justify-between"},ro={class:"font-medium"},oo={class:"text-muted text-xs ml-2"},io={class:"flex gap-2 text-xs"},uo={class:"text-muted border border-border-input rounded-md px-3 py-1"},co={key:1,class:"absolute top-full left-0 mt-1 w-full bg-bg-card border border-border-input rounded-md shadow-md p-4 z-50 text-center text-muted"},po={key:0,class:"w-full h-full min-h-[250px] flex justify-center items-center"},fo={key:1,class:"flex-1 min-h-0 overflow-y-auto"},vo={key:1,class:"bg-bg-card w-full p-6 flex flex-col justify-center h-full items-center text-center gap-4"},mo={class:"text-lg font-semibold text-accent"},go={class:"text-sm text-muted max-w-md"},bo={key:2,class:"w-full h-full min-h-[250px] flex flex-col items-center justify-center text-center gap-4 p-6"},yo={class:"text-xl font-semibold text-accent"},xo={class:"text-sm text-muted max-w-md"},Ht=400,_o=vt({__name:"Plan",setup(k){const{isDark:x}=Zt(),O=b(!1),D=b(""),Y=b(!1),P=b(!1),{canCreateCard:d}=ml(),H=b(!1),W=b(null),K=b(!1),Q=b(!1),I=V(()=>U.value.value),J=b(""),Z=[{label:"Milestone",value:"milestone",dot:"#7d68c8"},{label:"Sprint",value:"sprint",dot:"#7d68c8"},{label:"Huddle",value:"huddle",dot:"#7d68c8"}],re=V(()=>I.value?I.value.charAt(0).toUpperCase()+I.value.slice(1):""),U=b(Z[0]),F=b(null),B=b(!1);Rt(F,()=>{B.value=!1});const _=()=>{O.value=!1},m=()=>{H.value=!0},v=b(!1),r=()=>{v.value=!v.value},{workspaceId:n}=Rl(),u=b(!1),{moveSelectedToSprint:w,moveSelectedToBacklog:se,deleteSelected:y,saveSprintMeta:A,toggleStartSprint:Ce}=Ns();function ge(o){J.value=o,Je.value=!1}function te(o){J.value=o,Je.value=!1}function de(o){J.value=o,Je.value=!1}const{data:Be,refetch:ze}=vl(n,I,J);z(J,()=>{ze()});const{data:mt}=ms(n),Ne=V(()=>{var o;return((o=mt.value)==null?void 0:o.modules.filter(s=>{var R;return((R=s==null?void 0:s.variables)==null?void 0:R["module-title"])!=="Pin"}))||[]});z(()=>I.value,(o,s)=>{o!==s&&ze()});const{mutate:gt,isPending:bt}=As({onSuccess:()=>{Ct.invalidateQueries({queryKey:["sprint-list"]}),Oe.value=!1}}),oe=b(null),Oe=b(!1),et=()=>{var o;gt((o=oe.value)==null?void 0:o._id)},{mutate:tt,isPending:He}=zl({onSuccess:o=>{A({name:o.title}),Pe({id:ee.value,payload:{title:o.title,start_date:o.start_date,end_date:o.end_date,goal:o.goal,duration:Number(o.duration_days)}}),Qe.value=!1}}),{mutate:Pe,isPending:We}=Ms({onSuccess:()=>{ae()}}),S=async o=>{He.value=!0;try{await tt({id:ee.value,payload:{title:o.title,duration:o.duration,start_date:o.start,end_date:o.end,goal:o.goal}})}finally{He.value=!1,Qe.value=!1}},{data:h,refetch:$,isLoading:ie}=$s(n.value,I),Ke=V(()=>{var o;return((o=h.value)==null?void 0:o.sprints)??[]});z(()=>I.value,(o,s)=>{o!==s&&$()});const{refetch:ve,isPending:yt}=vl(n,I),be=V(()=>{var o,s;return(s=(o=h==null?void 0:h.value)==null?void 0:o.sprints[0])==null?void 0:s._id}),ee=b(be.value);z(()=>be.value,o=>{ee.value=o}),z(()=>ee.value,o=>{var s;oe.value=((s=h.value)==null?void 0:s.sprints.find(R=>R._id===o))||null});const{data:ce,refetch:ae}=Ls(ee,{enabled:V(()=>!!ee.value)}),Qe=b(!1),St=()=>{localStorage.setItem("asFirstTime",JSON.stringify(!0)),Qe.value=!0},xt=()=>JSON.parse(localStorage.getItem("asFirstTime")||"false"),lt=()=>{var o;((o=ce.value)==null?void 0:o.status)==="active"&&xt()&&(H.value=!0,localStorage.setItem("asFirstTime",JSON.stringify(!1)))};Ol(()=>{lt()}),z(()=>{var o;return(o=ce.value)==null?void 0:o.status},()=>{lt()});const{data:$e,refetch:Jt,isFetching:Xt}=Ts(ee);z(()=>ee.value,()=>{ee.value&&ae()});const Ze=b(""),Et=b(null),it=V(()=>{const o=$e.value;if(!Ze.value||!(o!=null&&o.backlog_items))return[];const s=Ze.value.toLowerCase().trim();return o.backlog_items.filter(R=>{var j,G,L,E,T,ue,pe,le,_e,nt;const xe=((L=(G=(j=R.card)==null?void 0:j.variables)==null?void 0:G["card-title"])==null?void 0:L.toLowerCase())||"",l=((ue=(T=(E=R.card)==null?void 0:E.variables)==null?void 0:T["card-code"])==null?void 0:ue.toLowerCase())||"",t=((_e=(le=(pe=R.card)==null?void 0:pe.variables)==null?void 0:le["card-status"])==null?void 0:_e.toLowerCase())||"",a=((nt=R.priority)==null?void 0:nt.toLowerCase())||"",i=String(R._id||"").toLowerCase(),c=String(R.card_id||"").toLowerCase();return xe.includes(s)||l.includes(s)||t.includes(s)||a.includes(s)||i.includes(s)||c.includes(s)})});function Mt(o){Ze.value=o}function _t(){it.value.length===1&&Ue(it.value[0])}const ht={high:"bg-red-500/20 text-red-500",medium:"bg-yellow-500/20 text-yellow-500",low:"bg-green-500/20 text-green-500"};function Yt(o){const s=o==null?void 0:o.toLowerCase();return ht[s]??"bg-gray-500/20 text-gray-500"}const ye=V(()=>{var R,xe,l,t;const o=(R=$e.value)==null?void 0:R.backlog_items;if(!o)return null;const s=(o||[]).map(a=>{var j,G,L,E,T;const i=((j=a==null?void 0:a.card)==null?void 0:j.variables)||{},c=((G=a==null?void 0:a.card)==null?void 0:G._id)||a.card_id;return{id:c,key:i["card-code"]||(c==null?void 0:c.slice(-6))||"PRJ-?",summary:i["card-title"]||"(untitled)",type:"Story",status:el(String(i["card-status"]||"").trim()),assignee:((E=(L=a==null?void 0:a.card)==null?void 0:L.assigned_to)==null?void 0:E.name)||"Unassigned",storyPoints:Number(a.story_points||0),priority:tl(String(i.priority||"").trim()),createdAt:((T=a==null?void 0:a.card)==null?void 0:T.created_at)||new Date().toISOString(),description:i["card-description"]||""}});return{id:(xe=$e.value)==null?void 0:xe._id,name:((l=$e.value)==null?void 0:l.title)||"Sprint 1",title:(t=$e.value)==null?void 0:t.title,goal:"",start:"",end:"",started:!1,tickets:s}});function Ue(o){console.log("selected sprint id",o),ee.value=o._id,ut.value=!1}function el(o){const s=o.toLowerCase();return s.includes("progress")?"In Progress":s.includes("done")||s.includes("complete")?"Done":"Todo"}function tl(o){const s=o.toLowerCase();return s==="highest"||s==="blocker"||s==="critical"?"Highest":s==="high"||s==="major"?"High":s==="medium"||s==="normal"?"Medium":"Low"}const{mutate:ll}=Is({onSuccess:()=>{ot.success("Card removed from sprint successfully"),dt()},onError:o=>{ot.error("Failed to remove card from sprint",o)}});function dt(){Jt(),$(),ve(),ae()}function sl(o,s){const R=Array.isArray(o)?o:[o],xe=s||ee.value;!xe||!R.length||R.forEach(l=>{ll({sprintId:xe,cardId:l})})}const al=b(!1),Ge=b(null);function At(){u.value=!0,Ge.value=null}function It(o){Ge.value=o,O.value=!0,al.value=!0}const je=b(!1);function nl(){je.value=!0}const Ct=_l(),{mutate:rl,isPending:$t}=Es({onSuccess:o=>{A({name:o.title}),Ct.invalidateQueries({queryKey:["sprint-list"]}),je.value=!1}}),{mutate:Tt,isPending:ol}=zl({onSuccess:o=>{A({name:o.title}),Ct.invalidateQueries({queryKey:["sprint-list"]}),je.value=!1}}),Fe=b("");function kt(o){const s=Fe.value.trim();if(!s||s===o.title){qt();return}Tt({id:o._id,payload:{workspace_id:n.value,title:s}}),Te.value=null}function il(o){var s;oe.value?Tt({id:(s=oe.value)==null?void 0:s._id,payload:{workspace_id:n.value,title:o.name,sprintType:o.value,description:o.description}}):rl({payload:{workspace_id:n.value,title:o.name,sprintType:o.value,description:o.description}})}const Bt=b([]);function dl(o){oe.value=null,je.value=!0,Bt.value=o}function Nt(o){oe.value=o,Oe.value=!0}const{mutate:ul,isPending:Ot}=Vs(ee,{onSuccess:()=>{ae()}}),Re=()=>{ul({})},st=b(null),at=b(0);let qe=!1;Ol(()=>{if(!st.value)return;const o=st.value.offsetWidth;at.value=o/3});function Ve(){qe=!0,document.addEventListener("mousemove",wt),document.addEventListener("mouseup",ke)}function wt(o){if(!qe||!st.value)return;const s=st.value.getBoundingClientRect(),R=o.clientX-s.left;R<Ht?at.value=Ht:R>s.width-Ht?at.value=s.width-Ht:at.value=R}function ke(){qe=!1,document.removeEventListener("mousemove",wt),document.removeEventListener("mouseup",ke)}const Te=b(null);function Pt(o){Te.value=o._id,o.tempTitle=o.title,Fe.value=o.title}function qt(){var s;const o=(s=h.value)==null?void 0:s.sprints.find(R=>R._id===Te.value);o&&(o.tempTitle=o.title),Te.value=null}Rt(W,()=>{Q.value=!1});const cl=o=>{console.log("selected type",o),U.value=o,K.value=!1};Rt(F,()=>{K.value=!1});const zt=b(null),ut=b(!1);Rt(zt,()=>{ut.value=!1});const Dt=b(!1),pl=()=>{Dt.value=!0},Ut=()=>{Dt.value=!1,Ze.value=""},jt=b("all"),Je=b(!1),ct=V(()=>{var s,R,xe;if(jt.value==="all")return"All Milestones";const o=(R=(s=mt.value)==null?void 0:s.modules)==null?void 0:R.find(l=>l._id===jt.value);return((xe=o==null?void 0:o.variables)==null?void 0:xe["module-title"])||"Select Module"});return(o,s)=>{var R,xe,l,t,a,i,c,j,G,L,E,T,ue,pe,le,_e,nt,Ft,hl,kl,wl,Sl,Cl,$l,Tl,Dl,Vl,Ll;return p(),g("div",sr,[H.value?(p(),me(lr,{key:0,sptint_id:ee.value,searchQuery:D.value,"active-sprint":I.value,onGoBack:s[0]||(s[0]=C=>H.value=!1)},null,8,["sptint_id","searchQuery","active-sprint"])):N("",!0),H.value?N("",!0):(p(),g("div",ar,[f(We)?(p(),me(Jl,{key:0})):N("",!0),e("div",nr,[e("div",rr,[e("div",or,[f(We)?N("",!0):(p(),g("div",ir,[e("div",{ref_key:"containerRef",ref:st,class:"flex gap-2 min-h-0 overflow-x-auto group h-full"},[e("section",{class:"px-4 rounded-md relative flex flex-col min-h-0 bg-bg-card h-full",style:he({width:at.value+"px"})},[e("div",dr,[e("h2",ur,[rt(e("input",{type:"checkbox",class:"custom-checkbox bg-bg-body border border-border-input flex-shrink-0","onUpdate:modelValue":s[1]||(s[1]=C=>Y.value=C)},null,512),[[gs,Y.value]]),ne(" Tickets ("+M((xe=(R=f(Be))==null?void 0:R.cards)==null?void 0:xe.length)+" "+M(((t=(l=f(Be))==null?void 0:l.cards)==null?void 0:t.length)>1?"Tasks":"Task")+") ",1)]),e("div",cr,[f(d)?(p(),g("button",{key:0,class:"w-8 h-8 rounded cursor-pointer text-sm hover:bg-bg-body flex items-center justify-center",onClick:At},s[22]||(s[22]=[e("i",{class:"text-text-primary fa-regular fa-plus"},null,-1)]))):N("",!0)],512)]),e("div",pr,[I.value==="milestone"?(p(),g("div",fr,[e("button",{onClick:s[2]||(s[2]=C=>ge("")),class:X(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium transition-colors whitespace-nowrap",J.value===""?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])}," All Modules ",2),(p(!0),g(De,null,Ie(Ne.value,C=>(p(),g("button",{key:C._id,onClick:Le=>ge(C._id),class:X(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium transition-colors whitespace-nowrap cursor-pointer",J.value===C._id?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])},M(C.variables["module-title"]),11,vr))),128))])):I.value==="huddle"||I.value==="sprint"?(p(),g("div",mr,[e("div",gr,[e("button",{class:"h-8 min-w-[160px] flex items-center justify-between px-2 rounded-md border text-sm border-border hover:bg-bg-body",onClick:s[3]||(s[3]=C=>Je.value=!Je.value)},[e("span",br,[e("img",{src:f(Ca),alt:"filter",class:"w-4 h-4"},null,8,yr),e("span",xr,M(ct.value||"All Milestones"),1)]),s[23]||(s[23]=e("i",{class:"fas fa-chevron-down text-xs ml-2"},null,-1))]),Je.value?(p(),g("div",_r,[e("ul",hr,[e("li",{class:"px-3 py-2 cursor-pointer hover:bg-gray-50 hover:text-gray-600",onClick:s[4]||(s[4]=C=>ge(""))}," All Milestones "),(p(!0),g(De,null,Ie(Ne.value,C=>(p(),g("li",{key:C._id,class:"px-3 py-2 cursor-pointer hover:bg-gray-50 hover:text-gray-600",onClick:Le=>te(C._id)},M(C.variables["module-title"]),9,kr))),128))])])):N("",!0)]),e("div",wr,[(p(!0),g(De,null,Ie(Ke.value,C=>(p(),g("button",{key:C._id,onClick:Le=>de(C._id),class:X(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium whitespace-nowrap transition-colors",J.value===C._id?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])},M(C.title),11,Sr))),128))])])):N("",!0)]),f(yt)?(p(),g("div",Cr,s[24]||(s[24]=[e("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):(p(),g("div",$r,[q(Ys,{checkedAll:Y.value,"sprint-type":I.value,searchQuery:D.value,"module-id":J.value,onMoveSelectedToSprint:f(w),onDeleteSelectedBacklog:s[5]||(s[5]=C=>f(y)("backlog")),onOpenTicket:It,onTicketMovedToBacklog:sl,onOpenCreateTicket:At},null,8,["checkedAll","sprint-type","searchQuery","module-id","onMoveSelectedToSprint"])]))],4),e("div",Tr,[(p(),g("svg",{onMousedown:Ve,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-4 cursor-col-resize opacity-0 group-hover:opacity-100 transition",role:"img","aria-label":"Resize"},s[25]||(s[25]=[e("path",{fill:"currentColor",d:"M10 3h4v2h-4V3zm0 4h4v2h-4V7zm0 4h4v2h-4v-2zm0 4h4v2h-4v-2zm0 4h4v2h-4v-2z"},null,-1),e("path",{fill:"currentColor",d:"M4 2h2v20H4V2zm14 0h2v20h-2V2z",opacity:"0.4"},null,-1)]),32)),s[26]||(s[26]=e("div",{class:"absolute -top-7 left-1/2 -translate-x-1/2 rounded bg-black text-white text-xs px-2 py-1 opacity-0 group-hover:opacity-100 transition",role:"tooltip"}," Resize ",-1))]),e("section",Dr,[e("div",Vr,[e("div",Lr,[e("div",{ref_key:"elipseWrapperSprint",ref:W,class:"relative inline-block"},[e("button",{onClick:s[6]||(s[6]=Ae(C=>Q.value=!Q.value,["stop"])),class:"flex items-center gap-2 lg:px-3 px-2 py-1.5 text-sm font-medium bg-transparent rounded-lg",style:he({border:"1px solid "+U.value.dot})},[e("span",{class:"w-2 h-2 rounded-full hidden lg:flex",style:he({backgroundColor:U.value.dot})},null,4),ne(" "+M(U.value.label)+" ",1),s[27]||(s[27]=e("i",{class:"fas fa-chevron-down text-xs"},null,-1))],4),q(Pl,{name:"fade"},{default:fe(()=>[Q.value?(p(),g("ul",{key:0,onClick:s[7]||(s[7]=Ae(()=>{},["stop"])),class:"absolute left-0 mt-2 w-44 bg-bg-dropdown border border-border rounded-xl shadow-lg z-50"},[(p(),g(De,null,Ie(Z,C=>e("li",{key:C.value,onClick:Le=>(cl(C),Q.value=!Q.value),class:"flex items-center gap-3 px-4 py-2 text-sm cursor-pointer"},[e("span",{class:"w-2 h-2 rounded-full",style:he({backgroundColor:C.dot})},null,4),ne(" "+M(C.label),1)],8,Er)),64))])):N("",!0)]),_:1})],512),e("div",Mr,[e("div",Ar,[e("div",{ref_key:"sprintDropdownWrapperRef",ref:zt,class:"relative min-w-0"},[(a=f(h))!=null&&a.sprints.length?(p(),g("button",{key:0,onClick:s[8]||(s[8]=C=>ut.value=!ut.value),class:X(["flex items-center gap-3 lg:px-6 px-1 py-1.5 rounded-lg text-sm font-medium transition-all",ee.value?"text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"]),style:he(ee.value?{backgroundColor:U.value.dot}:{})},[e("span",Ir,M((j=(c=(i=f(h))==null?void 0:i.sprints)==null?void 0:c.find(C=>C._id===ee.value))==null?void 0:j.title),1),s[28]||(s[28]=e("i",{class:"fas fa-chevron-down text-xs"},null,-1))],6)):N("",!0),ut.value?(p(),g("div",Br,[(p(!0),g(De,null,Ie((G=f(h))==null?void 0:G.sprints,C=>{var Le;return p(),g("div",{key:C._id,class:"relative px-4 py-2 flex items-center justify-between text-sm cursor-pointer transition-color"},[e("div",Nr,[Te.value!==C._id?(p(),g("button",{key:0,class:"text-left truncate w-full",onClick:Xe=>Ue(C)},M(C.title),9,Or)):rt((p(),g("input",{key:1,ref_for:!0,ref:"editingInputRef","onUpdate:modelValue":s[9]||(s[9]=Xe=>Fe.value=Xe),class:"w-full px-1 py-1 text-sm rounded outline-none bg-bg-card border border-[#7d68c8]",placeholder:"Enter new name",onClick:s[10]||(s[10]=Ae(()=>{},["stop"])),onBlur:Xe=>kt(C),onKeyup:[Wt(Xe=>kt(C),["enter"]),Wt(qt,["esc"])]},null,40,Pr)),[[xl,Fe.value]])]),e("div",qr,[e("button",{class:"ml-2 text-xs text-gray-400 hover:text-accent",onClick:Ae(Xe=>Pt(C),["stop"])},s[29]||(s[29]=[e("i",{class:"fas fa-pen"},null,-1)]),8,zr),(Le=f(h))!=null&&Le.sprints.length&&Te.value!==C._id?(p(),g("button",{key:0,onClick:Ae(Xe=>Nt(C),["stop"]),class:"w-4 h-4 rounded-full flex items-center justify-center text-red-500"},s[30]||(s[30]=[e("i",{class:"fas fa-times text-xs"},null,-1)]),8,Ur)):N("",!0)])])}),128))])):N("",!0)],512)])]),e("button",{onClick:s[11]||(s[11]=C=>{var Le;return dl((Le=f(h))==null?void 0:Le.sprints)}),class:X(["w-8 h-8 lg:flex sm:hidden items-center justify-center rounded-full border text-white transition-colors shrink-0"]),style:he({backgroundColor:U.value.dot})},s[31]||(s[31]=[e("i",{class:"fa-solid fa-plus"},null,-1)]),4)]),e("div",jr,[e("div",Fr,[(E=(L=f(ce))==null?void 0:L.cards)!=null&&E.length?(p(),g("button",{key:0,class:"flex items-center justify-center w-8 h-8 me-2 rounded-full bg-accent",onClick:pl,style:he(ee.value?{backgroundColor:U.value.dot}:{})},s[32]||(s[32]=[e("i",{class:"fa-solid fa-magnifying-glass text-white"},null,-1)]),4)):N("",!0),((T=f(ce))==null?void 0:T.status)==="active"&&f(ce).cards.length?(p(),g("button",{key:1,class:"flex lg:hidden cursor-pointer text-white items-center justify-center rounded-full ms-2 w-7 h-7 text-sm font-medium mt-0.5",onClick:m,style:he(ee.value?{backgroundColor:U.value.dot}:{})},s[33]||(s[33]=[e("i",{class:"fa-regular fa-eye text-sm"},null,-1)]),4)):N("",!0)]),e("div",Rr,[((ue=f(ce))==null?void 0:ue.status)==="active"?(p(),g("div",Hr,[q(Ye,{size:"sm",onClick:Re,variant:(f(x),"primary"),class:"border-border-input border",style:he(ee.value?{backgroundColor:U.value.dot}:{})},{default:fe(()=>[ne(M(f(Ot)?"Ending...":"End"),1)]),_:1},8,["variant","style"]),e("button",{class:"cursor-pointer text-white flex items-center justify-end gap-1 px-2 py-1 rounded-md text-sm font-medium",onClick:m,style:he(ee.value?{backgroundColor:U.value.dot}:{})},s[34]||(s[34]=[e("i",{class:"fa-regular fa-eye text-sm"},null,-1),ne(" Preview ")]),4)])):(p(),g("div",Wr,[((pe=f(ce))==null?void 0:pe.status)!=="completed"?(p(),me(Ye,{key:0,size:"sm",variant:(f(x),"primary"),class:"border-border-input border",onClick:St,disabled:!ye.value||ye.value.tickets.length===0||((le=f(ce))==null?void 0:le.status)==="completed",style:he({backgroundColor:U.value.dot})},{default:fe(()=>[ne(" Start "+M(U.value.label),1)]),_:1},8,["variant","disabled","style"])):N("",!0)]))]),ye.value&&ye.value.tickets.length?(p(),g("div",Kr,[e("span",Qr,M((_e=f(ce))==null?void 0:_e.status),1),((nt=f(ce))==null?void 0:nt.status)==="active"?(p(),g("div",Zr,[e("button",{onClick:Re,class:"w-7 h-7 flex items-center justify-center rounded-full bg-accent",title:f(Ot)?"Ending...":"End Sprint",style:he(ee.value?{backgroundColor:U.value.dot}:{})},s[35]||(s[35]=[e("i",{class:"fa-solid fa-flag-checkered text-white"},null,-1)]),12,Gr)])):(p(),g("button",{key:1,onClick:St,disabled:!ye.value||ye.value.tickets.length===0||((Ft=f(ce))==null?void 0:Ft.status)==="completed",class:"w-7 h-7 flex items-center justify-center rounded-full text-white bg-accent disabled:opacity-50 disabled:cursor-not-allowed lg:hidden",title:"Start Sprint",style:he(ee.value?{backgroundColor:U.value.dot}:{})},s[36]||(s[36]=[e("i",{class:"fa-solid fa-play text-sm"},null,-1)]),12,Jr))])):N("",!0),((hl=f(ce))==null?void 0:hl.status)==="active"?(p(),g("div",{key:1,class:"relative inline-flex ms-2",onMouseenter:s[12]||(s[12]=C=>v.value=!0),onMouseleave:s[13]||(s[13]=C=>v.value=!1),onClick:r},[s[37]||(s[37]=e("span",{class:"flex lg:hidden bg-emerald-500 text-white w-7 h-7 rounded-full justify-center items-center cursor-pointer"},[e("i",{class:"fa-solid fa-check"})],-1)),rt(e("div",Xr," Sprint is active ",512),[[Qt,v.value]])],32)):N("",!0)]),q(Pl,{name:"fade"},{default:fe(()=>[Dt.value?(p(),g("div",Yr,[e("div",{class:"absolute inset-0 bg-black/10 backdrop-blur-sm",onClick:Ut}),e("div",eo,[e("div",{class:"flex justify-end"},[e("button",{onClick:Ut,class:"px-2 py-1 rounded bg-bg-input border border-border-input text-accent"},s[38]||(s[38]=[e("i",{class:"fa-solid fa-xmark"},null,-1)]))]),e("div",to,[e("p",lo," Search for "+M(I.value)+" by name, status, or priority. Start typing to filter results. ",1),e("div",so,[q(_s,{placeholder:`Search in ${I.value}`,onOnChange:Mt,onKeyup:Wt(_t,["enter"]),class:"flex-1"},null,8,["placeholder"])]),it.value.length&&Ze.value?(p(),g("div",ao,[e("ul",null,[(p(!0),g(De,null,Ie(it.value,C=>{var Le,Xe,El,Ml,Al,Il;return p(),g("li",{key:C._id,class:"px-4 py-2 cursor-pointer hover:bg-bg-hover text-text-primary border-b border-border-input"},[e("div",no,[e("div",null,[e("span",ro,M((Xe=(Le=C.card)==null?void 0:Le.variables)==null?void 0:Xe["card-title"]),1),e("span",oo," ("+M((Ml=(El=C.card)==null?void 0:El.variables)==null?void 0:Ml["card-code"])+") ",1)]),e("div",io,[e("span",{class:X(["px-3 py-1 rounded text-md",Yt(C.priority)])},M(C.priority),3),e("span",uo,M((Il=(Al=C.card)==null?void 0:Al.variables)==null?void 0:Il["card-status"]),1)])])])}),128))])])):Ze.value&&!it.value.length?(p(),g("div",co," No "+M(I.value)+' found matching "'+M(Ze.value)+'" ',1)):N("",!0)])])])):N("",!0)]),_:1})]),f(ie)||f(Xt)?(p(),g("div",po,s[39]||(s[39]=[e("div",{class:"relative w-12 h-12"},[e("div",{class:"absolute inset-0 rounded-full border-4 border-accent border-t-transparent animate-spin"}),e("div",{class:"absolute inset-2 rounded-full border-4 border-accent/50 border-t-transparent animate-spin animation-delay-150"})],-1)]))):(p(),g("div",fo,[ye.value&&["planning","active"].includes((wl=(kl=f(ce))==null?void 0:kl.status)==null?void 0:wl.toLowerCase())?(p(),me(ya,{key:0,searchQuery:D.value,sprintId:ee.value,searchedData:Et.value?[Et.value]:[],label:I.value,checkedSprintAll:P.value,sprint:ye.value,onOpenTicket:It,onEditSprint:nl,onToggleStart:f(Ce),onMoveSelectedToBacklog:f(se),onDeleteSelectedSprint:s[14]||(s[14]=C=>f(y)("sprint",C)),onRefresh:dt},null,8,["searchQuery","sprintId","searchedData","label","checkedSprintAll","sprint","onToggleStart","onMoveSelectedToBacklog"])):N("",!0),((Cl=(Sl=f(ce))==null?void 0:Sl.status)==null?void 0:Cl.toString().trim().toLowerCase())==="completed"?(p(),g("div",vo,[s[42]||(s[42]=e("div",{class:"w-20 h-20 flex justify-center items-center text-white rounded-full text-3xl"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 117.72 117.72","aria-hidden":"true"},[e("path",{fill:"#42ba96",d:`M58.86,0c9.13,0,17.77,2.08,25.49,5.79c-3.16,2.5-6.09,4.9-8.82,7.21c-5.2-1.89-10.81-2.92-16.66-2.92\r
                  c-13.47,0-25.67,5.46-34.49,14.29c-8.83,8.83-14.29,21.02-14.29,34.49c0,13.47,5.46,25.66,14.29,34.49\r
                  c8.83,8.83,21.02,14.29,34.49,14.29s25.67-5.46,34.49-14.29c8.83-8.83,14.29-21.02,14.29-34.49\r
                  c0-3.2-0.31-6.34-0.9-9.37c2.53-3.3,5.12-6.59,7.77-9.85c2.08,6.02,3.21,12.49,3.21,19.22\r
                  c0,16.25-6.59,30.97-17.24,41.62c-10.65,10.65-25.37,17.24-41.62,17.24c-16.25,0-30.97-6.59-41.62-17.24\r
                  C6.59,89.83,0,75.11,0,58.86c0-16.25,6.59-30.97,17.24-41.62S42.61,0,58.86,0z\r
                  M31.44,49.19L45.8,49l1.07,0.28c2.9,1.67,5.63,3.58,8.18,5.74c1.84,1.56,3.6,3.26,5.27,5.1\r
                  c5.15-8.29,10.64-15.9,16.44-22.9c6.35-7.67,13.09-14.63,20.17-20.98l1.4-0.54H114l-3.16,3.51\r
                  C101.13,30,92.32,41.15,84.36,52.65C76.4,64.16,69.28,76.04,62.95,88.27l-1.97,3.8l-1.81-3.87\r
                  c-3.34-7.17-7.34-13.75-12.11-19.63c-4.77-5.88-10.32-11.1-16.79-15.54L31.44,49.19z`})])],-1)),e("h4",mo,M(re.value)+" Completed ",1),e("p",go,[ne(" This "+M(I.value)+" has been successfully completed. To continue planning work, create a new "+M(I.value)+" by clicking the ",1),s[40]||(s[40]=e("strong",null,"plus (+)",-1)),s[41]||(s[41]=ne(" button and start organizing upcoming tasks. "))])])):N("",!0),(($l=f(ce))==null?void 0:$l.length)<1||((Tl=f(h))==null?void 0:Tl.sprints.length)<1?(p(),g("div",bo,[s[45]||(s[45]=e("div",{class:"w-20 h-20 flex items-center justify-center rounded-full bg-muted/10 text-accent"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-20 h-20",fill:"none",viewBox:"0 0 24 24",stroke:"#ff3333","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("h4",yo," No "+M(I.value)+"s available ",1),e("p",xo,[ne(" You donâ€™t have any "+M(I.value)+"s yet. Create a new "+M(I.value)+" to start planning and organizing your work. Click the ",1),s[43]||(s[43]=e("strong",null,"plus (+)",-1)),s[44]||(s[44]=ne(" button to get started. "))])])):N("",!0)]))])],512)]))])])])])),q(hs,{onClick:s[15]||(s[15]=Ae(()=>{},["stop"])),modelValue:Oe.value,"onUpdate:modelValue":s[16]||(s[16]=C=>Oe.value=C),title:`Delete ${I.value}`,itemLabel:I.value,itemName:(Dl=oe.value)==null?void 0:Dl.title,requireMatchText:(Vl=oe.value)==null?void 0:Vl.title,confirmText:`Delete ${I.value}`,cancelText:"Cancel",size:"md",loading:f(bt),onConfirm:et,onCancel:s[17]||(s[17]=()=>{oe.value=null,Oe.value=!1})},null,8,["modelValue","title","itemLabel","itemName","requireMatchText","confirmText","loading"]),q(Sa,{modelValue:je.value,"onUpdate:modelValue":s[18]||(s[18]=C=>je.value=C),onSave:il,sprint:oe.value,lable:I.value,creatingSprint:oe.value?f(ol):f($t),sprints:Bt.value},null,8,["modelValue","sprint","lable","creatingSprint","sprints"]),q(qa,{sprint:oe.value,modelValue:Qe.value,"onUpdate:modelValue":s[19]||(s[19]=C=>Qe.value=C),onSave:S,creatingSprint:f(We)||f(He),sprintType:I.value},null,8,["sprint","modelValue","creatingSprint","sprintType"]),q(bs,{modelValue:O.value,"onUpdate:modelValue":s[20]||(s[20]=C=>O.value=C),cardId:(Ll=Ge.value)==null?void 0:Ll.id,onClose:_},null,8,["modelValue","cardId"]),q(kn,{modelValue:u.value,"onUpdate:modelValue":s[21]||(s[21]=C=>u.value=C)},null,8,["modelValue"])])}}}),No=Gt(_o,[["__scopeId","data-v-c0486384"]]);export{No as default};
