import{d as G,O as le,P as ie,c as V,r as a,p as W,Q as D,l as ue,N as T,h as p,b as t,g as c,m as u,R,w as x,J as ce,F as X,v as de,x as Q,t as w,L as y,f as h,T as H,i as J,e as fe,k as pe,o as g,S as ge,_ as me,j as ve}from"./index-DXbJhmZM.js";import{l as be,d as xe}from"./dark-logo-Mcb_sJlF.js";const ye={class:"sticky top-0 z-10 w-full border-b border-border bg-bg-body/80 backdrop-blur supports-[backdrop-filter]:bg-bg-body/60",role:"navigation","aria-label":"Primary"},he={class:"mx-auto flex max-w-[1400px] items-center justify-between px-6"},we={key:0,src:be,alt:"Orchit AI logo",class:"w-30",loading:"eager",decoding:"async"},ke={key:1,src:xe,alt:"Orchit AI logo",class:"w-30",loading:"eager",decoding:"async"},_e=["onClick","onMouseenter"],Re={class:"flex items-center gap-4"},Ce=["aria-expanded","aria-controls","onKeydown"],Le=["onKeydown"],Te={class:"flex items-center gap-3 rounded-xl p-3"},Fe={class:"grid h-11 w-11 place-items-center rounded-full bg-orange-500 text-base font-bold text-text-primary"},Me={class:"min-w-0"},Ae={class:"truncate font-semibold leading-5"},ze={class:"truncate text-xs text-text-secondary"},$e={class:"p-1"},Ee=["aria-expanded"],Ne=G({__name:"Navbar",setup(Y){const{theme:F,setTheme:k}=le(),m=pe(),{data:Z}=ie({queryKey:["profile"],queryFn:ge,staleTime:1e3*60*5}),C=V(()=>{var n;return((n=Z.value)==null?void 0:n.data)??null}),M=V(()=>{var o,s;const n=((s=(o=C.value)==null?void 0:o.u_full_name)==null?void 0:s.trim())||"";return n?n.split(/\s+/).slice(0,3).map(r=>r[0]).join("").toUpperCase():"U"}),l=a(!1),i=a(!1),A=a(null),z=a(null),ee=a(null),$=a(!1);function L(){l.value=!l.value,l.value||(i.value=!1)}function d(){l.value=!1,i.value=!1}function E(){const n=z.value;if(!n)return;const e=n.getBoundingClientRect(),o=200,s=window.innerWidth-e.right;$.value=s<o}function N(){i.value||(i.value=!0,T(()=>E()))}function B(){i.value=!1}let v=null;function I(){!l.value||!i.value||(v&&cancelAnimationFrame(v),v=requestAnimationFrame(()=>{E(),v=null}))}function K(n){const e=A.value;e&&(e.contains(n.target)||d())}W(()=>{document.addEventListener("click",K),window.addEventListener("resize",I)}),D(()=>{document.removeEventListener("click",K),window.removeEventListener("resize",I),v&&cancelAnimationFrame(v)});async function te(){try{d(),localStorage.clear(),m.push("/login")}catch(n){console.error("Logout failed",n)}}function ne(){d(),m.push("/switch-account")}const oe=[{label:"Workspaces",to:"/",exact:!0},{label:"My Task",to:"/task"},{label:"Users",to:"/users"}],O=a(null),f=new Map,P=a(0),S=a(0);function se(n,e){if(!e)return f.delete(n);f.set(n,e)}function q(n){const e=O.value;if(!e||!n)return;const o=e.getBoundingClientRect(),s=n.getBoundingClientRect();P.value=s.left-o.left,S.value=s.width}function _(){const n=m.currentRoute.value.path;let e;if(f.has(n))e=f.get(n);else{for(const[o,s]of f.entries())if(n.startsWith(o)&&o!=="/"){e=s;break}e||(e=f.get("/"))}q(e||null)}function re(n){const e=f.get(n)||null;q(e)}ue(()=>m.currentRoute.value.path,async()=>{await T(),_()});let b=null;function j(){b&&cancelAnimationFrame(b),b=requestAnimationFrame(()=>{_(),b=null})}return W(()=>{window.addEventListener("resize",j),T(_)}),D(()=>{window.removeEventListener("resize",j),b&&cancelAnimationFrame(b)}),(n,e)=>(g(),p("nav",ye,[t("div",he,[c(u(R),{to:"/",class:"flex items-center gap-2"},{default:x(()=>[u(F)==="light"?(g(),p("img",we)):(g(),p("img",ke))]),_:1}),t("ul",{class:"relative hidden items-stretch py-4 gap-9 text-sm font-medium text-text-primary md:flex",ref_key:"linksContainerRef",ref:O},[t("div",{class:"pointer-events-none absolute bottom-0 h-[2px] rounded-full bg-text-primary transition-all duration-300 ease-out",style:ce({left:P.value+"px",width:S.value+"px"})},null,4),(g(),p(X,null,de(oe,o=>c(u(R),{key:o.to,to:o.to,custom:""},{default:x(({navigate:s,isActive:r,isExactActive:ae})=>[t("li",{ref_for:!0,ref:U=>se(o.to,U),onClick:s,class:Q(["relative cursor-pointer py-3 transition-colors",[r||o.exact&&ae?"text-text-primary":"text-text-secondary hover:text-text-primary"]]),onMouseenter:()=>re(o.to),onMouseleave:e[0]||(e[0]=U=>_())},w(o.label),43,_e)]),_:2},1032,["to"])),64))],512),t("div",Re,[e[14]||(e[14]=t("button",{class:"grid h-9 w-9 place-items-center rounded-xl border border-transparent text-text-secondary transition-[transform,background,box-shadow] hover:scale-105 hover:bg-bg-dropdown-menu-hover hover:text-text-primary focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-300","aria-label":"Notifications",type:"button"},[t("i",{class:"fa-regular fa-bell"})],-1)),e[15]||(e[15]=t("button",{class:"grid h-9 w-9 place-items-center rounded-xl border border-transparent text-text-secondary transition-[transform,background,box-shadow] hover:scale-105 hover:bg-bg-dropdown-menu-hover hover:text-text-primary focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-300","aria-label":"Help",type:"button"},[t("i",{class:"fa-regular fa-circle-question"})],-1)),t("div",{class:"relative",ref_key:"menuRef",ref:A},[t("button",{class:"h-9 w-9 overflow-hidden rounded-full bg-orange-500 text-sm font-bold text-text-primary ring-offset-2 transition hover:brightness-95 focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-300","aria-haspopup":"menu","aria-expanded":l.value?"true":"false","aria-controls":l.value?"user-menu":void 0,onClick:L,onKeydown:[y(h(L,["prevent"]),["enter"]),y(h(L,["prevent"]),["space"]),y(h(d,["prevent"]),["esc"])],type:"button"},w(M.value),41,Ce),c(H,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"opacity-0 -translate-y-1 scale-95","enter-to-class":"opacity-100 translate-y-0 scale-100","leave-active-class":"transition duration-120 ease-in","leave-from-class":"opacity-100 translate-y-0 scale-100","leave-to-class":"opacity-0 -translate-y-1 scale-95"},{default:x(()=>{var o,s;return[l.value?(g(),p("div",{key:0,id:"user-menu",class:"absolute right-0 mt-2 w-80 origin-top-right rounded-2xl bg-bg-dropdown p-1.5 text-sm shadow-xl ring-1 ring-black/5",role:"menu",onKeydown:y(h(d,["stop","prevent"]),["esc"])},[t("div",Te,[t("div",Fe,w(M.value),1),t("div",Me,[t("p",Ae,w(((o=C.value)==null?void 0:o.u_full_name)||"—"),1),t("p",ze,w(((s=C.value)==null?void 0:s.u_email)||"—"),1)])]),e[13]||(e[13]=t("div",{class:"h-px w-full bg-bg-dropdown-menu-hover/50"},null,-1)),t("ul",$e,[t("li",null,[c(u(R),{to:"/profile",class:"flex items-center gap-3 rounded-lg px-3 py-2 hover:bg-bg-dropdown-menu-hover",role:"menuitem",onClick:d},{default:x(()=>e[8]||(e[8]=[t("i",{class:"fa-regular fa-user"},null,-1),t("span",null,"Profile",-1)])),_:1,__:[8]})]),t("li",null,[c(u(R),{to:"/settings",class:"flex items-center gap-3 rounded-lg px-3 py-2 hover:bg-bg-dropdown-menu-hover",role:"menuitem",onClick:d},{default:x(()=>e[9]||(e[9]=[t("i",{class:"fa-regular fa-gear"},null,-1),t("span",null,"Account settings",-1)])),_:1,__:[9]})]),t("li",{class:"relative",onMouseenter:e[6]||(e[6]=r=>N()),onMouseleave:e[7]||(e[7]=r=>B())},[t("button",{ref_key:"themeTriggerRef",ref:z,class:"flex w-full items-center justify-between rounded-lg px-3 py-2 hover:bg-bg-dropdown-menu-hover",role:"menuitem","aria-haspopup":"menu","aria-expanded":i.value?"true":"false",onKeydown:[e[1]||(e[1]=y(h(r=>N(),["prevent"]),["right"])),e[2]||(e[2]=y(h(r=>B(),["prevent"]),["left"]))],type:"button"},e[10]||(e[10]=[t("span",{class:"flex items-center gap-3"},[t("i",{class:"fa-regular fa-circle"}),fe(" Theme ")],-1),t("i",{class:"fa-solid fa-chevron-right"},null,-1)]),40,Ee),c(H,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"opacity-0 translate-x-1 scale-95","enter-to-class":"opacity-100 translate-x-0 scale-100","leave-active-class":"transition duration-120 ease-in","leave-from-class":"opacity-100 translate-x-0 scale-100","leave-to-class":"opacity-0 translate-x-1 scale-95"},{default:x(()=>[i.value?(g(),p("div",{key:0,ref_key:"themeMenuRef",ref:ee,class:Q(["absolute top-0 z-10 w-48 origin-top-left rounded-xl bg-bg-dropdown p-1 shadow-lg ring-1 ring-black/5",$.value?"right-full mr-2":"left-full ml-2"]),role:"menu"},[t("button",{class:"block w-full rounded-lg px-3 py-2 text-left hover:bg-bg-dropdown-menu-hover",onClick:e[3]||(e[3]=r=>u(k)("system")),type:"button"}," System "),t("button",{class:"block w-full rounded-lg px-3 py-2 text-left hover:bg-bg-dropdown-menu-hover",onClick:e[4]||(e[4]=r=>u(k)("light")),type:"button"}," Light "),t("button",{class:"block w-full rounded-lg px-3 py-2 text-left hover:bg-bg-dropdown-menu-hover",onClick:e[5]||(e[5]=r=>u(k)("dark")),type:"button"}," Dark ")],2)):J("",!0)]),_:1})],32),t("li",null,[t("button",{class:"flex w-full items-center gap-3 rounded-lg px-3 py-2 hover:bg-bg-dropdown-menu-hover",role:"menuitem",type:"button",onClick:ne},e[11]||(e[11]=[t("i",{class:"fa-solid fa-repeat"},null,-1),t("span",null,"Switch account",-1)]))]),t("li",null,[t("button",{class:"flex w-full items-center gap-3 rounded-lg px-3 py-2 hover:bg-bg-dropdown-menu-hover",role:"menuitem",type:"button",onClick:te},e[12]||(e[12]=[t("i",{class:"fa-solid fa-arrow-right-from-bracket rotate-180"},null,-1),t("span",null,"Log out",-1)]))])])],40,Le)):J("",!0)]}),_:1})],512)])])]))}}),Be=me(Ne,[["__scopeId","data-v-665ea055"]]),Oe=G({__name:"LandingPageLayout",setup(Y){return(F,k)=>{const m=ve("router-view");return g(),p(X,null,[c(Be),c(m)],64)}}});export{Oe as default};
