import{d as q,c as z,i as r,e,y as M,t as b,o as l,H as G,J as H,K as J,L,n as h,a as ne,U as re,r as u,b as N,w as x,h as p,_ as D,B as T,f as j,A as E,j as ie,T as K,a5 as Q,F as _,x as $,R as de}from"./index-4JW-ETzS.js";import{_ as ue}from"./AudioRecorder.vue_vue_type_script_setup_true_lang-DoZwmjx4.js";import{I as ce}from"./IconPicker-HbCSlKrO.js";import{_ as me}from"./SearchBar.vue_vue_type_script_setup_true_lang-DGIWLYzy.js";import{F as pe}from"./fuse-Ch1WBRTM.js";const ve={class:"group relative rounded-2xl border border-border bg-bg-body p-4 shadow-sm transition-shadow hover:shadow"},be={class:"flex items-start gap-3"},fe={class:"min-w-0 flex-1"},ge={class:"flex items-center justify-between gap-2"},xe={class:"truncate text-sm font-semibold"},_e={class:"rounded-xl border border-border bg-bg-surface/30 px-3 py-1 text-xs font-medium text-text-secondary transition hover:bg-bg-surface"},ye={class:"mt-1 line-clamp-2 text-xs text-text-secondary"},he=q({__name:"AppCard",props:{app:{},actionLabel:{}},setup(c){const i=c,y=z(()=>i.actionLabel??"Open");return(m,V)=>{var f,k;return l(),r("div",ve,[e("div",be,[e("div",{class:M(["flex h-10 w-10 shrink-0 bg-accent/30 backdrop-blur-lg items-center justify-center rounded-xl text-text-primary",m.app.color])},[e("i",{class:M(["text-base font-semibold",`fa-solid ${(k=(f=m.app)==null?void 0:f.icon)==null?void 0:k.iconName}`])},null,2)],2),e("div",fe,[e("div",ge,[e("h3",xe,b(m.app.title),1),e("button",_e,b(y.value),1)]),e("p",ye,b(m.app.description),1)])])])}}}),ke=G(he,[["__scopeId","data-v-35f16c0b"]]),we=(c={})=>H({key:["create-module"]},{mutationFn:i=>L({url:"/workspace/modules/save",method:"POST",data:i.payload}),...c}),Ce=(c={})=>H({key:["create-module-ai"]},{mutationFn:i=>L({url:"workspace/modules/create-with-ai",method:"POST",data:i.payload}),...c}),$e=(c={})=>J({queryKey:["marketplace-catlog"],queryFn:({signal:i})=>L({url:"common/marketplace-categories",method:"GET",signal:i}),...c}),Me=(c,i={})=>J({queryKey:["marketplace-modules",c],queryFn:({signal:y})=>L({url:`common/market-modules?marketplace_category_id=${h(c)}`,method:"GET",signal:y}),...i}),Ve={class:"px-6 py-6 space-y-6"},Ae={key:0,class:"space-y-4"},Pe={class:"flex justify-end gap-2 pt-2"},Te={key:1,class:"space-y-6"},je={class:"relative w-full"},Ue={class:"absolute bottom-4 right-4"},Ie={class:"mt-5"},Se={key:2,class:"space-y-4"},Ne={class:"flex flex-wrap gap-2 text-xs"},ze=["onClick"],Le={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},Oe=["onClick"],Be=["src"],Fe={class:"p-3 py-4"},Re={class:"text-base font-medium"},qe={class:"text-sm opacity-75 mt-1 line-clamp-1"},De={class:"flex justify-end gap-2 pt-2"},Ee=q({__name:"CreateNewModule",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(c,{emit:i}){const y=c,m=i,V=ne(),{workspaceId:f,moduleId:k}=re(),d=u({title:"",description:"",icon:null}),v=u({});function O(){const n={};return d.value.title.trim()||(n.title="Please enter a sheet name."),d.value.description.trim()||(n.description="Please enter a description."),v.value=n,Object.keys(n).length===0}const{mutate:w,isPending:a}=we({onSuccess:()=>{V.invalidateQueries({queryKey:["workspaces"]}),A()}});function s(){O()&&w({payload:{module:{icon:d.value.icon,variables:{"module-title":d.value.title,"module-description":d.value.description,"module-icon":d.value.icon},is_ai_generated:!1},workspace_id:f.value}})}function A(){d.value={title:"",description:"",icon:null},v.value={},B.value=!1,I.value="ai"}const B=z({get:()=>y.modelValue,set:n=>m("update:modelValue",n)}),F=u(!1),R=u(null),g=u(""),U=u(!1),{mutate:W,isPending:X}=Ce({onSuccess:()=>{g.value="",A(),V.invalidateQueries({queryKey:["workspaces"]}),U.value=!1},onError:()=>{U.value=!1}});function Y(){g.value.trim()&&(U.value=!0,W({payload:{idea:g.value,workspace_id:f.value}}))}const I=u("ai"),Z=u([{id:"concept",title:"Product Concept",subtitle:"Early stage ideation board.",cover:"https://placehold.co/600x300",tags:["Experience Design","Development"]},{id:"launch",title:"Launch Prep",subtitle:"Prepare assets for product launch.",cover:"https://placehold.co/600x300",tags:["Marketing","Project Management"]}]),S=u(""),ee=u([{name:"Experience Design"},{name:"Development"},{name:"Marketing"},{name:"Project Management"}]),C=u(new Set);function te(n){C.value.has(n)?C.value.delete(n):C.value.add(n)}const se=z(()=>Z.value.filter(n=>(!S.value||n.title.toLowerCase().includes(S.value.toLowerCase()))&&(C.value.size===0||n.tags.some(t=>C.value.has(t))))),P=u(null);function oe(n){P.value=n}function le(){P.value&&w({icon:null,variables:{"sheet-title":P.value.title,"sheet-description":P.value.subtitle},is_ai_generated:!1,workspace_id:f.value,workspace_module_id:k.value})}return(n,t)=>(l(),N(de,{modelValue:B.value,"onUpdate:modelValue":t[10]||(t[10]=o=>B.value=o),size:"lg"},{default:x(()=>[t[15]||(t[15]=e("div",{class:"flex justify-between items-start px-6 border-b border-border pb-4"},[e("h2",{class:"text-xl font-semibold"}," Add New Module ")],-1)),e("div",Ve,[I.value==="manual"?(l(),r("section",Ae,[p(ce,{modelValue:d.value.icon,"onUpdate:modelValue":t[0]||(t[0]=o=>d.value.icon=o)},null,8,["modelValue"]),p(D,{modelValue:d.value.title,"onUpdate:modelValue":t[1]||(t[1]=o=>d.value.title=o),label:"Module name",size:"lg",placeholder:"Module name",error:!!v.value.title,message:v.value.title},null,8,["modelValue","error","message"]),p(D,{modelValue:d.value.description,"onUpdate:modelValue":t[2]||(t[2]=o=>d.value.description=o),label:"Description",size:"lg",textarea:"",placeholder:"A short description",error:!!v.value.description,message:v.value.description},null,8,["modelValue","error","message"]),e("div",Pe,[e("button",{class:"px-4 py-2 rounded-md text-sm text-text-secondary border",onClick:A},"Cancel"),p(T,{class:"px-4",onClick:s},{default:x(()=>[j(b(h(a)?"Saving...":"Save"),1)]),_:1})])])):I.value==="ai"?(l(),r("section",Te,[e("div",je,[e("div",{class:M(`${h(X)||U.value?"neon-flow-border":""} bg-bg-input flex h-[200px] p-4 rounded-2xl relative`)},[!F.value&&!R.value?E((l(),r("textarea",{key:0,"onUpdate:modelValue":t[3]||(t[3]=o=>g.value=o),placeholder:"Ask Orchit AI to create a sheet...",class:"w-full h-full resize-none outline-none bg-transparent text-sm"},null,512)),[[K,g.value]]):ie("",!0),g.value?(l(),N(Q,{key:2,name:"rotate-fade",appear:""},{default:x(()=>[e("div",{onClick:t[7]||(t[7]=o=>Y()),class:"absolute bottom-4 right-4 w-9 h-9 bg-accent rounded-md flex items-center justify-center cursor-pointer shadow"},t[11]||(t[11]=[e("i",{class:"text-white fa-solid fa-arrow-right"},null,-1)]))]),_:1})):(l(),N(Q,{key:1,name:"fade-slide",appear:""},{default:x(()=>[e("div",Ue,[p(ue,{modelValue:g.value,"onUpdate:modelValue":t[4]||(t[4]=o=>g.value=o),isRecording:F.value,"onUpdate:isRecording":t[5]||(t[5]=o=>F.value=o),hasAudio:R.value,"onUpdate:hasAudio":t[6]||(t[6]=o=>R.value=o)},null,8,["modelValue","isRecording","hasAudio"])])]),_:1}))],2)]),t[13]||(t[13]=e("div",{class:"flex w-full px-6 text-sm text-text-secondary items-center gap-4 mt-6"},[e("hr",{class:"flex-auto text-border"}),e("span",null,"OR"),e("hr",{class:"flex-auto text-border"})],-1)),e("div",Ie,[p(T,{variant:"secondary",color:"dark",block:!0,onClick:t[8]||(t[8]=o=>I.value="manual")},{default:x(()=>t[12]||(t[12]=[j(" Create Manually ")])),_:1,__:[12]})])])):(l(),r("section",Se,[E(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>S.value=o),class:"w-full border rounded-lg p-2 text-sm border-border",placeholder:"Search"},null,512),[[K,S.value]]),e("div",Ne,[(l(!0),r(_,null,$(ee.value,o=>(l(),r("button",{key:o.name,class:M(["px-3.5 py-1.5 rounded-md",C.value.has(o.name)?"bg-black text-white":"bg-bg-body text-text-secondary"]),onClick:ae=>te(o.name)},b(o.name),11,ze))),128))]),e("div",Le,[(l(!0),r(_,null,$(se.value,o=>(l(),r("button",{key:o.id,class:"border border-border rounded-xl overflow-hidden text-left hover:shadow-sm",onClick:ae=>oe(o)},[e("img",{src:o.cover,class:"w-full h-36 object-cover"},null,8,Be),e("div",Fe,[e("div",Re,b(o.title),1),e("div",qe,b(o.subtitle),1)])],8,Oe))),128))]),e("div",De,[p(T,{variant:"secondary",onClick:A},{default:x(()=>t[14]||(t[14]=[j("Cancel")])),_:1,__:[14]}),p(T,{disabled:!P.value,onClick:le},{default:x(()=>[j(b(h(a)?"Adding...":"Add board"),1)]),_:1},8,["disabled"])])]))])]),_:1,__:[15]},8,["modelValue"]))}}),Ke=G(Ee,[["__scopeId","data-v-0571a993"]]),Qe={class:"flex-auto flex-grow h-full bg-bg-card rounded-lg border border-border overflow-x-auto flex-col flex"},Ge={class:"sticky top-0 w-full z-10 backdrop-blur"},He={class:"mx-auto px-4 py-6"},Je={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},We={class:"flex gap-2 items-center"},Xe={class:"mt-5 flex flex-wrap gap-2"},Ye=["onClick"],Ze={class:"mx-auto w-full px-4 pb-16"},et={class:"pt-4"},tt={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},rt=q({__name:"More",setup(c){const i=u(!1),y=()=>{i.value=!0},m=u(""),{data:V,isPending:f}=$e(),{data:k,isPending:d}=Me(m),v=u(""),O=z(()=>{const w=k.value??[];return v.value.trim()?new pe(w,{keys:["title","description"],threshold:.3}).search(v.value).map(s=>s.item):w});return(w,a)=>(l(),r(_,null,[e("div",Qe,[e("header",Ge,[e("div",He,[e("div",Je,[a[5]||(a[5]=e("h1",{class:"text-2xl font-semibold tracking-tight"},"Apps",-1)),e("div",We,[p(me,{onOnChange:a[0]||(a[0]=s=>{v.value=s}),placeholder:"Search in Orchit AI space"}),p(T,{size:"sm",onClick:a[1]||(a[1]=s=>y())},{default:x(()=>a[4]||(a[4]=[j(" Add New ")])),_:1,__:[4]})])]),e("div",Xe,[h(f)?(l(),r(_,{key:0},$(["3","2","2"],s=>e("button",{key:s,class:"rounded-full border-border w-26 h-8 cursor-pointer border px-4 py-1.5 text-sm transition-all animate-pulse bg-bg-surface"})),64)):(l(),r(_,{key:1},[e("button",{onClick:a[2]||(a[2]=s=>m.value=""),class:M(["rounded-full cursor-pointer border px-4 py-1.5 text-sm transition-all",m.value==""?"border-border bg-accent text-white shadow-sm":"border-border bg-bg-card text-text-secondary hover:bg-accent/50"])}," All ",2),(l(!0),r(_,null,$(h(V),s=>(l(),r("button",{key:s==null?void 0:s._id,onClick:A=>m.value=s==null?void 0:s._id,class:M(["rounded-full cursor-pointer border px-4 py-1.5 text-sm transition-all",m.value===(s==null?void 0:s._id)?"border-border bg-accent text-white shadow-sm":"border-border bg-bg-card text-text-secondary hover:bg-accent/50"])},b(s==null?void 0:s.title),11,Ye))),128))],64))])])]),e("main",Ze,[e("section",et,[a[6]||(a[6]=e("div",{class:"mb-4 flex items-center justify-between"},[e("h2",{class:"text-lg font-semibold"},"Currentl Using")],-1)),e("div",tt,[h(d)?(l(),r(_,{key:0},$(["3","2","2"],s=>e("div",{key:s,class:"h-16 w-full p-3 rounded-lg bg-bg-surface animate-pulse"})),64)):(l(!0),r(_,{key:1},$(O.value,s=>(l(),N(ke,{key:s==null?void 0:s._id,app:s,"action-label":"Open"},null,8,["app"]))),128))])])])]),p(Ke,{size:"md",modelValue:i.value,"onUpdate:modelValue":a[3]||(a[3]=s=>i.value=s)},null,8,["modelValue"])],64))}});export{rt as default};
