import{d as N,u as z,r as x,c as r,a as A,b as D,w as g,e as a,s as n,f as o,g as F,h as d,i as T,j as q,t as b,B as H,k as R,l as U,o as k}from"./index-CoNh7NKH.js";import{_ as j}from"./AuthLayout.vue_vue_type_script_setup_true_lang-BgqTEcN5.js";import{_ as E}from"./BaseTextField.vue_vue_type_script_setup_true_lang-qAoJ53NA.js";import{l as O}from"./auth-CVigbJ93.js";import"./favicon-BAFXWHLW.js";import"./info-DjaLHeD_.js";const W={class:"max-w-[500px] md:mx-auto w-full text-text-primary bg-bg-body"},G={key:0,class:"text-red-500 text-sm text-center mt-2"},h=N({name:"LoginPage",__name:"Login",setup(J){const V=z(),B=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,u=x(""),i=x(""),s=x(""),l={email:!1,password:!1},p=r(()=>l.email?u.value.trim()?B.test(u.value)?"":"Invalid email":"Email is required":""),I=r(()=>!!p.value),f=r(()=>l.password?i.value?i.value.length<6?"Password must be at least 6 characters":"":"Password is required":""),P=r(()=>!!f.value),S=r(()=>!p.value&&!f.value),w=U(),{mutateAsync:L,isPending:y}=A({mutationFn:O}),C=r(()=>y.value),$=r(()=>y.value?"Signing In...":"Continue");function c(){s.value&&(s.value="")}async function M(){var v,e,m;if(s.value="",l.email=!0,l.password=!0,!S.value){s.value="Please fill all fields correctly.";return}try{const t=await L({u_email:u.value,u_password:i.value});localStorage.setItem("token",(v=t==null?void 0:t.data)==null?void 0:v.token),V.workspace?w.push("/create-workspace"):w.push("/dashboard")}catch(t){s.value=((m=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:m.message)||"Login failed. Please try again."}}return(v,e)=>{const m=R("router-link");return k(),D(j,null,{form:g(()=>[a("div",W,[e[0]||(n(-1,!0),(e[0]=a("h2",{class:"text-[32px] font-medium mb-12 text-center text-text-primary"},[e[7]||(e[7]=o(" Sign in to Orchit AI "))])).cacheIndex=0,n(1),e[0]),a("form",{onSubmit:F(M,["prevent"]),class:"space-y-4 w-full"},[d(E,{modelValue:u.value,"onUpdate:modelValue":[e[1]||(e[1]=t=>u.value=t),c],label:"Email",placeholder:"Email address",size:"lg",error:I.value,message:p.value,onBlur:e[2]||(e[2]=t=>l.email=!0)},null,8,["modelValue","error","message"]),d(E,{modelValue:i.value,"onUpdate:modelValue":[e[3]||(e[3]=t=>i.value=t),c],label:"Password",placeholder:"Enter your password",size:"lg",type:"password",error:P.value,message:f.value,onBlur:e[4]||(e[4]=t=>l.password=!0)},null,8,["modelValue","error","message"]),d(H,{disabled:C.value,size:"lg",block:!0,type:"submit"},{default:g(()=>[o(b($.value),1)]),_:1},8,["disabled"]),s.value?(k(),T("p",G,b(s.value),1)):q("",!0)],32),e[5]||(n(-1,!0),(e[5]=a("p",{class:"text-sm font-medium text-text-secondary text-center mt-6"},[e[8]||(e[8]=o(" By signing in, you agree to the ")),e[9]||(e[9]=a("span",{class:"text-text-primary font-bold"},"Privacy Policy",-1)),e[10]||(e[10]=o(" and ")),e[11]||(e[11]=a("span",{class:"text-text-primary font-bold"},"Terms of Service",-1)),e[12]||(e[12]=o(". "))])).cacheIndex=5,n(1),e[5]),e[6]||(n(-1,!0),(e[6]=a("p",{class:"text-sm font-medium text-text-secondary text-center mt-8"},[e[14]||(e[14]=o(" Donâ€™t have an account? ")),d(m,{to:"/register",class:"text-text-primary font-bold underline"},{default:g(()=>e[13]||(e[13]=[o("Sign up")])),_:1,__:[13]})])).cacheIndex=6,n(1),e[6])])]),_:1})}}});export{h as default};
