import{d as xe,r as u,c as r,aw as ye,x as ge,m as a,g as o,f as D,F as n,n as i,b4 as Y,t as y,k as $,G as B,h as be,ap as ke,w as we,ay as he,al as _e,bt as Ce,o as s,l as g,ah as $e,P as ze,E as Z,bu as Se,bv as Ne,bw as De,bx as Be,N as Ve}from"./index-DJi4PcP2.js";import{o as Ee}from"./index-tOW-ZCCr.js";const Re=["src"],Ie={key:0,class:"font-bold"},Me={class:"text-nowrap"},Te=["onClick","onMouseenter"],Fe={class:"flex items-center gap-2 min-w-0 flex-1"},Pe=["src"],Oe={class:"flex flex-col gap-1 max-w-40"},je={class:"overflow-hidden font-semibold overflow-ellipsis"},Ae={key:0,class:"min-w-40 line-clamp-2 text-wrap text-text-secondary text-xs"},Ue={key:1,class:"fa-regular text-left fa-arrows-spin animate-spin duration-250"},We={key:0,class:"pl-2 flex items-center relative ml-auto"},Ge={class:"py-1 text-sm"},Le=["onClick"],qe={key:1,class:"pl-2 flex items-center relative"},He=["onClick","aria-expanded","aria-label"],Je={class:"rounded-md border border-border bg-bg-dropdown shadow-lg w-28 py-1 flex flex-col text-sm"},Ke=["onClick"],Qe=["onClick"],Xe=xe({__name:"Dropdown",props:{prefix:{},options:{default:()=>[]},modelValue:{default:""},variant:{default:"primary"},icon:{},size:{default:"md"},actions:{type:Boolean,default:!0},canEdit:{type:Boolean,default:!0},canDelete:{type:Boolean,default:!0},customClasses:{default:""}},emits:["update:modelValue","edit-option","delete-option","nested-select"],setup(ee,{emit:te}){const m=ee,w=te,h=u(!1),V=u(null),b=u(null),f=u(null),E=u({position:"fixed",top:"-9999px",left:"-9999px"});let x=null;const R=r({get:()=>m.modelValue,set:e=>w("update:modelValue",e)}),c=r(()=>m.options.find(e=>e._id===R.value)??null);function le(){h.value?z():(h.value=!0,_e(()=>{se()}))}function z(){h.value=!1,k.value=null,x&&(x(),x=null)}function se(){b.value&&f.value&&(x=Ce(b.value,f.value,ae))}function ae(){!b.value||!f.value||Se(b.value,f.value,{placement:"bottom-start",strategy:"fixed",middleware:[Ne(({placement:e})=>e.startsWith("top")?17:5),De(),Be({padding:5})]}).then(({x:e,y:l})=>{E.value={position:"fixed",left:`${e}px`,top:`${l}px`}})}function I(e){R.value=e._id,z()}const S=u(null),k=u(null),v=u(null);function oe(e){var l;(l=e.nested)!=null&&l.length?k.value=k.value===e._id?null:e._id:I(e)}const N=u(null);function ne(e,l){w("nested-select",e),I(l),N.value=e,k.value=null}const _=u(null);function re(e){_.value=null,v.value=v.value===e?null:e}function ie(e){w("edit-option",e),v.value=null,_.value=null}function ue(e){w("delete-option",e),v.value=null,_.value=null}Ee(V,e=>{const l=e.target;f.value&&f.value.contains(l)||(z(),v.value=null,_.value=null)}),ye(()=>{x&&x()});const p=r(()=>m.size==="sm"),de=r(()=>p.value?"px-2 py-1 text-xs":"px-3 py-1.5 text-sm"),ce=r(()=>p.value?"text-xs":"text-sm"),pe=r(()=>p.value?"text-xs":"text-sm"),fe=r(()=>p.value?"px-3 py-1":"px-4 py-2"),M=r(()=>p.value?"w-3.5 h-3.5":"w-4 h-4"),C=r(()=>p.value?"w-3.5 h-3.5":"w-4 h-4"),T=r(()=>p.value?"text-base":"text-lg"),ve=r(()=>p.value?"w-3.5 h-3.5":"w-4 h-4"),me=r(()=>"dark:border-light-black border-border-gray");return ge(()=>m.options,()=>{},{deep:!0}),(e,l)=>{var F,P,O,j,A,U,W,G,L,q,H;return s(),a("div",{ref_key:"wrapperRef",ref:V,class:"relative inline-block text-left"},[o("button",{ref_key:"triggerRef",ref:b,onClick:le,type:"button",class:n(["text-nowrap inline-flex justify-between items-center gap-1 border rounded-[6px] font-medium cursor-pointer transition bg-bg-surface",[de.value,e.variant==="secondary"?"!bg-bg-body border-0":"border-border"]])},[(F=c.value)!=null&&F.prefix?(s(),a("span",{key:0,class:n(M.value)},[typeof((P=c.value)==null?void 0:P.prefix)=="string"?(s(),a("img",{key:0,src:(O=c.value)==null?void 0:O.prefix,class:n(C.value)},null,10,Re)):(s(),D(Y((j=c.value)==null?void 0:j.prefix),{key:1,class:n(C.value)},null,8,["class"]))],2)):i("",!0),o("i",{class:n(`${(U=(A=c.value)==null?void 0:A.icon)==null?void 0:U.prefix} ${(G=(W=c.value)==null?void 0:W.icon)!=null&&G.iconName?(q=(L=c.value)==null?void 0:L.icon)==null?void 0:q.iconName:"file"} ${T.value}`)},null,2),o("span",{class:n(ce.value)},[e.prefix?(s(),a("span",Ie,y(e.prefix)+":",1)):i("",!0),o("span",Me,[$(y((H=c.value)==null?void 0:H.title)+" ",1),N.value?(s(),a(B,{key:0},[$(" ("+y(N.value.title)+") ",1)],64)):i("",!0)])],2),(s(),a("svg",{class:n([ve.value,"text-text-secondary mt-1"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l[4]||(l[4]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),(s(),D(he,{to:"body"},[be(ke,{name:"fade-scale","enter-active-class":"transition duration-200 ease-out","leave-active-class":"transition duration-150 ease-in","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:we(()=>[h.value?(s(),a("div",{key:0,ref_key:"menuRef",ref:f,style:$e(E.value),class:n(["max-h-[500px] overflow-visible z-[9999] min-w-fit rounded-[6px] border border-border shadow-lg bg-bg-dropdown fixed",[me.value,m.customClasses?m.customClasses:""]]),onClick:l[3]||(l[3]=g(()=>{},["stop"]))},[o("ul",{class:n(["py-1 z-[2]",pe.value])},[(s(!0),a(B,null,Z(e.options,t=>{var J,K,Q,X;return s(),a("li",{key:t._id,class:n(["group cursor-pointer flex items-stretch text-nowrap hover:bg-bg-dropdown-menu-hover",fe.value]),onClick:d=>oe(t),onMouseenter:d=>S.value=t._id,onMouseleave:l[2]||(l[2]=d=>S.value=null)},[o("div",Fe,[t.prefix?(s(),a("span",{key:0,class:n(M.value)},[typeof t.prefix=="string"?(s(),a("img",{key:0,src:t.prefix,class:n(C.value)},null,10,Pe)):(s(),D(Y(t.prefix),{key:1,class:n(["text-text-primary",C.value])},null,8,["class"]))],2)):i("",!0),o("i",{class:n(`${(J=t.icon)==null?void 0:J.prefix} ${(K=t.icon)!=null&&K.iconName?(Q=t.icon)==null?void 0:Q.iconName:"file"} ${T.value}`)},null,2),o("div",Oe,[o("span",je,y(t.title),1),t.description?(s(),a("p",Ae,y(t.description),1)):i("",!0)]),(t==null?void 0:t.status)=="running"?(s(),a("i",Ue)):i("",!0)]),(X=t.nested)!=null&&X.length?(s(),a("div",We,[l[5]||(l[5]=o("span",{class:"text-text-secondary"},"...",-1)),S.value===t._id||k.value===t._id?(s(),a("div",{key:0,class:"absolute left-[-170px] sm:left-[30px] top-[-250px] sm:top-[-5px] ml-1 z-[30] min-w-48 bg-bg-dropdown border border-border rounded-md shadow-lg max-h-60 overflow-y-auto",onClick:l[0]||(l[0]=g(()=>{},["stop"]))},[o("ul",Ge,[(s(!0),a(B,null,Z(t.nested,d=>(s(),a("li",{key:d._id,class:"px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer",onClick:Ye=>ne(d,t)},y(d.title),9,Le))),128))])])):i("",!0)])):e.actions&&e.canEdit&&e.canDelete?(s(),a("div",qe,[o("button",{class:"opacity-0 cursor-pointer group-hover:opacity-100 focus:opacity-100 transition rounded-md px-1.5 py-1 text-text-secondary hover:bg-bg-dropdown-menu-hover",onClick:g(d=>re(t._id),["stop"]),"aria-expanded":v.value===t._id?"true":"false","aria-label":`Actions for ${t.title}`}," â‹¯ ",8,He),v.value===t._id?(s(),a("div",{key:0,class:"absolute left-[100%] right-0 top-full mt-1 z-[20]",onClick:l[1]||(l[1]=g(()=>{},["stop"]))},[o("div",Je,[e.canEdit?(s(),a("button",{key:0,class:"px-3 py-1.5 text-left hover:bg-bg-dropdown-menu-hover cursor-pointer",onClick:g(d=>ie(t),["stop"])},l[6]||(l[6]=[o("i",{class:"fa-regular fa-edit"},null,-1),$(" Edit ")]),8,Ke)):i("",!0),e.canDelete?(s(),a("button",{key:1,class:"px-3 py-1.5 text-left text-red-600 cursor-pointer",onClick:g(d=>ue(t),["stop"])},l[7]||(l[7]=[o("i",{class:"fa-regular fa-trash"},null,-1),$(" Delete ")]),8,Qe)):i("",!0)])])):i("",!0)])):i("",!0)],42,Te)}),128)),ze(e.$slots,"more",{},void 0,!0)],2)],6)):i("",!0)]),_:3})]))],512)}}}),tt=Ve(Xe,[["__scopeId","data-v-c5a7f26b"]]);export{tt as default};
