import{d as K,i as r,F as f,x as p,e,t as a,b as L,o,r as _,J as R,m as q,h as m,w as v,f as h,n as d,k as E,B as S,A as y,C as z,K as H,j as J,L as G,M as O}from"./index-DS_2ctjY.js";import{D as Q,K as W}from"./Dropdown-BmrrFKNb.js";import{u as X,a as Y,b as Z}from"./useMore-Cim12bvY.js";import{K as V}from"./KanbanTicket-BzbBHQT9.js";import"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-Dp8VXprM.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-BKi-FgQg.js";const ee={class:"flex sticky top-0 z-[1] bg-bg-body items-center justify-between w-full p-4 border-b border-border cursor-grab"},te={class:"flex items-center gap-2 flex-auto max-w-[80%]"},se={class:"font-semibold overflow-ellipsis line-clamp-1 text-nowrap text-foreground px-1 py-0.5 rounded hover:bg-bg-card focus:outline-none focus:ring-1 focus:ring-border cursor-text",title:"Click to rename"},oe={class:"text-xs bg-bg-card aspect-square flex justify-center items-center text-muted-foreground p-1 min-w-6 rounded-full"},re={class:"p-4 space-y-2"},de=K({__name:"KanbanView",props:{columns:{}},setup(N){return(u,b)=>(o(!0),r(f,null,p(u.columns,(n,x)=>(o(),r("div",{key:x,class:"flex bg-bg-body flex-col min-w-[300px] h-[600px] overflow-y-auto w-80 rounded-lg transition-all duration-200"},[e("div",ee,[e("div",te,[e("button",se,a(n.title||"Untitled"),1),e("span",oe,a(n.cards?n.cards.length:0),1)])]),e("div",re,[(o(!0),r(f,null,p(n==null?void 0:n.cards,(g,i)=>(o(),L(V,{footer:!0,key:`card-${i}`,onSelect:()=>{},ticket:g},null,8,["ticket"]))),128))])]))),128))}}),le={class:"flex flex-col w-full h-full overflow-y-auto bg-bg-card rounded-lg border border-border overflow-hidden"},ne={class:"sticky top-0 w-full z-10 bg-bg-card/80 backdrop-blur border-b border-border"},ae={class:"mx-auto px-6 py-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4"},ie={class:"flex flex-col gap-2"},ue={key:0,class:"space-y-2"},ce={key:1},be={class:"text-3xl font-semibold tracking-tight mt-2 capitalize"},me={class:"text-sm text-text-secondary max-w-4xl mt-2"},xe={class:"flex items-center gap-2"},fe={class:"mx-auto w-full p-6 pb-16"},pe={class:"flex flex-col lg:flex-row gap-4 justify-between"},ge={class:"flex-auto border overflow-x-auto border-border bg-bg-card rounded-lg min-h-[420px]"},_e={class:"flex px-4 py-2 justify-between items-center border-b border-border"},ve={key:1,class:"h-8 w-32 bg-bg-body rounded"},he={class:"rounded-lg space-y-3 w-full"},ye={class:"flex w-full overflow-x-auto gap-3 p-4 scrollbar-visible"},we={class:"w-full lg:w-64 min-w-[375px] border border-border bg-bg-card rounded-lg p-4 h-fit"},ke={key:0,class:"mt-3 flex flex-wrap gap-2"},Ce={key:1,class:"mt-3 flex flex-wrap gap-2"},je={class:"mt-12 w-full"},$e={key:0,class:"space-y-2"},Be={key:1},De={class:"flex justify-end mt-2"},Me={key:2,class:"mt-6 text-sm"},Pe=["src"],Se={key:1,class:"w-8 h-8 rounded-full bg-accent/40 flex justify-center items-center"},ze={class:"font-medium capitalize"},Ke={class:"text-text-secondary text-xs"},Le={class:"mt-1 font-light text-sm"},Re=K({__name:"ModuleDetail",setup(N){const u=_([]),b=_(""),n=_(""),{moduleId:x,workspaceId:g}=R(),{data:i,isPending:c}=X(x),{data:I,isPending:w}=Y(x.value,b),{mutate:T,isPending:U}=Z({onSuccess:l=>{n.value="",u.value=[...u.value,{...l}]}}),A=()=>{var l;n.value.trim()&&T({payload:{workspace_module_id:(l=i.value)==null?void 0:l._id,comment:n.value}})};return q(i,l=>{var t;l!=null&&l.comments&&(u.value=[...l.comments]),(t=l==null?void 0:l.sheets)!=null&&t.length&&(b.value=l.sheets[0]._id)},{immediate:!0}),(l,t)=>{var k,C,j,$,B;const F=E("router-link");return o(),r("div",le,[e("header",ne,[e("div",ae,[e("div",ie,[m(F,{to:`/workspace/more/${d(g)}`},{default:v(()=>t[2]||(t[2]=[e("button",{class:"text-sm text-text-secondary cursor-pointer hover:underline flex gap-2 items-center"},[e("i",{class:"fa-solid fa-arrow-left"}),h(" Back to Apps ")],-1)])),_:1,__:[2]},8,["to"]),d(c)?(o(),r("div",ue,t[3]||(t[3]=[e("div",{class:"h-6 w-48 bg-bg-body rounded"},null,-1),e("div",{class:"h-4 w-96 bg-bg-body/80 rounded"},null,-1),e("div",{class:"h-3 w-32 bg-bg-body/80 rounded"},null,-1)]))):(o(),r("div",ce,[e("h1",be,a((k=d(i))==null?void 0:k.title),1),e("p",me,a((C=d(i))==null?void 0:C.description),1),t[4]||(t[4]=e("p",{class:"text-xs text-text-secondary mt-2"},"12.5k views · 348 using",-1))]))]),e("div",xe,[m(S,{size:"sm",disabled:d(c)},{default:v(()=>t[5]||(t[5]=[h("Use this Module")])),_:1,__:[5]},8,["disabled"]),t[6]||(t[6]=e("button",{class:"border border-border rounded-lg w-9 h-9 text-text-secondary hover:text-accent flex items-center justify-center"},[e("span",null,"♡")],-1))])])]),e("main",fe,[e("div",pe,[e("div",ge,[e("div",_e,[d(c)?(o(),r("div",ve)):(o(),L(Q,{key:0,modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=s=>b.value=s),options:(j=d(i))==null?void 0:j.sheets,variant:"secondary"},null,8,["modelValue","options"]))]),e("div",he,[y(m(W,null,null,512),[[z,d(w)]]),y(e("div",ye,[m(de,{columns:($=d(I))==null?void 0:$.groups},null,8,["columns"])],512),[[z,!d(w)]])])]),e("aside",we,[t[8]||(t[8]=e("h3",{class:"font-medium text-sm"},"Tags",-1)),d(c)?(o(),r("div",ke,t[7]||(t[7]=[e("div",{class:"h-6 w-16 bg-bg-body rounded"},null,-1),e("div",{class:"h-6 w-12 bg-bg-body rounded"},null,-1),e("div",{class:"h-6 w-20 bg-bg-body rounded"},null,-1)]))):(o(),r("div",Ce,[(o(!0),r(f,null,p((B=d(i))==null?void 0:B.tags,s=>(o(),r("span",{key:s,class:"border border-border bg-bg-surface cursor-pointer rounded-md px-2 py-1 text-xs text-text-secondary hover:bg-accent/50 hover:text-white"},a(s),1))),128))])),t[9]||(t[9]=H('<h3 class="font-medium text-sm mt-6">Share</h3><div class="mt-3 flex gap-2"><button class="border border-border rounded-lg w-9 h-9 text-text-secondary hover:text-accent flex items-center justify-center">⇪</button><button class="border border-border rounded-lg w-9 h-9 text-text-secondary hover:text-accent flex items-center justify-center">⤫</button><button class="border border-border rounded-lg w-9 h-9 text-text-secondary hover:text-accent flex items-center justify-center">Ｆ</button></div><p class="text-xs text-text-secondary mt-6">Published 3 weeks ago</p><button class="text-xs text-text-secondary underline mt-1">Report resource</button>',4))])]),e("section",je,[t[11]||(t[11]=e("h2",{class:"font-semibold text-base mb-3"},"Comments",-1)),d(c)?(o(),r("div",$e,t[10]||(t[10]=[e("div",{class:"h-20 w-full bg-bg-body rounded"},null,-1),e("div",{class:"h-6 w-24 bg-bg-body rounded"},null,-1)]))):(o(),r("div",Be,[y(e("textarea",{class:"w-full border border-border rounded-lg bg-bg-card text-sm text-text-secondary p-3 focus:outline-none",placeholder:"Add a comment...","onUpdate:modelValue":t[1]||(t[1]=s=>n.value=s)},null,512),[[G,n.value]]),e("div",De,[m(S,{onClick:A,size:"sm"},{default:v(()=>[h(a(d(U)?"Posting...":"Post"),1)]),_:1})])])),d(c)?J("",!0):(o(),r("div",Me,[e("span",null,a(u.value.length)+" comments",1),(o(!0),r(f,null,p(u.value,s=>{var D,M,P;return o(),r("div",{key:s._id,class:"flex gap-3 mt-4 border-b border-border pb-2"},[(D=s.user_id)!=null&&D.u_profile_image?(o(),r("img",{key:0,class:"w-8 h-8 bg-bg-surface rounded-full",src:s.user_id.u_profile_image},null,8,Pe)):(o(),r("div",Se,a(d(O)(((M=s==null?void 0:s.user_id)==null?void 0:M.u_full_name)??"")),1)),e("div",null,[e("p",ze,a((P=s==null?void 0:s.user_id)==null?void 0:P.u_full_name),1),e("p",Ke,a(s==null?void 0:s.time),1),e("p",Le,a(s==null?void 0:s.comment),1)])])}),128))]))])])])}}});export{Re as default};
