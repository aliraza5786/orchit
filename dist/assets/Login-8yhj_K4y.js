import{d as N,r as y,c as r,u as Q,a as z,b as A,w as c,o as E,e as a,s as n,f as o,g as D,h as d,i as F,j as K,_ as V,t as B,B as T,k as H,l as R}from"./index-CGmi0vIW.js";import{_ as U}from"./AuthLayout.vue_vue_type_script_setup_true_lang-Cb7u4g4G.js";import{l as j}from"./auth-hViePqEn.js";import{u as O}from"./workspace-CFws1Fb9.js";import"./favicon-BAFXWHLW.js";const W={class:"max-w-[500px] md:mx-auto w-full text-text-primary bg-bg-body"},G={key:0,class:"text-red-500 text-sm text-center mt-2"},ee=N({name:"LoginPage",__name:"Login",setup(J){const w=O(),P=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,i=y(""),u=y(""),s=y(""),l={email:!1,password:!1},p=r(()=>l.email?i.value.trim()?P.test(i.value)?"":"Invalid email":"Email is required":""),I=r(()=>!!p.value),f=r(()=>l.password?u.value?u.value.length<6?"Password must be at least 6 characters":"":"Password is required":""),S=r(()=>!!f.value),C=r(()=>!p.value&&!f.value),v=R(),{mutateAsync:q,isPending:b}=Q({mutationFn:j}),L=r(()=>b.value),$=r(()=>b.value?"Signing In...":"Continue");function k(){s.value&&(s.value="")}const x=z();async function M(){var g,e,m;if(s.value="",l.email=!0,l.password=!0,!C.value){s.value="Please fill all fields correctly.";return}try{const t=await q({u_email:i.value,u_password:u.value});localStorage.setItem("token",(g=t==null?void 0:t.data)==null?void 0:g.token),x.invalidateQueries({queryKey:["me"]}),x.invalidateQueries({queryKey:["workspaces"]}),x.invalidateQueries({queryKey:["profile"]}),w.pricing?v.push("/dashboard?stripePayment=true"):w.workspace?v.push("/create-workspace"):v.push("/dashboard")}catch(t){s.value=((m=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:m.message)||"Login failed. Please try again."}}return(g,e)=>{const m=H("router-link");return E(),A(U,null,{form:c(()=>[a("div",W,[e[0]||(n(-1,!0),(e[0]=a("h2",{class:"text-[32px] font-medium mb-12 text-center text-text-primary"},[e[7]||(e[7]=o(" Sign in to Orchit AI "))])).cacheIndex=0,n(1),e[0]),a("form",{onSubmit:D(M,["prevent"]),class:"space-y-4 w-full"},[d(V,{modelValue:i.value,"onUpdate:modelValue":[e[1]||(e[1]=t=>i.value=t),k],label:"Email",placeholder:"Email address",size:"lg",error:I.value,message:p.value,onBlur:e[2]||(e[2]=t=>l.email=!0)},null,8,["modelValue","error","message"]),d(V,{modelValue:u.value,"onUpdate:modelValue":[e[3]||(e[3]=t=>u.value=t),k],label:"Password",placeholder:"Enter your password",size:"lg",type:"password",error:S.value,message:f.value,onBlur:e[4]||(e[4]=t=>l.password=!0)},null,8,["modelValue","error","message"]),d(T,{disabled:L.value,size:"lg",block:!0,type:"submit"},{default:c(()=>[o(B($.value),1)]),_:1},8,["disabled"]),s.value?(E(),F("p",G,B(s.value),1)):K("",!0)],32),e[5]||(n(-1,!0),(e[5]=a("p",{class:"text-sm font-medium text-text-secondary text-center mt-6"},[e[8]||(e[8]=o(" By signing in, you agree to the ")),e[9]||(e[9]=a("span",{class:"text-text-primary font-bold"},"Privacy Policy",-1)),e[10]||(e[10]=o(" and ")),e[11]||(e[11]=a("span",{class:"text-text-primary font-bold"},"Terms of Service",-1)),e[12]||(e[12]=o(". "))])).cacheIndex=5,n(1),e[5]),e[6]||(n(-1,!0),(e[6]=a("p",{class:"text-sm font-medium text-text-secondary text-center mt-8"},[e[14]||(e[14]=o(" Donâ€™t have an account? ")),d(m,{to:"/register",class:"text-text-primary font-bold underline"},{default:c(()=>e[13]||(e[13]=[o("Sign up")])),_:1,__:[13]})])).cacheIndex=6,n(1),e[6])])]),_:1})}}});export{ee as default};
