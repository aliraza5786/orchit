import{d as F,U as H,L as J,K as X,r as n,n as Y,bu as Z,ag as ee,c as te,bv as ae,e as k,w as v,W as se,o as d,h as s,t as A,l as V,m as P,k as c,_ as B,i as q,p as w,B as K,z as le,C as ie,N as oe,a8 as M,I as ne}from"./index-DPxgKwPD.js";import{I as re}from"./IconPicker-Cl7Mj2WX.js";import{_ as ue}from"./AudioRecorder.vue_vue_type_script_setup_true_lang-BVXyoj99.js";const de={class:"flex justify-between items-start px-6 border-b border-border pb-4"},ce={class:"text-xl font-semibold"},ve={class:"px-6 py-6 space-y-6"},me={key:0,class:"space-y-4"},pe={class:"flex justify-end gap-2 pt-2"},fe={key:1,class:"space-y-6"},he={class:"relative w-full"},ge={class:"absolute bottom-4 right-4"},xe={class:"px-6 mt-5"},ye=F({__name:"CreateSheetModal",props:{modelValue:{type:Boolean},sheet:{}},emits:["update:modelValue"],setup(Q,{emit:R}){var C,U,I;const l=Q,{canCreateSheet:S,canEditSheet:z}=H(),N=R,r=J(),{workspaceId:g,moduleId:x}=X(),t=n({title:(C=l==null?void 0:l.sheet)==null?void 0:C.title,description:(U=l==null?void 0:l.sheet)==null?void 0:U.description,icon:(I=l==null?void 0:l.sheet)==null?void 0:I.icon}),u=n({});Y(l,()=>{t.value=l.sheet});function $(){const i={};return t.value.title.trim()||(i.title="Please enter a sheet name."),t.value.description.trim()||(i.description="Please enter a description."),u.value=i,Object.keys(i).length===0}const{mutate:j,isPending:D}=Z({onSuccess:()=>{r.invalidateQueries({queryKey:["sheets"]}),r.invalidateQueries({queryKey:["sheet-list"]}),m()}}),{mutate:T,isPending:W}=ee({onSuccess:()=>{r.invalidateQueries({queryKey:["sheets"]}),r.invalidateQueries({queryKey:["sheet-list"]}),m()}});function E(){var i;if($())if((i=l.sheet)!=null&&i._id){if(!z.value)return;T({sheet_id:l.sheet._id,icon:t.value.icon,variables:{"sheet-title":t.value.title,"sheet-description":t.value.description},is_ai_generated:!1,workspace_id:g.value,workspace_module_id:x.value})}else{if(!S.value)return;j({icon:t.value.icon,variables:{"sheet-title":t.value.title,"sheet-description":t.value.description},is_ai_generated:!1,workspace_id:g.value,workspace_module_id:x.value})}}function m(){t.value={title:"",description:"",icon:null},u.value={},y.value=!1,f.value="ai"}const y=te({get:()=>l.modelValue,set:i=>N("update:modelValue",i)}),b=n(!1),_=n(null),o=n(""),p=n(!1),{mutate:O,isPending:L}=ae({onSuccess:()=>{r.invalidateQueries({queryKey:["sheets"]}),r.invalidateQueries({queryKey:["sheet-list"]}),m(),p.value=!1},onError:()=>{p.value=!1}});function G(){o.value.trim()&&S.value&&(p.value=!0,O({module_id:x.value,idea:o.value,workspace_id:g.value}))}const f=n("ai");return(i,e)=>(d(),k(se,{modelValue:y.value,"onUpdate:modelValue":e[9]||(e[9]=h=>y.value=h),size:"lg"},{default:v(()=>{var h;return[s("div",de,[s("h2",ce,A((h=i.sheet)!=null&&h._id?"Update Sheet":"Add a new Sheet"),1)]),s("div",ve,[f.value==="manual"?(d(),V("section",me,[c(re,{modelValue:t.value.icon,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.icon=a)},null,8,["modelValue"]),c(B,{modelValue:t.value.title,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.title=a),label:"Sheet name",size:"lg",placeholder:"Design Ideas",error:!!u.value.title,message:u.value.title},null,8,["modelValue","error","message"]),c(B,{modelValue:t.value.description,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.description=a),label:"Description",size:"lg",textarea:"",placeholder:"A short description",error:!!u.value.description,message:u.value.description},null,8,["modelValue","error","message"]),s("div",pe,[s("button",{class:"px-4 py-2 rounded-md text-sm text-text-secondary border",onClick:m},"Cancel"),c(K,{class:"px-4",onClick:E},{default:v(()=>[q(A(w(D)||w(W)?"Saving...":"Save"),1)]),_:1})])])):f.value==="ai"?(d(),V("section",fe,[s("div",he,[s("div",{class:le(`${w(L)||p.value?"neon-flow-border":""} bg-bg-input flex h-[200px] p-4 rounded-2xl relative`)},[!b.value&&!_.value?ie((d(),V("textarea",{key:0,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value=a),placeholder:"Ask Orchit AI to create a sheet...",class:"w-full h-full resize-none outline-none bg-transparent text-sm"},null,512)),[[oe,o.value]]):P("",!0),o.value?(d(),k(M,{key:2,name:"rotate-fade",appear:""},{default:v(()=>[s("div",{onClick:e[7]||(e[7]=a=>G()),class:"absolute bottom-4 right-4 w-9 h-9 bg-accent rounded-md flex items-center justify-center cursor-pointer shadow"},e[10]||(e[10]=[s("i",{class:"text-white fa-solid fa-arrow-right"},null,-1)]))]),_:1})):(d(),k(M,{key:1,name:"fade-slide",appear:""},{default:v(()=>[s("div",ge,[c(ue,{modelValue:o.value,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value=a),isRecording:b.value,"onUpdate:isRecording":e[5]||(e[5]=a=>b.value=a),hasAudio:_.value,"onUpdate:hasAudio":e[6]||(e[6]=a=>_.value=a)},null,8,["modelValue","isRecording","hasAudio"])])]),_:1}))],2)]),e[12]||(e[12]=s("div",{class:"flex w-full px-6 text-sm text-text-secondary items-center gap-4 mt-6"},[s("hr",{class:"flex-auto text-border"}),s("span",null,"OR"),s("hr",{class:"flex-auto text-border"})],-1)),s("div",xe,[c(K,{variant:"secondary",color:"dark",block:!0,onClick:e[8]||(e[8]=a=>f.value="manual")},{default:v(()=>e[11]||(e[11]=[q(" Create Manually ")])),_:1,__:[11]})])])):P("",!0)])]}),_:1},8,["modelValue"]))}}),Ve=ne(ye,[["__scopeId","data-v-7420d346"]]);export{Ve as default};
