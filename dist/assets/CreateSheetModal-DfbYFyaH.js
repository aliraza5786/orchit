import{d as G,a as H,W as L,r as n,m as F,bq as J,ae as X,c as Y,br as Z,b as k,w as v,e as s,t as A,i as V,j as I,h as d,_ as q,B,f as P,n as w,y as ee,A as te,V as ae,a8 as M,S as se,o as c,H as le}from"./index-D3bBExkE.js";import{I as ie}from"./IconPicker-Cc_zeDa3.js";import{_ as oe}from"./AudioRecorder.vue_vue_type_script_setup_true_lang-BJnlW1Ld.js";const ne={class:"flex justify-between items-start px-6 border-b border-border pb-4"},re={class:"text-xl font-semibold"},ue={class:"px-6 py-6 space-y-6"},de={key:0,class:"space-y-4"},ce={class:"flex justify-end gap-2 pt-2"},ve={key:1,class:"space-y-6"},me={class:"relative w-full"},pe={class:"absolute bottom-4 right-4"},fe={class:"px-6 mt-5"},he=G({__name:"CreateSheetModal",props:{modelValue:{type:Boolean},sheet:{}},emits:["update:modelValue"],setup(Q,{emit:R}){var S,C,U;const l=Q,K=R,r=H(),{workspaceId:g,moduleId:x}=L(),t=n({title:(S=l==null?void 0:l.sheet)==null?void 0:S.title,description:(C=l==null?void 0:l.sheet)==null?void 0:C.description,icon:(U=l==null?void 0:l.sheet)==null?void 0:U.icon}),u=n({});F(l,()=>{t.value=l.sheet});function j(){const i={};return t.value.title.trim()||(i.title="Please enter a sheet name."),t.value.description.trim()||(i.description="Please enter a description."),u.value=i,Object.keys(i).length===0}const{mutate:z,isPending:$}=J({onSuccess:()=>{r.invalidateQueries({queryKey:["sheets"]}),r.invalidateQueries({queryKey:["sheet-list"]}),m()}}),{mutate:D,isPending:N}=X({onSuccess:()=>{r.invalidateQueries({queryKey:["sheets"]}),r.invalidateQueries({queryKey:["sheet-list"]}),m()}});function T(){var i;j()&&((i=l.sheet)!=null&&i._id?D({sheet_id:l.sheet._id,icon:t.value.icon,variables:{"sheet-title":t.value.title,"sheet-description":t.value.description},is_ai_generated:!1,workspace_id:g.value,workspace_module_id:x.value}):z({icon:t.value.icon,variables:{"sheet-title":t.value.title,"sheet-description":t.value.description},is_ai_generated:!1,workspace_id:g.value,workspace_module_id:x.value}))}function m(){t.value={title:"",description:"",icon:null},u.value={},y.value=!1,f.value="ai"}const y=Y({get:()=>l.modelValue,set:i=>K("update:modelValue",i)}),b=n(!1),_=n(null),o=n(""),p=n(!1),{mutate:W,isPending:O}=Z({onSuccess:()=>{r.invalidateQueries({queryKey:["sheets"]}),r.invalidateQueries({queryKey:["sheet-list"]}),m(),p.value=!1},onError:()=>{p.value=!1}});function E(){o.value.trim()&&(p.value=!0,W({module_id:x.value,idea:o.value,workspace_id:g.value}))}const f=n("ai");return(i,e)=>(c(),k(se,{modelValue:y.value,"onUpdate:modelValue":e[9]||(e[9]=h=>y.value=h),size:"lg"},{default:v(()=>{var h;return[s("div",ne,[s("h2",re,A((h=i.sheet)!=null&&h._id?"Update Sheet":"Add a new Sheet"),1)]),s("div",ue,[f.value==="manual"?(c(),V("section",de,[d(ie,{modelValue:t.value.icon,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.icon=a)},null,8,["modelValue"]),d(q,{modelValue:t.value.title,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.title=a),label:"Sheet name",size:"lg",placeholder:"Design Ideas",error:!!u.value.title,message:u.value.title},null,8,["modelValue","error","message"]),d(q,{modelValue:t.value.description,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.description=a),label:"Description",size:"lg",textarea:"",placeholder:"A short description",error:!!u.value.description,message:u.value.description},null,8,["modelValue","error","message"]),s("div",ce,[s("button",{class:"px-4 py-2 rounded-md text-sm text-text-secondary border",onClick:m},"Cancel"),d(B,{class:"px-4",onClick:T},{default:v(()=>[P(A(w($)||w(N)?"Saving...":"Save"),1)]),_:1})])])):f.value==="ai"?(c(),V("section",ve,[s("div",me,[s("div",{class:ee(`${w(O)||p.value?"neon-flow-border":""} bg-bg-input flex h-[200px] p-4 rounded-2xl relative`)},[!b.value&&!_.value?te((c(),V("textarea",{key:0,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value=a),placeholder:"Ask Orchit AI to create a sheet...",class:"w-full h-full resize-none outline-none bg-transparent text-sm"},null,512)),[[ae,o.value]]):I("",!0),o.value?(c(),k(M,{key:2,name:"rotate-fade",appear:""},{default:v(()=>[s("div",{onClick:e[7]||(e[7]=a=>E()),class:"absolute bottom-4 right-4 w-9 h-9 bg-accent rounded-md flex items-center justify-center cursor-pointer shadow"},e[10]||(e[10]=[s("i",{class:"text-white fa-solid fa-arrow-right"},null,-1)]))]),_:1})):(c(),k(M,{key:1,name:"fade-slide",appear:""},{default:v(()=>[s("div",pe,[d(oe,{modelValue:o.value,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value=a),isRecording:b.value,"onUpdate:isRecording":e[5]||(e[5]=a=>b.value=a),hasAudio:_.value,"onUpdate:hasAudio":e[6]||(e[6]=a=>_.value=a)},null,8,["modelValue","isRecording","hasAudio"])])]),_:1}))],2)]),e[12]||(e[12]=s("div",{class:"flex w-full px-6 text-sm text-text-secondary items-center gap-4 mt-6"},[s("hr",{class:"flex-auto text-border"}),s("span",null,"OR"),s("hr",{class:"flex-auto text-border"})],-1)),s("div",fe,[d(B,{variant:"secondary",color:"dark",block:!0,onClick:e[8]||(e[8]=a=>f.value="manual")},{default:v(()=>e[11]||(e[11]=[P(" Create Manually ")])),_:1,__:[11]})])])):I("",!0)])]}),_:1},8,["modelValue"]))}}),be=le(he,[["__scopeId","data-v-d85b01e3"]]);export{be as default};
