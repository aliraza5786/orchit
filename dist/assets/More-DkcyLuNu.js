import{d as R,V as le,c as S,l as i,o as a,h as e,z as C,k as u,t as f,w as v,p as h,g as ae,I as W,U as ne,L as re,K as ie,r as d,e as L,W as de,_ as F,i as P,B as I,C as Q,m as ue,N as q,a8 as K,F as g,y as w}from"./index-RfK5lx-R.js";import{_ as ce}from"./AudioRecorder.vue_vue_type_script_setup_true_lang-XlZ65a54.js";import{I as pe}from"./IconPicker-WtjEkr8F.js";import{d as me,e as ve,f as fe,g as be}from"./useMore-f6YxoK8j.js";import{_ as ge}from"./SearchBar.vue_vue_type_script_setup_true_lang-DXAcrxjo.js";import{F as xe}from"./fuse-Ch1WBRTM.js";const _e={class:"group relative rounded-2xl border border-border bg-bg-body p-4 shadow-sm transition-shadow hover:shadow"},he={class:"flex items-start gap-3"},ye={class:"min-w-0 flex-1"},ke={class:"flex items-center justify-between gap-2"},we={class:"truncate text-sm font-semibold"},Ce={class:"rounded-xl cursor-pointer border border-border bg-bg-surface/30 px-3 py-1 text-xs font-medium text-text-secondary transition hover:bg-bg-surface"},$e={class:"mt-1 line-clamp-2 text-xs text-text-secondary"},Me=R({__name:"AppCard",props:{app:{},actionLabel:{}},setup(U){const{workspaceId:x}=le(),$=U,c=S(()=>$.actionLabel??"Open");return(m,M)=>{var y,l,p;const _=ae("router-link");return a(),i("div",_e,[e("div",he,[e("div",{class:C(["flex h-10 w-10 shrink-0 bg-accent/30 backdrop-blur-lg items-center justify-center rounded-xl text-text-primary",m.app.color])},[e("i",{class:C(["text-base font-semibold",`fa-solid ${(l=(y=m.app)==null?void 0:y.icon)==null?void 0:l.iconName}`])},null,2)],2),e("div",ye,[e("div",ke,[e("h3",we,f(m.app.title),1),u(_,{to:`/workspace/more/detail/${h(x)}/${(p=m.app)==null?void 0:p._id}`},{default:v(()=>[e("button",Ce,f(c.value),1)]),_:1},8,["to"])]),e("p",$e,f(m.app.description),1)])])])}}}),Ve=W(Me,[["__scopeId","data-v-7a15882a"]]),Ae={class:"px-6 py-6 space-y-6"},Pe={key:0,class:"space-y-4"},Ie={class:"flex justify-end gap-2 pt-2"},Ue={key:1,class:"space-y-6"},je={class:"relative w-full"},Ne={class:"absolute bottom-4 right-4"},ze={class:"mt-5"},Te={key:2,class:"space-y-4"},Le={class:"flex flex-wrap gap-2 text-xs"},Se=["onClick"],Be={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},De=["onClick"],Oe=["src"],Re={class:"p-3 py-4"},Ee={class:"text-base font-medium"},Fe={class:"text-sm opacity-75 mt-1 line-clamp-1"},Qe={class:"flex justify-end gap-2 pt-2"},qe=R({__name:"CreateNewModule",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(U,{emit:x}){const $=U,{canCreateModule:c}=ne(),m=x,M=re(),{workspaceId:_,moduleId:y}=ie(),l=d({title:"",description:"",icon:null}),p=d({});function V(){const r={};return l.value.title.trim()||(r.title="Please enter a sheet name."),l.value.description.trim()||(r.description="Please enter a description."),p.value=r,Object.keys(r).length===0}const{mutate:n,isPending:s}=me({onSuccess:()=>{M.invalidateQueries({queryKey:["workspaces"]}),j()}});function E(){V()&&c.value&&n({payload:{module:{icon:l.value.icon,variables:{"module-title":l.value.title,"module-description":l.value.description,"module-icon":l.value.icon},is_ai_generated:!1},workspace_id:_.value}})}function j(){l.value={title:"",description:"",icon:null},p.value={},B.value=!1,z.value="ai"}const B=S({get:()=>$.modelValue,set:r=>m("update:modelValue",r)}),D=d(!1),O=d(null),b=d(""),N=d(!1),{mutate:G,isPending:H}=ve({onSuccess:()=>{b.value="",j(),M.invalidateQueries({queryKey:["workspaces"]}),N.value=!1},onError:()=>{N.value=!1}});function J(){b.value.trim()&&c.value&&(N.value=!0,G({payload:{idea:b.value,workspace_id:_.value}}))}const z=d("ai"),X=d([{id:"concept",title:"Product Concept",subtitle:"Early stage ideation board.",cover:"https://placehold.co/600x300",tags:["Experience Design","Development"]},{id:"launch",title:"Launch Prep",subtitle:"Prepare assets for product launch.",cover:"https://placehold.co/600x300",tags:["Marketing","Project Management"]}]),T=d(""),Y=d([{name:"Experience Design"},{name:"Development"},{name:"Marketing"},{name:"Project Management"}]),k=d(new Set);function Z(r){k.value.has(r)?k.value.delete(r):k.value.add(r)}const ee=S(()=>X.value.filter(r=>(!T.value||r.title.toLowerCase().includes(T.value.toLowerCase()))&&(k.value.size===0||r.tags.some(t=>k.value.has(t))))),A=d(null);function te(r){A.value=r}function se(){A.value&&c.value&&n({icon:null,variables:{"sheet-title":A.value.title,"sheet-description":A.value.subtitle},is_ai_generated:!1,workspace_id:_.value,workspace_module_id:y.value})}return(r,t)=>(a(),L(de,{modelValue:B.value,"onUpdate:modelValue":t[10]||(t[10]=o=>B.value=o),size:"lg"},{default:v(()=>[t[15]||(t[15]=e("div",{class:"flex justify-between items-start px-6 border-b border-border pb-4"},[e("h2",{class:"text-xl font-semibold"}," Add New Module ")],-1)),e("div",Ae,[z.value==="manual"?(a(),i("section",Pe,[u(pe,{modelValue:l.value.icon,"onUpdate:modelValue":t[0]||(t[0]=o=>l.value.icon=o)},null,8,["modelValue"]),u(F,{modelValue:l.value.title,"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.title=o),label:"Module name",size:"lg",placeholder:"Module name",error:!!p.value.title,message:p.value.title},null,8,["modelValue","error","message"]),u(F,{modelValue:l.value.description,"onUpdate:modelValue":t[2]||(t[2]=o=>l.value.description=o),label:"Description",size:"lg",textarea:"",placeholder:"A short description",error:!!p.value.description,message:p.value.description},null,8,["modelValue","error","message"]),e("div",Ie,[e("button",{class:"px-4 py-2 rounded-md text-sm text-text-secondary border",onClick:j},"Cancel"),u(I,{class:"px-4",onClick:E},{default:v(()=>[P(f(h(s)?"Saving...":"Save"),1)]),_:1})])])):z.value==="ai"?(a(),i("section",Ue,[e("div",je,[e("div",{class:C(`${h(H)||N.value?"neon-flow-border":""} bg-bg-input flex h-[200px] p-4 rounded-2xl relative`)},[!D.value&&!O.value?Q((a(),i("textarea",{key:0,"onUpdate:modelValue":t[3]||(t[3]=o=>b.value=o),placeholder:"Ask Orchit AI to create a sheet...",class:"w-full h-full resize-none outline-none bg-transparent text-sm"},null,512)),[[q,b.value]]):ue("",!0),b.value?(a(),L(K,{key:2,name:"rotate-fade",appear:""},{default:v(()=>[e("div",{onClick:t[7]||(t[7]=o=>J()),class:"absolute bottom-4 right-4 w-9 h-9 bg-accent rounded-md flex items-center justify-center cursor-pointer shadow"},t[11]||(t[11]=[e("i",{class:"text-white fa-solid fa-arrow-right"},null,-1)]))]),_:1})):(a(),L(K,{key:1,name:"fade-slide",appear:""},{default:v(()=>[e("div",Ne,[u(ce,{modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=o=>b.value=o),isRecording:D.value,"onUpdate:isRecording":t[5]||(t[5]=o=>D.value=o),hasAudio:O.value,"onUpdate:hasAudio":t[6]||(t[6]=o=>O.value=o)},null,8,["modelValue","isRecording","hasAudio"])])]),_:1}))],2)]),t[13]||(t[13]=e("div",{class:"flex w-full px-6 text-sm text-text-secondary items-center gap-4 mt-6"},[e("hr",{class:"flex-auto text-border"}),e("span",null,"OR"),e("hr",{class:"flex-auto text-border"})],-1)),e("div",ze,[u(I,{variant:"secondary",color:"dark",block:!0,onClick:t[8]||(t[8]=o=>z.value="manual")},{default:v(()=>t[12]||(t[12]=[P(" Create Manually ")])),_:1,__:[12]})])])):(a(),i("section",Te,[Q(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>T.value=o),class:"w-full border rounded-lg p-2 text-sm border-border",placeholder:"Search"},null,512),[[q,T.value]]),e("div",Le,[(a(!0),i(g,null,w(Y.value,o=>(a(),i("button",{key:o.name,class:C(["px-3.5 py-1.5 rounded-md",k.value.has(o.name)?"bg-black text-white":"bg-bg-body text-text-secondary"]),onClick:oe=>Z(o.name)},f(o.name),11,Se))),128))]),e("div",Be,[(a(!0),i(g,null,w(ee.value,o=>(a(),i("button",{key:o.id,class:"border border-border rounded-xl overflow-hidden text-left hover:shadow-sm",onClick:oe=>te(o)},[e("img",{src:o.cover,class:"w-full h-36 object-cover"},null,8,Oe),e("div",Re,[e("div",Ee,f(o.title),1),e("div",Fe,f(o.subtitle),1)])],8,De))),128))]),e("div",Qe,[u(I,{variant:"secondary",onClick:j},{default:v(()=>t[14]||(t[14]=[P("Cancel")])),_:1,__:[14]}),u(I,{disabled:!A.value,onClick:se},{default:v(()=>[P(f(h(s)?"Adding...":"Add board"),1)]),_:1},8,["disabled"])])]))])]),_:1,__:[15]},8,["modelValue"]))}}),Ke=W(qe,[["__scopeId","data-v-3c8f9a57"]]),We={class:"flex-auto flex-grow h-full bg-bg-card rounded-[6px] border border-border overflow-x-auto flex-col flex"},Ge={class:"sticky top-0 w-full z-10 backdrop-blur"},He={class:"mx-auto px-4 py-6"},Je={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},Xe={class:"flex gap-2 items-center"},Ye={class:"mt-5 flex flex-wrap gap-2"},Ze=["onClick"],et={class:"mx-auto w-full px-4 pb-16"},tt={class:"pt-4"},st={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},dt=R({__name:"More",setup(U){const x=d(!1),$=()=>{x.value=!0},c=d(""),{data:m,isPending:M}=fe(),{data:_,isPending:y}=be(c),l=d(""),p=S(()=>{const V=_.value??[];return l.value.trim()?new xe(V,{keys:["title","description"],threshold:.3}).search(l.value).map(s=>s.item):V});return(V,n)=>(a(),i(g,null,[e("div",We,[e("header",Ge,[e("div",He,[e("div",Je,[n[5]||(n[5]=e("h1",{class:"text-2xl font-semibold tracking-tight"},"Apps",-1)),e("div",Xe,[u(ge,{onOnChange:n[0]||(n[0]=s=>{l.value=s}),placeholder:"Search in Orchit AI space"}),u(I,{size:"sm",onClick:n[1]||(n[1]=s=>$())},{default:v(()=>n[4]||(n[4]=[P(" Add New ")])),_:1,__:[4]})])]),e("div",Ye,[h(M)?(a(),i(g,{key:0},w(["3","2","2"],s=>e("button",{key:s,class:"rounded-full border-border w-26 h-8 cursor-pointer border px-4 py-1.5 text-sm transition-all animate-pulse bg-bg-surface"})),64)):(a(),i(g,{key:1},[e("button",{onClick:n[2]||(n[2]=s=>c.value=""),class:C(["rounded-full cursor-pointer border px-4 py-1.5 text-sm transition-all",c.value==""?"border-border bg-accent text-white shadow-sm":"border-border bg-bg-card text-text-secondary hover:bg-accent/50"])}," All ",2),(a(!0),i(g,null,w(h(m),s=>(a(),i("button",{key:s==null?void 0:s._id,onClick:E=>c.value=s==null?void 0:s._id,class:C(["rounded-full cursor-pointer border px-4 py-1.5 text-sm transition-all",c.value===(s==null?void 0:s._id)?"border-border bg-accent text-white shadow-sm":"border-border bg-bg-card text-text-secondary hover:bg-accent/50"])},f(s==null?void 0:s.title),11,Ze))),128))],64))])])]),e("main",et,[e("section",tt,[n[6]||(n[6]=e("div",{class:"mb-4 flex items-center justify-between"},[e("h2",{class:"text-lg font-semibold"},"Current Using")],-1)),e("div",st,[h(y)?(a(),i(g,{key:0},w(["3","2","2"],s=>e("div",{key:s,class:"h-16 w-full p-3 rounded-lg bg-bg-surface animate-pulse"})),64)):(a(!0),i(g,{key:1},w(p.value,s=>(a(),L(Ve,{key:s==null?void 0:s._id,app:s,"action-label":"Open"},null,8,["app"]))),128))])])])]),u(Ke,{size:"md",modelValue:x.value,"onUpdate:modelValue":n[3]||(n[3]=s=>x.value=s)},null,8,["modelValue"])],64))}});export{dt as default};
