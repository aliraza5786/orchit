import{d as ie,r as v,q as fe,m as ve,c as j,i as u,e,F as te,x as ne,y as ge,t as i,S as re,I as st,V as me,o as l,E as Ge,W as ot,p as xe,G as Xe,J as Ye,u as at,b as we,w as M,h as b,n as r,j as ee,B as le,f as L,l as ke,L as ae,X as Ze,Y as lt,N as Oe,a as nt,Z as De,U as N,g as K,$ as Qe,_ as rt,k as it}from"./index-lr5JxJGD.js";import{l as ut,d as dt}from"./dark-logo-Mcb_sJlF.js";import{u as ct}from"./useTheme-MFCD5d2N.js";import{L as pt}from"./Loader-VDGCOtBn.js";import{u as $e}from"./workspace-B-xGB4MJ.js";import{B as Je}from"./BaseModal-WcZlps4M.js";import{_ as We}from"./BaseTextField.vue_vue_type_script_setup_true_lang-B7hMAW4n.js";import{_ as he}from"./InfoRow.vue_vue_type_script_setup_true_lang-Bx53QPh_.js";import{a as mt}from"./useCommon-q3VFQDie.js";import{f as ft,e as vt}from"./FormatDate--XHqACrs.js";import"./favicon-BAFXWHLW.js";import"./cross-DvraoB0R.js";import"./info-DjaLHeD_.js";const gt={class:"w-full relative"},xt=["onClick"],bt={class:"mt-4 overflow-hidden relative"},yt=ie({__name:"Tabs",props:{tabs:{},defaultTab:{}},setup(F){const _=F,f=v((_==null?void 0:_.defaultTab)??0),y=v([]),R=v(null),n=v({width:"0px",transform:"translateX(0px)"});function U(p){f.value=p,I()}function I(){me(()=>{const p=y.value[f.value];if(p&&R.value){const E=p.offsetLeft,m=p.offsetWidth;n.value={width:`${m}px`,transform:`translateX(${E}px)`}}})}fe(()=>{I()}),ve(f,I);const z=j(()=>({1:"grid-cols-1",2:"grid-cols-2",3:"grid-cols-3",4:"grid-cols-4",5:"grid-cols-5"})[_.tabs.length]||"grid-cols-1");return(p,E)=>(l(),u("div",gt,[e("div",{ref_key:"tabList",ref:R,class:"flex sticky top-[-25px] gap-6 border-b border-border bg-bg-body z-10 text-sm font-medium"},[(l(!0),u(te,null,ne(p.tabs,(m,k)=>(l(),u("button",{key:m,onClick:O=>U(k),ref_for:!0,ref_key:"tabRefs",ref:y,class:ge(["py-4 px-6 relative cursor-pointer",f.value===k?"text-text-primary":"text-text-secondary -500"])},i(m),11,xt))),128)),e("div",{class:"absolute bottom-0 h-0.5 bg-black transition-all duration-300 ease-in-out",style:re(n.value)},null,4)],512),e("div",bt,[e("div",{class:ge(`grid ${z.value} transition-all duration-300 ease-in-out`),style:re({width:p.tabs.length*100+"%",transform:`translateX(-${f.value*(100/p.tabs.length)}%)`})},[(l(!0),u(te,null,ne(p.tabs,m=>(l(),u("div",{key:m,class:"px-2"},[st(p.$slots,m)]))),128))],6)])]))}}),He=()=>ot({key:["current-package"],url:"/auth/subscription-stats",method:"GET"}),et=(F={})=>Ge({key:["package-payment"]},{mutationFn:_=>Xe({url:"billing/payment-intent",method:"POST",data:_}),...F}),tt=(F,_={})=>{const f=xe();return console.log(F,f.query.session_id,">>>>"),Ge({key:["package-payment-confirm"]},{mutationFn:y=>Xe({url:"billing/confirm-payment",method:"POST",data:{...F,...y,sessionId:f.query.session_id}}),..._})},_t={class:"px-6"},ht={key:0,class:"py-4"},wt={class:"space-y-6"},kt={class:"flex items-center gap-6"},$t={class:"relative group"},Ct={class:"w-24 h-24 rounded-full bg-orange-500 flex items-center justify-center text-text-primary text-2xl font-bold border-4 border-border overflow-hidden"},Pt=["src"],Lt={key:1},Ut=["disabled"],Mt={class:"flex flex-col items-center justify-center gap-1"},Rt={key:0,class:"inline-block h-6 w-6 rounded-full border-2 border-white border-t-transparent animate-spin","aria-hidden":"true"},At={key:1,class:"fa-solid fa-camera text-xl"},jt={key:2,class:"text-xs"},Ft={class:"flex-1"},St={class:"text-xl font-semibold capitalize text-text-primary"},Tt={class:"text-text-secondary"},Vt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qt={key:0},Bt={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},It={class:"flex justify-end gap-3 pt-4"},zt={key:1,class:"py-8 text-center text-text-secondary"},Et={key:2,class:"py-8 text-center text-red-500"},Nt={key:0,class:"w-full h-full flex justify-center items-center"},Kt={key:1,class:"py-4"},Ot={class:"space-y-6"},Dt={class:"bg-bg-body rounded-xl p-6 border border-border"},Qt={class:"flex items-center justify-between mb-4"},Wt={class:"text-2xl font-bold text-text-primary"},Gt={class:"text-sm text-text-secondary"},Xt={class:"text-right"},Yt={class:"text-2xl font-bold text-text-primary"},Zt={class:"text-xs text-text-secondary"},Jt={class:"text-sm text-text-secondary mb-4"},Ht={class:"space-y-4"},es={class:"flex items-center justify-between mb-2"},ts={class:"flex flex-col"},ss={class:"text-sm font-medium text-text-primary"},os={class:"text-xs font-medium text-text-secondary"},as={class:"text-sm text-text-secondary"},ls={class:"h-2 w-full bg-border/60 rounded-full overflow-hidden"},ns={key:0,class:"bg-bg-body gap-6 items-center flex rounded-xl p-6 border border-border"},rs={class:"border-r border-border pr-6 min-w-80"},is={class:"mb-2 uppercase"},us={key:0,class:"bg-bg-body rounded-xl transition-all hover:shadow-lg"},ds={class:"text-left mb-4"},cs={class:"text-xl font-bold text-text-primary mb-2"},ps={class:"mb-2"},ms={class:"text-3xl font-bold text-text-primary"},fs={class:"text-sm text-text-secondary"},vs={class:"text-sm text-text-secondary"},gs={class:"space-y-2"},xs=ie({__name:"AccountSettingsModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(F,{emit:_}){const f=$e(),y=xe(),R=ke(),{data:n,refetch:U,isPending:I}=He(),z=y.query.session_id,{mutate:p,isPending:E}=tt({sessionId:z,interval:"month"},{onSuccess:()=>{U(),R.push("/")}});fe(async()=>{var s;const o=y.query.session_id;console.log(y.query.session_id,o),o&&p({packageId:await((s=n==null?void 0:n.value.nextPackage)==null?void 0:s.id)})});const{mutate:m,isPending:k}=et({onSuccess:async o=>{window.open(o==null?void 0:o.checkoutUrl)}});function O(o){m({packageId:o==null?void 0:o.id,interval:"month"})}const G=F,oe=_,D=j({get:()=>G.modelValue,set:o=>oe("update:modelValue",o)}),{data:T,isLoading:V,refetch:X}=Ye({queryKey:["profile"],queryFn:Ze,enabled:j(()=>G.modelValue)});ve(()=>n.value,()=>{var o,s;f.setLimit(n.value),y.query.stripePayment&&p({sessionId:(o=n.value)==null?void 0:o.sessionId,packageId:(s=n==null?void 0:n.value.nextPackage)==null?void 0:s.id,interval:"month"})});const x=j(()=>{var o;return((o=T.value)==null?void 0:o.data)||null}),d=v({fullName:"",email:"",jobTitle:"",department:"",location:""}),a=v(null),S=v(""),q=v(!1),Y=v("");ve(x,o=>{o&&(d.value.fullName=o.u_full_name||"",d.value.email=o.u_email||"",d.value.jobTitle=o.u_job_title||"",d.value.department=o.u_department||"",d.value.location=o.u_location||"")},{immediate:!0});const Q=j(()=>d.value.fullName.split(" ").map(o=>o[0]).join("").toUpperCase());function be(){var o;(o=a.value)==null||o.click()}const{mutate:ye}=mt({onSuccess:o=>{var $;const s=($=o==null?void 0:o.data)==null?void 0:$.url;if(!s){ae.error("Upload succeeded but no URL was returned."),q.value=!1;return}Y.value=s,q.value=!1,ae.success("Profile picture uploaded successfully")},onError:o=>{console.error("File upload failed",o),ae.error("File upload failed. Please try again."),q.value=!1,S.value=""}});async function _e(o){var W;const s=o.target;if(!((W=s==null?void 0:s.files)!=null&&W.length))return;const $=s.files[0];S.value=URL.createObjectURL($),q.value=!0;const h=new FormData;h.append("file",$),ye(h)}const{mutate:ue,isPending:B}=at({mutationFn:o=>lt(o),onSuccess:()=>{ae.success("Profile updated successfully"),X(),Y.value="",S.value=""},onError:()=>{ae.error("Failed to update profile.")}});function de(){const o={u_full_name:d.value.fullName,...Y.value&&{u_profile_image:Y.value}};ue(o)}function ce(){x.value&&(d.value.fullName=x.value.u_full_name||"",d.value.jobTitle=x.value.u_job_title||"",d.value.department=x.value.u_department||"",d.value.location=x.value.u_location||""),S.value="",Y.value="",D.value=!1}const pe=v({name:"Pro",price:"$29",billingCycle:"Monthly",nextBillingDate:"January 15, 2026",features:["Unlimited workspaces","100 GB storage","Up to 10 team members","Priority support","Advanced analytics","Custom integrations"]});return v({storage:{used:45,limit:100,remaining:55,percentage:45},users:{used:7,limit:10,remaining:3,percentage:70}}),v([{name:"Free",price:"$0",billingCycle:"month",description:"Perfect for personal use",features:["3 workspaces","5 GB storage","Up to 3 team members","Basic support","Basic analytics"]}]),(o,s)=>(l(),we(Je,{modelValue:D.value,"onUpdate:modelValue":s[3]||(s[3]=$=>D.value=$),size:"lg",modalClass:"!max-w-[900px]"},{default:M(()=>[e("div",_t,[s[13]||(s[13]=e("h2",{class:"text-2xl font-semibold text-text-primary mb-6"},"Account Settings",-1)),b(yt,{tabs:["Profile","Subscription"],defaultTab:r(y).query.stripePayment?1:0},{Profile:M(()=>{var $;return[x.value?(l(),u("div",ht,[e("div",wt,[e("div",kt,[e("div",$t,[e("div",Ct,[S.value||x.value.u_profile_image?(l(),u("img",{key:0,src:S.value||x.value.u_profile_image,class:"w-full h-full object-cover",alt:"Profile"},null,8,Pt)):(l(),u("span",Lt,i(Q.value),1))]),e("button",{type:"button",class:"absolute inset-0 rounded-full bg-black/60 opacity-0 group-hover:opacity-100 transition grid place-items-center text-white text-xs cursor-pointer",disabled:q.value,onClick:be,"aria-label":"Change profile picture"},[e("div",Mt,[q.value?(l(),u("span",Rt)):(l(),u("i",At)),q.value?ee("",!0):(l(),u("span",jt,"Change"))])],8,Ut),e("input",{ref_key:"avatarInputRef",ref:a,type:"file",accept:"image/*",class:"hidden",onChange:_e},null,544)]),e("div",Ft,[e("h3",St,i(d.value.fullName),1),e("p",Tt,i(d.value.email),1)])]),s[6]||(s[6]=e("hr",{class:"border-border"},null,-1)),e("div",Vt,[b(We,{label:"Full Name",placeholder:"Enter your full name",modelValue:d.value.fullName,"onUpdate:modelValue":s[0]||(s[0]=h=>d.value.fullName=h)},null,8,["modelValue"]),b(We,{label:"Email Address",modelValue:d.value.email,"onUpdate:modelValue":s[1]||(s[1]=h=>d.value.email=h),disabled:"",class:"cursor-not-allowed"},null,8,["modelValue"])]),s[7]||(s[7]=e("hr",{class:"border-border"},null,-1)),x.value.companies?(l(),u("div",qt,[s[4]||(s[4]=e("h4",{class:"text-sm font-semibold text-text-secondary mb-3"},"Organization Details",-1)),e("div",Bt,[b(he,{label:"Organization",value:x.value.companies.title},null,8,["value"]),b(he,{label:"Company Size",value:x.value.companies.company_size},null,8,["value"]),b(he,{label:"Job Title",value:($=x.value.companies.role)==null?void 0:$.title},null,8,["value"])])])):ee("",!0),e("div",It,[b(le,{variant:"secondary",onClick:ce},{default:M(()=>s[5]||(s[5]=[L(" Cancel ")])),_:1,__:[5]}),b(le,{variant:"primary",onClick:de,disabled:r(B)},{default:M(()=>[L(i(r(B)?"Saving...":"Save Changes"),1)]),_:1},8,["disabled"])])])])):r(V)?(l(),u("div",zt," Loading profile... ")):(l(),u("div",Et," Failed to load profile data. "))]}),Subscription:M(()=>{var $,h,W,c,t,C,P,w,Z,J,H,A,Ce,Pe,Le,Ue,Me,Re,Ae,je,Fe,Se,Te,Ve,qe,Be,Ie,ze,Ee,Ne;return[r(I)||r(E)?(l(),u("div",Nt,s[8]||(s[8]=[e("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):(l(),u("div",Kt,[e("div",Ot,[e("div",Dt,[s[9]||(s[9]=e("h3",{class:"text-lg font-semibold text-text-primary mb-4"},"Current Plan",-1)),e("div",Qt,[e("div",null,[e("p",Wt,i((h=($=r(n))==null?void 0:$.package)==null?void 0:h.name),1),e("p",Gt,i(pe.value.billingCycle),1)]),e("div",Xt,[e("p",Yt,i(((c=(W=r(n))==null?void 0:W.package)==null?void 0:c.currencySymbol)+((C=(t=r(n))==null?void 0:t.package)==null?void 0:C.amount)),1),e("p",Zt,"per "+i(((P=pe.value)==null?void 0:P.billingCycle)==="Monthly"?"month":"year"),1)])]),e("p",Jt,"Next billing date: "+i(r(ft)((w=r(n))==null?void 0:w.renewsAt)+`, ${r(vt)((Z=r(n))==null?void 0:Z.renewsAt)}`),1),s[10]||(s[10]=e("h3",{class:"text-lg font-semibold text-text-primary mb-4"},"Usage & Limits",-1)),e("div",Ht,[(l(!0),u(te,null,ne((J=r(n))==null?void 0:J.features,(g,se)=>{var Ke;return l(),u("div",{key:se},[e("div",es,[e("div",ts,[e("span",ss,i(g.name),1),e("span",os,i(g.description),1)]),e("span",as,i(g==null?void 0:g.usage.current)+" "+i(g==null?void 0:g.usage.unit)+" / "+i(g.limits.limit)+" "+i((Ke=g==null?void 0:g.limits)==null?void 0:Ke.unit),1)]),e("div",ls,[e("div",{class:"h-full bg-accent rounded-full transition-all",style:re({width:(g==null?void 0:g.usage.percentage)+"%"})},null,4)])])}),128))])]),(H=r(n))!=null&&H.nextPackage?(l(),u("div",ns,[e("div",rs,[e("h1",is,"Upgrade to "+i((Ce=(A=r(n))==null?void 0:A.nextPackage)==null?void 0:Ce.name),1),(Pe=r(n))!=null&&Pe.nextPackage?(l(),u("div",us,[e("div",ds,[e("h3",cs,i(r(n).nextPackage.name),1),e("div",ps,[e("span",ms,i(((Re=(Me=(Ue=(Le=r(n))==null?void 0:Le.nextPackage)==null?void 0:Ue.pricing)==null?void 0:Me.month)==null?void 0:Re.amount)+((Se=(Fe=(je=(Ae=r(n))==null?void 0:Ae.nextPackage)==null?void 0:je.pricing)==null?void 0:Fe.month)==null?void 0:Se.currencySymbol)),1),e("span",fs,"/ "+i((Be=(qe=(Ve=(Te=r(n))==null?void 0:Te.nextPackage)==null?void 0:Ve.pricing)==null?void 0:qe.month)==null?void 0:Be.interval),1)]),e("p",vs,i((ze=(Ie=r(n))==null?void 0:Ie.nextPackage)==null?void 0:ze.description),1)])])):ee("",!0),b(le,{class:"mt-3 block w-full uppercase",onClick:s[2]||(s[2]=g=>{var se;return O((se=r(n))==null?void 0:se.nextPackage)})},{default:M(()=>[L(i(r(k)?"Upgrading...":"UPGRADE"),1)]),_:1})]),e("div",null,[s[12]||(s[12]=e("h3",{class:"text-lg font-semibold text-text-primary mb-3"},"Plan Features",-1)),e("ul",gs,[(l(!0),u(te,null,ne((Ne=(Ee=r(n))==null?void 0:Ee.nextPackage)==null?void 0:Ne.features,(g,se)=>(l(),u("li",{key:se,class:"flex items-center gap-2 text-sm text-text-secondary"},[s[11]||(s[11]=e("i",{class:"fa-solid fa-check text-green-500"},null,-1)),e("span",null,i(g==null?void 0:g.description),1)]))),128))])])])):ee("",!0)])]))]}),_:1},8,["defaultTab"])])]),_:1},8,["modelValue"]))}}),bs={class:"px-6 py-6"},ys={class:"flex items-center gap-4"},_s={class:"min-w-0"},hs={class:"text-text-secondary mt-1"},ws={class:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-6"},ks={class:"flex items-center justify-center"},$s={class:"relative h-28 w-28"},Cs={class:"h-28 w-28 rotate-[-90deg]",viewBox:"0 0 100 100"},Ps=["stroke-dashoffset"],Ls={class:"absolute inset-0 grid place-items-center"},Us={class:"text-center"},Ms={class:"text-xl font-semibold text-text-primary"},Rs={class:"md:col-span-2"},As={class:"flex items-center justify-between text-sm mb-2"},js={class:"text-text-primary font-medium"},Fs={class:"h-3 w-full rounded-full bg-bg-input overflow-hidden"},Ss={class:"mt-4 grid grid-cols-2 gap-2 text-xs text-text-secondary"},Ts={class:"flex items-center gap-2"},Vs={class:"text-text-primary font-medium"},qs={class:"flex items-center gap-2"},Bs={class:"text-text-primary font-medium"},Is={class:"mt-8 flex flex-col-reverse gap-3 sm:flex-row sm:justify-end"},zs=42,Es=ie({__name:"LimitExceededModal",emits:["upgrade"],setup(F,{emit:_}){var X,x;const f=$e(),y=xe(),R=ke(),n=j(()=>{var d,a;return((a=(d=f==null?void 0:f.limits)==null?void 0:d.features[1])==null?void 0:a.usage.current)??0}),U=j(()=>{var d,a;return((a=(d=f==null?void 0:f.limits)==null?void 0:d.features[1])==null?void 0:a.usage.limit)??0}),I=j(()=>Math.max(0,(U.value||0)-(n.value||0))),z=j(()=>{if(!U.value)return 0;const d=n.value/U.value*100;return Math.max(0,Math.min(100,Math.round(d)))}),p=2*Math.PI*zs,E=j(()=>p*(1-z.value/100)),{data:m,refetch:k}=He(),O=y.query.session_id,{mutate:G}=tt({sessionId:O,interval:"month"},{onSuccess:()=>{k(),R.push("/")}});O&&G({packageId:(x=(X=m==null?void 0:m.value)==null?void 0:X.nextPackage)==null?void 0:x.id});const{isPending:oe}=et({onSuccess:d=>{window.open(d==null?void 0:d.checkoutUrl)}});function D(){V("upgrade")}function T(){f.showLimitExccedModal=!1}const V=_;return(d,a)=>(l(),we(Je,{modelValue:r(f).showLimitExccedModal,"onUpdate:modelValue":a[0]||(a[0]=S=>r(f).showLimitExccedModal=S),size:"lg",modalClass:"!max-w-[720px]"},{default:M(()=>[e("div",bs,[e("div",ys,[a[2]||(a[2]=e("div",{class:"relative h-12 w-12 shrink-0"},[e("span",{class:"absolute inset-0 rounded-full bg-amber-500/15"}),e("svg",{viewBox:"0 0 24 24",class:"relative h-12 w-12 text-amber-500"},[e("path",{fill:"currentColor",d:"M10.4 2.5a2 2 0 0 1 3.2 0l8.35 12.54A2 2 0 0 1 20.35 18H3.65a2 2 0 0 1-1.6-2.96L10.4 2.5Zm1.6 4.5a.9.9 0 0 0-.9.9v5.2a.9.9 0 0 0 1.8 0V7.9a.9.9 0 0 0-.9-.9Zm0 9.6a1.2 1.2 0 1 0 0 2.4a1.2 1.2 0 0 0 0-2.4Z"})])],-1)),e("div",_s,[a[1]||(a[1]=e("h2",{class:"text-2xl font-semibold text-text-primary leading-tight"}," You’ve reached your workspace limit ",-1)),e("p",hs," You’ve used "+i(n.value)+" of "+i(U.value)+" workspaces on your current plan. Upgrade to create more workspaces and keep your team moving. ",1)])]),e("div",ws,[e("div",ks,[e("div",$s,[(l(),u("svg",Cs,[a[3]||(a[3]=e("circle",{cx:"50",cy:"50",r:"42",class:"stroke-border","stroke-width":"12",fill:"none"},null,-1)),e("circle",{cx:"50",cy:"50",r:"42","stroke-dasharray":p,"stroke-dashoffset":E.value,class:"stroke-amber-500 transition-[stroke-dashoffset] duration-500 ease-out","stroke-linecap":"round","stroke-width":"12",fill:"none"},null,8,Ps)])),e("div",Ls,[e("div",Us,[e("div",Ms,i(z.value)+"%",1),a[4]||(a[4]=e("div",{class:"text-[11px] text-text-secondary"},"used",-1))])])])]),e("div",Rs,[e("div",As,[a[5]||(a[5]=e("span",{class:"text-text-secondary"},"Usage",-1)),e("span",js,i(n.value)+" / "+i(U.value),1)]),e("div",Fs,[e("div",{class:"h-full bg-amber-500 transition-all duration-500",style:re({width:z.value+"%"})},null,4)]),e("ul",Ss,[e("li",Ts,[a[6]||(a[6]=e("span",{class:"inline-block h-2 w-2 rounded-full bg-amber-500"},null,-1)),a[7]||(a[7]=L(" Used workspaces: ")),e("span",Vs,i(n.value),1)]),e("li",qs,[a[8]||(a[8]=e("span",{class:"inline-block h-2 w-2 rounded-full bg-border"},null,-1)),a[9]||(a[9]=L(" Remaining: ")),e("span",Bs,i(I.value),1)])])])]),a[12]||(a[12]=e("div",{class:"mt-6 grid gap-3 text-sm"},[e("div",{class:"flex items-start gap-3"},[e("span",{class:"mt-0.5 inline-flex h-5 w-5 items-center justify-center rounded-full bg-emerald-500/15 text-emerald-500"},[e("svg",{viewBox:"0 0 24 24",class:"h-3.5 w-3.5"},[e("path",{fill:"currentColor",d:"M9 16.2 4.8 12l1.4-1.4L9 13.4l8.8-8.8L19.2 6z"})])]),e("p",{class:"text-text-secondary"},[e("span",{class:"text-text-primary font-medium"},"Create more workspaces"),L(" for teams and projects without hitting caps.")])]),e("div",{class:"flex items-start gap-3"},[e("span",{class:"mt-0.5 inline-flex h-5 w-5 items-center justify-center rounded-full bg-emerald-500/15 text-emerald-500"},[e("svg",{viewBox:"0 0 24 24",class:"h-3.5 w-3.5"},[e("path",{fill:"currentColor",d:"M9 16.2 4.8 12l1.4-1.4L9 13.4l8.8-8.8L19.2 6z"})])]),e("p",{class:"text-text-secondary"},[e("span",{class:"text-text-primary font-medium"},"Priority support"),L(" and faster responses as you scale.")])]),e("div",{class:"flex items-start gap-3"},[e("span",{class:"mt-0.5 inline-flex h-5 w-5 items-center justify-center rounded-full bg-emerald-500/15 text-emerald-500"},[e("svg",{viewBox:"0 0 24 24",class:"h-3.5 w-3.5"},[e("path",{fill:"currentColor",d:"M9 16.2 4.8 12l1.4-1.4L9 13.4l8.8-8.8L19.2 6z"})])]),e("p",{class:"text-text-secondary"},[e("span",{class:"text-text-primary font-medium"},"Advanced admin controls"),L(" for roles, approvals, and security.")])])],-1)),e("div",Is,[b(le,{variant:"secondary",onClick:T},{default:M(()=>a[10]||(a[10]=[L(" Not now ")])),_:1,__:[10]}),b(le,{loading:r(oe),variant:"primary",class:"sm:ml-2",onClick:D},{default:M(()=>a[11]||(a[11]=[L(" Upgrade plan ")])),_:1,__:[11]},8,["loading"])])])]),_:1},8,["modelValue"]))}}),Ns={class:"sticky top-0 z-10 w-full border-b border-border bg-bg-body/80 backdrop-blur supports-[backdrop-filter]:bg-bg-body/60",role:"navigation","aria-label":"Primary"},Ks={class:"mx-auto flex max-w-[1400px] items-center justify-between px-6"},Os={key:0,src:ut,alt:"Orchit AI logo",class:"w-30",loading:"eager",decoding:"async"},Ds={key:1,src:dt,alt:"Orchit AI logo",class:"w-30",loading:"eager",decoding:"async"},Qs=["onClick","onMouseenter"],Ws={class:"flex items-center gap-4"},Gs=["aria-expanded","aria-controls","onKeydown"],Xs=["src"],Ys=["aria-expanded","aria-controls","onKeydown"],Zs=["onKeydown"],Js={class:"flex items-center gap-3 rounded-xl p-3"},Hs=["src"],eo={key:1,class:"grid h-11 w-11 place-items-center rounded-full bg-orange-500 text-base font-bold text-text-primary"},to={class:"min-w-0"},so={class:"truncate font-semibold leading-5"},oo={class:"truncate text-xs text-text-secondary"},ao={class:"p-1"},lo=["aria-expanded"],no=ie({__name:"Navbar",setup(F){const _=$e(),{theme:f,setTheme:y}=ct(),R=v(!1);function n(){R.value=!0,_.setLimitExccedModal(!1)}const U=ke(),{data:I,isPending:z}=Ye({queryKey:["profile"],queryFn:Ze,staleTime:1e3*60*5}),p=j(()=>{var c;return((c=I.value)==null?void 0:c.data)??null}),E=j(()=>{var C,P;const c=((P=(C=p.value)==null?void 0:C.u_full_name)==null?void 0:P.trim())||"";return c?c.split(/\s+/).slice(0,3).map(w=>w[0]).join("").toUpperCase():"U"}),m=v(!1),k=v(!1),O=v(null),G=v(null),oe=v(null),D=v(!1);function T(){m.value=!m.value,m.value||(k.value=!1)}function V(){m.value=!1,k.value=!1}function X(){const c=G.value;if(!c)return;const t=c.getBoundingClientRect(),C=200,P=window.innerWidth-t.right;D.value=P<C}function x(){k.value||(k.value=!0,me(()=>X()))}function d(){k.value=!1}let a=null;function S(){!m.value||!k.value||(a&&cancelAnimationFrame(a),a=requestAnimationFrame(()=>{X(),a=null}))}function q(c){const t=O.value;t&&(t.contains(c.target)||V())}const Y=xe();fe(()=>{Y.query.stripePayment&&(R.value=!0),document.addEventListener("click",q),window.addEventListener("resize",S)}),Oe(()=>{document.removeEventListener("click",q),window.removeEventListener("resize",S),a&&cancelAnimationFrame(a)});const Q=nt();async function be(){try{V(),_.setWorkspace(null),localStorage.clear(),await Q.cancelQueries({queryKey:["me"]}),await Q.cancelQueries({queryKey:["profile"]}),await Q.cancelQueries({queryKey:["workspaces"]}),Q.removeQueries({queryKey:["profile"]}),Q.removeQueries({queryKey:["workspaces"]}),Q.removeQueries({queryKey:["me"]}),U.push("/login")}catch(c){console.error("Logout failed",c)}}function ye(){V(),R.value=!0}const _e=[{label:"Workspaces",to:"/",exact:!0},{label:"My Task",to:"/dashboard/task"},{label:"Users",to:"/dashboard/users"}],ue=v(null),B=new Map,de=v(0),ce=v(0);function pe(c,t){if(!t)return B.delete(c);B.set(c,t)}function o(c){const t=ue.value;if(!t||!c)return;const C=t.getBoundingClientRect(),P=c.getBoundingClientRect();de.value=P.left-C.left,ce.value=P.width}function s(){const c=U.currentRoute.value.path;let t;if(B.has(c))t=B.get(c);else{for(const[C,P]of B.entries())if(c.startsWith(C)&&C!=="/"){t=P;break}t||(t=B.get("/"))}o(t||null)}function $(c){const t=B.get(c)||null;o(t)}ve(()=>U.currentRoute.value.path,async()=>{await me(),s()});let h=null;function W(){h&&cancelAnimationFrame(h),h=requestAnimationFrame(()=>{s(),h=null})}return fe(()=>{window.addEventListener("resize",W),me(s)}),Oe(()=>{window.removeEventListener("resize",W),h&&cancelAnimationFrame(h)}),(c,t)=>{var C,P;return l(),u(te,null,[r(z)?(l(),we(pt,{key:0})):ee("",!0),e("nav",Ns,[e("div",Ks,[b(r(De),{to:"/",class:"flex items-center gap-2"},{default:M(()=>[r(f)==="light"?(l(),u("img",Os)):(l(),u("img",Ds))]),_:1}),e("ul",{class:"relative hidden items-stretch py-4 gap-9 text-sm font-medium text-text-primary md:flex",ref_key:"linksContainerRef",ref:ue},[e("div",{class:"pointer-events-none absolute bottom-0 h-[2px] rounded-full bg-text-primary transition-all duration-300 ease-out",style:re({left:de.value+"px",width:ce.value+"px"})},null,4),(l(),u(te,null,ne(_e,w=>b(r(De),{key:w.to,to:w.to,custom:""},{default:M(({navigate:Z,isActive:J,isExactActive:H})=>[e("li",{ref_for:!0,ref:A=>pe(w.to,A),onClick:Z,class:ge(["relative cursor-pointer py-3 transition-colors",[J||w.exact&&H?"text-text-primary":"text-text-secondary hover:text-text-primary"]]),onMouseenter:()=>$(w.to),onMouseleave:t[0]||(t[0]=A=>s())},i(w.label),43,Qs)]),_:2},1032,["to"])),64))],512),e("div",Ws,[t[16]||(t[16]=e("button",{class:"grid h-9 w-9 place-items-center rounded-xl border border-transparent text-text-secondary transition-[transform,background,box-shadow] hover:scale-105 hover:bg-bg-dropdown-menu-hover hover:text-text-primary focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-300","aria-label":"Notifications",type:"button"},[e("i",{class:"fa-regular fa-bell"})],-1)),t[17]||(t[17]=e("button",{class:"grid h-9 w-9 place-items-center rounded-xl border border-transparent text-text-secondary transition-[transform,background,box-shadow] hover:scale-105 hover:bg-bg-dropdown-menu-hover hover:text-text-primary focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-300","aria-label":"Help",type:"button"},[e("i",{class:"fa-regular fa-circle-question"})],-1)),e("div",{class:"relative",ref_key:"menuRef",ref:O},[(C=p.value)!=null&&C.u_profile_image?(l(),u("button",{key:0,"aria-haspopup":"menu","aria-expanded":m.value?"true":"false","aria-controls":m.value?"user-menu":void 0,onClick:T,onKeydown:[N(K(T,["prevent"]),["enter"]),N(K(T,["prevent"]),["space"]),N(K(V,["prevent"]),["esc"])]},[e("img",{class:"object-cover cursor-pointer w-10 h-10 rounded-full",src:(P=p.value)==null?void 0:P.u_profile_image,alt:"profile_img"},null,8,Xs)],40,Gs)):(l(),u("button",{key:1,class:"h-9 w-9 overflow-hidden rounded-full bg-orange-500 text-sm font-bold text-text-primary ring-offset-2 transition hover:brightness-95 focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-300","aria-haspopup":"menu","aria-expanded":m.value?"true":"false","aria-controls":m.value?"user-menu":void 0,onClick:T,onKeydown:[N(K(T,["prevent"]),["enter"]),N(K(T,["prevent"]),["space"]),N(K(V,["prevent"]),["esc"])],type:"button"},i(E.value),41,Ys)),b(Qe,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"opacity-0 -translate-y-1 scale-95","enter-to-class":"opacity-100 translate-y-0 scale-100","leave-active-class":"transition duration-120 ease-in","leave-from-class":"opacity-100 translate-y-0 scale-100","leave-to-class":"opacity-0 -translate-y-1 scale-95"},{default:M(()=>{var w,Z,J,H;return[m.value?(l(),u("div",{key:0,id:"user-menu",class:"absolute right-0 mt-2 w-80 origin-top-right rounded-2xl bg-bg-dropdown p-1.5 text-sm shadow-xl ring-1 ring-black/5",role:"menu",onKeydown:N(K(V,["stop","prevent"]),["esc"])},[e("div",Js,[(w=p.value)!=null&&w.u_profile_image?(l(),u("img",{key:0,class:"w-10 h-10 object-cover rounded-full",src:(Z=p.value)==null?void 0:Z.u_profile_image,alt:"profile_img"},null,8,Hs)):(l(),u("div",eo,i(E.value),1)),e("div",to,[e("p",so,i(((J=p.value)==null?void 0:J.u_full_name)||"—"),1),e("p",oo,i(((H=p.value)==null?void 0:H.u_email)||"—"),1)])]),t[15]||(t[15]=e("div",{class:"h-px w-full bg-bg-dropdown-menu-hover/50"},null,-1)),e("ul",ao,[e("li",null,[e("button",{class:"cursor-pointer flex w-full items-center gap-3 rounded-lg px-3 py-2 hover:bg-bg-dropdown-menu-hover",role:"menuitem",type:"button",onClick:ye},t[9]||(t[9]=[e("i",{class:"fa-regular fa-gear"},null,-1),e("span",null,"Account settings",-1)]))]),e("li",{class:"relative",onMouseenter:t[6]||(t[6]=A=>x()),onMouseleave:t[7]||(t[7]=A=>d())},[e("button",{ref_key:"themeTriggerRef",ref:G,class:"flex w-full items-center justify-between rounded-lg px-3 py-2 hover:bg-bg-dropdown-menu-hover",role:"menuitem","aria-haspopup":"menu","aria-expanded":k.value?"true":"false",onKeydown:[t[1]||(t[1]=N(K(A=>x(),["prevent"]),["right"])),t[2]||(t[2]=N(K(A=>d(),["prevent"]),["left"]))],type:"button"},t[10]||(t[10]=[e("span",{class:"flex items-center gap-3"},[e("i",{class:"fa-regular fa-circle"}),L(" Theme ")],-1),e("i",{class:"fa-solid fa-chevron-right"},null,-1)]),40,lo),b(Qe,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"opacity-0 translate-x-1 scale-95","enter-to-class":"opacity-100 translate-x-0 scale-100","leave-active-class":"transition duration-120 ease-in","leave-from-class":"opacity-100 translate-x-0 scale-100","leave-to-class":"opacity-0 translate-x-1 scale-95"},{default:M(()=>[k.value?(l(),u("div",{key:0,ref_key:"themeMenuRef",ref:oe,class:ge(["absolute top-0 z-10 w-48 origin-top-left rounded-xl bg-bg-dropdown p-1 shadow-lg ring-1 ring-black/5",D.value?"right-full mr-2":"left-full ml-2"]),role:"menu"},[e("button",{class:"block w-full rounded-lg px-3 py-2 text-left hover:bg-bg-dropdown-menu-hover",onClick:t[3]||(t[3]=A=>r(y)("system")),type:"button"},t[11]||(t[11]=[e("i",{class:"fa-solid fa-desktop"},null,-1),L(" System ")])),e("button",{class:"block w-full rounded-lg px-3 py-2 text-left hover:bg-bg-dropdown-menu-hover",onClick:t[4]||(t[4]=A=>r(y)("light")),type:"button"},t[12]||(t[12]=[e("i",{class:"fa-regular fa-sun-cloud"},null,-1),L(" Light ")])),e("button",{class:"block w-full rounded-lg px-3 py-2 text-left hover:bg-bg-dropdown-menu-hover",onClick:t[5]||(t[5]=A=>r(y)("dark")),type:"button"},t[13]||(t[13]=[e("i",{class:"fa-regular fa-clouds-moon"},null,-1),L(" Dark ")]))],2)):ee("",!0)]),_:1})],32),e("li",null,[e("button",{class:"flex w-full items-center gap-3 rounded-lg px-3 py-2 hover:bg-bg-dropdown-menu-hover",role:"menuitem",type:"button",onClick:be},t[14]||(t[14]=[e("i",{class:"fa-solid fa-arrow-right-from-bracket rotate-180"},null,-1),e("span",null,"Log out",-1)]))])])],40,Zs)):ee("",!0)]}),_:1})],512)])])]),b(xs,{modelValue:R.value,"onUpdate:modelValue":t[8]||(t[8]=w=>R.value=w)},null,8,["modelValue"]),b(Es,{onUpgrade:n})],64)}}}),ro=rt(no,[["__scopeId","data-v-dbc85ad2"]]),wo=ie({__name:"LandingPageLayout",setup(F){return(_,f)=>{const y=it("router-view");return l(),u(te,null,[b(ro),b(y)],64)}}});export{wo as default};
