const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-CApcIRmq.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-BdjQVeUR.js","assets/index-D1HTj25s.js","assets/index-C3hlGBVH.css","assets/CreateSheetModal-s03Wj9qf.js","assets/IconPicker-BXeXXlll.js","assets/IconPicker-CIMr_3tu.css","assets/AudioRecorder.vue_vue_type_script_setup_true_lang-CFdILr54.js","assets/CreateSheetModal--7RYCgy-.css","assets/CreateVariableModal-C_OXa91s.js","assets/ConfirmDeleteModal-nQ068KBD.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-BrcenpPn.js","assets/SidePanel-CieKtPYK.js","assets/SidePanel-U7OOMI6M.css","assets/KanbanBoard-BEoRHiK2.js","assets/vuedraggable.umd-jgHA8wXs.js","assets/_commonjsHelpers-_d1bhYXs.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-C-JhxsID.js","assets/KanbanBoard-Dffh696C.css"])))=>i.map(i=>d[i]);
import{d as ta,V as aa,r,M as la,N as oa,n as $,$ as sa,c as A,a1 as na,a5 as ia,u as ra,aq as da,a6 as ua,a7 as ca,a8 as pa,a0 as va,aa as fa,a2 as ba,a9 as ma,ab as ga,ac as _a,j as b,f as s,i as x,e as ae,k as g,w as R,p as d,z as le,F as oe,D as qe,E as Xe,h as se,ae as Ze,_ as et,B as tt,ad as ye,t as ne,y as at,P as ya,q as xa,af as ka,o as p,g as xe,ag as W,A as j,T as ha,U as lt,bn as wa,ah as _,Y as Ca,ai as Sa,Q as Da,aj as ot,ak as Va,J as Aa}from"./index-D1HTj25s.js";import{D as st,K as Ta}from"./Dropdown-BpjPyuYP.js";import{_ as Ea}from"./SearchBar.vue_vue_type_script_setup_true_lang-BwXpyEQ6.js";import{K as La}from"./KanbanTicket-fqu9qiA-.js";import{F as nt}from"./fuse-Ch1WBRTM.js";import{l as Fa}from"./lodash-CQYOKM_D.js";import{_ as Ia,a as it,b as Na,k as Ma}from"./TableAssigneeCell.vue_vue_type_script_setup_true_lang-CVWA6QGy.js";import"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-BrcenpPn.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-C-JhxsID.js";import"./_commonjsHelpers-_d1bhYXs.js";const qa={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-[6px] shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex-col flex scrollbar-visible"},za={class:"overflow-x-auto shrink-0 sticky top-0 z-20 bg-bg-card"},Pa={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1 min-w-max h-full"},Ua={class:"flex gap-3 items-center"},Ba={class:"flex items-center gap-3 bg-bg-surface/50 h-[32px] px-2 rounded-md"},Oa={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible h-full"},$a={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},Ra={key:0,class:"bg-bg-body rounded-lg p-4"},Wa={class:"flex items-center mt-3 gap-3"},ja=["disabled"],Ka={class:"relative w-full h-full flex overflow-hidden"},Qa={key:0,class:"format-sidebar h-full py-4 px-4 w-[320px] border-l bg-bg-card overflow-hidden flex flex-col"},Ha={class:"format-content space-y-6"},Ya={class:"format-group relative mb-3"},Ga={class:"text-xs text-secondary"},Ja={key:0,class:"absolute z-50 mt-2 p-3 bg-bg-card rounded-lg shadow-lg border w-[240px]"},Xa={class:"grid grid-cols-10 gap-1 mb-3"},Za=["onClick"],el={class:"flex items-center gap-2"},tl=["value"],al=["value"],ll={class:"format-group relative mb-3"},ol={class:"text-xs text-secondary"},sl={key:0,class:"absolute z-50 mt-2 p-3 bg-bg-card rounded-lg shadow-lg border w-[240px]"},nl={class:"grid grid-cols-10 gap-1 mb-3"},il=["onClick"],rl={class:"flex items-center gap-2"},dl=["value"],ul=["value"],cl={class:"grid grid-cols-1 gap-3"},pl=["value"],vl={class:"mt-6 pt-4"},fl=["disabled"],bl={key:0,class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},ml={key:0,class:"fixed inset-0 bg-black/30 flex items-center justify-center"},gl={class:"bg-white p-6 rounded-xl w-80"},_l={class:"flex justify-end gap-2 mt-4"},yl=["disabled"],xl={class:"flex items-center mt-3 gap-3"},kl=ta({__name:"Product",setup(hl){const{canEditSheet:rt,canDeleteSheet:dt,canCreateVariable:ie,canCreateSheet:ut,canCreateCard:ct,canEditCard:re,canAssignCard:pt}=aa(),K=r(!1),de=r(null),ue=r(!1),ke=r(null),he=r(!1),k=r("kanban"),we=r(null),ce=r(null),Q=r(!1),ze=xa(),{workspaceId:h,moduleId:T}=la(),q=oa(),pe=r(!1),H=r(),F=r(null),ve=r(!0),fe=r(!1),I=r(""),Ce=r(null);function vt(t){I.value="",fe.value=!0,Ce.value=t}function ft(){Ce.value&&Ce.value(I.value),fe.value=!1}function bt(){fe.value=!1}const mt=r(null),gt=t=>{mt.value=t},z=r(!1),Pe=["#FFFFFF","#F2F2F2","#D9D9D9","#BFBFBF","#A6A6A6","#808080","#404040","#000000","#FFE066","#FF9AA2","#8EE4AF","#00EAD3","#90DBF4","#4D96FF","#6C63FF","#C77DFF","#F7A1C4","#FFC300","#FF5733","#2ECC71","#00B894","#17A2B8","#0984E3","#3F51B5","#9C27B0","#E84393","#FF8C00","#E74C3C","#1E8449","#006D6F","#004C6D","#0057A8","#1A237E","#4A148C","#7D3C98"],P=r(!1);$(z,t=>{t&&(P.value=!1)}),$(P,t=>{t&&(z.value=!1)});const _t=async()=>{if(ke.value)try{he.value=!0,await ha({url:`workspace/card/${ke.value}`,method:"DELETE"}),xt(ke.value),await me(),ue.value=!1,de.value=null,lt.success("Ticket deleted successfully")}catch(t){lt.error(wa(t))}finally{he.value=!1}},yt=async()=>{await _t()},xt=t=>{var e,a;(a=(e=v.value)==null?void 0:e.sheets)==null||a.forEach(l=>{var o;(o=l.sheet_lists)==null||o.forEach(c=>{c.cards=c.cards.filter(i=>i._id!==t)})})},kt=W(()=>j(()=>import("./CreateTaskModal-CApcIRmq.js"),__vite__mapDeps([0,1,2,3]))),ht=W(()=>j(()=>import("./CreateSheetModal-s03Wj9qf.js"),__vite__mapDeps([4,2,3,5,6,7,8]))),wt=W(()=>j(()=>import("./CreateVariableModal-C_OXa91s.js"),__vite__mapDeps([9,2,3]))),Se=W(()=>j(()=>import("./ConfirmDeleteModal-nQ068KBD.js"),__vite__mapDeps([10,11,2,3]))),Ct=W(()=>j(()=>import("./SidePanel-CieKtPYK.js"),__vite__mapDeps([12,2,3,13]))),St=W(()=>j(()=>import("./KanbanBoard-BEoRHiK2.js"),__vite__mapDeps([14,15,16,2,3,17,11,18]))),{data:be,refetch:me,isPending:Ue}=sa({workspace_id:h,workspace_module_id:T}),De=A(()=>{var t;return be.value?(t=be.value[0])==null?void 0:t._id:""}),y=r(De.value),{data:L,isPending:Dt}=na(h.value,T.value,y),{mutate:Ve,isPending:Ae}=ia({onSuccess:()=>{q.invalidateQueries({queryKey:["sheet-list"]}),U.value="",B.value=!1,J.value=!1,B.value=!1}}),Be=t=>{Ve({workspace_id:h.value,module_id:T.value,variable_id:w.value,value:t})};$(De,()=>{y.value=De.value});const Te=A(()=>{var t;return L!=null&&L.value?(t=L==null?void 0:L.value[0])==null?void 0:t._id:""}),w=r(Te.value);$(Te,()=>{w.value=Te.value});const ge=ra(),{data:v,isPending:Ee,refetch:Oe}=da(T,y,A(()=>[...ge.selectedLaneIds]),w),Y=t=>{t._id||(t._id=t.id),H.value=t};window.selectCardHandler=Y;const G=r(!1),Vt=()=>{M.value={},G.value=!G.value},At=ua(),Tt=ca();function Et(t){t.type==="column"?At.mutate({payload:{workspace_id:h.value,workspace_module_id:T.value,variable_id:w.value,moved_value:t.meta.id,new_index:t.meta.newIndex}},{onSuccess:()=>{me()}}):Tt.mutate({payload:{workspace_id:h.value,card_id:t.meta.moved._id,group_value:t.meta.fromColumnId,group_variable_id:w.value,new_index:t.meta.newIndex,sheet_id:y.value}},{onSuccess:()=>{me()}})}const Lt=t=>{},Ft=A(()=>(be.value||[]).map(t=>({_id:t._id,title:t==null?void 0:t.variables["sheet-title"],description:t==null?void 0:t.variables["sheet-description"],icon:t.icon,status:t==null?void 0:t.generation_status})));$(be,t=>{var e;(t==null?void 0:t.length)>0&&(y.value=(e=t[0])==null?void 0:e._id)});const J=r(!1),U=r("");function Le(){J.value=!J.value}function _e(){const t=U.value.trim();t&&Be(t)}const It=t=>{Ve({workspace_id:ze.params.id,module_id:ze.params.module_id,new_value:t.title,value:t.oldTitle,variable_id:w.value})},B=r(!1),N=r(),Nt=()=>{Ve({value:N.value.title,workspace_id:h.value,module_id:T.value,newValue:N.value.title,variable_id:w.value,is_trash:!0})},Mt=t=>{B.value=!0,N.value=t},qt=t=>{pe.value=!0,N.value=t},M=r();function zt(t){K.value=!0,M.value=t}const{mutate:$e,isPending:Pt}=pa({onSuccess:()=>{me(),K.value=!1}});function Ut(){var t;$e({sheet_id:(t=M.value)==null?void 0:t._id,workspace_module_id:T.value,is_trash:!0})}function Bt(t){G.value=!0,M.value=t}const X=r(""),Ot=r("");$(X,Fa.debounce(t=>{Ot.value=t},200));const $t=A(()=>{const t=v.value.flatMap(e=>e.cards.map(a=>({...a,columnId:e.title})));return new nt(t,{keys:["card-title","card-description"],threshold:.3})}),Re=A(()=>{var t;if(k.value==="kanban"){if(!X.value)return v.value;const e=$t.value.search(X.value).map(a=>a.item);return v.value.map(a=>({...a,cards:e.filter(l=>l.columnId===a.title)}))}else{const e=(t=X.value)==null?void 0:t.trim();if(!e){let l=[];return(v.value??[]).forEach(o=>{l=[...l,...o==null?void 0:o.cards]}),l}return new nt(jt.value,{keys:["card-title","card-description"],threshold:.3}).search(e).map(l=>l.item)}}),{data:Fe}=va(h),We=A(()=>((Fe==null?void 0:Fe.value)??[]).map(t=>{var e;return{_id:t._id,title:((e=t==null?void 0:t.variables)==null?void 0:e["lane-title"])??String(t._id)}})),Rt=A(()=>{var t;return[{key:"card-title",label:"Title",render:({row:e,value:a})=>_("div",{class:"flex items-center gap-1 w-full"},[_("a",{onClick:()=>H.value=e,class:"text-[12px] underline text-blue-500 shrink-0 overflow-ellipsis cursor-pointer"},e["card-code"]),_("div",{class:"flex-1 min-w-0"},[_("input",{onFocusout:l=>{var o;je(e==null?void 0:e._id,"card-title",(o=l==null?void 0:l.target)==null?void 0:o.value)},class:"text-[12px] w-full overflow-ellipsis capitalize p-1 w-full p-1 focus:border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-transparent focus:bg-bg-body text-[12px] h-8",defaultValue:a,disabled:!re.value})])])},{key:"end-date",label:"Due Date",render:({row:e,value:a})=>{const l=r(a);return _(Ca,{class:" capitalize flex items-center gap-2 text-[12px]",placeholder:"Set start date",tableInputClass:!0,modelValue:l.value,disabled:!re.value,"onUpdate:modelValue":o=>Ht(e==null?void 0:e._id,o),emptyText:"Date"})}},{key:"lane",label:"Lane",render:({row:e})=>{var a;return _(it,{options:We.value??[],placeholder:"Select lane",modelValue:((a=e.lane)==null?void 0:a._id)||null,disabled:!re.value,"onUpdate:modelValue":l=>Yt(e==null?void 0:e._id,l),displayField:"title",emptyText:"Lane"})}},{key:"created_by",label:"Owner",render:({value:e})=>_("div",{class:"capitalize flex items-center gap-2  px-3"},[_("div",{class:" rounded-full  "},[e!=null&&e.u_profile_image?_("img",{class:"w-6 h-6 rounded-full",src:e==null?void 0:e.u_profile_image}):_("div",{class:"w-5 h-5 rounded-full flex justify-center items-center text-[11px] ",style:`background:${e!=null&&e.u_full_name?Sa({name:e.u_full_name,email:e.u_email}):""}`},Da(e==null?void 0:e.u_full_name))]),_("span",{class:"text-[12px]"},e?e==null?void 0:e.u_full_name:"")])},{key:"seat",label:"Assignee",render:({row:e,value:a})=>_(Na,{class:"capitalize flex items-center gap-2 ",onAssign:l=>Wt(e==null?void 0:e._id,l),assigneeId:a,seat:a,name:!0,disabled:!pt.value,emptyText:"Assignee"})},...((t=L.value)==null?void 0:t.filter(e=>{var a;return((a=e==null?void 0:e.type)==null?void 0:a.title)==="Select"}).map(e=>({key:e==null?void 0:e.slug,label:e==null?void 0:e.slug,render:({row:a,value:l})=>{var c;let o=l;if(Array.isArray(a==null?void 0:a.variables)){const i=a.variables.find(u=>u.slug===e.slug);i&&(o=i.value)}else o=((c=a==null?void 0:a.variables)==null?void 0:c[e.slug])??(a==null?void 0:a[e.slug])??l;return _("div",{class:"capitalize flex items-center gap-2"},[_(it,{options:Kt(e.data??[]),modelValue:o,disabled:!re.value,emptyText:e.slug,"onUpdate:modelValue":i=>{je(a==null?void 0:a._id,e.slug,i)},columnName:e.slug})])},visible:e==null?void 0:e.is_visible})))??[]]}),Wt=(t,e)=>{Ie(t,a=>{a.seat=e}),Z.mutate({card_id:t,seat_id:e==null?void 0:e._id})},jt=A(()=>{let t=[];return(v.value??[]).forEach(e=>{t=[...t,...e==null?void 0:e.cards]}),t}),Kt=t=>t.map(e=>({_id:e.value??e,title:e.value??e})),Z=fa({onSuccess:()=>{q.invalidateQueries({queryKey:["get-sheets"]}),q.invalidateQueries({queryKey:["sheet-list"]}),q.invalidateQueries({queryKey:["roles"]})}}),Ie=(t,e)=>{if(!v.value)return;const a=v.value.findIndex(l=>l.cards.some(o=>o._id===t));if(a!==-1){const l=v.value[a].cards.findIndex(o=>o._id===t);if(l!==-1){const o={...v.value[a].cards[l]};e(o),v.value[a].cards[l]=o,ot(v)}}},{mutate:Ne}=ba({onSuccess:()=>{}});function je(t,e,a){Ie(t,l=>{if(e==="card-title"&&(l[e]=a),Array.isArray(l.variables)){const o=l.variables.find(c=>c.slug===e);o?o.value=a:l.variables.push({slug:e,value:a,type:"Select"})}else l.variables&&typeof l.variables=="object"?l.variables[e]=a:l[e]=a}),Z.mutate({card_id:t,variables:{[e]:a.trim()}})}function Qt(t){if(t["card-title"]){const e={sheet_list_id:"To Do",workspace_id:h.value,sheet_id:y.value,variables:{"card-title":t["card-title"].trim()},createdAt:new Date().toISOString()};Ne(e)}}const Ht=(t,e)=>{const a=v.value.findIndex(l=>l.cards.some(o=>o._id===t));if(a!==-1){const l=v.value[a].cards.findIndex(o=>o._id===t);l!==-1&&(v.value[a].cards[l]["end-date"]=e)}Z.mutate({card_id:t,variables:{"start-date":e}})};function Yt(t,e){Ie(t,a=>{const l=We.value.find(o=>o._id===e);l&&(a.lane=l)}),ot(v),Z.mutate({card_id:t,workspace_lane_id:e})}const{mutate:Gt}=ma(),Jt=(t,e)=>{Gt({payload:{sheet_id:y.value,workspace_id:h.value,variable_slug:t,is_visible:e}})},E=A(()=>{var t,e;return(e=(t=F.value)==null?void 0:t.nodeObj)!=null&&e.style?F.value.nodeObj.style:Me(C)});function D(t,e,a){return t!==void 0?t:e!==void 0?e:a}function ee(t,e){var i;if(!((i=F.value)!=null&&i.nodeObj))return;const a=F.value.nodeObj;a.style||(a.style={});const l=e.target,o=l.type==="number"?Number(l.value):l.value;switch(t){case"bg_color":a.style.background=o;break;case"color":a.style.color=o;break;case"font_size":a.style.fontSize=`${o}px`;break;case"font_weight":a.style.fontWeight=o;break;case"font_style":a.style.fontStyle=o;break;case"font_family":a.style.fontFamily=o;break;case"border_color":a.style.borderColor=o;break;case"border_width":a.style.borderWidth=`${o}px`;break;case"border_radius":a.style.borderRadius=`${o}px`;break;case"padding":a.style.padding=`${o}px`;break}const c=document.getElementById(a.id);c&&Qe(a,c)}const C={bg_color:"#ffffff",color:"#000000",font_size:14,font_weight:"normal",font_style:"normal",font_family:"Inter",border_color:"#cccccc",border_width:0,border_radius:0,padding:0},O=r(!1);async function Ke(){var e;const t=(e=F.value)==null?void 0:e.nodeObj;if(!(!t||O.value)){O.value=!0;try{const a=ka(t);a._originalStyle||(a._originalStyle={});const l=a.style||{},o=a._originalStyle,c={bg_color:D(l.background,o.bg_color,C.bg_color),color:D(l.color,o.color,C.color),font_size:D(l.fontSize?parseInt(l.fontSize):void 0,o.font_size,C.font_size),font_weight:D(l.fontWeight,o.font_weight,C.font_weight),font_style:D(l.fontStyle,o.font_style,C.font_style),font_family:D(l.fontFamily,o.font_family,C.font_family),border_color:D(l.borderColor,o.border_color,C.border_color),border_width:D(l.borderWidth?parseInt(l.borderWidth):void 0,o.border_width,C.border_width),border_radius:D(l.borderRadius?parseInt(l.borderRadius):void 0,o.border_radius,C.border_radius),padding:D(l.padding?parseInt(l.padding):void 0,o.padding,C.padding),hyperLink:I.value||a.hyperLink||""};a._originalStyle={...c};const i=a.unique_name==="sheet"?{sheet_id:a.id,workspace_id:h.value,workspace_module_id:T.value,style:c}:{card_id:a.id,seat_id:a.seat_id,style:c};a.unique_name==="sheet"?await $e(i):await Z.mutateAsync(i)}finally{O.value=!1}}}const Xt=r([]);function Zt(t){const e={id:"root",topic:localStorage.getItem("currentName")??"",isRoot:!0,children:[],style:{},_originalStyle:{},unique_name:"root"};if(!Array.isArray(t))return e;const a={};return t.forEach(l=>{var u,f;const o=((u=l.variables)==null?void 0:u["sheet-title"])||"Untitled",c=((f=l.style)==null?void 0:f.hyperLink)||"";a[o]||(a[o]={id:l._id,topic:o,variables:l==null?void 0:l.variables,children:[],style:l==null?void 0:l.style,_originalStyle:(l==null?void 0:l.style)||{},unique_name:"sheet",hyperLink:c||""},e.children.push(a[o]));const i={id:l==null?void 0:l._id,topic:l.title,children:[],style:Me(l==null?void 0:l.style),_originalStyle:l.style||{},unique_name:"List",hyperLink:c||""};(l.cards||[]).forEach((m,V)=>{var te;const n=((te=m.style)==null?void 0:te.hyperLink)||"",S={id:m._id||`card-${V}`,seat_id:m.seat_id,topic:m["card-title"],style:Me(m.style),_originalStyle:m.style||{},children:[],unique_name:"card",hyperLink:n||""};i.children.push(S),Xt.value=S}),a[o].children.push(i)}),e}const{mutateAsync:ea}=ga({onSuccess:()=>{q.invalidateQueries({queryKey:["sheets"]}),q.invalidateQueries({queryKey:["sheet-list"]}),close()}});_a(()=>{k.value!=="mindmap"||!we.value||!v.value||Va(()=>{var o,c;const t=Zt(v.value);ce.value&&((c=(o=ce.value).destroy)==null||c.call(o),ce.value=null);const e=new Ma({el:we.value,theme:void 0,draggable:!0,contextMenu:!0,contextMenuOption:{Update:!0,extend:[{name:"Update Node",onclick:()=>{var u;ve.value&&(ve.value=!1);const i=(u=F.value)==null?void 0:u.nodeObj;i&&Y(i)}},{name:"Add Hyperlink",onclick:()=>{vt(async()=>{await Ke()})}}]}});ce.value=e,e.init({nodeData:t}),e.bus.addListener("selectNode",i=>{i&&(F.value={nodeObj:i},ve.value=!0)}),e.bus.addListener("renderNode",i=>{!(i!=null&&i.nodeObj)||!(i!=null&&i.element)||Qe(i.nodeObj,i.element)});const a=new Set;e.bus.addListener("operation",async i=>{var m,V,n;if(!i||i.name!=="insertSibling"&&i.name!=="addChild")return;const u=i.obj;if(!u||!u.id||a.has(u.id))return;a.add(u.id);let f;if(i.name==="addChild"?f=(m=e.currentNode)==null?void 0:m.nodeObj:f=(n=(V=e.currentNode)==null?void 0:V.nodeObj)==null?void 0:n.parent,!(!f||!("unique_name"in f))&&f.unique_name==="List")try{const S=He({topic:u.topic??"New Card",id:u.id},f);await Ne(S),await Oe()}catch(S){console.error("Error creating card or refetching sheets:",S)}});const l=new Set;e.bus.addListener("operation",async i=>{var m,V;if(!i)return;const u=i.obj;if(!(u!=null&&u.id))return;const f=u.parent??((V=(m=e.currentNode)==null?void 0:m.nodeObj)==null?void 0:V.parent);if(!(!f||!("unique_name"in f))){if(i.name==="addChild"&&f.unique_name==="root"&&!l.has(u.id)){l.add(u.id);try{await ea({variables:{"sheet-title":u.topic??"New Sheet","sheet-description":"This is custom description"},is_ai_generated:!1,workspace_id:h.value,workspace_module_id:T.value})}catch(n){console.error("Error creating workspace sheet:",n)}return}if(f.unique_name==="List")try{const n=He({topic:u.topic??"New Card",id:u.id},f);await Ne(n),await Oe()}catch(n){console.error("Error creating card or refetching sheets:",n)}}})})});function Qe(t,e){if(!t||!e||!t.style)return;const a=e.querySelector(".topic"),l=e.querySelector(".node")??e,o=t.style;o.background&&(l.style.background=o.background),o.color&&a&&(a.style.color=o.color),a&&(o.fontSize&&(a.style.fontSize=o.fontSize),o.fontFamily&&(a.style.fontFamily=o.fontFamily),o.fontWeight&&(a.style.fontWeight=o.fontWeight),o.fontStyle&&(a.style.fontStyle=o.fontStyle)),o.borderColor&&(l.style.borderColor=o.borderColor),o.borderWidth&&(l.style.borderWidth=o.borderWidth),o.borderRadius&&(l.style.borderRadius=o.borderRadius),o.padding&&(l.style.padding=o.padding)}function Me(t={}){return{background:t.bg_color,color:t.color,fontSize:t.font_size!=null?`${t.font_size}px`:void 0,fontWeight:t.font_weight,fontStyle:t.font_style,fontFamily:t.font_family,borderColor:t.border_color,borderWidth:t.border_width!=null?`${t.border_width}px`:void 0,borderRadius:t.border_radius!=null?`${t.border_radius}px`:void 0,padding:t.padding!=null?`${t.padding}px`:void 0,hyperLink:t.hyperLink||void 0}}function He(t,e){const a=new Date,l=a.toISOString().split("T")[0],o=new Date(a.getTime()+3*24*60*60*1e3).toISOString().split("T")[0];return{sheet_list_id:(e==null?void 0:e.topic)||"In Progress",workspace_id:h.value,sheet_id:y.value,workspace_lane_id:(t==null?void 0:t.workspace_lane_id)||null,variables:{"card-status":(e==null?void 0:e.topic)||"In Progress","card-type":null,priority:null,process:null,"card-title":t.topic||"New Card","card-description":"","start-date":l,"end-date":o},createdAt:new Date().toISOString()}}return(t,e)=>{var a,l,o,c,i,u,f,m,V;return p(),b(oe,null,[s("div",qa,[s("div",za,[s("div",Pa,[x(st,{onEditOption:Bt,modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=n=>y.value=n),canEdit:d(rt),canDelete:d(dt),onDeleteOption:zt,options:Ft.value,variant:"secondary",customClasses:"fixed w-auto"},{more:R(()=>[d(ut)?(p(),b("div",{key:0,onClick:e[0]||(e[0]=n=>Vt()),class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[34]||(e[34]=[s("i",{class:"fa-solid fa-plus"},null,-1),xe(" Add new ")]))):g("",!0)]),_:1},8,["modelValue","canEdit","canDelete","options"]),s("div",Ua,[(k.value=="kanban",p(),ae(st,{key:0,actions:!1,modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=n=>w.value=n),options:d(L),variant:"secondary",customClasses:"fixed w-auto",onNestedSelect:gt},{more:R(()=>[d(ie)?(p(),b("div",{key:0,onClick:e[2]||(e[2]=()=>{Q.value=!0}),class:"sticky bottom-0 bg-bg-dropdown shadow-md shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[35]||(e[35]=[s("i",{class:"fa-solid fa-plus"},null,-1),xe(" Add new ")]))):g("",!0)]),_:1},8,["modelValue","options"])),x(Ea,{onOnChange:e[4]||(e[4]=n=>{X.value=n}),placeholder:"Search in Orchit AI space"}),s("div",Ba,[s("button",{class:le(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",k.value==="kanban"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"List view",onClick:e[5]||(e[5]=n=>k.value="kanban")},e[36]||(e[36]=[s("i",{class:"fa-solid fa-chart-kanban"},null,-1)]),2),s("button",{onClick:e[6]||(e[6]=n=>k.value="table"),class:le(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",k.value==="table"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gallery view"},e[37]||(e[37]=[s("i",{class:"fa-solid fa-align-left"},null,-1)]),2),s("button",{onClick:e[7]||(e[7]=n=>k.value="mindmap"),class:le(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",k.value==="mindmap"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"MindMap view"},e[38]||(e[38]=[s("i",{class:"fa-solid fa-chart-diagram"},null,-1)]),2)])])])]),k.value=="kanban"?(p(),b(oe,{key:0},[qe(x(Ta,null,null,512),[[Xe,d(Ee)||d(Ue)]]),qe(s("div",Oa,[x(d(St),{onOnPlus:qt,board:Re.value,"onDelete:column":e[8]||(e[8]=n=>Mt(n)),"onUpdate:column":e[9]||(e[9]=n=>It(n)),onReorder:Et,onAddColumn:Be,"onSelect:ticket":Y,onOnBoardUpdate:Lt,variable_id:w.value,sheet_id:y.value},{"column-footer":R(n=>{var S,te,Ye,Ge,Je;return[(te=(S=d(ge))==null?void 0:S.transitions)!=null&&te.all_allowed&&!((Je=(Ge=(Ye=d(ge))==null?void 0:Ye.transitions)==null?void 0:Ge.all_allowed)!=null&&Je.includes(n.column.title))&&d(ge).transitions.currentColumn!=n.column.title?(p(),b("div",$a," Disbale ( you can't drop here ) ")):g("",!0)]}),ticket:R(({ticket:n})=>[x(La,{selectedVar:w.value,onSelect:()=>{Y(n)},ticket:n},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"]),s("div",{class:"min-w-[328px]",onClick:e[11]||(e[11]=se(()=>{},["stop"]))},[J.value?(p(),b("div",Ra,[x(et,{autofocus:!0,modelValue:U.value,"onUpdate:modelValue":e[10]||(e[10]=n=>U.value=n),placeholder:"Add New list",onKeyup:Ze(_e,["enter"])},null,8,["modelValue"]),e[39]||(e[39]=s("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),s("div",Wa,[x(tt,{onClick:_e,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:R(()=>[xe(ne(d(Ae)?"Adding...":"Add list"),1)]),_:1}),s("i",{class:"fa-solid fa-close",onClick:Le})])])):(p(),b("button",{key:1,disabled:!d(ie),class:le(["text-sm text-text-primary py-2.5 font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",d(ie)?"cursor-pointer":"cursor-not-allowed"]),onClick:se(Le,["stop"])}," + Add List ",10,ja))])],512),[[Xe,!d(Ee)&&!d(Ue)]])],64)):g("",!0),k.value=="table"?(p(),ae(Ia,{key:1,onToggleVisibility:Jt,onAddVar:e[12]||(e[12]=()=>{Q.value=!0}),isPending:d(Ee)||d(Dt),columns:Rt.value,rows:Re.value,canCreate:d(ct),canCreateVariable:d(ie),onCreate:Qt},null,8,["isPending","columns","rows","canCreate","canCreateVariable"])):g("",!0),k.value==="mindmap"?(p(),b(oe,{key:2},[s("div",Ka,[s("div",{ref_key:"mindMapRef",ref:we,class:"flex-1 h-full overflow-hidden rounded-md relative"},null,512),ve.value?(p(),b("div",Qa,[e[45]||(e[45]=s("div",{class:"flex items-center justify-between pb-3 mb-4 border-b"},[s("h3",{class:"text-sm font-semibold text-secondary"},"Format Node")],-1)),s("div",Ha,[s("div",null,[e[42]||(e[42]=s("h4",{class:"text-xs font-semibold text-secondary uppercase mb-3"}," Colors ",-1)),s("div",Ya,[e[40]||(e[40]=s("label",{class:"block text-xs text-secondary mb-1"},"Background",-1)),s("div",{class:"flex items-center gap-2 cursor-pointer",onClick:e[13]||(e[13]=n=>z.value=!z.value)},[s("div",{class:"w-full h-7 rounded border",style:ye({background:E.value.background})},null,4),s("span",Ga,ne(E.value.background),1)]),z.value?(p(),b("div",Ja,[s("div",Xa,[(p(),b(oe,null,at(Pe,n=>s("button",{key:n,class:"w-5 h-5 rounded border",style:ye({background:n}),onClick:S=>{ee("bg_color",{target:{value:n}}),z.value=!1}},null,12,Za)),64))]),s("div",el,[s("input",{type:"color",value:E.value.background,class:"w-8 h-8 cursor-pointer",onInput:e[14]||(e[14]=n=>ee("bg_color",n))},null,40,tl),s("input",{type:"text",class:"flex-1 text-xs border rounded px-2 py-1",value:E.value.background,readonly:""},null,8,al)])])):g("",!0)]),s("div",ll,[e[41]||(e[41]=s("label",{class:"block text-xs text-secondary mb-1"},"Text",-1)),s("div",{class:"flex items-center gap-2 cursor-pointer",onClick:e[15]||(e[15]=n=>P.value=!P.value)},[s("div",{class:"w-full h-7 rounded border",style:ye({background:E.value.color})},null,4),s("span",ol,ne(E.value.color),1)]),P.value?(p(),b("div",sl,[s("div",nl,[(p(),b(oe,null,at(Pe,n=>s("button",{key:n,class:"w-5 h-5 rounded border",style:ye({background:n}),onClick:S=>{ee("color",{target:{value:n}}),P.value=!1}},null,12,il)),64))]),s("div",rl,[s("input",{type:"color",value:E.value.color,class:"w-8 h-8 cursor-pointer",onInput:e[16]||(e[16]=n=>ee("color",n))},null,40,dl),s("input",{type:"text",class:"flex-1 text-xs border rounded px-2 py-1",value:E.value.color,readonly:""},null,8,ul)])])):g("",!0)])]),s("div",null,[s("div",cl,[s("div",null,[e[44]||(e[44]=s("label",{class:"block text-xs text-secondary mb-1"},"Weight",-1)),s("select",{class:"w-full h-8 border rounded px-2 text-sm",value:E.value.fontWeight,onChange:e[17]||(e[17]=n=>ee("font_weight",n))},e[43]||(e[43]=[s("option",{value:"lighter"},"Light",-1),s("option",{value:"normal"},"Normal",-1),s("option",{value:"bold"},"Bold",-1),s("option",{value:"bolder"},"Extra Bold",-1)]),40,pl)])])])]),s("div",vl,[s("button",{class:"w-full cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium hover:shadow-md disabled:opacity-60",disabled:O.value,onClick:Ke},[O.value?(p(),b("span",bl)):g("",!0),s("span",null,ne(O.value?"Updating...":"Update"),1)],8,fl)])])):g("",!0)]),fe.value?(p(),b("div",ml,[s("div",gl,[e[46]||(e[46]=s("h3",{class:"text-lg font-semibold mb-4"},"Insert Web Link",-1)),qe(s("input",{"onUpdate:modelValue":e[18]||(e[18]=n=>I.value=n),type:"text",placeholder:"Enter or paste a URL",class:"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[ya,I.value]]),s("div",_l,[s("button",{onClick:bt,class:"px-4 py-2 rounded-md bg-gray-200 hover:bg-gray-300"}," Cancel "),s("button",{disabled:!I.value,onClick:ft,class:le(["px-4 py-2 rounded-md text-white",I.value?"bg-blue-500 hover:bg-blue-600":"bg-blue-300 cursor-not-allowed"])}," Insert ",10,yl)])])])):g("",!0),J.value?(p(),b("div",{key:1,class:"absolute top-40 left-70 bg-bg-body rounded-lg p-4 shadow-lg z-100 min-w-[328px] border",onClick:e[20]||(e[20]=se(()=>{},["stop"]))},[x(et,{autofocus:!0,modelValue:U.value,"onUpdate:modelValue":e[19]||(e[19]=n=>U.value=n),placeholder:"Add New list",onKeyup:Ze(_e,["enter"])},null,8,["modelValue"]),e[47]||(e[47]=s("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),s("div",xl,[x(tt,{onClick:_e,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:R(()=>[xe(ne(d(Ae)?"Adding...":"Add list"),1)]),_:1}),s("i",{class:"fa-solid fa-close cursor-pointer",onClick:Le})])])):g("",!0)],64)):g("",!0)]),x(d(Se),{onClick:e[21]||(e[21]=se(()=>{},["stop"])),modelValue:B.value,"onUpdate:modelValue":e[22]||(e[22]=n=>B.value=n),title:"Delete List",itemLabel:"list",itemName:(a=N.value)==null?void 0:a.title,requireMatchText:(l=N.value)==null?void 0:l.title,confirmText:"Delete List",cancelText:"Cancel",size:"md",loading:d(Ae),onConfirm:Nt,onCancel:e[23]||(e[23]=()=>{B.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),pe.value?(p(),ae(d(kt),{selectedVariable:w.value,listId:(o=N.value)==null?void 0:o.title,sheet_id:y.value,key:"createTaskModalKey",modelValue:pe.value,"onUpdate:modelValue":e[24]||(e[24]=n=>pe.value=n),onSubmit:e[25]||(e[25]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):g("",!0),(c=H.value)!=null&&c._id?(p(),ae(d(Ct),{key:1,details:H.value,onClose:e[26]||(e[26]=()=>{Y({variables:{}})}),showPanel:!!((i=H.value)!=null&&i._id)},null,8,["details","showPanel"])):g("",!0),x(d(ht),{size:"md",sheet:M.value,modelValue:G.value,"onUpdate:modelValue":e[27]||(e[27]=n=>G.value=n)},null,8,["sheet","modelValue"]),Q.value?(p(),ae(d(wt),{key:2,modelValue:Q.value,"onUpdate:modelValue":e[28]||(e[28]=n=>Q.value=n),sheetID:y.value},null,8,["modelValue","sheetID"])):g("",!0),x(d(Se),{onClick:e[29]||(e[29]=se(()=>{},["stop"])),modelValue:K.value,"onUpdate:modelValue":e[30]||(e[30]=n=>K.value=n),title:"Delete Sheet",itemLabel:"Sheet",itemName:(u=M.value)==null?void 0:u.title,requireMatchText:(f=M.value)==null?void 0:f.title,confirmText:"Delete Sheet",cancelText:"Cancel",size:"md",loading:d(Pt),onConfirm:Ut,onCancel:e[31]||(e[31]=()=>{K.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),x(d(Se),{modelValue:ue.value,"onUpdate:modelValue":e[32]||(e[32]=n=>ue.value=n),title:"Delete Ticket",itemLabel:"Ticket",itemName:(m=de.value)==null?void 0:m.title,requireMatchText:(V=de.value)==null?void 0:V.title,confirmText:"Delete Ticket",cancelText:"Cancel",size:"md",loading:he.value,onConfirm:yt,onCancel:e[33]||(e[33]=()=>{ue.value=!1,de.value=null})},null,8,["modelValue","itemName","requireMatchText","loading"]),e[48]||(e[48]=s("div",null,null,-1))],64)}}}),Il=Aa(kl,[["__scopeId","data-v-766f086c"]]);export{Il as default};
