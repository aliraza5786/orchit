import{d as pe,r as x,q as ve,m as ge,c as A,i as u,e,F as ee,x as ue,y as de,t as i,a7 as ce,I as st,aa as re,o as n,J as He,ab as at,p as xe,L as Je,K as Xe,ac as ot,N as ne,u as lt,b as we,w as U,h as y,n as l,j as W,B as ie,f as L,_ as De,l as ke,S as Ye,ad as Ze,ae as nt,af as Qe,a as rt,ag as We,a4 as N,g as K,a3 as Ge,H as it,k as ut}from"./index-LtrL70BY.js";import{l as dt,d as ct}from"./dark-logo-Mcb_sJlF.js";import{u as pt}from"./useTheme-B0ohpw2h.js";import{L as mt}from"./Loader-Ds4ar5Dw.js";import{u as $e}from"./workspace-Mkdm8aSl.js";import{_ as _e}from"./InfoRow.vue_vue_type_script_setup_true_lang-CVHh3eOj.js";import{f as ft,e as vt}from"./FormatDate--XHqACrs.js";import"./favicon-BAFXWHLW.js";const gt={class:"w-full relative"},xt=["onClick"],yt={class:"mt-4 overflow-hidden relative"},bt=pe({__name:"Tabs",props:{tabs:{},defaultTab:{}},setup(T){const h=T,f=x((h==null?void 0:h.defaultTab)??0),b=x([]),P=x(null),r=x({width:"0px",transform:"translateX(0px)"});function w(c){f.value=c,V()}function V(){re(()=>{const c=b.value[f.value];if(c&&P.value){const z=c.offsetLeft,m=c.offsetWidth;r.value={width:`${m}px`,transform:`translateX(${z}px)`}}})}ve(()=>{V()}),ge(f,V);const I=A(()=>({1:"grid-cols-1",2:"grid-cols-2",3:"grid-cols-3",4:"grid-cols-4",5:"grid-cols-5"})[h.tabs.length]||"grid-cols-1");return(c,z)=>(n(),u("div",gt,[e("div",{ref_key:"tabList",ref:P,class:"flex sticky top-[-25px] gap-6 border-b border-border bg-bg-body z-10 text-sm font-medium"},[(n(!0),u(ee,null,ue(c.tabs,(m,k)=>(n(),u("button",{key:m,onClick:O=>w(k),ref_for:!0,ref_key:"tabRefs",ref:b,class:de(["py-4 px-6 relative cursor-pointer",f.value===k?"text-text-primary":"text-text-secondary -500"])},i(m),11,xt))),128)),e("div",{class:"absolute bottom-0 h-0.5 bg-black transition-all duration-300 ease-in-out",style:ce(r.value)},null,4)],512),e("div",yt,[e("div",{class:de(`grid ${I.value} transition-all duration-300 ease-in-out`),style:ce({width:c.tabs.length*100+"%",transform:`translateX(-${f.value*(100/c.tabs.length)}%)`})},[(n(!0),u(ee,null,ue(c.tabs,m=>(n(),u("div",{key:m,class:"px-2"},[st(c.$slots,m)]))),128))],6)])]))}}),et=()=>at({key:["current-package"],url:"/auth/subscription-stats",method:"GET"}),ht=(T={})=>He({key:["package-payment"]},{mutationFn:h=>Je({url:"billing/payment-intent",method:"POST",data:h}),...T}),tt=(T,h={})=>{const f=xe();return console.log(T,f.query.session_id,">>>>"),He({key:["package-payment-confirm"]},{mutationFn:b=>Je({url:"billing/confirm-payment",method:"POST",data:{...T,...b,sessionId:f.query.session_id}}),...h})},_t={class:"px-6"},wt={key:0,class:"py-4"},kt={class:"space-y-6"},$t={class:"flex items-center gap-6"},Ct={class:"relative group"},Pt={class:"w-24 h-24 rounded-full bg-orange-500 flex items-center justify-center text-text-primary text-2xl font-bold border-4 border-border overflow-hidden"},Lt=["src"],Ut={key:1},Mt=["disabled"],Rt={class:"flex flex-col items-center justify-center gap-1"},At={key:0,class:"inline-block h-6 w-6 rounded-full border-2 border-white border-t-transparent animate-spin","aria-hidden":"true"},Tt={key:1,class:"fa-solid fa-camera text-xl"},jt={key:2,class:"text-xs"},Ft={class:"flex-1"},St={class:"text-xl font-semibold capitalize text-text-primary"},qt={class:"text-text-secondary"},Vt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},It={key:0},zt={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Bt={class:"flex justify-end gap-3 pt-4"},Et={key:1,class:"py-8 text-center text-text-secondary"},Nt={key:2,class:"py-8 text-center text-red-500"},Kt={key:0,class:"w-full h-full flex justify-center items-center"},Ot={key:1,class:"py-4"},Dt={class:"space-y-6"},Qt={class:"bg-bg-body rounded-xl p-6 border border-border"},Wt={class:"flex items-center justify-between mb-4"},Gt={class:"text-2xl font-bold text-text-primary"},Ht={class:"text-sm text-text-secondary"},Jt={class:"text-right"},Xt={class:"text-2xl font-bold text-text-primary"},Yt={class:"text-xs text-text-secondary"},Zt={class:"text-sm text-text-secondary mb-4"},es={class:"space-y-4"},ts={class:"flex items-center justify-between mb-2"},ss={class:"flex flex-col"},as={class:"text-sm font-medium text-text-primary"},os={class:"text-xs font-medium text-text-secondary"},ls={class:"text-sm text-text-secondary"},ns={class:"h-2 w-full bg-border/60 rounded-full overflow-hidden"},rs={key:0,class:"bg-bg-body gap-6 items-center flex rounded-xl p-6 border border-border"},is={class:"border-r border-border pr-6 min-w-80"},us={class:"mb-2 uppercase"},ds={key:0,class:"bg-bg-body rounded-xl transition-all hover:shadow-lg"},cs={class:"text-left mb-4"},ps={class:"text-xl font-bold text-text-primary mb-2"},ms={class:"mb-2"},fs={class:"text-3xl font-bold text-text-primary"},vs={class:"text-sm text-text-secondary"},gs={class:"text-sm text-text-secondary"},xs={class:"space-y-2"},ys=pe({__name:"AccountSettingsModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(T,{emit:h}){const f=$e(),b=xe(),P=ke(),{data:r,refetch:w,isPending:V}=et(),I=b.query.session_id,{mutate:c,isPending:z}=tt({sessionId:I,interval:"month"},{onSuccess:()=>{w(),P.push("/")}});ve(async()=>{var o;const a=b.query.session_id;console.log(b.query.session_id,a),a&&c({packageId:await((o=r==null?void 0:r.value.nextPackage)==null?void 0:o.id)})});const{mutate:m,isPending:k}=ht({onSuccess:async a=>{window.open(a==null?void 0:a.checkoutUrl)}});function O(a){m({packageId:a==null?void 0:a.id,interval:"month"})}const G=T,se=h,D=A({get:()=>G.modelValue,set:a=>se("update:modelValue",a)}),{data:S,isLoading:j,refetch:H}=Xe({queryKey:["profile"],queryFn:Ze,enabled:A(()=>G.modelValue)});ge(()=>r.value,()=>{var a,o;f.setLimit(r.value),b.query.stripePayment&&c({sessionId:(a=r.value)==null?void 0:a.sessionId,packageId:(o=r==null?void 0:r.value.nextPackage)==null?void 0:o.id,interval:"month"})});const p=A(()=>{var a;return((a=S.value)==null?void 0:a.data)||null}),s=x({fullName:"",email:"",jobTitle:"",department:"",location:""}),F=x(null),B=x(""),q=x(!1),J=x("");ge(p,a=>{a&&(s.value.fullName=a.u_full_name||"",s.value.email=a.u_email||"",s.value.jobTitle=a.u_job_title||"",s.value.department=a.u_department||"",s.value.location=a.u_location||"")},{immediate:!0});const Q=A(()=>s.value.fullName.split(" ").map(a=>a[0]).join("").toUpperCase());function ye(){var a;(a=F.value)==null||a.click()}const{mutate:be,isPending:ae}=ot({onSuccess:a=>{var v;const o=(v=a==null?void 0:a.data)==null?void 0:v.url;if(!o){ne.error("Upload succeeded but no URL was returned."),q.value=!1;return}J.value=o,q.value=!1,ne.success("Profile picture uploaded successfully")},onError:a=>{console.error("File upload failed",a),ne.error("File upload failed. Please try again."),q.value=!1,B.value=""}});async function me(a){var d;const o=a.target;if(!((d=o==null?void 0:o.files)!=null&&d.length))return;const v=o.files[0];B.value=URL.createObjectURL(v),q.value=!0;const M=new FormData;M.append("file",v),be(M)}const{mutate:E,isPending:oe}=lt({mutationFn:a=>nt(a),onSuccess:()=>{ne.success("Profile updated successfully"),H(),J.value="",B.value=""},onError:()=>{ne.error("Failed to update profile.")}});function fe(){const a={u_full_name:s.value.fullName,...J.value&&{u_profile_image:J.value}};E(a)}function he(){p.value&&(s.value.fullName=p.value.u_full_name||"",s.value.jobTitle=p.value.u_job_title||"",s.value.department=p.value.u_department||"",s.value.location=p.value.u_location||""),B.value="",J.value="",D.value=!1,P.push("/")}const le=x({name:"Pro",price:"$29",billingCycle:"Monthly",nextBillingDate:"January 15, 2026",features:["Unlimited workspaces","100 GB storage","Up to 10 team members","Priority support","Advanced analytics","Custom integrations"]});return(a,o)=>(n(),we(Ye,{modelValue:D.value,"onUpdate:modelValue":[o[3]||(o[3]=v=>D.value=v),o[4]||(o[4]=()=>l(P).push("/"))],size:"lg",modalClass:"!max-w-[900px]"},{default:U(()=>[e("div",_t,[o[14]||(o[14]=e("h2",{class:"text-2xl font-semibold text-text-primary mb-6"},"Account Settings",-1)),y(bt,{tabs:["Profile","Subscription"],defaultTab:l(b).query.stripePayment?1:0},{Profile:U(()=>{var v;return[p.value?(n(),u("div",wt,[e("div",kt,[e("div",$t,[e("div",Ct,[e("div",Pt,[B.value||p.value.u_profile_image?(n(),u("img",{key:0,src:B.value||p.value.u_profile_image,class:"w-full h-full object-cover",alt:"Profile"},null,8,Lt)):(n(),u("span",Ut,i(Q.value),1))]),e("button",{type:"button",class:de(["absolute inset-0 rounded-full bg-black/60 transition grid place-items-center text-white text-xs cursor-pointer",l(ae)?"opacity-100":"opacity-0 group-hover:opacity-100"]),disabled:q.value,onClick:ye,"aria-label":"Change profile picture"},[e("div",Rt,[q.value||l(ae)?(n(),u("span",At)):(n(),u("i",Tt)),!q.value&&!l(ae)?(n(),u("span",jt,"Change")):W("",!0)])],10,Mt),e("input",{ref_key:"avatarInputRef",ref:F,type:"file",accept:"image/*",class:"hidden",onChange:me},null,544)]),e("div",Ft,[e("h3",St,i(s.value.fullName),1),e("p",qt,i(s.value.email),1)])]),o[7]||(o[7]=e("hr",{class:"border-border"},null,-1)),e("div",Vt,[y(De,{label:"Full Name",placeholder:"Enter your full name",modelValue:s.value.fullName,"onUpdate:modelValue":o[0]||(o[0]=M=>s.value.fullName=M)},null,8,["modelValue"]),y(De,{label:"Email Address",modelValue:s.value.email,"onUpdate:modelValue":o[1]||(o[1]=M=>s.value.email=M),disabled:"",class:"cursor-not-allowed"},null,8,["modelValue"])]),o[8]||(o[8]=e("hr",{class:"border-border"},null,-1)),p.value.companies?(n(),u("div",It,[o[5]||(o[5]=e("h4",{class:"text-sm font-semibold text-text-secondary mb-3"},"Organization Details",-1)),e("div",zt,[y(_e,{label:"Organization",value:p.value.companies.title},null,8,["value"]),y(_e,{label:"Company Size",value:p.value.companies.company_size},null,8,["value"]),y(_e,{label:"Job Title",value:(v=p.value.companies.role)==null?void 0:v.title},null,8,["value"])])])):W("",!0),e("div",Bt,[y(ie,{variant:"secondary",onClick:he},{default:U(()=>o[6]||(o[6]=[L(" Cancel ")])),_:1,__:[6]}),y(ie,{variant:"primary",onClick:fe,disabled:l(oe)},{default:U(()=>[L(i(l(oe)?"Saving...":"Save Changes"),1)]),_:1},8,["disabled"])])])])):l(j)?(n(),u("div",Et," Loading profile... ")):(n(),u("div",Nt," Failed to load profile data. "))]}),Subscription:U(()=>{var v,M,d,t,$,C,_,X,Y,Z,R,Ce,Pe,Le,Ue,Me,Re,Ae,Te,je,Fe,Se,qe,Ve,Ie,ze,Be,Ee,Ne,Ke;return[l(V)||l(z)?(n(),u("div",Kt,o[9]||(o[9]=[e("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):(n(),u("div",Ot,[e("div",Dt,[e("div",Qt,[o[10]||(o[10]=e("h3",{class:"text-lg font-semibold text-text-primary mb-4"},"Current Plan",-1)),e("div",Wt,[e("div",null,[e("p",Gt,i((M=(v=l(r))==null?void 0:v.package)==null?void 0:M.name),1),e("p",Ht,i(le.value.billingCycle),1)]),e("div",Jt,[e("p",Xt,i(((t=(d=l(r))==null?void 0:d.package)==null?void 0:t.currencySymbol)+((C=($=l(r))==null?void 0:$.package)==null?void 0:C.amount)),1),e("p",Yt,"per "+i(((_=le.value)==null?void 0:_.billingCycle)==="Monthly"?"month":"year"),1)])]),e("p",Zt,"Next billing date: "+i(l(ft)((X=l(r))==null?void 0:X.renewsAt)+`, ${l(vt)((Y=l(r))==null?void 0:Y.renewsAt)}`),1),o[11]||(o[11]=e("h3",{class:"text-lg font-semibold text-text-primary mb-4"},"Usage & Limits",-1)),e("div",es,[(n(!0),u(ee,null,ue((Z=l(r))==null?void 0:Z.features,(g,te)=>{var Oe;return n(),u("div",{key:te},[e("div",ts,[e("div",ss,[e("span",as,i(g.name),1),e("span",os,i(g.description),1)]),e("span",ls,i(g==null?void 0:g.usage.current)+" "+i(g==null?void 0:g.usage.unit)+" / "+i(g.limits.limit)+" "+i((Oe=g==null?void 0:g.limits)==null?void 0:Oe.unit),1)]),e("div",ns,[e("div",{class:"h-full bg-accent rounded-full transition-all",style:ce({width:(g==null?void 0:g.usage.percentage)+"%"})},null,4)])])}),128))])]),(R=l(r))!=null&&R.nextPackage?(n(),u("div",rs,[e("div",is,[e("h1",us,"Upgrade to "+i((Pe=(Ce=l(r))==null?void 0:Ce.nextPackage)==null?void 0:Pe.name),1),(Le=l(r))!=null&&Le.nextPackage?(n(),u("div",ds,[e("div",cs,[e("h3",ps,i(l(r).nextPackage.name),1),e("div",ms,[e("span",fs,i(((Ae=(Re=(Me=(Ue=l(r))==null?void 0:Ue.nextPackage)==null?void 0:Me.pricing)==null?void 0:Re.month)==null?void 0:Ae.amount)+((Se=(Fe=(je=(Te=l(r))==null?void 0:Te.nextPackage)==null?void 0:je.pricing)==null?void 0:Fe.month)==null?void 0:Se.currencySymbol)),1),e("span",vs,"/ "+i((ze=(Ie=(Ve=(qe=l(r))==null?void 0:qe.nextPackage)==null?void 0:Ve.pricing)==null?void 0:Ie.month)==null?void 0:ze.interval),1)]),e("p",gs,i((Ee=(Be=l(r))==null?void 0:Be.nextPackage)==null?void 0:Ee.description),1)])])):W("",!0),y(ie,{class:"mt-3 block w-full uppercase",onClick:o[2]||(o[2]=g=>{var te;return O((te=l(r))==null?void 0:te.nextPackage)})},{default:U(()=>[L(i(l(k)?"Upgrading...":"UPGRADE"),1)]),_:1})]),e("div",null,[o[13]||(o[13]=e("h3",{class:"text-lg font-semibold text-text-primary mb-3"},"Plan Features",-1)),e("ul",xs,[(n(!0),u(ee,null,ue((Ke=(Ne=l(r))==null?void 0:Ne.nextPackage)==null?void 0:Ke.features,(g,te)=>(n(),u("li",{key:te,class:"flex items-center gap-2 text-sm text-text-secondary"},[o[12]||(o[12]=e("i",{class:"fa-solid fa-check text-green-500"},null,-1)),e("span",null,i(g==null?void 0:g.description),1)]))),128))])])])):W("",!0)])]))]}),_:1},8,["defaultTab"])])]),_:1},8,["modelValue"]))}}),bs={class:"px-6 py-6"},hs={class:"flex items-center gap-4"},_s={class:"min-w-0"},ws={key:0,class:"text-text-secondary mt-1"},ks={class:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-6"},$s={class:"flex items-center justify-center"},Cs={class:"relative h-28 w-28"},Ps={class:"h-28 w-28 rotate-[-90deg]",viewBox:"0 0 100 100"},Ls=["stroke-dashoffset"],Us={class:"absolute inset-0 grid place-items-center"},Ms={class:"text-center"},Rs={class:"text-xl font-semibold text-text-primary"},As={class:"md:col-span-2"},Ts={class:"flex items-center justify-between text-sm mb-2"},js={class:"text-text-primary font-medium"},Fs={class:"h-3 w-full rounded-full bg-bg-input overflow-hidden"},Ss={class:"mt-4 grid grid-cols-2 gap-2 text-xs text-text-secondary"},qs={class:"flex items-center gap-2"},Vs={class:"text-text-primary font-medium"},Is={class:"flex items-center gap-2"},zs={class:"text-text-primary font-medium"},Bs={class:"mt-8 flex flex-col-reverse gap-3 sm:flex-row sm:justify-end"},Es=42,Ns=pe({__name:"LimitExceededModal",emits:["upgrade"],setup(T,{emit:h}){var j,H;const f=$e(),b=xe(),P=ke(),r=A(()=>{var p,s;return((s=(p=f==null?void 0:f.limits)==null?void 0:p.features[1])==null?void 0:s.usage.current)??0}),w=A(()=>{var p,s;return((s=(p=f==null?void 0:f.limits)==null?void 0:p.features[1])==null?void 0:s.usage.limit)??0}),V=A(()=>Math.max(0,(w.value||0)-(r.value||0))),I=A(()=>{if(!w.value)return 0;const p=r.value/w.value*100;return Math.max(0,Math.min(100,Math.round(p)))}),c=2*Math.PI*Es,z=A(()=>c*(1-I.value/100)),{data:m,refetch:k}=et(),O=b.query.session_id,{mutate:G}=tt({sessionId:O,interval:"month"},{onSuccess:()=>{k(),P.push("/")}});O&&G({packageId:(H=(j=m==null?void 0:m.value)==null?void 0:j.nextPackage)==null?void 0:H.id});function se(){S("upgrade")}function D(){f.setLimitExccedModal(!1)}const S=h;return(p,s)=>(n(),we(Ye,{modelValue:l(f).showLimitExccedModal,"onUpdate:modelValue":s[0]||(s[0]=F=>l(f).showLimitExccedModal=F),size:"lg",modalClass:"!max-w-[720px]"},{default:U(()=>[e("div",bs,[e("div",hs,[s[2]||(s[2]=e("div",{class:"relative h-12 w-12 shrink-0"},[e("span",{class:"absolute inset-0 rounded-full bg-amber-500/15"}),e("svg",{viewBox:"0 0 24 24",class:"relative h-12 w-12 text-amber-500"},[e("path",{fill:"currentColor",d:"M10.4 2.5a2 2 0 0 1 3.2 0l8.35 12.54A2 2 0 0 1 20.35 18H3.65a2 2 0 0 1-1.6-2.96L10.4 2.5Zm1.6 4.5a.9.9 0 0 0-.9.9v5.2a.9.9 0 0 0 1.8 0V7.9a.9.9 0 0 0-.9-.9Zm0 9.6a1.2 1.2 0 1 0 0 2.4a1.2 1.2 0 0 0 0-2.4Z"})])],-1)),e("div",_s,[s[1]||(s[1]=e("h2",{class:"text-2xl font-semibold text-text-primary leading-tight"}," You’ve reached your workspace limit ",-1)),r.value&&w.value?(n(),u("p",ws," You’ve used "+i(r.value)+" of "+i(w.value)+" workspaces on your current plan. Upgrade to create more workspaces and keep your team moving. ",1)):W("",!0)])]),e("div",ks,[e("div",$s,[e("div",Cs,[(n(),u("svg",Ps,[s[3]||(s[3]=e("circle",{cx:"50",cy:"50",r:"42",class:"stroke-border","stroke-width":"12",fill:"none"},null,-1)),e("circle",{cx:"50",cy:"50",r:"42","stroke-dasharray":c,"stroke-dashoffset":z.value,class:"stroke-amber-500 transition-[stroke-dashoffset] duration-500 ease-out","stroke-linecap":"round","stroke-width":"12",fill:"none"},null,8,Ls)])),e("div",Us,[e("div",Ms,[e("div",Rs,i(I.value)+"%",1),s[4]||(s[4]=e("div",{class:"text-[11px] text-text-secondary"},"used",-1))])])])]),e("div",As,[e("div",Ts,[s[5]||(s[5]=e("span",{class:"text-text-secondary"},"Usage",-1)),e("span",js,i(r.value)+" / "+i(w.value),1)]),e("div",Fs,[e("div",{class:"h-full bg-amber-500 transition-all duration-500",style:ce({width:I.value+"%"})},null,4)]),e("ul",Ss,[e("li",qs,[s[6]||(s[6]=e("span",{class:"inline-block h-2 w-2 rounded-full bg-amber-500"},null,-1)),s[7]||(s[7]=L(" Used workspaces: ")),e("span",Vs,i(r.value),1)]),e("li",Is,[s[8]||(s[8]=e("span",{class:"inline-block h-2 w-2 rounded-full bg-border"},null,-1)),s[9]||(s[9]=L(" Remaining: ")),e("span",zs,i(V.value),1)])])])]),s[12]||(s[12]=e("div",{class:"mt-6 grid gap-3 text-sm"},[e("div",{class:"flex items-start gap-3"},[e("span",{class:"mt-0.5 inline-flex h-5 w-5 items-center justify-center rounded-full bg-emerald-500/15 text-emerald-500"},[e("svg",{viewBox:"0 0 24 24",class:"h-3.5 w-3.5"},[e("path",{fill:"currentColor",d:"M9 16.2 4.8 12l1.4-1.4L9 13.4l8.8-8.8L19.2 6z"})])]),e("p",{class:"text-text-secondary"},[e("span",{class:"text-text-primary font-medium"},"Create more workspaces"),L(" for teams and projects without hitting caps.")])]),e("div",{class:"flex items-start gap-3"},[e("span",{class:"mt-0.5 inline-flex h-5 w-5 items-center justify-center rounded-full bg-emerald-500/15 text-emerald-500"},[e("svg",{viewBox:"0 0 24 24",class:"h-3.5 w-3.5"},[e("path",{fill:"currentColor",d:"M9 16.2 4.8 12l1.4-1.4L9 13.4l8.8-8.8L19.2 6z"})])]),e("p",{class:"text-text-secondary"},[e("span",{class:"text-text-primary font-medium"},"Priority support"),L(" and faster responses as you scale.")])]),e("div",{class:"flex items-start gap-3"},[e("span",{class:"mt-0.5 inline-flex h-5 w-5 items-center justify-center rounded-full bg-emerald-500/15 text-emerald-500"},[e("svg",{viewBox:"0 0 24 24",class:"h-3.5 w-3.5"},[e("path",{fill:"currentColor",d:"M9 16.2 4.8 12l1.4-1.4L9 13.4l8.8-8.8L19.2 6z"})])]),e("p",{class:"text-text-secondary"},[e("span",{class:"text-text-primary font-medium"},"Advanced admin controls"),L(" for roles, approvals, and security.")])])],-1)),e("div",Bs,[y(ie,{variant:"secondary",onClick:D},{default:U(()=>s[10]||(s[10]=[L(" Not now ")])),_:1,__:[10]}),y(ie,{variant:"primary",class:"sm:ml-2",onClick:se},{default:U(()=>s[11]||(s[11]=[L(" Upgrade plan ")])),_:1,__:[11]})])])]),_:1},8,["modelValue"]))}}),Ks={class:"sticky top-0 z-10 w-full border-b border-border bg-bg-body/80 backdrop-blur supports-[backdrop-filter]:bg-bg-body/60",role:"navigation","aria-label":"Primary"},Os={class:"mx-auto flex max-w-[1400px] items-center justify-between px-6"},Ds={key:0,src:dt,alt:"Orchit AI logo",class:"w-30",loading:"eager",decoding:"async"},Qs={key:1,src:ct,alt:"Orchit AI logo",class:"w-30",loading:"eager",decoding:"async"},Ws=["onClick","onMouseenter"],Gs={class:"flex items-center gap-4"},Hs=["aria-expanded","aria-controls","onKeydown"],Js=["src"],Xs=["aria-expanded","aria-controls","onKeydown"],Ys=["onKeydown"],Zs={class:"flex items-center gap-3 rounded-xl p-3"},ea=["src"],ta={key:1,class:"grid h-11 w-11 place-items-center rounded-full bg-orange-500 text-base font-bold text-text-primary"},sa={class:"min-w-0"},aa={class:"truncate font-semibold leading-5"},oa={class:"truncate text-xs text-text-secondary"},la={class:"p-1"},na=["aria-expanded"],ra=pe({__name:"Navbar",setup(T){const h=$e(),{theme:f,setTheme:b}=pt(),P=x(!1);function r(){w.push("/dashboard?stripePayment=true"),re(),setTimeout(()=>{P.value=!0,h.setLimitExccedModal(!1)},100)}const w=ke(),{data:V,isPending:I}=Xe({queryKey:["profile"],queryFn:Ze,staleTime:1e3*60*5}),c=A(()=>{var d;return((d=V.value)==null?void 0:d.data)??null}),z=A(()=>{var $,C;const d=((C=($=c.value)==null?void 0:$.u_full_name)==null?void 0:C.trim())||"";return d?d.split(/\s+/).slice(0,3).map(_=>_[0]).join("").toUpperCase():"U"}),m=x(!1),k=x(!1),O=x(null),G=x(null),se=x(null),D=x(!1);function S(){m.value=!m.value,m.value||(k.value=!1)}function j(){m.value=!1,k.value=!1}function H(){const d=G.value;if(!d)return;const t=d.getBoundingClientRect(),$=200,C=window.innerWidth-t.right;D.value=C<$}function p(){k.value||(k.value=!0,re(()=>H()))}function s(){k.value=!1}let F=null;function B(){!m.value||!k.value||(F&&cancelAnimationFrame(F),F=requestAnimationFrame(()=>{H(),F=null}))}function q(d){const t=O.value;t&&(t.contains(d.target)||j())}const J=xe();ve(()=>{J.query.stripePayment&&(P.value=!0),document.addEventListener("click",q),window.addEventListener("resize",B)}),Qe(()=>{document.removeEventListener("click",q),window.removeEventListener("resize",B),F&&cancelAnimationFrame(F)});const Q=rt();async function ye(){try{j(),h.setWorkspace(null),localStorage.clear(),await Q.cancelQueries({queryKey:["me"]}),await Q.cancelQueries({queryKey:["profile"]}),await Q.cancelQueries({queryKey:["workspaces"]}),Q.removeQueries({queryKey:["profile"]}),Q.removeQueries({queryKey:["workspaces"]}),Q.removeQueries({queryKey:["me"]}),w.push("/login")}catch(d){console.error("Logout failed",d)}}function be(){j(),P.value=!0}const ae=[{label:"Workspaces",to:"/",exact:!0},{label:"My Task",to:"/dashboard/task"},{label:"Users",to:"/dashboard/users"}],me=x(null),E=new Map,oe=x(0),fe=x(0);function he(d,t){if(!t)return E.delete(d);E.set(d,t)}function le(d){const t=me.value;if(!t||!d)return;const $=t.getBoundingClientRect(),C=d.getBoundingClientRect();oe.value=C.left-$.left,fe.value=C.width}function a(){const d=w.currentRoute.value.path;let t;if(E.has(d))t=E.get(d);else{for(const[$,C]of E.entries())if(d.startsWith($)&&$!=="/"){t=C;break}t||(t=E.get("/"))}le(t||null)}function o(d){const t=E.get(d)||null;le(t)}ge(()=>w.currentRoute.value.path,async()=>{await re(),a()});let v=null;function M(){v&&cancelAnimationFrame(v),v=requestAnimationFrame(()=>{a(),v=null})}return ve(()=>{window.addEventListener("resize",M),re(a)}),Qe(()=>{window.removeEventListener("resize",M),v&&cancelAnimationFrame(v)}),(d,t)=>{var $,C;return n(),u(ee,null,[l(I)?(n(),we(mt,{key:0})):W("",!0),e("nav",Ks,[e("div",Os,[y(l(We),{to:"/",class:"flex items-center gap-2"},{default:U(()=>[l(f)==="light"?(n(),u("img",Ds)):(n(),u("img",Qs))]),_:1}),e("ul",{class:"relative hidden items-stretch py-4 gap-9 text-sm font-medium text-text-primary md:flex",ref_key:"linksContainerRef",ref:me},[e("div",{class:"pointer-events-none absolute bottom-0 h-[2px] rounded-full bg-text-primary transition-all duration-300 ease-out",style:ce({left:oe.value+"px",width:fe.value+"px"})},null,4),(n(),u(ee,null,ue(ae,_=>y(l(We),{key:_.to,to:_.to,custom:""},{default:U(({navigate:X,isActive:Y,isExactActive:Z})=>[e("li",{ref_for:!0,ref:R=>he(_.to,R),onClick:X,class:de(["relative cursor-pointer py-3 transition-colors",[Y||_.exact&&Z?"text-text-primary":"text-text-secondary hover:text-text-primary"]]),onMouseenter:()=>o(_.to),onMouseleave:t[0]||(t[0]=R=>a())},i(_.label),43,Ws)]),_:2},1032,["to"])),64))],512),e("div",Gs,[t[16]||(t[16]=e("button",{class:"grid h-9 w-9 place-items-center rounded-xl border border-transparent text-text-secondary transition-[transform,background,box-shadow] hover:scale-105 hover:bg-bg-dropdown-menu-hover hover:text-text-primary focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-300","aria-label":"Notifications",type:"button"},[e("i",{class:"fa-regular fa-bell"})],-1)),t[17]||(t[17]=e("button",{class:"grid h-9 w-9 place-items-center rounded-xl border border-transparent text-text-secondary transition-[transform,background,box-shadow] hover:scale-105 hover:bg-bg-dropdown-menu-hover hover:text-text-primary focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-300","aria-label":"Help",type:"button"},[e("i",{class:"fa-regular fa-circle-question"})],-1)),e("div",{class:"relative",ref_key:"menuRef",ref:O},[($=c.value)!=null&&$.u_profile_image?(n(),u("button",{key:0,"aria-haspopup":"menu","aria-expanded":m.value?"true":"false","aria-controls":m.value?"user-menu":void 0,onClick:S,onKeydown:[N(K(S,["prevent"]),["enter"]),N(K(S,["prevent"]),["space"]),N(K(j,["prevent"]),["esc"])]},[e("img",{class:"object-cover cursor-pointer w-10 h-10 rounded-full",src:(C=c.value)==null?void 0:C.u_profile_image,alt:"profile_img"},null,8,Js)],40,Hs)):(n(),u("button",{key:1,class:"h-9 w-9 overflow-hidden rounded-full bg-orange-500 text-sm font-bold text-text-primary ring-offset-2 transition hover:brightness-95 focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-300","aria-haspopup":"menu","aria-expanded":m.value?"true":"false","aria-controls":m.value?"user-menu":void 0,onClick:S,onKeydown:[N(K(S,["prevent"]),["enter"]),N(K(S,["prevent"]),["space"]),N(K(j,["prevent"]),["esc"])],type:"button"},i(z.value),41,Xs)),y(Ge,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"opacity-0 -translate-y-1 scale-95","enter-to-class":"opacity-100 translate-y-0 scale-100","leave-active-class":"transition duration-120 ease-in","leave-from-class":"opacity-100 translate-y-0 scale-100","leave-to-class":"opacity-0 -translate-y-1 scale-95"},{default:U(()=>{var _,X,Y,Z;return[m.value?(n(),u("div",{key:0,id:"user-menu",class:"absolute right-0 mt-2 w-80 origin-top-right rounded-2xl bg-bg-dropdown p-1.5 text-sm shadow-xl ring-1 ring-black/5",role:"menu",onKeydown:N(K(j,["stop","prevent"]),["esc"])},[e("div",Zs,[(_=c.value)!=null&&_.u_profile_image?(n(),u("img",{key:0,class:"w-10 h-10 object-cover rounded-full",src:(X=c.value)==null?void 0:X.u_profile_image,alt:"profile_img"},null,8,ea)):(n(),u("div",ta,i(z.value),1)),e("div",sa,[e("p",aa,i(((Y=c.value)==null?void 0:Y.u_full_name)||"—"),1),e("p",oa,i(((Z=c.value)==null?void 0:Z.u_email)||"—"),1)])]),t[15]||(t[15]=e("div",{class:"h-px w-full bg-bg-dropdown-menu-hover/50"},null,-1)),e("ul",la,[e("li",null,[e("button",{class:"cursor-pointer flex w-full items-center gap-3 rounded-lg px-3 py-2 hover:bg-bg-dropdown-menu-hover",role:"menuitem",type:"button",onClick:be},t[9]||(t[9]=[e("i",{class:"fa-regular fa-gear"},null,-1),e("span",null,"Account settings",-1)]))]),e("li",{class:"relative",onMouseenter:t[6]||(t[6]=R=>p()),onMouseleave:t[7]||(t[7]=R=>s())},[e("button",{ref_key:"themeTriggerRef",ref:G,class:"flex w-full items-center justify-between rounded-lg px-3 py-2 hover:bg-bg-dropdown-menu-hover",role:"menuitem","aria-haspopup":"menu","aria-expanded":k.value?"true":"false",onKeydown:[t[1]||(t[1]=N(K(R=>p(),["prevent"]),["right"])),t[2]||(t[2]=N(K(R=>s(),["prevent"]),["left"]))],type:"button"},t[10]||(t[10]=[e("span",{class:"flex items-center gap-3"},[e("i",{class:"fa-regular fa-circle"}),L(" Theme ")],-1),e("i",{class:"fa-solid fa-chevron-right"},null,-1)]),40,na),y(Ge,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"opacity-0 translate-x-1 scale-95","enter-to-class":"opacity-100 translate-x-0 scale-100","leave-active-class":"transition duration-120 ease-in","leave-from-class":"opacity-100 translate-x-0 scale-100","leave-to-class":"opacity-0 translate-x-1 scale-95"},{default:U(()=>[k.value?(n(),u("div",{key:0,ref_key:"themeMenuRef",ref:se,class:de(["absolute top-0 z-10 w-48 origin-top-left rounded-xl bg-bg-dropdown p-1 shadow-lg ring-1 ring-black/5",D.value?"right-full mr-2":"left-full ml-2"]),role:"menu"},[e("button",{class:"block w-full rounded-lg px-3 py-2 text-left hover:bg-bg-dropdown-menu-hover",onClick:t[3]||(t[3]=R=>l(b)("system")),type:"button"},t[11]||(t[11]=[e("i",{class:"fa-solid fa-desktop"},null,-1),L(" System ")])),e("button",{class:"block w-full rounded-lg px-3 py-2 text-left hover:bg-bg-dropdown-menu-hover",onClick:t[4]||(t[4]=R=>l(b)("light")),type:"button"},t[12]||(t[12]=[e("i",{class:"fa-regular fa-sun-cloud"},null,-1),L(" Light ")])),e("button",{class:"block w-full rounded-lg px-3 py-2 text-left hover:bg-bg-dropdown-menu-hover",onClick:t[5]||(t[5]=R=>l(b)("dark")),type:"button"},t[13]||(t[13]=[e("i",{class:"fa-regular fa-clouds-moon"},null,-1),L(" Dark ")]))],2)):W("",!0)]),_:1})],32),e("li",null,[e("button",{class:"flex w-full items-center gap-3 rounded-lg px-3 py-2 hover:bg-bg-dropdown-menu-hover",role:"menuitem",type:"button",onClick:ye},t[14]||(t[14]=[e("i",{class:"fa-solid fa-arrow-right-from-bracket rotate-180"},null,-1),e("span",null,"Log out",-1)]))])])],40,Ys)):W("",!0)]}),_:1})],512)])])]),y(ys,{modelValue:P.value,"onUpdate:modelValue":t[8]||(t[8]=_=>P.value=_)},null,8,["modelValue"]),y(Ns,{onUpgrade:r})],64)}}}),ia=it(ra,[["__scopeId","data-v-7eca7c61"]]),xa=pe({__name:"LandingPageLayout",setup(T){return(h,f)=>{const b=ut("router-view");return n(),u(ee,null,[y(ia),y(b)],64)}}});export{xa as default};
