import{L as W}from"./BaseMultiSelect.vue_vue_type_script_setup_true_lang-DUV6ZI1N.js";import{d as z,be as A,bf as J,r as O,a7 as R,c as S,aD as q,a as H,h as n,m as h,b as t,i as d,e as p,t as r,F as P,v as B,J as I,k as M,o as a}from"./index-DXbJhmZM.js";import"./useOpenAIGeneration-D_7Kph10.js";import"./favicon-BAFXWHLW.js";import"./info-DjaLHeD_.js";const G={key:1,class:"w-full flex flex-col"},K={class:"flex-wrap flex md:flex-nowrap gap-4 mb-6"},Q={class:"bg-bg-surface w-full text-text-primary rounded-xl p-6 flex-auto"},U={class:"text-text-primary text-base font-semibold"},X={class:"mt-5 text-text-primary text-base font-semibold capitalize"},Y={key:0,class:"mt-5 ttext-text-primary text-base font-semibold"},Z={key:0,class:"bg-bg-surface w-full text-text-primary rounded-xl p-6"},ee={class:"text-4xl font-bold"},te={class:"space-y-3"},se={class:"flex justify-between"},oe={class:"flex gap-2 items-center text-text-primary text-base font-semibold"},re={key:0,class:"mr-2 text-lg"},ae={key:0,class:"mb-6 h-full flex-grow flec flex-col"},le={class:"grid grid-cols-3 flex-wrap gap-4"},ne={class:"bg-bg-surface text-text-primary px-4 py-3 rounded-lg"},ie={class:"flex gap-4 items-center"},ce={class:"text-sm font-medium"},de={class:"text-xs text-text-secondary line-clamp-2"},ve=z({__name:"StepFour",props:{ai:{type:Boolean}},emits:["back"],setup(C,{expose:L,emit:pe}){const m=M(),{mutate:N,isPending:E}=A({onSuccess:s=>{m.push(`/workspace/peak/${s.workspace_id}/${s.job_id}`)}}),{mutate:T,isPending:$}=J({onError:s=>console.error("Error creating workspace:",s),onSuccess:s=>{V.ai?N({workspace_id:s._id}):m.push(`/workspace/peak/${s._id}`)}}),o=O({title:"",description:"",workspace_type:"",roles:[],lanes:[]});R(()=>{try{const s=JSON.parse(localStorage.getItem("workspace")||"{}");s&&(o.value=s)}catch(s){console.error("Error parsing workspace from localStorage",s)}});const x=S(()=>{var s,e;return(s=o.value.variables)!=null&&s.roles?(e=o.value.variables)==null?void 0:e.roles.reduce((i,c)=>c.max_num_people+i,0):0}),D=S(()=>{var s,e;return(s=o.value.variables)!=null&&s.roles?(e=o.value.variables)==null?void 0:e.roles.reduce((i,c)=>c.people.length+i,0):0}),{data:u}=q();function F(){var s;T({company_id:(s=u==null?void 0:u.value)==null?void 0:s._id,...o.value})}L({createProjectHandler:F});const V=C;return(s,e)=>{var i,c,b,f,v,_,g,y,k,w,j;return h($)||h(E)?(a(),H(W,{key:0})):(a(),n("div",G,[e[10]||(e[10]=t("div",{class:"text-left w-full mb-6 pt-4"},[t("h2",{class:"text-xl md:text-4xl font-semibold text-text-primary mb-1"}," Project Summary "),t("p",{class:"text-sm md:text-lg text-text-secondary"}," Review your project details before creation ")],-1)),t("div",K,[t("div",Q,[e[6]||(e[6]=t("h3",{class:"text-xl font-semibold mb-5.5"},"Project Overview",-1)),t("p",U,[e[0]||(e[0]=t("strong",{class:"text-text-secondary text-sm font-medium"},"Project Name",-1)),e[1]||(e[1]=t("br",null,null,-1)),p(r((c=(i=o.value)==null?void 0:i.variables)==null?void 0:c.title),1)]),t("p",X,[e[2]||(e[2]=t("strong",{class:"text-text-secondary text-sm font-medium"},"Project Type",-1)),e[3]||(e[3]=t("br",null,null,-1)),p(r((b=o.value)!=null&&b.variables?(f=o.value)==null?void 0:f.variables["workspace-type"]:"")+" Project ",1)]),(_=(v=o.value)==null?void 0:v.variables)!=null&&_.idea?(a(),n("p",Y,[e[4]||(e[4]=t("strong",{class:"text-text-secondary text-sm font-medium"},"Description",-1)),e[5]||(e[5]=t("br",null,null,-1)),p(" "+r((y=(g=o.value)==null?void 0:g.variables)==null?void 0:y.idea),1)])):d("",!0)]),x.value?(a(),n("div",Z,[e[7]||(e[7]=t("h3",{class:"text-lg font-semibold mb-4"},"Team Assignment",-1)),t("p",ee,r(D.value)+" / "+r(x.value),1),e[8]||(e[8]=t("p",{class:"text-sm text-text-secondary mb-4"},"Total team Assigned",-1)),t("ul",te,[(a(!0),n(P,null,B((k=o.value.variables)==null?void 0:k.roles,l=>(a(),n("li",se,[t("span",oe,[l.role_emoji?(a(),n("span",re,r(l.role_emoji),1)):d("",!0),p(" "+r(l.title),1)]),t("span",null,r(l.people.length)+" / "+r(l.max_num_people),1)]))),256))])])):d("",!0)]),(j=(w=o.value)==null?void 0:w.lanes)!=null&&j.length?(a(),n("div",ae,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold text-text-primary mb-4"}," Selected Project Lanes ",-1)),t("div",le,[(a(!0),n(P,null,B(o.value.lanes,l=>(a(),n("div",ne,[t("div",ie,[t("div",{class:"w-4 h-4 rounded-full aspect-square",style:I(`background:${l.variables["lane-color"]}`)},null,4),t("div",null,[t("p",ce,r(l.variables["lane-title"]),1),t("p",de,r(l.variables["lane-description"]),1)])])]))),256))])])):d("",!0)]))}}});export{ve as default};
