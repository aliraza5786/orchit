import{n as q,aZ as j,a_ as I,c as M,aX as v,p as N,d as z,r as F,e as Z,w as W,f as u,j as V,k as S,t as C,J as P,g as k,C as H,M as K,ab as R,h as G,V as U,o as E}from"./index-DepsCiCd.js";function J(t){return j()?(I(t),!0):!1}const O=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const X=Object.prototype.toString,Q=t=>X.call(t)==="[object Object]",w=()=>{},Y=ee();function ee(){var t,r;return O&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((r=window==null?void 0:window.navigator)==null?void 0:r.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function B(t){return Array.isArray(t)?t:[t]}function te(t,r,l){return q(t,r,{...l,immediate:!0})}const $=O?window:void 0;function T(t){var r;const l=v(t);return(r=l==null?void 0:l.$el)!=null?r:l}function L(...t){const r=[],l=()=>{r.forEach(i=>i()),r.length=0},d=(i,n,c,p)=>(i.addEventListener(n,c,p),()=>i.removeEventListener(n,c,p)),f=M(()=>{const i=B(v(t[0])).filter(n=>n!=null);return i.every(n=>typeof n!="string")?i:void 0}),h=te(()=>{var i,n;return[(n=(i=f.value)==null?void 0:i.map(c=>T(c)))!=null?n:[$].filter(c=>c!=null),B(v(f.value?t[1]:t[0])),B(N(f.value?t[2]:t[1])),v(f.value?t[3]:t[2])]},([i,n,c,p])=>{if(l(),!(i!=null&&i.length)||!(n!=null&&n.length)||!(c!=null&&c.length))return;const g=Q(p)?{...p}:p;r.push(...i.flatMap(b=>n.flatMap(o=>c.map(a=>d(b,o,a,g)))))},{flush:"post"}),x=()=>{h(),l()};return J(l),x}let D=!1;function ge(t,r,l={}){const{window:d=$,ignore:f=[],capture:h=!0,detectIframe:x=!1,controls:i=!1}=l;if(!d)return i?{stop:w,cancel:w,trigger:w}:w;if(Y&&!D){D=!0;const e={passive:!0};Array.from(d.document.body.children).forEach(s=>s.addEventListener("click",w,e)),d.document.documentElement.addEventListener("click",w,e)}let n=!0;const c=e=>v(f).some(s=>{if(typeof s=="string")return Array.from(d.document.querySelectorAll(s)).some(m=>m===e.target||e.composedPath().includes(m));{const m=T(s);return m&&(e.target===m||e.composedPath().includes(m))}});function p(e){const s=v(e);return s&&s.$.subTree.shapeFlag===16}function g(e,s){const m=v(e),A=m.$.subTree&&m.$.subTree.children;return A==null||!Array.isArray(A)?!1:A.some(_=>_.el===s.target||s.composedPath().includes(_.el))}const b=e=>{const s=T(t);if(e.target!=null&&!(!(s instanceof Element)&&p(t)&&g(t,e))&&!(!s||s===e.target||e.composedPath().includes(s))){if("detail"in e&&e.detail===0&&(n=!c(e)),!n){n=!0;return}r(e)}};let o=!1;const a=[L(d,"click",e=>{o||(o=!0,setTimeout(()=>{o=!1},0),b(e))},{passive:!0,capture:h}),L(d,"pointerdown",e=>{const s=T(t);n=!c(e)&&!!(s&&!e.composedPath().includes(s))},{passive:!0}),x&&L(d,"blur",e=>{setTimeout(()=>{var s;const m=T(t);((s=d.document.activeElement)==null?void 0:s.tagName)==="IFRAME"&&!(m!=null&&m.contains(d.document.activeElement))&&r(e)},0)},{passive:!0})].filter(Boolean),y=()=>a.forEach(e=>e());return i?{stop:y,cancel:()=>{n=!1},trigger:e=>{n=!0,b(e),n=!1}}:y}const oe={class:"p-5"},ne={class:"flex items-start gap-3"},se={class:"flex-1 min-w-0"},le={class:"text-base font-semibold text-text-primary"},ae={class:"mt-1 text-sm text-muted"},ie={key:0,class:"mt-4"},re={class:"text-xs text-muted"},ue={class:"font-medium text-body"},de=["placeholder"],ce={key:1,class:"mt-4"},me={class:"mt-6 flex justify-end gap-2"},fe=["disabled"],pe=["disabled"],he={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},be=z({__name:"ConfirmDeleteModal",props:{modelValue:{type:Boolean},title:{default:"Delete item"},itemLabel:{},itemName:{},message:{},confirmText:{default:"Delete"},cancelText:{default:"Cancel"},requireMatchText:{},loading:{type:Boolean,default:!1},size:{default:"md"},modalClass:{default:""}},emits:["update:modelValue","confirm","cancel"],setup(t,{emit:r}){const l=t,d=r,f=M({get:()=>l.modelValue,set:o=>d("update:modelValue",o)}),h=F(""),x=M(()=>l.message?l.message:`This action cannot be undone. This will permanently delete ${[l.itemLabel,l.itemName].filter(Boolean).join(" ")||"this item"}.`),i=o=>String(o??"").normalize("NFKC").toLowerCase().replace(/[\u200B-\u200D\u2060\u00AD\uFEFF]/g,"").replace(/\s+/g," ").trim(),n=M(()=>{if(!l.requireMatchText)return!0;const o=i(h.value),a=i(l.requireMatchText);return console.log({a:o,b:a,equal:o===a}),o===a}),c=M(()=>`!py-0 bg-card text-body ${l.modalClass}`.trim());function p(){h.value="",d("cancel"),f.value=!1}function g(){!n.value||l.loading||(d("confirm"),h.value="")}function b(){n.value&&g()}return(o,a)=>(E(),Z(U,{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=y=>f.value=y),size:o.size,modalClass:c.value},{default:W(()=>[u("div",oe,[u("div",ne,[a[4]||(a[4]=u("div",{class:"h-10 w-10 rounded-full bg-red-100 text-red-600 grid place-items-center dark:bg-red-500/15"},[u("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M9 3h6a1 1 0 0 1 1 1v1h4a1 1 0 1 1 0 2h-1.077l-1.27 12.03A3 3 0 0 1 14.67 22H9.33a3 3 0 0 1-2.982-2.97L5.077 7H4a1 1 0 1 1 0-2h4V4a1 1 0 0 1 1-1Zm2 0v1h2V3h-2ZM7.08 7l1.2 11.37A1 1 0 0 0 9.33 20h5.34a1 1 0 0 0 1.05-.88L16.92 7H7.08ZM10 9a1 1 0 0 1 1 1v7a1 1 0 1 1-2 0v-7a1 1 0 0 1 1-1Zm4 0a1 1 0 0 1 1 1v7a1 1 0 1 1-2 0v-7a1 1 0 0 1 1-1Z"})])],-1)),u("div",se,[u("h3",le,C(o.title),1),u("p",ae,[P(o.$slots,"message",{},()=>[k(C(x.value),1)])]),o.requireMatchText?(E(),V("div",ie,[u("label",re,[a[2]||(a[2]=k(" Type ")),u("span",ue,C(o.requireMatchText),1),a[3]||(a[3]=k(" to confirm "))]),H(u("input",{"onUpdate:modelValue":a[0]||(a[0]=y=>h.value=y),class:"mt-1 w-full border rounded-lg px-3 py-2 text-sm border-ui bg-card text-body outline-none",placeholder:o.requireMatchText,onKeyup:R(b,["enter"])},null,40,de),[[K,h.value]])])):S("",!0),o.$slots.extra?(E(),V("div",ce,[P(o.$slots,"extra")])):S("",!0)])]),u("div",me,[u("button",{type:"button",class:"px-3 py-2 cursor-pointer text-sm rounded-md border border-ui bg-card text-body hover:bg-surface-2 disabled:opacity-50",disabled:o.loading,onClick:G(p,["stop"])},C(o.cancelText),9,fe),u("button",{type:"button",class:"px-3 py-2 text-sm rounded-md text-white bg-red-600 hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:!n.value||o.loading,onClick:g},[o.loading?(E(),V("svg",he,a[5]||(a[5]=[u("circle",{cx:"12",cy:"12",r:"10","stroke-width":"4",class:"opacity-25"},null,-1),u("path",{d:"M4 12a8 8 0 0 1 8-8","stroke-width":"4",class:"opacity-75"},null,-1)]))):S("",!0),k(" "+C(o.confirmText),1)],8,pe)])])]),_:3},8,["modelValue","size","modalClass"]))}});export{be as _,ge as o};
