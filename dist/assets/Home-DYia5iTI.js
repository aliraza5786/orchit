import{d as T,c as W,j as u,F as I,y as P,f as o,a8 as F,t as $,L as M,m as B,o as i,I as O,r as h,ar as U,n as q,e as N,as as E,p as f,at as c,w as D,z as L,au as G,u as R,k as H,i as J,B as K,g as Q}from"./index-DepsCiCd.js";import{f as X}from"./FormatDate--XHqACrs.js";const Y=["aria-busy"],Z=["onClick","aria-label"],ee=["src"],te={class:"flex justify-between gap-2.5 border-t border-border bg-bg-card p-3.5 text-sm"},se={class:"flex items-start gap-2.5"},ae=["src"],oe={class:"min-w-0"},re={class:"truncate text-sm font-medium text-text-primary w-20"},ne={class:"truncate text-xs text-text-secondary"},le={class:"truncate text-sm font-medium text-text-primary"},ie={key:1,class:"grid grid-cols-1 gap-5 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4"},ce={key:2,class:"col-span-full flex items-center justify-center py-10 text-sm text-text-secondary"},de=T({__name:"ProjectGallery",props:{projects:{},loading:{type:Boolean,default:!1},skeletonCount:{default:8}},setup(S){const k=S,m=B(),_=W(()=>k.skeletonCount??8),b=e=>{var r;return((r=e==null?void 0:e.variables)==null?void 0:r.title)||(e==null?void 0:e.title)||"Untitled"};function w(e){if(!e)return"—";const r=new Date(e);return Number.isNaN(+r)?"—":new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}).format(r)}function j(e){let r=0;for(let n=0;n<((e==null?void 0:e.length)||0);n++)r=r*31+e.charCodeAt(n)|0;const t=Math.abs(r)%360;return`linear-gradient(135deg, hsl(${t} 55% 55%), hsl(${t} 60% 48%))`}function p(e){return j(b(e))}function C(e){var t;const r=(t=e==null?void 0:e.LatestTask)==null?void 0:t.job_id;r?localStorage.setItem("jobId",r):localStorage.removeItem("jobId"),m.push(`/workspace/peak/${e._id}/${r??""}`)}return(e,r)=>{var t;return!e.loading&&((t=e.projects)!=null&&t.length)?(i(),u("section",{key:0,class:"grid grid-cols-1 gap-5 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4","aria-busy":e.loading?"true":"false","aria-live":"polite"},[(i(!0),u(I,null,P(e.projects,(n,d)=>{var x;return i(),u("article",{key:n._id??d,class:"group relative overflow-hidden rounded-xl cursor-pointer border border-border/70 bg-bg-card shadow-sm outline-none transition-all duration-200 hover:shadow-md focus-within:ring-2 focus-within:ring-orange-300"},[o("button",{type:"button",class:"absolute inset-0 z-10",onClick:V=>C(n),"aria-label":`Open project ${b(n)}`},null,8,Z),o("div",{class:"flex h-39 items-center justify-center",style:F({background:p(n)})},[o("img",{src:n.logo,class:"aspect-square h-10 w-10 rounded-md object-cover",alt:"",loading:"lazy",decoding:"async"},null,8,ee)],4),o("div",te,[o("div",se,[o("img",{src:n.logo,class:"h-6 w-6 rounded-md object-cover",alt:"",loading:"lazy",decoding:"async"},null,8,ae),o("div",oe,[o("h3",re,$(b(n)),1),o("p",ne,$(w(n.created_at)),1)])]),o("div",null,[o("h3",le,$((x=n.owner)==null?void 0:x.name),1),r[0]||(r[0]=o("p",{class:"truncate text-xs text-text-secondary"},"Workspace Owner",-1))])])])}),128))],8,Y)):e.loading?(i(),u("section",ie,[(i(!0),u(I,null,P(_.value,n=>(i(),u("div",{key:"sk-"+n,class:"overflow-hidden rounded-xl border border-border/70 bg-bg-card shadow-sm",role:"status","aria-label":"Loading project"},r[1]||(r[1]=[M('<div class="h-39 bg-[linear-gradient(90deg,theme(colors.slate.200/20),theme(colors.slate.200/40),theme(colors.slate.200/20))] bg-[length:200%_100%] animate-[shimmer_1.1s_ease_infinite]" data-v-518c688c></div><div class="flex items-start gap-2.5 border-t border-border p-3.5 text-sm" data-v-518c688c><div class="h-6 w-6 rounded-md bg-surface" data-v-518c688c></div><div class="flex w-full flex-col gap-2" data-v-518c688c><div class="h-3 w-32 rounded bg-surface" data-v-518c688c></div><div class="h-2.5 w-20 rounded bg-surface" data-v-518c688c></div></div></div>',2)])))),128))])):(i(),u("div",ce," No projects yet "))}}}),ue=O(de,[["__scopeId","data-v-518c688c"]]),me={class:"flex -space-x-2"},ge=T({__name:"WorkspaceListTable",setup(S){const k=B(),m=new Map,_=a=>(m.has(a)||m.set(a,X(a)),m.get(a)),b=a=>{var g;const s=a.row,l=(g=s==null?void 0:s.LatestTask)==null?void 0:g.job_id;l?localStorage.setItem("jobId",l):localStorage.removeItem("jobId"),k.push(`/workspace/peak/${s==null?void 0:s._id}/${l||""}`)},r=[{key:"variables",label:"Project",render:({row:a,value:s})=>c("div",{class:"flex items-center gap-2"},[a.logo?c("img",{src:a.logo,alt:(s==null?void 0:s.title)||"Project",class:"h-8 w-8 bg-bg-card rounded-full object-cover",loading:"lazy",decoding:"async"}):c("div",{class:"h-8 w-8 rounded-full bg-bg-card"}),c("span",(s==null?void 0:s.title)||"Untitled")])},{key:"variables",label:"Project type",render:({value:a})=>c("span",{class:"capitalize"},(a==null?void 0:a["workspace-type"])||"-")},{key:"People",label:"People",render:({value:a})=>c(G,{avatars:a||[],image:!0,maxVisible:3})},{key:"created_at",label:"Start Date",render:({value:a})=>c("span",_(a))},{key:"admin",label:"Workspace Owner",render:({row:a})=>{const s=a==null?void 0:a.owner;if(!s)return c("span","-");const l=v=>v.split(" ").map(y=>y[0]).join("").toUpperCase(),g=v=>{let y=0;for(let z=0;z<v.length;z++)y=v.charCodeAt(z)+((y<<5)-y);return`hsl(${Math.abs(y)%360}, 60%, 50%)`};return c("div",{class:"flex items-center gap-2"},[s.profile_img?c("img",{src:s.profile_img,alt:s.name,class:"h-6 w-6 rounded-full object-cover",loading:"lazy",decoding:"async"}):c("div",{class:"h-8 w-8 border-primary border-2 shadow-md flex items-center justify-center rounded-full text-white text-xs font-medium",style:{backgroundColor:g(s.name)}},l(s.name)),c("span",s.name)])}}],t=h(1),n=h(10),{data:d,isPending:x}=U(t,n),V=W(()=>{var a;return((a=d.value)==null?void 0:a.workspaces)??[]}),A=h(0);return q(d,()=>{var a,s,l,g;(s=(a=d.value)==null?void 0:a.pagination)!=null&&s.totalCount&&(A.value=(g=(l=d.value)==null?void 0:l.pagination)==null?void 0:g.totalCount)}),(a,s)=>(i(),N(E,{columns:r,rows:V.value,loading:f(x),total:A.value,page:t.value,"onUpdate:page":s[0]||(s[0]=l=>t.value=l),pageSize:n.value,"onUpdate:pageSize":s[1]||(s[1]=l=>n.value=l),pageSizes:[10,20,50,100],onRowClick:b},{status:D(({row:l})=>[o("span",{class:L(["px-3 py-1 rounded-full text-xs font-medium",{"bg-blue-100 text-blue-600":l.status==="In progress","bg-red-100 text-red-600":l.status==="Live","bg-green-100 text-green-600":l.status==="Done"}])},$(l.status),3)]),team:D(({row:l})=>[o("div",me,[(i(!0),u(I,null,P(l.Roles,(g,v)=>(i(),u("span",{key:v,class:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-xs"},$(g),1))),128))])]),_:1},8,["rows","loading","total","page","pageSize"]))}}),pe={class:"w-full bg-bg-body text-text-primary"},fe={class:"mx-auto w-full max-w-[1440px] px-5 py-10 md:px-15 md:py-20"},be={class:"flex flex-wrap items-center justify-between gap-5"},xe={class:"flex items-center gap-3"},ve={class:"mt-21 mb-8 flex items-center justify-between"},ye={class:"flex items-center gap-3"},he={key:0,class:"flex items-center justify-center py-10 text-sm text-text-secondary"},je=T({__name:"Home",setup(S){const k=B(),m=R(),_=h(1),b=h(10),{data:w,isPending:j}=U(_,b),p=h("list"),C=r=>{p.value=r},e=W(()=>w.value.length===0);return(r,t)=>{var n;return i(),u("div",pe,[o("div",fe,[o("div",be,[t[4]||(t[4]=o("div",{class:"flex flex-col gap-1.5 max-md:gap-1"},[o("h1",{class:"text-2xl font-medium"},"Welcome to Orchit AI!"),o("p",{class:"text-sm text-text-secondary"},"Create, organize, and collaborate seamlessly.")],-1)),o("div",xe,[o("div",{to:"/create-workspace",onClick:t[0]||(t[0]=()=>{var d,x;((d=f(m).limits.features[1])==null?void 0:d.usage.current)>=((x=f(m).limits.features[1])==null?void 0:x.limits.limit)?f(m).setLimitExccedModal(!0):f(k).push("/create-workspace")})},[J(K,{variant:"primary"},{default:D(()=>t[3]||(t[3]=[Q("Create a workspace")])),_:1,__:[3]})])])]),o("div",ve,[t[7]||(t[7]=o("h2",{class:"text-xl font-medium"},"All Workspaces",-1)),o("div",ye,[o("button",{class:L(["aspect-square w-8 cursor-pointer rounded-md p-1",p.value==="list"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),onClick:t[1]||(t[1]=d=>C("list")),title:"List view"},t[5]||(t[5]=[o("i",{class:"fa-solid fa-align-left"},null,-1)]),2),o("button",{class:L(["aspect-square w-8 cursor-pointer rounded-md p-1",p.value==="gallery"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),onClick:t[2]||(t[2]=d=>C("gallery")),title:"Gallery view"},t[6]||(t[6]=[o("i",{class:"fa-solid fa-grid-2"},null,-1)]),2)])]),!f(j)&&e.value?(i(),u("div",he," No Workspace ")):p.value==="list"?(i(),N(ge,{key:1})):p.value==="gallery"?(i(),N(ue,{key:2,projects:(n=f(w))==null?void 0:n.workspaces,loading:f(j)},null,8,["projects","loading"])):H("",!0)])])}}});export{je as default};
