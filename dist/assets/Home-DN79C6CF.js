import{d as N,c as S,i as c,F as C,x as z,e as o,S as M,t as j,M as U,l as D,o as i,_ as A,j as B,y as w,r as $,a0 as L,m as G,b as I,T as q,n as v,a1 as k,w as P,h as E,B as F,f as R}from"./index-By-MWQyp.js";import{f as O}from"./FormatDate--XHqACrs.js";import{g as H}from"./index-BBhniCjd.js";import{u as J}from"./workspace-jQGMSF7j.js";const K=["aria-busy"],Q=["onClick","aria-label"],X=["src"],Y={class:"flex items-start gap-2.5 border-t border-border bg-bg-card p-3.5 text-sm"},Z=["src"],ee={class:"min-w-0"},te={class:"truncate text-sm font-medium text-text-primary"},se={class:"truncate text-xs text-text-secondary"},ae={key:1,class:"grid grid-cols-1 gap-5 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4"},oe={key:2,class:"col-span-full flex items-center justify-center py-10 text-sm text-text-secondary"},re=N({__name:"ProjectGallery",props:{projects:{},loading:{type:Boolean,default:!1},skeletonCount:{default:8}},setup(p){const x=p,g=D(),y=S(()=>x.skeletonCount??8),m=e=>{var t;return((t=e==null?void 0:e.variables)==null?void 0:t.title)||(e==null?void 0:e.title)||"Untitled"};function u(e){if(!e)return"—";const t=new Date(e);return Number.isNaN(+t)?"—":new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}).format(t)}function b(e){let t=0;for(let r=0;r<((e==null?void 0:e.length)||0);r++)t=t*31+e.charCodeAt(r)|0;const s=Math.abs(t)%360;return`linear-gradient(135deg, hsl(${s} 55% 55%), hsl(${s} 60% 48%))`}function a(e){return b(m(e))}function f(e){var s;const t=(s=e==null?void 0:e.LatestTask)==null?void 0:s.job_id;t?localStorage.setItem("jobId",t):localStorage.removeItem("jobId"),g.push(`/workspace/peak/${e._id}/${t??""}`)}return(e,t)=>{var s;return!e.loading&&((s=e.projects)!=null&&s.length)?(i(),c("section",{key:0,class:"grid grid-cols-1 gap-5 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4","aria-busy":e.loading?"true":"false","aria-live":"polite"},[(i(!0),c(C,null,z(e.projects,(r,_)=>(i(),c("article",{key:r._id??_,class:"group relative overflow-hidden rounded-xl cursor-pointer border border-border/70 bg-bg-card shadow-sm outline-none transition-all duration-200 hover:shadow-md focus-within:ring-2 focus-within:ring-orange-300"},[o("button",{type:"button",class:"absolute inset-0 z-10",onClick:T=>f(r),"aria-label":`Open project ${m(r)}`},null,8,Q),o("div",{class:"flex h-39 items-center justify-center",style:M({background:a(r)})},[o("img",{src:r.logo,class:"aspect-square h-10 w-10 rounded-md object-cover",alt:"",loading:"lazy",decoding:"async"},null,8,X)],4),o("div",Y,[o("img",{src:r.logo,class:"h-6 w-6 rounded-md object-cover",alt:"",loading:"lazy",decoding:"async"},null,8,Z),o("div",ee,[o("h3",te,j(m(r)),1),o("p",se,j(u(r.lastUpdated)),1)])])]))),128))],8,K)):e.loading?(i(),c("section",ae,[(i(!0),c(C,null,z(y.value,r=>(i(),c("div",{key:"sk-"+r,class:"overflow-hidden rounded-xl border border-border/70 bg-bg-card shadow-sm",role:"status","aria-label":"Loading project"},t[0]||(t[0]=[U('<div class="h-39 bg-[linear-gradient(90deg,theme(colors.slate.200/20),theme(colors.slate.200/40),theme(colors.slate.200/20))] bg-[length:200%_100%] animate-[shimmer_1.1s_ease_infinite]" data-v-51db3a46></div><div class="flex items-start gap-2.5 border-t border-border p-3.5 text-sm" data-v-51db3a46><div class="h-6 w-6 rounded-md bg-surface" data-v-51db3a46></div><div class="flex w-full flex-col gap-2" data-v-51db3a46><div class="h-3 w-32 rounded bg-surface" data-v-51db3a46></div><div class="h-2.5 w-20 rounded bg-surface" data-v-51db3a46></div></div></div>',2)])))),128))])):(i(),c("div",oe," No projects yet "))}}}),ne=A(re,[["__scopeId","data-v-51db3a46"]]),le={class:"flex items-center"},ie=["src","alt","onClick"],de=["onClick","alt"],ce={__name:"Collaborators",props:{avatars:{type:Array,default:()=>[]},maxVisible:{type:Number,default:4},size:{type:String,default:"8"},image:{type:Boolean,default:!0}},setup(p){const x=p,g=new Map,y=u=>(g.has(u)||g.set(u,H(u)),g.get(u)),m=S(()=>{const u=x.avatars.length,b=x.maxVisible,a=x.avatars.slice(0,b),f=u>b?u-b:0;let e="-space-x-2";const t=a.length;return t===3?e="-space-x-3":t===4?e="-space-x-4":t===5?e="-space-x-2.5":t>5&&(e="-space-x-5"),{visible:a,extra:f,overlap:e}});return(u,b)=>(i(),c("div",le,[o("div",{class:w(["flex",m.value.overlap])},[p.image?(i(!0),c(C,{key:0},z(m.value.visible,(a,f)=>(i(),c("img",{key:f,src:a.image,alt:a.name,loading:"lazy",decoding:"async",onClick:e=>{var t;return(t=a.onclick)==null?void 0:t.call(a)},class:w(`w-${p.size} h-${p.size} rounded-full border-2 border-white shadow-md object-cover cursor-pointer`)},null,10,ie))),128)):(i(!0),c(C,{key:1},z(m.value.visible,(a,f)=>(i(),c("div",{key:`IMG-${f}`,onClick:e=>{var t;return(t=a.onclick)==null?void 0:t.call(a)},alt:a.name,class:w(`w-${p.size} h-${p.size} rounded-full text-text-primary flex justify-center items-center bg-amber-600 border-2 border-border shadow-md object-cover cursor-pointer`)},j(y(a==null?void 0:a.name)),11,de))),128)),m.value.extra>0?(i(),c("div",{key:2,class:w(["flex items-center justify-center text-xs font-medium bg-gray-300 text-text-secondary border-2 border-white shadow-md rounded-full",`w-${p.size} h-${p.size}`])}," +"+j(m.value.extra),3)):B("",!0)],2)]))}},ue={class:"flex -space-x-2"},ge=N({__name:"WorkspaceListTable",setup(p){const x=D(),g=new Map,y=n=>(g.has(n)||g.set(n,O(n)),g.get(n)),m=n=>{var h;const l=n.row,d=(h=l==null?void 0:l.LatestTask)==null?void 0:h.job_id;d?localStorage.setItem("jobId",d):localStorage.removeItem("jobId"),x.push(`/workspace/peak/${l==null?void 0:l._id}/${d||""}`)},e=[{key:"variables",label:"Project",render:({row:n,value:l})=>k("div",{class:"flex items-center gap-2"},[n.logo?k("img",{src:n.logo,alt:(l==null?void 0:l.title)||"Project",class:"h-8 w-8 bg-bg-card rounded-full",loading:"lazy",decoding:"async"}):k("div",{class:"h-8 w-8 rounded-full bg-bg-card"}),k("span",(l==null?void 0:l.title)||"Untitled")])},{key:"variables",label:"Project type",render:({value:n})=>k("span",{class:"capitalize"},(n==null?void 0:n["workspace-type"])||"-")},{key:"People",label:"People",render:({value:n})=>k(ce,{avatars:n||[],image:!1,maxVisible:3})},{key:"created_at",label:"Start Date",render:({value:n})=>k("span",y(n))}],t=$(1),s=$(10),{data:r,isPending:_}=L(t,s),T=S(()=>{var n;return((n=r.value)==null?void 0:n.workspaces)??[]}),V=$(0);return G(r,()=>{var n,l,d,h;(l=(n=r.value)==null?void 0:n.pagination)!=null&&l.totalCount&&(V.value=(h=(d=r.value)==null?void 0:d.pagination)==null?void 0:h.totalCount)}),(n,l)=>(i(),I(q,{columns:e,rows:T.value,loading:v(_),total:V.value,page:t.value,"onUpdate:page":l[0]||(l[0]=d=>t.value=d),pageSize:s.value,"onUpdate:pageSize":l[1]||(l[1]=d=>s.value=d),pageSizes:[10,20,50,100],onRowClick:m},{status:P(({row:d})=>[o("span",{class:w(["px-3 py-1 rounded-full text-xs font-medium",{"bg-blue-100 text-blue-600":d.status==="In progress","bg-red-100 text-red-600":d.status==="Live","bg-green-100 text-green-600":d.status==="Done"}])},j(d.status),3)]),team:P(({row:d})=>[o("div",ue,[(i(!0),c(C,null,z(d.Roles,(h,W)=>(i(),c("span",{key:W,class:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-xs"},j(h),1))),128))])]),_:1},8,["rows","loading","total","page","pageSize"]))}}),me={class:"w-full bg-bg-body text-text-primary"},pe={class:"mx-auto w-full max-w-[1440px] px-5 py-10 md:px-15 md:py-20"},fe={class:"flex flex-wrap items-center justify-between gap-5"},be={class:"flex items-center gap-3"},xe={class:"mt-21 mb-8 flex items-center justify-between"},ve={class:"flex items-center gap-3"},ye={key:0,class:"flex items-center justify-center py-10 text-sm text-text-secondary"},$e=N({__name:"Home",setup(p){const x=D(),g=J(),y=$(1),m=$(10),{data:u,isPending:b}=L(y,m),a=$("list"),f=t=>{a.value=t},e=S(()=>u.value.length===0);return(t,s)=>(i(),c("div",me,[o("div",pe,[o("div",fe,[s[4]||(s[4]=o("div",{class:"flex flex-col gap-1.5 max-md:gap-1"},[o("h1",{class:"text-2xl font-medium"},"Welcome to Orchit AI!"),o("p",{class:"text-sm text-text-secondary"},"Create, organize, and collaborate seamlessly.")],-1)),o("div",be,[o("div",{to:"/create-workspace",onClick:s[0]||(s[0]=()=>{var r,_;((r=v(g).limits.features[1])==null?void 0:r.usage.limit)==((_=v(g).limits.features[1])==null?void 0:_.limits.limit)?v(g).setLimitExccedModal(!0):v(x).push("/create-workspace")})},[E(F,{variant:"primary"},{default:P(()=>s[3]||(s[3]=[R("Create a workspace")])),_:1,__:[3]})])])]),o("div",xe,[s[7]||(s[7]=o("h2",{class:"text-xl font-medium"},"All Workspaces",-1)),o("div",ve,[o("button",{class:w(["aspect-square w-8 cursor-pointer rounded-md p-1",a.value==="list"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),onClick:s[1]||(s[1]=r=>f("list")),title:"List view"},s[5]||(s[5]=[o("i",{class:"fa-solid fa-align-left"},null,-1)]),2),o("button",{class:w(["aspect-square w-8 cursor-pointer rounded-md p-1",a.value==="gallery"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),onClick:s[2]||(s[2]=r=>f("gallery")),title:"Gallery view"},s[6]||(s[6]=[o("i",{class:"fa-solid fa-grid-2"},null,-1)]),2)])]),!v(b)&&e.value?(i(),c("div",ye," No Workspace ")):a.value==="list"?(i(),I(ge,{key:1})):a.value==="gallery"?(i(),I(ne,{key:2,projects:v(u),loading:v(b)},null,8,["projects","loading"])):B("",!0)])]))}});export{$e as default};
