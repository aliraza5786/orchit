import{bo as M,bp as I,bq as Q,br as ze,bs as d,bt as T,bu as oS,bv as Ws,bw as Gg,bx as Nt,by as Ar,bz as C,bA as _,bB as S,bC as Ft,bD as _i,bE as lS,bF as J,bG as V,bH as hi,bI as je,bJ as X,bK as ce,bL as H,bM as ae,bN as At,bO as z,bP as oe,bQ as $g,bR as $n,bS as Ap,bT as $,bU as R,bV as hS,bW as wr,bX as ii,bY as Ci,bZ as Tt,b_ as de,b$ as xr,c0 as cS,c1 as rh,c2 as ol,c3 as Kt,c4 as wi,c5 as Xr,c6 as K,c7 as Se,c8 as gt,c9 as uS,ca as Ns,cb as xp,cc as yn,cd as dS,ce as pS,cf as fS,cg as ad,ch as od,ci as ld,cj as ve,ck as st,cl as Y,cm as rn,cn as ut,co as vS,cp as dn,cq as yt,cr as mS,cs as gS,ct as yS,cu as Lt,cv as Vt,d as Ks,K as xh,n as Qa,r as nt,c as Bt,j as me,f as be,F as Ki,y as Kr,k as Ls,h as Dn,g as Sl,o as fe,ag as Tr,t as Oi,D as hd,L as ou,P as cd,e as ud,b1 as bS,al as dd,ac as Wa,v as Kg,ax as Qg,z as Xg,ah as El,aA as pd,W as SS,M as ES,aT as CS,p as Sr,ad as kp,Q as Ip,i as Qi,J as Zg,w as Cl,l as kh,cw as hr,cx as lu,cy as wS,cz as fd,cA as bn,cB as Mp,cC as vd,cD as Xi,cE as Jg,cF as TS,cG as DS,bj as AS}from"./index-DjjQuEnm.js";var xS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),oi=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},Ih="e-check",Op="e-checkbox-disabled",Kn="e-frame",Mh="e-stop",Oh="e-label",Rh="e-ripple-container",Nh="e-rtl",Lh="e-checkbox-wrapper",kS=["title","class","style","disabled","readonly","name","value","id","tabindex","aria-label","required"],IS=function(n){xS(i,n);function i(e,t){var r=n.call(this,e,t)||this;return r.isFocused=!1,r.isMouseClick=!1,r.clickTriggered=!1,r.validCheck=!0,r.type="checkbox",r}return i.prototype.changeState=function(e,t,r){var s=this.getWrapper(),a=null;s&&(a=s.getElementsByClassName(Kn)[0]),e==="check"?(a&&(a.classList.remove(Mh),a.classList.add(Ih)),this.element.checked=!0,(this.element.required||M(this.element,"form")&&M(this.element,"form").classList.contains("e-formvalidator"))&&this.validCheck&&!t&&r?(this.element.checked=!1,this.validCheck=!1):(this.element.required||M(this.element,"form")&&M(this.element,"form").classList.contains("e-formvalidator"))&&(this.validCheck=!0)):e==="uncheck"?(a&&I([a],[Ih,Mh]),this.element.checked=!1,(this.element.required||M(this.element,"form")&&M(this.element,"form").classList.contains("e-formvalidator"))&&this.validCheck&&!t&&r?(this.element.checked=!0,this.validCheck=!1):(this.element.required||M(this.element,"form")&&M(this.element,"form").classList.contains("e-formvalidator"))&&(this.validCheck=!0)):(a&&(a.classList.remove(Ih),a.classList.add(Mh)),this.element.indeterminate=!0,this.indeterminate=!0)},i.prototype.clickHandler=function(e){if(e.target.tagName==="INPUT"&&this.clickTriggered){this.changeState(this.checked?"check":"uncheck"),this.clickTriggered=!1;return}(e.target.tagName==="SPAN"||e.target.tagName==="LABEL"||M(e.target,".e-label"))&&(this.clickTriggered=!0),this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck",!1,!0),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck",!1,!0),this.checked=!1):(this.changeState("check",!1,!0),this.checked=!0);var t={checked:this.updateVueArrayModel(!1),event:e};this.trigger("change",t),e.stopPropagation()},i.prototype.destroy=function(){var e=this,t=this.getWrapper();n.prototype.destroy.call(this),this.wrapper&&(t=this.wrapper,this.disabled||this.unWireEvents(),this.tagName==="INPUT"?(this.getWrapper()&&t.parentNode&&t.parentNode.insertBefore(this.element,t),Q(t),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(function(r){e.element.removeAttribute(r)})):(["class"].forEach(function(r){t.removeAttribute(r)}),t.innerHTML="",this.element=t,this.refreshing&&(["e-control","e-checkbox","e-lib"].forEach(function(r){e.element.classList.add(r)}),ze("ej2_instances",[this],this.element))))},i.prototype.focusHandler=function(){this.isFocused=!0},i.prototype.focusOutHandler=function(){var e=this.getWrapper();e&&e.classList.remove("e-focus"),this.isFocused=!1},i.prototype.getModuleName=function(){return"checkbox"},i.prototype.getPersistData=function(){return this.addOnPersist(["checked","indeterminate"])},i.prototype.getWrapper=function(){return this.element&&this.element.parentElement?this.element.parentElement.parentElement:null},i.prototype.getLabel=function(){return this.element?this.element.parentElement:null},i.prototype.initialize=function(){d(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.element.setAttribute("tabindex","0"),this.value&&(this.element.setAttribute("value",this.value),this.isVue&&typeof this.value=="boolean"&&this.value===!0&&this.setProperties({checked:!0},!0)),this.checked&&this.changeState("check",!0),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()},i.prototype.initWrapper=function(){var e=this.element.parentElement;e.classList.contains(Lh)||(e=this.createElement("div",{className:Lh}),this.element.parentNode&&this.element.parentNode.insertBefore(e,this.element));var t=this.createElement("label",{attrs:{for:this.htmlAttributes.id?this.htmlAttributes.id:this.element.id}}),r=this.createElement("span",{className:"e-icons "+Kn});e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add(Nh),this.cssClass&&T([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),e.appendChild(t),t.appendChild(this.element),oS(this,t),t.appendChild(r),this.label&&this.setText(this.label)},i.prototype.keyUpHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},i.prototype.labelMouseDownHandler=function(e){this.isMouseClick=!0;var t=this.getWrapper().getElementsByClassName(Rh)[0];Ws(e,t)},i.prototype.labelMouseLeaveHandler=function(e){var t=this.getLabel().getElementsByClassName(Rh)[0];if(t){for(var r=t.querySelectorAll(".e-ripple-element"),s=r.length-1;s>0;s--)t.removeChild(t.childNodes[s]);Ws(e,t)}},i.prototype.labelMouseUpHandler=function(e){this.isMouseClick=!0;var t=this.getWrapper().getElementsByClassName(Rh)[0];if(t){for(var r=t.querySelectorAll(".e-ripple-element"),s=0;s<r.length-1;s++)t.removeChild(t.childNodes[s]);Ws(e,t)}},i.prototype.onPropertyChanged=function(e,t){for(var r=this.getWrapper(),s=0,a=Object.keys(e);s<a.length;s++){var o=a[s];switch(o){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(e.checked?"check":"uncheck");break;case"indeterminate":e.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":e.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,r.classList.remove(Op),r.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":t.cssClass&&I([r],t.cssClass.split(/\s+/).filter(function(c){return c.length>0})),e.cssClass&&T([r],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?r.classList.add(Nh):r.classList.remove(Nh);break;case"label":this.setText(e.label);break;case"labelPosition":{var l=r.getElementsByClassName(Oh)[0],h=r.getElementsByTagName("label")[0];Q(l),e.labelPosition==="After"?h.appendChild(l):h.insertBefore(l,r.getElementsByClassName(Kn)[0]);break}case"name":this.element.setAttribute("name",e.name);break;case"value":if(this.isVue&&typeof e.value=="object")break;this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper();break}}},i.prototype.preRender=function(){var e=this.element;this.tagName=this.element.tagName,e=Gg(this.createElement,"EJS-CHECKBOX","checkbox",e,Lh,"checkbox"),this.element.hasAttribute("id")&&this.isAngular&&this.element.tagName==="EJS-CHECKBOX"&&(e.id=this.element.id,this.element.removeAttribute("id")),this.element=e,this.element.getAttribute("type")!=="checkbox"&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=Nt("e-"+this.getModuleName()))},i.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.updateVueArrayModel(!0),this.renderComplete(),this.wrapper=this.getWrapper()},i.prototype.setDisabled=function(){var e=this.getWrapper();this.element.disabled=!0,e.classList.add(Op),e.setAttribute("aria-disabled","true")},i.prototype.setText=function(e){var t=this.getWrapper();if(t){var r=t.getElementsByClassName(Oh)[0];if(r)r.innerHTML=this.enableHtmlSanitizer?Ar.sanitize(e):e;else{e=this.enableHtmlSanitizer?Ar.sanitize(e):e,r=this.createElement("span",{className:Oh,innerHTML:e});var s=t.getElementsByTagName("label")[0];this.labelPosition==="Before"?s.insertBefore(r,t.getElementsByClassName(Kn)[0]):s.appendChild(r)}}},i.prototype.changeHandler=function(e){e.stopPropagation()},i.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue},i.prototype.unWireEvents=function(){var e=this.wrapper;if(C.remove(this.element,"keyup",this.keyUpHandler),C.remove(this.element,"focus",this.focusHandler),C.remove(this.element,"focusout",this.focusOutHandler),e){C.remove(e,"click",this.clickHandler);var t=e.getElementsByTagName("label")[0];t&&(C.remove(t,"mousedown",this.labelMouseDownHandler),C.remove(t,"mouseup",this.labelMouseUpHandler),C.remove(t,"mouseleave",this.labelMouseLeaveHandler))}var r=M(this.element,"form");r&&C.remove(r,"reset",this.formResetHandler),this.tagName==="EJS-CHECKBOX"&&C.remove(this.element,"change",this.changeHandler)},i.prototype.wireEvents=function(){var e=this.getWrapper();C.add(e,"click",this.clickHandler,this),C.add(this.element,"keyup",this.keyUpHandler,this),C.add(this.element,"focus",this.focusHandler,this),C.add(this.element,"focusout",this.focusOutHandler,this);var t=e.getElementsByTagName("label")[0];C.add(t,"mousedown",this.labelMouseDownHandler,this),C.add(t,"mouseup",this.labelMouseUpHandler,this),C.add(t,"mouseleave",this.labelMouseLeaveHandler,this);var r=M(this.element,"form");r&&C.add(r,"reset",this.formResetHandler,this),this.tagName==="EJS-CHECKBOX"&&C.add(this.element,"change",this.changeHandler,this)},i.prototype.updateVueArrayModel=function(e){if(this.isVue&&typeof this.value=="object"){var t=this.element.value;if(t&&this.value)if(e)for(var r=0;r<this.value.length;r++)t===this.value[r]&&(this.changeState("check"),this.setProperties({checked:!0},!0));else{var s=this.value.indexOf(t);return this.checked?s<0&&this.value.push(t):s>-1&&this.value.splice(s,1),this.value}}return this.validCheck?this.element.checked:!this.element.checked},i.prototype.updateHtmlAttributeToWrapper=function(){if(!d(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var r=t[e],s=this.getWrapper();if(kS.indexOf(r)>-1)if(r==="class")T([s],this.htmlAttributes[""+r].split(" "));else if(r==="title")s.setAttribute(r,this.htmlAttributes[""+r]);else if(r==="style"){var a=this.getWrapper().getElementsByClassName(Kn)[0];a.setAttribute(r,this.htmlAttributes[""+r])}else r==="disabled"?(this.htmlAttributes[""+r]==="true"&&this.setDisabled(),this.element.setAttribute(r,this.htmlAttributes[""+r])):this.element.setAttribute(r,this.htmlAttributes[""+r]);else s.setAttribute(r,this.htmlAttributes[""+r])}},i.prototype.click=function(){this.element.click()},i.prototype.focusIn=function(){this.element.focus()},oi([_()],i.prototype,"change",void 0),oi([_()],i.prototype,"created",void 0),oi([S(!1)],i.prototype,"checked",void 0),oi([S("")],i.prototype,"cssClass",void 0),oi([S(!1)],i.prototype,"disabled",void 0),oi([S(!1)],i.prototype,"indeterminate",void 0),oi([S("")],i.prototype,"label",void 0),oi([S("After")],i.prototype,"labelPosition",void 0),oi([S("")],i.prototype,"name",void 0),oi([S("")],i.prototype,"value",void 0),oi([S(!0)],i.prototype,"enableHtmlSanitizer",void 0),oi([S({})],i.prototype,"htmlAttributes",void 0),i=oi([Ft],i),i}(_i),MS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),vi=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},Vh="e-label",Ph="e-ripple-container",Hh="e-rtl",Bh="e-radio-wrapper",OS=["title","class","style","disabled","readonly","name","value","id"],Rp=function(n){MS(i,n);function i(t,r){var s=n.call(this,t,r)||this;return s.isFocused=!1,s.type="radio",s}e=i,i.prototype.changeHandler=function(t){this.checked=!0,this.dataBind();var r=this.element.getAttribute("value");r=this.isVue&&r?this.element.value:this.value;var s=typeof this.value;this.isVue&&s==="boolean"&&(r=r==="true"),this.trigger("change",{value:r,event:t}),this.isAngular&&t.stopPropagation()},i.prototype.updateChange=function(){for(var t,r,s=this.getRadioGroup(),a=0;a<s.length;a++)t=s[a],t!==this.element&&(r=lS(t,e),r.checked=!1,this.tagName==="EJS-RADIOBUTTON"&&(r.angularValue=this.value))},i.prototype.destroy=function(){var t=this,r=this.wrapper;n.prototype.destroy.call(this),r&&(this.disabled||this.unWireEvents(),this.tagName==="INPUT"?(r.parentNode&&r.parentNode.insertBefore(this.element,r),Q(r),this.element.checked=!1,["name","value","disabled"].forEach(function(s){t.element.removeAttribute(s)})):(["role","aria-checked","class"].forEach(function(s){r.removeAttribute(s)}),r.innerHTML="",this.element=this.wrapper,this.refreshing&&(["e-control","e-radio","e-lib"].forEach(function(s){t.element.classList.add(s)}),ze("ej2_instances",[this],this.element))))},i.prototype.focusHandler=function(){this.isFocused=!0},i.prototype.focusOutHandler=function(){var t=this.getLabel();t&&t.classList.remove("e-focus")},i.prototype.getModuleName=function(){return"radio"},i.prototype.getSelectedValue=function(){for(var t,r=this.getRadioGroup(),s=0,a=r.length;s<a;s++)if(t=r[s],t.checked)return t.value;return""},i.prototype.getRadioGroup=function(){return document.querySelectorAll('input.e-radio[name="'+this.element.getAttribute("name")+'"]')},i.prototype.getPersistData=function(){return this.addOnPersist(["checked"])},i.prototype.getWrapper=function(){return this.element.parentElement?this.element.parentElement:null},i.prototype.getLabel=function(){return this.element.nextElementSibling?this.element.nextElementSibling:null},i.prototype.initialize=function(){d(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.initWrapper(),this.updateHtmlAttribute(),this.name&&this.element.setAttribute("name",this.name);var t=this.element.getAttribute("value"),r=typeof this.value;this.isVue&&r==="boolean"&&(t=t==="true"),(this.isVue?this.value&&r!=="boolean"&&!t:this.value)&&this.element.setAttribute("value",this.value),this.checked&&(this.element.checked=!0),this.disabled&&this.setDisabled()},i.prototype.initWrapper=function(){var t=this.element.parentElement;t.classList.contains(Bh)||(t=this.createElement("div",{className:Bh}),this.element.parentNode&&this.element.parentNode.insertBefore(t,this.element));var r=this.createElement("label",{attrs:{for:this.element.id}});t.appendChild(this.element),t.appendChild(r),t.classList.add("e-wrapper"),this.enableRtl&&r.classList.add(Hh),this.cssClass&&T([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.label&&this.setText(this.label)},i.prototype.keyUpHandler=function(){this.isFocused&&this.getLabel().classList.add("e-focus")},i.prototype.labelMouseDownHandler=function(t){var r=this.getLabel().getElementsByClassName(Ph)[0];Ws(t,r)},i.prototype.labelMouseLeaveHandler=function(t){var r=this.getLabel().getElementsByClassName(Ph)[0];if(r){for(var s=r.querySelectorAll(".e-ripple-element"),a=s.length-1;a>0;a--)r.removeChild(r.childNodes[a]);Ws(t,r)}},i.prototype.labelMouseUpHandler=function(t){var r=this.getLabel().getElementsByClassName(Ph)[0];if(r){for(var s=r.querySelectorAll(".e-ripple-element"),a=s.length-1;a>0;a--)r.removeChild(r.childNodes[a]);Ws(t,r)}},i.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.initialCheckedValue&&J(this.element,{checked:"true"})},i.prototype.onPropertyChanged=function(t,r){for(var s=this.getWrapper(),a=this.getLabel(),o=0,l=Object.keys(t);o<l.length;o++){var h=l[o];switch(h){case"checked":t.checked&&this.updateChange(),this.element.checked=t.checked;break;case"disabled":t.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,this.wireEvents());break;case"cssClass":r.cssClass&&I([s],r.cssClass.split(/\s+/).filter(function(u){return u.length>0})),t.cssClass&&T([s],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":t.enableRtl?a.classList.add(Hh):a.classList.remove(Hh);break;case"label":this.setText(t.label);break;case"labelPosition":t.labelPosition==="Before"?a.classList.add("e-right"):a.classList.remove("e-right");break;case"name":this.element.setAttribute("name",t.name);break;case"value":var c=typeof this.htmlAttributes.value;if(!d(this.htmlAttributes)&&(this.htmlAttributes.value||c==="boolean"&&!this.htmlAttributes.value))break;this.element.setAttribute("value",t.value);break;case"htmlAttributes":this.updateHtmlAttribute();break}}},i.prototype.preRender=function(){var t=this.element;if(this.formElement=M(this.element,"form"),this.tagName=this.element.tagName,t=Gg(this.createElement,"EJS-RADIOBUTTON","radio",t,Bh,"radio"),this.element=t,this.element.getAttribute("type")!=="radio"&&this.element.setAttribute("type","radio"),this.element.id||(this.element.id=Nt("e-"+this.getModuleName())),this.tagName==="EJS-RADIOBUTTON"){var r=this.element.getAttribute("formcontrolname");r&&(this.setProperties({name:r},!0),this.element.setAttribute("name",r))}},i.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete(),this.wrapper=this.getWrapper()},i.prototype.setDisabled=function(){this.element.disabled=!0},i.prototype.setText=function(t){var r=this.getLabel(),s=r.getElementsByClassName(Vh)[0];s?s.textContent=t:(t=this.enableHtmlSanitizer?Ar.sanitize(t):t,s=this.createElement("span",{className:Vh,innerHTML:t}),r.appendChild(s)),this.labelPosition==="Before"?this.getLabel().classList.add("e-right"):this.getLabel().classList.remove("e-right")},i.prototype.updateHtmlAttribute=function(){if(!d(this.htmlAttributes))for(var t=0,r=Object.keys(this.htmlAttributes);t<r.length;t++){var s=r[t],a=this.element.parentElement;OS.indexOf(s)>-1?s==="class"?T([a],this.htmlAttributes[""+s].replace(/\s+/g," ").trim().split(" ")):s==="title"||s==="style"?a.setAttribute(s,this.htmlAttributes[""+s]):this.element.setAttribute(s,this.htmlAttributes[""+s]):a.setAttribute(s,this.htmlAttributes[""+s])}},i.prototype.unWireEvents=function(){var t=this.wrapper;if(C.remove(this.element,"change",this.changeHandler),C.remove(this.element,"focus",this.focusHandler),C.remove(this.element,"focusout",this.focusOutHandler),C.remove(this.element,"keyup",this.keyUpHandler),t){var r=t.getElementsByTagName("label")[0];r&&(C.remove(r,"mousedown",this.labelMouseDownHandler),C.remove(r,"mouseup",this.labelMouseUpHandler),C.remove(r,"mouseleave",this.labelMouseLeaveHandler))}this.formElement&&C.remove(this.formElement,"reset",this.formResetHandler)},i.prototype.wireEvents=function(){var t=this.getLabel();C.add(this.element,"change",this.changeHandler,this),C.add(this.element,"keyup",this.keyUpHandler,this),C.add(this.element,"focus",this.focusHandler,this),C.add(this.element,"focusout",this.focusOutHandler,this);var r=t.getElementsByClassName(Vh)[0];r&&(C.add(r,"mousedown",this.labelMouseDownHandler,this),C.add(r,"mouseup",this.labelMouseUpHandler,this),C.add(r,"mouseleave",this.labelMouseLeaveHandler,this)),this.formElement&&C.add(this.formElement,"reset",this.formResetHandler,this)},i.prototype.click=function(){this.element.click()},i.prototype.focusIn=function(){this.element.focus()};var e;return vi([_()],i.prototype,"change",void 0),vi([_()],i.prototype,"created",void 0),vi([S(!1)],i.prototype,"checked",void 0),vi([S("")],i.prototype,"cssClass",void 0),vi([S(!1)],i.prototype,"disabled",void 0),vi([S("")],i.prototype,"label",void 0),vi([S("After")],i.prototype,"labelPosition",void 0),vi([S("")],i.prototype,"name",void 0),vi([S("")],i.prototype,"value",void 0),vi([S(!0)],i.prototype,"enableHtmlSanitizer",void 0),vi([S({})],i.prototype,"htmlAttributes",void 0),i=e=vi([Ft],i),i}(_i),RS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Pe=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},NS="e-control-wrapper e-numeric",Fh="e-input-group-icon",Wh="e-spin-up",LS="e-spin-down",Np="e-error",sn="increment",Qn="decrement",VS=new RegExp("^(-)?(\\d*)$"),PS=".",HS="e-numerictextbox",BS="e-control",Lp="e-input-focus",FS="e-numeric-hidden",Vp=["title","style","class"],Pp=0,_h=function(n){RS(i,n);function i(e,t){var r=n.call(this,e,t)||this;return r.preventChange=!1,r.isDynamicChange=!1,r.numericOptions=e,r}return i.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var e=V("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),I([this.cloneElement],[BS,HS,"e-lib"]),this.angularTagName=null,this.formEle=M(this.element,"form"),this.element.tagName==="EJS-NUMERICTEXTBOX"){this.angularTagName=this.element.tagName;var t=this.createElement("input"),r=0;for(r;r<this.element.attributes.length;r++){var s=this.element.attributes[r].nodeName;s!=="id"&&s!=="class"?(t.setAttribute(this.element.attributes[r].nodeName,this.element.attributes[r].nodeValue),t.innerHTML=this.element.innerHTML):s==="class"&&t.setAttribute(s,this.element.className.split(" ").filter(function(o){return o.indexOf("ng-")!==0}).join(" "))}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(t),this.element=t,ze("ej2_instances",e,this.element)}J(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off"});var a={incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder};this.l10n=new hi("numerictextbox",a,this.locale),this.l10n.getConstant("placeholder")!==""&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",Nt("numerictextbox")),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),this.placeholder===null&&this.updatePlaceholder()},i.prototype.render=function(){this.element.tagName.toLowerCase()==="input"&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(this.value===null||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),this.value!==null&&!isNaN(this.value)&&this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),!this.element.hasAttribute("aria-labelledby")&&!this.element.hasAttribute("placeholder")&&!this.element.hasAttribute("aria-label")&&this.element.setAttribute("aria-label","numerictextbox"),!d(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),this.updateFloatLabelOverflowWidth(),this.createPrependTemplate(),this.createAppendTemplate(),this.renderComplete())},i.prototype.checkAttributes=function(e){for(var t=e?d(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"],r=0,s=t;r<s.length;r++){var a=s[r];if(!d(this.element.getAttribute(a)))switch(a){case"disabled":if(d(this.numericOptions)||this.numericOptions.enabled===void 0||e){var o=!(this.element.getAttribute(a)==="disabled"||this.element.getAttribute(a)===""||this.element.getAttribute(a)==="true");this.setProperties({enabled:o},!e)}break;case"readonly":if(d(this.numericOptions)||this.numericOptions.readonly===void 0||e){var l=this.element.getAttribute(a)==="readonly"||this.element.getAttribute(a)===""||this.element.getAttribute(a)==="true";this.setProperties({readonly:l},!e)}break;case"placeholder":(d(this.numericOptions)||this.numericOptions.placeholder===void 0||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if(d(this.numericOptions)||this.numericOptions.value===void 0||e){var h=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(a));this.setProperties(ze(a,h,{}),!e)}break;case"min":if(d(this.numericOptions)||this.numericOptions.min===void 0||e){var c=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(a));c!==null&&!isNaN(c)&&this.setProperties(ze(a,c,{}),!e)}break;case"max":if(d(this.numericOptions)||this.numericOptions.max===void 0||e){var u=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(a));u!==null&&!isNaN(u)&&this.setProperties(ze(a,u,{}),!e)}break;case"step":if(d(this.numericOptions)||this.numericOptions.step===void 0||e){var p=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(a));p!==null&&!isNaN(p)&&this.setProperties(ze(a,p,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(a);break;case"name":this.inputName=this.element.getAttribute(a);break;default:{var f=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(a));(f!==null&&!isNaN(f)||a==="value")&&this.setProperties(ze(a,f,{}),!0)}break}}},i.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},i.prototype.initCultureFunc=function(){this.instance=new je(this.locale)},i.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,V("currency",this)!==null&&(ze("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},i.prototype.createWrapper=function(){var e=this.cssClass;!d(this.cssClass)&&this.cssClass!==""&&(e=this.getNumericValidClassList(this.cssClass));var t=X.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=t,this.container=t.container,this.container.setAttribute("class",NS+" "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&J(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text","data-validateHidden":"true","aria-label":"hidden",class:FS}}),this.inputName=this.inputName!==null?this.inputName:this.element.id,this.element.removeAttribute("name"),this.isAngular&&this.angularTagName==="EJS-NUMERICTEXTBOX"&&this.cloneElement.id.length>0?J(this.hiddenInput,{name:this.cloneElement.id}):J(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),this.inputStyle!==null&&J(this.container,{style:this.inputStyle})},i.prototype.updateDataAttribute=function(e){var t={};if(e)t=this.htmlAttributes;else for(var r=0;r<this.element.attributes.length;r++)t[this.element.attributes[r].name]=this.element.getAttribute(this.element.attributes[r].name);for(var s=0,a=Object.keys(t);s<a.length;s++){var o=a[s];o.indexOf("data")===0&&this.hiddenInput.setAttribute(o,t[""+o])}},i.prototype.updateHTMLAttrToElement=function(){if(!d(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var r=t[e];Vp.indexOf(r)<0&&this.element.setAttribute(r,this.htmlAttributes[""+r])}},i.prototype.updateCssClass=function(e,t){X.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(t))},i.prototype.getNumericValidClassList=function(e){var t=e;return!d(e)&&e!==""&&(t=e.replace(/\s+/g," ").trim()),t},i.prototype.updateHTMLAttrToWrapper=function(){if(!d(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var r=t[e];if(Vp.indexOf(r)>-1)if(r==="class"){var s=this.getNumericValidClassList(this.htmlAttributes[""+r]);s!==""&&T([this.container],s.split(" "))}else if(r==="style"){var a=this.container.getAttribute(r);a=d(a)?this.htmlAttributes[""+r]:a+this.htmlAttributes[""+r],this.container.setAttribute(r,a)}else this.container.setAttribute(r,this.htmlAttributes[""+r])}},i.prototype.setElementWidth=function(e){d(e)||(typeof e=="number"?this.container.style.width=ce(e):typeof e=="string"&&(this.container.style.width=e.match(/px|%|em/)?e:ce(e)))},i.prototype.spinBtnCreation=function(){this.spinDown=X.appendSpan(Fh+" "+LS,this.container,this.createElement),J(this.spinDown,{title:this.l10n.getConstant("decrementTitle")}),this.spinUp=X.appendSpan(Fh+" "+Wh,this.container,this.createElement),J(this.spinUp,{title:this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},i.prototype.validateMinMax=function(){typeof this.min=="number"&&!isNaN(this.min)||this.setProperties({min:-Number.MAX_VALUE},!0),typeof this.max=="number"&&!isNaN(this.max)||this.setProperties({max:Number.MAX_VALUE},!0),this.decimals!==null&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),this.min!==-Number.MAX_VALUE&&J(this.element,{"aria-valuemin":this.min.toString()}),this.max!==Number.MAX_VALUE&&J(this.element,{"aria-valuemax":this.max.toString()})},i.prototype.formattedValue=function(e,t){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(t)},i.prototype.validateStep=function(){this.decimals!==null&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},i.prototype.action=function(e,t){this.isInteract=!0;var r=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(r,this.step,e)),this.raiseChangeEvent(t)},i.prototype.checkErrorClass=function(){this.isValidState?I([this.container],Np):T([this.container],Np),J(this.element,{"aria-invalid":this.isValidState?"false":"true"})},i.prototype.bindClearEvent=function(){this.showClearButton&&C.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},i.prototype.resetHandler=function(e){e.preventDefault(),(!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.inputWrapper.container.classList.contains("e-static-clear"))&&this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)},i.prototype.clear=function(e){this.prevValue=this.instance.getNumberParser({format:"n"})(this.element.value),this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="";var t=M(this.element,"form");if(t){var r=this.element.nextElementSibling,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),r.dispatchEvent(s)}},i.prototype.resetFormHandler=function(){this.element.tagName==="EJS-NUMERICTEXTBOX"?this.updateValue(null):this.updateValue(this.inputEleValue)},i.prototype.setSpinButton=function(){d(this.spinDown)||J(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),d(this.spinUp)||J(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},i.prototype.wireEvents=function(){C.add(this.element,"focus",this.focusHandler,this),C.add(this.element,"blur",this.focusOutHandler,this),C.add(this.element,"keydown",this.keyDownHandler,this),C.add(this.element,"keyup",this.keyUpHandler,this),C.add(this.element,"input",this.inputHandler,this),C.add(this.element,"keypress",this.keyPressHandler,this),C.add(this.element,"change",this.changeHandler,this),C.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&C.add(this.formEle,"reset",this.resetFormHandler,this))},i.prototype.wireSpinBtnEvents=function(){C.add(this.spinUp,H.touchStartEvent,this.mouseDownOnSpinner,this),C.add(this.spinDown,H.touchStartEvent,this.mouseDownOnSpinner,this),C.add(this.spinUp,H.touchEndEvent,this.mouseUpOnSpinner,this),C.add(this.spinDown,H.touchEndEvent,this.mouseUpOnSpinner,this),C.add(this.spinUp,H.touchMoveEvent,this.touchMoveOnSpinner,this),C.add(this.spinDown,H.touchMoveEvent,this.touchMoveOnSpinner,this)},i.prototype.unwireEvents=function(){C.remove(this.element,"focus",this.focusHandler),C.remove(this.element,"blur",this.focusOutHandler),C.remove(this.element,"keyup",this.keyUpHandler),C.remove(this.element,"input",this.inputHandler),C.remove(this.element,"keydown",this.keyDownHandler),C.remove(this.element,"keypress",this.keyPressHandler),C.remove(this.element,"change",this.changeHandler),C.remove(this.element,"paste",this.pasteHandler),this.formEle&&C.remove(this.formEle,"reset",this.resetFormHandler)},i.prototype.unwireSpinBtnEvents=function(){C.remove(this.spinUp,H.touchStartEvent,this.mouseDownOnSpinner),C.remove(this.spinDown,H.touchStartEvent,this.mouseDownOnSpinner),C.remove(this.spinUp,H.touchEndEvent,this.mouseUpOnSpinner),C.remove(this.spinDown,H.touchEndEvent,this.mouseUpOnSpinner),C.remove(this.spinUp,H.touchMoveEvent,this.touchMoveOnSpinner),C.remove(this.spinDown,H.touchMoveEvent,this.touchMoveOnSpinner)},i.prototype.updatePrependTemplate=function(){this.removePrependTemplate(),this.createPrependTemplate()},i.prototype.updateAppendTemplate=function(){this.removeAppendTemplate(),this.createAppendTemplate()},i.prototype.templateComplier=function(e){if(e)try{return typeof e!="function"&&ae(e,document).length?At(z(e,document).innerHTML.trim()):At(e)}catch{return At(e)}},i.prototype.createPrependTemplate=function(){if(!d(this.prependTemplate)){var e=this.container;this.prependedElement=this.createElement("div",{className:"e-prepend-template"}),this.iconTemplateFunction=this.templateComplier(this.prependTemplate);var t=this.iconTemplateFunction(null,this,"template",this.element.id+"Template",this.isStringTemplate,null,this.prependedElement);if(t){var r=[].slice.call(t);oe(r,this.prependedElement)}var s=e.querySelector("input");e.classList.add("e-prepend-wrapper"),s?e.insertBefore(this.prependedElement,s):e.insertBefore(this.prependedElement,e.firstChild),this.handleFloatLabel(),this.renderReactTemplates()}},i.prototype.createAppendTemplate=function(){if(!d(this.appendTemplate)){var e=this.container;this.appendedElement=this.createElement("div",{className:"e-append-template"}),this.iconTemplateFunction=this.templateComplier(this.appendTemplate);var t=this.iconTemplateFunction(null,this,"template",this.element.id+"Template",this.isStringTemplate,null,this.appendedElement);if(t){var r=[].slice.call(t);oe(r,this.appendedElement)}e.classList.add("e-append-wrapper");var s=e.querySelector(".e-spin-down");this.showSpinButton&&s?e.insertBefore(this.appendedElement,s):e.appendChild(this.appendedElement),this.handleFloatLabel(),this.renderReactTemplates()}},i.prototype.handleFloatLabel=function(){var e=this.container.querySelector(".e-float-text");e&&this.floatLabelType==="Auto"&&setTimeout((function(){e&&this.prependedElement&&!this.enableRtl?(e.style.marginLeft=this.prependedElement.offsetWidth+"px",e.style.marginRight="0"):e&&this.prependedElement&&this.enableRtl&&(e.style.marginRight=this.prependedElement.offsetWidth+"px",e.style.marginLeft="0"),e&&e.classList.contains("e-label-bottom")&&(e.style.width=this.element.offsetWidth+"px")}).bind(this),5)},i.prototype.removePrependTemplate=function(){d(this.prependedElement)||(Q(this.prependedElement),this.prependedElement=null)},i.prototype.removeAppendTemplate=function(){d(this.appendedElement)||(Q(this.appendedElement),this.appendedElement=null)},i.prototype.changeHandler=function(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var t=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(t,e)},i.prototype.raiseChangeEvent=function(e){if(this.inputValue=d(this.inputValue)||isNaN(this.inputValue)?null:this.inputValue,this.prevValue!==this.value||this.prevValue!==this.inputValue){var t={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),this.changeEventArgs.event===void 0&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),$g(t,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",t)}},i.prototype.pasteHandler=function(){var e=this;if(!(!this.enabled||this.readonly)){var t=this.element.value;setTimeout(function(){e.numericRegex().test(e.element.value)||e.setElementValue(t)})}},i.prototype.preventHandler=function(){var e=this,t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(function(){if(e.element.selectionStart>0){var r=e.element.selectionStart,s=e.element.selectionStart-1,a=0,o=e.element.value.split(""),l=$n(e.locale),h=V("decimal",l),c=h.charCodeAt(0);e.element.value[s]===" "&&e.element.selectionStart>0&&!t?(d(e.prevVal)?e.element.value=e.element.value.trim():s!==0?e.element.value=e.prevVal:s===0&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(s,s)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.value[e.element.selectionStart-1].charCodeAt(0)!==45?(o.indexOf(e.element.value[e.element.selectionStart-1])!==o.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===c||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==c)&&(e.element.value=e.element.value.substring(0,s)+e.element.value.substring(r,e.element.value.length),e.element.setSelectionRange(s,s),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&e.element.value[e.element.selectionStart-2].charCodeAt(0)!==45&&(o.indexOf(e.element.value[e.element.selectionStart-2])!==o.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===c||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==c)&&(e.element.setSelectionRange(s,s),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),e.cursorPosChanged===!0&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),e.element.value.trim()===""&&e.element.setSelectionRange(a,a),e.element.selectionStart>0&&(e.element.value[e.element.selectionStart-1].charCodeAt(0)===45&&e.element.selectionStart>1&&(d(e.prevVal)||(e.element.value=e.prevVal),e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.element.value[e.element.selectionStart-1]===h&&e.decimals===0&&e.validateDecimalOnType&&(e.element.value=e.element.value.substring(0,s)+e.element.value.substring(r,e.element.value.length))),e.prevVal=e.element.value}})},i.prototype.keyUpHandler=function(){if(!(!this.enabled||this.readonly)){var e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);!e&&H.isDevice&&this.preventHandler();var t=this.instance.getNumberParser({format:"n"})(this.element.value);t=t===null||isNaN(t)?null:t,this.hiddenInput.value=t||t===0?t.toString():null;var r=M(this.element,"form");if(r){var s=this.element.nextElementSibling,a=document.createEvent("KeyboardEvent");a.initEvent("keyup",!1,!0),s.dispatchEvent(a)}}},i.prototype.inputHandler=function(e){var t=this;if(!(!this.enabled||this.readonly)){var r=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),s=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;if((s||r)&&H.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==V("decimal",$n(this.locale))&&this.element.value!==V("minusSign",$n(this.locale))&&this.numericRegex().test(this.element.value)){var a=this.instance.getNumberParser({format:"n"})(this.element.value);a=isNaN(a)?null:a,t.localChange({value:a}),this.preventChange=!0}if(this.isVue){var o=this.instance.getNumberParser({format:"n"})(this.element.value),l=this.instance.getNumberParser({format:"n"})(this.elementPrevValue),h=new RegExp("[^0-9]+$");(h.test(this.element.value)||(this.elementPrevValue.indexOf(".")!==-1||this.elementPrevValue.indexOf("-")!==-1)&&this.element.value[this.element.value.length-1]==="0")&&(o=this.value);var c={event:e,value:o===null||isNaN(o)?null:o,previousValue:l===null||isNaN(l)?null:l};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",c)}}},i.prototype.keyDownHandler=function(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action(sn,e);break;case 40:e.preventDefault(),this.action(Qn,e);break}},i.prototype.performAction=function(e,t,r){(e===null||isNaN(e))&&(e=0);var s=r===sn?e+t:e-t;return s=this.correctRounding(e,t,s),this.strictMode?this.trimValue(s):s},i.prototype.correctRounding=function(e,t,r){var s=new RegExp("[,.](.*)"),a=s.test(e.toString()),o=s.test(t.toString());if(a||o){var l=a?s.exec(e.toString())[0].length:0,h=o?s.exec(t.toString())[0].length:0,c=Math.max(l,h);return e=this.roundValue(r,c)}return r},i.prototype.roundValue=function(e,t){t=t||0;var r=Math.pow(10,t);return e*=r,e=Math.round(e)/r},i.prototype.updateValue=function(e,t){t&&(this.isInteract=!0),e!==null&&!isNaN(e)&&this.decimals&&(e=this.roundNumber(e,this.decimals)),this.inputValue=e,this.isVue&&this.element&&this.element.hasAttribute("modelvalue")&&this.isDynamicChange||this.changeValue(e===null||isNaN(e)?null:this.strictMode?this.trimValue(e):e),this.isDynamicChange||this.raiseChangeEvent(t)},i.prototype.updateCurrency=function(e,t){ze(e,t,this.cultureInfo),this.updateValue(this.value)},i.prototype.changeValue=function(e){if(!(e||e===0))e=null,this.setProperties({value:e},!0);else{var t=this.getNumberOfDecimals(e);this.setProperties({value:this.roundNumber(e,t)},!0)}this.modifyText(),this.strictMode||this.validateState()},i.prototype.modifyText=function(){if(this.value||this.value===0){var e=this.formatNumber(),t=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(t),J(this.element,{"aria-valuenow":e}),d(this.hiddenInput)||(this.hiddenInput.value=this.value.toString(),this.value!==null&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator)))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},i.prototype.setElementValue=function(e,t){X.setValue(e,t||this.element,this.floatLabelType,this.showClearButton)},i.prototype.validateState=function(){this.isValidState=!0,(this.value||this.value===0)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},i.prototype.getNumberOfDecimals=function(e){var t,r=new RegExp("[eE][-+]?([0-9]+)"),s=e.toString();if(r.test(s))if(/[eE]/.test(s))s=e.toFixed(20).replace(/0+$/,""),s.charAt(s.length-1)==="."&&(s=s.slice(0,s.length-1));else{var a=r.exec(s);d(a)||(s=e.toFixed(Math.min(parseInt(a[1],10),20)))}var o=s.split(".")[1];return t=!o||!o.length?0:o.length,this.decimals!==null&&(t=t<this.decimals?t:this.decimals),t},i.prototype.formatNumber=function(){var e=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)},i.prototype.trimValue=function(e){return e>this.max?this.max:e<this.min?this.min:e},i.prototype.roundNumber=function(e,t){var r=e,s=t||0,a=r.toString().split("e");r=Math.round(+(a[0]+"e"+(a[1]?Number(a[1])+s:s)));var o=r.toString().split("e");return r=+(o[0]+"e"+(o[1]?Number(o[1])-s:-s)),Number(r.toFixed(s))},i.prototype.cancelEvent=function(e){return e.preventDefault(),!1},i.prototype.keyPressHandler=function(e){if(!this.enabled||this.readonly)return!0;if(!H.isDevice&&H.info.version==="11.0"&&e.keyCode===13){var t=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(t,e),!0}if(e.which===0||e.metaKey||e.ctrlKey||e.keyCode===8||e.keyCode===13)return!0;var r=String.fromCharCode(e.which),s=V("decimal",$n(this.locale)),a=e.code==="NumpadDecimal"&&r!==s;a&&(r=s);var o=this.element.value;if(o=o.substring(0,this.element.selectionStart)+r+o.substring(this.element.selectionEnd),this.numericRegex().test(o)){if(a){var l=this.element.selectionStart+1;this.element.value=o,this.element.setSelectionRange(l,l),e.preventDefault(),e.stopPropagation()}return!0}else return e.preventDefault(),e.stopPropagation(),!1},i.prototype.numericRegex=function(){var e=$n(this.locale),t=V("decimal",e),r="*";return t===PS&&(t="\\"+t),this.decimals===0&&this.validateDecimalOnType?VS:(this.decimals&&this.validateDecimalOnType&&(r="{0,"+this.decimals+"}"),new RegExp("^\\s*(-)?(((\\d+("+t+"\\d"+r+")?)|("+t+"\\d"+r+")))?$"))},i.prototype.mouseWheel=function(e){if(this.allowMouseWheel){e.preventDefault();var t,r=e;r.wheelDelta?t=r.wheelDelta/120:r.detail&&(t=-r.detail/3),t>0?this.action(sn,e):t<0&&this.action(Qn,e),this.cancelEvent(e)}},i.prototype.focusHandler=function(e){var t=this;if(clearTimeout(Pp),this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),!(!this.enabled||this.readonly)){if(this.isFocused=!0,this.floatLabelType!=="Never"&&this.inputWrapper&&this.inputWrapper.container){var r=this.inputWrapper.container.querySelector(".e-float-text");r&&r.removeAttribute("style")}if(this.prevValue=this.value,this.value||this.value===0){var s=this.formatNumber();if(this.setElementValue(s),!this.isPrevFocused)if(!H.isDevice&&H.info.version==="11.0")this.element.setSelectionRange(0,s.length);else{var a=H.isDevice&&H.isIos?600:0;Pp=setTimeout(function(){t.element.setSelectionRange(0,s.length)},a)}}!H.isDevice&&this.allowMouseWheel&&C.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this);var o=this.container.querySelector(".e-float-text");this.floatLabelType==="Auto"&&(this.prependTemplate||this.appendTemplate)&&o&&setTimeout((function(){o&&(o.style.width="auto")}).bind(this),5)}},i.prototype.focusOutHandler=function(e){var t=this;if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),!(!this.enabled||this.readonly)){if(this.isPrevFocused){if(e.preventDefault(),H.isDevice){var r=this.element.value;this.element.focus(),this.isPrevFocused=!1;var s=this.element;setTimeout(function(){t.setElementValue(r,s)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var a=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(a),H.isDevice||C.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}this.updateFloatLabelOverflowWidth();var o=this.container.querySelector(".e-float-text");this.floatLabelType==="Auto"&&(this.prependTemplate||this.appendTemplate)&&o&&setTimeout((function(){o&&this.prependedElement&&!this.enableRtl?o.style.marginLeft=this.prependedElement.offsetWidth+"px":o&&this.prependedElement&&this.enableRtl&&(o.style.marginRight=this.prependedElement.offsetWidth+"px"),o&&o.classList.contains("e-label-bottom")&&(o.style.width=this.element.offsetWidth+"px")}).bind(this),5);var l=M(this.element,"form");if(l){var h=this.element.nextElementSibling,c=document.createEvent("FocusEvent");c.initEvent("focusout",!1,!0),h.dispatchEvent(c)}}},i.prototype.mouseDownOnSpinner=function(e){var t=this;if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),!!this.getElementData(e)){this.getElementData(e);var r=e.currentTarget,s=r.classList.contains(Wh)?sn:Qn;C.add(r,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){t.isCalled=!0,t.action(s,e)},150),C.add(document,"mouseup",this.mouseUpClick,this)}},i.prototype.touchMoveOnSpinner=function(e){var t;if(e.type==="touchmove"){var r=e.touches;t=r.length&&document.elementFromPoint(r[0].pageX,r[0].pageY)}else t=document.elementFromPoint(e.clientX,e.clientY);t.classList.contains(Fh)||clearInterval(this.timeOut)},i.prototype.mouseUpOnSpinner=function(e){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),H.isDevice||(this.isPrevFocused=!1)),H.isDevice||e.preventDefault(),!!this.getElementData(e)){var t=e.currentTarget,r=t.classList.contains(Wh)?sn:Qn;C.remove(t,"mouseleave",this.mouseUpClick),this.isCalled||this.action(r,e),this.isCalled=!1,C.remove(document,"mouseup",this.mouseUpClick);var s=M(this.element,"form");if(s){var a=this.element.nextElementSibling,o=document.createEvent("KeyboardEvent");o.initEvent("keyup",!1,!0),a.dispatchEvent(o)}}},i.prototype.getElementData=function(e){return e.which&&e.which===3||e.button&&e.button===2||!this.enabled||this.readonly?!1:(clearInterval(this.timeOut),!0)},i.prototype.floatLabelTypeUpdate=function(){X.removeFloating(this.inputWrapper);var e=this.hiddenInput;this.hiddenInput.remove(),X.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])},i.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,this.spinUp&&C.remove(this.spinUp,"mouseleave",this.mouseUpClick),this.spinDown&&C.remove(this.spinDown,"mouseleave",this.mouseUpClick)},i.prototype.increment=function(e){e===void 0&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,sn)),this.raiseChangeEvent()},i.prototype.decrement=function(e){e===void 0&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,Qn)),this.raiseChangeEvent()},i.prototype.destroy=function(){this.unwireEvents(),this.removePrependTemplate(),this.removeAppendTemplate(),this.clearTemplate(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),Q(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),Q(this.spinUp),Q(this.spinDown));for(var e=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-valuenow","aria-invalid"],t=0;t<e.length;t++)this.element.removeAttribute(e[t]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),Q(this.container),this.spinUp=null,this.spinDown=null,this.container=null,this.hiddenInput=null,this.changeEventArgs=null,this.blurEventArgs=null,this.focusEventArgs=null,this.inputWrapper=null,X.destroy({element:this.element,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),n.prototype.destroy.call(this)},i.prototype.getText=function(){return this.element.value},i.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),T([this.container],[Lp]))},i.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),I([this.container],[Lp]))},i.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},i.prototype.onPropertyChanged=function(e,t){for(var r=0,s=Object.keys(e);r<s.length;r++){var a=s[r];switch(a){case"width":this.setElementWidth(e.width),X.calculateWidth(this.element,this.container);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":X.setEnabled(e.enabled,this.element),this.bindClearEvent();break;case"enableRtl":X.setEnableRtl(e.enableRtl,[this.container]),this.handleFloatLabel();break;case"readonly":X.setReadonly(e.readonly,this.element),this.readonly?J(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),X.validateInputType(this.container,this.element);break;case"placeholder":X.setPlaceholder(e.placeholder,this.element),X.calculateWidth(this.element,this.container);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(e.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":ze(a,V(a,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),X.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":{var o=V(a,e);this.setProperties({currencyCode:o},!0),this.updateCurrency(a,o)}break;case"currencyCode":{var l=V(a,e);this.setProperties({currency:l},!0),this.updateCurrency("currency",l)}break;case"format":ze(a,V(a,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value);break;case"allowMouseWheel":this.allowMouseWheel&&this.isFocused&&C.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this);break;case"prependTemplate":this.updatePrependTemplate();break;case"appendTemplate":this.updateAppendTemplate();break}}},i.prototype.updateClearButton=function(e){X.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()},i.prototype.updateSpinButton=function(e){e.showSpinButton?this.spinBtnCreation():(Q(this.spinUp),Q(this.spinDown))},i.prototype.getRightIconsWidth=function(){for(var e=this.inputWrapper.container,t=0,r=".e-input-group-icon, .e-clear-icon",s=e.querySelectorAll(r),a=0;a<s.length;a++)t+=s[a].offsetWidth;return t},i.prototype.updateFloatLabelOverflowWidth=function(){var e=this.inputWrapper.container,t=e.querySelector(".e-float-text-overflow")||e.querySelector(".e-float-text"),r=e.clientWidth-this.getRightIconsWidth();t&&r&&!(this.cssClass&&this.cssClass.split(" ").indexOf("e-outline")!==-1)&&(t.style.width=r+"px")},i.prototype.getModuleName=function(){return"numerictextbox"},Pe([S("")],i.prototype,"cssClass",void 0),Pe([S(null)],i.prototype,"value",void 0),Pe([S(-Number.MAX_VALUE)],i.prototype,"min",void 0),Pe([S(Number.MAX_VALUE)],i.prototype,"max",void 0),Pe([S(1)],i.prototype,"step",void 0),Pe([S(null)],i.prototype,"width",void 0),Pe([S(null)],i.prototype,"placeholder",void 0),Pe([S({})],i.prototype,"htmlAttributes",void 0),Pe([S(!0)],i.prototype,"showSpinButton",void 0),Pe([S(!1)],i.prototype,"readonly",void 0),Pe([S(!0)],i.prototype,"enabled",void 0),Pe([S(!1)],i.prototype,"showClearButton",void 0),Pe([S(!1)],i.prototype,"enablePersistence",void 0),Pe([S("n2")],i.prototype,"format",void 0),Pe([S(null)],i.prototype,"decimals",void 0),Pe([S(null)],i.prototype,"currency",void 0),Pe([S(null)],i.prototype,"currencyCode",void 0),Pe([S(!0)],i.prototype,"strictMode",void 0),Pe([S(!1)],i.prototype,"validateDecimalOnType",void 0),Pe([S(!0)],i.prototype,"allowMouseWheel",void 0),Pe([S("Never")],i.prototype,"floatLabelType",void 0),Pe([S(null)],i.prototype,"prependTemplate",void 0),Pe([S(null)],i.prototype,"appendTemplate",void 0),Pe([_()],i.prototype,"created",void 0),Pe([_()],i.prototype,"destroyed",void 0),Pe([_()],i.prototype,"change",void 0),Pe([_()],i.prototype,"focus",void 0),Pe([_()],i.prototype,"blur",void 0),i=Pe([Ft],i),i}(_i),WS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),It=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},nn={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")},wl;(function(n){n[n.Message=0]="Message",n[n.Label=1]="Label"})(wl||(wl={}));var _S=function(n){WS(i,n);function i(t,r){var s=n.call(this,r,t)||this;if(s.validated=[],s.errorRules=[],s.allowSubmit=!1,s.required="required",s.infoElement=null,s.inputElement=null,s.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",s.localyMessage={},s.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},typeof s.rules>"u"&&(s.rules={}),s.l10n=new hi("formValidator",s.defaultMessages,s.locale),s.locale&&s.localeFunc(),Ap.on("notifyExternalChange",s.afterLocalization,s),t=typeof t=="string"?z(t,document):t,s.element!=null)s.element.setAttribute("novalidate",""),s.inputElements=ae(s.selectQuery,s.element),s.createHTML5Rules(),s.wireEvents();else return;return s}e=i,i.prototype.addRules=function(t,r){t&&(this.rules.hasOwnProperty(t)?$(this.rules[""+t],r,{}):this.rules[""+t]=r)},i.prototype.removeRules=function(t,r){if(!t&&!r)this.rules={};else if(this.rules[""+t]&&!r)delete this.rules[""+t];else{if(d(this.rules[""+t]&&r))return;for(var s=0;s<r.length;s++)delete this.rules[""+t][r[parseInt(s.toString(),10)]]}},i.prototype.validate=function(t){var r=Object.keys(this.rules);if(t&&r.length)return this.validateRules(t),r.indexOf(t)!==-1&&this.errorRules.filter(function(l){return l.name===t}).length===0;this.errorRules=[];for(var s=0,a=r;s<a.length;s++){var o=a[s];this.validateRules(o)}return this.errorRules.length===0},i.prototype.reset=function(){this.element.reset(),this.clearForm()},i.prototype.getInputElement=function(t){return this.inputElement=z('[name="'+t+'"]',this.element),this.inputElement},i.prototype.destroy=function(){this.reset(),this.unwireEvents(),this.rules={};for(var t=ae("."+this.errorClass+", ."+this.validClass,this.element),r=0,s=t;r<s.length;r++){var a=s[r];Q(a)}n.prototype.destroy.call(this),this.infoElement=null,Ap.off("notifyExternalChange",this.afterLocalization)},i.prototype.onPropertyChanged=function(t,r){for(var s=0,a=Object.keys(t);s<a.length;s++){var o=a[s];switch(o){case"locale":this.localeFunc();break}}},i.prototype.localeFunc=function(){for(var t=0,r=Object.keys(this.defaultMessages);t<r.length;t++){var s=r[t];this.l10n.setLocale(this.locale);var a=this.l10n.getConstant(s);this.localyMessage[""+s]=a}},i.prototype.getModuleName=function(){return"formvalidator"},i.prototype.afterLocalization=function(t){this.locale=t.locale,this.localeFunc()},i.prototype.refresh=function(){this.unwireEvents(),this.inputElements=ae(this.selectQuery,this.element),this.wireEvents()},i.prototype.clearForm=function(){this.errorRules=[],this.validated=[];for(var t=ae(this.selectQuery,this.element),r=0,s=t;r<s.length;r++){var a=s[r],o=a;o.removeAttribute("aria-invalid");var l=o.parentElement,h=l.parentElement;l.classList.contains("e-control-wrapper")||l.classList.contains("e-wrapper")||o.classList.contains("e-input")&&l.classList.contains("e-input-group")?l.classList.remove(this.errorClass):h!=null&&(h.classList.contains("e-control-wrapper")||h.classList.contains("e-wrapper"))?h.classList.remove(this.errorClass):o.classList.remove(this.errorClass),o.name.length>0&&(this.getInputElement(o.name),this.getErrorElement(o.name),this.hideMessage(o.name)),l.classList.contains("e-control-wrapper")||l.classList.contains("e-wrapper")||o.classList.contains("e-input")&&l.classList.contains("e-input-group")?l.classList.remove(this.validClass):h!=null&&(h.classList.contains("e-control-wrapper")||h.classList.contains("e-wrapper"))?h.classList.remove(this.validClass):o.classList.remove(this.validClass)}},i.prototype.createHTML5Rules=function(){for(var t=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],r=["hidden","email","url","date","number","tel"],s=0,a=this.inputElements;s<a.length;s++){for(var o=a[s],l={},h=0,c=t;h<c.length;h++){var u=c[h];if(o.getAttribute(u)!==null)switch(u){case"required":this.defRule(o,l,u,o.required);break;case"data-validation":u=o.getAttribute(u),this.defRule(o,l,u,!0);break;case"type":r.indexOf(o.type)!==-1&&this.defRule(o,l,o.type,!0);break;case"rangeLength":case"range":this.defRule(o,l,u,JSON.parse(o.getAttribute(u)));break;case"equalTo":{var p=o.getAttribute(u);this.defRule(o,l,u,p)}break;default:o.getAttribute("data-val")==="true"?this.annotationRule(o,l,u,o.getAttribute(u)):this.defRule(o,l,u,o.getAttribute(u))}}Object.keys(l).length!==0&&this.addRules(o.name,l)}},i.prototype.annotationRule=function(t,r,s,a){var o=s.split("-"),l=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],h=o[o.length-1],c=o[o.length-2];if(l.indexOf(h)!==-1)switch(h){case"required":this.defRule(t,r,"required",a);break;case"creditcard":this.defRule(t,r,"creditcard",a);break;case"phone":this.defRule(t,r,"tel",a);break}else if(l.indexOf(c)!==-1)switch(c){case"maxlength":this.defRule(t,r,"maxLength",a);break;case"minlength":this.defRule(t,r,"minLength",a);break;case"range":{var u=t.getAttribute("data-val-range-min"),p=t.getAttribute("data-val-range-max");this.defRule(t,r,"range",[u,p])}break;case"equalto":{var f=t.getAttribute(s).split(".");this.defRule(t,r,"equalTo",f[f.length-1])}break;case"regex":this.defRule(t,r,"regex",a);break}},i.prototype.defRule=function(t,r,s,a){var o=t.getAttribute("data-"+s+"-message"),l=t.getAttribute("data-val-"+s),h;this.rules[t.name]&&s!=="validateHidden"&&s!=="hidden"&&(this.getInputElement(t.name),h=this.getErrorMessage(this.rules[t.name][""+s],s)),o?a=[a,o]:l?a=[a,l]:h&&(a=[a,h]),r[""+s]=a},i.prototype.wireEvents=function(){for(var t=0,r=this.inputElements;t<r.length;t++){var s=r[t];e.isCheckable(s)?C.add(s,"click",this.clickHandler,this):s.tagName==="SELECT"?C.add(s,"change",this.changeHandler,this):(C.add(s,"focusout",this.focusOutHandler,this),C.add(s,"keyup",this.keyUpHandler,this))}C.add(this.element,"submit",this.submitHandler,this),C.add(this.element,"reset",this.resetHandler,this)},i.prototype.unwireEvents=function(){for(var t=0,r=this.inputElements;t<r.length;t++){var s=r[t];C.clearEvents(s)}C.remove(this.element,"submit",this.submitHandler),C.remove(this.element,"reset",this.resetHandler)},i.prototype.focusOutHandler=function(t){this.trigger("focusout",t);var r=t.target;this.rules[r.name]&&(this.rules[r.name][this.required]||r.value.length>0?this.validate(r.name):this.validated.indexOf(r.name)===-1&&this.validated.push(r.name))},i.prototype.keyUpHandler=function(t){this.trigger("keyup",t);var r=t.target,s=[16,17,18,20,35,36,37,38,39,40,45,144,225];t.which===9&&(!this.rules[r.name]||this.rules[r.name]&&!this.rules[r.name][this.required])||this.validated.indexOf(r.name)!==-1&&this.rules[r.name]&&s.indexOf(t.which)===-1&&this.validate(r.name)},i.prototype.clickHandler=function(t){this.trigger("click",t);var r=t.target;r.type!=="submit"?this.validate(r.name):r.getAttribute("formnovalidate")!==null&&(this.allowSubmit=!0)},i.prototype.changeHandler=function(t){this.trigger("change",t);var r=t.target;this.validate(r.name)},i.prototype.submitHandler=function(t){this.trigger("submit",t),!this.allowSubmit&&!this.validate()?t.preventDefault():this.allowSubmit=!1},i.prototype.resetHandler=function(){this.clearForm()},i.prototype.validateRules=function(t){if(this.rules[""+t]){var r=Object.keys(this.rules[""+t]),s=!1,a=!1,o=r.indexOf("validateHidden"),l=r.indexOf("hidden");if(this.getInputElement(t),l!==-1&&(s=!0),o!==-1&&(a=!0),!s||s&&a){o!==-1&&r.splice(o,1),l!==-1&&r.splice(l-1,1),this.getErrorElement(t);for(var h=0,c=r;h<c.length;h++){var u=c[h],p=this.getErrorMessage(this.rules[""+t][""+u],u),f={name:t,message:p},v={inputName:t,element:this.inputElement,message:p};if(!this.isValid(t,u)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(t),this.errorRules.push(f),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info");var m=this.inputElement.parentElement,g=m.parentElement;m.classList.contains("e-control-wrapper")||m.classList.contains("e-wrapper")||this.inputElement.classList.contains("e-input")&&m.classList.contains("e-input-group")?(m.classList.add(this.errorClass),m.classList.remove(this.validClass)):g!=null&&(g.classList.contains("e-control-wrapper")||g.classList.contains("e-wrapper"))?(g.classList.add(this.errorClass),g.classList.remove(this.validClass)):(this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass)),this.infoElement?this.showMessage(f):this.createErrorElement(t,f.message,this.inputElement),v.errorElement=this.infoElement,v.status="failure",m.classList.contains("e-control-wrapper")||m.classList.contains("e-wrapper")||this.inputElement.classList.contains("e-input")&&m.classList.contains("e-input-group")?(m.classList.add(this.errorClass),m.classList.remove(this.validClass)):g!=null&&(g.classList.contains("e-control-wrapper")||g.classList.contains("e-wrapper"))?(g.classList.add(this.errorClass),g.classList.remove(this.validClass)):(this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass)),this.optionalValidationStatus(t,v),this.trigger("validationComplete",v),u==="required"&&this.inputElement.setAttribute("aria-required","true");break}else this.hideMessage(t),v.status="success",this.trigger("validationComplete",v)}}else return}},i.prototype.optionalValidationStatus=function(t,r){!this.rules[""+t][this.required]&&!this.inputElement.value.length&&!d(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),r.status="",this.hideMessage(t))},i.prototype.isValid=function(t,r){var s=this.rules[""+t][""+r],a=s instanceof Array&&typeof s[1]=="string"?s[0]:s,o=this.rules[""+t][""+r],l=(r==="min"||r==="max")&&this.rules[""+t].date&&typeof this.rules[""+t].date=="string"?this.rules[""+t].date:null,h={value:this.inputElement.value,param:a,element:this.inputElement,formElement:this.element,format:l,culture:this.locale};if(this.trigger("validationBegin",h),!h.param&&r==="required")return!0;if(o&&typeof o[0]=="function"){var c=o[0];return c.call(this,{element:this.inputElement,value:this.inputElement.value})}else return e.isCheckable(this.inputElement)?r!=="required"?!0:ae('input[name="'+t+'"]:checked',this.element).length>0:e.checkValidator[""+r](h)},i.prototype.getErrorMessage=function(t,r){var s=this.inputElement.getAttribute("data-"+r+"-message")?this.inputElement.getAttribute("data-"+r+"-message"):t instanceof Array&&typeof t[1]=="string"?t[1]:Object.keys(this.localyMessage).length!==0?this.localyMessage[""+r]:this.defaultMessages[""+r],a=s.match(/{(\d)}/g);if(!d(a))for(var o=0;o<a.length;o++){var l=t instanceof Array?t[parseInt(o.toString(),10)]:t;s=s.replace(a[parseInt(o.toString(),10)],l)}return s},i.prototype.createErrorElement=function(t,r,s){var a=R(this.errorElement,{className:this.errorClass,innerHTML:r,attrs:{for:t}});if(this.errorOption===wl.Message&&(a.classList.remove(this.errorClass),a.classList.add("e-message"),a=R(this.errorContainer,{className:this.errorClass,innerHTML:a.outerHTML})),a.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+s.id+'"]'))this.element.querySelector('[data-valmsg-for="'+s.id+'"]').appendChild(a);else if(s.hasAttribute("data-msg-containerid")===!0){var o=s.getAttribute("data-msg-containerid"),l=z("#"+o,this.element);l.appendChild(a)}else if(this.customPlacement!=null)this.customPlacement.call(this,this.inputElement,a);else{var h=this.inputElement.parentElement,c=h.parentElement;h.classList.contains("e-control-wrapper")||h.classList.contains("e-wrapper")?c.insertBefore(a,h.nextSibling):c.classList.contains("e-control-wrapper")||c.classList.contains("e-wrapper")?c.parentElement.insertBefore(a,c.nextSibling):h.insertBefore(a,this.inputElement.nextSibling)}a.style.display="block",this.getErrorElement(t),this.validated.push(t),this.checkRequired(t)},i.prototype.getErrorElement=function(t){return this.infoElement=z(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=z(this.errorElement+"."+this.errorClass+'[for="'+t+'"]',this.element)),this.infoElement},i.prototype.removeErrorRules=function(t){for(var r=0;r<this.errorRules.length;r++){var s=this.errorRules[parseInt(r.toString(),10)];s.name===t&&this.errorRules.splice(r,1)}},i.prototype.showMessage=function(t){this.infoElement.style.display="block",this.infoElement.innerHTML=t.message,this.checkRequired(t.name)},i.prototype.hideMessage=function(t){if(this.infoElement){this.infoElement.style.display="none",this.removeErrorRules(t);var r=this.inputElement.parentElement,s=r.parentElement;r.classList.contains("e-control-wrapper")||r.classList.contains("e-wrapper")||this.inputElement.classList.contains("e-input")&&r.classList.contains("e-input-group")?(r.classList.add(this.validClass),r.classList.remove(this.errorClass)):s!=null&&(s.classList.contains("e-control-wrapper")||s.classList.contains("e-wrapper"))?(s.classList.add(this.validClass),s.classList.remove(this.errorClass)):(this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass)),this.inputElement.setAttribute("aria-invalid","false")}},i.prototype.checkRequired=function(t){!this.rules[""+t][this.required]&&!this.inputElement.value.length&&!d(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(t))},i.isCheckable=function(t){var r=t.getAttribute("type");return r&&(r==="checkbox"||r==="radio"||r==="submit")};var e;return i.checkValidator={required:function(t){return isNaN(Date.parse(t.value))?t.value.toString().length>0:!isNaN(new Date(t.value).getTime())},email:function(t){return nn.EMAIL.test(t.value)},url:function(t){return nn.URL.test(t.value)},dateIso:function(t){return nn.DATE_ISO.test(t.value)},tel:function(t){return nn.PHONE.test(t.value)},creditcard:function(t){return nn.CREDITCARD.test(t.value)},number:function(t){return!isNaN(Number(t.value))&&String(t.value).indexOf(" ")===-1},digits:function(t){return nn.DIGITS.test(t.value)},maxLength:function(t){return t.value.length<=Number(t.param)},minLength:function(t){return t.value.length>=Number(t.param)},rangeLength:function(t){var r=t.param;return t.value.length>=r[0]&&t.value.length<=r[1]},range:function(t){var r=t.param;return!isNaN(Number(t.value))&&Number(t.value)>=r[0]&&Number(t.value)<=r[1]},date:function(t){if(!d(t.param)&&typeof t.param=="string"&&t.param!==""){var r=t.culture&&t.culture!==""?new je(t.culture):new je,s={format:t.param.toString(),type:"dateTime",skeleton:"yMd"},a=r.parseDate(t.value,s);return!d(a)&&a instanceof Date&&!isNaN(+a)}else return!isNaN(new Date(t.value).getTime())},max:function(t){if(!isNaN(Number(t.value)))return+t.value<=+t.param;if(t.format&&t.format!==""){var r=t.culture&&t.culture!==""?new je(t.culture):new je,s={format:t.format.toString(),type:"dateTime",skeleton:"yMd"},a=r.parseDate(t.value,s),o=typeof t.param=="string"?r.parseDate(JSON.parse(JSON.stringify(t.param)),s):t.param;return new Date(a).getTime()<=new Date(o).getTime()}else return new Date(t.value).getTime()<=new Date(JSON.parse(JSON.stringify(t.param))).getTime()},min:function(t){if(isNaN(Number(t.value)))if(t.value.indexOf(",")!==-1){var r=t.value.replace(/,/g,"");return parseFloat(r)>=Number(t.param)}else if(t.format&&t.format!==""){var s=t.culture&&t.culture!==""?new je(t.culture):new je,a={format:t.format.toString(),type:"dateTime",skeleton:"yMd"},o=s.parseDate(t.value,a),l=typeof t.param=="string"?s.parseDate(JSON.parse(JSON.stringify(t.param)),a):t.param;return new Date(o).getTime()>=new Date(l).getTime()}else return new Date(t.value).getTime()>=new Date(JSON.parse(JSON.stringify(t.param))).getTime();else return+t.value>=+t.param},regex:function(t){return new RegExp(t.param).test(t.value)},equalTo:function(t){var r=t.formElement.querySelector("#"+t.param);return t.param=r.value,t.param===t.value}},It([S("")],i.prototype,"locale",void 0),It([S("e-hidden")],i.prototype,"ignore",void 0),It([S()],i.prototype,"rules",void 0),It([S("e-error")],i.prototype,"errorClass",void 0),It([S("e-valid")],i.prototype,"validClass",void 0),It([S("label")],i.prototype,"errorElement",void 0),It([S("div")],i.prototype,"errorContainer",void 0),It([S(wl.Label)],i.prototype,"errorOption",void 0),It([_()],i.prototype,"focusout",void 0),It([_()],i.prototype,"keyup",void 0),It([_()],i.prototype,"click",void 0),It([_()],i.prototype,"change",void 0),It([_()],i.prototype,"submit",void 0),It([_()],i.prototype,"validationBegin",void 0),It([_()],i.prototype,"validationComplete",void 0),It([_()],i.prototype,"customPlacement",void 0),i=e=It([Ft],i),i}(hS),qS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Hp=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},zS="e-hscroll",Vr="e-rtl",Pr="e-overlay",jS="e-hscroll-bar",US="e-hscroll-content",Xn="e-nav-arrow",Zn="e-nav-right-arrow",vo="e-nav-left-arrow",ds="e-scroll-nav",qh="e-scroll-right-nav",Bp="e-scroll-left-nav",Fp="e-scroll-device",mo="e-scroll-overlay",zh="e-scroll-right-overlay",jh="e-scroll-left-overlay",Wp=40,YS=function(n){qS(i,n);function i(e,t){return n.call(this,e,t)||this}return i.prototype.preRender=function(){this.browser=H.info.name,this.browserCheck=this.browser==="mozilla",this.isDevice=H.isDevice,this.customStep=!0;var e=this.element;this.ieCheck=this.browser==="edge"||this.browser==="msie",this.initialize(),e.id===""&&(e.id=Nt("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(Vr)},i.prototype.render=function(){this.touchModule=new wr(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),C.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(Fp),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},i.prototype.setScrollState=function(){d(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},i.prototype.initialize=function(){var e=this.createElement("div",{className:US}),t=this.createElement("div",{className:jS});t.setAttribute("tabindex","-1");for(var r=this.element,s=[].slice.call(r.children),a=0,o=s;a<o.length;a++){var l=o[a];e.appendChild(l)}t.appendChild(e),r.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e},i.prototype.getPersistData=function(){var e=["scrollStep"];return this.addOnPersist(e)},i.prototype.getModuleName=function(){return"hScroll"},i.prototype.destroy=function(){var e=this.element;e.style.display="",e.classList.remove(zS),e.classList.remove(Fp),e.classList.remove(Vr);var t=ae(".e-"+e.id+"_nav."+ds,e),r=ae("."+mo,e);[].slice.call(r).forEach(function(l){Q(l)});for(var s=0,a=[].slice.call(this.scrollItems.children);s<a.length;s++){var o=a[s];e.appendChild(o)}this.uniqueId&&this.element.removeAttribute("id"),Q(this.scrollEle),t.length>0&&(Q(t[0]),d(t[1])||Q(t[1])),C.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,n.prototype.destroy.call(this)},i.prototype.disable=function(e){var t=ae(".e-scroll-nav:not(."+Pr+")",this.element);e?this.element.classList.add(Pr):this.element.classList.remove(Pr),[].slice.call(t).forEach(function(r){r.setAttribute("tabindex",e?"-1":"0")})},i.prototype.createOverlay=function(e){var t=e.id.concat("_nav"),r=this.createElement("div",{className:mo+" "+zh}),s="e-"+e.id.concat("_nav "+ds+" "+qh),a=this.createElement("div",{id:t.concat("_right"),className:s}),o=this.createElement("div",{className:Zn+" "+Xn+" e-icons"});a.appendChild(o);var l=this.createElement("div",{className:mo+" "+jh});this.ieCheck&&a.classList.add("e-ie-align"),e.appendChild(r),e.appendChild(a),e.insertBefore(l,e.firstChild),this.eventBinding([a])},i.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),r="e-"+e.id.concat("_nav "+ds+" "+qh),s={role:"button",id:t.concat("_right"),"aria-label":"Scroll right"},a=this.createElement("div",{className:r,attrs:s});a.setAttribute("aria-disabled","false");var o=this.createElement("div",{className:Zn+" "+Xn+" e-icons"}),l="e-"+e.id.concat("_nav "+ds+" "+Bp),h={role:"button",id:t.concat("_left"),"aria-label":"Scroll left"},c=this.createElement("div",{className:l+" "+Pr,attrs:h});c.setAttribute("aria-disabled","true");var u=this.createElement("div",{className:vo+" "+Xn+" e-icons"});c.appendChild(u),a.appendChild(o),e.appendChild(a),e.insertBefore(c,e.firstChild),this.ieCheck&&(a.classList.add("e-ie-align"),c.classList.add("e-ie-align")),this.eventBinding([a,c])},i.prototype.onKeyPress=function(e){var t=this;if(e.key==="Enter"){var r=function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)};this.keyTimer=window.setTimeout(function(){r()},100)}},i.prototype.onKeyUp=function(e){e.key==="Enter"&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},i.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach(function(r){new wr(r,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),r.addEventListener("keydown",t.onKeyPress.bind(t)),r.addEventListener("keyup",t.onKeyUp.bind(t)),r.addEventListener("mouseup",t.repeatScroll.bind(t)),r.addEventListener("touchend",t.repeatScroll.bind(t)),r.addEventListener("contextmenu",function(s){s.preventDefault()}),C.add(r,"click",t.clickEventHandler,t)})},i.prototype.repeatScroll=function(){clearInterval(this.timeout)},i.prototype.tabHoldHandler=function(e){var t=this,r=e.originalEvent.target;r=this.contains(r,ds)?r.firstElementChild:r;var s=10,a=function(){t.eleScrolling(s,r,!0)};this.timeout=window.setInterval(function(){a()},50)},i.prototype.contains=function(e,t){return e.classList.contains(t)},i.prototype.eleScrolling=function(e,t,r){var s=this.element,a=t.classList;a.contains(ds)&&(a=t.querySelector("."+Xn).classList),this.contains(s,Vr)&&this.browserCheck&&(e=-e),!this.contains(s,Vr)||this.browserCheck||this.ieCheck?a.contains(Zn)?this.frameScrollRequest(e,"add",r):this.frameScrollRequest(e,"",r):a.contains(vo)?this.frameScrollRequest(e,"add",r):this.frameScrollRequest(e,"",r)},i.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},i.prototype.swipeHandler=function(e){var t=this.scrollEle,r;e.velocity<=1?r=e.distanceX/(e.velocity*10):r=e.distanceX/e.velocity;var s=.5,a=function(){var o=Math.sin(s);o<=0?window.cancelAnimationFrame(o):(e.swipeDirection==="Left"?t.scrollLeft+=r*o:e.swipeDirection==="Right"&&(t.scrollLeft-=r*o),s-=.5,window.requestAnimationFrame(a))};a()},i.prototype.scrollUpdating=function(e,t){t==="add"?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e,this.enableRtl&&this.scrollEle.scrollLeft>0&&(this.scrollEle.scrollLeft=0)},i.prototype.frameScrollRequest=function(e,t,r){var s=this,a=10;if(r){this.scrollUpdating(e,t);return}this.customStep||[].slice.call(ae("."+mo,this.element)).forEach(function(l){e-=l.offsetWidth});var o=function(){var l,h;s.contains(s.element,Vr)&&s.browserCheck?(l=-e,h=-10):(l=e,h=a),l<a?window.cancelAnimationFrame(h):(s.scrollUpdating(h,t),e-=h,window.requestAnimationFrame(o))};o()},i.prototype.touchHandler=function(e){var t=this.scrollEle,r=e.distanceX;this.ieCheck&&this.contains(this.element,Vr)&&(r=-r),e.scrollDirection==="Left"?t.scrollLeft=t.scrollLeft+r:e.scrollDirection==="Right"&&(t.scrollLeft=t.scrollLeft-r)},i.prototype.arrowDisabling=function(e,t){if(this.isDevice){var r=d(e)?t:e,s=r.querySelector("."+Xn);d(e)?ii(s,[Zn],[vo]):ii(s,[vo],[Zn])}else e&&t&&(e.classList.add(Pr),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove(Pr),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0"));this.repeatScroll()},i.prototype.scrollHandler=function(e){var t=e.target,r=t.offsetWidth;this.element;var s=this.element.querySelector("."+Bp),a=this.element.querySelector("."+qh),o=this.element.querySelector("."+jh),l=this.element.querySelector("."+zh),h=t.scrollLeft;if(h<=0&&(h=-h),this.isDevice&&(this.enableRtl&&!(this.browserCheck||this.ieCheck)&&(o=this.element.querySelector("."+zh),l=this.element.querySelector("."+jh)),h<Wp?o.style.width=h+"px":o.style.width="40px",t.scrollWidth-Math.ceil(r+h)<Wp?l.style.width=t.scrollWidth-Math.ceil(r+h)+"px":l.style.width="40px"),h===0)this.arrowDisabling(s,a);else if(Math.ceil(r+h+.1)>=t.scrollWidth)this.arrowDisabling(a,s);else{var c=this.element.querySelector("."+ds+"."+Pr);c&&(c.classList.remove(Pr),c.setAttribute("aria-disabled","false"),c.setAttribute("tabindex","0"))}},i.prototype.onPropertyChanged=function(e,t){for(var r=0,s=Object.keys(e);r<s.length;r++){var a=s[r];switch(a){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(Vr):this.element.classList.remove(Vr);break}}},Hp([S(null)],i.prototype,"scrollStep",void 0),i=Hp([Ft],i),i}(_i),GS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),_p=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},$S="e-vscroll",go="e-rtl",Hr="e-overlay",KS="e-vscroll-bar",QS="e-vscroll-content",Jn="e-nav-arrow",yo="e-nav-up-arrow",ea="e-nav-down-arrow",ps="e-scroll-nav",qp="e-scroll-up-nav",Uh="e-scroll-down-nav",zp="e-scroll-device",bo="e-scroll-overlay",jp="e-scroll-up-overlay",Up="e-scroll-down-overlay",Yp=40,XS=function(n){GS(i,n);function i(e,t){return n.call(this,e,t)||this}return i.prototype.preRender=function(){this.browser=H.info.name,this.browserCheck=this.browser==="mozilla",this.isDevice=H.isDevice,this.customStep=!0;var e=this.element;this.ieCheck=this.browser==="edge"||this.browser==="msie",this.initialize(),e.id===""&&(e.id=Nt("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(go)},i.prototype.render=function(){this.touchModule=new wr(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),C.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add(zp),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),C.add(this.element,"wheel",this.wheelEventHandler,this)},i.prototype.setScrollState=function(){d(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},i.prototype.initialize=function(){var e=R("div",{className:QS}),t=R("div",{className:KS});t.setAttribute("tabindex","-1");for(var r=this.element,s=[].slice.call(r.children),a=0,o=s;a<o.length;a++){var l=o[a];e.appendChild(l)}t.appendChild(e),r.appendChild(t),t.style.overflow="hidden",this.scrollEle=t,this.scrollItems=e},i.prototype.getPersistData=function(){var e=["scrollStep"];return this.addOnPersist(e)},i.prototype.getModuleName=function(){return"vScroll"},i.prototype.destroy=function(){var e=this.element;e.style.display="",I([this.element],[$S,zp,go]);var t=ae(".e-"+e.id+"_nav."+ps,e),r=ae("."+bo,e);[].slice.call(r).forEach(function(l){Q(l)});for(var s=0,a=[].slice.call(this.scrollItems.children);s<a.length;s++){var o=a[s];e.appendChild(o)}this.uniqueId&&this.element.removeAttribute("id"),Q(this.scrollEle),t.length>0&&(Q(t[0]),d(t[1])||Q(t[1])),C.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,n.prototype.destroy.call(this)},i.prototype.disable=function(e){var t=ae(".e-scroll-nav:not(."+Hr+")",this.element);e?this.element.classList.add(Hr):this.element.classList.remove(Hr),[].slice.call(t).forEach(function(r){r.setAttribute("tabindex",e?"-1":"0")})},i.prototype.createOverlayElement=function(e){var t=e.id.concat("_nav"),r=R("div",{className:bo+" "+Up}),s="e-"+e.id.concat("_nav "+ps+" "+Uh),a=R("div",{id:t.concat("down"),className:s}),o=R("div",{className:ea+" "+Jn+" e-icons"});a.appendChild(o);var l=R("div",{className:bo+" "+jp});this.ieCheck&&a.classList.add("e-ie-align"),e.appendChild(r),e.appendChild(a),e.insertBefore(l,e.firstChild),this.eventBinding([a])},i.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),r="e-"+e.id.concat("_nav "+ps+" "+Uh),s=R("div",{id:t.concat("_down"),className:r});s.setAttribute("aria-disabled","false");var a=R("div",{className:ea+" "+Jn+" e-icons"}),o="e-"+e.id.concat("_nav "+ps+" "+qp),l=R("div",{id:t.concat("_up"),className:o+" "+Hr});l.setAttribute("aria-disabled","true");var h=R("div",{className:yo+" "+Jn+" e-icons"});l.appendChild(h),s.appendChild(a),s.setAttribute("tabindex","0"),e.appendChild(s),e.insertBefore(l,e.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),l.classList.add("e-ie-align")),this.eventBinding([s,l])},i.prototype.onKeyPress=function(e){var t=this;if(e.key==="Enter"){var r=function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)};this.keyTimer=window.setTimeout(function(){r()},100)}},i.prototype.onKeyUp=function(e){e.key==="Enter"&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},i.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach(function(r){new wr(r,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),r.addEventListener("keydown",t.onKeyPress.bind(t)),r.addEventListener("keyup",t.onKeyUp.bind(t)),r.addEventListener("mouseup",t.repeatScroll.bind(t)),r.addEventListener("touchend",t.repeatScroll.bind(t)),r.addEventListener("contextmenu",function(s){s.preventDefault()}),C.add(r,"click",t.clickEventHandler,t)})},i.prototype.repeatScroll=function(){clearInterval(this.timeout)},i.prototype.tabHoldHandler=function(e){var t=this,r=e.originalEvent.target;r=this.contains(r,ps)?r.firstElementChild:r;var s=10,a=function(){t.eleScrolling(s,r,!0)};this.timeout=window.setInterval(function(){a()},50)},i.prototype.contains=function(e,t){return e.classList.contains(t)},i.prototype.eleScrolling=function(e,t,r){var s=t.classList;s.contains(ps)&&(s=t.querySelector("."+Jn).classList),s.contains(ea)?this.frameScrollRequest(e,"add",r):s.contains(yo)&&this.frameScrollRequest(e,"",r)},i.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},i.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},i.prototype.swipeHandler=function(e){var t=this.scrollEle,r;e.velocity<=1?r=e.distanceY/(e.velocity*10):r=e.distanceY/e.velocity;var s=.5,a=function(){var o=Math.sin(s);o<=0?window.cancelAnimationFrame(o):(e.swipeDirection==="Up"?t.scrollTop+=r*o:e.swipeDirection==="Down"&&(t.scrollTop-=r*o),s-=.02,window.requestAnimationFrame(a))};a()},i.prototype.scrollUpdating=function(e,t){t==="add"?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},i.prototype.frameScrollRequest=function(e,t,r){var s=this,a=10;if(r){this.scrollUpdating(e,t);return}this.customStep||[].slice.call(ae("."+bo,this.element)).forEach(function(l){e-=l.offsetHeight});var o=function(){e<a?window.cancelAnimationFrame(a):(s.scrollUpdating(a,t),e-=a,window.requestAnimationFrame(o))};o()},i.prototype.touchHandler=function(e){var t=this.scrollEle,r=e.distanceY;e.scrollDirection==="Up"?t.scrollTop=t.scrollTop+r:e.scrollDirection==="Down"&&(t.scrollTop=t.scrollTop-r)},i.prototype.arrowDisabling=function(e,t){if(this.isDevice){var r=d(e)?t:e,s=r.querySelector("."+Jn);d(e)?ii(s,[ea],[yo]):ii(s,[yo],[ea])}else e.classList.add(Hr),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove(Hr),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},i.prototype.scrollEventHandler=function(e){var t=e.target,r=t.offsetHeight,s=this.element.querySelector("."+qp),a=this.element.querySelector("."+Uh),o=this.element.querySelector("."+jp),l=this.element.querySelector("."+Up),h=t.scrollTop;if(h<=0&&(h=-h),this.isDevice&&(h<Yp?o.style.height=h+"px":o.style.height="40px",t.scrollHeight-Math.ceil(r+h)<Yp?l.style.height=t.scrollHeight-Math.ceil(r+h)+"px":l.style.height="40px"),h===0)this.arrowDisabling(s,a);else if(Math.ceil(r+h+.1)>=t.scrollHeight)this.arrowDisabling(a,s);else{var c=this.element.querySelector("."+ps+"."+Hr);c&&(c.classList.remove(Hr),c.setAttribute("aria-disabled","false"),c.setAttribute("tabindex","0"))}},i.prototype.onPropertyChanged=function(e,t){for(var r=0,s=Object.keys(e);r<s.length;r++){var a=s[r];switch(a){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(go):this.element.classList.remove(go);break}}},_p([S(null)],i.prototype,"scrollStep",void 0),i=_p([Ft],i),i}(_i),ey=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ie=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},Yh="e-vertical",Fe="e-toolbar-items",He="e-toolbar-item",zi="e-rtl",Be="e-separator",So="e-popup-up-icon",an="e-popup-down-icon",Gp="e-popup-open",$p="e-template",Mt="e-overlay",Kp="e-toolbar-text",Gh="e-popup-text",Di="e-overflow-show",Eo="e-overflow-hide",ZS="e-tbar-btn",Xt="e-hor-nav",Qp="e-scroll-nav",JS="e-toolbar-right",eE="e-toolbar-left",Xp="e-toolbar-center",Ai="e-tbar-pos",tE="e-hscroll-content",iE="e-vscroll-content",$h="e-hscroll-bar",rE="e-hor-nav",ta="e-toolbar-pop",Br="e-toolbar-popup",sE="e-tbar-btn-text",ia="e-nav-active",ra="e-ignore",Co="e-popup-alone",xi="e-hidden",Zp="e-toolbar-multirow",Jp="e-multirow-pos",Kh="e-multirow-separator",Qh="e-extended-separator",ef="e-extended-toolbar",wo="e-toolbar-extended",nE="e-expended-nav",Xh="e-tbar-extended",aE=function(n){ey(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return Ie([S("")],i.prototype,"id",void 0),Ie([S("")],i.prototype,"text",void 0),Ie([S("auto")],i.prototype,"width",void 0),Ie([S("")],i.prototype,"cssClass",void 0),Ie([S(!1)],i.prototype,"showAlwaysInPopup",void 0),Ie([S(!1)],i.prototype,"disabled",void 0),Ie([S("")],i.prototype,"prefixIcon",void 0),Ie([S("")],i.prototype,"suffixIcon",void 0),Ie([S(!0)],i.prototype,"visible",void 0),Ie([S("None")],i.prototype,"overflow",void 0),Ie([S("")],i.prototype,"template",void 0),Ie([S("Button")],i.prototype,"type",void 0),Ie([S("Both")],i.prototype,"showTextOn",void 0),Ie([S(null)],i.prototype,"htmlAttributes",void 0),Ie([S("")],i.prototype,"tooltipText",void 0),Ie([S("Left")],i.prototype,"align",void 0),Ie([_()],i.prototype,"click",void 0),Ie([S(-1)],i.prototype,"tabIndex",void 0),i}(Kt),oE=function(n){ey(i,n);function i(e,t){var r=n.call(this,e,t)||this;return r.resizeContext=r.resize.bind(r),r.orientationChangeContext=r.orientationChange.bind(r),r.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},r}return i.prototype.destroy=function(){var e=this;(this.isReact||this.isAngular)&&this.clearTemplate();var t=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(t).forEach(function(r){!d(r)&&!d(r.ej2_instances)&&!d(r.ej2_instances[0])&&!r.ej2_instances[0].isDestroyed&&r.ej2_instances[0].destroy()}),this.unwireEvents(),this.tempId.forEach(function(r){d(e.element.querySelector(r))||(document.body.appendChild(e.element.querySelector(r)).style.display="none")}),this.destroyItems();this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&(this.element.appendChild(this.ctrlTem),this.trgtEle=null,this.ctrlTem=null),this.popObj&&(this.popObj.destroy(),Q(this.popObj.element)),this.activeEle&&(this.activeEle=null),this.popObj=null,this.tbarAlign=null,this.tbarItemsCol=[],this.remove(this.element,"e-toolpop"),this.cssClass&&I([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","role"].forEach(function(r){return e.element.removeAttribute(r)}),n.prototype.destroy.call(this)},i.prototype.preRender=function(){var e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains(Yh),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,zi)},i.prototype.wireEvents=function(){C.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),window.addEventListener("orientationchange",this.orientationChangeContext),this.allowKeyboard&&this.wireKeyboardEvent()},i.prototype.wireKeyboardEvent=function(){this.keyModule=new Ci(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),C.add(this.element,"keydown",this.docKeyDown,this),this.updateTabIndex("0")},i.prototype.updateTabIndex=function(e){var t=this.element.querySelector("."+He+":not(."+Mt+" ):not(."+Be+" ):not(."+xi+" )");if(!d(t)&&!d(t.firstElementChild)){var r=t.firstElementChild.getAttribute("data-tabindex");r&&r==="-1"&&t.firstElementChild.tagName!=="INPUT"&&t.firstElementChild.setAttribute("tabindex",e)}},i.prototype.unwireKeyboardEvent=function(){this.keyModule&&(C.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},i.prototype.docKeyDown=function(e){if(e.target.tagName!=="INPUT"){var t=!d(this.popObj)&&Tt(this.popObj.element)&&this.overflowMode!=="Extended";e.keyCode===9&&e.target.classList.contains("e-hor-nav")===!0&&t&&this.popObj.hide({name:"FadeOut",duration:100});var r=e.keyCode===40||e.keyCode===38||e.keyCode===35||e.keyCode===36;r&&e.preventDefault()}},i.prototype.unwireEvents=function(){C.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),window.removeEventListener("orientationchange",this.orientationChangeContext),document.removeEventListener("scroll",this.clickEvent),document.removeEventListener("click",this.scrollEvent),this.scrollEvent=null,this.clickEvent=null},i.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},i.prototype.docEvent=function(e){var t=M(e.target,".e-popup");if(this.popupTriggeredByToolbar){this.popupTriggeredByToolbar=!1;return}this.popObj&&Tt(this.popObj.element)&&!t&&this.overflowMode==="Popup"&&this.popObj.hide({name:"FadeOut",duration:100})},i.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,Ai),this.scrollModule.destroy(),this.scrollModule=null)},i.prototype.destroyItems=function(){if(this.element&&[].slice.call(this.element.querySelectorAll("."+He)).forEach(function(t){Q(t)}),this.tbarAlign){var e=this.element.querySelector("."+Fe);e&&(e.children&&[].slice.call(e.children).forEach(function(t){Q(t)}),this.remove(e,Ai)),this.tbarAlign=!1}this.clearProperty()},i.prototype.destroyMode=function(){this.scrollModule&&(this.remove(this.scrollModule.element,zi),this.destroyScroll()),this.remove(this.element,Xh),this.remove(this.element,ef);var e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,Zp),this.popObj&&this.popupRefresh(this.popObj.element,!0)},i.prototype.add=function(e,t){e.classList.add(t)},i.prototype.remove=function(e,t){e.classList.remove(t)},i.prototype.elementFocus=function(e){var t=e.firstElementChild;t?(t.focus(),this.activeEleSwitch(e)):e.focus()},i.prototype.clstElement=function(e,t){var r;return e&&this.popObj&&Tt(this.popObj.element)?r=this.popObj.element.querySelector("."+He):this.element===t||e?r=this.element.querySelector("."+He+":not(."+Mt+" ):not(."+Be+" ):not(."+xi+" )"):r=M(t,"."+He),r},i.prototype.getNextFocusableItem=function(e,t){var r="."+He+":not(."+Mt+"):not(."+Be+"):not(."+xi+")",s=Array.from(this.element.querySelectorAll(r)),a=s.indexOf(e);if(a<0)return null;var o;switch(t){case"moveRight":case"moveDown":case"tab":o=(a+1)%s.length;break;case"moveLeft":case"moveUp":o=(a-1+s.length)%s.length;break;case"home":o=0;break;case"end":o=s.length-1;break;default:o=a}return o>=0&&o<s.length?s[parseInt(o.toString(),10)]:null},i.prototype.keyHandling=function(e,t,r,s,a){var o=this.popObj,l=this.element,h={name:"FadeOut",duration:100},c=t.action==="moveUp"?"previous":"next",u,p;switch(t.action){case"moveRight":if(this.isVertical)return;l===r?this.elementFocus(e):s||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;s||this.eleFocus(e,"previous");break;case"home":case"end":if(e){var f=M(e,".e-popup"),v=this.element.querySelector("."+wo);this.overflowMode==="Extended"&&v&&v.classList.contains("e-popup-open")&&(f=t.action==="end"?v:null),f?Tt(this.popObj.element)&&(p=[].slice.call(f.children),t.action==="home"?u=this.focusFirstVisibleEle(p):u=this.focusLastVisibleEle(p)):(p=this.element.querySelectorAll("."+Fe+" ."+He+":not(."+Be+")"),t.action==="home"?u=this.focusFirstVisibleEle(p):u=this.focusLastVisibleEle(p)),u&&this.elementFocus(u)}break;case"moveUp":case"moveDown":if(this.isVertical)t.action==="moveUp"?this.eleFocus(e,"previous"):this.eleFocus(e,"next");else if(o&&M(r,".e-popup")){var m=o.element;if(c==="previous"&&m.firstElementChild===e){var g=this.focusLastVisibleEle([].slice.call(m.children));g&&this.elementFocus(g)}else if(c==="next"&&m.lastElementChild===e){var y=this.focusFirstVisibleEle([].slice.call(m.children));y&&this.elementFocus(y)}else this.eleFocus(e,c)}else if(t.action==="moveDown"&&o&&Tt(o.element)){var b=this.eleContains(e);b?this.eleFocus(e,c):this.elementFocus(e)}break;case"tab":if(!a&&!s){var E=e.firstElementChild;l===r&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(E),E.focus()))}break;case"popupClose":o&&this.overflowMode!=="Extended"&&o.hide(h);break;case"popupOpen":if(!s)return;o&&!Tt(o.element)?(o.element.style.top=l.offsetHeight+"px",o.show({name:"FadeIn",duration:100})):o.hide(h);break}},i.prototype.keyActionHandler=function(e){var t=this,r=e.target;if(!((e.action==="home"||e.action==="end"||e.action==="moveRight"||e.action==="moveLeft"||e.action==="moveUp"||e.action==="moveDown")&&(r.tagName==="INPUT"||r.tagName==="TEXTAREA"||this.element.classList.contains(Mt)))){e.preventDefault();var s=r.classList.contains(Xt),a=r.classList.contains(Qp),o=this.clstElement(s,r);if(o||a){var l=o,h=this.getNextFocusableItem(l,e.action),c={originalEvent:e,currentItem:l,nextItem:h,cancel:!1};this.trigger("keyDown",c,function(u){u.cancel||t.keyHandling(o,e,r,s,a)})}}},i.prototype.disable=function(e){var t=this.element;e?t.classList.add(Mt):t.classList.remove(Mt),this.activeEle&&this.activeEle.setAttribute("tabindex",this.activeEle.getAttribute("data-tabindex")),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(Tt(this.popObj.element)&&this.overflowMode!=="Extended"&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},i.prototype.eleContains=function(e){return e.classList.contains(Be)||e.classList.contains(Mt)||e.getAttribute("disabled")||e.classList.contains(xi)||!Tt(e)||!e.classList.contains(He)},i.prototype.focusFirstVisibleEle=function(e){for(var t,r=0;r<e.length;){var s=e[parseInt(r.toString(),10)];if(!s.classList.contains(Be)&&!s.classList.contains(xi)&&!s.classList.contains(Mt))return s;r++}return t},i.prototype.focusLastVisibleEle=function(e){for(var t,r=e.length-1;r>=0;){var s=e[parseInt(r.toString(),10)];if(!s.classList.contains(Be)&&!s.classList.contains(xi)&&!s.classList.contains(Mt))return s;r--}return t},i.prototype.eleFocus=function(e,t){var r=Object(e)[t+"ElementSibling"];if(r){var s=this.eleContains(r);if(s){this.eleFocus(r,t);return}this.elementFocus(r)}else if(this.tbarAlign){var a=Object(e.parentElement)[t+"ElementSibling"];if(!d(a)&&a.children.length===0&&(a=Object(a)[t+"ElementSibling"]),!d(a)&&a.children.length>0)if(t==="next"){var o=a.querySelector("."+He);this.eleContains(o)?this.eleFocus(o,t):(o.firstElementChild.focus(),this.activeEleSwitch(o))}else{var o=a.lastElementChild;this.eleContains(o)?this.eleFocus(o,t):this.elementFocus(o)}}else if(!d(e)){var l=this.element.querySelectorAll("."+Fe+" ."+He+":not(."+Be+"):not(."+Mt+"):not(."+xi+")");t==="next"&&l?this.elementFocus(l[0]):t==="previous"&&l&&this.elementFocus(l[l.length-1])}},i.prototype.clickHandler=function(e){var t=this,r=e.target,s=this.element,a=!d(M(r,"."+ta)),o=r.classList,l=M(r,"."+Xt),h=M(r,"."+an);(h||l)&&(this.popupTriggeredByToolbar=!0),l||(l=r),!s.children[0].classList.contains("e-hscroll")&&!s.children[0].classList.contains("e-vscroll")&&o.contains(Xt)&&(o=r.querySelector(".e-icons").classList),(o.contains(So)||o.contains(an))&&this.popupClickHandler(s,l,zi);var c,u=M(e.target,"."+He);if(!((d(u)||u.classList.contains(Mt))&&!l.classList.contains(Xt))){if(u){var p=this.items[this.tbarEle.indexOf(u)];c=p}var f={originalEvent:e,item:c},v=c&&!d(c.click)&&typeof c.click=="object"?!d(c.click.observers)&&c.click.observers.length>0:!d(c)&&!d(c.click);v&&this.trigger("items["+this.tbarEle.indexOf(u)+"].click",f),f.cancel||this.trigger("clicked",f,function(m){!d(t.popObj)&&a&&!m.cancel&&t.overflowMode==="Popup"&&m.item&&m.item.type!=="Input"&&t.popObj.hide({name:"FadeOut",duration:100})})}},i.prototype.popupClickHandler=function(e,t,r){var s=this.popObj;Tt(s.element)?(t.classList.remove(ia),s.hide({name:"FadeOut",duration:100})):(e.classList.contains(r)&&(s.enableRtl=!0,s.position={X:"left",Y:"top"}),s.offsetX===0&&!e.classList.contains(r)&&(s.enableRtl=!1,s.position={X:"right",Y:"top"}),this.overflowMode==="Extended"&&(s.element.style.minHeight="0px",s.width=this.getToolbarPopupWidth(this.element)),s.dataBind(),s.refreshPosition(),s.element.style.top=this.getElementOffsetY()+"px",t.classList.add(ia),s.show({name:"FadeIn",duration:100}))},i.prototype.getToolbarPopupWidth=function(e){var t=window.getComputedStyle(e);return parseFloat(t.width)+parseFloat(t.borderRightWidth)*2},i.prototype.render=function(){var e=this;this.initialize(),this.clickEvent=this.docEvent.bind(this),this.scrollEvent=this.docEvent.bind(this),this.renderControl(),this.wireEvents(),this.renderComplete(),this.isReact&&this.portals&&this.portals.length>0&&this.renderReactTemplates(function(){e.refreshOverflow()})},i.prototype.initialize=function(){var e=ce(this.width),t=ce(this.height);(H.info.name!=="msie"||this.height!=="auto"||this.overflowMode==="MultiRow")&&de(this.element,{height:t}),de(this.element,{width:e});var r={role:"toolbar","aria-disabled":"false","aria-orientation":this.isVertical?"vertical":"horizontal"};J(this.element,r),this.cssClass&&T([this.element],this.cssClass.split(" "))},i.prototype.renderControl=function(){var e=this.element;this.trgtEle=e.children.length>0?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},i.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},i.prototype.itemsAlign=function(e,t){var r,s;this.tbarEle||(this.tbarEle=[]);for(var a=0;a<e.length;a++)r=this.renderSubComponent(e[parseInt(a.toString(),10)],a),this.tbarEle.indexOf(r)===-1&&this.tbarEle.push(r),this.tbarAlign||this.tbarItemAlign(e[parseInt(a.toString(),10)],t,a),s=t.querySelector(".e-toolbar-"+e[parseInt(a.toString(),10)].align.toLowerCase()),s?(e[parseInt(a.toString(),10)].showAlwaysInPopup&&e[parseInt(a.toString(),10)].overflow!=="Show"||this.tbarAlgEle[(e[parseInt(a.toString(),10)].align+"s").toLowerCase()].push(r),s.appendChild(r)):t.appendChild(r);if(this.isReact){var o="portals";this.notify("render-react-toolbar-template",this[""+o]),this.renderReactTemplates()}},i.prototype.changeOrientation=function(){var e=this.element;this.isVertical?(e.classList.remove(Yh),this.isVertical=!1,(this.height==="auto"||this.height==="100%")&&(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add(Yh),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),de(this.element,{height:ce(this.height),width:ce(this.width)})),this.destroyMode(),this.refreshOverflow()},i.prototype.initScroll=function(e,t){if(!this.scrollModule&&this.checkOverflow(e,t[0])){this.tbarAlign&&this.element.querySelector("."+Fe+" ."+Xp).removeAttribute("style"),this.isVertical?this.scrollModule=new XS({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]):this.scrollModule=new YS({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]),this.cssClass&&T([t[0]],this.cssClass.split(" "));var r=this.scrollModule.element.querySelector("."+$h+", .e-vscroll-bar");r&&r.removeAttribute("tabindex"),this.remove(this.scrollModule.element,Ai),de(this.element,{overflow:"hidden"})}},i.prototype.itemWidthCal=function(e){var t=this,r=0,s;return[].slice.call(ae("."+He,e)).forEach(function(a){Tt(a)&&(s=window.getComputedStyle(a),r+=t.isVertical?a.offsetHeight:a.offsetWidth,r+=parseFloat(t.isVertical?s.marginTop:s.marginRight),r+=parseFloat(t.isVertical?s.marginBottom:s.marginLeft))}),r},i.prototype.getScrollCntEle=function(e){var t=this.isVertical?".e-vscroll-content":".e-hscroll-content";return e.querySelector(t)},i.prototype.checkOverflow=function(e,t){if(d(e)||d(t)||!Tt(e))return!1;var r=this.isVertical?e.offsetHeight:e.offsetWidth,s=this.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||r===s)&&(s=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));var a=e.querySelector("."+Xt),o=e.querySelector("."+Qp),l=0;return a?l=this.isVertical?a.offsetHeight:a.offsetWidth:o&&(l=this.isVertical?o.offsetHeight*2:o.offsetWidth*2),r>=s&&o?!1:s>r-l},i.prototype.refreshOverflow=function(){this.resize()},i.prototype.toolbarAlign=function(e){this.tbarAlign&&(this.add(e,Ai),this.itemPositioning())},i.prototype.renderOverflowMode=function(){var e=this.element,t=e.querySelector("."+Fe),r=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),H.info.name==="msie"&&this.height==="auto"&&(e.style.height=""),this.overflowMode){case"Scrollable":d(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName(Fe)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,t)||r)&&this.setOverflowAttributes(e),this.toolbarAlign(t);break;case"MultiRow":this.add(t,Zp),this.checkOverflow(e,t)&&this.tbarAlign&&(this.removePositioning(),this.add(t,Jp)),e.style.overflow==="hidden"&&(e.style.overflow=""),(H.info.name==="msie"||e.style.height!=="auto")&&(e.style.height="auto");break;case"Extended":this.add(this.element,ef),(this.checkOverflow(e,t)||r)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(t)}},i.prototype.setOverflowAttributes=function(e){this.createPopupEle(e,[].slice.call(ae("."+Fe+" ."+He,e)));var t={tabindex:"0",role:"button","aria-haspopup":"true","aria-label":"overflow"};J(this.element.querySelector("."+Xt),t)},i.prototype.separator=function(){var e=this.element,t=[].slice.call(e.querySelectorAll("."+Be)),r=e.querySelector("."+Kh),s=e.querySelector("."+Qh),a=this.overflowMode==="MultiRow"?r:s;a!==null&&(this.overflowMode==="MultiRow"?a.classList.remove(Kh):this.overflowMode==="Extended"&&a.classList.remove(Qh));for(var o=0;o<=t.length-1;o++)t[parseInt(o.toString(),10)].offsetLeft<30&&t[parseInt(o.toString(),10)].offsetLeft!==0&&(this.overflowMode==="MultiRow"?t[parseInt(o.toString(),10)].classList.add(Kh):this.overflowMode==="Extended"&&t[parseInt(o.toString(),10)].classList.add(Qh))},i.prototype.createPopupEle=function(e,t){var r=e.querySelector("."+Xt),s=this.isVertical;r||this.createPopupIcon(e),r=e.querySelector("."+Xt);var a=s?r.offsetHeight:r.offsetWidth,o=(s?e.offsetHeight:e.offsetWidth)-a;this.element.classList.remove("e-rtl"),de(this.element,{direction:"initial"}),this.checkPriority(e,t,o,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},i.prototype.pushingPoppedEle=function(e,t,r,s,a){var o=e.element,l=[].slice.call(ae("."+Br,o.querySelector("."+Fe))),h=ae("."+Di,r),c=0,u=0;l.forEach(function(m,g){if(h=ae("."+Di,r),m.classList.contains(Di)&&h.length>0)e.tbResize&&h.length>g?(r.insertBefore(m,h[parseInt(g.toString(),10)]),++u):(r.insertBefore(m,r.children[h.length]),++u);else if(m.classList.contains(Di))r.insertBefore(m,r.firstChild),++u;else if(e.tbResize&&m.classList.contains(Eo)&&r.children.length>0&&h.length===0)r.insertBefore(m,r.firstChild),++u;else if(m.classList.contains(Eo))t.push(m);else if(e.tbResize)r.insertBefore(m,r.childNodes[c+u]),++c;else{var y=Array.prototype.slice.call(r.children),b=y.slice(g).find(function(E){return!E.classList.contains(Co)});r.insertBefore(m,b||null)}m.classList.contains(Be)?de(m,{display:"",height:a+"px"}):de(m,{display:"",height:s+"px"})}),t.forEach(function(m){r.appendChild(m)});for(var p=ae("."+He,o.querySelector("."+Fe)),f=p.length-1;f>=0;f--){var v=p[parseInt(f.toString(),10)];if(v.classList.contains(Be)&&this.overflowMode!=="Extended")de(v,{display:"none"});else break}},i.prototype.createPopup=function(){var e=this.element,t,r;this.overflowMode==="Extended"&&(r=e.querySelector("."+Be),t=e.style.height==="auto"||e.style.height===""?null:r&&r.offsetHeight);var s=e.querySelector("."+He+":not(."+Be+"):not(."+Br+")"),a=e.style.height==="auto"||e.style.height===""?null:s&&s.offsetHeight,o,l=[];if(z("#"+e.id+"_popup."+ta,e))o=z("#"+e.id+"_popup."+ta,e);else{var h=this.createElement("div",{id:e.id+"_popup",className:ta+" "+wo}),c=this.createElement("div",{id:e.id+"_popup",className:ta});o=this.overflowMode==="Extended"?h:c}this.pushingPoppedEle(this,l,o,a,t),this.popupInit(e,o)},i.prototype.getElementOffsetY=function(){return this.overflowMode==="Extended"&&window.getComputedStyle(this.element).getPropertyValue("box-sizing")==="border-box"?this.element.clientHeight:this.element.offsetHeight},i.prototype.popupInit=function(e,t){if(this.popObj){if(this.overflowMode!=="Extended"){var a=this.popObj.element;de(a,{maxHeight:"",display:"block"}),de(a,{maxHeight:a.offsetHeight+"px",display:""})}}else{e.appendChild(t),this.cssClass&&T([t],this.cssClass.split(" ")),de(this.element,{overflow:""});var r=new xr(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(this.overflowMode==="Extended"&&(r.width=this.getToolbarPopupWidth(this.element),r.offsetX=0),r.appendTo(t),document.addEventListener("scroll",this.clickEvent),document.addEventListener("click",this.scrollEvent),this.overflowMode!=="Extended"&&(r.element.style.maxHeight=r.element.offsetHeight+"px"),this.isVertical&&(r.element.style.visibility="hidden"),this.isExtendedOpen){var s=this.element.querySelector("."+Xt);s.classList.add(ia),ii(s.firstElementChild,[So],[an]),this.element.querySelector("."+wo).classList.add(Gp)}else r.hide();this.popObj=r}},i.prototype.tbarPopupHandler=function(e){this.overflowMode==="Extended"&&(e?this.add(this.element,Xh):this.remove(this.element,Xh))},i.prototype.popupOpen=function(e){var t=this.popObj;this.isVertical||(t.offsetY=this.getElementOffsetY(),t.dataBind());var r=this.popObj.element,s=this.popObj.element.parentElement,a=s.querySelector("."+Xt);a.setAttribute("aria-expanded","true"),this.overflowMode==="Extended"?t.element.style.minHeight="":(de(t.element,{height:"auto",maxHeight:""}),t.element.style.maxHeight=t.element.offsetHeight+"px");var o=r.offsetTop+r.offsetHeight+cS(s).top,l=a.firstElementChild;a.classList.add(ia),ii(l,[So],[an]),this.tbarPopupHandler(!0);var h=d(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+h<o&&this.element.offsetTop<r.offsetHeight){var c=r.offsetHeight-(o-window.innerHeight-h+5);t.height=c+"px";for(var u=0;u<=r.childElementCount;u++){var p=r.children[parseInt(u.toString(),10)];if(p.offsetTop+p.offsetHeight>c){c=p.offsetTop;break}}this.overflowMode!=="Extended"&&de(t.element,{maxHeight:c+"px"})}else if(this.isVertical&&this.overflowMode!=="Extended"){var f=this.element.getBoundingClientRect();de(t.element,{maxHeight:f.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(t){var v=r.getBoundingClientRect();v.right>document.documentElement.clientWidth&&v.width>s.getBoundingClientRect().width&&(t.collision={Y:"none"},t.dataBind()),t.refreshPosition()}},i.prototype.popupClose=function(e){var t=this.element,r=t.querySelector("."+Xt);r.setAttribute("aria-expanded","false");var s=r.firstElementChild;r.classList.remove(ia),ii(s,[an],[So]),this.tbarPopupHandler(!1)},i.prototype.checkPriority=function(e,t,r,s){for(var a=this.popupPriCount>0,o=t.length,l=r,h,c,u=0,p=0,f=0,v=function(D,N){var x=!1;return N.forEach(function(j){D.classList.contains(j)&&(x=!0)}),x},m=o-1;m>=0;m--){var g=void 0,y=window.getComputedStyle(t[parseInt(m.toString(),10)]);this.isVertical?(g=parseFloat(y.marginTop),g+=parseFloat(y.marginBottom)):(g=parseFloat(y.marginRight),g+=parseFloat(y.marginLeft));var b=t[parseInt(m.toString(),10)]===this.tbarEle[0];b&&(this.tbarEleMrgn=g),h=this.isVertical?t[parseInt(m.toString(),10)].offsetHeight:t[parseInt(m.toString(),10)].offsetWidth;var E=b?h+g:h;if(v(t[parseInt(m.toString(),10)],[Co])&&a&&(t[parseInt(m.toString(),10)].classList.add(Br),this.isVertical?de(t[parseInt(m.toString(),10)],{display:"none",minHeight:E+"px"}):de(t[parseInt(m.toString(),10)],{display:"none",minWidth:E+"px"}),f++),this.isVertical?c=t[parseInt(m.toString(),10)].offsetTop+t[parseInt(m.toString(),10)].offsetHeight+g>r:c=t[parseInt(m.toString(),10)].offsetLeft+t[parseInt(m.toString(),10)].offsetWidth+g>r,c){if(t[parseInt(m.toString(),10)].classList.contains(Be)){if(this.overflowMode==="Extended"){var w=t[parseInt(m.toString(),10)];v(w,[Be,ra])&&(t[parseInt(m.toString(),10)].classList.add(Br),f++),p++}else if(this.overflowMode==="Popup"){if(u>0&&p===f){var w=t[m+p+(u-1)];v(w,[Be,ra])&&de(w,{display:"none"})}u++,p=0,f=0}}else p++;t[parseInt(m.toString(),10)].classList.contains(Di)&&s?r-=(this.isVertical?t[parseInt(m.toString(),10)].offsetHeight:t[parseInt(m.toString(),10)].offsetWidth)+g:v(t[parseInt(m.toString(),10)],[Be,ra])?r-=(this.isVertical?t[parseInt(m.toString(),10)].offsetHeight:t[parseInt(m.toString(),10)].offsetWidth)+g:(t[parseInt(m.toString(),10)].classList.add(Br),this.isVertical?de(t[parseInt(m.toString(),10)],{display:"none",minHeight:E+"px"}):de(t[parseInt(m.toString(),10)],{display:"none",minWidth:E+"px"}),f++)}}if(s){var A=ae("."+He+":not(."+Br+")",this.element);this.checkPriority(e,A,l,!1)}},i.prototype.createPopupIcon=function(e){var t=e.id.concat("_nav"),r="e-"+e.id.concat("_nav "+rE);r=this.overflowMode==="Extended"?r+" "+nE:r;var s=this.createElement("div",{id:t,className:r});(H.info.name==="msie"||H.info.name==="edge")&&s.classList.add("e-ie-align");var a=this.createElement("div",{className:an+" e-icons"});s.appendChild(a),s.setAttribute("tabindex","0"),s.setAttribute("role","button"),e.appendChild(s)},i.prototype.tbarPriRef=function(e,t,r,s,a,o,l,h,c){var u=h,p=this.popObj.element,f="."+He+":not(."+Be+"):not(."+Di+")",v=ae("."+Br+":not(."+Di+")",p).length,m=function(w,A){return w.classList.contains(A)};if(ae(f,e).length===0){var g=e.children[t-(t-r)-1],y=!d(g)&&m(g,ra);if(!d(g)&&m(g,Be)&&!Tt(g)||y){g.style.display="unset";var b=g.offsetWidth+parseFloat(window.getComputedStyle(g).marginRight)*2,E=g.previousElementSibling;o+b<l||a?(e.insertBefore(s,e.children[t+u-(t-r)]),d(E)||(E.style.display="")):(de(s,c),E.classList.contains(Be)&&(E.style.display="none")),g.style.display=""}else e.insertBefore(s,e.children[t+u-(t-r)])}else e.insertBefore(s,e.children[t+u-v])},i.prototype.popupRefresh=function(e,t){var r=this,s=this.element,a=this.isVertical,o=s.querySelector("."+Fe),l=s.querySelector("."+Xt);if(!d(l)){o.removeAttribute("style"),e.style.display="block";var h;a?h=s.offsetHeight-(l.offsetHeight+o.offsetHeight):h=s.offsetWidth-(l.offsetWidth+o.offsetWidth);var c=0;[].slice.call(e.children).forEach(function(u){c+=r.popupEleWidth(u),de(u,{position:""})}),h+(a?l.offsetHeight:l.offsetWidth)>c&&this.popupPriCount===0&&(t=!0),this.popupEleRefresh(h,e,t),e.style.display="",e.children.length===0&&l&&this.popObj&&(Q(l),l=null,this.popObj.destroy(),Q(this.popObj.element),this.popObj=null)}},i.prototype.ignoreEleFetch=function(e,t){var r=[].slice.call(t.querySelectorAll("."+ra)),s=[],a=0;if(r.length>0)r.forEach(function(o){s.push([].slice.call(t.children).indexOf(o))});else return 0;return s.forEach(function(o){o<=e&&a++}),a},i.prototype.checkPopupRefresh=function(e,t){t.style.display="block";var r=this.popupEleWidth(t.firstElementChild);t.firstElementChild.style.removeProperty("Position");var s=e.offsetWidth-e.querySelector("."+Xt).offsetWidth,a=e.querySelector("."+Fe).offsetWidth;return t.style.removeProperty("display"),s>r+a},i.prototype.popupEleWidth=function(e){e.style.position="absolute";var t=window.getComputedStyle(e),r=this.isVertical?e.offsetHeight:e.offsetWidth+parseFloat(t.marginLeft)+parseFloat(t.marginRight),s=e.querySelector("."+sE);if(e.classList.contains("e-tbtn-align")||e.classList.contains(Gh)){var a=e.children[0];!d(s)&&e.classList.contains(Gh)?s.style.display="none":!d(s)&&e.classList.contains(Kp)&&(s.style.display="block"),a.style.minWidth="0%",r=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),a.style.minWidth="",a.style.minHeight="",d(s)||(s.style.display="")}return r},i.prototype.popupEleRefresh=function(e,t,r){for(var s=this.popupPriCount>0,a=this.tbarEle,o,l,h=this.element.querySelector("."+Fe),c=0,u=function(b){if(b.classList.contains(Co)&&s&&!r)return"continue";var E=p.popupEleWidth(b);if(b===p.tbarEle[0]&&(E+=p.tbarEleMrgn),b.style.position="",E<e||r){var w={minWidth:b.style.minWidth,height:b.style.height,minHeight:b.style.minHeight};if(de(b,{minWidth:"",height:"",minHeight:""}),b.classList.contains(Eo)||b.classList.remove(Br),l=p.tbarEle.indexOf(b),p.tbarAlign){var A=p.items[parseInt(l.toString(),10)].align;l=p.tbarAlgEle[(A+"s").toLowerCase()].indexOf(b),a=p.tbarAlgEle[(A+"s").toLowerCase()],h=p.element.querySelector("."+Fe+" .e-toolbar-"+A.toLowerCase())}var D=0;p.overflowMode!=="Extended"&&a.slice(0,l).forEach(function(N){(N.classList.contains(Di)||N.classList.contains(Be))&&(N.classList.contains(Be)&&(N.style.display="",e-=N.offsetWidth),D++)}),c=p.ignoreEleFetch(l,h),b.classList.contains(Di)?(p.tbarPriRef(h,l,D,b,r,E,e,c,w),e-=b.offsetWidth):l===0?(h.insertBefore(b,h.firstChild),e-=b.offsetWidth):(o=ae("."+Di,p.popObj.element).length,h.insertBefore(b,h.children[l+c-o]),e-=b.offsetWidth),b.style.height=""}else return"break"},p=this,f=0,v=[].slice.call(t.children);f<v.length;f++){var m=v[f],g=u(m);if(g==="break")break}var y=this.checkOverflow(this.element,this.element.getElementsByClassName(Fe)[0]);y&&!r&&this.renderOverflowMode()},i.prototype.removePositioning=function(){var e=this.element.querySelector("."+Fe);if(!(d(e)||!e.classList.contains(Ai))){this.remove(e,Ai);var t=[].slice.call(e.childNodes);t[1].removeAttribute("style"),t[2].removeAttribute("style")}},i.prototype.refreshPositioning=function(){var e=this.element.querySelector("."+Fe);this.add(e,Ai),this.itemPositioning()},i.prototype.itemPositioning=function(){var e=this.element.querySelector("."+Fe),t;if(!(d(e)||!e.classList.contains(Ai))){var r=this.element.querySelector("."+Xt),s;if(this.scrollModule){var a=this.isVertical?iE:tE;s=[].slice.call(e.querySelector("."+a).children)}else s=[].slice.call(e.childNodes);this.isVertical?t=s[0].offsetHeight+s[2].offsetHeight:t=s[0].offsetWidth+s[2].offsetWidth;var o=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(r){o-=this.isVertical?r.offsetHeight:r.offsetWidth;var l=(this.isVertical?r.offsetHeight:r.offsetWidth)+"px";s[2].removeAttribute("style"),this.isVertical?this.enableRtl?s[2].style.top=l:s[2].style.bottom=l:this.enableRtl?s[2].style.left=l:s[2].style.right=l}if(!(o<=t)){var h=(o-t-(this.isVertical?s[1].offsetHeight:s[1].offsetWidth))/2;s[1].removeAttribute("style");var c=(this.isVertical?s[0].offsetHeight:s[0].offsetWidth)+h+"px";this.isVertical?this.enableRtl?s[1].style.marginBottom=c:s[1].style.marginTop=c:this.enableRtl?s[1].style.marginRight=c:s[1].style.marginLeft=c}}},i.prototype.tbarItemAlign=function(e,t,r){var s=this;if(!(e.showAlwaysInPopup&&e.overflow!=="Show")){var a=[];if(a.push(this.createElement("div",{className:eE,attrs:{role:"group"}})),a.push(this.createElement("div",{className:Xp,attrs:{role:"group"}})),a.push(this.createElement("div",{className:JS,attrs:{role:"group"}})),r===0&&e.align!=="Left")a.forEach(function(h){t.appendChild(h)}),this.tbarAlign=!0,this.add(t,Ai);else if(e.align!=="Left"){var o=t.childNodes,l=a[0];[].slice.call(o).forEach(function(h){s.tbarAlgEle.lefts.push(h),l.appendChild(h)}),t.appendChild(l),t.appendChild(a[1]),t.appendChild(a[2]),this.tbarAlign=!0,this.add(t,Ai)}}},i.prototype.ctrlTemplate=function(){var e=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,Fe),this.tbarEle=[];var t=[].slice.call(this.trgtEle.children);t.forEach(function(r){r.tagName==="DIV"&&(e.tbarEle.push(r),d(r.firstElementChild)||r.firstElementChild.setAttribute("aria-disabled","false"),e.add(r,He))})},i.prototype.renderItems=function(){var e=this.element,t=this.items;if(this.trgtEle!=null)this.ctrlTemplate();else if(e&&t.length>0){var r=void 0;e&&e.children.length>0&&(r=e.querySelector("."+Fe)),r||(r=this.createElement("div",{className:Fe})),this.itemsAlign(t,r),e.appendChild(r)}},i.prototype.setAttr=function(e,t){for(var r=Object.keys(e),s,a=0;a<r.length;a++)s=r[parseInt(a.toString(),10)],s==="class"?this.add(t,e[""+s]):t.setAttribute(s,e[""+s])},i.prototype.enableItems=function(e,t){var r=this,s=e,a=s.length,o;d(t)&&(t=!0);var l=function(p,f){p?(f.classList.remove(Mt),d(f.firstElementChild)||(f.firstElementChild.setAttribute("aria-disabled","false"),r.updateTabIndex("0"))):(f.classList.add(Mt),d(f.firstElementChild)||(f.firstElementChild.setAttribute("aria-disabled","true"),f.firstElementChild.setAttribute("tabindex","-1"),r.updateTabIndex("0")))};if(!d(a)&&a>=1){for(var h=0,c=[].slice.call(s);h<a;h++){var u=c[parseInt(h.toString(),10)];if(typeof u=="number"){if(o=this.getElementByIndex(u),d(o))return;s[parseInt(h.toString(),10)]=o}else o=u;l(t,o)}t?I(s,Mt):T(s,Mt)}else{if(typeof s=="number"){if(o=this.getElementByIndex(s),d(o))return}else o=e;l(t,o)}},i.prototype.getElementByIndex=function(e){return this.tbarEle[parseInt(e.toString(),10)]?this.tbarEle[parseInt(e.toString(),10)]:null},i.prototype.addItems=function(e,t){var r;this.extendedOpen();var s=this.element.querySelector("."+Fe);if(d(s)){this.itemsRerender(e);return}var a,o="Left";d(t)&&(t=0),e.forEach(function(f){!d(f.align)&&f.align!=="Left"&&o==="Left"&&(o=f.align)});for(var l=0,h=e;l<h.length;l++){var c=h[l];if(d(c.type)&&(c.type="Button"),r=ae("."+He,this.element),c.align=o,a=this.renderSubComponent(c,t),this.tbarEle.length>=t&&r.length>=0){d(this.scrollModule)&&this.destroyMode();var u=c.align[0]==="L"?0:c.align[0]==="C"?1:2,p=void 0;!this.tbarAlign&&o!=="Left"?(this.tbarItemAlign(c,s,1),this.tbarAlign=!0,p=M(r[0],"."+Fe).children[parseInt(u.toString(),10)],p.appendChild(a),this.tbarAlgEle[(c.align+"s").toLowerCase()].push(a),this.refreshPositioning()):this.tbarAlign?(p=M(r[0],"."+Fe).children[parseInt(u.toString(),10)],p.insertBefore(a,p.children[parseInt(t.toString(),10)]),this.tbarAlgEle[(c.align+"s").toLowerCase()].splice(t,0,a),this.refreshPositioning()):r.length===0?(r=ae("."+Fe,this.element),r[0].appendChild(a)):r[0].parentNode.insertBefore(a,r[parseInt(t.toString(),10)]),this.items.splice(t,0,c),c.template&&this.tbarEle.splice(this.tbarEle.length-1,1),this.tbarEle.splice(t,0,a),t++,this.offsetWid=s.offsetWidth}}s.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},i.prototype.removeItems=function(e){var t=e,r,s=[].slice.call(ae("."+He,this.element));if(typeof t=="number")r=parseInt(e.toString(),10),this.removeItemByIndex(r,s);else if(t&&t.length>1)for(var a=0,o=[].slice.call(t);a<o.length;a++){var l=o[a];r=this.tbarEle.indexOf(l),this.removeItemByIndex(r,s),s=ae("."+He,this.element)}else{var l=t&&t.length&&t.length===1?t[0]:e;r=s.indexOf(l),this.removeItemByIndex(r,s)}this.resize()},i.prototype.removeItemByIndex=function(e,t){if(this.tbarEle[parseInt(e.toString(),10)]&&t[parseInt(e.toString(),10)]){var r=this.tbarEle.indexOf(t[parseInt(e.toString(),10)]);if(this.tbarAlign){var s=this.tbarAlgEle[(this.items[parseInt(r.toString(),10)].align+"s").toLowerCase()].indexOf(this.tbarEle[parseInt(r.toString(),10)]);this.tbarAlgEle[(this.items[parseInt(r.toString(),10)].align+"s").toLowerCase()].splice(parseInt(s.toString(),10),1)}this.isReact&&this.clearToolbarTemplate(t[parseInt(e.toString(),10)]);var a=t[parseInt(e.toString(),10)].querySelector(".e-control.e-btn");!d(a)&&!d(a.ej2_instances[0])&&!a.ej2_instances[0].isDestroyed&&a.ej2_instances[0].destroy(),Q(t[parseInt(e.toString(),10)]),this.items.splice(r,1),this.tbarEle.splice(r,1)}},i.prototype.templateRender=function(e,t,r,s){var a=r.type,o=e,l;if(typeof e=="object"&&(l=typeof o.appendTo=="function"),typeof e=="string"||!l){var h=void 0,c=e,u=new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i);c=typeof e=="string"?e.trim():e;try{if(typeof e=="object"&&!d(e.tagName))t.appendChild(e);else if(typeof e=="string"&&u.test(c))t.innerHTML=c;else if(document.querySelectorAll(c).length){var p=document.querySelector(c),f=p.outerHTML.trim();t.appendChild(p),p.style.display="",d(f)||this.tempId.push(c)}else h=At(c)}catch{h=At(c)}var v=void 0;if(!d(h)){var m=this.element.id+s+"_template";v=h({},this,"template",m,this.isStringTemplate,void 0,void 0,this.root)}!d(v)&&v.length>0&&[].slice.call(v).forEach(function(y){d(y.tagName)||(y.style.display=""),t.appendChild(y)})}else if(a==="Input"){var p=this.createElement("input");r.id?p.id=r.id:p.id=Nt("tbr-ipt"),t.appendChild(p),o.appendTo(p)}this.add(t,$p);var g=t.firstElementChild;d(g)||(g.setAttribute("tabindex",d(g.getAttribute("tabIndex"))?"-1":this.getDataTabindex(g)),g.setAttribute("data-tabindex",d(g.getAttribute("tabIndex"))?"-1":this.getDataTabindex(g))),this.tbarEle.push(t)},i.prototype.buttonRendering=function(e,t){var r=this.createElement("button",{className:ZS});r.setAttribute("type","button");var s=e.text,a,o;e.id?r.id=e.id:r.id=Nt("e-tbr-btn");var l=this.createElement("span",{className:"e-tbar-btn-text"});s?(l.innerHTML=this.enableHtmlSanitizer?Ar.sanitize(s):s,r.appendChild(l),r.classList.add("e-tbtn-txt")):this.add(t,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(a=e.prefixIcon+" e-icons",o="Left"):(a=e.suffixIcon+" e-icons",o="Right"));var h=new rh({iconCss:a,iconPosition:o});return h.createElement=this.createElement,h.appendTo(r),e.width&&de(r,{width:ce(e.width)}),r},i.prototype.renderSubComponent=function(e,t){var r,s=this.createElement("div",{className:He}),a=this.createElement("div",{innerHTML:this.enableHtmlSanitizer&&!d(e.tooltipText)?Ar.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,s),e.tooltipText&&s.setAttribute("title",a.textContent),e.cssClass&&(s.className=s.className+" "+e.cssClass),e.template)this.templateRender(e.template,s,e,t);else switch(e.type){case"Button":r=this.buttonRendering(e,s),r.setAttribute("tabindex",d(e.tabIndex)?"-1":e.tabIndex.toString()),r.setAttribute("data-tabindex",d(e.tabIndex)?"-1":e.tabIndex.toString()),r.setAttribute("aria-label",e.text||e.tooltipText),r.setAttribute("aria-disabled","false"),s.appendChild(r),s.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(s,Be);break}if(e.showTextOn){var o=e.showTextOn;o==="Toolbar"?(this.add(s,Kp),this.add(s,"e-tbtn-align")):o==="Overflow"&&this.add(s,Gh)}if(e.overflow){var l=e.overflow;l==="Show"?this.add(s,Di):l==="Hide"&&(s.classList.contains(Be)||this.add(s,Eo))}return e.overflow!=="Show"&&e.showAlwaysInPopup&&!s.classList.contains(Be)&&(this.add(s,Co),this.popupPriCount++),e.disabled&&this.add(s,Mt),e.visible===!1&&this.add(s,xi),s},i.prototype.getDataTabindex=function(e){return d(e.getAttribute("data-tabindex"))?"-1":e.getAttribute("data-tabindex")},i.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},i.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},i.prototype.activeEleRemove=function(e){var t=this.element.querySelector("."+He+":not(."+Mt+" ):not(."+Be+" ):not(."+xi+" )");if(d(this.activeEle)||(this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)),t&&t.removeAttribute("tabindex"),t=this.activeEle),this.activeEle=e,this.getDataTabindex(this.activeEle)==="-1")if(d(this.trgtEle)&&!e.parentElement.classList.contains($p)){if(!d(this.element.querySelector(".e-hor-nav"))&&this.element.querySelector(".e-hor-nav").classList.contains("e-nav-active")){this.updateTabIndex("0");var r=this.getDataTabindex(t)==="-1"?"0":this.getDataTabindex(t);t.setAttribute("tabindex",r)}else this.updateTabIndex("-1");e.removeAttribute("tabindex")}else{var s=parseInt(this.getDataTabindex(this.activeEle),10)+1;this.activeEle.setAttribute("tabindex",s.toString())}},i.prototype.getPersistData=function(){return this.addOnPersist([])},i.prototype.getModuleName=function(){return"toolbar"},i.prototype.itemsRerender=function(e){this.items=this.tbarItemsCol,(this.isReact||this.isAngular)&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},i.prototype.resize=function(){var e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&this.overflowMode==="Popup"&&this.popObj.hide();var t=this.checkOverflow(e,e.getElementsByClassName(Fe)[0]);if(!t){this.destroyScroll();var r=e.querySelector("."+Fe);d(r)||(this.remove(r,Jp),this.tbarAlign&&this.add(r,Ai))}t&&this.scrollModule&&this.offsetWid===e.offsetWidth||((this.offsetWid>e.offsetWidth||t)&&this.renderOverflowMode(),this.popObj&&(this.overflowMode==="Extended"&&(this.popObj.width=this.getToolbarPopupWidth(this.element)),this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()),this.element.querySelector("."+$h)&&(this.scrollStep=this.element.querySelector("."+$h).offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator())},i.prototype.orientationChange=function(){var e=this;setTimeout(function(){e.resize()},500)},i.prototype.extendedOpen=function(){var e=this.element.querySelector("."+wo);this.overflowMode==="Extended"&&e&&(this.isExtendedOpen=e.classList.contains(Gp))},i.prototype.updateHideEleTabIndex=function(e,t,r,s,a){r&&(s=a.indexOf(e));for(var o=a[++s];o;){var l=this.eleContains(o);if(!l){var h=o.firstElementChild.getAttribute("data-tabindex");t&&h==="-1"?o.firstElementChild.setAttribute("tabindex","0"):h!==o.firstElementChild.getAttribute("tabindex")&&o.firstElementChild.setAttribute("tabindex",h);break}o=a[++s]}},i.prototype.clearToolbarTemplate=function(e){if(this.registeredTemplate&&this.registeredTemplate.template)for(var t=this.registeredTemplate,r=0;r<t.template.length;r++){var s=t.template[parseInt(r.toString(),10)].rootNodes[0],a=M(s,"."+He);if(!d(a)&&a===e){this.clearTemplate(["template"],[t.template[parseInt(r.toString(),10)]]);break}}else if(this.portals&&this.portals.length>0)for(var o=this.portals,r=0;r<o.length;r++){var l=o[parseInt(r.toString(),10)],a=M(l.containerInfo,"."+He);if(!d(a)&&a===e){this.clearTemplate(["template"],r);break}}},i.prototype.onPropertyChanged=function(e,t){var r=this.element;this.extendedOpen();for(var s=0,a=Object.keys(e);s<a.length;s++){var o=a[s];switch(o){case"items":if(e.items instanceof Array&&t.items instanceof Array)this.itemsRerender(e.items);else for(var l=Object.keys(e.items),h=0;h<l.length;h++){var c=parseInt(Object.keys(e.items)[parseInt(h.toString(),10)],10),u=Object.keys(e.items[parseInt(c.toString(),10)])[0],p=Object(e.items[parseInt(c.toString(),10)])[""+u];if(this.tbarAlign||u==="align"){this.refresh(),this.trigger("created");break}var f=u==="showAlwaysInPopup"&&!p,v=u==="overflow"&&this.popupPriCount!==0;(f||this.items[parseInt(c.toString(),10)].showAlwaysInPopup&&v)&&--this.popupPriCount,d(this.scrollModule)&&this.destroyMode();var m=[].slice.call(ae("."+Fe+" ."+He,r));this.isReact&&this.items[parseInt(c.toString(),10)].template&&this.clearToolbarTemplate(m[parseInt(c.toString(),10)]),Q(m[parseInt(c.toString(),10)]),this.tbarEle.splice(c,1),this.addItems([this.items[parseInt(c.toString(),10)]],c),this.items.splice(c,1),this.items[parseInt(c.toString(),10)].template&&this.tbarEle.splice(this.items.length,1)}break;case"width":de(r,{width:ce(e.width)}),this.refreshOverflow();break;case"height":de(this.element,{height:ce(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(r,zi),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(r,zi):this.remove(r,zi),d(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,zi):this.remove(this.scrollModule.element,zi)),d(this.popObj)||(e.enableRtl?this.add(this.popObj.element,zi):this.remove(this.popObj.element,zi)),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":t.cssClass&&I([this.element],t.cssClass.split(" ")),e.cssClass&&T([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent();break}}},i.prototype.hideItem=function(e,t){var r=typeof e=="object",s=e,a;if(!(!r&&d(s))){var o=[].slice.call(ae("."+He,this.element));if(r)a=e;else if(this.tbarEle[parseInt(s.toString(),10)]){var l=[].slice.call(ae("."+He,this.element));a=l[parseInt(s.toString(),10)]}a&&(t?(a.classList.add(xi),a.classList.contains(Be)||(d(a.firstElementChild.getAttribute("tabindex"))||a.firstElementChild.getAttribute("tabindex")!=="-1")&&this.updateHideEleTabIndex(a,t,r,s,o)):(a.classList.remove(xi),a.classList.contains(Be)||this.updateHideEleTabIndex(a,t,r,s,o)),this.refreshOverflow())}},Ie([ol([],aE)],i.prototype,"items",void 0),Ie([S("auto")],i.prototype,"width",void 0),Ie([S("auto")],i.prototype,"height",void 0),Ie([S("")],i.prototype,"cssClass",void 0),Ie([S("Scrollable")],i.prototype,"overflowMode",void 0),Ie([S()],i.prototype,"scrollStep",void 0),Ie([S(!0)],i.prototype,"enableCollision",void 0),Ie([S(!0)],i.prototype,"enableHtmlSanitizer",void 0),Ie([S(!0)],i.prototype,"allowKeyboard",void 0),Ie([_()],i.prototype,"clicked",void 0),Ie([_()],i.prototype,"created",void 0),Ie([_()],i.prototype,"destroyed",void 0),Ie([_()],i.prototype,"beforeCreate",void 0),Ie([_()],i.prototype,"keyDown",void 0),i=Ie([Ft],i),i}(_i),sh=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),te=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},mi="e-treeview",tf="e-control",We="e-icon-collapsible",Ee="e-icon-expandable",le="e-list-item",fs="e-list-text",lE="e-text-wrap",hE="e-ie-wrap",Ce="e-list-parent",To="e-hover",St="e-active",Do="e-icons-spinner",cr="e-process",lt="e-icons",ct="e-text-content",Ao="e-input",rf="e-input-group",xo="e-tree-input",Zh="e-editing",sf="e-rtl",nf="e-interaction",cE="e-drag-item",af="e-droppable",ko="e-dragging",sa="e-sibling",Io="e-drop-in",na="e-drop-next",Jh="e-drop-out",ec="e-no-drop",uE="e-fullrow-wrap",ur="e-fullrow",on="e-selected",Mo="e-expanded",of="e-node-collapsed",ln="e-disable",dE="e-drop-count",Et="e-check",gi="e-stop",Pt="e-treeview-checkbox",ji="e-frame",pE="e-ripple-container",lf="e-ripple",fE="e-ripple-element",vs="e-node-focus",hf="e-list-img",vE="e-bigger",mE="e-small",gE="e-has-child",Oo="e-animation-active",cf="e-disabled",aa="e-prevent",uf={treeRole:"group",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""},yE=function(n){sh(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return te([S("child")],i.prototype,"child",void 0),te([S([])],i.prototype,"dataSource",void 0),te([S("expanded")],i.prototype,"expanded",void 0),te([S("hasChildren")],i.prototype,"hasChildren",void 0),te([S("htmlAttributes")],i.prototype,"htmlAttributes",void 0),te([S("iconCss")],i.prototype,"iconCss",void 0),te([S("id")],i.prototype,"id",void 0),te([S("imageUrl")],i.prototype,"imageUrl",void 0),te([S("isChecked")],i.prototype,"isChecked",void 0),te([S("parentID")],i.prototype,"parentID",void 0),te([S(null)],i.prototype,"query",void 0),te([S("selectable")],i.prototype,"selectable",void 0),te([S("selected")],i.prototype,"selected",void 0),te([S(null)],i.prototype,"tableName",void 0),te([S("text")],i.prototype,"text",void 0),te([S("tooltip")],i.prototype,"tooltip",void 0),te([S("navigateUrl")],i.prototype,"navigateUrl",void 0),i}(Kt),df=function(n){sh(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return te([S("SlideDown")],i.prototype,"effect",void 0),te([S(400)],i.prototype,"duration",void 0),te([S("linear")],i.prototype,"easing",void 0),i}(Kt),bE=function(n){sh(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return te([st({effect:"SlideUp",duration:400,easing:"linear"},df)],i.prototype,"collapse",void 0),te([st({effect:"SlideDown",duration:400,easing:"linear"},df)],i.prototype,"expand",void 0),i}(Kt),SE=function(n){sh(i,n);function i(t,r){var s=n.call(this,t,r)||this;return s.isRefreshed=!1,s.preventExpand=!1,s.checkedElement=[],s.disableNode=[],s.validArr=[],s.validNodes=[],s.expandChildren=[],s.isFieldChange=!1,s.changeDataSource=!1,s.hasTemplate=!1,s.isFirstRender=!1,s.batchParentNode=new Set,s.isNodeDropped=!1,s.isInteracted=!1,s.isRightClick=!1,s.mouseDownStatus=!1,s.isDropIn=!1,s.OldCheckedData=[],s.isHiddenItem=!1,s}e=i,i.prototype.getModuleName=function(){return"treeview"},i.prototype.preRender=function(){var t=this;this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",shiftSpace:"shift+space",ctrlSpace:"ctrl+space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:Ee,ariaAttributes:uf,expandIconPosition:"Left",itemCreated:function(r){t.beforeNodeCreate(r)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new wi({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),this.DDTTreeData=JSON.parse(JSON.stringify(this.fields.dataSource)),d(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),d(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),d(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0},i.prototype.getPersistData=function(){var t=["selectedNodes","checkedNodes","expandedNodes"];return this.addOnPersist(t)},i.prototype.render=function(){this.initialRender=!0,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.initialRender=!1,this.renderComplete()},i.prototype.initialize=function(){this.element.setAttribute("role","tree"),!d(this.fields.dataSource)&&Array.isArray(this.fields.dataSource)&&this.fields.dataSource.length!==0&&this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect),this.setTextWrap(),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)},i.prototype.setDisabledMode=function(){this.disabled?(this.element.classList.add(cf),this.element.setAttribute("aria-disabled","true")):(this.element.classList.remove(cf),this.element.setAttribute("aria-disabled","false"))},i.prototype.setEnableRtl=function(){(this.enableRtl?T:I)([this.element],sf)},i.prototype.setRipple=function(){var t="."+ur+",."+ct,r={selector:t,ignore:"."+ct+" > ."+lt+",."+rf+",."+Ao+", ."+Pt};this.rippleFn=Xr(this.element,r);var s={selector:"."+ct+" > ."+lt,isCenterRipple:!0};this.rippleIconFn=Xr(this.element,s)},i.prototype.setFullRow=function(t){(t?T:I)([this.element],uE)},i.prototype.setMultiSelect=function(t){t?this.element.setAttribute("aria-multiselectable","true"):this.element.setAttribute("aria-multiselectable","false")},i.prototype.templateComplier=function(t){if(t){this.hasTemplate=!0,this.element.classList.add(nf);try{return typeof t!="function"&&document.querySelectorAll(t).length?At(document.querySelector(t).innerHTML.trim()):At(t)}catch{return At(t)}}this.element.classList.remove(nf)},i.prototype.setDataBinding=function(t){var r=this;this.treeList.push("false"),this.fields.dataSource instanceof K?(this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then(function(s){r.isOffline=r.fields.dataSource.dataSource.offline,r.fields.dataSource instanceof K&&r.isOffline&&(r.treeList.pop(),r.treeData=s.result,r.isNumberTypeId=r.getType(),r.setRootData(),r.renderItems(!0),r.treeList.length===0&&!r.isLoaded&&r.finalize())}).catch(function(s){r.trigger("actionFailure",{error:s})}):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function(s){r.treeList.pop(),r.treeData=s.result,r.isNumberTypeId=r.getType(),r.setRootData(),t&&(r.changeDataSource=!0),r.renderItems(!0),r.changeDataSource=!1,r.treeList.length===0&&!r.isLoaded&&r.finalize()}).catch(function(s){r.trigger("actionFailure",{error:s})})):(this.treeList.pop(),d(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),this.treeList.length===0&&!this.isLoaded&&this.finalize()},i.prototype.getQuery=function(t,r){r===void 0&&(r=null);var s=[],a;if(t.query)a=t.query.clone();else{a=new Se;for(var o=this.getActualProperties(t),l=0,h=Object.keys(o);l<h.length;l++){var c=h[l];c!=="dataSource"&&c!=="tableName"&&c!=="child"&&t[""+c]&&c!=="url"&&s.indexOf(t[""+c])===-1&&s.push(t[""+c])}a.select(s),Object.prototype.hasOwnProperty.call(o,"tableName")&&a.from(t.tableName)}return gt.addSorting(this.sortOrder,t.text,a),!d(r)&&!d(t.parentID)&&a.where(t.parentID,"equal",this.isNumberTypeId?parseFloat(r):r),a},i.prototype.getType=function(){return this.treeData[0]?typeof V(this.fields.id,this.treeData[0])=="number":!1},i.prototype.setRootData=function(){if(this.dataType=this.getDataType(this.treeData,this.fields),this.dataType===1){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);var t=this.getChildNodes(this.treeData,void 0,!0);d(t)?this.rootData=[]:this.rootData=t}else this.rootData=this.treeData},i.prototype.isChildObject=function(){return typeof this.fields.child=="object"},i.prototype.renderItems=function(t){this.listBaseOption.ariaAttributes.level=1;var r=this.getSortedData(this.rootData);this.ulElement=gt.createList(this.createElement,t?this.rootData:r,this.listBaseOption),this.element.appendChild(this.ulElement);var s=this.ulElement.querySelectorAll(".e-list-item");if(this.loadOnDemand===!1)for(var a=0;a<s.length;)this.renderChildNodes(s[parseInt(a.toString(),10)],!0,null,!0),a++;var o=ae("."+Ce,this.element);(o.length===1&&s&&s.length!==0||this.loadOnDemand)&&this.finalizeNode(this.element),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()},i.prototype.updateCheckedStateFromDS=function(){if(this.validNodes=[],this.treeData&&this.showCheckBox){if(this.dataType===1){for(var t=this.fields,r=new K(this.treeData).executeLocal(new Se().where(t.isChecked,"equal",!0,!1)),s=0;s<r.length;s++){var a=r[parseInt(s.toString(),10)][this.fields.id]?r[parseInt(s.toString(),10)][this.fields.id].toString():null;if(this.checkedNodes.indexOf(a)===-1&&!this.isLoaded&&this.checkDisabledState(a,r[s]),r[parseInt(s.toString(),10)][this.fields.hasChildren])for(var o=r[parseInt(s.toString(),10)][this.fields.id],l=new K(this.treeData).executeLocal(new Se().where(t.parentID,"equal",o,!1)),h=0;h<l.length;h++){var c=l[parseInt(h.toString(),10)][this.fields.id]?l[parseInt(h.toString(),10)][this.fields.id].toString():null;this.checkedNodes.indexOf(c)===-1&&this.autoCheck&&this.checkDisabledState(c,l[h])}}for(var s=0;s<this.checkedNodes.length;s++){var u=this.fields,p=new K(this.treeData).executeLocal(new Se().where(u.id,"equal",this.checkedNodes[parseInt(s.toString(),10)],!0));if(p[0]&&this.autoCheck&&(this.getCheckedNodeDetails(u,p),this.checkIndeterminateState(p[0])),p.length>0){var f=p[0][this.fields.id]?p[0][this.fields.id].toString():null;this.checkedNodes.indexOf(f)>-1&&this.validNodes.indexOf(f)===-1&&this.validNodes.push(f)}for(var v=new K(this.treeData).executeLocal(new Se().where(u.parentID,"equal",this.checkedNodes[parseInt(s.toString(),10)],!0)),m=0;m<v.length;m++){var f=v[parseInt(m.toString(),10)][this.fields.id]?v[parseInt(m.toString(),10)][this.fields.id].toString():null;this.checkedNodes.indexOf(f)===-1&&this.autoCheck&&this.checkDisabledState(f,v[m]),this.checkedNodes.indexOf(f)>-1&&this.validNodes.indexOf(f)===-1&&this.validNodes.push(f)}}}else if(this.dataType===2||this.fields.dataSource instanceof K&&this.isOffline){for(var m=0;m<this.treeData.length;m++){var g=this.treeData[parseInt(m.toString(),10)][this.fields.id]?this.treeData[parseInt(m.toString(),10)][this.fields.id].toString():"";this.treeData[parseInt(m.toString(),10)][this.fields.isChecked]&&!this.isLoaded&&this.checkedNodes.indexOf(g)===-1&&this.checkDisabledState(g,this.treeData[m]),this.checkedNodes.indexOf(g)>-1&&this.validNodes.indexOf(g)===-1&&this.validNodes.push(g);var y=V(this.fields.child.toString(),this.treeData[parseInt(m.toString(),10)]);y&&this.updateChildCheckState(y,this.treeData[parseInt(m.toString(),10)])}this.validNodes=this.enablePersistence?this.checkedNodes:this.validNodes}this.setProperties({checkedNodes:this.validNodes},!0)}},i.prototype.getCheckedNodeDetails=function(t,r){var s=r[0][this.fields.parentID]?r[0][this.fields.parentID].toString():null,a=0,o=this.element.querySelector('[data-uid="'+r[0][this.fields.id]+'"]'),l=this.element.querySelector('[data-uid="'+r[0][this.fields.parentID]+'"]');if(!o&&!l){this.parentNodeCheck.indexOf(s)===-1&&this.parentNodeCheck.push(s);for(var h=this.getChildNodes(this.treeData,s),c=0;c<h.length;c++){var u=h[parseInt(c.toString(),10)][this.fields.id]?h[parseInt(c.toString(),10)][this.fields.id].toString():null;this.checkedNodes.indexOf(u)!==-1&&a++,a===h.length&&this.checkedNodes.indexOf(s)===-1&&this.checkDisabledState(s)}var p=new K(this.treeData).executeLocal(new Se().where(t.id,"equal",s,!0));this.getCheckedNodeDetails(t,p)}else if(l){var f=z("."+Et,l);f||this.changeState(l,"indeterminate",null,!0,!0)}},i.prototype.updateParentCheckState=function(){var t=ae("."+gi,this.element),r,s=this.treeData;this.element.classList.contains("e-filtering")&&(s=this.DDTTreeData);for(var a=0;a<t.length;a++){var o=M(t[parseInt(a.toString(),10)],"."+le),l=o.getAttribute("data-uid").toString(),h=void 0;this.element.classList.contains("e-filtering")&&(h=new K(this.OldCheckedData).executeLocal(new Se().where("parentID","equal",l,!0))),this.dataType===1?r=new K(s).executeLocal(new Se().where(this.fields.parentID,"equal",l,!0)):r=this.getChildNodes(s,l);var c=0;if(r){for(var u=function(m){var g=r[parseInt(m.toString(),10)][p.fields.id].toString();(p.checkedNodes.indexOf(g)!==-1||p.element.classList.contains("e-filtering")&&h.findIndex(function(y){return y.id===g})!==-1)&&c++},p=this,f=0;f<r.length;f++)u(f);if(c===r.length){var v=o.getAttribute("data-uid");this.checkedNodes.indexOf(v)===-1&&this.checkDisabledState(v),this.changeState(o,"check",null,!0,!0)}else c===0&&this.checkedNodes.length===0&&t.length===0&&this.changeState(o,"uncheck",null,!0,!0)}}},i.prototype.checkIndeterminateState=function(t){var r;if(this.dataType===1?r=this.element.querySelector('[data-uid="'+t[this.fields.parentID]+'"]'):r=this.element.querySelector('[data-uid="'+t[this.fields.id]+'"]'),r){var s=r.getAttribute("aria-checked");s!=="true"&&this.changeState(r,"indeterminate",null,!0,!0)}else this.dataType===2&&this.parentNodeCheck.indexOf(t[this.fields.id].toString())===-1&&this.parentNodeCheck.push(t[this.fields.id].toString())},i.prototype.updateChildCheckState=function(t,r){for(var s=0,a=r[this.fields.id]?r[this.fields.id].toString():"",o=0;o<t.length;o++){var l=t[parseInt(o.toString(),10)][this.fields.id]?t[parseInt(o.toString(),10)][this.fields.id].toString():"";t[parseInt(o.toString(),10)][this.fields.isChecked]&&!this.isLoaded&&this.checkedNodes.indexOf(l)===-1&&this.checkDisabledState(l,t[o]),this.checkedNodes.indexOf(a)!==-1&&this.checkedNodes.indexOf(l)===-1&&this.autoCheck&&this.checkDisabledState(l,t[o]),this.checkedNodes.indexOf(l)!==-1&&this.autoCheck&&s++,this.checkedNodes.indexOf(l)>-1&&this.validNodes.indexOf(l)===-1&&this.validNodes.push(l);var h=V(this.fields.child.toString(),t[parseInt(o.toString(),10)]);h&&h.length&&(this.parentCheckData.indexOf(r)===-1&&this.parentCheckData.push(r),this.updateChildCheckState(h,t[parseInt(o.toString(),10)])),s===t.length&&this.autoCheck&&this.checkedNodes.indexOf(a)===-1&&this.checkDisabledState(a,r)}if(s!==0&&this.autoCheck){this.checkIndeterminateState(r);for(var c=0;c<this.parentCheckData.length;c++)r!==this.parentCheckData[parseInt(c.toString(),10)]&&this.parentCheckData[parseInt(c.toString(),10)]&&this.checkIndeterminateState(this.parentCheckData[parseInt(c.toString(),10)])}this.parentCheckData=[]},i.prototype.beforeNodeCreate=function(t){if(this.showCheckBox){var r=uS(this.createElement,!0,{cssClass:this.touchClass});r.classList.add(Pt);var s=z("div."+Ee+", div."+We,t.item),a=t.item.getAttribute("data-uid");t.item.childNodes[0].insertBefore(r,t.item.childNodes[0].childNodes[d(s)?0:1]);var o=V(t.fields.isChecked,t.curData);this.checkedNodes.indexOf(a)>-1?(z("."+ji,r).classList.add(Et),t.item.setAttribute("aria-checked","true"),this.addCheck(t.item)):!d(o)&&o.toString()==="true"?(z("."+ji,r).classList.add(Et),t.item.setAttribute("aria-checked","true"),this.addCheck(t.item)):t.item.setAttribute("aria-checked","false");var l=z("."+ji,r);C.add(l,"mousedown",this.frameMouseHandler,this),C.add(l,"mouseup",this.frameMouseHandler,this),C.add(l,"mouseleave",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(t.item),this.allowMultiSelection&&!t.item.classList.contains(on)&&t.item.setAttribute("aria-selected","false");var h=t.fields;if(this.addActionClass(t,h.selected,on),this.addActionClass(t,h.expanded,Mo),t.item.setAttribute("tabindex","-1"),C.add(t.item,"focus",this.focusIn,this),!d(this.nodeTemplateFn)){var c=t.item.querySelector("."+fs),u=t.item.getAttribute("data-uid");c.innerHTML="",this.renderNodeTemplate(t.curData,c,u)}var p={node:t.item,nodeData:t.curData,text:t.text};if(!this.isRefreshed&&(this.trigger("drawNode",p),t.curData[this.fields.selectable]===!1&&!this.showCheckBox)){t.item.classList.add(aa);var f=t.item.firstElementChild;f.style.cursor="not-allowed"}},i.prototype.frameMouseHandler=function(t){var r=z("."+pE,t.target.parentElement);Ws(t,r)},i.prototype.addActionClass=function(t,r,s){var a=t.curData,o=V(r,a);!d(o)&&o.toString()!=="false"&&t.item.classList.add(s)},i.prototype.getDataType=function(t,r){if(this.fields.dataSource instanceof K){for(var s=0;s<t.length;s++)if(this.isOffline){if(typeof r.child=="string"&&d(V(r.child,t[parseInt(s.toString(),10)]))&&!d(V(r.parentID,t[parseInt(s.toString(),10)])))return 1}else if(typeof r.child=="string"&&d(V(r.child,t[parseInt(s.toString(),10)])))return 1;return 2}for(var s=0,a=t.length;s<a;s++){if(typeof r.child=="string"&&(!d(V(r.child,t[parseInt(s.toString(),10)]))||Object.prototype.hasOwnProperty.call(t[parseInt(s.toString(),10)],r.child))||this.isChildObject())return 2;if(!d(V(r.parentID,t[parseInt(s.toString(),10)]))||!d(V(r.hasChildren,t[parseInt(s.toString(),10)])))return 1}return 1},i.prototype.getGroupedData=function(t,r){for(var s=new Se().group(r),a=gt.getDataSource(t,s),o=[],l=0;l<a.length;l++){var h=a[parseInt(l.toString(),10)].items;o.push(h)}return o},i.prototype.getSortedData=function(t){return t&&this.sortOrder!=="None"&&(t=gt.getDataSource(t,gt.addSorting(this.sortOrder,this.fields.text))),t},i.prototype.finalizeNode=function(t,r,s){var a=this;if(r||this.updateAttributes(t),!s){var o=ae("."+Mo,t);if(!this.loadOnDemand&&this.fields.dataSource instanceof K&&(this.isInitalExpand=this.treeData.filter(function(h){return h[a.fields.expanded]===!0}).length>0?!0:this.isInitalExpand),!this.isInitalExpand)for(var l=0;l<o.length;l++)this.renderChildNodes(o[parseInt(l.toString(),10)]);I(o,Mo)}r||this.updateList(),this.isLoaded&&this.updateCheckedProp()},i.prototype.updateAttributes=function(t){for(var r=ae("."+hf,t),s=0;s<r.length;s++)r[parseInt(s.toString(),10)].setAttribute("alt",hf);if(this.isLoaded){for(var a=ae("."+on,t),o=0;o<a.length;o++){this.selectNode(a[parseInt(o.toString(),10)],null);break}I(a,on)}for(var l=ae("."+le+":not(."+Mo+")",t),h=0;h<l.length;h++){var c=z("div."+lt,l[parseInt(h.toString(),10)]);c&&c.classList.contains(Ee)&&this.disableExpandAttr(l[parseInt(h.toString(),10)])}},i.prototype.updateCheckedProp=function(){if(this.showCheckBox){var t=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:t},!0)}},i.prototype.ensureIndeterminate=function(){if(this.autoCheck)for(var t=ae("li",this.element),r=void 0,s=0;s<t.length;s++)t[parseInt(s.toString(),10)].classList.contains(le)&&(r=z("."+Ce,t[parseInt(s.toString(),10)]),r?this.ensureParentCheckState(t[parseInt(s.toString(),10)]):this.ensureChildCheckState(t[parseInt(s.toString(),10)]));else for(var a=ae("."+gi,this.element),s=0;s<a.length;s++)a[parseInt(s.toString(),10)].classList.remove(gi)},i.prototype.ensureParentCheckState=function(t){var r=this;if(!d(t)){if(t.classList.contains(mi))return;var s=t;t.classList.contains(le)&&(s=z("."+Ce,t));var a=ae("."+Pt+" ."+Et,s),o=ae("."+gi,s),l=ae(this.checkDisabledChildren?"."+le:"."+le+":not(."+ln+")",s),h=t.getElementsByClassName(Pt)[0],c=l.length,u=a.length,p=[],f=[],v=t.getAttribute("data-uid"),m=!0,g=!1,y=this.getAllChildNodes(this.DDTTreeData,v),b=0;l.forEach(function(q){if(q instanceof HTMLElement){var L=q.getAttribute("aria-checked");L==="true"?g=!0:m=!1}});var E=!1;if(this.element.classList.contains("e-filtering")){var w=new K(this.OldCheckedData).executeLocal(new Se().where("parentID","equal",v,!0));u=w.length;var A=new K(this.OldCheckedData).executeLocal(new Se().where("hasChildren","equal",!0,!0));A.length>0&&g&&(this.OldCheckedData.some(function(q){return q.id===v})||this.parentNodeCheck.indexOf(v)!==-1)&&(u=A.length,E=!0);var D=[];this.dataType===1?D=new K(this.DDTTreeData).executeLocal(new Se().where(this.fields.parentID,"equal",v,!0)):D=this.getChildNodes(this.DDTTreeData,v),c=D.length,y.forEach(function(q){var L=String(q[r.fields.id]);(r.checkedNodes.indexOf(L)!==-1||r.OldCheckedData.some(function(O){return O.parentID===L}))&&b++})}if(this.autoCheck&&this.showCheckBox&&!(this.fields.dataSource instanceof K)){var N=this.getSelectedChildNodeDetails(v);p=N,f=new K(this.checkActionNodes).executeLocal(new Se().where("parentID","equal",v,!0))}if(c===0&&u===0)return;c===u||E&&c>0&&(f.length===p.length||f.length!==p.length)&&f.length!==0&&p.length!==0&&m&&this.autoCheck&&this.showCheckBox?this.changeState(h,"check",null,!0,!0):u>0&&!E&&this.autoCheck&&this.showCheckBox?this.changeState(h,"indeterminate",null,!0,!0):u>0||o.length>0||b>0?this.changeState(h,"indeterminate",null,!0,!0):u===0&&this.changeState(h,"uncheck",null,!0,!0);var x=M(t,"."+Ce);if(!d(x)){var j=M(x,"."+le);this.ensureParentCheckState(j)}}},i.prototype.getSelectedChildNodeDetails=function(t){var r=this,s=typeof this.fields.child=="string"?this.fields.child:null,a=this.fields.id,o=this.fields.parentID;this.nodeIndex||(this.nodeIndex=new Map,this.buildNodeIndex(this.treeData));var l=function(h){if(!d(s)&&s in h&&Array.isArray(h[s])){var c=h[a];return!d(c)&&c.toString()===t}else{var u=h[o];return!d(u)&&u.toString()===t}};return this.checkedNodes.map(function(h){return r.nodeIndex.get(h)}).filter(function(h){return h&&typeof h=="object"&&s in h||r.dataType!==2&&typeof h=="object"&&(o in h||s in h)?l(h):!1})},i.prototype.buildNodeIndex=function(t){var r=this,s=typeof this.fields.child=="string"?this.fields.child:null;t.forEach(function(a){var o=V(r.fields.id,a);if(o!=null&&(r.nodeIndex||(r.nodeIndex=new Map),r.nodeIndex.set(o.toString(),a)),s){var l=V(s,a);Array.isArray(l)&&r.buildNodeIndex(l)}})},i.prototype.getAllChildNodes=function(t,r){if(d(t)||d(r))return[];if(this.dataType===1){var s=this.fields.parentID,a=r.toString();return t.filter(function(p){var f=V(s,p);return!d(f)&&f.toString()===a})}if(this.dataType===2){var o=this.fields.id,l=this.fields.child.toString(),h=r.toString(),c=t.find(function(p){var f=V(o,p);return!d(f)&&f.toString()===h});if(!c)return[];var u=V(l,c);return Array.isArray(u)?u:[]}return[]},i.prototype.ensureChildCheckState=function(t,r,s){var a=this;if(!d(t)){var o=z("."+Ce,t),l=void 0;if(!d(o)){var h=Array.from(o.querySelectorAll("li"));l=ae("."+Pt,o),this.isFilter&&(l=Array.from(l).filter(function(g){var y=g.closest("li").getAttribute("data-uid");return y!==null&&a.checkedNodes.indexOf(y)!==-1}),h=Array.from(h).filter(function(g){var y=g.getAttribute("data-uid");return y!==null&&a.checkedNodes.indexOf(y)!==-1}),l.length===0&&(l=ae("."+Pt,o),h=Array.from(o.querySelectorAll("li"))));for(var c=t.getElementsByClassName(ji)[0].classList.contains(Et),u=t.getElementsByClassName(ji)[0].classList.contains(gi),p=void 0,f=0;f<l.length;f++){var v=h[parseInt(f.toString(),10)].getAttribute("data-uid");if(!d(this.currentLoadData)&&!d(V(this.fields.isChecked,this.currentLoadData[parseInt(f.toString(),10)])))p=V(this.fields.isChecked,this.currentLoadData[parseInt(f.toString(),10)])?"check":"uncheck",this.ele!==-1&&(p=c?"check":"uncheck"),p==="uncheck"&&!Ns(this.parentNodeCheck)&&this.autoCheck&&this.parentNodeCheck.indexOf(v)!==-1&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(v),1),p="indeterminate");else{var m=l[parseInt(f.toString(),10)].getElementsByClassName(ji)[0].classList.contains(Et);c||m&&!this.isLoaded||this.checkedNodes.indexOf(v)!==-1&&this.isLoaded&&(u||c)?p="check":h[parseInt(f.toString(),10)].classList.contains(gE)&&!Ns(this.parentNodeCheck)&&this.autoCheck&&(c||u)&&this.parentNodeCheck.indexOf(v)!==-1?(p="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(v),1)):this.dataType===1&&!Ns(this.parentNodeCheck)&&this.autoCheck&&(c||u)&&this.parentNodeCheck.indexOf(v)!==-1?(p="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(v),1)):p="uncheck"}this.changeState(l[parseInt(f.toString(),10)],p,r,!0,!0)}}this.autoCheck&&this.isLoaded&&!s&&this.updateParentCheckState()}},i.prototype.doCheckBoxAction=function(t,r){var s=this;if(d(t)){var v=ae("."+Pt,this.element);if(this.loadOnDemand)for(var m=0;m<v.length;m++){var o=M(v[parseInt(m.toString(),10)],"."+le);this.updateFieldChecked(v[parseInt(m.toString(),10)],r),this.changeState(v[parseInt(m.toString(),10)],r?"check":"uncheck",null,null,null,r),this.updateOldCheckedData([this.getNodeData(o)])}else for(var m=0;m<v.length;m++){var o=M(v[parseInt(m.toString(),10)],"."+le);this.updateFieldChecked(v[parseInt(m.toString(),10)],r),this.changeState(v[parseInt(m.toString(),10)],r?"check":"uncheck"),this.updateOldCheckedData([this.getNodeData(o)])}}else{t.length>1&&this.autoCheck&&(this.isBatchMode=!0,this.batchParentNode=new Set),t.reverse();for(var a=t.length-1;a>=0;a--){var o=this.getElement(t[parseInt(a.toString(),10)]);if(d(o)){var l=t[a-t.length]?t[a-t.length].toString():t[parseInt(a.toString(),10)]?t[parseInt(a.toString(),10)].toString():null;if(l!==""&&r&&l)this.setValidCheckedNode(l,t),this.dynamicCheckState(l,r);else if(this.checkedNodes.indexOf(l)!==-1&&l!==""&&!r){this.checkedNodes.splice(this.checkedNodes.indexOf(l),1);var h=this.getChildNodes(this.treeData,l);if(h){for(var c=0;c<h.length;c++){var u=h[parseInt(c.toString(),10)][this.fields.id]?h[parseInt(c.toString(),10)][this.fields.id].toString():null;if(this.checkedNodes.indexOf(u)!==-1){this.checkedNodes.splice(this.checkedNodes.indexOf(u),1);var p=this.element.querySelector('[data-uid="'+u+'"]');p&&this.changeState(p,"uncheck",null)}}this.parentNodeCheck.indexOf(l)!==-1&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(l),1)}l&&this.dynamicCheckState(l,r),this.updateField(this.treeData,this.fields,l,"isChecked",null)}continue}var f=z("."+Ce+" ."+Pt,o);this.validateCheckNode(f,!r,o,null)}this.isBatchMode&&this.autoCheck&&(this.isBatchMode=!1,Array.from(this.batchParentNode).forEach(function(y){var b=s.getElement(y);b&&s.ensureParentCheckState(b)}),this.batchParentNode.clear())}if(t)for(var g=0;g<t.length-1;g++){var l=t[parseInt(g.toString(),10)]?t[parseInt(g.toString(),10)].toString():"";r||this.updateField(this.treeData,this.fields,l,"isChecked",null)}this.autoCheck&&this.updateParentCheckState()},i.prototype.updateFieldChecked=function(t,r){var s=M(t,"."+le),a=s.getAttribute("data-uid"),o=this.getNodeData(s);o.isChecked==="true"&&!r&&this.updateField(this.treeData,this.fields,a,"isChecked",null)},i.prototype.dynamicCheckState=function(t,r){if(this.dataType===1){var s=0,a=new K(this.treeData).executeLocal(new Se().where(this.fields.id,"equal",t,!0));if(a[0]){var o=a[0][this.fields.id]?a[0][this.fields.id].toString():null,l=a[0][this.fields.parentID]?a[0][this.fields.parentID].toString():null,h=this.element.querySelector('[data-uid="'+l+'"]'),c=this.element.querySelector('[data-uid="'+o+'"]'),u=this.getChildNodes(this.treeData,l);if(u)for(var p=0;p<u.length;p++){var f=u[parseInt(p.toString(),10)][this.fields.id]?u[parseInt(p.toString(),10)][this.fields.id].toString():null;this.checkedNodes.indexOf(f)!==-1&&s++}this.checkedNodes.indexOf(t)!==-1&&h&&o===t&&this.autoCheck?this.changeState(h,"indeterminate",null):this.checkedNodes.indexOf(t)===-1&&c&&o===t&&!r?this.changeState(c,"uncheck",null):this.checkedNodes.indexOf(t)!==-1&&c&&o===t&&r?this.changeState(c,"check",null):this.checkedNodes.indexOf(t)===-1&&!c&&h&&o===t&&this.autoCheck&&s!==0?this.changeState(h,"indeterminate",null):this.checkedNodes.indexOf(t)===-1&&!c&&h&&o===t&&this.autoCheck&&s===0?this.changeState(h,"uncheck",null):!c&&!h&&o===t&&this.autoCheck&&this.updateIndeterminate(t,r)}}else if(this.dataType===2||this.fields.dataSource instanceof K&&this.isOffline)for(var o=void 0,h=void 0,v=void 0,p=0;p<this.treeData.length;p++){o=this.treeData[parseInt(p.toString(),10)][this.fields.id]?this.treeData[parseInt(p.toString(),10)][this.fields.id].toString():"",h=this.element.querySelector('[data-uid="'+o+'"]'),v=h?z("."+Et,h):null,this.checkedNodes.indexOf(o)===-1&&h&&v&&!r&&this.changeState(h,"uncheck",null);var m=V(this.fields.child.toString(),this.treeData[parseInt(p.toString(),10)]);m&&this.updateChildIndeterminate(m,o,t,r,o)}},i.prototype.updateIndeterminate=function(t,r){var s=this.getTreeData(t),a=0,o;this.dataType===1&&(o=s[0][this.fields.parentID]?s[0][this.fields.parentID].toString():null);var l=this.getChildNodes(this.treeData,o);if(l)for(var h=0;h<l.length;h++){var c=l[parseInt(h.toString(),10)][this.fields.id]?l[parseInt(h.toString(),10)][this.fields.id].toString():null;this.checkedNodes.indexOf(c)!==-1&&a++}var u=this.element.querySelector('[data-uid="'+o+'"]');u&&r?this.changeState(u,"indeterminate",null):!r&&u&&this.parentNodeCheck.indexOf(o)===-1&&a!==0?this.changeState(u,"indeterminate",null):!r&&u&&this.parentNodeCheck.indexOf(o)===-1&&a===0?this.changeState(u,"uncheck",null):u||(!r&&this.checkedNodes.indexOf(o)===-1&&this.parentNodeCheck.indexOf(o)!==-1?this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(o),1):r&&this.checkedNodes.indexOf(o)===-1&&this.parentNodeCheck.indexOf(o)===-1?this.parentNodeCheck.push(o):!r&&this.checkedNodes.indexOf(o)!==-1&&this.parentNodeCheck.indexOf(o)===-1&&a!==0&&this.parentNodeCheck.push(o),this.updateIndeterminate(o,r),this.checkedNodes.indexOf(o)!==-1&&!r&&this.checkedNodes.splice(this.checkedNodes.indexOf(o),1))},i.prototype.updateChildIndeterminate=function(t,r,s,a,o){for(var l=0,h=0;h<t.length;h++){var c=t[parseInt(h.toString(),10)][this.fields.id]?t[parseInt(h.toString(),10)][this.fields.id].toString():"";this.checkedNodes.indexOf(c)!==-1&&l++;var u=this.element.querySelector('[data-uid="'+r+'"]'),p=u?z("."+gi,u):null,f=u?z("."+Et,u):null,v=this.element.querySelector('[data-uid="'+c+'"]'),m=v?z("."+Et,v):null;if(this.checkedNodes.indexOf(s)!==-1&&u&&c===s&&this.autoCheck)this.changeState(u,"indeterminate",null);else if(this.checkedNodes.indexOf(s)===-1&&u&&!v&&c===s&&!a)this.autoCheck?this.changeState(u,"uncheck",null):l!==0?this.changeState(u,"indeterminate",null):this.changeState(u,"uncheck",null);else if(this.checkedNodes.indexOf(s)===-1&&v&&c===s&&!a)this.changeState(v,"uncheck",null);else if(this.checkedNodes.indexOf(s)===-1&&p&&c===s&&this.autoCheck&&l===0&&!a)p.classList.remove(gi);else if(this.checkedNodes.indexOf(s)===-1&&!v&&f&&c===s&&l===0)this.changeState(u,"uncheck",null);else if(this.checkedNodes.indexOf(c)===-1&&v&&m&&l===0)this.changeState(v,"uncheck",null);else if(!v&&!u&&c===s||this.parentNodeCheck.indexOf(r)!==-1&&this.autoCheck){var g=this.element.querySelector('[data-uid="'+o+'"]');a&&l!==0?this.changeState(g,"indeterminate",null):a&&l===t.length&&this.checkedNodes.indexOf(r)===-1?this.checkDisabledState(r):!a&&l===0&&this.parentNodeCheck.indexOf(r)!==-1&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(r)),this.parentNodeCheck.indexOf(r)===-1&&this.parentNodeCheck.push(r)}var y=V(this.fields.child.toString(),t[parseInt(h.toString(),10)]);y&&this.updateChildIndeterminate(y,c,s,a,o)}},i.prototype.changeState=function(t,r,s,a,o,l){var h=this,c,u=M(t,"."+le);!this.checkDisabledChildren&&u&&(u.classList.contains(ln)||this.disableNode&&this.disableNode.indexOf(u.getAttribute("data-uid"))!==-1)||(t===u&&(t=z("."+Pt,u)),a?this.nodeCheckAction(t,r,u,c,s,a,o,l):(this.checkActionNodes=[],c=this.getCheckEvent(u,r,s),this.trigger("nodeChecking",c,function(p){p.cancel||h.nodeCheckAction(t,r,u,p,s,a,o,l)})))},i.prototype.nodeCheckAction=function(t,r,s,a,o,l,h,c){var u,p=t.getElementsByClassName(ji)[0];if(r==="check"&&!p.classList.contains(Et)?(p.classList.remove(gi),p.classList.add(Et),this.addCheck(s),u="true"):r==="uncheck"&&(p.classList.contains(Et)||p.classList.contains(gi))?(I([p],[Et,gi]),this.removeCheck(s),u="false"):r==="indeterminate"&&this.autoCheck&&(p.classList.remove(Et),p.classList.add(gi),this.removeCheck(s),u="mixed"),u=r==="check"?"true":r==="uncheck"?"false":u,d(u)||s.setAttribute("aria-checked",u),h){var f=[].concat([],this.checkActionNodes);a=this.getCheckEvent(s,r,o),Ns(l)&&(a.data=f)}c!==void 0&&this.ensureStateChange(s,c),l||d(u)||(s.setAttribute("aria-checked",u),a.data[0].checked=u,this.trigger("nodeChecked",a),this.checkActionNodes=[])},i.prototype.addCheck=function(t){var r=t.getAttribute("data-uid");!d(r)&&this.checkedNodes.indexOf(r)===-1&&this.checkDisabledState(r)},i.prototype.removeCheck=function(t){var r=this.checkedNodes.indexOf(t.getAttribute("data-uid"));r>-1&&this.checkedNodes.splice(r,1)},i.prototype.getCheckEvent=function(t,r,s){this.checkActionNodes.push(this.getNodeData(t));var a=this.checkActionNodes;return{action:r,cancel:!1,isInteracted:!d(s),node:t,data:a}},i.prototype.finalize=function(){var t=z("."+Ce,this.element);d(t)||(t.setAttribute("role",uf.treeRole),this.setMultiSelect(this.allowMultiSelection),this.setNodeFocusable(),this.allowTextWrap&&this.updateWrap(),this.renderReactTemplates(),this.hasPid=this.rootData[0]?Object.prototype.hasOwnProperty.call(this.rootData[0],this.fields.parentID):!1,this.doExpandAction())},i.prototype.setTextWrap=function(){(this.allowTextWrap?T:I)([this.element],lE),H.isIE&&(this.allowTextWrap?T:I)([this.element],hE)},i.prototype.updateWrap=function(t){if(this.fullRowSelect)for(var r=t?ae("."+le,t):this.liList,s=r.length,a=0;a<s;a++)this.calculateWrap(r[parseInt(a.toString(),10)])},i.prototype.calculateWrap=function(t){var r=z("."+ur,t);r&&r.nextElementSibling&&(r.style.height=this.allowTextWrap?r.nextElementSibling.offsetHeight+"px":"")},i.prototype.doExpandAction=function(){var t=this,r=this.expandedNodes;if(!this.loadOnDemand&&this.fields.dataSource instanceof K&&(this.isInitalExpand=this.treeData.filter(function(l){return l[t.fields.expanded]===!0}).length>0?!0:this.isInitalExpand),this.isInitalExpand&&r.length>0)if(this.setProperties({expandedNodes:[]},!0),this.fields.dataSource instanceof K)this.expandGivenNodes(r);else{for(var s=0;s<r.length;s++){var a=z('[data-uid="'+r[parseInt(s.toString(),10)]+'"]',this.element);if(d(a)){r[parseInt(s.toString(),10)]&&this.expandChildren.indexOf(r[parseInt(s.toString(),10)])===-1&&this.expandChildren.push(r[parseInt(s.toString(),10)].toString());continue}else{var o=z("."+Ee,z("."+ct,a));d(o)||this.expandAction(a,o,null)}}this.afterFinalized()}else this.afterFinalized()},i.prototype.expandGivenNodes=function(t){var r=this;this.expandCallback(t[this.index],function(){r.index++,r.index<t.length?r.expandGivenNodes(t):r.afterFinalized()}),this.index>0&&(this.index=0)},i.prototype.expandCallback=function(t,r){var s=z('[data-uid="'+t+'"]',this.element);if(d(s))r();else{var a=z("."+Ee,z("."+ct,s));d(a)||this.expandAction(s,a,null,!1,r),r()}},i.prototype.afterFinalized=function(){if(this.doSelectionAction(),this.updateCheckedProp(),this.isAnimate=!0,this.isInitalExpand=!1,(!this.isLoaded||this.isFieldChange)&&!this.isNodeDropped){var t={data:this.treeData};this.trigger("dataBound",t)}this.isLoaded=!0,this.isNodeDropped=!1},i.prototype.doSelectionAction=function(){var t=ae("."+on,this.element),r=this.selectedNodes;if(r.length>0){this.setProperties({selectedNodes:[]},!0);for(var s=0;s<r.length;s++){var a=z('[data-uid="'+r[parseInt(s.toString(),10)]+'"]',this.element);if(a&&!a.classList.contains("e-active")?this.selectNode(a,null,!0):this.selectedNodes.push(r[parseInt(s.toString(),10)]),!this.allowMultiSelection)break}}else this.selectGivenNodes(t);I(t,on)},i.prototype.selectGivenNodes=function(t){for(var r=0;r<t.length&&(t[parseInt(r.toString(),10)].classList.contains("e-disable")||this.selectNode(t[parseInt(r.toString(),10)],null,!0),!!this.allowMultiSelection);r++);},i.prototype.clickHandler=function(t){var r=H.isDevice&&t.originalEvent.changedTouches&&!H.isIos?document.elementFromPoint(t.originalEvent.changedTouches[0].clientX,t.originalEvent.changedTouches[0].clientY):t.originalEvent.target;if(C.remove(this.element,"contextmenu",this.preventContextMenu),!(!r||this.dragStartAction)){var s=r.classList,a=M(r,"."+le);if(!a||a.classList.contains(aa)&&!(s.contains(Ee)||s.contains(We)))return;if(t.originalEvent.which!==3){var o=z("."+fE,a),l=z("."+lt,a);this.removeHover(),this.setFocusElement(a);var h=s.contains(Ee)||s.contains(We);if(this.showCheckBox&&!a.classList.contains("e-disable")&&!h){var c=this.checkOnClick?z("."+Pt,a):M(r,"."+Pt);if(!d(c)){var u=z("."+ji,c);this.validateCheckNode(c,u.classList.contains(Et),a,t.originalEvent),this.triggerClickEvent(t.originalEvent,a);return}}s.contains(Ee)?this.expandAction(a,r,t):s.contains(We)?this.collapseNode(a,r,t):o&&l?l.classList.contains(lf)&&l.classList.contains(Ee)?this.expandAction(a,l,t):l.classList.contains(lf)&&l.classList.contains(We)?this.collapseNode(a,l,t):!s.contains(Ce)&&!s.contains(le)&&this.toggleSelect(a,t.originalEvent,!1):!s.contains(Ce)&&!s.contains(le)&&this.toggleSelect(a,t.originalEvent,!1)}t.originalEvent.which===3&&(this.isRightClick=!0),this.triggerClickEvent(t.originalEvent,a)}},i.prototype.nodeCheckedEvent=function(t,r,s){var a=this.getCheckEvent(t,r?"uncheck":"check",s);a.data=a.data.splice(0,a.data.length-1),this.trigger("nodeChecked",a)},i.prototype.updateOldCheckedData=function(t){var r=this,s=new K(t),a=s.executeLocal(new Se().where("isChecked","equal","true",!0)),o=s.executeLocal(new Se().where("isChecked","equal","false",!0));if(o.length>0){var l=this.OldCheckedData.findIndex(function(c){return c.id===o[0].id});if(l!==-1){this.OldCheckedData.splice(l,1);var h=this.OldCheckedData.filter(function(c){return c.parentID===o[0].id});h.length>0&&h.forEach(function(c){var u=r.OldCheckedData.findIndex(function(p){return p.id===c.id});u!==-1&&r.OldCheckedData.splice(u,1)});return}}if(a.length>0){var l=this.OldCheckedData.findIndex(function(u){return u.id===a[0].id});if(l===-1){this.OldCheckedData.push(a[0]);return}}},i.prototype.triggerClickEvent=function(t,r){var s={event:t,node:r};this.trigger("nodeClicked",s)},i.prototype.expandNode=function(t,r,s){var a=this;if(this.renderReactTemplates(),r.classList.contains(Do)&&this.hideSpinner(r),this.initialRender||r.classList.add("interaction"),s!==!0||s===!0&&t.classList.contains("e-expanded")){if(this.preventExpand!==!0){I([r],Ee),T([r],We);var o=0,l=0,h=z("."+Ce,t),c=t;if(this.isAnimate&&!this.isRefreshed){this.setHeight(c,h);var u=z("."+le+"."+St,t);this.aniObj.animate(h,{name:this.animation.expand.effect,duration:this.animation.expand.duration===0&&xp==="Enable"?400:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:function(){c.style.overflow="hidden",!d(u)&&u instanceof HTMLElement&&u.classList.add(Oo),o=c.offsetHeight;var f=window.getComputedStyle(c),v=parseFloat(f.paddingTop),m=parseFloat(f.paddingBottom);l=z("."+ct,t).offsetHeight+m+v},progress:function(f){f.element.style.display="block",a.animateHeight(f,o,l)},end:function(f){f.element.style.display="block",!d(u)&&u instanceof HTMLElement&&u.classList.remove(Oo),a.expandedNode(c,h,r)}})}else this.expandedNode(c,h,r)}}else{var p=z("."+Ce,t);p.style.display="none",this.fields.dataSource instanceof K&&(this.preventExpand=!1)}this.initialRender&&r.classList.add("interaction")},i.prototype.expandedNode=function(t,r,s){r.style.display="block",t.style.display="block",t.style.overflow="",t.style.height="",I([s],cr),this.addExpand(t),this.allowTextWrap&&this.isLoaded&&this.isFirstRender&&(this.updateWrap(t),this.isFirstRender=!1),this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(t,null),this.expandArgs.isInteracted=this.isInteracted,this.trigger("nodeExpanded",this.expandArgs)),this.isHiddenItem&&this.collapseAll([this.getNodeData(t).id])},i.prototype.addExpand=function(t){t.setAttribute("aria-expanded","true"),I([t],of);var r=t.getAttribute("data-uid");!d(r)&&this.expandedNodes.indexOf(r)===-1&&this.expandedNodes.push(r)},i.prototype.collapseNode=function(t,r,s){var a=this;if(!r.classList.contains(cr)){T([r],cr);var o;this.isLoaded?(o=this.getExpandEvent(t,s),this.isInteracted=o.isInteracted,this.trigger("nodeCollapsing",o,function(l){l.cancel?I([r],cr):a.nodeCollapseAction(t,r,l)})):this.nodeCollapseAction(t,r,o)}},i.prototype.nodeCollapseAction=function(t,r,s){var a=this;I([r],We),T([r],Ee);var o=0,l=0,h=z("."+Ce,t),c=t,u=z("."+le+"."+St,t);this.isAnimate?this.aniObj.animate(h,{name:this.animation.collapse.effect,duration:this.animation.collapse.duration===0&&xp==="Enable"?400:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:function(){c.style.overflow="hidden",!d(u)&&u instanceof HTMLElement&&u.classList.add(Oo),o=z("."+ct,t).offsetHeight,l=c.offsetHeight},progress:function(p){a.animateHeight(p,o,l)},end:function(p){p.element.style.display="none",!d(u)&&u instanceof HTMLElement&&u.classList.remove(Oo),a.collapsedNode(c,h,r,s)}}):this.collapsedNode(c,h,r,s)},i.prototype.collapsedNode=function(t,r,s,a){r.style.display="none",t.style.overflow="",t.style.height="",I([s],cr),this.removeExpand(t),this.isLoaded&&(a=this.getExpandEvent(t,null),a.isInteracted=this.isInteracted,this.trigger("nodeCollapsed",a))},i.prototype.removeExpand=function(t,r){r?t.removeAttribute("aria-expanded"):this.disableExpandAttr(t);var s=this.expandedNodes.indexOf(t.getAttribute("data-uid"));s>-1&&this.expandedNodes.splice(s,1)},i.prototype.disableExpandAttr=function(t){t.setAttribute("aria-expanded","false"),T([t],of)},i.prototype.setHeight=function(t,r){r.style.display="block",r.style.visibility="hidden",t.style.height=t.offsetHeight+"px",r.style.display="none",r.style.visibility=""},i.prototype.animateHeight=function(t,r,s){if(!d(t.element.parentElement)){var a=(t.duration-t.timeStamp)/t.duration,o=(s-r)*a+r;t.element.parentElement.style.height=o+"px"}},i.prototype.renderChildNodes=function(t,r,s,a,o){var l=this,h=z("div."+lt,t);if(!d(h)){this.showSpinner(h);var c;if(this.fields.dataSource instanceof K){var u=this.parents(t,"."+Ce).length,p=this.getChildFields(this.fields,u,1);if(d(p)||d(p.dataSource)){Q(h),this.removeExpand(t,!0);return}this.treeList.push("false"),this.fields.dataSource instanceof K&&this.isOffline?(this.treeList.pop(),c=this.getChildNodes(this.treeData,t.getAttribute("data-uid")),this.loadChild(c,p,h,t,r,s,a)):p.dataSource.executeQuery(this.getQuery(p,t.getAttribute("data-uid"))).then(function(f){l.treeList.pop(),c=f.result,l.dataType===1&&(l.dataType=2),l.loadChild(c,p,h,t,r,s,a)}).catch(function(f){l.trigger("actionFailure",{error:f})})}else if(c=this.getChildNodes(this.treeData,t.getAttribute("data-uid"),!1,parseFloat(t.getAttribute("aria-level"))+1),this.currentLoadData=this.getSortedData(c),d(c)||c.length===0){Q(h),h.classList.contains(Do)&&this.hideSpinner(h),this.removeExpand(t,!0);return}else this.listBaseOption.ariaAttributes.level=parseFloat(t.getAttribute("aria-level"))+1,t.appendChild(gt.createList(this.createElement,this.currentLoadData,this.listBaseOption)),this.expandNode(t,h,a),this.setSelectionForChildNodes(c),this.ensureCheckNode(t,o),this.finalizeNode(t,o,r),this.disableTreeNodes(c),this.renderSubChild(t,r,a,o)}},i.prototype.loadChild=function(t,r,s,a,o,l,h){if(this.currentLoadData=t,d(t)||t.length===0)Q(s),this.removeExpand(a,!0);else{if(this.updateListProp(r),this.fields.dataSource instanceof K&&!this.isOffline){var c=a.getAttribute("data-uid"),u=this.getNodeObject(c);ze("child",t,u)}this.listBaseOption.ariaAttributes.level=parseFloat(a.getAttribute("aria-level"))+1,a.appendChild(gt.createList(this.createElement,t,this.listBaseOption)),this.expandNode(a,s,h),this.setSelectionForChildNodes(t),this.ensureCheckNode(a),this.finalizeNode(a),this.disableTreeNodes(t),this.renderSubChild(a,o,h)}l&&l(),o&&this.expandedNodes.push(a.getAttribute("data-uid")),this.treeList.length===0&&!this.isLoaded&&this.finalize()},i.prototype.disableTreeNodes=function(t){if(!(d(this.disableNode)||this.disableNode.length===0))for(var r=0;r<t.length;){var s=t[parseInt(r.toString(),10)][this.fields.id]?t[parseInt(r.toString(),10)][this.fields.id].toString():null;this.disableNode!==void 0&&this.disableNode.indexOf(s)!==-1&&this.doDisableAction([s]),r++}},i.prototype.setSelectionForChildNodes=function(t){if(!(d(this.selectedNodes)||this.selectedNodes.length===0)){var r;for(r=0;r<t.length;r++){var s=t[parseInt(r.toString(),10)][this.fields.id]?t[parseInt(r.toString(),10)][this.fields.id].toString():null;this.selectedNodes!==void 0&&this.selectedNodes.indexOf(s)!==-1&&this.doSelectionAction()}}},i.prototype.ensureCheckNode=function(t,r){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(t.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(t,null,r),(!r||z("."+Et,this.element)||z("."+gi,this.element))&&this.ensureParentCheckState(t))),this.currentLoadData=null},i.prototype.getFields=function(t,r,s){return r===s?t:this.getFields(this.getChildMapper(t),r,s+1)},i.prototype.getChildFields=function(t,r,s){return r===s?this.getChildMapper(t):this.getChildFields(this.getChildMapper(t),r,s+1)},i.prototype.getChildMapper=function(t){return typeof t.child=="string"||d(t.child)?t:t.child},i.prototype.getChildNodes=function(t,r,s,a){var o=this;s===void 0&&(s=!1);var l;if(d(t))return l;if(this.dataType===1)return this.getChildGroup(this.groupedData,r,s);if(typeof this.fields.child=="string")return this.findChildNodes(t,this.fields.id,r)||this.findNestedChildNodes(t,r,a)||[];if(this.isChildObject()){for(var h=d(a)?this.fields.child:this.fields,c=1;c<a&&!d(h.child);){h=h.child;c++}this.updateListProp(h);var u=t.findIndex(function(g){return V(o.fields.id,g)&&V(o.fields.id,g).toString()===r});if(u!==-1)return V("child",t[parseInt(u.toString(),10)]);if(u===-1)for(var p=0,f=t.length;p<f;p++){var v=V("child",t[parseInt(p.toString(),10)]),m=d(v)?-1:v.findIndex(function(g){return V(o.fields.child.id,g)&&V(o.fields.child.id,g).toString()===r});if(m!==-1)return V("child",v[parseInt(m.toString(),10)]);if(!d(v)&&(l=this.getChildNodes(v,r,!1,a),l!==void 0))break}}return l},i.prototype.findChildNodes=function(t,r,s){var a=t.findIndex(function(o){var l=V(r,o);return l&&l.toString()===s});return a!==-1?V(this.fields.child,t[a]):null},i.prototype.findNestedChildNodes=function(t,r,s){for(var a=0,o=t;a<o.length;a++){var l=o[a],h=V(this.fields.child,l);if(!d(h)){var c=this.findChildNodes(h,this.fields.id,r);if(c)return c;var u=this.getChildNodes(h,r,!1,s);if(u&&u.length>0)return u}}},i.prototype.getChildGroup=function(t,r,s){var a=[];if(d(t))return a;for(var o=0,l=t.length;o<l;o++)if(!d(t[parseInt(o.toString(),10)][0])&&!d(V(this.fields.parentID,t[parseInt(o.toString(),10)][0]))){if(V(this.fields.parentID,t[parseInt(o.toString(),10)][0]).toString()===r)return t[parseInt(o.toString(),10)]}else if(s)return t[parseInt(o.toString(),10)];return a},i.prototype.renderSubChild=function(t,r,s,a){if(r)for(var o=ae("."+Ee,t),l=0,h=o.length;l<h;l++){var c=o[parseInt(l.toString(),10)];if(t.querySelector(".e-icons")!==o[parseInt(l.toString(),10)]){var u=M(c,"."+le);this.expandArgs=this.getExpandEvent(u,null),s!==!0&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(u,r,null,s,a)}}},i.prototype.toggleSelect=function(t,r,s){t.classList.contains("e-disable")||(this.allowMultiSelection&&(r&&r.ctrlKey||s)&&this.isActive(t)?this.unselectNode(t,r):this.selectNode(t,r,s))},i.prototype.isActive=function(t){return!!t.classList.contains(St)},i.prototype.selectNode=function(t,r,s){var a=this;if(d(t)||!this.allowMultiSelection&&this.isActive(t)&&!d(r)){if(this.checkOnClick){var o=z(" ."+ji,t);!d(o)&&o.classList.contains(Et)?T([t],St):I([t],St)}this.setFocusElement(t);return}var l;this.isLoaded?(l=this.getSelectEvent(t,"select",r),this.trigger("nodeSelecting",l,function(h){!h.cancel&&!h.node.classList.contains(aa)&&a.nodeSelectAction(t,r,h,s)})):this.nodeSelectAction(t,r,l,s)},i.prototype.nodeSelectAction=function(t,r,s,a){if((!this.allowMultiSelection||!a&&(!r||r&&!(r.ctrlKey||r.metaKey)))&&this.removeSelectAll(),this.allowMultiSelection&&r&&r.shiftKey){this.startNode||(this.startNode=t);var o=this.liList.indexOf(this.startNode),l=this.liList.indexOf(t);if(o>l){var h=o;o=l,l=h}for(var c=o;c<=l;c++){var u=this.liList[parseInt(c.toString(),10)];Tt(u)&&!u.classList.contains("e-disable")&&this.addSelect(u)}}else this.startNode=t,this.addSelect(t);this.isLoaded&&(s.nodeData=this.getNodeData(t),this.trigger("nodeSelected",s),this.isRightClick=!1),this.isRightClick=!1},i.prototype.unselectNode=function(t,r){var s=this,a;this.isLoaded?(a=this.getSelectEvent(t,"un-select",r),this.trigger("nodeSelecting",a,function(o){o.cancel||s.nodeUnselectAction(t,o)})):this.nodeUnselectAction(t,a)},i.prototype.nodeUnselectAction=function(t,r){this.removeSelect(t),this.setFocusElement(t),this.isLoaded&&(r.nodeData=this.getNodeData(t),this.trigger("nodeSelected",r))},i.prototype.setFocusElement=function(t){if(!d(t)){var r=this.getFocusedNode();r&&(I([r],vs),r.setAttribute("tabindex","-1")),T([t],vs),t.setAttribute("tabindex","0"),C.add(t,"blur",this.focusOut,this),this.updateIdAttr(r,t)}},i.prototype.addSelect=function(t){t.setAttribute("aria-selected","true"),T([t],St);var r=t.getAttribute("data-uid");!d(r)&&this.selectedNodes.indexOf(r)===-1&&this.selectedNodes.push(r)},i.prototype.removeSelect=function(t){this.allowMultiSelection?t.setAttribute("aria-selected","false"):t.removeAttribute("aria-selected"),I([t],St);var r=this.selectedNodes.indexOf(t.getAttribute("data-uid"));r>-1&&this.selectedNodes.splice(r,1)},i.prototype.removeSelectAll=function(){for(var t=this.element.querySelectorAll("."+St),r=0,s=t;r<s.length;r++){var a=s[r];this.allowMultiSelection?a.setAttribute("aria-selected","false"):a.removeAttribute("aria-selected")}I(t,St),this.setProperties({selectedNodes:[]},!0)},i.prototype.getSelectEvent=function(t,r,s){var a=this.getNodeData(t);return{action:r,cancel:!1,isInteracted:!d(s),node:t,nodeData:a}},i.prototype.setExpandOnType=function(){this.expandOnType=this.expandOn==="Auto"?H.isDevice?"Click":"DblClick":this.expandOn},i.prototype.expandHandler=function(t){var r=H.isDevice&&t.originalEvent.changedTouches&&!H.isIos?document.elementFromPoint(t.originalEvent.changedTouches[0].clientX,t.originalEvent.changedTouches[0].clientY):t.originalEvent.target;!r||r.classList.contains(Ao)||r.classList.contains(mi)||r.classList.contains(Ce)||r.classList.contains(le)||r.classList.contains(lt)||this.showCheckBox&&M(r,"."+Pt)||this.expandCollapseAction(M(r,"."+le),t)},i.prototype.expandCollapseAction=function(t,r){var s=z("div."+lt,t);if(!(!s||s.classList.contains(cr))){var a=s.classList;a.contains(Ee)?this.expandAction(t,s,r):a.contains(We)&&this.collapseNode(t,s,r)}},i.prototype.expandAction=function(t,r,s,a,o,l){var h=this;r.classList.contains(cr)||(T([r],cr),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(t,s),this.isInteracted=this.expandArgs.isInteracted,this.trigger("nodeExpanding",this.expandArgs,function(c){c.cancel?I([r],cr):h.nodeExpandAction(t,r,a,o,l)})):this.nodeExpandAction(t,r,a,o,l))},i.prototype.nodeExpandAction=function(t,r,s,a,o){var l=z("."+Ce,t);if(l&&l.nodeName==="UL")this.expandNode(t,r);else{if(this.isFirstRender=!0,this.renderChildNodes(t,s,a,null,o),d(this.expandChildren)||this.expandChildren.length===0)return;for(var h=ae("."+le,t),c=0;c<h.length;c++){var u=this.getId(h[parseInt(c.toString(),10)]);if(this.expandChildren.indexOf(u)!==-1&&this.expandChildren!==void 0){var p=z("."+Ee,z("."+ct,h[parseInt(c.toString(),10)]));d(p)||this.expandAction(h[parseInt(c.toString(),10)],p,null),this.expandChildren.splice(this.expandChildren.indexOf(u),1)}}}},i.prototype.keyActionHandler=function(t){var r=this,s=t.target,a=this.getFocusedNode();if(s&&s.classList.contains(Ao)){var o=s;t.action==="enter"?o.blur():t.action==="escape"&&(o.value=this.oldText,o.blur());return}t.preventDefault();var l={cancel:!1,event:t,node:a};this.trigger("keyPress",l,function(h){if(!h.cancel)switch(t.action){case"space":r.showCheckBox?r.checkNode(t):r.toggleSelect(a,t);break;case"moveRight":r.openNode(!r.enableRtl,t);break;case"moveLeft":r.openNode(!!r.enableRtl,t);break;case"shiftDown":r.shiftKeySelect(!0,t);break;case"moveDown":case"ctrlDown":case"csDown":r.navigateNode(!0);break;case"shiftUp":r.shiftKeySelect(!1,t);break;case"moveUp":case"ctrlUp":case"csUp":r.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":r.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":r.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":case"shiftSpace":case"ctrlSpace":r.toggleSelect(a,t);break;case"f2":r.allowEditing&&!a.classList.contains("e-disable")&&r.createTextbox(a);break;case"ctrlA":if(r.allowMultiSelection){var c=ae("."+le+":not(."+St+")",r.element);r.selectGivenNodes(c)}break}})},i.prototype.navigateToFocus=function(t){var r=this.getFocusedNode().querySelector("."+ct),s=r.getBoundingClientRect(),a=this.getScrollParent(this.element);if(!d(a)){var o=a.getBoundingClientRect();s.bottom>o.bottom?a.scrollTop+=s.bottom-o.bottom:s.top<o.top&&(a.scrollTop-=o.top-s.top)}var l=this.isVisibleInViewport(r);l||r.scrollIntoView(t)},i.prototype.isVisibleInViewport=function(t){var r=t.getBoundingClientRect();return r.top>=0&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)},i.prototype.getScrollParent=function(t){return d(t)?null:t.scrollHeight>t.clientHeight?t:this.getScrollParent(t.parentElement)},i.prototype.shiftKeySelect=function(t,r){if(this.allowMultiSelection){var s=this.getFocusedNode(),a=t?this.getNextNode(s):this.getPrevNode(s);this.removeHover(),this.setFocusElement(a),this.toggleSelect(a,r,!1),this.navigateToFocus(!t)}else this.navigateNode(t)},i.prototype.checkNode=function(t){var r=this.getFocusedNode(),s=z("."+Pt,r),a=z(" ."+ji,s).classList.contains(Et);r.classList.contains("e-disable")||r.getElementsByClassName("e-checkbox-disabled").length===0&&this.validateCheckNode(s,a,r,t)},i.prototype.validateCheckNode=function(t,r,s,a){var o=this,l=M(t,"."+le);this.checkActionNodes=[];var h=r?"false":"true";d(h)||l.setAttribute("aria-checked",h);var c=this.getCheckEvent(l,r?"uncheck":"check",a);this.trigger("nodeChecking",c,function(u){u.cancel||o.nodeCheckingAction(t,r,s,u,a)})},i.prototype.nodeCheckingAction=function(t,r,s,a,o){if(this.checkedElement.indexOf(s.getAttribute("data-uid"))===-1&&(this.checkedElement.push(s.getAttribute("data-uid")),this.autoCheck)){var l=this.getChildNodes(this.treeData,s.getAttribute("data-uid"));l!==null?this.allCheckNode(l,this.checkedElement,null,null,!1):l=null}if(this.changeState(t,r?"uncheck":"check",o,!0),this.updateActiveClass(s,r),this.autoCheck){this.ensureChildCheckState(s),this.updateOldCheckedData([this.getNodeData(s)]);var h=M(M(s,"."+Ce),"."+le);if(this.isBatchMode){var c=d(h)?null:h.getAttribute("data-uid");c&&this.batchParentNode.add(c)}else this.ensureParentCheckState(h);var u=void 0;a.action==="check"?u=!0:a.action==="uncheck"&&(u=!1),this.ensureStateChange(s,u)}this.nodeCheckedEvent(t,r,o)},i.prototype.updateActiveClass=function(t,r){this.showCheckBox&&this.checkOnClick&&(r==="check"||r===!1?(this.removeSelectAll(),T([t],St)):(r==="uncheck"||r==="indeterminate"||r===!0)&&I([t],St))},i.prototype.ensureStateChange=function(t,r){var s=this,a=z("."+Ce,t),o=t.getAttribute("data-uid"),l=this.fields;if(this.dataType===1&&this.autoCheck){var h=new K(this.treeData).executeLocal(new Se().where(l.parentID,"equal",o,!0)),c=h.filter(function(w){return s.checkedNodes.indexOf(w[l.id].toString())!==-1},this);this.checkedNodes.indexOf(o)!==-1&&c.length!==h.length&&this.isFilter&&c.length>0&&(h=c);for(var u=0;u<h.length;u++){var p=h[parseInt(u.toString(),10)][this.fields.id]?h[parseInt(u.toString(),10)][this.fields.id].toString():null,f=h[parseInt(u.toString(),10)][this.fields.isChecked]?h[parseInt(u.toString(),10)][this.fields.isChecked].toString():null;if(this.checkedNodes.indexOf(o)!==-1&&this.checkedNodes.indexOf(p)===-1){this.checkDisabledState(p,h[u]);var v=this.getChildNodes(this.treeData,p);this.getChildItems(v,r),this.parentNodeCheck.indexOf(p)!==-1&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(p),1)}else if(this.checkedNodes.indexOf(o)===-1&&a===null&&this.checkedNodes.indexOf(p)!==-1){if(this.checkedNodes.splice(this.checkedNodes.indexOf(p),1),f==="true"&&this.updateField(this.treeData,this.fields,p,"isChecked",null),this.checkedNodes.indexOf(o)===-1&&a===null||this.parentNodeCheck.indexOf(p)!==-1){var m=this.getChildNodes(this.treeData,p);this.getChildItems(m,r),this.parentNodeCheck.indexOf(p)!==-1&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(p),1)}}else{var v=this.getChildNodes(this.treeData,p);this.getChildItems(v,r)}}}else if(this.dataType===1&&!this.autoCheck)if(r)for(var u=0;u<this.treeData.length;u++){var b=this.treeData[parseInt(u.toString(),10)][this.fields.id]?this.treeData[parseInt(u.toString(),10)][this.fields.id].toString():null;this.checkedNodes.indexOf(b)===-1&&this.checkDisabledState(b,this.treeData[u])}else{for(var g=new K(this.treeData).executeLocal(new Se().where(l.isChecked,"equal",!0,!1)),u=0;u<g.length;u++){var y=g[parseInt(u.toString(),10)][this.fields.id]?g[parseInt(u.toString(),10)][this.fields.id].toString():null;this.checkedNodes.indexOf(y)!==-1&&this.checkedNodes.splice(this.checkedNodes.indexOf(y),1),this.updateField(this.treeData,this.fields,y,"isChecked",null)}this.checkedNodes=[]}else{var v=this.getChildNodes(this.treeData,o);if(v){var E=v.filter(function(A){var D=String(A[Object.keys(A)[0]]);return s.checkedNodes.indexOf(D)!==-1});E.length>0&&v.length&&this.isFilter&&(v=E),this.childStateChange(v,o,a,r)}}},i.prototype.checkDisabledState=function(t,r){var s=this.checkDisabledChildren;if(!s){var a=!0;if(this.loadOnDemand&&this.fields.htmlAttributes&&(r=d(r)?r:this.getNodeObject(t),!d(r))){var o=r[this.fields.htmlAttributes];o&&!d(o.class)&&o.class.indexOf(ln)!==-1&&(a=!1)}var l=z('[data-uid="'+t+'"]',this.element);s=l?!l.classList.contains(ln):this.disableNode.indexOf(t)===-1&&a}s&&this.checkedNodes.push(t)},i.prototype.getChildItems=function(t,r){for(var s=0;s<t.length;s++){var a=t[parseInt(s.toString(),10)][this.fields.id]?t[parseInt(s.toString(),10)][this.fields.id].toString():null,o=t[parseInt(s.toString(),10)][this.fields.isChecked]?t[parseInt(s.toString(),10)][this.fields.isChecked].toString():null;this.checkedNodes.indexOf(a)!==-1&&!r&&this.checkedNodes.splice(this.checkedNodes.indexOf(a),1),this.checkedNodes.indexOf(a)===-1&&r&&this.checkDisabledState(a,t[s]),o==="true"&&!r&&this.updateField(this.treeData,this.fields,a,"isChecked",null);var l=this.getChildNodes(this.treeData,a);l.length>0&&this.getChildItems(l,r)}},i.prototype.childStateChange=function(t,r,s,a){for(var o=0;o<t.length;o++){var l=t[parseInt(o.toString(),10)][this.fields.id]?t[parseInt(o.toString(),10)][this.fields.id].toString():"",h=t[parseInt(o.toString(),10)][this.fields.isChecked]?t[parseInt(o.toString(),10)][this.fields.isChecked].toString():null;this.autoCheck?this.checkedNodes.indexOf(r)!==-1&&this.checkedNodes.indexOf(l)===-1?(this.checkDisabledState(l,t[o]),this.parentNodeCheck.indexOf(l)!==-1&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(l),1)):this.checkedNodes.indexOf(r)===-1&&this.checkedNodes.indexOf(l)!==-1&&!a&&(this.checkedNodes.splice(this.checkedNodes.indexOf(l),1),h==="true"&&this.updateField(this.treeData,this.fields,l,"isChecked",null)):this.autoCheck||(a?this.checkedNodes.indexOf(l)===-1&&this.checkDisabledState(l,t[o]):(this.checkedNodes.indexOf(l)!==-1&&this.checkedNodes.splice(this.checkedNodes.indexOf(l),1),this.updateField(this.treeData,this.fields,l,"isChecked",null),this.checkedNodes=[]));var c=this.getChildNodes([t[parseInt(o.toString(),10)]],l);c&&this.childStateChange(c,r,s,a)}},i.prototype.allCheckNode=function(t,r,s,a,o){if(t)for(var l=0;l<t.length;l++){var h=V(this.fields.id,t[parseInt(l.toString(),10)]),c=this.element.querySelector('[data-uid="'+h+'"]');o!==!1&&this.checkedElement.indexOf(h.toString())===-1&&(c===null&&!d(t[parseInt(l.toString(),10)][this.fields.isChecked])&&r.indexOf(h.toString())===-1||a===0||s===2)&&(t[parseInt(l.toString(),10)][this.fields.isChecked]!==!1||s===2?r.push(h.toString()):a=null,a=t[parseInt(l.toString(),10)][this.fields.isChecked]!==!1||s===2?0:null),r.indexOf(h.toString())===-1&&d(s)&&r.push(h.toString());var u=V(this.fields.child.toString(),t[parseInt(l.toString(),10)]);if(V(this.fields.hasChildren,t[parseInt(l.toString(),10)])===!0||u){var p=V(this.fields.id,t[parseInt(l.toString(),10)]),f=void 0;this.dataType===1?f=this.getChildNodes(this.treeData,p.toString()):f=u,f&&(d(o)?this.allCheckNode(f,r,s,a):this.allCheckNode(f,r,s,a,o),a=null)}a=null}},i.prototype.openNode=function(t,r){var s=this.getFocusedNode(),a=z("div."+lt,s);if(t)if(a)a.classList.contains(Ee)?this.expandAction(s,a,r):this.focusNextNode(s,!0);else return;else if(a&&a.classList.contains(We))this.collapseNode(s,a,r);else{var o=M(M(s,"."+Ce),"."+le);if(o)o.classList.contains("e-disable")||(this.setFocus(s,o),this.navigateToFocus(!0));else return}},i.prototype.navigateNode=function(t){var r=this.getFocusedNode();this.focusNextNode(r,t)},i.prototype.navigateRootNode=function(t){var r=this.getFocusedNode(),s=t?this.getRootNode():this.getEndNode();s.classList.contains("e-disable")||(this.setFocus(r,s),this.navigateToFocus(t))},i.prototype.getFocusedNode=function(){var t,r=z("."+le+'[tabindex="0"]',this.element);if(!d(r)){var s=r.getAttribute("aria-checked");(s==="mixed"||s==="false")&&(this.isFilter=!1)}return d(r)&&(t=z("."+le,this.element)),d(r)?d(t)?this.element.firstElementChild:t:r},i.prototype.focusNextNode=function(t,r){var s=r?this.getNextNode(t):this.getPrevNode(t);if(this.setFocus(t,s),this.navigateToFocus(!r),s.classList.contains("e-disable")){var a=s.lastChild;s.previousSibling==null&&s.classList.contains("e-level-1")?this.focusNextNode(s,!0):s.nextSibling==null&&s.classList.contains("e-node-collapsed")?this.focusNextNode(s,!1):s.nextSibling==null&&a.classList.contains(ct)?this.focusNextNode(s,!1):this.focusNextNode(s,r)}},i.prototype.getNextNode=function(t){var r=this.liList.indexOf(t),s;do if(r++,s=this.liList[parseInt(r.toString(),10)],d(s))return t;while(!Tt(s));return s},i.prototype.getPrevNode=function(t){var r=this.liList.indexOf(t),s;do if(r--,s=this.liList[parseInt(r.toString(),10)],d(s))return t;while(!Tt(s));return s},i.prototype.getRootNode=function(){var t=0,r;do r=this.liList[parseInt(t.toString(),10)],t++;while(!Tt(r));return r},i.prototype.getEndNode=function(){var t=this.liList.length-1,r;do r=this.liList[parseInt(t.toString(),10)],t--;while(!Tt(r));return r},i.prototype.setFocus=function(t,r){I([t],vs),t.setAttribute("tabindex","-1"),r.classList.contains("e-disable")||(T([r],vs),r.setAttribute("tabindex","0"),r.focus(),C.add(r,"blur",this.focusOut,this),this.updateIdAttr(t,r))},i.prototype.updateIdAttr=function(t,r){this.element.removeAttribute("aria-activedescendant"),t&&t.removeAttribute("id"),r.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},i.prototype.focusIn=function(){if(!this.mouseDownStatus){var t=this.getFocusedNode();t.classList.contains("e-disable")?(t.setAttribute("tabindex","-1"),this.navigateNode(!0)):(t.setAttribute("tabindex","0"),T([t],vs),C.add(t,"blur",this.focusOut,this)),this.mouseDownStatus=!1}},i.prototype.focusOut=function(t){var r=this.getFocusedNode();t.target===r&&(I([r],vs),C.remove(r,"blur",this.focusOut))},i.prototype.onMouseOver=function(t){if(!H.isDevice){var r=t.target,s=r.classList,a=M(r,"."+le);if(!a||s.contains(Ce)||s.contains(le)){this.removeHover();return}else a&&!a.classList.contains("e-disable")&&this.setHover(a)}},i.prototype.setHover=function(t){!t.classList.contains(To)&&!t.classList.contains(aa)&&(this.removeHover(),T([t],To))},i.prototype.onMouseLeave=function(){this.removeHover()},i.prototype.removeHover=function(){var t=ae("."+To,this.element);t&&t.length&&I(t,To)},i.prototype.getNodeData=function(t,r,s){if(!d(t)&&t.classList.contains(le)&&!d(M(t,"."+tf))&&M(t,"."+tf).classList.contains(mi)){var a=t.getAttribute("data-uid"),o=this.getText(t,r,s),l=M(t.parentNode,"."+le),h=l?l.getAttribute("data-uid"):null,c=t.classList.contains(St),u=!t.classList.contains(aa),p=t.getAttribute("aria-expanded")==="true",f=t.getAttribute("aria-expanded")!==null?!0:(z("."+Ee,t)||z("."+We,t))!=null,v=null,m=z("."+Pt,t);return this.showCheckBox&&m&&(v=t.getAttribute("aria-checked")),{id:a,text:o,parentID:h,selected:c,selectable:u,expanded:p,isChecked:v,hasChildren:f}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},i.prototype.getText=function(t,r,s){if(r){var a=d(s)?this.getNodeObject(t.getAttribute("data-uid")):s,o=parseFloat(t.getAttribute("aria-level")),l=this.getFields(this.fields,o,1);return d(s)?V(l.text,a):s.text}return z("."+fs,t).textContent},i.prototype.getExpandEvent=function(t,r){var s=this.getNodeData(t);return{cancel:!1,isInteracted:!d(r),node:t,nodeData:s,event:r}},i.prototype.renderNodeTemplate=function(t,r,s){var a=this.nodeTemplateFn(t,this,"nodeTemplate"+s,this.element.id+"nodeTemplate",this.isStringTemplate,void 0,r,this.root);a&&(a=Array.prototype.slice.call(a),oe(a,r))},i.prototype.destroyTemplate=function(t){this.clearTemplate(["nodeTemplate"+t.getAttribute("data-uid")])},i.prototype.reRenderNodes=function(){this.updateListProp(this.fields),H.isIE?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",d(this.nodeTemplateFn)||this.clearTemplate(),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)},i.prototype.setCssClass=function(t,r){!d(t)&&t!==""&&I([this.element],t.split(" ")),!d(r)&&r!==""&&T([this.element],r.split(" "))},i.prototype.editingHandler=function(t){var r=t.target;if(!(!r||r.classList.contains(mi)||r.classList.contains(Ce)||r.classList.contains(le)||r.classList.contains(lt)||r.classList.contains(Ao)||r.classList.contains(rf))){var s=M(r,"."+le);this.createTextbox(s)}},i.prototype.createTextbox=function(t){var r=this,s=z("."+xo,this.element);s&&s.blur();var a=z("."+fs,t);this.updateOldText(t);var o=this.createElement("input",{className:xo,attrs:{value:this.oldText}}),l=this.getEditEvent(t,null,o.outerHTML);this.trigger("nodeEditing",l,function(h){if(!h.cancel){var c=a.offsetWidth+5,u=c+"px";T([t],Zh),d(r.nodeTemplateFn)||r.destroyTemplate(t),r.isReact?setTimeout(function(){r.renderTextBox(l,a,u)},5):r.renderTextBox(l,a,u)}})},i.prototype.renderTextBox=function(t,r,s){r.innerHTML=t.innerHtml;var a=z("."+xo,r);this.inputObj=X.createInput({element:a,properties:{enableRtl:this.enableRtl}},this.createElement),this.inputObj.container.style.width=s,a.focus();var o=a;o.setSelectionRange(0,o.value.length),this.wireInputEvents(a)},i.prototype.updateOldText=function(t){var r=t.getAttribute("data-uid");this.editData=this.getNodeObject(r);var s=parseFloat(t.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,s,1),this.oldText=V(this.editFields.text,this.editData)},i.prototype.inputFocusOut=function(t){if(z("."+xo,this.element)){var r=t.target,s=r.value,a=M(r,"."+fs),o=M(r,"."+le);Q(this.inputObj.container),X.destroy({element:r,properties:this.properties}),this.fields.dataSource instanceof K&&!this.isOffline?this.crudOperation("update",null,o,s,null,null,!0):this.appendNewText(o,a,s,!0),C.remove(r,"blur",this.inputFocusOut),this.inputObj=null,Q(r),r=null}},i.prototype.appendNewText=function(t,r,s,a){var o=this,l=this.getEditEvent(t,s,null);this.trigger("nodeEdited",l,function(h){s=h.cancel?h.oldText:h.newText,o.updateText(t,r,s,a),h.oldText!==s&&o.triggerEvent("nodeEdited",[o.getNode(t)])})},i.prototype.updateText=function(t,r,s,a){var o=ze(this.editFields.text,s,this.editData);if(d(this.nodeTemplateFn))this.enableHtmlSanitizer?r.innerText=Ar.sanitize(s):r.innerHTML=s;else{r.innerText="";var l=t.getAttribute("data-uid");this.renderNodeTemplate(o,r,l),this.renderReactTemplates()}a&&(I([t],Zh),t.focus(),C.add(t,"blur",this.focusOut,this),T([t],vs)),this.allowTextWrap&&this.calculateWrap(t)},i.prototype.getElement=function(t){return d(t)?null:typeof t=="string"?this.element.querySelector('[data-uid="'+t+'"]'):typeof t=="object"?yn(t):null},i.prototype.getId=function(t){return d(t)?null:typeof t=="string"?t:typeof t=="object"?yn(t).getAttribute("data-uid"):null},i.prototype.getEditEvent=function(t,r,s){var a=this.getNodeData(t);return{cancel:!1,newText:r,node:t,nodeData:a,oldText:this.oldText,innerHtml:s}},i.prototype.getNodeObject=function(t){var r;if(d(t))return r;if(this.dataType===1)for(var s=0,a=this.treeData.length;s<a;s++){var o=V(this.fields.id,this.treeData[parseInt(s.toString(),10)]);if(!d(this.treeData[parseInt(s.toString(),10)])&&!d(o)&&o.toString()===t)return this.treeData[parseInt(s.toString(),10)]}else return this.getChildNodeObject(this.treeData,this.fields,t);return r},i.prototype.getChildNodeObject=function(t,r,s){var a;if(d(t))return a;for(var o=0,l=t.length;o<l;o++){var h=V(r.id,t[parseInt(o.toString(),10)]);if(t[parseInt(o.toString(),10)]&&h&&h.toString()===s)return t[parseInt(o.toString(),10)];if(typeof r.child=="string"&&!d(V(r.child,t[parseInt(o.toString(),10)]))){var c=V(r.child,t[parseInt(o.toString(),10)]);if(a=this.getChildNodeObject(c,this.getChildMapper(r),s),a!==void 0)break}else if(this.fields.dataSource instanceof K&&!d(V("child",t[parseInt(o.toString(),10)]))){var u="child";if(a=this.getChildNodeObject(V(u,t[parseInt(o.toString(),10)]),this.getChildMapper(r),s),a!==void 0)break}else if(this.isChildObject()){var p="child",c=V(p,t[parseInt(o.toString(),10)]);if(a=this.getChildNodeObject(c,this.getChildMapper(r),s),a!==void 0)break}}return a},i.prototype.setDragAndDrop=function(t){t&&!this.disabled?this.initializeDrag():this.destroyDrag()},i.prototype.initializeDrag=function(){var t=this,r;this.dragObj=new dS(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+ct,enableTapHold:!0,tapHoldThreshold:100,helper:function(s){t.dragTarget=s.sender.target;var a=M(t.dragTarget,"."+mi),o=M(t.dragTarget,"."+ct);if(t.dragLi=M(t.dragTarget,"."+le),t.fullRowSelect&&!o&&t.dragTarget.classList.contains(ur)&&(o=t.dragTarget.nextElementSibling),!t.dragTarget||!s.element.isSameNode(a)||!o||t.dragTarget.classList.contains(mi)||t.dragTarget.classList.contains(Ce)||t.dragTarget.classList.contains(le)||t.dragLi.classList.contains("e-disable"))return!1;var l=o.cloneNode(!0);if(d(z("div."+lt,l))){var h=t.createElement("div",{className:lt+" "+Ee});l.insertBefore(h,l.children[0])}var c=cE+" "+mi+" "+t.cssClass+" "+(t.enableRtl?sf:"");r=t.createElement("div",{className:c}),r.appendChild(l);var u=t.selectedNodes.length;if(u>1&&t.allowMultiSelection&&t.dragLi.classList.contains(St)){var p=t.createElement("span",{className:dE,innerHTML:""+u});r.appendChild(p)}return document.body.appendChild(r),document.body.style.cursor="",t.dragData=t.getNodeData(t.dragLi),r},dragStart:function(s){T([t.element],ko);var a=M(s.target,".e-list-item"),o;a&&(o=parseInt(a.getAttribute("aria-level"),10));var l=t.getDragEvent(s.event,t,null,s.target,null,r,o);l.draggedNode.classList.contains(Zh)?(t.dragObj.intDestroy(s.event),t.dragCancelAction(r)):t.trigger("nodeDragStart",l,function(h){h.cancel?(t.dragObj.intDestroy(s.event),t.dragCancelAction(r)):t.dragStartAction=!0})},drag:function(s){t.dragObj.setProperties({cursorAt:{top:!d(s.event.targetTouches)||H.isDevice?60:-20}}),t.dragAction(s,r)},dragStop:function(s){if(!s.target){s.helper&&s.helper.parentNode&&Q(s.helper),document.body.style.cursor="",I([t.element],ko),t.dragStartAction=!1;return}I([t.element],ko),s.target.classList.contains("e-sibling")||t.removeVirtualEle();var a=s.target,o=!1,l=M(a,"."+af);(!a||!l)&&(Q(s.helper),document.body.style.cursor="");var h=M(a,".e-list-item"),c;h&&(c=parseInt(h.getAttribute("aria-level"),10));var u=t.getDragEvent(s.event,t,a,a,null,s.helper,c);u.preventTargetExpand=o,t.trigger("nodeDragStop",u,function(p){t.dragParent=p.draggedParentNode,t.preventExpand=p.preventTargetExpand,p.cancel&&(s.helper.parentNode&&Q(s.helper),document.body.style.cursor="",a.classList.contains("e-sibling")&&t.removeVirtualEle()),t.dragStartAction=!1})}}),this.dropObj=new pS(this.element,{out:function(s){s.target&&!d(s)&&!s.target.classList.contains(sa)&&t.dropObj.dragData.default&&t.dropObj.dragData.default.helper.classList.contains(mi)&&(document.body.style.cursor="not-allowed")},over:function(){document.body.style.cursor=""},drop:function(s){t.dropAction(s),t.removeVirtualEle()}})},i.prototype.dragCancelAction=function(t){Q(t),I([this.element],ko),this.dragStartAction=!1},i.prototype.getOffsetX=function(t,r){var s=t.changedTouches;return s&&s.length>0?s[0].clientX-r.getBoundingClientRect().left:t.offsetX},i.prototype.getOffsetY=function(t,r){var s=t.changedTouches;return s&&s.length>0?s[0].clientY-r.getBoundingClientRect().top:t.offsetY},i.prototype.dragAction=function(t,r){if(t.target){var s=M(t.target,"."+af),a=M(t.target,"."+ct),o=z("div."+lt,r);I([o],[Io,na,Jh,ec]),this.isDropIn=!1,this.removeVirtualEle(),document.body.style.cursor="";var l=t.target.classList,h=t.event,c=this.getOffsetY(h,t.target),u=this.getOffsetX(h,t.target);if(this.fullRowSelect&&!a&&!d(l)&&l.contains(ur)&&(a=t.target.nextElementSibling),s){var p=M(t.target,"."+le),f=M(t.target,"."+Pt),v=M(t.target,"."+We),m=M(t.target,"."+Ee);if(!s.classList.contains(mi)||a&&!p.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,p))if(this.hasTemplate&&p){var g=z(this.fullRowSelect?"."+ur:"."+ct,p);if(t&&!m&&!v&&c<7&&!f||m&&c<5||v&&u<3){var y=this.fullRowSelect?1:0;this.appendIndicator(p,o,y)}else if(t&&!m&&!v&&!f&&g&&c>g.offsetHeight-10||m&&c>19||v&&u>19){var y=this.fullRowSelect?2:1;this.appendIndicator(p,o,y)}else T([o],Io),this.isDropIn=!0}else if(p&&t&&!m&&!v&&c<7&&!f||m&&c<5||v&&u<3){var y=this.fullRowSelect?1:0;this.appendIndicator(p,o,y)}else if(p&&t&&!m&&!v&&t.target.offsetHeight>0&&c>t.target.offsetHeight-10&&!f||m&&c>19||v&&u>19){var y=this.fullRowSelect?2:1;this.appendIndicator(p,o,y)}else T([o],Io),this.isDropIn=!0;else t.target.nodeName==="LI"&&!p.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,p)?(T([o],na),this.renderVirtualEle(t)):t.target.classList.contains(sa)?T([o],na):T([o],Jh)}else T([o],ec),document.body.style.cursor="not-allowed";var b=M(t.target,".e-list-item"),E;b&&(E=parseInt(b.getAttribute("aria-level"),10));var w=this.getDragEvent(t.event,this,t.target,t.target,null,r,E);w.dropIndicator&&I([o],w.dropIndicator),this.trigger("nodeDragging",w),w.dropIndicator&&T([o],w.dropIndicator)}},i.prototype.appendIndicator=function(t,r,s){T([r],na);var a=this.createElement("div",{className:sa});t.insertBefore(a,t.children[parseInt(s.toString(),10)])},i.prototype.dropAction=function(t){for(var r=t.event,s=this.getOffsetY(r,t.target),a=t.target,o,l,h=!1,c=[],u=[],p=t.dragData.draggable,f=0;f<p.ej2_instances.length;f++)if(p.ej2_instances[parseInt(f.toString(),10)]instanceof e){o=p.ej2_instances[parseInt(f.toString(),10)];break}if(o&&o.dragTarget){var v=o.dragTarget,m=M(v,"."+le),g=M(a,"."+le);if(u.push(m),g==null&&a.classList.contains(mi)&&(g=a.firstElementChild),Q(t.droppedElement),document.body.style.cursor="",!g||g.isSameNode(m)||this.isDescendant(m,g)){this.fields.dataSource instanceof K||(this.preventExpand=!1);return}if(o.allowMultiSelection&&m.classList.contains(St)){var y=ae("."+St,o.element);if(u=y,t.target.offsetHeight<=33&&s>t.target.offsetHeight-10&&s>6)for(var f=y.length-1;f>=0;f--)g.isSameNode(y[parseInt(f.toString(),10)])||this.isDescendant(y[parseInt(f.toString(),10)],g)||this.appendNode(a,y[parseInt(f.toString(),10)],g,t,o,s);else for(var f=0;f<y.length;f++)g.isSameNode(y[parseInt(f.toString(),10)])||this.isDescendant(y[parseInt(f.toString(),10)],g)||this.appendNode(a,y[parseInt(f.toString(),10)],g,t,o,s)}else this.appendNode(a,m,g,t,o,s);l=parseInt(m.getAttribute("aria-level"),10),h=!0}this.fields.dataSource instanceof K||(this.preventExpand=!1);for(var b=d(o)?null:o.dragData,f=0;f<u.length;f++)c.push(this.getNodeData(this.getElement(u[parseInt(f.toString(),10)]),!0,b));this.trigger("nodeDropped",this.getDragEvent(t.event,o,a,t.target,t.dragData.draggedElement,null,l,h)),o.element.id!==this.element.id&&(o.triggerEvent("nodeDropped",c),this.isNodeDropped=!0,this.fields.dataSource=this.treeData),this.triggerEvent("nodeDropped",c)},i.prototype.appendNode=function(t,r,s,a,o,l){var h=M(t,"."+Pt),c=M(a.target,"."+We),u=M(a.target,"."+Ee);!r.classList.contains("e-disable")&&!h&&(u&&a.event.offsetY<5||c&&a.event.offsetX<3||u&&a.event.offsetY>19||c&&a.event.offsetX>19||!u&&!c)?t.nodeName==="LI"?this.dropAsSiblingNode(r,s,a,o):t.firstElementChild&&t.classList.contains(mi)?t.firstElementChild.nodeName==="UL"&&this.dropAsSiblingNode(r,s,a,o):t.classList.contains("e-icon-collapsible")||t.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(r,s,a,o):this.dropAsChildNode(r,s,o,null,a,l,null,t):this.dropAsChildNode(r,s,o,null,a,l,!0,t),this.showCheckBox&&this.ensureIndeterminate()},i.prototype.dropAsSiblingNode=function(t,r,s,a){var o=M(r,"."+Ce),l=M(t,"."+Ce),h=M(l,"."+le),c;if(s.target.offsetHeight>0&&s.event.offsetY>s.target.offsetHeight-2?c=!1:s.event.offsetY<2?c=!0:(s.target.classList.contains("e-icon-expandable")||s.target.classList.contains("e-icon-collapsible"))&&(s.event.offsetY<5||s.event.offsetX<3?c=!0:(s.event.offsetY>15||s.event.offsetX>17)&&(c=!1)),s.target.classList.contains("e-icon-expandable")||s.target.classList.contains("e-icon-collapsible")){var u=s.target.closest("li");o.insertBefore(t,c?u:u.nextElementSibling)}else o.insertBefore(t,c?s.target:s.target.nextElementSibling);this.moveData(t,r,o,c,a),this.updateElement(l,h),this.updateAriaLevel(t),a.element.id===this.element.id?this.updateList():(a.updateInstance(),this.updateInstance())},i.prototype.dropAsChildNode=function(t,r,s,a,o,l,h,c){var u=M(t,"."+Ce),p=M(u,"."+le),f=M(r,"."+Ce),v;if(o&&o.target&&(v=z(this.fullRowSelect?"."+ur:"."+ct,r)),o&&(l<7&&!c.classList.contains("e-sibling")||c.classList.contains("e-sibling")&&!r.lastChild.classList.contains("e-sibling"))&&!h)f.insertBefore(t,r),this.moveData(t,r,f,!0,s);else if(o&&o.target.offsetHeight>0&&l>o.target.offsetHeight-10&&!h&&!this.hasTemplate)f.insertBefore(t,r.nextElementSibling),this.moveData(t,r,f,!1,s);else if(this.hasTemplate&&v&&l>v.offsetHeight-10&&!h)f.insertBefore(t,r.nextElementSibling),this.moveData(t,r,f,!1,s);else{var m=this.expandParent(r),g=d(a)?null:m.childNodes[parseInt(a.toString(),10)];m.insertBefore(t,g),this.moveData(t,g,m,!0,s)}this.updateElement(u,p),this.updateAriaLevel(t),s.element.id===this.element.id?this.updateList():(s.updateInstance(),this.updateInstance())},i.prototype.moveData=function(t,r,s,a,o){var l=M(s,"."+le),h=this.getId(t),c=o.updateChildField(o.treeData,o.fields,h,null,null,!0),u=this.getId(r),p=u?this.getDataPos(this.treeData,this.fields,u):null,f=this.getId(l);if(this.dataType===1){this.updateField(this.treeData,this.fields,f,"hasChildren",!0);var v=d(p)?this.treeData.length:a?p:p+1;if(d(f)&&!this.hasPid)delete c[0][this.fields.parentID];else{var m=this.isNumberTypeId?parseFloat(f):f;ze(this.fields.parentID,m,c[0])}if(this.treeData.splice(v,0,c[0]),o.element.id!==this.element.id){var g=o.removeChildNodes(h);v++;for(var y=0,b=g.length;y<b;y++)this.treeData.splice(v,0,g[parseInt(y.toString(),10)]),v++;o.groupedData=o.getGroupedData(o.treeData,o.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,f,c,a?p:p+1)},i.prototype.expandParent=function(t){var r=z("div."+Ee+", div."+We,t);r&&r.classList.contains(Ee)&&this.preventExpand!==!0&&this.expandAction(t,r,null);var s=z("."+Ce,t);if(this.preventExpand===!0&&!s&&r&&this.renderChildNodes(t),s=z("."+Ce,t),!d(s)&&this.preventExpand&&t.getAttribute("aria-expanded")!=="true"&&(s.style.display="none"),!d(s)&&this.preventExpand===!1&&(s.style.display="block"),d(s)&&this.preventExpand===!0){d(r)&&gt.generateIcon(this.createElement,t,Ee,this.listBaseOption);var a=z("div."+Ee+", div."+We,t);a&&a.classList.add("e-icon-expandable"),s=gt.generateUL(this.createElement,[],null,this.listBaseOption),t.appendChild(s),a?I([a],We):gt.generateIcon(this.createElement,t,Ee,this.listBaseOption),t.setAttribute("aria-expanded","false"),s.style.display="none"}if(d(s)){var o=this.expandArgs;(d(o)||o&&o.name!=="nodeExpanding")&&this.trigger("nodeExpanding",this.getExpandEvent(t,null)),d(r)&&gt.generateIcon(this.createElement,t,We,this.listBaseOption);var a=z("div."+Ee+", div."+We,t);a?I([a],Ee):(gt.generateIcon(this.createElement,t,We,this.listBaseOption),a=z("div."+lt,t),I([a],Ee)),s=gt.generateUL(this.createElement,[],null,this.listBaseOption),t.appendChild(s),this.addExpand(t),this.trigger("nodeExpanded",this.getExpandEvent(t,null))}var l=z("div."+We,t);return!d(s)&&l&&this.preventExpand&&t.getAttribute("aria-expanded")!=="true"&&(I([l],We),t.setAttribute("aria-expanded","false"),T([l],Ee)),s},i.prototype.updateElement=function(t,r){if(r&&t.childElementCount===0){var s=z("div."+lt,r);Q(t),Q(s);var a=this.getId(r);this.updateField(this.treeData,this.fields,a,"hasChildren",!1),this.removeExpand(r,!0)}},i.prototype.updateAriaLevel=function(t){var r=this.parents(t,"."+Ce).length;t.setAttribute("aria-level",""+r),this.updateChildAriaLevel(z("."+Ce,t),r+1)},i.prototype.updateChildAriaLevel=function(t,r){if(!d(t))for(var s=t.childNodes,a=0,o=s.length;a<o;a++){var l=s[parseInt(a.toString(),10)];l.setAttribute("aria-level",""+r),this.updateChildAriaLevel(z("."+Ce,l),r+1)}},i.prototype.renderVirtualEle=function(t){var r,s=t.event,a=this.getOffsetY(s,t.target);a>t.target.offsetHeight-2?r=!1:a<2&&(r=!0);var o=this.createElement("div",{className:sa}),l=this.fullRowSelect?r?1:2:r?0:1;t.target.insertBefore(o,t.target.children[parseInt(l.toString(),10)])},i.prototype.removeVirtualEle=function(){var t=z("."+sa);t&&Q(t)},i.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},i.prototype.getDragEvent=function(t,r,s,a,o,l,h,c){var u=s?M(s,"."+le):null,p=u?this.getNodeData(u):null,f=r?r.dragLi:o,v=r?r.dragData:null,m=s?this.parents(s,"."+le):null,g=r.dragLi.parentElement,y=r.dragLi?M(g,"."+le):null,b=null,E=null,w=[na,Io,Jh,ec],A=null,D=c===!0?f:u,N=D?M(D,".e-list-parent"):null,x=0,j=null;if(y=r.dragLi&&y===null?M(g,"."+mi):y,y=c===!0?this.dragParent:y,l)for(;x<4;){if(z("."+lt,l).classList.contains(w[parseInt(x.toString(),10)])){A=w[parseInt(x.toString(),10)];break}x++}if(N){var q=0;for(x=0;x<N.childElementCount;x++)if(q=c!==!0&&N.children[parseInt(x.toString(),10)]===f&&u!==f?++q:q,c!==!0&&N.children[parseInt(x.toString(),10)].classList.contains("e-hover")){E=t.offsetY>=23?x+1:x;break}else if(N.children[parseInt(x.toString(),10)]===D){E=(t.offsetY>=23,x);break}E=q!==0?--E:E,j=this.isDropIn?"Inside":t.offsetY<7?"Before":"After"}if(s&&(m.length===0?b=null:s.classList.contains(le)?b=m[0]:b=m[1]),u===f&&(b=u),s&&a.offsetHeight<=33&&t.offsetY<a.offsetHeight-10&&t.offsetY>6&&(b=u,c!==!0)){h=++h;var L=b?z(".e-list-parent",b):null;if(E=L?L.children.length:0,!(this.fields.dataSource instanceof K)&&L===null&&b){var O=b.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,b.getAttribute("data-uid").toString()):null;E=O?O.length:0}}return{cancel:!1,clonedNode:l,event:t,draggedNode:f,draggedNodeData:v,droppedNode:u,droppedNodeData:p,dropIndex:E,dropLevel:h,draggedParentNode:y,dropTarget:b,dropIndicator:A,target:a,position:j}},i.prototype.addFullRow=function(t){var r=this.liList.length;if(t)for(var s=0;s<r;s++)this.createFullRow(this.liList[parseInt(s.toString(),10)]);else for(var s=0;s<r;s++){var a=z("."+ur,this.liList[parseInt(s.toString(),10)]);Q(a)}},i.prototype.createFullRow=function(t){var r=this.createElement("div",{className:ur});t.insertBefore(r,t.childNodes[0])},i.prototype.addMultiSelect=function(t){if(t)for(var r=ae("."+le+':not([aria-selected="true"])',this.element),s=0,a=r;s<a.length;s++){var o=a[s];o.setAttribute("aria-selected","false")}else for(var r=ae("."+le+'[aria-selected="false"]',this.element),l=0,h=r;l<h.length;l++){var o=h[l];o.removeAttribute("aria-selected")}},i.prototype.collapseByLevel=function(t,r,s,a){if(a=d(a)?1:a,r>0&&!d(t))for(var o=this.getVisibleNodes(s,t.childNodes),l=0,h=o.length;l<h;l++){var c=o[parseInt(l.toString(),10)],u=z("."+We,z("."+ct,c));a>=r&&!d(u)&&this.collapseNode(c,u,null),this.collapseByLevel(z("."+Ce,c),r,s,a+1)}},i.prototype.collapseAllNodes=function(t){for(var r=this.getVisibleNodes(t,ae("."+We,this.element)),s=0,a=r.length;s<a;s++){var o=r[parseInt(s.toString(),10)],l=M(o,"."+le);this.collapseNode(l,o,null)}},i.prototype.expandByLevel=function(t,r,s){if(r>0&&!d(t))for(var a=this.getVisibleNodes(s,t.childNodes),o=0,l=a.length;o<l;o++){var h=a[parseInt(o.toString(),10)],c=z("."+Ee,z("."+ct,h));d(c)||this.expandAction(h,c,null),this.expandByLevel(z("."+Ce,h),r-1,s)}},i.prototype.expandAllNodes=function(t){for(var r=this.getVisibleNodes(t,ae("."+Ee,this.element)),s=0,a=r;s<a.length;s++){var o=a[s],l=M(o,"."+le);this.expandAction(l,o,null,!0,null,!0)}},i.prototype.getVisibleNodes=function(t,r){var s=Array.prototype.slice.call(r);if(t)for(var a=0;a<s.length;a++)Tt(s[parseInt(a.toString(),10)])||(s.splice(a,1),a--);return s},i.prototype.removeNode=function(t){var r=M(t,"."+Ce),s=M(r,"."+le);d(this.nodeTemplateFn)||this.destroyTemplate(t),Q(t),this.updateElement(r,s),this.removeData(t)},i.prototype.updateInstance=function(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes()},i.prototype.updateList=function(){this.liList=Array.prototype.slice.call(ae("."+le,this.element))},i.prototype.updateSelectedNodes=function(){this.setProperties({selectedNodes:[]},!0);var t=ae("."+St,this.element);this.selectGivenNodes(t)},i.prototype.updateExpandedNodes=function(){this.setProperties({expandedNodes:[]},!0);for(var t=ae('[aria-expanded="true"]',this.element),r=0,s=t.length;r<s;r++)this.addExpand(t[parseInt(r.toString(),10)])},i.prototype.removeData=function(t){if(this.dataType===1){var r=new K(this.treeData),s=this.getId(t),a={},o=this.isNumberTypeId?parseFloat(s):s;a[this.fields.id]=o,r.remove(this.fields.id,a),this.removeChildNodes(s)}else{var s=this.getId(t);this.updateChildField(this.treeData,this.fields,s,null,null,!0)}},i.prototype.removeChildNodes=function(t){for(var r=this.getChildGroup(this.groupedData,t,!1),s=[],a=0,o=r.length;a<o;a++){var l=new K(this.treeData),h=V(this.fields.id,r[parseInt(a.toString(),10)]).toString(),c={},u=this.isNumberTypeId?parseFloat(h):h;c[this.fields.id]=u;var p=l.remove(this.fields.id,c);s.push(p[0]),this.removeChildNodes(h)}return s},i.prototype.doGivenAction=function(t,r,s){for(var a=0,o=t.length;a<o;a++){var l=this.getElement(t[parseInt(a.toString(),10)]);if(!d(l)){var h=z("."+r,z("."+ct,l));d(h)||(s?this.expandAction(l,h,null):this.collapseNode(l,h,null))}}},i.prototype.addGivenNodes=function(t,r,s,a,o){if(t.length!==0){var l=this.getSortedData(t),h=r?parseFloat(r.getAttribute("aria-level"))+1:1;a&&this.updateMapper(h);var c=gt.createListItemFromJson(this.createElement,l,this.listBaseOption,h),u=this.getId(r),p;d(r)||(p=z("div."+lt,r)),this.dataType===1&&p&&p.classList.contains(Ee)&&this.preventExpand&&!d(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")&&(this.preventExpand=!0),this.dataType!==1&&(this.addChildData(this.treeData,this.fields,u,t,s),this.isFirstRender=!1);var f;o?f=o:f=r?this.expandParent(r):z("."+Ce,this.element);var v=d(s)?null:f.childNodes[parseInt(s.toString(),10)];if(!this.isFirstRender||this.dataType===1){var m=this.expandArgs;if(v||this.sortOrder==="None"){for(var g=0;g<c.length;g++)f.insertBefore(c[parseInt(g.toString(),10)],v);if(this.dataType===1&&!d(r)&&!this.preventExpand&&!d(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")){this.preventExpand=!1;var y=z("div."+lt,r);y&&y.classList.contains(Ee)&&(d(m)||m.name!=="nodeExpanding")&&this.expandAction(r,y,null)}}if(!v&&(this.sortOrder==="Ascending"||this.sortOrder==="Descending"))if(f.childNodes.length===0){for(var g=0;g<c.length;g++)f.insertBefore(c[parseInt(g.toString(),10)],v);if(this.dataType===1&&!d(r)&&!this.preventExpand&&!d(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")){this.preventExpand=!1;var y=z("div."+lt,r);y&&y.classList.contains(Ee)&&(d(m)||m.name!=="nodeExpanding")&&this.expandAction(r,y,null)}}else for(var b=f.childNodes,g=0;g<c.length;g++)for(var E=0;E<b.length;E++){var w=this.sortOrder==="Ascending"?b[parseInt(E.toString(),10)].textContent.toUpperCase()>c[parseInt(g.toString(),10)].innerText.toUpperCase():b[parseInt(E.toString(),10)].textContent.toUpperCase()<c[parseInt(g.toString(),10)].innerText.toUpperCase();if(w){f.insertBefore(c[parseInt(g.toString(),10)],b[parseInt(E.toString(),10)]);break}f.insertBefore(c[parseInt(g.toString(),10)],b[b.length])}}if(this.dataType===1){this.updateField(this.treeData,this.fields,u,"hasChildren",!0);for(var A=this.getId(v),D=d(A)?this.treeData.length:this.getDataPos(this.treeData,this.fields,A),E=0;E<t.length;E++){if(!d(u)){var N=this.isNumberTypeId?parseFloat(u):u;ze(this.fields.parentID,N,t[parseInt(E.toString(),10)])}this.treeData.splice(D,0,t[parseInt(E.toString(),10)]),D++}}this.finalizeNode(f)}},i.prototype.updateMapper=function(t){var r=t===1?this.fields:this.getChildFields(this.fields,t-1,1);this.updateListProp(r)},i.prototype.updateListProp=function(t){var r=this.getActualProperties(t);this.listBaseOption.fields=r,this.listBaseOption.fields.url=Object.prototype.hasOwnProperty.call(r,"navigateUrl")?r.navigateUrl:"navigateUrl"},i.prototype.getDataPos=function(t,r,s){for(var a=null,o=0,l=t.length;o<l;o++){var h=V(r.id,t[parseInt(o.toString(),10)]);if(t[parseInt(o.toString(),10)]&&h&&h.toString()===s)return o;if(typeof r.child=="string"&&!d(V(r.child,t[parseInt(o.toString(),10)]))){var c=V(r.child,t[parseInt(o.toString(),10)]);if(a=this.getDataPos(c,this.getChildMapper(r),s),a!==null)break}else if(this.fields.dataSource instanceof K&&!d(V("child",t[parseInt(o.toString(),10)]))){var u=V("child",t[parseInt(o.toString(),10)]);if(a=this.getDataPos(u,this.getChildMapper(r),s),a!==null)break}}return a},i.prototype.addChildData=function(t,r,s,a,o){var l;if(d(s)){o=d(o)?t.length:o;for(var h=0,c=a.length;h<c;h++)t.splice(o,0,a[parseInt(h.toString(),10)]),o++;return l}for(var u=0,p=t.length;u<p;u++){var f=V(r.id,t[parseInt(u.toString(),10)]);if(t[parseInt(u.toString(),10)]&&f&&f.toString()===s){if(typeof r.child=="string"&&Object.prototype.hasOwnProperty.call(t[parseInt(u.toString(),10)],r.child)&&t[parseInt(u.toString(),10)][r.child]!==null||this.fields.dataSource instanceof K&&Object.prototype.hasOwnProperty.call(t[parseInt(u.toString(),10)],"child")){var v=typeof r.child=="string"?r.child:"child",m=V(v,t[parseInt(u.toString(),10)]);d(m)&&(m=[]),o=d(o)?m.length:o;for(var h=0,c=a.length;h<c;h++)m.splice(o,0,a[parseInt(h.toString(),10)]),o++}else{var v=typeof r.child=="string"?r.child:"child";t[parseInt(u.toString(),10)][""+v]=a}return!0}else if(typeof r.child=="string"&&!d(V(r.child,t[parseInt(u.toString(),10)]))){var g=V(r.child,t[parseInt(u.toString(),10)]);if(l=this.addChildData(g,this.getChildMapper(r),s,a,o),l!==void 0)break}else if(this.fields.dataSource instanceof K&&!d(V("child",t[parseInt(u.toString(),10)]))){var m=V("child",t[parseInt(u.toString(),10)]);if(l=this.addChildData(m,this.getChildMapper(r),s,a,o),l!==void 0)break}}return l},i.prototype.doDisableAction=function(t){var r=this.nodeType(t),s=this.checkValidId(r);this.validArr=[];for(var a=0,o=s.length;a<o;a++){var l=s[parseInt(a.toString(),10)][this.fields.id].toString();l&&this.disableNode.indexOf(l)===-1&&this.disableNode.push(l);var h=this.getElement(l);h&&(h.setAttribute("aria-disabled","true"),T([h],ln))}},i.prototype.doEnableAction=function(t){for(var r=this.nodeType(t),s=0,a=r.length;s<a;s++){var o=this.getElement(r[parseInt(s.toString(),10)]),l=r[parseInt(s.toString(),10)];l&&this.disableNode.indexOf(l)!==-1&&this.disableNode.splice(this.disableNode.indexOf(l),1),o&&(o.removeAttribute("aria-disabled"),I([o],ln))}},i.prototype.nodeType=function(t){for(var r=[],s=0,a=t.length;s<a;s++){var o=void 0;typeof t[parseInt(s.toString(),10)]=="string"?o=t[parseInt(s.toString(),10)]?t[parseInt(s.toString(),10)].toString():null:typeof t[parseInt(s.toString(),10)]=="object"&&(o=t[parseInt(s.toString(),10)]?t[parseInt(s.toString(),10)].getAttribute("data-uid").toString():null),r.indexOf(o)===-1&&r.push(o)}return r},i.prototype.checkValidId=function(t){var r=this;if(this.dataType===1)this.validArr=this.treeData.filter(function(l){return t.indexOf(l[r.fields.id]?l[r.fields.id].toString():null)!==-1});else if(this.dataType===2)for(var s=0;s<this.treeData.length;s++){var a=this.treeData[parseInt(s.toString(),10)][this.fields.id]?this.treeData[parseInt(s.toString(),10)][this.fields.id].toString():null;t.indexOf(a)!==-1&&this.validArr.push(this.treeData[parseInt(s.toString(),10)]);var o=V(this.fields.child.toString(),this.treeData[parseInt(s.toString(),10)]);o&&this.filterNestedChild(o,t)}return this.validArr},i.prototype.filterNestedChild=function(t,r){for(var s=0;s<t.length;s++){var a=t[parseInt(s.toString(),10)][this.fields.id]?t[parseInt(s.toString(),10)][this.fields.id].toString():null;r.indexOf(a)!==-1&&this.validArr.push(t[parseInt(s.toString(),10)]);var o=V(this.fields.child.toString(),t[parseInt(s.toString(),10)]);o&&this.filterNestedChild(o,r)}},i.prototype.setTouchClass=function(){var t=M(this.element,"."+vE);this.touchClass=d(t)?"":mE},i.prototype.updatePersistProp=function(){this.removeField(this.treeData,this.fields,["selected","expanded"]);for(var t=this.selectedNodes,r=0,s=t.length;r<s;r++)this.updateField(this.treeData,this.fields,t[parseInt(r.toString(),10)],"selected",!0);for(var a=this.expandedNodes,o=0,l=a.length;o<l;o++)this.updateField(this.treeData,this.fields,a[parseInt(o.toString(),10)],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);for(var h=this.checkedNodes,c=0,l=h.length;c<l;c++)this.updateField(this.treeData,this.fields,h[parseInt(c.toString(),10)],"isChecked",!0)}},i.prototype.removeField=function(t,r,s){if(!(d(t)||d(r)))for(var a=0,o=t.length;a<o;a++){for(var l=0;l<s.length;l++){var h=this.getMapperProp(r,s[parseInt(l.toString(),10)]);d(t[parseInt(a.toString(),10)][""+h])||delete t[parseInt(a.toString(),10)][""+h]}typeof r.child=="string"&&!d(V(r.child,t[parseInt(a.toString(),10)]))?this.removeField(V(r.child,t[parseInt(a.toString(),10)]),this.getChildMapper(r),s):this.fields.dataSource instanceof K&&!d(V("child",t[parseInt(a.toString(),10)]))&&this.removeField(V("child",t[parseInt(a.toString(),10)]),this.getChildMapper(r),s)}},i.prototype.getMapperProp=function(t,r){switch(r){case"selected":return d(t.selected)?"selected":t.selected;case"expanded":return d(t.expanded)?"expanded":t.expanded;case"isChecked":return d(t.isChecked)?"isChecked":t.isChecked;case"hasChildren":return d(t.hasChildren)?"hasChildren":t.hasChildren;default:return r}},i.prototype.updateField=function(t,r,s,a,o){if(!d(s))if(this.dataType===1){var l=this.isNumberTypeId?parseFloat(s):s,h=new K(this.treeData).executeLocal(new Se().where(r.id,"equal",l,!1));ze(this.getMapperProp(r,a),o,h[0])}else this.updateChildField(t,r,s,a,o)},i.prototype.updateChildField=function(t,r,s,a,o,l){var h;if(d(t))return h;for(var c=0,u=t.length;c<u;c++){var p=V(r.id,t[parseInt(c.toString(),10)]);if(t[parseInt(c.toString(),10)]&&!d(p)&&p.toString()===s)return l?h=t.splice(c,1):(ze(this.getMapperProp(r,a),o,t[parseInt(c.toString(),10)]),h=[]),h;if(typeof r.child=="string"&&!d(V(r.child,t[parseInt(c.toString(),10)]))){var f=V(r.child,t[parseInt(c.toString(),10)]);if(h=this.updateChildField(f,this.getChildMapper(r),s,a,o,l),h!==void 0)break}else if(this.fields.dataSource instanceof K&&!d(V("child",t[parseInt(c.toString(),10)]))){var v=V("child",t[parseInt(c.toString(),10)]);if(h=this.updateChildField(v,this.getChildMapper(r),s,a,o,l),h!==void 0)break}}return h},i.prototype.triggerEvent=function(t,r){if(this.renderReactTemplates(),t==="addNodes"){for(var s=[],a=0;a<r.length;a++)s.push(this.getNode(this.getElement(d(r[parseInt(a.toString(),10)][this.fields.id])?V(this.fields.id,r[parseInt(a.toString(),10)]).toString():null)));r=s}var o={data:this.treeData,action:t,nodeData:r};this.trigger("dataSourceChanged",o)},i.prototype.wireInputEvents=function(t){C.add(t,"blur",this.inputFocusOut,this)},i.prototype.wireEditingEvents=function(t){var r=this;t&&!this.disabled?this.touchEditObj=new wr(this.element,{tap:function(s){r.isDoubleTapped(s)&&s.tapCount===2&&(s.originalEvent.preventDefault(),r.editingHandler(s.originalEvent))}}):this.touchEditObj&&this.touchEditObj.destroy()},i.prototype.wireClickEvent=function(t){var r=this;t?this.touchClickObj=new wr(this.element,{tap:function(s){r.clickHandler(s)}}):this.touchClickObj&&this.touchClickObj.destroy()},i.prototype.wireExpandOnEvent=function(t){var r=this;t?this.touchExpandObj=new wr(this.element,{tap:function(s){(r.expandOnType==="Click"||r.expandOnType==="DblClick"&&r.isDoubleTapped(s)&&s.tapCount===2)&&s.originalEvent.which!==3&&r.expandHandler(s)}}):this.touchExpandObj&&this.touchExpandObj.destroy()},i.prototype.mouseDownHandler=function(t){this.mouseDownStatus=!0,(t.shiftKey||t.ctrlKey)&&t.preventDefault(),t.ctrlKey&&this.allowMultiSelection&&C.add(this.element,"contextmenu",this.preventContextMenu,this)},i.prototype.preventContextMenu=function(t){t.preventDefault()},i.prototype.wireEvents=function(){C.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),this.expandOnType!=="None"&&this.wireExpandOnEvent(!0),C.add(this.element,"mouseover",this.onMouseOver,this),C.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new Ci(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},i.prototype.unWireEvents=function(){C.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),C.remove(this.element,"mouseover",this.onMouseOver),C.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()},i.prototype.parents=function(t,r){for(var s=[],a=t.parentNode;!d(a);)fS(a,r)&&s.push(a),a=a.parentNode;return s},i.prototype.isDoubleTapped=function(t){var r=t.originalEvent.target,s;return r&&t.tapCount&&(t.tapCount===1?this.firstTap=M(r,"."+le):t.tapCount===2&&(s=M(r,"."+le))),this.firstTap===s},i.prototype.isDescendant=function(t,r){for(var s=r.parentNode;!d(s);){if(s===t)return!0;s=s.parentNode}return!1},i.prototype.showSpinner=function(t){T([t],Do),ad({target:t,width:H.isDevice?16:14},this.createElement),od(t)},i.prototype.hideSpinner=function(t){ld(t),t.innerHTML="",I([t],Do)},i.prototype.setCheckedNodes=function(t){t=JSON.parse(JSON.stringify(t)),t.length>1&&typeof this.nodeChecked=="function"&&this.nodeChecked.length>0&&(this.isFilter=!0),this.uncheckAll(this.checkedNodes),this.setIndeterminate(t),t.length>0&&this.checkAll(t)},i.prototype.setValidCheckedNode=function(t,r){if(r===void 0&&(r=[]),this.dataType===1){var s=this.fields,a=new K(this.treeData).executeLocal(new Se().where(s.id,"equal",t,!0));if(a[0]&&(this.setChildCheckState(a,t,a[0],r),this.autoCheck)){for(var o=a[0][this.fields.parentID]?a[0][this.fields.parentID].toString():null,l=this.getChildNodes(this.treeData,o),h=0,c=0;c<l.length;c++){var u=l[parseInt(c.toString(),10)][this.fields.id].toString();this.checkedNodes.indexOf(u)!==-1&&h++}h===l.length&&this.checkedNodes.indexOf(o)===-1&&o&&this.checkDisabledState(o)}}else if(this.dataType===2)for(var p=0;p<this.treeData.length;p++){var f=this.treeData[parseInt(p.toString(),10)][this.fields.id]?this.treeData[parseInt(p.toString(),10)][this.fields.id].toString():"";if(f===t&&this.checkedNodes.indexOf(t)===-1){this.checkDisabledState(t);break}var v=V(this.fields.child.toString(),this.treeData[parseInt(p.toString(),10)]);v&&this.setChildCheckState(v,t,this.treeData[parseInt(p.toString(),10)],r)}},i.prototype.setChildCheckState=function(t,r,s,a){a===void 0&&(a=[]);var o,l=0;if(this.dataType===1){s&&(o=s[this.fields.id]?s[this.fields.id].toString():null);for(var h=0;h<t.length;h++){var c=t[parseInt(h.toString(),10)][this.fields.id]?t[parseInt(h.toString(),10)][this.fields.id].toString():null;s&&o&&this.autoCheck&&this.checkedNodes.indexOf(o)!==-1&&this.checkedNodes.indexOf(c)===-1&&this.checkDisabledState(c,t[h]),c===r&&this.checkedNodes.indexOf(r)===-1&&this.checkDisabledState(r);var u=this.getChildNodes(this.treeData,c),p=a.length===1&&a[0]===c;(u.length===r.length||p)&&this.setChildCheckState(u,r,s)}}else{s&&(o=s[this.fields.id]?s[this.fields.id].toString():"");for(var h=0;h<t.length;h++){var f=t[parseInt(h.toString(),10)][this.fields.id]?t[parseInt(h.toString(),10)][this.fields.id].toString():"",p=[r].length===1&&a.length===0;s&&o&&this.autoCheck&&this.checkedNodes.indexOf(o)!==-1&&this.checkedNodes.indexOf(f)===-1&&(f===r||p)&&this.checkDisabledState(f,t[h]),f===r&&this.checkedNodes.indexOf(r)===-1&&this.checkDisabledState(r);var u=V(this.fields.child.toString(),t[parseInt(h.toString(),10)]);u&&this.setChildCheckState(u,r,t[parseInt(h.toString(),10)]),this.checkedNodes.indexOf(f)!==-1&&this.autoCheck&&l++,l===t.length&&this.checkedNodes.indexOf(o)===-1&&this.autoCheck&&this.checkDisabledState(o,s)}}},i.prototype.setIndeterminate=function(t){for(var r=0;r<t.length;r++)this.setValidCheckedNode(t[parseInt(r.toString(),10)],t)},i.prototype.updatePosition=function(t,r,s,a){if(this.dataType===1){var o=this.getDataPos(this.treeData,this.fields,t);if(this.treeData.splice(o,1,r),s){this.removeChildNodes(t);for(var l=0;l<a.length;l++)this.treeData.splice(o,0,a[parseInt(l.toString(),10)]),o++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,t,[r],void 0)},i.prototype.updateChildPosition=function(t,r,s,a,o){for(var l,h=0,c=t.length;h<c;h++){var u=V(r.id,t[parseInt(h.toString(),10)]);if(t[parseInt(h.toString(),10)]&&u&&u.toString()===s)return t[parseInt(h.toString(),10)]=a[0],!0;if(typeof r.child=="string"&&!d(V(r.child,t[parseInt(h.toString(),10)]))){var p=V(r.child,t[parseInt(h.toString(),10)]);if(l=this.updateChildPosition(p,this.getChildMapper(r),s,a,o),l!==void 0)break}else if(this.fields.dataSource instanceof K&&!d(V("child",t[parseInt(h.toString(),10)]))){var f=V("child",t[parseInt(h.toString(),10)]);if(l=this.updateChildPosition(f,this.getChildMapper(r),s,a,o),l!==void 0)break}}return l},i.prototype.dynamicState=function(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())},i.prototype.crudOperation=function(t,r,s,a,o,l,h){var c=this,u=this.fields.dataSource,p=[],f=this.getQuery(this.fields),v=this.fields.id,m,g={addedRecords:[],deletedRecords:[],changedRecords:[]},y=[];r?y=this.nodeType(r):s&&(typeof s=="string"?y[0]=s.toString():typeof s=="object"&&(y[0]=s.getAttribute("data-uid").toString()));for(var b=0,E=y.length;b<E;b++){var w=this.getElement(y[parseInt(b.toString(),10)]);if(!d(w)){var A=this.getNodeObject(y[parseInt(b.toString(),10)]);p.push(A)}}switch(t){case"delete":r.length===1?m=u.remove(v,p[0],f.fromTable,f):(g.deletedRecords=p,m=u.saveChanges(g,v,f.fromTable,f)),m.then(function(){return c.deleteSuccess(y)}).catch(function(N){return c.dmFailure(N)});break;case"update":p[0][this.fields.text]=a,m=u.update(v,p[0],f.fromTable,f),m.then(function(){return c.editSucess(s,a,h)}).catch(function(N){return c.dmFailure(N,s,h)});break;case"insert":if(o.length===1)m=u.insert(o[0],f.fromTable,f);else{for(var D=[],b=0,E=o.length;b<E;b++)D.push(o[parseInt(b.toString(),10)]);g.addedRecords=D,m=u.saveChanges(g,v,f.fromTable,f)}m.then(function(){var N=c.getElement(s);c.addSuccess(o,N,l),c.preventExpand=!1}).catch(function(N){return c.dmFailure(N)});break}},i.prototype.deleteSuccess=function(t){for(var r=[],s=0,a=t.length;s<a;s++){var o=this.getElement(t[parseInt(s.toString(),10)]);r.push(this.getNode(o)),!d(o)&&this.removeNode(o)}this.updateInstance(),this.dataType===1&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent("removeNode",r)},i.prototype.editSucess=function(t,r,s){var a=this.getElement(t),o=z("."+fs,a);this.appendNewText(a,o,r,s)},i.prototype.addSuccess=function(t,r,s){var a=this,o,l=r?r.querySelector("."+lt):null;r&&l&&l.classList.contains(Ee)&&r.querySelector("."+Ce)===null?this.renderChildNodes(r,null,function(){o=r.querySelector("."+Ce),a.addGivenNodes(t,r,s,!0,o),a.triggerEvent("addNodes",t)}):(this.addGivenNodes(t,r,s,!0),this.triggerEvent("addNodes",t))},i.prototype.dmFailure=function(t,r,s){r&&this.updatePreviousText(r,s),this.trigger("actionFailure",{error:t})},i.prototype.updatePreviousText=function(t,r){var s=this.getElement(t),a=z("."+fs,s);this.updateText(s,a,this.oldText,r)},i.prototype.getHierarchicalParentId=function(t,r,s){var a=this,o=r.findIndex(function(c){return c[a.fields.id]&&c[a.fields.id].toString()===t});if(o===-1)for(var l=0;l<r.length;l++){var h=V(this.fields.child.toString(),r[parseInt(l.toString(),10)]);if(!d(h))if(o=h.findIndex(function(c){return c[a.fields.id]&&c[a.fields.id].toString()===t}),o===-1)this.getHierarchicalParentId(t,h,s);else{s.push(r[parseInt(l.toString(),10)][this.fields.id].toString()),this.getHierarchicalParentId(r[parseInt(l.toString(),10)][this.fields.id].toString(),this.treeData,s);break}}return s},i.prototype.onPropertyChanged=function(t,r){for(var s=0,a=Object.keys(t);s<a.length;s++){var o=a[s];switch(o){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){var l=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(l,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"allowTextWrap":this.setTextWrap(),this.updateWrap();break;case"checkedNodes":JSON.stringify(r.checkedNodes)!==JSON.stringify(t.checkedNodes)&&this.showCheckBox&&(this.checkedNodes=r.checkedNodes,this.setCheckedNodes(t.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=t.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(r.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.setProperties({expandedNodes:d(t.expandedNodes)?[]:t.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),this.expandOnType!=="None"&&!this.disabled&&this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,(!this.isReact||this.isReact&&!(this.fields.dataSource instanceof K))&&(this.element.classList.contains("e-filtering")||(this.DDTTreeData=JSON.parse(JSON.stringify(this.fields.dataSource))),this.reRenderNodes()),this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect),this.allowTextWrap&&(this.setTextWrap(),this.updateWrap());break;case"loadOnDemand":if(this.loadOnDemand===!1&&!this.onLoaded){for(var h=this.element.querySelectorAll("li"),c=0;c<h.length;)h[parseInt(c.toString(),10)].getAttribute("aria-expanded")!=="true"&&this.renderChildNodes(h[parseInt(c.toString(),10)],!0,null,!0),c++;this.onLoaded=!0}break;case"nodeTemplate":this.hasTemplate=!1,this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:t.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"checkDisabledChildren":this.reRenderNodes();break;case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:t.fullRowNavigable},!0),this.listBaseOption.itemNavigable=t.fullRowNavigable,this.reRenderNodes();break}}},i.prototype.destroy=function(){this.clearTemplate(),this.element.removeAttribute("aria-activedescendant"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),this.ulElement=null,this.liList=null,this.startNode=null,this.firstTap=null,this.expandArgs=null,this.dragLi=null,this.dragTarget=null,this.dragParent=null,this.dragObj=null,this.dropObj=null,this.inputObj=null,this.touchEditObj=null,this.touchExpandObj=null,this.touchClickObj=null,n.prototype.destroy.call(this)},i.prototype.addNodes=function(t,r,s,a){if(!d(t)){t=JSON.parse(JSON.stringify(t));var o=this.getElement(r);if(this.preventExpand=a,this.fields.dataSource instanceof K)this.isOffline?this.addSuccess(t,o,s):this.crudOperation("insert",null,r,null,t,s,this.preventExpand);else if(this.dataType===2)this.addGivenNodes(t,o,s);else{if(o)this.addGivenNodes(t,o,s);else{t=this.getSortedData(t);for(var l=0;l<t.length;l++){var h=V(this.fields.parentID,t[parseInt(l.toString(),10)]);o=h&&this.getElement(h.toString()),!d(h)&&d(o)&&(this.isHiddenItem=!0,this.preventExpand=!1,this.ensureVisible(h),this.preventExpand=a,this.isHiddenItem=!1,o=this.getElement(h.toString())),this.addGivenNodes([t[parseInt(l.toString(),10)]],o,s)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}var c=z("."+le+'[tabindex="0"]',this.element);d(c)&&this.setNodeFocusable(),this.updateCheckedStateFromDS(),this.showCheckBox&&o&&this.autoCheck&&this.ensureParentCheckState(o),this.fields.dataSource instanceof K||(this.preventExpand=!1,this.triggerEvent("addNodes",t))}},i.prototype.beginEdit=function(t){var r=this.getElement(t);d(r)||this.disabled||this.createTextbox(r)},i.prototype.checkAll=function(t){this.showCheckBox&&this.doCheckBoxAction(t,!0)},i.prototype.collapseAll=function(t,r,s){d(t)?r>0?this.collapseByLevel(z("."+Ce,this.element),r,s):this.collapseAllNodes(s):this.doGivenAction(t,We,!1)},i.prototype.disableNodes=function(t){d(t)||this.doDisableAction(t)},i.prototype.enableNodes=function(t){d(t)||this.doEnableAction(t)},i.prototype.ensureVisible=function(t){var r=[];if(this.dataType===1)for(var s=this.getTreeData(t);s.length!==0&&!d(s[0][this.fields.parentID]);)r.push(s[0][this.fields.parentID].toString()),s=this.getTreeData(s[0][this.fields.parentID].toString());else this.dataType===2&&(r=this.getHierarchicalParentId(t,this.treeData,r));this.expandAll(r.reverse(),null,null,this.isHiddenItem);var a=this.getElement(t);if(!d(a)){if(typeof t=="object"){var o=this.parents(a,"."+le);this.expandAll(o)}setTimeout(function(){a.scrollIntoView({behavior:"smooth"})},450)}},i.prototype.expandAll=function(t,r,s,a){this.isAnimate=!a,d(t)?r>0?this.expandByLevel(z("."+Ce,this.element),r,s):(this.expandAllNodes(s),(!this.loadOnDemand||this.element.classList.contains("e-filtering"))&&(this.updateAttributes(this.element),this.updateList())):this.doGivenAction(t,Ee,!0),this.isAnimate=!0},i.prototype.getAllCheckedNodes=function(){var t=this.checkedNodes;return t},i.prototype.getDisabledNodes=function(){var t=this.disableNode;return t},i.prototype.getNode=function(t){var r=this.getElement(t);return this.getNodeData(r,!0)},i.prototype.getTreeData=function(t){var r=this.getId(t);if(this.updatePersistProp(),d(r))return this.treeData;var s=this.getNodeObject(r);return d(s)?[]:[s]},i.prototype.moveNodes=function(t,r,s,a){if(!(d(t)||t.length===0)){var o=this.getElement(r),l=[];d(o)&&(this.isHiddenItem=!0,this.ensureVisible(r),this.isHiddenItem=!1,o=this.getElement(r));for(var h=0;h<t.length;h++){var c=this.getElement(t[parseInt(h.toString(),10)]);l.push(this.getNode(c)),!(d(c)||o.isSameNode(c)||this.isDescendant(c,o))&&(this.preventExpand=a,this.dropAsChildNode(c,o,this,s,null,null,null,o))}this.fields.dataSource instanceof K||(this.preventExpand=!1),this.triggerEvent("moveNodes",l)}},i.prototype.refreshNode=function(t,r){if(!(d(t)||d(r))){var s=!1;if(this.dataType===1&&r.length>1)s=!0;else if(this.dataType===2&&r.length===1){var a=V(this.fields.child.toString(),r[0]);d(a)||(s=!0)}var o=this.getElement(t),l=o?o.getAttribute("data-uid"):t?t.toString():null;this.refreshData=this.getNodeObject(l),r=JSON.parse(JSON.stringify(r));var h,c;if(this.dataType===1&&s){for(var u=0;u<r.length;u++)if(d(r[parseInt(u.toString(),10)][this.fields.parentID])){c=r[parseInt(u.toString(),10)],r.splice(u,1);break}h=$({},this.refreshData,c)}else h=$({},this.refreshData,r[0]);if(d(o)){this.updatePosition(l,h,s,r);return}this.isRefreshed=!0;var p=parseFloat(o.getAttribute("aria-level")),f=gt.createListItemFromJson(this.createElement,[h],this.listBaseOption,p),v=z("."+Ce,o),m=V(this.fields.child.toString(),h);if(s&&v||s&&!d(m)){var g=o.parentElement,y=Array.prototype.indexOf.call(g.childNodes,o);ve(o),g.insertBefore(f[0],g.childNodes[parseInt(y.toString(),10)]),this.updatePosition(l,h,s,r),s&&v&&this.expandAll([l])}else{var b=z("."+ct,o),E=z("."+ct,f[0]),w=z("div."+lt,b),A=z("div."+lt,E);w&&A&&(A.classList.contains(Ee)&&w.classList.contains(We)?(I([A],Ee),T([A],We)):A.classList.contains(We)&&w.classList.contains(Ee)?(I([A],We),T([A],Ee)):w.classList.contains("interaction")&&T([A],"interaction")),ve(b);var D=z("."+ur,o);D.parentNode.insertBefore(E,D.nextSibling),this.updatePosition(l,h,s,r)}if(o=this.getElement(t),h[this.fields.tooltip]&&o.setAttribute("title",h[this.fields.tooltip]),Object.prototype.hasOwnProperty.call(h,this.fields.htmlAttributes)&&h[this.fields.htmlAttributes]){var N={};$g(N,h[this.fields.htmlAttributes]),N.class?(T([o],N.class.split(" ")),delete N.class):J(o,N)}this.selectedNodes.indexOf(l)!==-1&&(o.setAttribute("aria-selected","true"),T([o],St)),this.isRefreshed=!1,this.triggerEvent("refreshNode",[this.getNode(o)])}},i.prototype.removeNodes=function(t){d(t)||(this.fields.dataSource instanceof K&&!this.isOffline?this.crudOperation("delete",t):this.deleteSuccess(t))},i.prototype.updateNode=function(t,r){var s=this;if(!(d(t)||d(r)||!this.allowEditing)){var a=this.getElement(t);if(!d(a)){var o=z("."+fs,a);this.updateOldText(a);var l=this.getEditEvent(a,null,null);this.trigger("nodeEditing",l,function(h){h.cancel||(s.fields.dataSource instanceof K&&!s.isOffline?s.crudOperation("update",null,t,r,null,null,!1):s.appendNewText(a,o,r,!1))})}}},i.prototype.uncheckAll=function(t){this.showCheckBox&&this.checkedNodes.length>0&&this.doCheckBoxAction(t,!1)},i.prototype.setNodeFocusable=function(){var t=z("."+le,this.element);t&&(t.setAttribute("tabindex","0"),this.updateIdAttr(null,t))};var e;return te([S(!1)],i.prototype,"allowDragAndDrop",void 0),te([S(!1)],i.prototype,"allowEditing",void 0),te([S(!1)],i.prototype,"allowMultiSelection",void 0),te([S(!1)],i.prototype,"allowTextWrap",void 0),te([st({},bE)],i.prototype,"animation",void 0),te([S()],i.prototype,"checkedNodes",void 0),te([S(!0)],i.prototype,"checkDisabledChildren",void 0),te([S("")],i.prototype,"cssClass",void 0),te([S(!1)],i.prototype,"disabled",void 0),te([S(null)],i.prototype,"dragArea",void 0),te([S(!0)],i.prototype,"enableHtmlSanitizer",void 0),te([S(!1)],i.prototype,"enablePersistence",void 0),te([S()],i.prototype,"expandedNodes",void 0),te([S("Auto")],i.prototype,"expandOn",void 0),te([st({},yE)],i.prototype,"fields",void 0),te([S(!0)],i.prototype,"fullRowSelect",void 0),te([S(!0)],i.prototype,"loadOnDemand",void 0),te([S()],i.prototype,"locale",void 0),te([S()],i.prototype,"nodeTemplate",void 0),te([S()],i.prototype,"selectedNodes",void 0),te([S("None")],i.prototype,"sortOrder",void 0),te([S(!1)],i.prototype,"showCheckBox",void 0),te([S(!1)],i.prototype,"checkOnClick",void 0),te([S(!0)],i.prototype,"autoCheck",void 0),te([S(!1)],i.prototype,"fullRowNavigable",void 0),te([_()],i.prototype,"actionFailure",void 0),te([_()],i.prototype,"created",void 0),te([_()],i.prototype,"dataBound",void 0),te([_()],i.prototype,"dataSourceChanged",void 0),te([_()],i.prototype,"drawNode",void 0),te([_()],i.prototype,"destroyed",void 0),te([_()],i.prototype,"keyPress",void 0),te([_()],i.prototype,"nodeChecked",void 0),te([_()],i.prototype,"nodeChecking",void 0),te([_()],i.prototype,"nodeClicked",void 0),te([_()],i.prototype,"nodeCollapsed",void 0),te([_()],i.prototype,"nodeCollapsing",void 0),te([_()],i.prototype,"nodeDragging",void 0),te([_()],i.prototype,"nodeDragStart",void 0),te([_()],i.prototype,"nodeDragStop",void 0),te([_()],i.prototype,"nodeDropped",void 0),te([_()],i.prototype,"nodeEdited",void 0),te([_()],i.prototype,"nodeEditing",void 0),te([_()],i.prototype,"nodeExpanded",void 0),te([_()],i.prototype,"nodeExpanding",void 0),te([_()],i.prototype,"nodeSelected",void 0),te([_()],i.prototype,"nodeSelecting",void 0),i=e=te([Ft],i),i}(_i),hu="e-float-line",Xa="e-float-text",Vn="e-label-top",js="e-label-bottom";function pf(n,i,e,t,r,s,a){var o=R("span",{className:hu}),l=R("label",{className:Xa}),h=e.getAttribute("id")?e.getAttribute("id"):Nt("ej2_multiselect");e.id=h,!d(e.id)&&e.id!==""&&(l.id="label_"+e.id.replace(/ /g,"_"),l.setAttribute("for",e.id),J(t,{"aria-labelledby":l.id})),!d(t.placeholder)&&t.placeholder!==""&&(l.innerText=cu(t.placeholder),t.removeAttribute("placeholder")),l.innerText=cu(a),i.appendChild(o),i.appendChild(l),n.classList.add("e-float-input"),EE(r,l),s==="Always"&&(l.classList.contains(js)&&I([l],js),T([l],Vn))}function EE(n,i){n&&n.length>0?(T([i],Vn),I([i],js)):(I([i],Vn),T([i],js))}function CE(n,i,e,t,r,s,a){var o=i.querySelector("."+Xa),l=i.querySelector("."+hu),h;d(o)?(h=a!==null?a:"",ff(r,t,h)):(h=o.innerText,Q(e.querySelector("."+Xa)),ff(r,t,h),d(l)||Q(e.querySelector("."+hu))),n.classList.remove("e-float-input")}function ff(n,i,e){n&&n.length?i.placeholder="":i.placeholder=e}function wE(n,i){n.classList.add("e-input-focus");var e=i.querySelector("."+Xa);d(e)||(T([e],Vn),e.classList.contains(js)&&I([e],js))}function TE(n,i,e,t,r){n.classList.remove("e-input-focus");var s=i.querySelector("."+Xa);e&&e.length<=0&&t==="Auto"&&!d(s)&&(s.classList.contains(Vn)&&I([s],Vn),T([s],js))}function cu(n){var i="";if(!d(n)&&n!==""){var e=document.createElement("span");e.innerHTML='<input  placeholder="'+n+'"/>';var t=e.children[0];i=t.placeholder}return i}var DE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ee=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},ms="e-input-focus",oa="e-disabled",AE="e-multiselect e-input-group e-control-wrapper",xE="e-multi-select-wrapper",kE="e-mob-wrapper",xe="e-hide-listitem",IE="e-delim-view",ME="e-chips-collection",gs="e-chips",OE="e-chipcontent",Ro="e-chips-close",dr="e-chip-selected",RE="e-searcher",vf="e-delimiter",No="e-zero-size",mf="e-remain",gf="e-chips-close e-close-hooker",yf="e-delim-values",NE="e-ddl e-popup e-multi-select-list-wrapper",LE="e-dropdownbase",bf="e-rtl",tc="e-close-icon-hide",VE="e-mob-chip",PE="e-ddl-footer",HE="e-ddl-header",Sf="e-ddl-disable-icon",Ef="e-ms-spinner-icon",BE="e-multi-hidden",FE="destroy",Cf="e-input-group-icon e-ddl-icon",wf="e-icon-anim",Lo="e-delim-total",WE="e-multiselect-box",_E="e-filter-parent",Tf="e-search-custom-width",ic="e-input-filter",qE="e-resizer-right e-icons",zE=function(n){DE(i,n);function i(e,t){var r=n.call(this,e,t)||this;return r.clearIconWidth=0,r.previousFilterText="",r.storedSelectAllHeight=0,r.isUpdateHeaderHeight=!1,r.isUpdateFooterHeight=!1,r.isBlurDispatching=!1,r.isFilterPrevented=!1,r.isFilteringAction=!1,r.isValidKey=!1,r.selectAllEventData=[],r.selectAllEventEle=[],r.preventSetCurrentData=!1,r.isSelectAllLoop=!1,r.scrollFocusStatus=!1,r.keyDownStatus=!1,r}return i.prototype.enableRTL=function(e){e?this.overAllWrapper.classList.add(bf):this.overAllWrapper.classList.remove(bf),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind())},i.prototype.requiredModules=function(){var e=[];if(this.enableVirtualization&&e.push({args:[this],member:"VirtualScroll"}),this.mode==="CheckBox"){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=t}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,e.push({member:"CheckBoxSelection",args:[this]})}return e},i.prototype.updateHTMLAttribute=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var r=t[e];switch(r){case"class":{var s=this.htmlAttributes[""+r].replace(/\s+/g," ").trim();s!==""&&(T([this.overAllWrapper],s.split(" ")),T([this.popupWrapper],s.split(" ")));break}case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(r,this.htmlAttributes[""+r]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:{var a=["id"],o=["name","required","aria-required","form"],l=["title","role","style","class"];a.indexOf(r)>-1?this.element.setAttribute(r,this.htmlAttributes[""+r]):r.indexOf("data")===0||o.indexOf(r)>-1?this.hiddenElement.setAttribute(r,this.htmlAttributes[""+r]):l.indexOf(r)>-1?this.overAllWrapper.setAttribute(r,this.htmlAttributes[""+r]):r!=="size"&&!d(this.inputElement)&&this.inputElement.setAttribute(r,this.htmlAttributes[""+r]);break}}}},i.prototype.updateReadonly=function(e){d(this.inputElement)||(e||this.mode==="CheckBox"?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly"))},i.prototype.updateClearButton=function(e){e?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove(tc)):(this.overAllClear.style.display="none",this.componentWrapper.classList.add(tc))},i.prototype.updateCssClass=function(){if(!d(this.cssClass)&&this.cssClass!==""){var e=this.cssClass;e=this.cssClass.replace(/\s+/g," ").trim(),e!==""&&(T([this.overAllWrapper],e.split(" ")),T([this.popupWrapper],e.split(" ")))}},i.prototype.updateOldPropCssClass=function(e){!d(e)&&e!==""&&(e=e.replace(/\s+/g," ").trim(),e!==""&&(I([this.overAllWrapper],e.split(" ")),I([this.popupWrapper],e.split(" "))))},i.prototype.onPopupShown=function(e){var t=this;if(H.isDevice&&this.mode==="CheckBox"&&this.allowFiltering){var r=this;window.onpopstate=function(){r.hidePopup(),r.inputElement.focus()},history.pushState({},"")}var s={name:"FadeIn",duration:100},a={popup:this.popupObj,event:e,cancel:!1,animation:s};this.trigger("open",a,function(o){o.cancel||(t.focusAtFirstListItem(!0),t.popupObj&&document.body.appendChild(t.popupObj.element),t.mode==="CheckBox"&&t.enableGroupCheckBox&&!d(t.fields.groupBy)&&t.updateListItems(t.list.querySelectorAll("li.e-list-item"),t.mainList.querySelectorAll("li.e-list-item")),(t.mode==="CheckBox"||t.showDropDownIcon)&&T([t.overAllWrapper],[wf]),t.refreshPopup(),t.renderReactTemplates(),t.popupObj&&t.popupObj.show(o.animation,t.zIndex===1e3?t.element:null),t.isReact&&setTimeout(function(){if(t.popupHeight&&t.list&&t.popupHeight!=="auto"){var l=typeof t.popupHeight=="string"?parseInt(t.popupHeight,10):t.popupHeight;if(!t.isUpdateHeaderHeight&&t.headerTemplate&&t.header){var h=t.list.style.maxHeight===""?l:parseInt(t.list.style.maxHeight,10);t.list.style.maxHeight=(h-t.header.offsetHeight).toString()+"px",t.isUpdateHeaderHeight=!0}if(!t.isUpdateFooterHeight&&t.footerTemplate&&t.footer){var h=t.list.style.maxHeight===""?l:parseInt(t.list.style.maxHeight,10);t.list.style.maxHeight=(h-t.footer.offsetHeight).toString()+"px",t.isUpdateFooterHeight=!0}}},15),J(t.inputElement,{"aria-expanded":"true","aria-owns":t.element.id+"_popup","aria-controls":t.element.id}),t.updateAriaActiveDescendant(),t.isFirstClick&&(t.enableVirtualization||t.loadTemplate()),t.mode==="CheckBox"&&t.showSelectAll&&C.add(t.popupObj.element,"click",t.clickHandler,t))})},i.prototype.updateVirtualReOrderList=function(e){var t=this.getForQuery(this.value,!0).clone();if(this.isVirtualReorder=!0,this.enableVirtualization&&this.dataSource instanceof K?this.resetList(this.selectedListData,this.fields,t):this.resetList(this.dataSource,this.fields,t),this.UpdateSkeleton(),this.isVirtualReorder=!1,this.liCollections=this.list.querySelectorAll("."+Y.li),this.virtualItemCount=this.itemCount,this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.list.querySelector(".e-virtual-ddl"))this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else{var r=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});r.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(r)}this.list.querySelector(".e-virtual-ddl-content")&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()),e&&this.loadTemplate()},i.prototype.updateListItems=function(e,t){for(var r=0;r<e.length;r++)this.findGroupStart(e[r]),this.findGroupStart(t[r]);this.deselectHeader()},i.prototype.loadTemplate=function(){if(this.refreshListItems(null),this.enableVirtualization&&this.list&&this.mode==="CheckBox"){var e=this.list.querySelectorAll(".e-reorder")[0];this.list.querySelector(".e-virtual-ddl-content")&&e&&this.list.querySelector(".e-virtual-ddl-content").removeChild(e)}this.mode==="CheckBox"&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",e:this}),this.isPreventScrollAction=!0},i.prototype.setScrollPosition=function(){if((!this.hideSelectedItem&&this.mode!=="CheckBox"||this.mode==="CheckBox"&&!this.enableSelectionOrder)&&!d(this.value)&&this.value.length>0){var e=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1],t=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",e);d(t)||this.scrollBottom(t,void 0,!1,null,!0)}if(this.enableVirtualization){var r=this.list.querySelector("."+Y.focus);this.isKeyBoardAction=!1,this.scrollBottom(r,void 0,!1,null,!0)}},i.prototype.updatePopupHeightOnFilter=function(){if(this.allowFiltering&&this.allowResize&&this.keyboardEvent&&this.popupObj&&this.list){var e=this.inputElement&&this.inputElement.value,t=this.list.querySelectorAll("li.e-list-item:not(.e-hide-listitem):not(.e-disabled)"),r=e&&e.length>0;if(r&&t.length>0){var s=t[0].offsetHeight,a=t.length*s;this.popupObj.element.style.maxHeight=a+16+"px",this.list.style.maxHeight=a+"px"}else if(!r){var o=this.resizeHeight||parseInt(this.popupHeight,10);this.popupObj.element.style.maxHeight=o+"px",this.list.style.maxHeight=o+"px",this.setResize()}}},i.prototype.focusAtFirstListItem=function(e){if(this.ulElement&&this.ulElement.querySelector("li."+Y.li)){var t=void 0;if(this.mode==="CheckBox"){this.removeFocus();return}else if(this.enableVirtualization){if(this.fields.disabled){if(t=this.ulElement.querySelector("li."+Y.li+":not(.e-virtual-list):not(.e-hide-listitem):not(."+oa+")"),e&&this.viewPortInfo&&this.viewPortInfo.startIndex!==0){var r=this.ulElement.querySelectorAll("li."+Y.li+":not(.e-virtual-list):not(.e-hide-listitem)");t=r&&r.length>0?r[2]:t}}else if(t=this.ulElement.querySelector("li."+Y.li+":not(.e-virtual-list):not(.e-hide-listitem)"),e&&this.viewPortInfo&&this.viewPortInfo.startIndex!==0){var r=this.ulElement.querySelectorAll("li."+Y.li+":not(.e-virtual-list):not(.e-hide-listitem)");t=r&&r.length>0?r[2]:t}}else this.fields.disabled?t=this.ulElement.querySelector("li."+Y.li+":not(."+xe+"):not(."+oa+")"):t=this.ulElement.querySelector("li."+Y.li+":not(."+xe+")");t!==null&&(this.removeFocus(),this.addListFocus(t))}},i.prototype.focusAtLastListItem=function(e){var t;if(e)t=rn(e,this.liCollections,"StartsWith",this.ignoreCase);else if(this.value&&this.value.length){var r=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1];rn(r,this.liCollections,"StartsWith",this.ignoreCase)}else t=null;t&&t.item!==null&&(this.addListFocus(t.item),((this.allowCustomValue||this.allowFiltering)&&this.isPopupOpen()&&this.closePopupOnSelect&&!this.enableVirtualization||this.closePopupOnSelect&&!this.enableVirtualization)&&this.scrollBottom(t.item,t.index))},i.prototype.getAriaAttributes=function(){var e={"aria-disabled":"false",role:"combobox","aria-expanded":"false"};return e},i.prototype.updateListARIA=function(){d(this.ulElement)||J(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false","aria-label":"list"});var e=!!(!d(this.inputElement)&&this.inputElement.disabled);!this.isPopupOpen()&&!d(this.inputElement)&&J(this.inputElement,this.getAriaAttributes()),e&&J(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(e?"true":"false")},i.prototype.ensureAriaDisabled=function(e){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){var t=this.htmlAttributes;$(t,{"aria-disabled":e},t),this.setProperties({htmlAttributes:t},!0)}},i.prototype.removelastSelection=function(e){var t=this.chipCollectionWrapper.querySelector("span."+dr);if(t!==null){this.removeSelectedChip(e);return}var r=this.chipCollectionWrapper.querySelectorAll("span."+gs),s=r[r.length-1].getAttribute("data-value");d(this.value)||(this.tempValues=this.allowObjectBinding?this.value.slice():this.value.slice());var a=this.allowObjectBinding?this.enableVirtualization?this.getVirtualDataByValue(this.getFormattedValue(s)):this.getDataByValue(this.getFormattedValue(s)):this.getFormattedValue(s);this.allowCustomValue&&(s!=="false"&&a===!1||!d(a)&&a.toString()==="NaN")&&(a=s),this.removeValue(a,e),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()},i.prototype.onActionFailure=function(e){n.prototype.onActionFailure.call(this,e),this.renderPopup(),this.onPopupShown()},i.prototype.targetElement=function(){return this.targetInputElement=this.inputElement,this.mode==="CheckBox"&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),this.targetInputElement?this.targetInputElement.value:null},i.prototype.getForQuery=function(e,t){var r,s=this.isPrimitiveData?"":this.fields.value;if(this.enableVirtualization&&e)if(t){for(var a=this.viewPortInfo.startIndex,o=a+this.viewPortInfo.endIndex<=e.length&&e[a+this.viewPortInfo.endIndex]?a+this.viewPortInfo.endIndex:e.length,l=a;l<o;l++){var h=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",e[l]):e[l];l===a?r=new ut(s,"equal",h):r=r.or(s,"equal",h)}return new Se().where(r)}else{for(var l=0;l<e.length;l++){var h=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",e[l]):e[l];this.isaddNonPresentItems?r=l===0?new ut(s,"equal",e[l]):r.or(s,"equal",e[l]):r=l===0?r=new ut(s,"notequal",h):r.and(s,"notequal",h)}return new Se().where(r)}else for(var l=0;l<e.length;l++)l===0?r=new ut(s,"equal",e[l]):r=r.or(s,"equal",e[l]);return this.dataSource instanceof K&&this.dataSource.adaptor instanceof vS?new Se().where(r):this.getQuery(this.query).clone().where(r)},i.prototype.onActionComplete=function(e,t,r,s){var a=this;if(this.dataSource instanceof K&&!d(r)&&!this.virtualGroupDataSource&&(this.totalItemCount=r.count),this.value&&t&&t.length>0&&this.allowFiltering&&this.mode!=="CheckBox"&&!this.enableVirtualization&&!this.isFilterPrevented&&!this.allowCustomValue&&this.isFilteringAction){var o=t.every(function(m){var g=V(a.fields.value?a.fields.value:"",m);return a.value.some(function(y){var b=a.allowObjectBinding?V(a.fields.value?a.fields.value:"",y):y;return g===b})});o&&(e.innerHTML="",t=[])}n.prototype.onActionComplete.call(this,e,t,r),this.skeletonCount=this.totalItemCount!==0&&this.totalItemCount<this.itemCount*2&&(!(this.dataSource instanceof K)||this.dataSource instanceof K&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.updateSelectElementData(this.allowFiltering);var l=this;if(!d(this.value)&&!this.allowCustomValue&&!this.enableVirtualization&&this.listData&&this.listData.length>0)for(var h=0;h<this.value.length;h++){var c=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",l.value[h]):l.value[h],u=this.findListElement(this.allowFiltering&&!d(this.mainList)?this.mainList:e,"li","data-value",c);!u&&!(this.dataSource instanceof K)&&(this.value.splice(h,1),h-=1)}var p=[];d(this.value)||(p=this.presentItemValue(this.ulElement));var f=p.some(function(m){return m!==null});if(p.length>0&&this.dataSource instanceof K&&!d(this.value)&&this.listData!=null&&(!this.enableVirtualization||this.enableVirtualization&&this.valueTemplate)&&f?(this.isaddNonPresentItems=!0,this.addNonPresentItems(p,this.ulElement,this.listData),this.isaddNonPresentItems=!1):this.updateActionList(e,t,r),this.dataSource instanceof K&&this.allowCustomValue&&!this.isCustomRendered&&this.inputElement.value&&this.inputElement.value!==""){var v=new Se;v=this.allowFiltering?v.where(this.fields.text,"startswith",this.inputElement.value,this.ignoreCase,this.ignoreAccent):v,this.checkForCustomValue(v,this.fields),this.isCustomRendered=!0,this.remoteCustomValue=this.enableVirtualization?!1:this.remoteCustomValue}this.mode==="CheckBox"&&this.enableGroupCheckBox&&!d(this.fields.groupBy)&&!d(this.fields.disabled)&&this.disableGroupHeader(),this.dataSource instanceof K&&this.mode==="CheckBox"&&this.allowFiltering&&this.removeFocus()},i.prototype.updateActionList=function(e,t,r,s){this.mode==="CheckBox"&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),!this.mainList&&!this.mainData?(this.mainList=e.cloneNode?e.cloneNode(!0):e,this.mainData=t,this.mainListCollection=this.liCollections):(d(this.mainData)||this.mainData.length===0)&&(this.mainData=t),!((this.remoteCustomValue||t.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering&&this.inputElement.value&&this.inputElement.value!==""&&(this.checkForCustomValue(this.tempQuery,this.fields),this.isCustomRendered))&&(this.value&&this.value.length&&(this.mode!=="CheckBox"&&!d(this.inputElement)&&this.inputElement.value.trim()!==""||this.mode==="CheckBox"||(this.keyCode===8||this.keyCode===46)&&this.allowFiltering&&this.allowCustomValue&&this.dataSource instanceof K&&this.inputElement.value==="")&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),d(this.setInitialValue)||this.setInitialValue(),d(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(!d(this.text)&&(d(this.value)||this.value.length===0)&&this.initialTextUpdate(),this.enableVirtualization?this.dataSource instanceof K||this.initialValueUpdate():this.isRemoveSelection?this.initialValueUpdate():this.initialValueUpdate(this.listData,!0),this.initialUpdate(),this.refreshPlaceHolder(),this.mode!=="CheckBox"&&this.changeOnBlur&&this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown(r)))},i.prototype.refreshSelection=function(){var e,t,r=this.hideSelectedItem?xe:Y.selected;if(!d(this.value)){for(var s=0;!d(this.value[s]);s++)if(e=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",this.value[s]):this.value[s],t=this.findListElement(this.list,"li","data-value",e),t){if(T([t],r),this.hideSelectedItem&&t.previousSibling&&t.previousElementSibling.classList.contains(Y.group)&&(!t.nextElementSibling||t.nextElementSibling.classList.contains(Y.group))&&T([t.previousElementSibling],r),this.hideSelectedItem&&this.fields.groupBy&&!t.previousElementSibling.classList.contains(xe)&&this.hideGroupItem(e),this.hideSelectedItem&&t.classList.contains(Y.focus)){I([t],Y.focus);var a=t.parentElement.querySelectorAll("."+Y.li+":not(."+xe+"):not(."+oa+")");a.length>0?(T([a[0]],Y.focus),this.updateAriaActiveDescendant()):this.list&&this.list.querySelectorAll("."+Y.li).length>0||(this.l10nUpdate(),T([this.list],Y.noData))}if(t.setAttribute("aria-selected","true"),this.mode==="CheckBox"&&t.classList.contains("e-active")){var o=t.getElementsByClassName("e-check").length;if(o===0){var l={module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:t,e:null};this.notify("updatelist",l)}}}}this.checkSelectAll(),this.checkMaxSelection()},i.prototype.hideGroupItem=function(e){var t,r,s=this.hideSelectedItem?xe:Y.selected;r=t=this.findListElement(this.ulElement,"li","data-value",e);var a=0,o=0,l=!0,h=!0;do t&&t.previousElementSibling&&!t.previousElementSibling.classList.contains(xe)&&t.previousElementSibling.classList.contains(Y.li)&&(l=!1),!l||!t||t.previousElementSibling&&t.previousElementSibling.classList.contains(Y.group)?a=10:t=t.previousElementSibling,r&&r.nextElementSibling&&!r.nextElementSibling.classList.contains(xe)&&r.nextElementSibling.classList.contains(Y.li)&&(h=!1),!h||!r||r.nextElementSibling&&r.nextElementSibling.classList.contains(Y.group)?o=10:r=r.nextElementSibling;while(a<10||o<10);l&&h&&!t.previousElementSibling.classList.contains(xe)?T([t.previousElementSibling],s):l&&h&&t.previousElementSibling.classList.contains(xe)&&I([t.previousElementSibling],s)},i.prototype.getValidLi=function(){var e=this.ulElement.querySelector("li."+Y.li+":not(."+xe+")");return d(e)?this.liCollections[0]:e},i.prototype.checkSelectAll=function(){var e=d(this.fields.disabled)?this.list.querySelectorAll("li.e-list-group-item.e-active").length:this.list.querySelectorAll("li.e-list-group-item.e-active:not(.e-disabled)").length,t=this.list.querySelectorAll("li.e-list-item"),r=this.enableVirtualization?this.list.querySelectorAll("li."+Y.li+":not(.e-virtual-list)").length:d(this.fields.disabled)?this.list.querySelectorAll("li."+Y.li).length:this.list.querySelectorAll("li."+Y.li+":not(.e-disabled)").length,s=this.list.querySelectorAll("li."+Y.selected).length;if(this.enableGroupCheckBox&&!d(this.fields.groupBy)&&(s=s-e),!this.enableVirtualization&&(r===s||s===this.maximumSelectionLength)&&this.mode==="CheckBox"&&this.showSelectAll||this.enableVirtualization&&this.mode==="CheckBox"&&this.showSelectAll&&this.value&&this.value.length===this.totalItemCount?this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"check"}):r!==s&&this.mode==="CheckBox"&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"uncheck"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder){for(var a=0;a<t.length;a++)this.findGroupStart(t[a]);this.deselectHeader()}},i.prototype.openClick=function(e){!this.openOnClick&&this.mode!=="CheckBox"&&!this.isPopupOpen()?this.targetElement()!==""?this.showPopup():this.hidePopup(e):!this.openOnClick&&this.mode==="CheckBox"&&!this.isPopupOpen()&&this.showPopup()},i.prototype.keyUp=function(e){if(this.mode==="CheckBox"&&!this.openOnClick){var t=String.fromCharCode(e.keyCode),r=t.match(/\w/);d(r)||(this.isValidKey=!0)}if(this.isValidKey=this.isPopupOpen()&&e.keyCode===8||this.isValidKey,this.isValidKey=e.ctrlKey&&e.keyCode===86?!1:this.isValidKey,this.isValidKey&&this.inputElement)switch(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),e.keyCode){default:this.search(e)}},i.prototype.filter=function(e,t,r){this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(e,t,r)},i.prototype.getQuery=function(e){var t=e?e.clone():this.query?this.query.clone():new Se;if(this.isFiltered){if(this.enableVirtualization&&!d(this.customFilterQuery))return t=this.customFilterQuery.clone(),this.virtualFilterQuery(t);if(!this.enableVirtualization)return t}if(this.isFilterAction){if(this.targetElement()!==null&&!this.enableVirtualization||this.enableVirtualization&&this.targetElement()!==null&&this.targetElement().trim()!==""){var r=this.typeOfData(this.dataSource).typeof;if(!(this.dataSource instanceof K)&&r==="string"||r==="number")t.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent);else if(this.enableVirtualization&&this.targetElement()!==""&&!this.isClearAllAction||!this.enableVirtualization){var s=this.fields;t.where(d(s.text)?"":s.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}}return this.enableVirtualization&&this.viewPortInfo.endIndex!==0&&!this.virtualSelectAll?this.virtualFilterQuery(t):this.virtualSelectAll?e?e.skip(0).take(this.maximumSelectionLength).requiresCount():this.query?this.query.skip(0).take(this.maximumSelectionLength).requiresCount():new Se().skip(0).take(this.maximumSelectionLength).requiresCount():t}else return this.enableVirtualization&&this.viewPortInfo.endIndex!==0&&!this.virtualSelectAll?this.virtualFilterQuery(t):this.virtualSelectAll?e?e.skip(0).take(this.maximumSelectionLength).requiresCount():this.query?this.query.skip(0).take(this.maximumSelectionLength).requiresCount():new Se().skip(0).take(this.maximumSelectionLength).requiresCount():e||(this.query?this.query:new Se)},i.prototype.virtualFilterQuery=function(e){for(var t=this.getTakeValue(),r=!0,s=!0,a=0;a<e.queries.length;a++)this.getModuleName()==="multiselect"&&(e.queries[a].e&&e.queries[a].e.condition==="or"||e.queries[a].e&&e.queries[a].e.operator==="equal")&&(r=!1),e.queries[a].fn==="onSkip"&&(s=!1),e.queries[a].fn;var o=0;if(e&&e.queries.length>0)for(var a=0;a<e.queries.length;a++)e.queries[a].fn==="onTake"&&(o=t<=e.queries[a].e.nos?e.queries[a].e.nos:t);if(o<=0&&this.query&&this.query.queries.length>0)for(var a=0;a<this.query.queries.length;a++)this.query.queries[a].fn==="onTake"&&(o=t<=this.query.queries[a].e.nos?this.query.queries[a].e.nos:t);if(e&&e.queries.length>0)for(var a=0;a<e.queries.length;a++)e.queries[a].fn==="onTake"&&(o=e.queries[a].e.nos<=o?o:e.queries[a].e.nos,e.queries.splice(a,1),--a);return(this.allowFiltering&&s||!r||!this.allowFiltering&&s)&&!this.isVirtualReorder&&(r?e.skip(this.virtualItemStartIndex):e.skip(this.viewPortInfo.startIndex)),this.isIncrementalRequest?e.take(this.incrementalEndIndex):o>0?e.take(o):e.take(t),e.requiresCount(),this.customFilterQuery=null,e},i.prototype.getTakeValue=function(){return this.allowFiltering&&H.isDevice?Math.round(window.outerHeight/this.listItemHeight):this.itemCount},i.prototype.dataUpdater=function(e,t,r){this.isDataFetched=!1;var s=this.list.classList.contains(Y.noData);if(this.targetElement().trim()===""&&(!this.allowCustomValue||this.mode==="CheckBox"||this.targetElement()==="")){var a=this.enableVirtualization?this.list.cloneNode(!0):this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;if(this.backCommand||this.enableVirtualization&&this.mode==="CheckBox"&&this.value&&this.value.length>0){this.remoteCustomValue=!1;var o=!1;if(this.allowCustomValue&&a.querySelectorAll("li").length===0&&this.mainData.length>0&&(this.mainData=[]),this.enableVirtualization){if(this.allowFiltering&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.value&&this.value.length>0&&this.mode==="CheckBox")this.notify("setCurrentViewDataAsync",{component:this.getModuleName(),module:"VirtualScroll"}),o=!0;else if(this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.resetList(e,r,t),this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.UpdateSkeleton(),(s||this.allowCustomValue)&&!this.list.classList.contains(Y.noData)){if(!this.list.querySelector(".e-virtual-ddl-content")){var l=this.createElement("div",{className:"e-virtual-ddl-content"});l.style.cssText=this.getTransformValues(),this.list.appendChild(l).appendChild(this.list.querySelector(".e-list-parent"))}if(!this.list.querySelector(".e-virtual-ddl")){var h=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});h.style.cssText=this.GetVirtualTrackHeight(),document.getElementsByClassName("e-multi-select-list-wrapper")[0].querySelector(".e-dropdownbase").appendChild(h)}}}this.onActionComplete(a,this.mainData),this.value&&this.value.length&&this.refreshSelection(),this.keyCode!==8&&this.focusAtFirstListItem(),o||this.notify("reOrder",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",e:this})}}else{if(this.enableVirtualization&&this.allowFiltering&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null,this.list.querySelector(".e-list-parent.e-reorder")&&this.list.querySelector(".e-list-parent.e-reorder").remove()),this.resetList(e,r,t),this.enableVirtualization&&(s||this.allowCustomValue)&&!this.list.classList.contains(Y.noData)){if(!this.list.querySelector(".e-virtual-ddl-content")){var l=this.createElement("div",{className:"e-virtual-ddl-content"});l.style.cssText=this.getTransformValues(),this.list.appendChild(l).appendChild(this.list.querySelector(".e-list-parent"))}if(this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),!this.list.querySelector(".e-virtual-ddl")){var h=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});h.style.cssText=this.GetVirtualTrackHeight(),document.getElementsByClassName("e-multi-select-list-wrapper")[0].querySelector(".e-dropdownbase").appendChild(h)}}this.allowCustomValue&&(e instanceof K?(this.remoteCustomValue=!0,this.tempQuery=t):this.checkForCustomValue(t,r))}this.enableVirtualization&&this.allowFiltering&&this.getFilteringSkeletonCount(),this.refreshPopup(),this.allowResize&&!this.isFilteringAction&&this.setResize(),this.mode==="CheckBox"&&this.removeFocus()},i.prototype.secureRandom=function(){var e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]/4294967296},i.prototype.checkForCustomValue=function(e,t){var r=!this.getValueByText(this.inputElement.value,this.ignoreCase),s=t||this.fields;if(this.isCustomReset=!0,this.allowCustomValue&&r){var a=this.inputElement.value,o=!d(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData;if(o&&typeof o!="string"&&typeof o!="number"&&typeof o!="boolean"){var l={};ze(s.text,a,l),typeof V(this.fields.value?this.fields.value:"value",o)=="number"&&this.fields.value!==this.fields.text?ze(s.value,this.secureRandom(),l):ze(s.value,a,l);var h={};if(this.allowObjectBinding){var c=this.listData&&this.listData.length>0?Object.keys(this.listData[0]):this.firstItem?Object.keys(this.firstItem):Object.keys(l),u=typeof V(this.fields.value?this.fields.value:"value",o)=="number"&&this.fields.value!==this.fields.text;c.forEach(function(g){h[g]=g===t.value||g===t.text?g===t.text&&u?V(t.text,l):V(t.value,l):null})}if(l=this.allowObjectBinding?h:l,this.enableVirtualization){this.virtualCustomData=l;var p=this.dataSource instanceof K?JSON.parse(JSON.stringify(this.listData)):JSON.parse(JSON.stringify(this.dataSource));this.virtualCustomSelectData&&this.virtualCustomSelectData.length>0&&p.concat(this.virtualCustomSelectData),p.splice(0,0,l),this.isCustomDataUpdated=!0;var f=this.totalItemCount;this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.resetList(p,s,e),this.isCustomDataUpdated=!1,this.totalItemCount=this.enableVirtualization&&this.dataSource instanceof K?f:this.totalItemCount}else{this.dataSource instanceof K&&this.allowCustomValue&&this.allowFiltering&&(this.remoteCustomValue=!1);var p=JSON.parse(JSON.stringify(this.listData));p.splice(0,0,l),this.resetList(p,s,e),this.focusAtLastListItem(a)}}else if(this.listData){var p=JSON.parse(JSON.stringify(this.listData));p.splice(0,0,this.inputElement.value),p[0]=typeof o=="number"&&!isNaN(parseFloat(p[0]))?parseFloat(p[0]):p[0],p[0]=typeof o=="boolean"?p[0]==="true"?!0:p[0]==="false"?!1:p[0]:p[0],this.resetList(p,s),this.focusAtLastListItem(a)}}else if(this.listData&&this.mainData&&!r&&this.allowCustomValue){if(this.allowFiltering&&this.isRemoteSelection&&this.remoteCustomValue)this.isRemoteSelection=!1,this.enableVirtualization||this.resetList(this.listData,s,e);else if(!this.allowFiltering&&this.list){var v=this.list.querySelectorAll("li."+Y.li+":not(.e-hide-listitem)"),m=rn(this.targetElement(),v,"StartsWith",this.ignoreCase);m&&m.item!==null&&this.addListFocus(m.item)}}this.isCustomReset=!1,this.value&&this.value.length&&this.refreshSelection()},i.prototype.getNgDirective=function(){return"EJS-MULTISELECT"},i.prototype.wrapperClick=function(e){if(this.setDynValue=!1,this.keyboardEvent=null,this.isKeyBoardAction=!1,!!this.enabled){if(e.target===this.overAllClear){e.preventDefault();return}if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(e.target&&e.target.classList.toString().indexOf(Ro)!==-1){this.isPopupOpen()&&this.refreshPopup();return}!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&e.target&&e.target.className===Cf)?this.showPopup(e):(this.hidePopup(e),this.mode==="CheckBox"&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains(ms)||this.overAllWrapper.classList.add(ms)))}this.targetElement()&&this.targetElement()!==""||e.preventDefault(),this.checkAndScrollParent(),this.maximumSelectionLength===0&&this.checkMaxSelection()}},i.prototype.checkAndScrollParent=function(){for(var e=this.overAllWrapper?this.overAllWrapper.parentElement:null;e;){var t=getComputedStyle(e),r=parseFloat(t.maxHeight)||parseFloat(t.height);if(!isNaN(r)&&this.isPopupOpen()){var s=t.overflowY,a=this.overAllWrapper.getBoundingClientRect().bottom,o=e.getBoundingClientRect().bottom;if((s==="auto"||s==="scroll")&&a>o){e.scrollTop+=a-o+10;return}}e=e.parentElement}},i.prototype.enable=function(e){e?(this.overAllWrapper.classList.remove(oa),this.inputElement.removeAttribute("disabled"),J(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add(oa),this.inputElement.setAttribute("disabled","true"),J(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==e&&(this.enabled=e),this.hidePopup()},i.prototype.onBlurHandler=function(e,t){var r;if(this.updatePopupHeightOnFilter(),this.isBlurDispatching&&this.isAngular){this.isBlurDispatching=!1;return}if(d(e)||(r=e.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(r)){this.mode!=="CheckBox"?this.inputElement.focus():this.floatLabelType==="Auto"&&(this.overAllWrapper.classList.contains("e-outline")||this.overAllWrapper.classList.contains("e-filled"))&&T([this.overAllWrapper],"e-valid-input");return}if(this.floatLabelType==="Auto"&&this.overAllWrapper.classList.contains("e-outline")&&this.mode==="CheckBox"&&(d(this.value)||this.value.length===0)&&I([this.overAllWrapper],"e-valid-input"),this.mode==="CheckBox"&&H.isIE&&!d(e)&&!t){this.inputFocus=!1,this.overAllWrapper.classList.remove(ms);return}if(this.scrollFocusStatus){d(e)||e.preventDefault(),this.inputElement.focus(),this.scrollFocusStatus=!1;return}if(this.inputFocus=!1,this.overAllWrapper.classList.remove(ms),this.addTagOnBlur){var s=this.getValueByText(this.inputElement.value,this.ignoreCase,this.ignoreAccent),a=this.findListElement(this.list,"li","data-value",s),o=this.hideSelectedItem?xe:Y.selected,l=!!(a&&!a.classList.contains(o));l&&(this.updateListSelection(a,e),this.mode==="Delimiter"&&this.updateDelimeter(this.delimiterChar))}this.updateDataList(),this.refreshListItems(null),this.mode!=="Box"&&this.mode!=="CheckBox"&&this.updateDelimView(),this.changeOnBlur&&(this.updateValueState(e,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change")),this.overAllClear.style.display="none",this.isPopupOpen()&&this.hidePopup(e),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,H.isDevice&&this.mode!=="Delimiter"&&this.mode!=="CheckBox"&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),TE(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType,this.placeholder),this.refreshPlaceHolder(),(this.allowFiltering||this.enableSelectionOrder===!0&&this.mode==="CheckBox")&&!d(this.mainList)&&(this.ulElement=this.mainList),this.checkPlaceholderSize(),this.element.querySelector(".e-multiselect .e-float-text-content")===null&&X.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),this.updateFloatLabelOverflowWidth(),!d(this.overAllWrapper)&&!d(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never")&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.isBlurDispatching=!0,this.isAngular&&this.dispatchEvent(this.inputElement,"blur")},i.prototype.calculateWidth=function(){var e;if(this.overAllWrapper){if(!this.showDropDownIcon||this.overAllWrapper.querySelector(".e-label-top"))e=this.overAllWrapper.clientWidth-2*parseInt(getComputedStyle(this.inputElement).paddingRight,10);else{var t=this.dropIcon.offsetWidth+parseInt(getComputedStyle(this.dropIcon).marginRight,10);e=this.overAllWrapper.clientWidth-(t+2*parseInt(getComputedStyle(this.inputElement).paddingRight,10))}this.floatLabelType!=="Never"&&X.calculateWidth(e,this.overAllWrapper,this.getModuleName())}},i.prototype.checkPlaceholderSize=function(){if(this.showDropDownIcon){var e=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(e)}else d(this.dropIcon)||this.setPlaceholderSize(this.showDropDownIcon?this.dropIcon.offsetWidth:0)},i.prototype.setPlaceholderSize=function(e){d(this.value)||this.value.length===0?this.dropIcon.offsetWidth!==0?this.searchWrapper.style.width="calc(100% - "+(e+10)+"px":T([this.searchWrapper],Tf):d(this.value)||(this.searchWrapper.removeAttribute("style"),I([this.searchWrapper],Tf))},i.prototype.refreshInputHight=function(){d(this.searchWrapper)||((!this.value||!this.value.length)&&(d(this.text)||this.text==="")?this.searchWrapper.classList.remove(No):this.searchWrapper.classList.add(No))},i.prototype.validateValues=function(e,t){return JSON.stringify(e.slice().sort())!==JSON.stringify(t.slice().sort())},i.prototype.updateValueState=function(e,t,r){var s=t||[],a=r||[];if(this.initStatus&&this.validateValues(s,a)){var o={e,oldValue:(this.allowObjectBinding,r),value:(this.allowObjectBinding,t),isInteracted:!!e,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",o),this.enableVirtualization&&this.enableSelectionOrder&&this.mode==="CheckBox"&&(this.preventSetCurrentData=!1),this.updateTempValue(),this.changeOnBlur||this.dispatchEvent(this.hiddenElement,"change")}this.selectedValueInfo=this.viewPortInfo},i.prototype.updateTempValue=function(){this.value?this.tempValues=this.allowObjectBinding?this.value.slice():this.value.slice():this.tempValues=this.value},i.prototype.updateAriaActiveDescendant=function(){!d(this.ulElement)&&!d(this.ulElement.getElementsByClassName("e-item-focus")[0])&&J(this.inputElement,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id})},i.prototype.pageUpSelection=function(e,t){var r=this.list.querySelectorAll("li."+Y.li+":not(."+xe+"):not(.e-reorder-hide)"),s=e>=0?r[e+1]:r[0];if(this.fields.disabled&&s&&!this.enableVirtualization){for(;s&&(s.classList.contains("e-disabled")||s.classList.contains(xe)||s.classList.contains(".e-reorder-hide")||s.classList.contains("e-list-group-item"));)s=s.previousElementSibling;if(!s)return}this.enableVirtualization&&t&&(s=this.liCollections.length>=e&&e>=0?this.liCollections[e]:this.liCollections[this.skeletonCount]),!d(s)&&s.classList.contains("e-virtual-list")&&(s=this.liCollections[this.skeletonCount]),this.enableVirtualization?(!d(s)&&!s.classList.contains("e-item-focus")?(this.isKeyBoardAction=!0,this.addListFocus(s),this.scrollTop(s,this.getIndexByValue(s.getAttribute("data-value")),this.keyboardEvent.keyCode)):this.viewPortInfo.startIndex===0&&(this.isKeyBoardAction=!0,this.scrollTop(s,this.getIndexByValue(s.getAttribute("data-value")),this.keyboardEvent.keyCode)),this.previousFocusItem=s):(this.isKeyBoardAction=!0,this.addListFocus(s),this.scrollTop(s,this.getIndexByValue(s.getAttribute("data-value")),this.keyboardEvent.keyCode))},i.prototype.pageDownSelection=function(e,t){var r=this.getItems(),s=this.list.querySelectorAll("li."+Y.li+":not(."+xe+"):not(.e-reorder-hide):not(.e-virtual-list-end)"),a=e<=s.length?s[e-1]:s[s.length-1];if(this.fields.disabled&&a&&!this.enableVirtualization){for(;a&&(a.classList.contains("e-disabled")||a.classList.contains(xe)||a.classList.contains(".e-reorder-hide")||a.classList.contains("e-list-group-item"));)a=a.nextElementSibling;if(!a)return}this.enableVirtualization&&this.skeletonCount>0&&(a=e<r.length?this.liCollections[e]:this.liCollections[r.length-1]),this.enableVirtualization&&t&&(a=e<=r.length?this.liCollections[e]:this.liCollections[r.length-1]),this.enableVirtualization&&a&&a.classList.contains("e-virtual-list-end")&&(a=s[s.length-1]),this.isKeyBoardAction=!0,this.addListFocus(a),this.previousFocusItem=a,this.scrollBottom(a,this.getIndexByValue(a.getAttribute("data-value")),!1,this.keyboardEvent.keyCode)},i.prototype.getItems=function(){return this.list||n.prototype.render.call(this),this.ulElement&&this.ulElement.querySelectorAll("."+Y.li).length>0?this.ulElement.querySelectorAll("."+Y.li+":not(."+xe+")"):[]},i.prototype.focusInHandler=function(e){var t=this;if(this.enabled){if(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&(this.mode!=="Delimiter"&&this.mode!=="CheckBox"?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.mode!=="CheckBox"&&(this.viewWrapper.style.display="none")),this.mode!=="CheckBox"&&this.searchWrapper.classList.remove(No),this.checkPlaceholderSize(),this.floatLabelType!=="Never"&&this.overAllWrapper){var r=this.overAllWrapper.querySelector(".e-float-text");r&&r.removeAttribute("style")}if(this.focused){var s={isInteracted:!!e,event:e};this.trigger("focus",s),this.focused=!1}return this.overAllWrapper.classList.contains(ms)||this.overAllWrapper.classList.add(ms),wE(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),this.allowResize&&this.setResize(),setTimeout(function(){t.calculateWidth()},150),!0}else return!1},i.prototype.showDelimWrapper=function(){this.mode==="CheckBox"?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add(vf)},i.prototype.hideDelimWrapper=function(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove(vf)},i.prototype.expandTextbox=function(){var e=5;if(this.placeholder){var t=this.placeholder.charCodeAt(0),r=44032<=t&&t<=55215?1.5:19968<=t&&t<=40959?2:1;e=e>this.inputElement.placeholder.length?e:this.inputElement.placeholder.length*r}this.inputElement.value.length>e?this.inputElement.size=this.inputElement.value.length:this.inputElement.size=e},i.prototype.isPopupOpen=function(){return this.popupWrapper!==null&&this.popupWrapper.parentElement!==null},i.prototype.refreshPopup=function(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper),this.popupObj.resolveCollision())},i.prototype.checkTextLength=function(){return this.targetElement().length<1},i.prototype.popupKeyActions=function(e){switch(e.keyCode){case 38:this.hidePopup(e),this.mode==="CheckBox"&&this.inputElement.focus(),e.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(e),e.preventDefault());break}},i.prototype.updatePopupPosition=function(){this.refreshPopup()},i.prototype.updateAriaAttribute=function(){var e=this.list.querySelector("."+Y.focus);if(!d(e))if(this.inputElement.setAttribute("aria-activedescendant",e.id),this.allowFiltering){var t=this.popupWrapper.querySelector("."+ic);t&&t.setAttribute("aria-activedescendant",e.id)}else this.mode==="CheckBox"&&this.overAllWrapper.setAttribute("aria-activedescendant",e.id)},i.prototype.homeNavigation=function(e,t){if(this.removeFocus(),this.enableVirtualization){if(e)this.enableVirtualization&&this.viewPortInfo.startIndex!==0&&(this.viewPortInfo.startIndex=0,this.viewPortInfo.endIndex=this.itemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query));else if(this.enableVirtualization&&(!this.value&&this.viewPortInfo.endIndex!==this.totalItemCount||this.value&&this.value.length>0&&this.viewPortInfo.endIndex!==this.totalItemCount+this.value.length)){this.viewPortInfo.startIndex=this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.totalItemCount,this.updateVirtualItemIndex();var r=new Se().clone();this.value&&this.value.length>0&&(r=this.getForQuery(this.value).clone(),r=r.skip(this.totalItemCount-this.itemCount)),this.resetList(this.dataSource,this.fields,r)}}this.UpdateSkeleton();var s=this.ulElement.querySelectorAll("li."+Y.li+":not(."+xe+"):not(.e-reorder-hide)");if(s.length>0){var a=s[e?0:s.length-1];this.enableVirtualization&&e&&(a=s[this.skeletonCount]),this.removeFocus(),a.classList.add(Y.focus),this.enableVirtualization&&e?this.scrollTop(a,void 0,this.keyboardEvent.keyCode):t||this.scrollBottom(a,void 0,!1,this.keyboardEvent.keyCode),this.updateAriaActiveDescendant()}},i.prototype.updateSelectionList=function(){if(!d(this.value)&&this.value.length)for(var e=0;e<this.value.length;e++){var t=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",this.value[e]):this.value[e],r=this.getElementByValue(t);r&&!r.classList.contains(Y.selected)&&r.classList.add("e-active")}},i.prototype.handleVirtualKeyboardActions=function(e,t){var r=this.list.querySelector("."+Y.focus),s;switch(this.isKeyBoardAction=!0,e.keyCode){case 40:this.arrowDown(e,!0);break;case 38:this.arrowUp(e,!0);break;case 33:e.preventDefault(),r&&(s=this.getIndexByValue(this.previousFocusItem.getAttribute("data-value"))-1,this.pageUpSelection(s,!0),this.updateAriaAttribute());break;case 34:e.preventDefault(),r&&(s=this.getIndexByValue(this.previousFocusItem.getAttribute("data-value")),this.pageDownSelection(s,!0),this.updateAriaAttribute());break;case 35:case 36:this.isMouseScrollAction=!0,this.homeNavigation(e.keyCode===36,!0),this.isPreventScrollAction=!0;break}this.keyboardEvent=null,this.isScrollChanged=!0,this.isKeyBoardAction=!1},i.prototype.onKeyDown=function(e){if(!(this.readonly||!this.enabled&&this.mode!=="CheckBox")&&(this.preventSetCurrentData=!1,this.keyboardEvent=e,this.isPreventKeyAction&&this.enableVirtualization&&e.preventDefault(),this.keyCode=e.keyCode,this.keyDownStatus=!0,!(e.keyCode>111&&e.keyCode<124))){if(e.altKey){this.popupKeyActions(e);return}else if(this.isPopupOpen()){var t=this.list.querySelector("."+Y.focus),r=void 0;switch(e.keyCode){case 36:case 35:this.isMouseScrollAction=!0,this.isKeyBoardAction=!0,this.homeNavigation(e.keyCode===36);break;case 33:e.preventDefault(),t&&(r=this.getIndexByValue(t.getAttribute("data-value")),this.pageUpSelection(r-this.getPageCount()-1),this.updateAriaAttribute());return;case 34:e.preventDefault(),t&&(r=this.getIndexByValue(t.getAttribute("data-value")),this.pageDownSelection(r+this.getPageCount()),this.updateAriaAttribute());return;case 38:this.isKeyBoardAction=!0,this.arrowUp(e);break;case 40:this.isKeyBoardAction=!0,this.arrowDown(e);break;case 27:e.preventDefault(),this.isKeyBoardAction=!0,this.hidePopup(e),this.mode==="CheckBox"&&this.inputElement.focus(),this.isKeyBoardAction=!1;return;case 13:e.preventDefault(),this.isKeyBoardAction=!0,this.mode!=="CheckBox"&&this.selectByKey(e),this.checkPlaceholderSize(),this.isKeyBoardAction=!1;return;case 32:this.isKeyBoardAction=!0,this.spaceKeySelection(e),this.isKeyBoardAction=!1;return;case 9:e.preventDefault(),this.isKeyBoardAction=!0,this.hidePopup(e),this.inputElement.focus(),this.overAllWrapper.classList.add(ms)}}else switch(e.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:e.preventDefault(),this.escapeAction();return}this.checkTextLength()&&this.keyNavigation(e),this.mode==="CheckBox"&&this.enableSelectionOrder&&(this.allowFiltering&&(this.previousFilterText=this.targetElement()),this.checkBackCommand(e)),this.expandTextbox(),this.mode==="CheckBox"&&this.showSelectAll||this.refreshPopup(),this.allowResize&&!this.isFilterAction&&this.setResize(),this.isKeyBoardAction=!1}},i.prototype.arrowDown=function(e,t){e.preventDefault(),this.moveByList(1,t),this.keyAction=!0,(document.activeElement.classList.contains(ic)||this.mode==="CheckBox"&&!this.allowFiltering&&document.activeElement!==this.list)&&C.add(this.list,"keydown",this.onKeyDown,this),this.updateAriaAttribute()},i.prototype.arrowUp=function(e,t){e.preventDefault(),this.keyAction=!0;var r=this.list.querySelectorAll("li."+Y.li+":not(."+xe+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&this.mode==="CheckBox"&&!d(this.fields.groupBy)&&(r=this.list.querySelectorAll("li."+Y.li+",li."+Y.group+":not(."+xe+"):not(.e-reorder-hide)"));var s=this.list.querySelector("li."+Y.focus);if(this.focusFirstListItem=d(this.liCollections[0])?!1:this.liCollections[0].classList.contains("e-item-focus"),this.list&&this.list.querySelector(".e-list-parent.e-ul.e-reorder")){var a=this.list.querySelectorAll("li."+Y.li+":not(."+xe+"):not(.e-reorder-hide):not(.e-virtual-list-end)");a.length>0&&(this.focusFirstListItem=d(a[0])?!1:a[0].classList.contains("e-item-focus"))}var o=Array.prototype.slice.call(r).indexOf(s);o<=0&&this.mode==="CheckBox"&&this.allowFiltering&&(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"focus"})),this.moveByList(-1,t),this.updateAriaAttribute()},i.prototype.spaceKeySelection=function(e){if(this.mode==="CheckBox"){var t=this.list.querySelector("li."+Y.focus),r=document.getElementsByClassName("e-selectall-parent")[0];if((!d(t)||r&&r.classList.contains("e-item-focus"))&&(e.preventDefault(),this.keyAction=!0),this.selectByKey(e),this.keyAction){var s=this.list.querySelector("li."+Y.focus);!d(s)&&r&&r.classList.contains("e-item-focus")&&s.classList.remove("e-item-focus")}}this.checkPlaceholderSize()},i.prototype.checkBackCommand=function(e){(e.keyCode===8&&this.allowFiltering?this.targetElement()!==this.previousFilterText:this.targetElement()==="")?this.backCommand=!1:this.backCommand=!0},i.prototype.keyNavigation=function(e){if(this.mode!=="Delimiter"&&this.mode!=="CheckBox"&&this.value&&this.value.length)switch(e.keyCode){case 37:e.preventDefault(),this.moveBy(-1,e);break;case 39:e.preventDefault(),this.moveBy(1,e);break;case 8:this.removelastSelection(e);break;case 46:this.removeSelectedChip(e);break}else if(e.keyCode===8&&this.mode==="Delimiter"&&this.value&&this.value.length){e.preventDefault();var t=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1];this.removeValue(this.value[this.value.length-1],e),this.updateDelimeter(this.delimiterChar,e),this.focusAtLastListItem(t)}},i.prototype.selectByKey=function(e){this.removeChipSelection(),this.selectListByKey(e),this.hideSelectedItem&&this.focusAtFirstListItem()},i.prototype.escapeAction=function(){var e=this.tempValues?this.tempValues.slice():[];this.allowObjectBinding&&(e=this.tempValues?this.tempValues.slice():[]),this.value&&this.validateValues(this.value,e)&&(this.mode!=="CheckBox"&&(this.value=e,(this.allowFiltering||this.allowCustomValue)&&this.refreshListItems(null),this.initialValueUpdate()),this.mode!=="Delimiter"&&this.mode!=="CheckBox"?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()},i.prototype.scrollBottom=function(e,t,r,s,a){r===void 0&&(r=!1),s===void 0&&(s=null),a===void 0&&(a=!1),(!d(e)&&e.classList.contains("e-virtual-list")||this.enableVirtualization&&d(e))&&(e=this.liCollections[this.skeletonCount]);var o=e&&!isNaN(parseInt(window.getComputedStyle(e).marginBottom,10))?parseInt(window.getComputedStyle(e).marginBottom,10):0;this.isUpwardScrolling=!1;var l=this.list.querySelectorAll(".e-virtual-list:not(.e-virtual-list-end)").length,h=this.list.querySelectorAll("li:not(.e-virtual-list-end)"),c=h&&h.length>0&&h[h.length-1]?h[h.length-1].getAttribute("data-value"):null,u=this.virtualListInfo&&this.virtualListInfo.startIndex?e.offsetTop+this.virtualListInfo.startIndex*(e.offsetHeight+o):e.offsetTop,p=this.list.offsetHeight,f=u-l*(e.offsetHeight+o)+(e.offsetHeight+o)-this.list.scrollTop,v=this.list.scrollTop+f-p,m=!1,g=u-l*(e.offsetHeight+o)+(e.offsetHeight+o)-this.list.scrollTop;if(g=this.fields.groupBy&&!d(this.fixedHeaderElement)?g-this.fixedHeaderElement.offsetHeight:g,t===0&&!this.enableVirtualization)this.list.scrollTop=0;else if(f>p||!(g>0&&this.list.offsetHeight>g)){var y=e?e.getAttribute("data-value"):null,b=s===34?this.getPageCount()-1:1;!this.enableVirtualization||this.isKeyBoardAction||r?this.isKeyBoardAction&&this.enableVirtualization&&c&&y===c&&s!==35&&!this.isVirtualScrolling?(this.isPreventKeyAction=!0,this.list.scrollTop+=(e.offsetHeight+o)*b,this.isPreventKeyAction=this.isScrollerAtEnd()?!1:this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&s===35?(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,this.list.scrollTop=this.list.scrollHeight):(s===34&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=v):this.list.scrollTop=this.virtualListInfo&&this.virtualListInfo.startIndex?a&&this.virtualListInfo.startIndex?this.virtualListInfo.startIndex*this.listItemHeight+this.listItemHeight*2:this.virtualListInfo.startIndex*this.listItemHeight:0,m=this.isKeyBoardAction}this.isKeyBoardAction=m},i.prototype.scrollTop=function(e,t,r){r===void 0&&(r=null);var s=this.list.querySelectorAll(".e-virtual-list:not(.e-virtual-list-end)").length,a=e&&!isNaN(parseInt(window.getComputedStyle(e).marginBottom,10))?parseInt(window.getComputedStyle(e).marginBottom,10):0,o=this.virtualListInfo&&this.virtualListInfo.startIndex?e.offsetTop+this.virtualListInfo.startIndex*(e.offsetHeight+a):e.offsetTop,l=o-s*(e.offsetHeight+a)-this.list.scrollTop,h=this.list.querySelector("li.e-list-item:not(.e-virtual-list)")?this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value"):null;l=this.fields.groupBy&&!Ns(this.fixedHeaderElement)?l-this.fixedHeaderElement.offsetHeight:l;var c=o-s*(e.offsetHeight+a)+(e.offsetHeight+a)-this.list.scrollTop,u=this.enableVirtualization&&this.getModuleName()==="autocomplete"&&l<=0;if(t===0&&!this.enableVirtualization)this.list.scrollTop=0;else if(l<0||u){var p=e?e.getAttribute("data-value"):null,f=r===33?this.getPageCount()-2:1;this.enableVirtualization&&this.isKeyBoardAction&&h&&p===h&&r!==36&&!this.isVirtualScrolling?(this.isUpwardScrolling=!0,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTop-=(e.offsetHeight+a)*f,this.isPreventKeyAction=this.list.scrollTop!==0?this.isPreventKeyAction:!1,this.isPreventScrollAction=!1):this.enableVirtualization&&r===36?(this.isPreventScrollAction=!1,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTo(0,0)):(r===33&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=this.list.scrollTop+l)}else c>0&&this.list.offsetHeight>c||(this.list.scrollTop=e.offsetTop-(this.fields.groupBy&&!d(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))},i.prototype.isScrollerAtEnd=function(){return this.list&&this.list.scrollTop+this.list.clientHeight>=this.list.scrollHeight},i.prototype.selectListByKey=function(e){var t=this.list.querySelector("li."+Y.focus),r=this.value&&this.value.length?this.value.length:0,s;if(t!==null){if(e.preventDefault(),t.classList.contains("e-active")&&(r=r-1),this.isValidLI(t)&&r<this.maximumSelectionLength){this.updateListSelection(t,e),this.addListFocus(t),this.mode==="CheckBox"?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight(),this.checkPlaceholderSize(),this.enableGroupCheckBox&&!d(this.fields.groupBy)&&(s=t.firstElementChild.lastElementChild,this.findGroupStart(s),this.deselectHeader())):this.updateDelimeter(this.delimiterChar,e);var a=this.targetElement().trim()!=="";this.makeTextBoxEmpty(),this.mode!=="CheckBox"&&this.refreshListItems(t.textContent,a),this.changeOnBlur||this.updateValueState(e,this.value,this.tempValues),this.refreshPopup()}else!this.isValidLI(t)&&r<this.maximumSelectionLength&&(s=t.firstElementChild.lastElementChild,s.classList.contains("e-check")?this.selectAllItem(!1,e,t):this.selectAllItem(!0,e,t));this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup(e)}var o=document.getElementsByClassName("e-selectall-parent")[0];if(o&&o.classList.contains("e-item-focus")){var l=o.childNodes[0];if(l.classList.contains("e-check")){l.classList.remove("e-check");var h={module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"check",name:"checkSelectAll"};this.notify("checkSelectAll",h),this.selectAllItem(!1,e,t)}else{l.classList.add("e-check");var h={module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"check",name:"checkSelectAll"};this.notify("checkSelectAll",h),this.selectAllItem(!0,e,t)}}this.refreshPlaceHolder()},i.prototype.refreshListItems=function(e,t){if((this.allowFiltering||this.mode==="CheckBox"&&this.enableSelectionOrder===!0||this.allowCustomValue)&&this.mainList&&this.listData){var r=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;if(this.enableVirtualization)if(this.allowCustomValue&&this.virtualCustomData&&e==null&&this.virtualCustomData&&this.viewPortInfo&&this.viewPortInfo.startIndex===0&&this.viewPortInfo.endIndex===this.itemCount)this.virtualCustomData=null,this.renderItems(this.mainData,this.fields);else if(this.allowFiltering&&t){if(this.updateInitialData(),this.onActionComplete(r,this.mainData),this.isVirtualTrackHeight=!1,this.list.getElementsByClassName("e-virtual-ddl")[0])this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.skeletonCount>0){var s=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});s.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(s)}}else this.onActionComplete(this.list,this.listData);else this.onActionComplete(r,this.mainData);this.focusAtLastListItem(e),this.value&&this.value.length&&this.refreshSelection()}else!d(this.fields.groupBy)&&this.value&&this.value.length&&this.refreshSelection()},i.prototype.removeSelectedChip=function(e){var t=this.chipCollectionWrapper.querySelector("span."+dr),r;if(t!==null){d(this.value)||(this.tempValues=this.allowObjectBinding?this.value.slice():this.value.slice()),r=t.nextElementSibling,r!==null&&(this.removeChipSelection(),this.addChipSelection(r,e));var s=this.allowObjectBinding?this.getDataByValue(this.getFormattedValue(t.getAttribute("data-value"))):t.getAttribute("data-value");this.removeValue(s,e),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty()}this.closePopupOnSelect&&this.hidePopup(e),this.checkPlaceholderSize()},i.prototype.moveByTop=function(e){var t=this.list.querySelectorAll("li."+Y.li),r;t.length>1&&(this.removeFocus(),r=e?0:t.length-1,this.addListFocus(t[r]),this.scrollBottom(t[r],r)),this.updateAriaAttribute()},i.prototype.clickHandler=function(e){var t=e.target,r=t.className,s=document.getElementsByClassName("e-selectall-parent")[0];(r==="e-input-filter e-input"||r==="e-input-group e-control-wrapper e-input-focus")&&s.classList.contains("e-item-focus")&&s.classList.remove("e-item-focus")},i.prototype.moveByList=function(e,t){if(this.list){var r=this.list.querySelectorAll("li."+Y.li+":not(."+xe+"):not(.e-reorder-hide):not(.e-virtual-list-end)");this.mode==="CheckBox"&&this.enableGroupCheckBox&&!d(this.fields.groupBy)&&(r=this.list.querySelectorAll("li."+Y.li+",li."+Y.group+":not(."+xe+"):not(.e-reorder-hide):not(.e-virtual-list-end)"));var s=this.list.querySelector("li."+Y.focus);this.enableVirtualization&&t&&!d(this.currentFocuedListElement)&&(s=this.getElementByValue(this.getFormattedValue(this.currentFocuedListElement.getAttribute("data-value"))));var a=-1,o=document.getElementsByClassName("e-selectall-parent")[0];if(this.mode==="CheckBox"&&this.showSelectAll&&e===1&&!d(o)&&!o.classList.contains("e-item-focus")&&this.list.getElementsByClassName("e-item-focus").length===0&&this.liCollections.length>1)!this.focusFirstListItem&&o.classList.contains("e-item-focus")?o.classList.remove("e-item-focus"):o.classList.contains("e-item-focus")||o.classList.add("e-item-focus");else if(r.length){this.mode==="CheckBox"&&this.showSelectAll&&!d(o&&e===-1)&&((!this.focusFirstListItem||e===1)&&o.classList.contains("e-item-focus")?o.classList.remove("e-item-focus"):this.focusFirstListItem&&!o.classList.contains("e-item-focus")&&!(e===1&&this.list.querySelector(".e-item-focus"))&&o.classList.add("e-item-focus"));for(var l=0;l<r.length;l++)if(r[l]===s){a=l;break}if(e>0)a<r.length-1&&(this.removeFocus(),this.enableVirtualization&&t?this.addListFocus(r[a]):this.enableVirtualization&&r[a+1].classList.contains("e-virtual-list")?this.addListFocus(r[this.skeletonCount]):this.addListFocus(r[++a]),a>-1&&(this.updateCheck(r[a]),this.scrollBottom(r[a],a),this.currentFocuedListElement=r[a]));else if(a>0)if(this.enableVirtualization){var h=r[a-1].classList.contains("e-virtual-list"),c=t?a:a-1;(t||!h)&&this.removeFocus(),(t||!h)&&(this.addListFocus(r[c]),this.updateCheck(r[c]),this.scrollTop(r[c],a),this.currentFocuedListElement=r[c])}else this.removeFocus(),this.addListFocus(r[--a]),this.updateCheck(r[a]),this.scrollTop(r[a],a)}}var u=this.list?this.list.querySelector(".e-item-focus"):null;if(this.isDisabledElement(u)){if(this.list.querySelectorAll(".e-list-item:not(.e-hide-listitem):not(.e-disabled)").length===0||this.keyCode===38&&this.mode==="CheckBox"&&this.enableGroupCheckBox&&!d(this.fields.groupBy)&&u===this.list.querySelector("li.e-list-group-item")){this.removeFocus();return}var l=this.getIndexByValue(u.getAttribute("data-value"));l===0&&(e=1),l===this.list.querySelectorAll(".e-list-item:not(.e-hide-listitem)").length-1&&(e=-1),this.moveByList(e)}},i.prototype.getElementByValue=function(e){for(var t,r=this.getItems(),s=0,a=r;s<a.length;s++){var o=a[s];if(this.getFormattedValue(o.getAttribute("data-value"))===e){t=o;break}}return t},i.prototype.updateCheck=function(e){if(this.mode==="CheckBox"&&this.enableGroupCheckBox&&!d(this.fields.groupBy)){var t=e.firstElementChild.lastElementChild;t.classList.contains("e-check")?e.classList.add("e-active"):e.classList.remove("e-active")}},i.prototype.moveBy=function(e,t){var r,s=this.chipCollectionWrapper.querySelectorAll("span."+gs),a=this.chipCollectionWrapper.querySelector("span."+dr);a===null?e<0&&this.addChipSelection(s[s.length-1],t):e<0?(r=a.previousElementSibling,r!==null&&(this.removeChipSelection(),this.addChipSelection(r,t))):(r=a.nextElementSibling,this.removeChipSelection(),r!==null&&this.addChipSelection(r,t))},i.prototype.chipClick=function(e){if(this.enabled){var t=M(e.target,"."+gs);this.removeChipSelection(),this.addChipSelection(t,e)}},i.prototype.removeChipSelection=function(){if(this.chipCollectionWrapper){var e=this.chipCollectionWrapper.querySelectorAll("span."+gs+"."+dr);e&&e.length===1&&(e[0].removeAttribute("id"),!d(this.inputElement)&&this.inputElement.hasAttribute("aria-activedescendant")&&this.inputElement.removeAttribute("aria-activedescendant")),this.removeChipFocus()}},i.prototype.addChipSelection=function(e,t){T([e],dr),e&&(e.setAttribute("id",this.element.id+"_chip_item"),!d(this.inputElement)&&e.id&&!this.inputElement.hasAttribute("aria-activedescendant")&&this.inputElement.setAttribute("aria-activedescendant",e.id)),this.trigger("chipSelection",t)},i.prototype.getVirtualDataByValue=function(e){if(!d(this.selectedListData)){var t=this.typeOfData(this.selectedListData).typeof;if(t==="string"||t==="number"||t==="boolean")for(var r=0,s=this.selectedListData;r<s.length;r++){var a=s[r];if(!d(a)&&a===e)return a}else for(var o=0,l=this.selectedListData;o<l.length;o++){var a=l[o];if(!d(a)&&V(this.fields.value?this.fields.value:"value",a)===e)return a}}return null},i.prototype.onChipRemove=function(e){if(!(e.which===3||e.button===2)&&this.enabled&&!this.readonly){var t=e.target.parentElement,r=t.getAttribute("data-value"),s=this.allowObjectBinding?this.enableVirtualization?this.getVirtualDataByValue(this.getFormattedValue(r)):this.getDataByValue(this.getFormattedValue(r)):this.getFormattedValue(r);if(this.allowCustomValue&&(r!=="false"&&s===!1||!d(s)&&s.toString()==="NaN")&&(s=r),this.isPopupOpen()&&this.mode!=="CheckBox"&&this.hidePopup(e),this.inputFocus||this.inputElement.focus(),this.removeValue(s,e),s=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",s):s,d(this.findListElement(this.list,"li","data-value",s))&&this.mainList&&this.listData){var a=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(a,this.mainData)}this.updateDelimeter(this.delimiterChar,e),this.placeholder&&this.floatLabelType==="Never"?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",e.preventDefault()}},i.prototype.makeTextBoxEmpty=function(){this.inputElement.value="",this.refreshPlaceHolder()},i.prototype.refreshPlaceHolder=function(){this.placeholder&&this.floatLabelType==="Never"?this.value&&this.value.length||!d(this.text)&&this.text!==""?this.inputElement.placeholder="":this.inputElement.placeholder=cu(this.placeholder):(this.setFloatLabelType(),this.element.querySelector(".e-multiselect .e-float-text-content")===null&&X.createSpanElement(this.overAllWrapper,this.createElement)),this.expandTextbox()},i.prototype.removeAllItems=function(e,t,r,s,a){var o=this.allowObjectBinding?this.indexOfObjectInArray(e,this.value):this.value.indexOf(e),l=this.value.slice(0);l.splice(o,1),this.setProperties({value:[].concat([],l)},!0),s.setAttribute("aria-selected","false");var h=this.hideSelectedItem?xe:Y.selected;I([s],h),this.notify("activeList",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:s,e:this,index:o}),this.invokeCheckboxSelection(s,t,r);var c=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",e):e;this.updateMainList(!0,c,a),this.updateChipStatus()},i.prototype.invokeCheckboxSelection=function(e,t,r){this.notify("updatelist",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:e,e:t}),this.updateAriaActiveDescendant(),this.value&&this.value.length!==this.mainData.length&&this.mode==="CheckBox"&&this.showSelectAll&&!(this.isSelectAll||r)&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"uncheck"})},i.prototype.removeValue=function(e,t,r,s){var a=this,o=this.allowObjectBinding?this.indexOfObjectInArray(e,this.value):this.value.indexOf(this.getFormattedValue(e));o===-1&&this.allowCustomValue&&!d(e)&&(o=this.allowObjectBinding?this.indexOfObjectInArray(e,this.value):this.value.indexOf(e.toString()));var l=t&&t.target;s=s||l&&l.classList.contains("e-close-hooker")?!0:null;var h=this.hideSelectedItem?xe:Y.selected;if(o!==-1){var c=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",e):e,u=this.virtualSelectAll?null:this.findListElement(this.list,"li","data-value",c),p=this.allowObjectBinding?e:this.getDataByValue(e),f={e:t,item:u,itemData:p,isInteracted:!!t,cancel:!1};this.trigger("removing",f,function(v){if(v.cancel)a.removeIndex++;else{a.isRemoveSelection=a.enableVirtualization?!0:a.isRemoveSelection,a.currentRemoveValue=a.allowObjectBinding?V(a.fields.value?a.fields.value:"",e):e,a.virtualSelectAll=!1;var m=a.value.slice(0);if(m.splice(o,1),a.enableVirtualization&&a.selectedListData&&a.selectedListData.splice(o,1),a.setProperties({value:[].concat([],m)},!0),a.enableVirtualization){var g=o===0&&a.text.split(a.delimiterChar)&&a.text.split(a.delimiterChar).length===1?a.text.replace(a.text.split(a.delimiterChar)[o],""):o===0?a.text.replace(a.text.split(a.delimiterChar)[o]+a.delimiterChar,""):a.text.replace(a.delimiterChar+a.text.split(a.delimiterChar)[o],"");a.setProperties({text:g.toString()},!0)}if(u!==null){var y=a.allowObjectBinding?V(a.fields.value?a.fields.value:"",e):e,b=a.findListElement(a.mainList,"li","data-value",y);u.setAttribute("aria-selected","false"),I([u],h),b&&(b.setAttribute("aria-selected","false"),I([u,b],h)),a.notify("activeList",{module:"CheckBoxSelection",enable:a.mode==="CheckBox",li:u,e:a,index:o}),a.invokeCheckboxSelection(u,t,s)}var E=a.allowObjectBinding?V(a.fields.value?a.fields.value:"",e):e;a.hideSelectedItem&&a.fields.groupBy&&u&&a.hideGroupItem(E),a.hideSelectedItem&&a.fixedHeaderElement&&a.fields.groupBy&&a.mode!=="CheckBox"&&a.isPopupOpen()&&n.prototype.scrollStop.call(a),a.updateMainList(!0,E),a.removeChip(E,s),a.updateChipStatus();var w=a.value&&a.value.length?a.value.length:0;if(w<a.maximumSelectionLength){var A=a.list.querySelectorAll("li."+Y.li+":not(.e-active)");I(A,"e-disable");var D=a.mainList.querySelectorAll("li."+Y.li+":not(.e-active)");I(D,"e-disable")}a.trigger("removed",v);var N=t&&t.currentTarget,x=N&&N.classList.contains("e-selectall-parent")?!0:null;if(!a.changeOnBlur&&!s&&t&&r&&!x&&a.isSelectAllTarget&&a.updateValueState(t,a.value,a.tempValues),r&&(a.selectAllEventData.push(p),a.selectAllEventEle.push(u)),r===1){a.changeOnBlur||a.updateValueState(t,a.value,a.tempValues);var j={event:t,items:a.selectAllEventEle,itemData:a.selectAllEventData,isInteracted:!!t,isChecked:!1};a.trigger("selectedAll",j),a.selectAllEventData=[],a.selectAllEventEle=[]}s&&(r===1||r===null)&&a.clearAllCallback(t,s),a.isPopupOpen()&&u&&u.parentElement.classList.contains("e-reorder")&&(a.hideSelectedItem&&a.value&&Array.isArray(a.value)&&a.value.length>0&&a.totalItemsCount(),a.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}))}})}},i.prototype.updateMainList=function(e,t,r){if(this.allowFiltering||this.mode==="CheckBox"){var s=r||this.findListElement(this.mainList,"li","data-value",t);s&&(e?(s.setAttribute("aria-selected","false"),I([s],this.hideSelectedItem?xe:Y.selected),this.mode==="CheckBox"&&I([s.firstElementChild.lastElementChild],"e-check")):(s.setAttribute("aria-selected","true"),T([s],this.hideSelectedItem?xe:Y.selected),this.mode==="CheckBox"&&T([s.firstElementChild.lastElementChild],"e-check")))}},i.prototype.removeChip=function(e,t){if(this.chipCollectionWrapper&&!(this.enableVirtualization&&t)){var r=this.findListElement(this.chipCollectionWrapper,"span","data-value",e);r&&ve(r)}},i.prototype.setWidth=function(e){d(e)||(typeof e=="number"?this.overAllWrapper.style.width=ce(e):typeof e=="string"&&(this.overAllWrapper.style.width=e.match(/px|%|em/)?e:ce(e)))},i.prototype.updateChipStatus=function(){this.value&&this.value.length?(d(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),(this.mode==="Delimiter"||this.mode==="CheckBox")&&this.showDelimWrapper(),this.showOverAllClear()):(d(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),d(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())},i.prototype.indexOfObjectInArray=function(e,t){for(var r=function(o){var l=t[o];if(Object.keys(e).every(function(h){return l.hasOwnProperty(h)&&l[h]===e[h]}))return{value:o}},s=0;s<t.length;s++){var a=r(s);if(typeof a=="object")return a.value}return-1},i.prototype.addValue=function(e,t,r){this.value||(this.value=[]);var s=this.allowObjectBinding?this.getDataByValue(e):e;if(this.allowObjectBinding&&!this.isObjectInArray(this.getDataByValue(e),this.value)||!this.allowObjectBinding&&this.value.indexOf(s)<0){if(this.setProperties({value:[].concat([],this.value,[s])},!0),this.enableVirtualization&&!this.isSelectAllLoop){var a=this.viewWrapper.innerHTML,o=void 0;a+=this.value.length===1?"":this.delimiterChar+" ",o=this.getOverflowVal(this.value.length-1),a+=o,o=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,a)}if(this.enableVirtualization&&this.mode==="CheckBox"){var l=[];this.allowObjectBinding?V(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1];var o=t,h=this.text!=null&&this.text!==""?this.text+this.delimiterChar+o:o;l.push(h),this.setProperties({text:l.toString()},!0)}}var c=this.findListElement(this.list,"li","data-value",e);this.removeFocus(),c&&(this.addListFocus(c),this.addListSelection(c)),this.mode!=="Delimiter"&&this.mode!=="CheckBox"&&this.addChip(t,e,r),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.updateChipStatus(),this.checkMaxSelection()},i.prototype.updateListItemsState=function(e){var t=e.querySelectorAll("li."+Y.li+".e-active");I(t,"e-disable");var r=e.querySelectorAll("li."+Y.li+":not(.e-active)");T(r,"e-disable")},i.prototype.checkMaxSelection=function(){var e=this.value&&this.value.length?this.value.length:0;if(this.maximumSelectionLength===0){this.updateListItemsState(this.list),this.mainList&&this.updateListItemsState(this.mainList);return}if(e===this.maximumSelectionLength){var t=this.list.querySelectorAll("li."+Y.li+".e-active");I(t,"e-disable");var r=this.list.querySelectorAll("li."+Y.li+":not(.e-active)");T(r,"e-disable")}if(e<this.maximumSelectionLength){var s=this.list.querySelectorAll("li."+Y.li);I(s,"e-disable")}},i.prototype.dispatchSelect=function(e,t,r,s,a,o,l){var h=this,c=this.listData;if(this.initStatus&&!s&&(!this.allowObjectBinding||this.allowObjectBinding&&e)){e=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",e):e;var u=o||this.getDataByValue(e),p={e:t,item:r,itemData:u,isInteracted:!!t,cancel:!1};this.trigger("select",p,function(f){if(!f.cancel){if(a&&(h.selectAllEventData.push(u),h.selectAllEventEle.push(r)),a===1){var v={event:t,items:h.selectAllEventEle,itemData:h.selectAllEventData,isInteracted:!!t,isChecked:!0};h.trigger("selectedAll",v),h.selectAllEventData=[]}h.allowCustomValue&&h.isServerRendered&&h.listData!==c&&(h.listData=c),e=h.allowObjectBinding?h.getDataByValue(e):e,h.enableVirtualization&&(d(h.selectedListData)?h.selectedListData=h.allowObjectBinding?[e]:[h.getDataByValue(e)]:o?Array.isArray(h.selectedListData)?h.selectedListData.push(o):h.selectedListData=[h.selectedListData,o]:Array.isArray(h.selectedListData)?h.selectedListData.push(h.allowObjectBinding?e:h.getDataByValue(e)):h.selectedListData=[h.selectedListData,h.allowObjectBinding?e:h.getDataByValue(e)]),(h.enableVirtualization&&e||!h.enableVirtualization)&&h.updateListSelectEventCallback(e,r,t,l),h.hideSelectedItem&&h.fixedHeaderElement&&h.fields.groupBy&&h.mode!=="CheckBox"&&n.prototype.scrollStop.call(h)}})}},i.prototype.addChip=function(e,t,r){this.chipCollectionWrapper&&this.getChip(e,t,r)},i.prototype.removeChipFocus=function(){var e=this.chipCollectionWrapper.querySelectorAll("span."+gs+"."+dr);if(I(e,dr),H.isDevice)for(var t=this.chipCollectionWrapper.querySelectorAll("span."+Ro.split(" ")[0]),r=0;r<t.length;r++)t[r].style.display="none"},i.prototype.onMobileChipInteraction=function(e){var t=M(e.target,"."+gs),r=t.querySelector("span."+Ro.split(" ")[0]);this.enabled&&!this.readonly&&(t.classList.contains(dr)||(this.removeChipFocus(),r.style.display="",t.classList.add(dr)),this.refreshPopup(),e.preventDefault())},i.prototype.multiCompiler=function(e){var t=!1;if(typeof e!="function"&&e)try{t=!!ae(e,document).length}catch{t=!1}return t},i.prototype.encodeHtmlEntities=function(e){return e.replace(/[\u00A0-\u9999<>&]/g,function(t){return"&#"+t.charCodeAt(0)+";"})},i.prototype.getChip=function(e,t,r){var s=this,a={text:t,value:t},o=this.createElement("span",{className:gs,attrs:{"data-value":t,title:e,role:"option","aria-selected":"true"}}),l,h=this.createElement("span",{className:OE}),c=this.createElement("span",{className:Ro});if(this.mainData&&(a=this.getDataByValue(t)),this.valueTemplate&&!d(a)){var u=this.multiCompiler(this.valueTemplate);typeof this.valueTemplate!="function"&&u?l=At(z(this.valueTemplate,document).innerHTML.trim()):l=At(this.valueTemplate);var p=l(a,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,h);p&&p.length>0&&oe(p,h),this.renderReactTemplates()}else this.enableHtmlSanitizer?h.innerText=e:h.innerHTML=this.encodeHtmlEntities(e.toString());o.appendChild(h);var f={isInteracted:!!r,itemData:a,e:r,setClass:function(v){T([o],v)},cancel:!1};this.isPreventChange=this.isAngular&&this.preventChange,this.trigger("tagging",f,function(v){v.cancel||(H.isDevice?(o.classList.add(VE),oe([c],o),c.style.display="none",C.add(o,"click",s.onMobileChipInteraction,s)):(C.add(o,"mousedown",s.chipClick,s),s.showClearButton&&o.appendChild(c)),C.add(c,"mousedown",s.onChipRemove,s),s.chipCollectionWrapper.appendChild(o),!s.changeOnBlur&&r&&s.updateValueState(r,s.value,s.tempValues))})},i.prototype.calcPopupWidth=function(){var e=ce(this.popupWidth);if(e.indexOf("%")>-1){var t=this.componentWrapper.offsetWidth*parseFloat(e)/100;e=t.toString()+"px"}return this.allowResize&&this.resizeWidth?this.resizeWidth+"px":e},i.prototype.mouseIn=function(){this.enabled&&!this.readonly&&this.showOverAllClear()},i.prototype.mouseOut=function(){this.inputFocus||(this.overAllClear.style.display="none")},i.prototype.listOption=function(e,t){var r=!d(t.iconCss),s=d(t.properties)?t:t.properties;return this.listCurrentOptions=t.text!==null||t.value!==null?{fields:s,showIcon:r,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},$(this.listCurrentOptions,this.listCurrentOptions,t,!0),this.mode==="CheckBox"&&this.notify("listoption",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",dataSource:e,fieldProperty:s}),this.listCurrentOptions},i.prototype.renderPopup=function(){var e=this;if(this.list||n.prototype.render.call(this),this.popupObj&&document.body.contains(this.popupObj.element)&&this.allowFiltering){this.refreshPopup();return}if(!this.popupObj&&!d(this.popupWrapper)){document.body.appendChild(this.popupWrapper);var t=this.popupWrapper.querySelector("."+_E);this.mode==="CheckBox"&&!this.allowFiltering&&t&&this.filterParent&&(t.remove(),this.filterParent=null);var r=parseInt(this.popupHeight,10);if(this.popupWrapper.style.visibility="hidden",this.headerTemplate&&(this.setHeaderTemplate(),r-=this.header.offsetHeight,this.isUpdateHeaderHeight=this.header.offsetHeight!==0),oe([this.list],this.popupWrapper),!this.list.classList.contains(Y.noData)&&this.getItems()[1]&&(this.listItemHeight=this.getItems()[1].offsetHeight+parseInt(window.getComputedStyle(this.getItems()[1]).marginBottom,10)),this.enableVirtualization&&!this.list.classList.contains(Y.noData)){if(!this.list.querySelector(".e-virtual-ddl-content")&&this.list.querySelector(".e-list-parent")){var s=this.createElement("div",{className:"e-virtual-ddl-content"});s.style.cssText=this.getTransformValues(),this.list.appendChild(s).appendChild(this.list.querySelector(".e-list-parent"))}else this.list.querySelector(".e-virtual-ddl-content")&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues());if(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+Y.li),this.virtualItemCount=this.itemCount,this.mode!=="CheckBox"&&this.totalItemsCount(),this.list.querySelector(".e-virtual-ddl"))this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else{var a=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});a.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(a)}}if(this.footerTemplate&&(this.setFooterTemplate(),r-=this.footer.offsetHeight,this.isUpdateFooterHeight=this.footer.offsetHeight!==0),this.mode==="CheckBox"&&this.showSelectAll?(this.notify("selectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),r-=this.selectAllHeight):this.mode==="CheckBox"&&!this.showSelectAll&&!this.headerTemplate&&!this.footerTemplate?(this.notify("selectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),r=parseInt(this.popupHeight,10)):this.mode==="CheckBox"&&!this.showSelectAll&&(this.notify("selectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),r=parseInt(this.popupHeight,10),this.headerTemplate&&this.header&&(r-=this.header.offsetHeight),this.footerTemplate&&this.footer&&(r-=this.footer.offsetHeight)),this.mode==="CheckBox"){var o={module:"CheckBoxSelection",enable:this.mode==="CheckBox",popupElement:this.popupWrapper};this.allowFiltering&&(this.notify("searchBox",o),r-=this.searchBoxHeight),T([this.popupWrapper],"e-checkbox")}this.popupHeight!=="auto"?(this.list.style.maxHeight=ce(r),this.popupWrapper.style.maxHeight=ce(this.popupHeight)):this.list.style.maxHeight=ce(this.popupHeight),this.popupObj=new xr(this.popupWrapper,{width:this.calcPopupWidth(),targetType:"relative",position:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},relateTo:this.overAllWrapper,collision:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.enableRtl,zIndex:this.zIndex,close:function(){if(e.popupObj.element.parentElement){e.popupObj.unwireScrollEvents();var l=e.popupWrapper.querySelector("."+ic);e.mode==="CheckBox"&&l&&document.activeElement===l&&l.blur(),Q(e.popupObj.element)}},open:function(){if(e.popupObj.resolveCollision(),!e.isFirstClick){var l=e.list.querySelector("ul");l&&(e.mode!=="CheckBox"&&(e.allowFiltering||e.allowCustomValue)&&(e.targetElement().trim()!==""||e.targetElement()!==""&&e.allowCustomValue)||(e.mainList=l.cloneNode?l.cloneNode(!0):l)),e.isFirstClick=!0}e.popupObj.wireScrollEvents(),!(e.mode!=="CheckBox"&&(e.allowFiltering||e.allowCustomValue)&&(e.targetElement().trim()!==""||e.targetElement()!==""&&e.allowCustomValue))&&!e.enableVirtualization&&(e.loadTemplate(),e.enableVirtualization&&e.mode==="CheckBox"&&e.UpdateSkeleton()),e.isPreventScrollAction=!0,e.setScrollPosition(),!e.list.classList.contains(Y.noData)&&e.getItems()[1]&&e.getItems()[1].offsetHeight!==0&&(e.listItemHeight=e.getItems()[1].offsetHeight+parseInt(window.getComputedStyle(e.getItems()[1]).marginBottom,10),e.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(e.list.getElementsByClassName("e-virtual-ddl-content")[0].style=e.getTransformValues())),e.allowFiltering&&e.notify("inputFocus",{module:"CheckBoxSelection",enable:e.mode==="CheckBox",value:"focus"}),e.enableVirtualization&&(e.notify("bindScrollEvent",{module:"VirtualScroll",component:e.getModuleName(),enable:e.enableVirtualization}),setTimeout(function(){e.value?e.updateSelectionList():e.viewPortInfo&&e.viewPortInfo.offsets.top&&(e.list.scrollTop=e.viewPortInfo.offsets.top)},5))},targetExitViewport:function(){H.isDevice||e.hidePopup()}}),this.checkCollision(this.popupWrapper),this.popupContentElement=this.popupObj.element.querySelector(".e-content"),this.mode==="CheckBox"&&H.isDevice&&this.allowFiltering&&this.isDeviceFullScreen&&this.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),this.allowResize&&this.setResize(),this.popupObj.close(),this.popupWrapper.style.visibility=""}},i.prototype.checkCollision=function(e){if(!(this.mode==="CheckBox"&&H.isDevice&&this.allowFiltering&&this.isDeviceFullScreen)){var t=dn(e);t.length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision()}},i.prototype.setHeaderTemplate=function(){var e;this.header&&this.header.remove(),this.header=this.createElement("div"),T([this.header],HE);var t=this.multiCompiler(this.headerTemplate);typeof this.headerTemplate!="function"&&t?e=At(z(this.headerTemplate,document).innerHTML.trim()):e=At(this.headerTemplate);var r=e({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);r&&r.length>0&&oe(r,this.header),this.mode==="CheckBox"&&this.showSelectAll?yt([this.header],this.popupWrapper):oe([this.header],this.popupWrapper),C.add(this.header,"mousedown",this.onListMouseDown,this)},i.prototype.setFooterTemplate=function(){var e;this.footer&&this.footer.remove(),this.footer=this.createElement("div"),T([this.footer],PE);var t=this.multiCompiler(this.footerTemplate);typeof this.footerTemplate!="function"&&t?e=At(z(this.footerTemplate,document).innerHTML.trim()):e=At(this.footerTemplate);var r=e({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);r&&r.length>0&&oe(r,this.footer),oe([this.footer],this.popupWrapper),C.add(this.footer,"mousedown",this.onListMouseDown,this)},i.prototype.updateInitialData=function(){var e=this.selectData;if(this.renderItems(e,this.fields,!1,this.isClearAllAction),this.list.scrollTop=0,this.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},this.previousStartIndex=0,this.previousEndIndex=this.itemCount,this.dataSource instanceof K?this.remoteDataCount>=0?this.totalItemCount=this.dataCount=this.remoteDataCount:this.resetList(this.dataSource):this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.getSkeletonCount(),this.skeletonCount=this.totalItemCount!==0&&this.totalItemCount<this.itemCount*2&&(!(this.dataSource instanceof K)||this.dataSource instanceof K&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.UpdateSkeleton(),this.list.getElementsByClassName("e-virtual-ddl")[0])this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.skeletonCount>0){var t=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});t.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(t)}this.listData=e,this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()),this.enableVirtualization&&this.notify("setGeneratedData",{module:"VirtualScroll"})},i.prototype.clearAll=function(e){if(this.enabled&&!this.readonly){var t=void 0;if(this.setDynValue=!1,this.isClearAllAction=!0,this.value&&this.value.length>0){this.allowFiltering&&(this.refreshListItems(null),this.mode==="CheckBox"&&this.targetInputElement&&(this.targetInputElement.value=""));var r=this.list&&this.list.querySelectorAll("li.e-list-item");if(r&&r.length>0)this.selectAllItems(!1,e);else for(this.removeIndex=0,t=this.value[this.removeIndex];this.removeIndex<this.value.length;t=this.value[this.removeIndex])this.removeValue(t,e,null,!0);this.selectedElementID=null,this.inputElement.removeAttribute("aria-activedescendant")}else this.clearAllCallback(e);this.checkAndResetCache(),this.element.querySelector(".e-multiselect .e-float-text-content")===null&&X.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),!d(this.overAllWrapper)&&!d(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never")&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.enableVirtualization&&(this.updateInitialData(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.isCustomDataUpdated||this.notify("setGeneratedData",{module:"VirtualScroll"})),this.enableVirtualization&&(this.list.scrollTop=0,this.virtualListInfo=null,this.previousStartIndex=0,this.previousEndIndex=this.itemCount),this.isClearAllAction=!1}this.isClearAllItem=!0,C.add(document,"mouseup",this.preventSelection,this)},i.prototype.preventSelection=function(e){this.isClearAllItem&&e.stopPropagation(),this.isClearAllItem=!1,C.remove(document,"mouseup",this.preventSelection)},i.prototype.clearAllCallback=function(e,t){var r=this.value?this.value.slice():[];if(this.mainList&&this.listData&&(this.allowFiltering&&this.mode!=="CheckBox"||this.allowCustomValue)){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(s,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar,e),this.mode!=="Box"&&(!this.inputFocus||this.mode==="CheckBox")&&this.updateDelimView(),this.inputElement.value!==""&&(this.makeTextBoxEmpty(),this.search(null)),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.allowResize&&this.setResize(),this.inputFocus||(this.changeOnBlur&&this.updateValueState(e,this.value,r),this.mode!=="CheckBox"&&this.inputElement.focus()),this.mode==="CheckBox"&&(this.refreshPlaceHolder(),this.refreshInputHight(),this.changeOnBlur&&t&&(d(this.value)||this.value.length===0)&&this.updateValueState(e,this.value,this.tempValues)),!this.changeOnBlur&&t&&(d(this.value)||this.value.length===0)&&this.updateValueState(e,this.value,this.tempValues),this.mode==="CheckBox"&&this.enableGroupCheckBox&&!d(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),e.preventDefault()},i.prototype.windowResize=function(){this.refreshPopup(),(!this.inputFocus||this.mode==="CheckBox")&&this.viewWrapper&&this.viewWrapper.parentElement&&this.updateDelimView()},i.prototype.resetValueHandler=function(e){if(!d(this.inputElement)){var t=M(this.inputElement,"form");if(t&&e.target===t){var r=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=r}}},i.prototype.wireEvent=function(){C.add(this.componentWrapper,"mousedown",this.wrapperClick,this),C.add(window,"resize",this.windowResize,this),C.add(this.inputElement,"focus",this.focusInHandler,this),C.add(this.inputElement,"keydown",this.onKeyDown,this),C.add(this.inputElement,"keyup",this.keyUp,this),this.mode!=="CheckBox"&&C.add(this.inputElement,"input",this.onInput,this),C.add(this.inputElement,"blur",this.onBlurHandler,this),C.add(this.componentWrapper,"mouseover",this.mouseIn,this);var e=M(this.inputElement,"form");e&&C.add(e,"reset",this.resetValueHandler,this),C.add(this.componentWrapper,"mouseout",this.mouseOut,this),C.add(this.overAllClear,"mousedown",this.clearAll,this),C.add(this.inputElement,"paste",this.pasteHandler,this)},i.prototype.onInput=function(e){this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1,H.isDevice&&H.info.name==="mozilla"&&this.search(e)},i.prototype.pasteHandler=function(e){var t=this;setTimeout(function(){t.expandTextbox(),t.search(e)})},i.prototype.performFiltering=function(e){var t=this,r={preventDefaultAction:!1,text:this.targetElement(),updateData:function(s,a,o){r.cancel||(t.isFiltered=!0,t.customFilterQuery=a,t.remoteFilterAction=!0,t.isCustomFiltering=!0,t.dataUpdater(s,a,o))},event:e,cancel:!1};this.trigger("filtering",r,function(s){t.isFilterPrevented=s.cancel,s.cancel||!t.isFiltered&&!s.preventDefaultAction&&(t.isFilterAction=!0,t.isFilteringAction=!0,t.dataSource instanceof K&&t.allowCustomValue&&(t.isCustomRendered=!1),t.dataUpdater(t.dataSource,null,t.fields),t.isFilteringAction=!1)}),this.updatePopupHeightOnFilter()},i.prototype.search=function(e){if(this.preventSetCurrentData=!1,this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,d(e)||(this.keyCode=e.keyCode),!this.isPopupOpen()&&this.openOnClick&&this.showPopup(e),this.openClick(e),this.checkTextLength()&&!this.allowFiltering&&!d(e)&&e.keyCode!==8)this.focusAtFirstListItem();else{var t=this.targetElement();if(this.allowFiltering)this.allowCustomValue&&(this.isRemoteSelection=!0),this.checkAndResetCache(),this.isRequesting=!1,this.targetElement()!==""&&this.debounceDelay>0?this.debouncedFiltering(e,this.debounceDelay):this.performFiltering(e);else if(this.allowCustomValue){var r=new Se;r=this.allowFiltering&&t!==""?r.where(this.fields.text,"startswith",t,this.ignoreCase,this.ignoreAccent):r,this.enableVirtualization?this.dataUpdater(this.dataSource,r,this.fields):this.dataUpdater(this.mainData,r,this.fields),this.UpdateSkeleton()}else{var s=this.list.querySelectorAll("li."+Y.li+":not(.e-hide-listitem)"),a=this.typeOfData(this.listData).typeof,o=rn(this.targetElement(),s,"StartsWith",this.ignoreCase);if(this.enableVirtualization&&this.targetElement().trim()!==""&&!this.allowFiltering){var l=!1;for((this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount||this.incrementalEndIndex===0)&&(l=!0,this.incrementalStartIndex=0,this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),l=!1),(this.viewPortInfo.startIndex!==0||l)&&this.updateIncrementalView(0,this.itemCount),o=rn(this.targetElement(),this.incrementalLiCollections,this.filterType,!0,this.listData,this.fields,a);d(o)&&this.incrementalEndIndex<this.totalItemCount&&(this.incrementalStartIndex=this.incrementalEndIndex,this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),l=!0,(this.viewPortInfo.startIndex!==0||l)&&this.updateIncrementalView(0,this.itemCount),o=rn(this.targetElement(),this.incrementalLiCollections,this.filterType,!0,this.listData,this.fields,a),!!d(o));)if(d(o)&&this.incrementalEndIndex>=this.totalItemCount){this.incrementalStartIndex=0,this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100;break}if(o.index&&(!(this.viewPortInfo.startIndex>=o.index)||!(o.index>=this.viewPortInfo.endIndex))){var h=o.index-(this.itemCount/2-2)>0?o.index-(this.itemCount/2-2):0,c=h+this.itemCount>this.totalItemCount?this.totalItemCount:h+this.itemCount;h!==this.viewPortInfo.startIndex&&this.updateIncrementalView(h,c)}if(d(o.item))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{var u=this.getIndexByValue(o.item.getAttribute("data-value"))-this.skeletonCount;if(u>this.itemCount/2){var h=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(h,c)}o.item=this.getElementByValue(o.item.getAttribute("data-value"))}o&&o.item&&(o.item=this.getElementByValue(o.item.getAttribute("data-value")))}o&&o.item?(this.addListFocus(o.item),this.list.scrollTop=o.item.offsetHeight*o.index):this.targetElement()!==""?this.removeFocus():this.focusAtFirstListItem()}}this.enableVirtualization&&this.allowFiltering&&this.getFilteringSkeletonCount()},i.prototype.preRender=function(){this.allowFiltering===null&&(this.allowFiltering=this.mode==="CheckBox"),this.preventSetCurrentData=!1,this.initializeData(),this.updateDataAttribute(this.htmlAttributes),n.prototype.preRender.call(this)},i.prototype.getLocaleName=function(){return"multi-select"},i.prototype.initializeData=function(){this.mainListCollection=[],this.beforePopupOpen=!1,this.isFilterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0,this.isCustomRendered=!1,this.isRemoteSelection=!1,this.isSelectAllTarget=!0,this.isaddNonPresentItems=!1,this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount}},i.prototype.updateData=function(e,t,r){var s="",a=this.mode==="Delimiter"||this.mode==="CheckBox",o=[],l,h=this.listData;if(this.enableVirtualization||(this.listData=this.mainData),!d(this.hiddenElement)&&!this.enableVirtualization&&(this.hiddenElement.innerHTML=""),!d(this.value)){for(var c=this.value.length,u="",p=function(w){var A=f.allowObjectBinding?V(f.fields.value?f.fields.value:"",f.value[w]):f.value[w],D=f.findListElement(d(f.mainList)?f.ulElement:f.mainList,"li","data-value",A);if(f.enableVirtualization&&(D=f.findListElement(d(f.list)?f.ulElement:f.list,"li","data-value",A)),d(D)&&!f.allowCustomValue&&!f.enableVirtualization&&f.listData&&f.listData.length>0)f.value.splice(w,1),w-=1,c-=1;else{if(f.listData)if(f.enableVirtualization){a&&!f.isDynamicRemoteVirtualData&&!r&&(s=f.delimiterWrapper&&f.delimiterWrapper.innerHTML===""?s:f.delimiterWrapper.innerHTML);var N=f.allowObjectBinding?V(f.fields.value?f.fields.value:"",f.value[f.value.length-1]):f.value[f.value.length-1];if(f.isRemoveSelection)s=f.text.replace(/,/g,e+" ")+e+" ",o=f.text.split(e);else{l=r&&a?f.text.replace(/,/g,e+" "):f.getTextByValue(N);var x=f.isDynamicRemoteVirtualData&&N!=null&&N!==""&&!r?f.getTextByValue(N):r?f.text:f.text&&f.text!==""?f.text+f.delimiterChar+l:l;s+=l+e+" ",o.push(x),u=f.hiddenElement.innerHTML}if(t&&t.currentTarget&&t.currentTarget.classList.contains("e-chips-close")||t&&t.key==="Backspace"){var j=t.target.parentElement.getAttribute("data-value");if(t.key==="Backspace"){var q=f.hiddenElement.lastChild;q&&f.hiddenElement.removeChild(q)}else f.hiddenElement.childNodes.forEach(function(L){L.value===j&&L.parentNode.removeChild(L)});u=f.hiddenElement.innerHTML}else u+="<option selected value='"+N+"'>"+w+"</option>";return v=w,"break"}else l=f.getTextByValue(A);else l=A;s+=l+e+" ",o.push(l)}u+='<option selected value="'+A+'">'+w+"</option>",v=w},f=this,v,m=0;m<c;m++){var g=p(m);if(m=v,g==="break")break}d(this.hiddenElement)||(this.isRemoveSelection?(this.findListElement(this.hiddenElement,"option","value",this.currentRemoveValue)&&this.hiddenElement.removeChild(this.findListElement(this.hiddenElement,"option","value",this.currentRemoveValue)),this.isRemoveSelection=!1):this.hiddenElement.innerHTML=u)}var y=t&&t.target&&t.target.classList.contains("e-chips-close");(!this.enableVirtualization||this.enableVirtualization&&this.mode!=="CheckBox"&&!y)&&this.setProperties({text:o.toString()},!0),a&&(this.updateWrapperText(this.delimiterWrapper,s),this.delimiterWrapper.setAttribute("id",Nt("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id));var b=t&&t.target,E=b&&b.classList.contains("e-close-hooker")?!0:null;(!this.changeOnBlur&&t&&!E||this.isSelectAll)&&(this.isSelectAll=!1,this.updateValueState(t,this.value,this.tempValues)),this.listData=h,this.addValidInputClass()},i.prototype.initialTextUpdate=function(){if(d(this.text))this.setProperties({value:null},!0);else{for(var e=this.text.split(this.delimiterChar),t=[],r=0;e.length>r;r++){var s=this.getValueByText(e[r]);d(s)?this.allowCustomValue&&t.push(e[r]):t.push(s)}if(t&&t.length){var a=this.allowObjectBinding?this.getDataByValue(t):t;this.setProperties({value:a},!0)}}},i.prototype.renderList=function(e){!e&&this.allowCustomValue&&this.list&&(this.list.textContent===this.noRecordsTemplate||this.list.querySelector(".e-ul")&&this.list.querySelector(".e-ul").childElementCount===0)&&(e=!0),n.prototype.render.call(this,null,e),this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.unwireListEvents(),this.wireListEvents()},i.prototype.initialValueUpdate=function(e,t){var r=this;if(this.list){var s=void 0,a=void 0,o;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!d(this.value))for(var l=0;!d(this.value[l]);l++){o=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",this.value[l]):this.value[l],a=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",o);var h=!1;if(this.enableVirtualization){if(s=null,e!=null&&e.length>0){for(var c=0;c<e.length;c++)if(this.isPrimitiveData&&e[c]===o||!this.isPrimitiveData&&V(this.fields.value?this.fields.value:"value",e[c])===o){s=this.isPrimitiveData?e[c]:V(this.fields.text,e[c]),this.enableVirtualization&&(d(this.selectedListData)?this.selectedListData=[e[c]]:(this.allowObjectBinding&&!this.isObjectInArray(e[c],this.selectedListData)||!this.allowObjectBinding)&&(Array.isArray(this.selectedListData)?this.selectedListData.push(e[c]):this.selectedListData=[this.selectedListData,e[c]]));break}}d(s)&&this.allowCustomValue&&(!(this.dataSource instanceof K)||this.dataSource instanceof K&&t)?(s=this.getTextByValue(o),h=!0):d(s)&&!this.allowCustomValue&&(!(this.dataSource instanceof K)||this.dataSource instanceof K&&t)&&(this.value.splice(l,1),l-=1)}else s=this.getTextByValue(o);if(a&&a.getAttribute("aria-selected")!=="true"||a&&a.getAttribute("aria-selected")==="true"&&this.hideSelectedItem&&(this.mode==="Box"||this.mode==="Default")||this.enableVirtualization&&o!=null&&s!=null&&!h){var u=[],p=this.isDynamicRemoteVirtualData&&s!=null&&s!==""&&l===0?s:this.text!=null&&this.text!==""&&!this.text.includes(s)?this.text+this.delimiterChar+s:s;u.push(p),this.setProperties({text:u.toString()},!0),this.addChip(s,o),this.addListSelection(a)}else if(!this.enableVirtualization&&o&&this.allowCustomValue||this.enableVirtualization&&o&&this.allowCustomValue&&(!(this.dataSource instanceof K)||this.dataSource instanceof K&&t)){var f=this.listData.length,v={};ze(this.fields.text,o,v),ze(this.fields.value,o,v);var m=this.popupWrapper.querySelector("."+Y.noData);if(v&&this.allowObjectBinding&&this.allowCustomValue&&this.value.length>0&&typeof this.value[0]=="object"){var g=this.value,y=g.filter(function(w){return w[r.fields.value]===o});y.length>0&&(v=y[0])}this.enableVirtualization||this.addItem(v,f),this.enableVirtualization&&(this.virtualCustomSelectData&&this.virtualCustomSelectData.length>=0?this.virtualCustomSelectData.push(v):this.virtualCustomSelectData=[v]),a=a||this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",o),this.popupWrapper.contains(m)&&(this.list.setAttribute("style",m.getAttribute("style")),this.popupWrapper.replaceChild(this.list,m),this.wireListEvents());var u=[],p=this.text!=null&&this.text!==""?this.text+this.delimiterChar+s:s;u.push(p),this.setProperties({text:u.toString()},!0),this.addChip(s,o),this.addListSelection(a)}}this.mode==="CheckBox"?(this.updateDelimView(),this.changeOnBlur&&this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,null,t),this.mode==="CheckBox"&&this.showSelectAll&&(d(this.value)||!this.value.length)&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"uncheck"}),this.mode==="Box"||this.mode==="Default"&&this.inputFocus?this.chipCollectionWrapper.style.display="":(this.mode==="Delimiter"||this.mode==="CheckBox")&&this.showDelimWrapper()}},i.prototype.updateActionCompleteData=function(e,t){this.value&&(!this.allowObjectBinding&&this.value.indexOf(e.getAttribute("data-value"))>-1||this.allowObjectBinding&&this.isObjectInArray(this.getDataByValue(e.getAttribute("data-value")),this.value))&&(this.mainList=this.ulElement,this.hideSelectedItem&&T([e],xe))},i.prototype.updateAddItemList=function(e,t){this.popupObj&&this.popupObj.element&&this.popupObj.element.querySelector("."+Y.noData)&&e?(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"),ve(this.popupWrapper.querySelector(".e-content")),this.popupObj=null,this.renderPopup()):this.allowCustomValue&&(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"))},i.prototype.updateDataList=function(){if(this.mainList&&this.ulElement&&!(this.isFiltered||this.isFilterAction||this.targetElement().trim())){var e=this.mainList.childElementCount<this.ulElement.childElementCount,t=this.ulElement.childElementCount>0&&this.ulElement.children[0].childElementCount>0&&this.mainList.children[0]&&this.mainList.children[0].childElementCount<this.ulElement.children[0].childElementCount,r=this.itemTemplate&&this.ulElement.childElementCount>0&&!(this.ulElement.childElementCount<this.mainList.childElementCount)&&(this.ulElement.children[0].childElementCount>0||this.fields.groupBy&&this.ulElement.children[1]&&this.ulElement.children[1].childElementCount>0);(e||t||r)&&(this.mainList=this.ulElement)}},i.prototype.isValidLI=function(e){return e&&!e.classList.contains(Y.disabled)&&!e.classList.contains(Y.group)&&e.classList.contains(Y.li)},i.prototype.updateListSelection=function(e,t,r){var s=e.getAttribute("data-value"),a=this.allowObjectBinding?this.getDataByValue(this.getFormattedValue(s)):this.getFormattedValue(s);this.allowCustomValue&&(s!=="false"&&a===!1||!d(a)&&a.toString()==="NaN")&&(a=s),this.removeHover(),!this.value||!this.allowObjectBinding&&this.value.indexOf(a)===-1||this.allowObjectBinding&&this.indexOfObjectInArray(a,this.value)===-1?this.dispatchSelect(a,t,e,e.getAttribute("aria-selected")==="true",r):this.removeValue(a,t,r),this.checkAndScrollParent()},i.prototype.updateListSelectEventCallback=function(e,t,r,s){var a=this;e=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",e):e;var o=s||this.getTextByValue(e);if((this.allowCustomValue||this.allowFiltering)&&!this.findListElement(this.mainList,"li","data-value",e)&&(!this.enableVirtualization||this.enableVirtualization&&this.virtualCustomData)){var l=t&&t.cloneNode(!0),h=this.fields.value?this.fields.value:"value";this.allowCustomValue&&this.mainData.length&&typeof V(h,this.mainData[0])=="number"&&(e=isNaN(parseFloat(e.toString()))?e:parseFloat(e.toString()));var c=this.getDataByValue(e),u={newData:c,cancel:!1};this.trigger("customValueSelection",u,function(p){p.cancel||(a.enableVirtualization&&a.virtualCustomData?(a.virtualCustomSelectData&&a.virtualCustomSelectData.length>=0?a.virtualCustomSelectData.push(c):a.virtualCustomSelectData=[c],a.remoteCustomValue=!1,a.addValue(e,o,r)):(oe([l],a.mainList),a.mainData.push(c),a.remoteCustomValue=!1,a.addValue(e,o,r)))})}else this.remoteCustomValue=!1,this.addValue(e,o,r)},i.prototype.removeListSelection=function(){var e=this.hideSelectedItem?xe:Y.selected,t=this.list.querySelectorAll("."+e),r=t.length;if(t&&t.length)for(I(t,e);r>0;)t[r-1].setAttribute("aria-selected","false"),this.mode==="CheckBox"&&t&&t.length>r-1&&I([t[r-1].firstElementChild.lastElementChild],"e-check"),r--;if(!d(this.mainList)){var s=this.mainList.querySelectorAll("."+e),a=s.length;if(s&&s.length)for(I(s,e);a>0;)s[a-1].setAttribute("aria-selected","false"),this.mode==="CheckBox"&&(t&&t.length>a-1&&I([t[a-1].firstElementChild.lastElementChild],"e-check"),I([s[a-1].firstElementChild.lastElementChild],"e-check")),a--}},i.prototype.removeHover=function(){var e=this.list.querySelectorAll("."+Y.hover);e&&e.length&&I(e,Y.hover)},i.prototype.removeFocus=function(){if(this.list&&this.mainList){var e=this.list.querySelectorAll("."+Y.focus),t=this.mainList.querySelectorAll("."+Y.focus);e&&e.length&&(I(e,Y.focus),I(t,Y.focus))}},i.prototype.addListHover=function(e){this.enabled&&this.isValidLI(e)?(this.removeHover(),T([e],Y.hover)):e!==null&&e.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&this.mode==="CheckBox"&&!d(this.fields.groupBy)&&(this.removeHover(),T([e],Y.hover))},i.prototype.addListFocus=function(e){this.enabled&&(this.isValidLI(e)||this.fields.disabled&&this.isDisabledElement(e))?(this.removeFocus(),T([e],Y.focus),this.updateAriaActiveDescendant()):this.enableGroupCheckBox&&this.mode==="CheckBox"&&!d(this.fields.groupBy)&&(T([e],Y.focus),this.updateAriaActiveDescendant())},i.prototype.addListSelection=function(e,t){var r=this.hideSelectedItem?xe:Y.selected;if(this.isValidLI(e)&&!e.classList.contains(Y.hover)){if(T([e],r),this.updateMainList(!1,e.getAttribute("data-value"),t),e.setAttribute("aria-selected","true"),this.mode==="CheckBox"&&e.classList.contains("e-active")){var s=e.getElementsByClassName("e-check").length;s===0&&this.notify("updatelist",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:e,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:e,e:this}),this.chipCollectionWrapper&&this.removeChipSelection(),this.selectedElementID=e.id}},i.prototype.updateDelimeter=function(e,t,r){this.updateData(e,t,r)},i.prototype.onMouseClick=function(e){var t=this;if(!this.isClearAllItem){this.keyCode=null,this.scrollFocusStatus=!1,this.keyboardEvent=null;var r=e.target,s=M(r,"."+Y.li);if(this.enableVirtualization&&s&&s.classList.contains("e-virtual-list"))return;var a=M(r,"."+Y.group);if(a&&this.enableGroupCheckBox&&this.mode==="CheckBox"&&this.fields.groupBy)r=r.classList.contains("e-list-group-item")?r.firstElementChild.lastElementChild:e.target,r.classList.contains("e-check")?(this.selectAllItem(!1,e),r.classList.remove("e-check"),r.classList.remove("e-stop"),M(r,".e-list-group-item").classList.remove("e-active"),r.setAttribute("aria-selected","false")):(this.selectAllItem(!0,e),r.classList.remove("e-stop"),r.classList.add("e-check"),M(r,".e-list-group-item").classList.add("e-active"),r.setAttribute("aria-selected","true")),this.refreshSelection(),this.checkSelectAll();else{if(this.isValidLI(s)){var o=this.value&&this.value.length?this.value.length:0;s.classList.contains("e-active")&&(o=o-1),o<this.maximumSelectionLength&&(this.updateListSelection(s,e),this.checkPlaceholderSize(),this.addListFocus(s),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?this.mode!=="CheckBox"&&(this.focusAtLastListItem(s.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),this.mode==="CheckBox"?(this.updateDelimView(),this.value&&this.value.length>50?setTimeout(function(){t.updateDelimeter(t.delimiterChar,e)},0):this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.checkSelectAll(),this.refreshPopup(),this.allowResize&&this.setResize(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup(e):e.preventDefault();var l=this.targetElement().trim()!=="";this.makeTextBoxEmpty(),this.findGroupStart(r),this.mode!=="CheckBox"&&this.refreshListItems(d(s)?null:s.textContent,l)}else e.preventDefault();if(this.enableVirtualization&&this.hideSelectedItem){var h=this.list.querySelectorAll("li."+Y.li+":not(."+xe+"):not(.e-reorder-hide):not(.e-virtual-list)");if(h.length){var c=this.virtualListHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;if(h.length<c+2){var u=this.getForQuery(this.value).clone();if(u=u.skip(this.virtualItemStartIndex),this.resetList(this.dataSource,this.fields,u),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+Y.li),this.virtualItemCount=this.itemCount,this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.list.querySelector(".e-virtual-ddl"))this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else{var p=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});p.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(p)}this.list.querySelector(".e-virtual-ddl-content")&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())}}}this.refreshPlaceHolder(),this.deselectHeader()}}},i.prototype.findGroupStart=function(e){if(this.enableGroupCheckBox&&this.mode==="CheckBox"&&!d(this.fields.groupBy)){var t=0,r=0,s=0,a=void 0;if(this.itemTemplate&&!e.getElementsByClassName("e-frame").length)for(;!e.getElementsByClassName("e-frame").length;)e=e.parentElement;for(e.classList.contains("e-frame")&&(e=e.parentElement.parentElement),a=this.findGroupAttrtibutes(e,r,s,t,0),a=this.findGroupAttrtibutes(e,a[0],a[1],a[2],1);!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),e=e.previousElementSibling,e!=null););this.updateCheckBox(e,a[0],a[1],a[2])}},i.prototype.findGroupAttrtibutes=function(e,t,r,s,a){for(;!e.classList.contains("e-list-group-item")&&(this.fields.disabled&&this.isDisabledElement(e)||(e.classList.contains("e-list-icon")&&(e=e.parentElement),e.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&e.classList.contains("e-list-item")?t++:e.classList.contains("e-list-item")&&r++,s++),e=a?e.nextElementSibling:e.previousElementSibling,e!=null););return[t,r,s]},i.prototype.updateCheckBox=function(e,t,r,s){if(!(e===null||!d(this.fields.disabled)&&s===0)){var a=e.getElementsByClassName("e-frame")[0];s===t?(a.classList.remove("e-stop"),a.classList.add("e-check"),M(a,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","true")):s===r?(a.classList.remove("e-check"),a.classList.remove("e-stop"),M(a,".e-list-group-item").classList.remove("e-active"),e.setAttribute("aria-selected","false")):this.maximumSelectionLength===t-1?(a.classList.remove("e-stop"),e.setAttribute("aria-selected","true"),M(a,".e-list-group-item").classList.add("e-active"),a.classList.add("e-check")):(a.classList.remove("e-check"),a.classList.add("e-stop"),M(a,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","false"))}},i.prototype.disableGroupHeader=function(){var e=this.list.querySelectorAll("li.e-list-group-item");if(e)for(var t=0;t<e.length;t++){for(var r=!0,s=e[t].nextElementSibling;!s.classList.contains("e-list-group-item");){if(!this.isDisabledElement(s)){r=!1;break}if(s=s.nextElementSibling,s==null)break}r&&this.disableListItem(e[t])}},i.prototype.deselectHeader=function(){var e=this.value&&this.value.length?this.value.length:0,t=this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");e<this.maximumSelectionLength&&I(t,"e-disable"),e===this.maximumSelectionLength&&T(t,"e-disable")},i.prototype.onMouseOver=function(e){var t=M(e.target,"."+Y.li);t===null&&this.mode==="CheckBox"&&!d(this.fields.groupBy)&&this.enableGroupCheckBox&&(t=M(e.target,"."+Y.group)),this.addListHover(t)},i.prototype.onMouseLeave=function(){this.removeHover()},i.prototype.onListMouseDown=function(e){e.preventDefault(),this.scrollFocusStatus=!0},i.prototype.onDocumentClick=function(e){if(this.mode!=="CheckBox"){var t=e.target;!(!d(this.popupObj)&&M(t,'[id="'+this.popupObj.element.id+'"]'))&&!this.overAllWrapper.contains(e.target)?this.scrollFocusStatus=!1:this.scrollFocusStatus=(H.isIE||H.info.name==="edge")&&document.activeElement===this.inputElement}},i.prototype.wireListEvents=function(){d(this.list)||(C.add(document,"mousedown",this.onDocumentClick,this),C.add(this.list,"mousedown",this.onListMouseDown,this),C.add(this.list,"mouseup",this.onMouseClick,this),C.add(this.list,"mouseover",this.onMouseOver,this),C.add(this.list,"mouseout",this.onMouseLeave,this))},i.prototype.unwireListEvents=function(){C.remove(document,"mousedown",this.onDocumentClick),this.list&&(C.remove(this.list,"mousedown",this.onListMouseDown),C.remove(this.list,"mouseup",this.onMouseClick),C.remove(this.list,"mouseover",this.onMouseOver),C.remove(this.list,"mouseout",this.onMouseLeave))},i.prototype.hideOverAllClear=function(){(!this.value||!this.value.length||this.inputElement.value==="")&&(this.overAllClear.style.display="none")},i.prototype.showOverAllClear=function(){(this.value&&this.value.length||this.inputElement.value!=="")&&this.showClearButton&&this.readonly!==!0?this.overAllClear.style.display="":this.overAllClear.style.display="none"},i.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},i.prototype.focusOut=function(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()},i.prototype.showSpinner=function(){if(d(this.spinnerElement)){var e=this.filterParent&&this.filterParent.querySelector(".e-clear-icon.e-icons");this.overAllClear.style.display!=="none"||e?this.spinnerElement=e||this.overAllClear:(this.spinnerElement=this.createElement("span",{className:gf+" "+Ef}),this.componentWrapper.appendChild(this.spinnerElement)),ad({target:this.spinnerElement,width:H.isDevice?"16px":"14px"},this.createElement),T([this.spinnerElement],Sf),od(this.spinnerElement)}},i.prototype.hideSpinner=function(){d(this.spinnerElement)||(ld(this.spinnerElement),I([this.spinnerElement],Sf),this.spinnerElement.classList.contains(Ef)?Q(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},i.prototype.updateWrapperText=function(e,t){this.valueTemplate||!this.enableHtmlSanitizer?e.innerHTML=this.encodeHtmlEntities(t):e.innerText=t},i.prototype.updateDelimView=function(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),d(this.viewWrapper)||(this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove(Lo)),this.value&&this.value.length){var e="",t=void 0,r=void 0,s=1,a=void 0,o=void 0,l=0,h=void 0;this.enableVirtualization||this.updateWrapperText(this.viewWrapper,e);var c={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},u=new hi(this.getLocaleName(),c,this.locale);u.getConstant("actionFailureTemplate")===""&&(u=new hi("dropdowns",c,this.locale)),u.getConstant("noRecordsTemplate")===""&&(u=new hi("dropdowns",c,this.locale));var p=u.getConstant("overflowCountTemplate"),f=u.getConstant("totalCountTemplate"),v=this.createElement("span",{className:mf}),m=p.replace("${count}",this.value.length.toString());v.innerText=m,this.viewWrapper.appendChild(v),this.renderReactTemplates();var g=v.offsetWidth;if(ve(v),this.showDropDownIcon&&(l=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),this.checkClearIconWidth(),!d(this.value)&&(this.allowCustomValue||this.listData&&this.listData.length>0))for(var y=0;!d(this.value[y]);y++){var b=this.text&&this.text.split(this.delimiterChar);if(this.enableVirtualization?b&&(e+=y===0?"":this.delimiterChar+" ",t=b[y],e+=t,t=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,e)):(e+=y===0?"":this.delimiterChar+" ",t=this.getOverflowVal(y),e+=t,t=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,e)),a=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10)+parseInt(window.getComputedStyle(this.viewWrapper).paddingLeft,10),h=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),a+l+this.clearIconWidth>h){for(r!==void 0&&r!==""&&(t=r,y=s+1),this.updateWrapperText(this.viewWrapper,t),o=this.value.length-y,a=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10)+parseInt(window.getComputedStyle(this.viewWrapper).paddingLeft,10);a+g+l+this.clearIconWidth>h&&a!==0&&this.viewWrapper.innerHTML!=="";){var E=[];this.viewWrapper.innerHTML=E.join(this.delimiterChar),o=this.value.length,a=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10)+parseInt(window.getComputedStyle(this.viewWrapper).paddingLeft,10)}break}else a+g+l+this.clearIconWidth<=h?(r=e,s=y):y===0&&(r="",s=-1)}if(o>0){var w=h-l-this.clearIconWidth;this.viewWrapper.appendChild(this.updateRemainTemplate(v,this.viewWrapper,o,p,f,w)),this.updateRemainWidth(this.viewWrapper,w),this.updateRemainingText(v,l,o,p,f)}}else d(this.viewWrapper)||(this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none")},i.prototype.checkClearIconWidth=function(){this.showClearButton&&(this.clearIconWidth=parseInt(window.getComputedStyle(this.overAllClear).width,10)||this.overAllClear.offsetWidth)},i.prototype.updateRemainWidth=function(e,t){e.classList.contains(Lo)&&t<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingRight,10)&&(e.style.width=t+"px")},i.prototype.updateRemainTemplate=function(e,t,r,s,a,o){t.firstChild&&t.firstChild.nodeType===3&&t.firstChild.nodeValue===""&&t.removeChild(t.firstChild),e.innerHTML="";var l=s.replace("${count}",r.toString()),h=a.replace("${count}",r.toString());return e.innerText=t.firstChild&&t.firstChild.nodeType===3?l:h,t.firstChild&&t.firstChild.nodeType===3?t.classList.remove(Lo):(t.classList.add(Lo),this.updateRemainWidth(t,o)),e},i.prototype.updateRemainingText=function(e,t,r,s,a){var o=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),l=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(l+t>=o&&l!==0&&this.viewWrapper.firstChild&&this.viewWrapper.firstChild.nodeType===3){for(;l+t>o&&l!==0&&this.viewWrapper.firstChild&&this.viewWrapper.firstChild.nodeType===3;){var h=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);h.pop(),this.viewWrapper.firstChild.nodeValue=h.join(this.delimiterChar),this.viewWrapper.firstChild.nodeValue===""&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),r++,l=this.viewWrapper.offsetWidth}var c=o-t;this.updateRemainTemplate(e,this.viewWrapper,r,s,a,c)}},i.prototype.getOverflowVal=function(e){var t;if(this.mainData&&this.mainData.length){var r=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",this.value[e]):this.value[e];if(this.mode==="CheckBox"){var s=this.listData;this.listData=this.mainData,t=this.getTextByValue(r),this.listData=s}else t=this.getTextByValue(r)}else t=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",this.value[e]):this.value[e];return t},i.prototype.unWireEvent=function(){if(d(this.componentWrapper)||C.remove(this.componentWrapper,"mousedown",this.wrapperClick),C.remove(window,"resize",this.windowResize),!d(this.inputElement)){C.remove(this.inputElement,"focus",this.focusInHandler),C.remove(this.inputElement,"keydown",this.onKeyDown),this.mode!=="CheckBox"&&C.remove(this.inputElement,"input",this.onInput),C.remove(this.inputElement,"keyup",this.keyUp);var e=M(this.inputElement,"form");e&&C.remove(e,"reset",this.resetValueHandler),C.remove(this.inputElement,"blur",this.onBlurHandler)}d(this.componentWrapper)||(C.remove(this.componentWrapper,"mouseover",this.mouseIn),C.remove(this.componentWrapper,"mouseout",this.mouseOut)),d(this.overAllClear)||C.remove(this.overAllClear,"mousedown",this.clearAll),d(this.inputElement)||C.remove(this.inputElement,"paste",this.pasteHandler)},i.prototype.resizingWireEvent=function(){C.add(document,"mousemove",this.resizePopup,this),C.add(document,"mouseup",this.stopResizing,this),C.add(document,"touchmove",this.resizePopup,this),C.add(document,"touchend",this.stopResizing,this)},i.prototype.resizingUnWireEvent=function(){C.remove(document,"mousemove",this.resizePopup),C.remove(document,"mouseup",this.stopResizing),C.remove(document,"touchmove",this.resizePopup),C.remove(document,"touchend",this.stopResizing)},i.prototype.selectAllItem=function(e,t,r){var s;if(d(this.list)||(s=this.list.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide):not(.e-disabled):not(.e-virtual-list)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide):not(.e-disabled):not(.e-virtual-list)')),this.value&&this.value.length&&t&&t.target&&M(t.target,".e-close-hooker")&&this.allowFiltering&&(s=this.mainList.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide):not(.e-disabled):not(.e-virtual-list)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide):not(.e-disabled):not(.e-virtual-list)')),this.enableGroupCheckBox&&this.mode==="CheckBox"&&!d(this.fields.groupBy)){var a=t?this.groupTemplate?M(t.target,".e-list-group-item"):t.target:null;if(a=t&&t.keyCode===32?r:a,a=a&&a.classList.contains("e-frame")?a.parentElement.parentElement:a,a&&a.classList.contains("e-list-group-item")){var o=a.nextElementSibling;if(d(o))return;for(;o.classList.contains("e-list-item");){if(!(this.fields.disabled&&this.isDisabledElement(o)))if(e){if(!o.firstElementChild.lastElementChild.classList.contains("e-check")){var l=this.value&&this.value.length?this.value.length:0;o.classList.contains("e-active")&&(l-=1),l<this.maximumSelectionLength&&this.updateListSelection(o,t)}}else o.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(o,t);if(o=o.nextElementSibling,o==null)break}if(a.classList.contains("e-list-group-item")){var h=this.list.getElementsByClassName("e-item-focus")[0];h&&h.classList.remove("e-item-focus"),e?a.classList.add("e-active"):a.classList.remove("e-active"),a.classList.add("e-item-focus"),this.updateAriaActiveDescendant()}this.textboxValueUpdate(),this.checkPlaceholderSize(),!this.changeOnBlur&&t&&this.updateValueState(t,this.value,this.tempValues)}else this.updateValue(t,s,e)}else this.updateValue(t,s,e);this.addValidInputClass()},i.prototype.virtualSelectionAll=function(e,t,r){var s=this,a=0,o=t.length,l=this.maximumSelectionLength;if(e){this.virtualSelectAll=!0,o=this.virtualSelectAllData&&this.virtualSelectAllData.length!==0?this.virtualSelectAllData.length:o,this.listData=this.virtualSelectAllData;var h=this.createListItems(this.virtualSelectAllData.slice(0,30),this.fields),c=h.querySelectorAll("li"),u=document.createDocumentFragment();c.forEach(function(g){u.appendChild(g.cloneNode(!0))}),t.forEach(function(g){u.appendChild(g.cloneNode(!0))});var p=u.childNodes;if(this.virtualSelectAllData instanceof Array){for(;a<o&&a<=50&&a<l;){if(this.isSelectAllTarget=o===a+1,p[a]){var f=this.allowObjectBinding?this.getDataByValue(p[a].getAttribute("data-value")):this.getFormattedValue(p[a].getAttribute("data-value"));if(!this.allowObjectBinding&&this.value&&this.value.indexOf(f)>=0||this.allowObjectBinding&&this.indexOfObjectInArray(f,this.value)>=0){a++;continue}this.updateListSelection(p[a],r,o-a)}else{var f=V(this.fields.value?this.fields.value:"",this.virtualSelectAllData[a]);if(f=this.allowObjectBinding?this.getDataByValue(f):f,!this.allowObjectBinding&&this.value&&this.value.indexOf(f)>=0||this.allowObjectBinding&&this.indexOfObjectInArray(f,this.value)>=0){a++;continue}this.value&&f!=null&&Array.isArray(this.value)&&(!this.allowObjectBinding&&this.value.indexOf(f)<0||this.allowObjectBinding&&!this.isObjectInArray(f,this.value))&&this.dispatchSelect(f,r,null,!1,o)}a++}o>50?setTimeout(function(){if(s.virtualSelectAllData&&s.virtualSelectAllData.length>0&&s.virtualSelectAllData.map(function(y){if(s.value&&y[s.fields.value]!=null&&Array.isArray(s.value)&&(!s.allowObjectBinding&&s.value.indexOf(y[s.fields.value])<0||s.allowObjectBinding&&!s.isObjectInArray(y[s.fields.value],s.value))){var b=y[s.fields.value],E=y[s.fields.text].toString();s.dispatchSelect(b,r,null,!1,o,y,E)}}),s.updatedataValueItems(r),s.isSelectAllLoop=!1,s.changeOnBlur||(s.updateValueState(r,s.value,s.tempValues),s.isSelectAll=s.isSelectAll?!s.isSelectAll:s.isSelectAll),s.updateHiddenElement(!0),s.popupWrapper&&t[a-1]&&t[a-1].classList.contains("e-item-focus")){var g=document.getElementsByClassName("e-selectall-parent")[0];g&&g.classList.contains("e-item-focus")&&t[a-1].classList.remove("e-item-focus")}s.checkSelectAll()},0):this.virtualSelectAllData&&this.virtualSelectAllData.length>0&&setTimeout(function(){s.value&&s.value.length&&s.viewWrapper&&!s.viewWrapper.querySelector("."+mf)&&s.updatedataValueItems(r)},0)}}else this.virtualSelectAllData&&this.virtualSelectAllData.length>0&&this.virtualSelectAllData.map(function(g){s.virtualSelectAll=!0,s.removeValue(s.value[a],r,s.value.length-a)}),this.updatedataValueItems(r),this.changeOnBlur||(this.updateValueState(r,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),this.updateHiddenElement(),this.setProperties({value:[]},!0),this.selectedListData=[],this.virtualSelectAll=!1,!d(this.viewPortInfo.startIndex)&&!d(this.viewPortInfo.endIndex)&&this.notify("setCurrentViewDataAsync",{component:this.getModuleName(),module:"VirtualScroll"});this.checkSelectAll();var v=this.list.getElementsByClassName("e-virtual-ddl")[0];v&&(v.style=this.GetVirtualTrackHeight()),this.UpdateSkeleton();var m=this.list.getElementsByClassName("e-virtual-ddl-content")[0];m&&(m.style=this.getTransformValues())},i.prototype.updateValue=function(e,t,r){var s=this,a=t.length,o={event:e,items:r?t:[],itemData:r?this.listData:[],isInteracted:!!e,isChecked:r,preventSelectEvent:!1};if(this.trigger("beforeSelectAll",o),t&&t.length||this.enableVirtualization&&!r){var l=0,h=0;if(this.enableGroupCheckBox?h=r?this.maximumSelectionLength-(this.value?this.value.length:0):t.length:h=r?this.maximumSelectionLength-(this.value?this.value.length:0):this.maximumSelectionLength,o.preventSelectEvent){for(var c=0;c<t.length&&c<h;c++){this.removeHover();var u=t[c].getAttribute("data-value"),p=this.getFormattedValue(u);p=this.allowObjectBinding?this.getDataByValue(p):p;var f=this.mainList?this.mainList.querySelectorAll(r?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')[c]:null;r?(this.value=this.value?this.value:[],(!this.allowObjectBinding&&this.value.indexOf(p)<0||this.allowObjectBinding&&!this.isObjectInArray(p,this.value))&&this.setProperties({value:[].concat([],this.value,[p])},!0),this.removeFocus(),this.addListSelection(t[c],f),this.updateChipStatus(),this.checkMaxSelection()):this.removeAllItems(p,e,!1,t[c],f),this.enableGroupCheckBox&&this.findGroupStart(t[c])}if(!r){var v=this.value&&this.value.length?this.value.length:0;if(v<this.maximumSelectionLength){var m=this.list.querySelectorAll("li."+Y.li+":not(.e-active)");I(m,"e-disable")}}var g={event:e,items:r?t:[],itemData:r?this.listData:[],isInteracted:!!e,isChecked:r};this.trigger("selectedAll",g)}else if(this.enableVirtualization)this.virtualSelectAllState=r,this.virtualSelectAll=!0,this.CurrentEvent=e,this.virtualSelectAllData||this.resetList(this.dataSource,this.fields,new Se),this.virtualSelectAllData&&this.virtualSelectionAll(r,t,e);else{for(;l<a&&l<=50&&l<h;)this.isSelectAllTarget=a===l+1,this.updateListSelection(t[l],e,a-l),this.enableGroupCheckBox&&this.findGroupStart(t[l]),l++;a>50&&setTimeout(function(){for(;l<a&&l<h;)s.isSelectAllTarget=a===l+1,s.updateListSelection(t[l],e,a-l),s.enableGroupCheckBox&&s.findGroupStart(t[l]),l++;if(s.updatedataValueItems(e),s.changeOnBlur||(s.updateValueState(e,s.value,s.tempValues),s.isSelectAll=s.isSelectAll?!s.isSelectAll:s.isSelectAll),s.updateHiddenElement(),s.popupWrapper&&t[l-1].classList.contains("e-item-focus")){var y=document.getElementsByClassName("e-selectall-parent")[0];y&&y.classList.contains("e-item-focus")&&t[l-1].classList.remove("e-item-focus")}},0)}}this.updatedataValueItems(e),this.checkPlaceholderSize(),a<=50&&!o.preventSelectEvent&&(this.changeOnBlur||(this.updateValueState(e,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),(this.enableVirtualization&&this.value&&this.value.length>0||!this.enableVirtualization)&&this.updateHiddenElement())},i.prototype.updateHiddenElement=function(e){var t=this,r="",s="",a="",o=[];this.mode==="CheckBox"&&(this.value.map(function(l,h){r+='<option selected value ="'+l+'">'+h+"</option>",e||(t.listData?a=t.getTextByValue(l):a=l,s+=a+t.delimiterChar+" ",o.push(a))}),this.hiddenElement.innerHTML=r,e||(this.updateWrapperText(this.delimiterWrapper,s),this.setProperties({text:o.toString()},!0)),this.delimiterWrapper.setAttribute("id",Nt("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.refreshInputHight(),this.refreshPlaceHolder())},i.prototype.updatedataValueItems=function(e){this.deselectHeader(),this.textboxValueUpdate(e)},i.prototype.textboxValueUpdate=function(e){var t=e&&e.target&&(M(e.target,".e-selectall-parent")||M(e.target,".e-close-hooker"));this.mode!=="Box"&&!this.isPopupOpen()&&!(this.mode==="CheckBox"&&(this.isSelectAll||t))?this.updateDelimView():this.searchWrapper.classList.remove(No),this.mode==="CheckBox"?(this.updateDelimView(),(!(t||this.isSelectAll)&&this.isSelectAllTarget||this.isSelectAll&&this.isSelectAllTarget)&&this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.refreshPlaceHolder()},i.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},i.prototype.updateDataSource=function(e){this.checkAndResetCache(),d(this.list)?this.renderPopup():this.resetList(this.dataSource),this.value&&this.value.length&&(this.setProperties({value:this.value}),this.refreshSelection())},i.prototype.onLoadSelect=function(){this.setDynValue=!0,this.renderPopup()},i.prototype.selectAllItems=function(e,t){var r=this;if(d(this.list))this.selectAllAction=function(){if(r.mode==="CheckBox"&&r.showSelectAll){var a={module:"CheckBoxSelection",enable:r.mode==="CheckBox",value:e?"check":"uncheck"};r.notify("checkSelectAll",a)}r.selectAllItem(e,t),r.selectAllAction=null},n.prototype.render.call(this);else{if(this.selectAllAction=null,this.mode==="CheckBox"&&this.showSelectAll){var s={value:e?"check":"uncheck",enable:this.mode==="CheckBox",module:"CheckBoxSelection"};this.notify("checkSelectAll",s)}this.selectAllItem(e,t)}(!(this.dataSource instanceof K)||this.dataSource instanceof K&&this.virtualSelectAllData)&&(this.virtualSelectAll=!1)},i.prototype.getPersistData=function(){return this.addOnPersist(["value"])},i.prototype.onPropertyChanged=function(e,t){(e.dataSource&&!d(Object.keys(e.dataSource))||e.query&&!d(Object.keys(e.query)))&&(this.mainList=null,this.mainData=null,this.isFirstClick=!1,this.isDynamicDataChange=!0),this.getModuleName()==="multiselect"&&(this.isFilterAction=!1,this.setUpdateInitial(["fields","query","dataSource"],e));for(var r=0,s=Object.keys(e);r<s.length;r++){var a=s[r];switch(a){case"query":case"dataSource":this.mode==="CheckBox"&&this.showSelectAll&&(d(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"text":this.fields.disabled&&(this.text=this.text&&!this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?this.text:null),this.updateVal(this.value,this.value,"text");break;case"value":if(this.fields.disabled&&this.removeDisabledItemsValue(this.value),this.updateVal(this.value,t.value,"value"),this.addValidInputClass(),!this.closePopupOnSelect&&this.isPopupOpen()&&this.refreshPopup(),this.isPopupOpen()&&this.mode==="CheckBox"&&this.list&&this.list.querySelector(".e-active.e-disable")){var o=this.list.querySelectorAll("li."+Y.li+".e-active.e-disable");I(o,"e-disable")}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange;break;case"width":this.setWidth(e.width),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:e.filterBarPlaceholder});break;case"delimiterChar":this.mode!=="Box"&&this.updateDelimView(),this.updateData(e.delimiterChar);break;case"cssClass":this.updateOldPropCssClass(t.cssClass),this.updateCssClass(),this.calculateWidth();break;case"enableRtl":this.enableRTL(e.enableRtl),n.prototype.onPropertyChanged.call(this,e,t);break;case"allowResize":if(this.allowResize=e.allowResize,!this.allowResize&&this.popupObj){var l=parseInt(this.popupHeight,10);this.popupHeight!=="auto"?(this.list.style.maxHeight=ce(l),this.popupWrapper.style.height=ce(this.popupHeight),this.popupWrapper.style.maxHeight=ce(this.popupHeight)):this.list.style.maxHeight=ce(this.popupHeight)}break;case"readonly":this.updateReadonly(e.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(e.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType(),this.addValidInputClass(),this.element.querySelector(".e-multiselect .e-float-text-content")===null&&X.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),!d(this.overAllWrapper)&&!d(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never")&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon");break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":if(this.popupObj){var l=parseInt(this.popupHeight,10);this.popupHeight!=="auto"?(this.list.style.maxHeight=ce(l),this.popupWrapper.style.maxHeight=ce(this.popupHeight)):this.list.style.maxHeight=ce(this.popupHeight)}break;case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":this.mode==="CheckBox"&&this.popupObj&&this.reInitializePoup(),this.updateSelectElementData(this.allowFiltering);break;case"fields":d(this.fields.groupBy)&&this.removeScrollEvent();break;default:{var h=this.getPropObject(a,e,t);n.prototype.onPropertyChanged.call(this,h.newProperty,h.oldProperty)}break}}},i.prototype.reInitializePoup=function(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()},i.prototype.totalItemsCount=function(){var e;if(this.dataSource instanceof K?this.remoteDataCount>=0?e=this.totalItemCount=this.dataCount=this.remoteDataCount:this.resetList(this.dataSource):e=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.mode==="CheckBox")this.totalItemCount=e!==0?e:this.totalItemCount;else if(this.hideSelectedItem){if(this.totalItemCount=e!==0&&this.value?e-this.value.length:this.totalItemCount,this.allowCustomValue&&this.virtualCustomSelectData&&this.virtualCustomSelectData.length>0)for(var t=0;t<this.virtualCustomSelectData.length;t++)for(var r=0;r<this.value.length;r++){var s=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",this.value[r]):this.value[r],a=V(this.fields.value?this.fields.value:"",this.virtualCustomSelectData[t]);s===a&&(this.totalItemCount+=1)}}else this.totalItemCount=e!==0?e:this.totalItemCount,this.allowCustomValue&&this.virtualCustomSelectData&&this.virtualCustomSelectData.length>0&&(this.totalItemCount+=this.virtualCustomSelectData.length)},i.prototype.presentItemValue=function(e){for(var t=[],r=0;r<this.value.length;r++){var s=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",this.value[r]):this.value[r],a=this.findListElement(this.allowFiltering&&!d(this.mainList)?this.mainList:e,"li","data-value",s);if(!a){var o=this.allowObjectBinding?this.getDataByValue(this.value[r]):this.value[r];t.push(o)}}return t},i.prototype.addNonPresentItems=function(e,t,r,s){var a=this;this.dataSource.executeQuery(this.getForQuery(e)).then(function(o){o.result.length>0&&a.addItem(o.result,r.length),a.updateActionList(t,r,s)})},i.prototype.updateVal=function(e,t,r){var s=this;if(!this.list)this.onLoadSelect(),this.enableVirtualization&&(this.setProperties({text:""},!0),this.selectedListData=[],this.checkInitialValue());else if(this.dataSource instanceof K&&(!this.listData||!(this.mainList&&this.mainData)))this.onLoadSelect();else{var a=[];!d(this.value)&&!this.allowCustomValue&&(a=this.presentItemValue(this.ulElement));var o=a.some(function(f){return f!==null});if(r==="value"&&a.length>0&&this.dataSource instanceof K&&!d(this.value)&&this.listData!=null&&(!this.enableVirtualization||this.enableVirtualization&&this.valueTemplate)&&o)this.mainData=null,this.setDynValue=!0,this.isaddNonPresentItems=!0,this.addNonPresentItems(a,this.ulElement,this.listData),this.isaddNonPresentItems=!1;else{if(this.selectedListData=[],r==="text"&&(this.initialTextUpdate(),e=this.value),(d(this.value)||this.value.length===0)&&(this.tempValues=t),this.allowCustomValue&&(this.mode==="Default"||this.mode==="Box")&&this.isReact&&this.inputFocus&&this.isPopupOpen()&&this.mainData!==this.listData){var l=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(l,this.mainData)}if(!this.enableVirtualization)this.initialValueUpdate();else if(this.enableVirtualization&&!(this.dataSource instanceof K))this.initialValueUpdate(this.dataSource,!0);else if(!this.isInitRemoteVirtualData)if(this.allowObjectBinding&&!o&&this.value&&this.value.length){for(var h=this.isPrimitiveData?"":this.fields.value,c=void 0,u=0;u<this.value.length;u++){var p=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",this.value[u]):this.value[u];u===0?c=new ut(h,"equal",p):c=c.or(h,"equal",p)}this.dataSource instanceof K&&this.dataSource.executeQuery(new Se().where(c)).then(function(f){if(f.result.length>0){var v=f.result;s.isDynamicRemoteVirtualData=!0,setTimeout(function(){s.initialValueUpdate(v,!0),s.isDynamicRemoteVirtualData=!1,(!s.inputFocus||s.inputFocus&&s.mode!=="Default")&&s.initialUpdate()},100)}})}else this.isDynamicRemoteVirtualData=!0,this.initialValueUpdate(this.listData,!0),this.isDynamicRemoteVirtualData=!1,this.initialUpdate();this.mode!=="Box"&&!this.inputFocus&&this.updateDelimView(),this.inputFocus||this.refreshInputHight(),this.refreshPlaceHolder(),this.mode!=="CheckBox"&&this.changeOnBlur&&this.updateValueState(null,e,t),this.checkPlaceholderSize()}}this.changeOnBlur||this.updateValueState(null,e,t)},i.prototype.addItem=function(e,t){n.prototype.addItem.call(this,e,t)},i.prototype.hidePopup=function(e){var t=this,r=100;if(this.isPopupOpen()){var s={name:"FadeOut",duration:100,delay:r};this.customFilterQuery=null;var a={popup:this.popupObj,cancel:!1,animation:s,event:e||null};this.trigger("close",a,function(o){if(!o.cancel){t.fields.groupBy&&t.mode!=="CheckBox"&&t.fixedHeaderElement&&(ve(t.fixedHeaderElement),t.fixedHeaderElement=null),t.beforePopupOpen=!1,t.overAllWrapper.classList.remove(wf);var l=t.mode==="CheckBox"?t.targetElement():null;if(t.popupObj.hide(new wi(o.animation)),J(t.inputElement,{"aria-expanded":"false"}),t.inputElement.removeAttribute("aria-owns"),t.inputElement.removeAttribute("aria-activedescendant"),t.allowFiltering&&t.notify("inputFocus",{module:"CheckBoxSelection",enable:t.mode==="CheckBox",value:"clear"}),t.popupObj.hide(),I([document.body,t.popupObj.element],"e-popup-full-page"),C.remove(t.list,"keydown",t.onKeyDown),t.mode==="CheckBox"&&t.showSelectAll&&C.remove(t.popupObj.element,"click",t.clickHandler),t.list&&t.list.parentElement&&t.allowResize){t.resizer&&t.list.parentElement.contains(t.resizer)&&t.list.parentElement.removeChild(t.resizer),t.list.parentElement.classList.contains("e-resize")&&t.list.parentElement.classList.remove("e-resize"),t.list.parentElement.style.boxSizing="",t.list.parentElement.style.paddingBottom="";var h=parseInt(t.popupHeight,10);t.list.style.maxHeight=ce(h),t.popupHeight.toString().toLowerCase()!=="auto"&&t.initialPopupHeight>=parseInt(t.popupHeight.toString(),10)-2&&(t.list.parentElement.style.height=ce(t.popupHeight)),t.list.parentElement.style.maxHeight=ce(t.popupHeight)}t.resizer&&(C.remove(t.resizer,"mousedown",t.startResizing),t.resizer.remove()),t.enableVirtualization&&t.mode==="CheckBox"&&t.value&&t.value.length>0&&t.enableSelectionOrder&&(t.viewPortInfo.startIndex=t.virtualItemStartIndex=0,t.viewPortInfo.endIndex=t.virtualItemEndIndex=t.viewPortInfo.startIndex>0?t.viewPortInfo.endIndex:t.itemCount,t.virtualListInfo=t.viewPortInfo,t.previousStartIndex=0,t.previousEndIndex=t.itemCount);var c=void 0;t.dataSource instanceof K?t.remoteDataCount>=0?t.totalItemCount=t.dataCount=t.remoteDataCount:t.resetList(t.dataSource):c=t.dataSource&&t.dataSource.length?t.dataSource.length:0,t.enableVirtualization&&(t.allowFiltering||t.allowCustomValue)&&(t.targetElement()||l)&&t.totalItemCount!==c&&(t.checkAndResetCache(),t.updateInitialData()),t.virtualCustomData&&t.viewPortInfo&&t.viewPortInfo.startIndex===0&&t.viewPortInfo.endIndex===t.itemCount&&t.renderItems(t.mainData,t.fields),t.virtualCustomData=null,t.isVirtualTrackHeight=!(t.totalItemCount>t.itemCount*2)}})}},i.prototype.showPopup=function(e){var t=this;if(this.enabled){this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null;var r={cancel:!1};this.trigger("beforeOpen",r,function(s){if(!s.cancel){if(!t.ulElement){t.beforePopupOpen=!0,t.mode==="CheckBox"&&H.isDevice&&t.allowFiltering&&t.isDeviceFullScreen&&t.notify("popupFullScreen",{module:"CheckBoxSelection",enable:t.mode==="CheckBox"}),n.prototype.render.call(t,e);return}t.mode==="CheckBox"&&H.isDevice&&t.allowFiltering&&t.isDeviceFullScreen&&t.notify("popupFullScreen",{module:"CheckBoxSelection",enable:t.mode==="CheckBox"});var a=t.ulElement.querySelectorAll("li.e-list-item").length,o=t.ulElement.querySelectorAll("li."+Y.li+"."+xe).length;if(a>0&&a===o&&o===t.mainData.length&&!(t.targetElement()!==""&&t.allowCustomValue)){t.beforePopupOpen=!1;return}if(t.onPopupShown(e),t.enableVirtualization&&t.listData&&t.listData.length&&(!d(t.value)&&(t.getModuleName()==="dropdownlist"||t.getModuleName()==="combobox")&&t.removeHover(),t.beforePopupOpen||(t.hideSelectedItem&&t.value&&Array.isArray(t.value)&&t.value.length>0&&t.totalItemsCount(),!t.preventSetCurrentData&&!d(t.viewPortInfo.startIndex)&&!d(t.viewPortInfo.endIndex)&&t.notify("setCurrentViewDataAsync",{component:t.getModuleName(),module:"VirtualScroll"}))),t.enableVirtualization&&!t.allowFiltering&&t.selectedValueInfo!=null&&t.selectedValueInfo.startIndex>0&&t.value!=null&&t.notify("dataProcessAsync",{module:"VirtualScroll",isOpen:!0}),t.enableVirtualization)t.updatevirtualizationList();else if(t.value&&t.value.length){var l=void 0;t.getItems();for(var h=0,c=t.value;h<c.length;h++){var u=c[h],p=t.allowObjectBinding?V(t.fields.value?t.fields.value:"",u):u;l=t.getElementByValue(p),l&&t.addListSelection(l)}}t.allowResize&&t.setResize(),t.preventSetCurrentData=!0}})}},i.prototype.selectAll=function(e){this.isSelectAll=!0,this.selectAllItems(e)},i.prototype.getRightIconsWidth=function(){for(var e=this.overAllWrapper,t=0,r=".e-input-group-icon, .e-clear-icon",s=e.querySelectorAll(r),a=0;a<s.length;a++)t+=s[a].offsetWidth;return t},i.prototype.updateFloatLabelOverflowWidth=function(){var e=this.overAllWrapper,t=e.querySelector(".e-float-text"),r=e.clientWidth-this.getRightIconsWidth();t&&r&&!(this.cssClass&&this.cssClass.split(" ").indexOf("e-outline")!==-1)&&(t.style.width=r+"px")},i.prototype.getModuleName=function(){return"multiselect"},i.prototype.clear=function(){var e=this;this.selectAll(!1),this.value&&this.value.length?setTimeout(function(){e.setProperties({value:null},!0)},0):this.setProperties({value:null},!0),this.checkAndResetCache(),this.enableVirtualization&&(this.updateInitialData(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.isCustomDataUpdated||this.notify("setGeneratedData",{module:"VirtualScroll"}),this.list.scrollTop=0,this.virtualListInfo=null,this.previousStartIndex=0,this.previousEndIndex=this.itemCount)},i.prototype.render=function(){!d(this.value)&&this.value.length>0&&(this.value=this.value.slice()),this.setDynValue=this.initStatus=!1,this.isSelectAll=!1,this.selectAllEventEle=[],this.searchWrapper=this.createElement("span",{className:RE+" "+(this.mode==="Box"?WE:"")}),this.viewWrapper=this.createElement("span",{className:IE+" "+yf}),this.viewWrapper.style.display="none",this.overAllClear=this.createElement("span",{className:gf}),this.overAllClear.style.display="none",this.componentWrapper=this.createElement("div",{className:xE}),this.overAllWrapper=this.createElement("div",{className:AE}),this.mode==="CheckBox"&&T([this.overAllWrapper],"e-checkbox"),H.isDevice&&this.componentWrapper.classList.add(kE),this.setWidth(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:NE}),this.popupWrapper.setAttribute("aria-label",this.element.id),this.popupWrapper.setAttribute("role","dialog"),this.mode==="Delimiter"||this.mode==="CheckBox"?(this.delimiterWrapper=this.createElement("span",{className:yf}),this.delimiterWrapper.style.display="none",this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:ME}),this.chipCollectionWrapper.style.display="none",this.mode==="Default"?this.chipCollectionWrapper.setAttribute("id",Nt("chip_default")):this.mode==="Box"&&this.chipCollectionWrapper.setAttribute("id",Nt("chip_box")),this.componentWrapper.appendChild(this.chipCollectionWrapper)),this.mode!=="Box"&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!H.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add(tc),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:LE,attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0",role:"combobox"}}),(this.mode==="Default"||this.mode==="Box")&&this.inputElement.setAttribute("aria-describedby",this.chipCollectionWrapper.id),d(this.inputElement)||(J(this.inputElement,{"aria-expanded":"false"}),this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName())),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),this.floatLabelType!=="Never"?pf(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):this.floatLabelType==="Never"&&this.refreshPlaceHolder(),this.addValidInputClass(),this.element.style.opacity="";var e=this.element.getAttribute("id")?this.element.getAttribute("id"):Nt("ej2_dropdownlist");this.element.id=e,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:BE,tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),this.mode!=="CheckBox"&&this.hideOverAllClear(),!d(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),this.updateFloatLabelOverflowWidth(),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.enableVirtualization&&this.updateVirtualizationProperties(this.itemCount,this.allowFiltering,this.mode==="CheckBox"),this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.viewPortInfo.startIndex>0?this.viewPortInfo.endIndex:this.itemCount,this.checkInitialValue(),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.element.querySelector(".e-multiselect .e-float-text-content")===null&&X.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),!d(this.overAllWrapper)&&!d(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never")&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.renderComplete()},i.prototype.setResize=function(){var e=this,t=16;if(this.list&&this.list.parentElement&&d(this.list.parentElement.querySelector(".e-resizer-right.e-icons"))&&(this.resizer=this.createElement("div",{id:this.element.id+"_resize-popup",className:qE})),this.mode==="CheckBox"&&this.showSelectAll&&this.selectAllHeight&&this.selectAllHeight!==0&&(this.storedSelectAllHeight=this.selectAllHeight),this.list&&this.list.parentElement){this.list.parentElement.classList.add("e-resize"),this.initialPopupHeight=this.list.parentElement.clientHeight,this.popupHeight.toString().toLowerCase()!=="auto"&&this.initialPopupHeight>=parseInt(this.popupHeight.toString(),10)-2&&(this.list.parentElement.style.height="100%"),this.list.parentElement.style.boxSizing="border-box";var r=this.mode==="CheckBox"&&this.searchBoxHeight?this.searchBoxHeight+t+(this.showSelectAll?this.storedSelectAllHeight:0):t;if(this.footer){var s=this.list.style.maxHeight,a=this.list.parentElement.style.maxHeight;setTimeout(function(){var l=Math.round(e.footer.getBoundingClientRect().height),h=(parseInt(a,10)-l).toString()+"px";s=(parseInt(h,10)-2).toString()+"px",l>0&&(e.list.parentElement.style.paddingBottom=(parseInt(a,10)-parseInt(s,10)+r).toString()+"px")},1)}else this.list.parentElement.style.paddingBottom=r+"px";if(this.list.parentElement.appendChild(this.resizer),this.list.parentElement.style.width=this.resizeWidth+"px",this.list.parentElement.style.height=this.resizeHeight+"px",this.list.parentElement.style.maxHeight=this.resizeHeight+"px",this.list.style.maxHeight=this.resizeHeight+"px",this.headerTemplate){var o=this.list.parentElement.querySelector(".e-ddl-header");o&&o.offsetHeight&&(this.headerTemplateHeight=o.offsetHeight),this.resizeHeight?this.list.style.maxHeight=this.resizeHeight-this.headerTemplateHeight-16+"px":this.list.style.maxHeight=parseInt(this.list.style.maxHeight,10)-16+"px"}}this.resizer&&(C.add(this.resizer,"mousedown",this.startResizing,this),C.add(this.resizer,"touchstart",this.startResizing,this))},i.prototype.startResizing=function(e){this.isResizing=!0,this.trigger("resizeStart",e);var t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,r=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;this.list&&this.list.parentElement&&(this.originalWidth=this.list.parentElement.offsetWidth,this.originalHeight=this.list.parentElement.offsetHeight,this.originalMouseX=t,this.originalMouseY=r),this.resizingWireEvent(),e&&e.preventDefault()},i.prototype.resizePopup=function(e){if(this.isResizing){this.trigger("resizing",e);var t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,r=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,s=t-this.originalMouseX,a=r-this.originalMouseY,o=100,l=130;if(this.resizeWidth=Math.max(this.originalWidth+s,o),this.resizeHeight=Math.max(this.originalHeight+a,l),this.list&&this.list.parentElement){var h=parseInt(window.getComputedStyle(this.list.parentElement).minWidth,10),c=parseInt(window.getComputedStyle(this.list.parentElement).minHeight,10);h=h||100,c=c||120,this.resizeWidth=Math.max(this.originalWidth+s,h),this.resizeHeight=Math.max(this.originalHeight+a,c),this.list.parentElement.style.width=this.resizeWidth+"px",this.list.parentElement.style.height=this.resizeHeight+"px",this.list.parentElement.style.maxHeight=this.resizeHeight+"px",this.list.style.maxHeight=this.resizeHeight+"px",this.headerTemplate&&(this.list.style.maxHeight=this.resizeHeight-this.headerTemplateHeight-16+"px"),this.fixedHeaderElement&&this.ulElement&&(this.fixedHeaderElement.style.width=this.ulElement.offsetWidth+"px")}e&&e.preventDefault()}},i.prototype.stopResizing=function(e){this.isResizing&&(this.isResizing=!1,this.trigger("resizeStop",e),this.resizingUnWireEvent()),e&&e.preventDefault()},i.prototype.getListHeight=function(){var e=this.createElement("div",{className:"e-dropdownbase"}),t=this.createElement("li",{className:"e-list-item"}),r=ce(this.popupHeight);e.style.height=parseInt(r,10).toString()+"px",e.appendChild(t),document.body.appendChild(e),this.virtualListHeight=e.getBoundingClientRect().height;var s=Math.ceil(t.getBoundingClientRect().height)+parseInt(window.getComputedStyle(t).marginBottom,10);return e.remove(),s},i.prototype.removeDisabledItemsValue=function(e){if(e){for(var t=[],r=0,s=0;s<e.length;s++){var a=e[s];typeof a=="object"&&(a=JSON.parse(JSON.stringify(a))[this.fields.value]),a!=null&&!this.isDisabledItemByIndex(this.getIndexByValue(a))&&(t[r++]=e[s])}this.value=t.length>0?t:null}},i.prototype.checkInitialValue=function(){var e=this;this.fields.disabled&&this.removeDisabledItemsValue(this.value);var t=this.dataSource instanceof Array?this.dataSource.length>0:!d(this.dataSource);if(!(this.value&&this.value.length)&&d(this.text)&&!t&&this.element.tagName==="SELECT"&&this.element.options.length>0){for(var r=this.element.options,s=[],a="",o=0,l=r.length;o<l;o++){var h=r[o];if(!d(h.getAttribute("selected")))if(h.getAttribute("value")){var c=this.allowObjectBinding?this.getDataByValue(h.getAttribute("value")):h.getAttribute("value");s.push(c)}else a+=h.text+this.delimiterChar}s.length>0?this.setProperties({value:s},!0):a!==""&&this.setProperties({text:a},!0),(s.length>0||a!=="")&&(this.refreshInputHight(),this.refreshPlaceHolder())}if((this.value&&this.value.length||!d(this.text))&&(this.list||n.prototype.render.call(this)),this.fields.disabled&&(this.text=this.text&&!this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?this.text:null),!d(this.text)&&(d(this.value)||this.value.length===0)&&this.initialTextUpdate(),this.value&&this.value.length){var u;if(this.enableVirtualization){for(var p=this.isPrimitiveData?"":this.fields.value,f=void 0,v=0;v<this.value.length;v++){var c=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",this.value[v]):this.value[v];v===0?f=new ut(p,"equal",c):f=f.or(p,"equal",c)}this.dataSource instanceof K?this.dataSource.executeQuery(new Se().where(f)).then(function(m){m.result.length>0&&(u=m.result,e.initStatus=!1,e.isInitRemoteVirtualData=!0,setTimeout(function(){e.initialValueUpdate(u,!0),e.initialUpdate(),e.isInitRemoteVirtualData=!1},100),e.initStatus=!0)}):u=new K(this.dataSource).executeLocal(new Se().where(f))}this.dataSource instanceof K?this.setInitialValue=function(){e.initStatus=!1,(!e.enableVirtualization||e.enableVirtualization&&!(e.dataSource instanceof K))&&e.initialValueUpdate(u),e.initialUpdate(),e.setInitialValue=null,e.initStatus=!0}:(this.initialValueUpdate(u,!0),this.initialUpdate()),this.updateTempValue()}else this.initialUpdate();this.initStatus=!0,this.checkAutoFocus(),d(this.text)||this.element.setAttribute("data-initial-value",this.text)},i.prototype.checkAutoFocus=function(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()},i.prototype.updatevirtualizationList=function(){if(this.value&&this.value.length){for(var e=void 0,t=0,r=this.value;t<r.length;t++){var s=r[t],a=this.allowObjectBinding?V(this.fields.value?this.fields.value:"",s):s;e=this.getElementByValue(a),e&&this.addListSelection(e)}if(this.enableVirtualization&&this.hideSelectedItem){var o=this.list.querySelectorAll("li."+Y.li+":not(."+xe+"):not(.e-reorder-hide):not(.e-virtual-list)");if(o.length){var l=this.virtualListHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;if(o.length<l+2){var h=this.getForQuery(this.value).clone();h=h.skip(this.viewPortInfo.startIndex),this.resetList(this.dataSource,this.fields,h)}}}}},i.prototype.setFloatLabelType=function(){CE(this.overAllWrapper,this.componentWrapper,this.searchWrapper,this.inputElement,this.value,this.floatLabelType,this.placeholder),this.floatLabelType!=="Never"&&pf(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)},i.prototype.addValidInputClass=function(){d(this.overAllWrapper)||(!d(this.value)&&this.value.length||this.floatLabelType==="Always"?T([this.overAllWrapper],"e-valid-input"):I([this.overAllWrapper],"e-valid-input"))},i.prototype.dropDownIcon=function(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:Cf}),this.componentWrapper.appendChild(this.dropIcon),T([this.componentWrapper],["e-down-icon"])):d(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),I([this.componentWrapper],["e-down-icon"]))},i.prototype.initialUpdate=function(){this.mode!=="Box"&&!(this.setDynValue&&this.mode==="Default"&&this.inputFocus)&&this.updateDelimView(),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()},i.prototype.disableItem=function(e){if(this.fields.disabled){this.list||this.renderList();var t=-1;if(this.liCollections&&this.liCollections.length>0&&this.listData&&this.fields.disabled){if(typeof e=="string")t=this.getIndexByValue(e);else if(typeof e=="object"){if(e instanceof HTMLLIElement){for(var r=0;r<this.liCollections.length;r++)if(this.liCollections[r]===e){t=this.getIndexByValue(e.getAttribute("data-value"));break}}else for(var s=JSON.parse(JSON.stringify(e))[this.fields.value],r=0;r<this.listData.length;r++)if(JSON.parse(JSON.stringify(this.listData[r]))[this.fields.value]===s){t=this.getIndexByValue(s);break}}else t=e;var a=t<this.liCollections.length&&t>-1;if(a&&!JSON.parse(JSON.stringify(this.listData[t]))[this.fields.disabled]){var o=this.liCollections[t];if(o){this.disableListItem(o);var l=JSON.parse(JSON.stringify(this.listData[t]));if(l[this.fields.disabled]=!0,this.listData[t]=l,o.classList.contains(Y.focus)&&this.removeFocus(),o.classList.contains(xe)||o.classList.contains(Y.selected)){var h=this.value;this.removeDisabledItemsValue(this.value),this.updateVal(this.value,h,"value")}this.mode==="CheckBox"&&this.enableGroupCheckBox&&!d(this.fields.groupBy)&&this.disableGroupHeader()}}}}},i.prototype.destroy=function(){this.isReact&&this.clearTemplate(),d(this.popupObj)||(this.popupObj.hide(),this.popupObj.destroy()),this.notify(FE,{}),this.unwireListEvents(),this.unWireEvent();var e=["readonly","aria-disabled","placeholder","aria-label","aria-expanded"],t=e.length;if(!d(this.inputElement))for(;t>0;)this.inputElement.removeAttribute(e[t-1]),t--;for(d(this.element)||(this.element.removeAttribute("data-initial-value"),this.element.style.display="block"),this.overAllWrapper&&this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()?ve(this.overAllWrapper):(this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),ve(this.overAllWrapper))),this.popupWrapper&&this.popupWrapper.parentElement&&this.popupWrapper.parentElement.remove();this.searchWrapper&&this.searchWrapper.firstChild;)this.searchWrapper.removeChild(this.searchWrapper.firstChild);this.searchWrapper&&this.searchWrapper.parentElement&&this.searchWrapper.parentElement.remove(),this.viewWrapper&&this.viewWrapper.parentElement&&this.viewWrapper.parentElement.remove(),this.overAllClear&&this.overAllClear.parentElement&&this.overAllClear.parentElement.remove(),this.delimiterWrapper&&this.delimiterWrapper.parentElement&&this.delimiterWrapper.parentElement.remove();var r=this.overAllWrapper.querySelector("select.e-multi-hidden");for(r&&r.parentElement&&r.parentElement.remove();this.componentWrapper&&this.componentWrapper.firstChild;)this.componentWrapper.removeChild(this.componentWrapper.firstChild);for(this.componentWrapper&&this.componentWrapper.parentElement&&(this.componentWrapper.removeAttribute("class"),this.componentWrapper.parentElement.remove());this.popupWrapper&&this.popupWrapper.firstChild;)this.popupWrapper.removeChild(this.popupWrapper.firstChild);if(this.inputElement)for(var s=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-label","aria-hidden","tabindex","aria-controls","aria-describedby","size","role","type","class"],a=0;a<s.length;a++)this.inputElement.removeAttribute(s[a]);this.inputElement&&this.inputElement.remove(),this.list=null,this.popupObj=null,this.mainData=null,this.filterParent=null,this.ulElement=null,this.componentWrapper=null,this.overAllClear=null,this.overAllWrapper=null,this.hiddenElement=null,this.searchWrapper=null,this.viewWrapper=null,this.chipCollectionWrapper=null,this.targetInputElement=null,this.popupWrapper=null,this.inputElement=null,this.delimiterWrapper=null,this.liCollections=null,this.popupContentElement=null,this.header=null,this.mainList=null,this.mainListCollection=null,this.footer=null,this.selectAllEventEle=null,n.prototype.destroy.call(this)},ee([st({text:null,value:null,iconCss:null,groupBy:null,disabled:null},mS)],i.prototype,"fields",void 0),ee([S(!1)],i.prototype,"enablePersistence",void 0),ee([S(null)],i.prototype,"groupTemplate",void 0),ee([S("No records found")],i.prototype,"noRecordsTemplate",void 0),ee([S("Request failed")],i.prototype,"actionFailureTemplate",void 0),ee([S("None")],i.prototype,"sortOrder",void 0),ee([S(!0)],i.prototype,"enabled",void 0),ee([S(!0)],i.prototype,"enableHtmlSanitizer",void 0),ee([S(!1)],i.prototype,"enableVirtualization",void 0),ee([S([])],i.prototype,"dataSource",void 0),ee([S(null)],i.prototype,"query",void 0),ee([S("StartsWith")],i.prototype,"filterType",void 0),ee([S(1e3)],i.prototype,"zIndex",void 0),ee([S(!1)],i.prototype,"ignoreAccent",void 0),ee([S()],i.prototype,"locale",void 0),ee([S(!1)],i.prototype,"enableGroupCheckBox",void 0),ee([S(null)],i.prototype,"cssClass",void 0),ee([S("100%")],i.prototype,"width",void 0),ee([S("300px")],i.prototype,"popupHeight",void 0),ee([S("100%")],i.prototype,"popupWidth",void 0),ee([S(null)],i.prototype,"placeholder",void 0),ee([S(null)],i.prototype,"filterBarPlaceholder",void 0),ee([S({})],i.prototype,"htmlAttributes",void 0),ee([S(null)],i.prototype,"valueTemplate",void 0),ee([S(null)],i.prototype,"headerTemplate",void 0),ee([S(null)],i.prototype,"footerTemplate",void 0),ee([S(null)],i.prototype,"itemTemplate",void 0),ee([S(null)],i.prototype,"allowFiltering",void 0),ee([S(300)],i.prototype,"debounceDelay",void 0),ee([S(!0)],i.prototype,"isDeviceFullScreen",void 0),ee([S(!0)],i.prototype,"changeOnBlur",void 0),ee([S(!1)],i.prototype,"allowCustomValue",void 0),ee([S(!0)],i.prototype,"showClearButton",void 0),ee([S(1e3)],i.prototype,"maximumSelectionLength",void 0),ee([S(!1)],i.prototype,"readonly",void 0),ee([S(!1)],i.prototype,"allowResize",void 0),ee([S(null)],i.prototype,"text",void 0),ee([S(null)],i.prototype,"value",void 0),ee([S(!1)],i.prototype,"allowObjectBinding",void 0),ee([S(!0)],i.prototype,"hideSelectedItem",void 0),ee([S(!0)],i.prototype,"closePopupOnSelect",void 0),ee([S("Default")],i.prototype,"mode",void 0),ee([S(",")],i.prototype,"delimiterChar",void 0),ee([S(!0)],i.prototype,"ignoreCase",void 0),ee([S(!1)],i.prototype,"showDropDownIcon",void 0),ee([S("Never")],i.prototype,"floatLabelType",void 0),ee([S(!1)],i.prototype,"showSelectAll",void 0),ee([S("Select All")],i.prototype,"selectAllText",void 0),ee([S("Unselect All")],i.prototype,"unSelectAllText",void 0),ee([S(!0)],i.prototype,"enableSelectionOrder",void 0),ee([S(!0)],i.prototype,"openOnClick",void 0),ee([S(!1)],i.prototype,"addTagOnBlur",void 0),ee([_()],i.prototype,"change",void 0),ee([_()],i.prototype,"removing",void 0),ee([_()],i.prototype,"removed",void 0),ee([_()],i.prototype,"beforeSelectAll",void 0),ee([_()],i.prototype,"selectedAll",void 0),ee([_()],i.prototype,"beforeOpen",void 0),ee([_()],i.prototype,"open",void 0),ee([_()],i.prototype,"close",void 0),ee([_()],i.prototype,"blur",void 0),ee([_()],i.prototype,"focus",void 0),ee([_()],i.prototype,"chipSelection",void 0),ee([_()],i.prototype,"resizeStop",void 0),ee([_()],i.prototype,"resizing",void 0),ee([_()],i.prototype,"resizeStart",void 0),ee([_()],i.prototype,"filtering",void 0),ee([_()],i.prototype,"tagging",void 0),ee([_()],i.prototype,"customValueSelection",void 0),i=ee([Ft],i),i}(gS),ty=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ge=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},bi="e-other-month",rc="e-other-year",la="e-calendar",Df="e-device",jE="e-header",Af="e-rtl",UE="e-content",YE="e-calendar-content-table",sc="e-year",nc="e-month",xf="e-decade",kf="e-icons",GE="e-prev",$E="e-next",KE="e-date-icon-prev",QE="e-date-icon-next ",XE="e-icon-container",_e="e-disabled",Fr="e-overlay",ZE="e-weekend",ha="e-week-number",Ct="e-selected",Zt="e-focused-date",ys="e-focused-cell",Vo="e-month-hide",If="e-today",JE="e-title",Mf="e-day",Of="e-cell",eC="e-week-header",Po="e-zoomin",tC="e-footer-container",iC="e-btn",rC="e-flat",sC="e-css",nC="e-primary",Rf="e-calendar-day-header-lg",ac=864e5,aC=6e4,oC=function(n){ty(i,n);function i(e,t){var r=n.call(this,e,t)||this;return r.effect="",r.isPopupClicked=!1,r.isDateSelected=!0,r.isTodayClicked=!1,r.preventChange=!1,r.previousDates=!1,r}return i.prototype.render=function(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),this.calendarMode==="Islamic"&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1941,12,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2068,2,4))),this.globalize=new je(this.locale),(d(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date(new Date().setHours(0,0,0,0)),this.getModuleName()==="calendar"?(this.element.classList.add(la),this.enableRtl&&this.element.classList.add(Af),H.isDevice&&this.element.classList.add(Df),J(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(la),this.enableRtl&&this.calendarElement.classList.add(Af),H.isDevice&&this.calendarElement.classList.add(Df),J(this.calendarElement,{"data-role":"calendar"})),!d(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),this.createHeader(),this.createContent(),this.wireEvents()},i.prototype.rangeValidation=function(e,t){d(e)&&this.setProperties({min:new Date(1900,0,1)},!0),d(t)&&this.setProperties({max:new Date(2099,11,31)},!0)},i.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs},i.prototype.validateDate=function(e){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date(new Date().setHours(0,0,0,0)),!d(e)&&this.min<=this.max&&e>=this.min&&e<=this.max&&(this.currentDate=new Date(this.checkValue(e)))},i.prototype.setOverlayIndex=function(e,t,r,s){if(s&&!d(t)&&!d(r)&&!d(e)){var a=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;r.style.zIndex=(a-1).toString(),e.style.zIndex=a.toString()}},i.prototype.minMaxUpdate=function(e){this.min=d(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=d(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max?I([this.element],Fr):(this.setProperties({min:this.min},!0),T([this.element],Fr)),+this.min<=+this.max&&e&&+e<=+this.max&&+e>=+this.min?this.currentDate=new Date(this.checkValue(e)):+this.min<=+this.max&&!e&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))},i.prototype.createHeader=function(){var e={"aria-disabled":"false","aria-label":"previous month"},t={"aria-disabled":"false","aria-label":"next month"},r={"aria-atomic":"true","aria-live":"assertive"},s={tabindex:"0"};this.headerElement=this.createElement("div",{className:jE});var a=this.createElement("div",{className:XE});this.previousIcon=this.createElement("button",{className:""+GE,attrs:{type:"button"}}),Xr(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),J(this.previousIcon,e),J(this.previousIcon,s),this.nextIcon=this.createElement("button",{className:""+$E,attrs:{type:"button"}}),Xr(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),this.getModuleName()==="daterangepicker"&&(J(this.previousIcon,{tabIndex:"-1"}),J(this.nextIcon,{tabIndex:"-1"})),J(this.nextIcon,t),J(this.nextIcon,s),this.headerTitleElement=this.createElement("div",{className:""+Mf+" "+JE}),J(this.headerTitleElement,r),J(this.headerTitleElement,s),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:""+KE+" "+kf})),this.nextIcon.appendChild(this.createElement("span",{className:""+QE+" "+kf})),a.appendChild(this.previousIcon),a.appendChild(this.nextIcon),this.headerElement.appendChild(a),this.getModuleName()==="calendar"?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()},i.prototype.createContent=function(){this.contentElement=this.createElement("div",{className:UE}),this.table=this.createElement("table",{attrs:{class:YE,tabIndex:"0",role:"grid","aria-activedescendant":"","aria-labelledby":this.element.id}}),this.getModuleName()==="calendar"?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter(),this.getModuleName()!=="daterangepicker"&&(C.add(this.table,"focus",this.addContentFocus,this),C.add(this.table,"blur",this.removeContentFocus,this))},i.prototype.addContentFocus=function(e){var t=this.tableBodyElement.querySelector("tr td.e-focused-date"),r=this.tableBodyElement.querySelector("tr td.e-selected");d(r)?d(t)||t.classList.add(ys):r.classList.add(ys)},i.prototype.removeContentFocus=function(e){var t=d(this.tableBodyElement)?null:this.tableBodyElement.querySelector("tr td.e-focused-date"),r=d(this.tableBodyElement)?null:this.tableBodyElement.querySelector("tr td.e-selected");d(r)?d(t)||t.classList.remove(ys):r.classList.remove(ys)},i.prototype.getCultureValues=function(){var e=[],t,r=d(this.dayHeaderFormat)?null:"days.stand-alone."+this.dayHeaderFormat.toLowerCase();if((this.locale==="en"||this.locale==="en-US")&&!d(r)?t=V(r,Lt()):t=this.getCultureObjects(Vt,""+this.locale),!d(t))for(var s=0,a=Object.keys(t);s<a.length;s++){var o=a[s];e.push(V(o,t))}return e},i.prototype.toCapitalize=function(e){return!d(e)&&e.length?e[0].toUpperCase()+e.slice(1):e},i.prototype.createContentHeader=function(){this.getModuleName()==="calendar"?d(this.element.querySelectorAll(".e-content .e-week-header")[0])||Q(this.element.querySelectorAll(".e-content .e-week-header")[0]):d(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||Q(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);var e=6,t="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:eC}),this.weekNumber&&(t+='<th class="e-week-number" aria-hidden="true"></th>',this.getModuleName()==="calendar"?T([this.element],""+ha):T([this.calendarElement],""+ha));var r=this.getCultureValues().length>0&&this.getCultureValues()?this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek):null;if(!d(r))for(var s=0;s<=e;s++)t+='<th  class="">'+this.toCapitalize(r[s])+"</th>";t="<tr>"+t+"</tr>",this.tableHeadElement.innerHTML=t,this.table.appendChild(this.tableHeadElement)},i.prototype.createContentBody=function(){switch(this.getModuleName()==="calendar"?d(this.element.querySelectorAll(".e-content tbody")[0])||Q(this.element.querySelectorAll(".e-content tbody")[0]):d(this.calendarElement.querySelectorAll(".e-content tbody")[0])||Q(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}},i.prototype.updateFooter=function(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today")),this.todayElement.setAttribute("tabindex","0")},i.prototype.createContentFooter=function(){if(this.showTodayButton){var e=new Date(+this.min),t=new Date(+this.max),r={today:"Today"};this.globalize=new je(this.locale),this.l10=new hi(this.getModuleName(),r,this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),Xr(this.todayElement),this.updateFooter(),T([this.todayElement],[iC,If,rC,nC,sC]),(!(+new Date(e.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(t.setHours(0,0,0,0)))||this.todayDisabled)&&T([this.todayElement],_e),this.footer=this.createElement("div",{className:tC}),this.footer.appendChild(this.todayElement),this.getModuleName()==="calendar"&&this.element.appendChild(this.footer),this.getModuleName()==="datepicker"&&this.calendarElement.appendChild(this.footer),this.getModuleName()==="datetimepicker"&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains(_e)||C.add(this.todayElement,"click",this.todayButtonClick,this)}},i.prototype.wireEvents=function(e,t,r,s){C.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=$(this.defaultKeyConfigs,this.keyConfigs),this.getModuleName()==="calendar"?this.keyboardModule=new Ci(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):this.keyboardModule=new Ci(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},i.prototype.dateWireEvents=function(e,t,r,s){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=$(this.defaultKeyConfigs,r),this.serverModuleName=s},i.prototype.todayButtonClick=function(e,t,r){this.showTodayButton&&(this.currentView()===this.depth?this.effect="":this.effect="e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(t)),r):this.navigateTo("Month",new Date(this.checkValue(t)),r))},i.prototype.resetCalendar=function(){this.calendarElement&&Q(this.calendarElement),this.tableBodyElement&&Q(this.tableBodyElement),this.table&&Q(this.table),this.tableHeadElement&&Q(this.tableHeadElement),this.nextIcon&&Q(this.nextIcon),this.previousIcon&&Q(this.previousIcon),this.footer&&Q(this.footer),this.todayElement=null,this.renderDayCellArgs=null,this.calendarElement=this.tableBodyElement=this.footer=this.tableHeadElement=this.nextIcon=this.previousIcon=this.table=null},i.prototype.keyActionHandle=function(e,t,r){if(!(this.calendarElement===null&&e.action==="escape")){var s=this.tableBodyElement.querySelector("tr td.e-focused-date"),a;r?!d(s)&&+t===parseInt(s.getAttribute("id").split("_")[0],10)?a=s:a=this.tableBodyElement.querySelector("tr td.e-selected"):a=this.tableBodyElement.querySelector("tr td.e-selected");var o=this.getViewNumber(this.currentView()),l=this.getViewNumber(this.depth),h=o===l&&this.getViewNumber(this.start)>=l;switch(this.effect="",e.action){case"moveLeft":this.getModuleName()!=="daterangepicker"&&!d(e.target)&&(this.keyboardNavigate(-1,o,e,this.max,this.min),e.preventDefault());break;case"moveRight":this.getModuleName()!=="daterangepicker"&&!d(e.target)&&(this.keyboardNavigate(1,o,e,this.max,this.min),e.preventDefault());break;case"moveUp":this.getModuleName()!=="daterangepicker"&&!d(e.target)&&(o===0?this.keyboardNavigate(-7,o,e,this.max,this.min):this.keyboardNavigate(-4,o,e,this.max,this.min),e.preventDefault());break;case"moveDown":this.getModuleName()!=="daterangepicker"&&!d(e.target)&&(o===0?this.keyboardNavigate(7,o,e,this.max,this.min):this.keyboardNavigate(4,o,e,this.max,this.min),e.preventDefault());break;case"select":if(e.target===this.headerTitleElement)this.navigateTitle(e);else if(e.target===this.previousIcon&&!e.target.className.includes(_e))this.navigatePrevious(e);else if(e.target===this.nextIcon&&!e.target.className.includes(_e))this.navigateNext(e);else if(e.target===this.todayElement&&!e.target.className.includes(_e))this.todayButtonClick(e,t),(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&(this.isAngular?this.inputElement.focus():this.element.focus());else{var c=d(s)?a:s;if(!d(c)&&!c.classList.contains(_e))if(h){var u=new Date(parseInt(""+c.id,0));this.selectDate(e,u,c),(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&(this.isAngular?this.inputElement.focus():this.element.focus())}else e.target.className.includes(_e)||this.contentClick(null,--o,c,t)}break;case"controlUp":this.title(),e.preventDefault();break;case"controlDown":(!d(s)&&!h||!d(a)&&!h)&&this.contentClick(null,--o,s||a,t),e.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),Q(this.tableBodyElement),o===0?this.renderMonths(e):o===1?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,o),Q(this.tableBodyElement),o===0?this.renderMonths(e):o===1?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),e.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),e.preventDefault();break;case"tab":(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&e.target===this.todayElement&&(e.preventDefault(),this.isAngular?this.inputElement.focus():this.element.focus(),this.hide());break;case"shiftTab":(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&e.target===this.headerTitleElement&&(e.preventDefault(),this.isAngular?this.inputElement.focus():this.element.focus(),this.hide());break;case"escape":(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&(e.target===this.headerTitleElement||e.target===this.previousIcon||e.target===this.nextIcon||e.target===this.todayElement)&&this.hide();break}}},i.prototype.keyboardNavigate=function(e,t,r,s,a){var o=new Date(this.checkValue(this.currentDate));switch(t){case 2:this.addYears(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(Q(this.tableBodyElement),this.renderDecades(r)):this.currentDate=o;break;case 1:this.addMonths(this.currentDate,e),this.calendarMode==="Gregorian"?this.isMonthYearRange(this.currentDate)?(Q(this.tableBodyElement),this.renderYears(r)):this.currentDate=o:this.isMonthYearRange(this.currentDate)?(Q(this.tableBodyElement),this.renderYears(r)):this.currentDate=o;break;case 0:this.addDay(this.currentDate,e,r,s,a),this.isMinMaxRange(this.currentDate)?(Q(this.tableBodyElement),this.renderMonths(r)):this.currentDate=o;break}},i.prototype.preRender=function(e){var t=this;this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=function(r){t.triggerNavigate(r)}},i.prototype.minMaxDate=function(e){var t=new Date(new Date(+e).setHours(0,0,0,0)),r=new Date(new Date(+this.min).setHours(0,0,0,0)),s=new Date(new Date(+this.max).setHours(0,0,0,0));return(+t==+r||+t==+s)&&(+e<+this.min&&(e=new Date(+this.min)),+e>+this.max&&(e=new Date(+this.max))),e},i.prototype.renderMonths=function(e,t,r){var s=this.weekNumber?8:7,a;this.calendarMode==="Gregorian"?a=this.renderDays(this.currentDate,t,null,null,r,e):a=d(this.islamicModule)?null:this.islamicModule.islamicRenderDays(this.currentDate,t),this.createContentHeader(),this.calendarMode==="Gregorian"?this.renderTemplate(a,s,nc,e,t):d(this.islamicModule)||this.islamicModule.islamicRenderTemplate(a,s,nc,e,t)},i.prototype.renderDays=function(e,t,r,s,a,o){var l=[],h=42,c=a?new Date(+e):this.getDate(new Date,this.timezone),u=new Date(this.checkValue(e)),p,f=u.getMonth();this.titleUpdate(e,"days");var v=u;for(u=new Date(v.getFullYear(),v.getMonth(),0,v.getHours(),v.getMinutes(),v.getSeconds(),v.getMilliseconds());u.getDay()!==this.firstDayOfWeek;)this.setStartDate(u,-1*ac);for(var m=0;m<h;++m){var g=this.createElement("td",{className:Of}),y=this.createElement("span");if(m%7===0&&this.weekNumber){var b=this.weekRule==="FirstDay"?6:this.weekRule==="FirstFourDayWeek"?3:0,E=new Date(u.getFullYear(),u.getMonth(),u.getDate()+b);y.textContent=""+this.getWeek(E),g.appendChild(y),T([g],""+ha),l.push(g)}p=new Date(+u),u=this.minMaxDate(u);var w={type:"dateTime",skeleton:"full"},A=this.globalize.parseDate(this.globalize.formatDate(u,w),w),D=this.dayCell(u),N=this.globalize.formatDate(u,{type:"date",skeleton:"full"}),x=this.createElement("span");x.textContent=this.globalize.formatDate(u,{format:"d",type:"date",skeleton:"yMd"});var j=this.min>u||this.max<u;j?(T([D],_e),T([D],Fr)):x.setAttribute("title",""+N),f!==u.getMonth()&&(T([D],bi),x.setAttribute("aria-disabled","true")),(u.getDay()===0||u.getDay()===6)&&T([D],ZE),D.appendChild(x),this.renderDayCellArgs={date:u,isDisabled:!1,element:D,isOutOfRange:j,currentView:this.currentView()};var q=this.renderDayCellArgs;if(this.renderDayCellEvent(q),q.isDisabled){var L=new Date(this.checkValue(t)),O=new Date(this.checkValue(q.date));if(r){if(!d(s)&&s.length>0)for(var P=0;P<s.length;P++){var F=+new Date(this.globalize.formatDate(q.date,{type:"date",skeleton:"yMd"})),ie=+new Date(this.globalize.formatDate(s[P],{type:"date",skeleton:"yMd"}));F===ie&&(s.splice(P,1),P=-1)}}else L&&+L==+O&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!D.classList.contains(Ct)&&(T([D],_e),T([D],Fr),x.setAttribute("aria-disabled","true"),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));var U=D.classList.contains(bi),ne=D.classList.contains(_e);ne||C.add(D,"click",this.clickHandler,this);var Ae=void 0;if(!d(o)&&o.type==="click"&&(Ae=o.currentTarget),r&&!d(s)&&!ne){for(var ge=0;ge<s.length;ge++){var Ve=this.calendarMode==="Gregorian"?"gregorian":"islamic",rt={format:null,type:"date",skeleton:"short",calendar:Ve},F=this.globalize.formatDate(u,rt),ie=this.globalize.formatDate(s[ge],rt);if((F===ie&&this.getDateVal(u,s[ge])||this.getDateVal(u,t))&&T([D],Ct),!d(Ae)&&Ae.innerText===D.innerText&&this.previousDates&&D.classList.contains(Ct)&&Ae.classList.contains(Ct)){I([D],Ct),this.previousDates=!1;for(var pt=this.copyValues(s),ft=0;ft<pt.length;ft++){var vt=this.calendarMode==="Gregorian"?"gregorian":"islamic",Wt={format:null,type:"date",skeleton:"short",calendar:vt},ni=this.globalize.formatDate(A,Wt),_t=this.globalize.formatDate(pt[ft],Wt);if(ni===_t){var P=pt.indexOf(pt[ft]);pt.splice(P,1),s.splice(P,1)}}this.setProperties({values:pt},!0)}else this.updateFocus(U,ne,u,D,e)}s.length<=0&&this.updateFocus(U,ne,u,D,e)}else!ne&&this.getDateVal(u,t)&&T([D],Ct);this.updateFocus(U,ne,u,D,e),!d(A)&&A.getFullYear()===c.getFullYear()&&A.getMonth()===c.getMonth()&&A.getDate()===c.getDate()&&T([D],If),l.push(this.renderDayCellArgs.element),u=new Date(+p),this.addDay(u,1,null,this.max,this.min)}return l},i.prototype.updateFocus=function(e,t,r,s,a){a.getDate()===r.getDate()&&!e&&!t?T([s],Zt):(a>=this.max&&parseInt(s.id,0)===+this.max&&!e&&!t&&T([s],Zt),a<=this.min&&parseInt(s.id,0)===+this.min&&!e&&!t&&T([s],Zt))},i.prototype.renderYears=function(e,t){this.removeTableHeadElement();var r=4,s=[],a=d(t),o=new Date(this.checkValue(this.currentDate)),l=o.getMonth(),h=o.getFullYear(),c=o,u=c.getFullYear(),p=new Date(this.checkValue(this.min)).getFullYear(),f=new Date(this.checkValue(this.min)).getMonth(),v=new Date(this.checkValue(this.max)).getFullYear(),m=new Date(this.checkValue(this.max)).getMonth();c.setMonth(0),this.titleUpdate(this.currentDate,"months"),c.setDate(1);for(var g=0;g<12;++g){var y=this.dayCell(c),b=this.createElement("span"),E=t&&t.getMonth()===c.getMonth(),w=t&&t.getFullYear()===h&&E,A=this.globalize.formatDate(c,{type:"date",format:"MMM y"});b.textContent=this.toCapitalize(this.globalize.formatDate(c,{format:null,type:"dateTime",skeleton:"MMM"})),this.min&&(u<p||g<f&&u===p)||this.max&&(u>v||g>m&&u>=v)?T([y],_e):!a&&w?T([y],Ct):c.getMonth()===l&&this.currentDate.getMonth()===l&&T([y],Zt),c.setDate(1),c.setMonth(c.getMonth()+1),y.classList.contains(_e)||(C.add(y,"click",this.clickHandler,this),b.setAttribute("title",""+A)),y.appendChild(b),s.push(y)}this.renderTemplate(s,r,sc,e,t)},i.prototype.renderDecades=function(e,t){this.removeTableHeadElement();var r=4,s=12,a=[],o=new Date(this.checkValue(this.currentDate));o.setMonth(0),o.setDate(1);var l=o.getFullYear(),h=new Date(o.setFullYear(l-l%10)),c=new Date(o.setFullYear(l-l%10+9)),u=h.getFullYear(),p=c.getFullYear(),f=this.globalize.formatDate(h,{format:null,type:"dateTime",skeleton:"y"}),v=this.globalize.formatDate(c,{format:null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=f+" - "+v;for(var m=new Date(l-l%10-1,0,1),g=m.getFullYear(),y=0;y<s;++y){var b=g+y;o.setFullYear(b);var E=this.dayCell(o),w=this.createElement("span");w.textContent=this.globalize.formatDate(o,{format:null,type:"dateTime",skeleton:"y"}),b<u||b>p?(T([E],rc),w.setAttribute("aria-disabled","true"),!d(t)&&o.getFullYear()===t.getFullYear()&&T([E],Ct),(b<new Date(this.checkValue(this.min)).getFullYear()||b>new Date(this.checkValue(this.max)).getFullYear())&&T([E],_e)):b<new Date(this.checkValue(this.min)).getFullYear()||b>new Date(this.checkValue(this.max)).getFullYear()?T([E],_e):!d(t)&&o.getFullYear()===t.getFullYear()?T([E],Ct):o.getFullYear()===this.currentDate.getFullYear()&&!E.classList.contains(_e)&&T([E],Zt),E.classList.contains(_e)||(C.add(E,"click",this.clickHandler,this),w.setAttribute("title",""+w.textContent)),E.appendChild(w),a.push(E)}this.renderTemplate(a,r,"e-decade",e,t)},i.prototype.dayCell=function(e){var t=this.calendarMode==="Gregorian"?"gregorian":"islamic",r={skeleton:"full",type:"dateTime",calendar:t},s=this.globalize.parseDate(this.globalize.formatDate(e,r),r),a;d(s)||(a=s.valueOf());var o={className:Of,attrs:{id:""+Nt(""+a)}};return this.createElement("td",o)},i.prototype.firstDay=function(e){var t=this.currentView()!=="Decade"?this.tableBodyElement.querySelectorAll("td:not(."+bi+"):not(."+ha+")"):this.tableBodyElement.querySelectorAll("td:not(."+rc);if(t.length){for(var r=0;r<t.length;r++)if(!t[r].classList.contains(_e)){e=new Date(parseInt(t[r].id,0));break}}return e},i.prototype.lastDay=function(e,t){var r=new Date(e.getFullYear(),e.getMonth()+1,0);if(t!==2){var s=Math.abs(r.getTimezoneOffset()-this.firstDay(e).getTimezoneOffset());return s&&r.setHours(this.firstDay(e).getHours()+s/60),this.findLastDay(r)}else return this.findLastDay(this.firstDay(r))},i.prototype.checkDateValue=function(e){return!d(e)&&e instanceof Date&&!isNaN(+e)?e:null},i.prototype.findLastDay=function(e){var t=this.currentView()==="Decade"?this.tableBodyElement.querySelectorAll("td:not(."+rc):this.tableBodyElement.querySelectorAll("td:not(."+bi+"):not(."+ha+")");if(t.length){for(var r=t.length-1;r>=0;r--)if(!t[r].classList.contains(_e)){e=new Date(parseInt(t[r].id,0));break}}return e},i.prototype.removeTableHeadElement=function(){this.getModuleName()==="calendar"?d(this.element.querySelectorAll(".e-content table thead")[0])||Q(this.tableHeadElement):d(this.calendarElement.querySelectorAll(".e-content table thead")[0])||Q(this.tableHeadElement)},i.prototype.renderTemplate=function(e,t,r,s,a){var o=this.getViewNumber(this.currentView()),l;this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),I([this.contentElement,this.headerElement],[nc,xf,sc]),T([this.contentElement,this.headerElement],[r]);for(var h=41,c=35,u=6,p=t,f=0,v=0;v<e.length/t;++v){for(l=this.createElement("tr"),f=0+f;f<p;f++)!e[f].classList.contains("e-week-number")&&!d(e[f].children[0])&&(T([e[f].children[0]],[Mf]),Xr(e[f].children[0],{duration:600,isCenterRipple:!0})),l.appendChild(e[f]),this.weekNumber&&f===u+1&&e[u+1].classList.contains(bi)&&T([l],Vo),!this.weekNumber&&f===u&&e[u].classList.contains(bi)&&T([l],Vo),this.weekNumber?f===h&&e[h].classList.contains(bi)&&T([l],Vo):f===c&&e[c].classList.contains(bi)&&T([l],Vo);p=p+t,f=f+0,this.tableBodyElement.appendChild(l)}this.table.querySelector("tbody").className=this.effect,this.calendarMode==="Gregorian"?this.iconHandler():this.islamicModule.islamicIconHandler(),(o!==this.getViewNumber(this.currentView())||o===0&&o!==this.getViewNumber(this.currentView()))&&this.navigateHandler(s),this.setAriaActiveDescendant()},i.prototype.clickHandler=function(e,t){this.clickEventEmitter(e);var r=e.currentTarget,s=this.getViewNumber(this.currentView());r.classList.contains(bi)?this.contentClick(e,0,null,t):s===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.contentClick(e,1,null,t):s===2?this.contentClick(e,1,null,t):!r.classList.contains(bi)&&s===0?this.selectDate(e,this.getIdValue(e,null),null):this.contentClick(e,0,r,t),this.getModuleName()==="calendar"&&this.table.focus()},i.prototype.clickEventEmitter=function(e){e.preventDefault()},i.prototype.contentClick=function(e,t,r,s){var a=this.getViewNumber(this.currentView()),o=this.getIdValue(e,r);switch(t){case 0:a===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(Q(this.tableBodyElement),this.currentDate=o,this.effect=Po,this.renderMonths(e)):(this.calendarMode==="Gregorian"?(this.currentDate.setMonth(o.getMonth()),o.getMonth()>0&&this.currentDate.getMonth()!==o.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(o.getFullYear())):this.currentDate=o,this.effect=Po,Q(this.tableBodyElement),this.renderMonths(e));break;case 1:if(a===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(e,o,null);else{if(this.calendarMode==="Gregorian")this.currentDate.setFullYear(o.getFullYear());else{this.islamicPreviousHeader=this.headerElement.textContent;var l=this.islamicModule.getIslamicDate(o);this.currentDate=this.islamicModule.toGregorian(l.year,l.month,1)}this.effect=Po,Q(this.tableBodyElement),this.renderYears(e)}}},i.prototype.switchView=function(e,t,r,s){switch(e){case 0:Q(this.tableBodyElement),this.renderMonths(t,null,s);break;case 1:Q(this.tableBodyElement),this.renderYears(t);break;case 2:Q(this.tableBodyElement),this.renderDecades(t)}},i.prototype.getModuleName=function(){return"calendar"},i.prototype.requiredModules=function(){var e=[];return this.calendarMode==="Islamic"&&e.push({args:[this],member:"islamic",name:"Islamic"}),e},i.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},i.prototype.onPropertyChanged=function(e,t,r,s){this.effect="";for(var a=0,o=Object.keys(e);a<o.length;a++){var l=o[a];switch(l){case"enableRtl":e.enableRtl?this.getModuleName()==="calendar"?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):this.getModuleName()==="calendar"?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),this.getModuleName()!=="datepicker"?this.createContentHeader():this.calendarElement&&this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),l==="min"?this.setProperties({min:this.checkDateValue(new Date(this.checkValue(e.min)))},!0):this.setProperties({max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.setProperties({start:this.currentView()},!0),this.tableBodyElement&&Q(this.tableBodyElement),this.minMaxUpdate(),r&&this.validateValues(r,s),this.getModuleName()!=="datepicker"?this.createContentBody():this.calendarElement&&this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(Q(this.todayElement),Q(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(I([this.todayElement],_e),Q(this.todayElement),Q(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":case"weekRule":this.checkView(),this.getModuleName()!=="datepicker"?(this.createContentHeader(),this.createContentBody()):this.calendarElement&&(this.createContentHeader(),this.createContentBody());break;case"locale":if(this.globalize=new je(this.locale),this.getModuleName()!=="datepicker"?(this.createContentHeader(),this.createContentBody()):this.calendarElement&&(this.createContentHeader(),this.createContentBody()),this.getModuleName()==="calendar"){var h={today:"Today"};this.l10=new hi(this.getModuleName(),h,this.locale)}this.l10.setLocale(this.locale),this.showTodayButton&&this.updateFooter();break;case"showTodayButton":e.showTodayButton?this.createContentFooter():!d(this.todayElement)&&!d(this.footer)&&(Q(this.todayElement),Q(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:e.showTodayButton},!0);break}}},i.prototype.validateValues=function(e,t){if(e&&!d(t)&&t.length>0){for(var r=this.copyValues(t),s=0;s<r.length;s++){var a=r[s],o=this.calendarMode==="Gregorian"?"gregorian":"islamic",l=void 0,h=void 0,c=void 0;this.calendarMode==="Gregorian"?(l={type:"date",skeleton:"yMd"},h=this.globalize.formatDate(a,l),c=this.globalize.parseDate(h,l)):(l={type:"date",skeleton:"yMd",calendar:"islamic"},h=this.globalize.formatDate(a,l),c=this.globalize.parseDate(h,l));var u={type:"date",skeleton:"yMd",calendar:o},p=this.globalize.formatDate(this.min,u),f=p,v={type:"date",skeleton:"yMd",calendar:o},m=this.globalize.formatDate(this.max,v),g=m,y=this.globalize.parseDate(f,u),b=this.globalize.parseDate(g,v);(+c<+y||+c>+b)&&(r.splice(s,1),s=-1)}this.setProperties({values:r},!0)}},i.prototype.setValueUpdate=function(){d(this.tableBodyElement)||(Q(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())},i.prototype.copyValues=function(e){var t=[];if(!d(e)&&e.length>0)for(var r=0;r<e.length;r++)t.push(new Date(+e[r]));return t},i.prototype.titleUpdate=function(e,t){var r=new je(this.locale),s,a,o=this.calendarMode==="Gregorian"?"gregorian":"islamic";switch(this.calendarMode==="Gregorian"?(s=r.formatDate(e,{type:"dateTime",skeleton:"yMMMM",calendar:o}),a=r.formatDate(e,{format:null,type:"dateTime",skeleton:"y",calendar:o})):(s=r.formatDate(e,{type:"dateTime",format:"MMMM y",calendar:o}),a=r.formatDate(e,{type:"dateTime",format:"y",calendar:o})),t){case"days":this.headerTitleElement.textContent=this.toCapitalize(s);break;case"months":this.headerTitleElement.textContent=a}},i.prototype.setActiveDescendant=function(){var e,t=this.tableBodyElement.querySelector("tr td.e-focused-date"),r=this.tableBodyElement.querySelector("tr td.e-selected"),s=this.calendarMode==="Gregorian"?"gregorian":"islamic",a,o=this.currentView();return o==="Month"?a=this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"full",calendar:s}):o==="Year"?s!=="islamic"?a=this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"yMMMM",calendar:s}):a=this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"GyMMM",calendar:s}):a=this.globalize.formatDate(this.currentDate,{format:null,type:"date",skeleton:"y",calendar:s}),(r||t)&&(d(r)||r.setAttribute("aria-selected","true"),(t||r).setAttribute("aria-label",a),e=(t||r).getAttribute("id")),e},i.prototype.iconHandler=function(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}},i.prototype.destroy=function(){this.getModuleName()==="calendar"&&this.element?I([this.element],[la]):this.calendarElement&&this.element&&I([this.element],[la]),this.getModuleName()==="calendar"&&this.element&&(d(this.headerTitleElement)||C.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&C.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),d(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element&&(this.element.innerHTML=""),this.todayElement=null,this.tableBodyElement=null,this.todayButtonEvent=null,this.renderDayCellArgs=null,this.headerElement=null,this.nextIcon=null,this.table=null,this.tableHeadElement=null,this.previousIcon=null,this.headerTitleElement=null,this.footer=null,this.contentElement=null,n.prototype.destroy.call(this)},i.prototype.title=function(e){var t=this.getViewNumber(this.currentView());this.effect=Po,this.switchView(++t,e)},i.prototype.getViewNumber=function(e){return e==="Month"?0:e==="Year"?1:2},i.prototype.navigateTitle=function(e){e.preventDefault(),this.title(e)},i.prototype.previous=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(e);break}},i.prototype.navigatePrevious=function(e){!H.isDevice&&e.preventDefault(),this.calendarMode==="Gregorian"?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(e)},i.prototype.next=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(e);break}},i.prototype.navigateNext=function(e){!H.isDevice&&e.preventDefault(),this.calendarMode==="Gregorian"?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(e)},i.prototype.navigateTo=function(e,t,r){+t>=+this.min&&+t<=+this.max&&(this.currentDate=t),+t<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+t>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(e)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(e))&&(e=this.depth),this.switchView(this.getViewNumber(e),null,null,r)},i.prototype.currentView=function(){return!d(this.contentElement)&&this.contentElement.classList.contains(sc)?"Year":!d(this.contentElement)&&this.contentElement.classList.contains(xf)?"Decade":"Month"},i.prototype.getDateVal=function(e,t){return!d(t)&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},i.prototype.getCultureObjects=function(e,t){var r=d(this.dayHeaderFormat)?null:".dates.calendars.gregorian.days.format."+this.dayHeaderFormat.toLowerCase(),s=d(this.dayHeaderFormat)?null:".dates.calendars.islamic.days.format."+this.dayHeaderFormat.toLowerCase(),a="main.";return this.calendarMode==="Gregorian"?V(a+""+this.locale+r,e):V("main."+this.locale+s,e)},i.prototype.getWeek=function(e){var t=new Date(this.checkValue(e)).valueOf(),r=new Date(e.getFullYear(),0,1).valueOf();return Math.ceil((t-r+ac)/ac/7)},i.prototype.setStartDate=function(e,t){var r=e.getTimezoneOffset(),s=new Date(e.getTime()+t),a=s.getTimezoneOffset()-r;e.setTime(s.getTime()+a*aC)},i.prototype.addMonths=function(e,t){if(this.calendarMode==="Gregorian"){var r=e.getDate();e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(r,this.getMaxDays(e)))}else{var s=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(s.year,s.month+t,1)}},i.prototype.addYears=function(e,t){if(this.calendarMode==="Gregorian"){var r=e.getDate();e.setDate(1),e.setFullYear(e.getFullYear()+t),e.setDate(Math.min(r,this.getMaxDays(e)))}else{var s=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(s.year+t,s.month,1)}},i.prototype.getIdValue=function(e,t){var r;e?r=e.currentTarget:r=t;var s=this.calendarMode==="Gregorian"?"gregorian":"islamic",a={type:"dateTime",skeleton:"full",calendar:s},o=this.globalize.formatDate(new Date(parseInt(""+r.getAttribute("id"),0)),a),l=this.globalize.parseDate(o,a),h=l.valueOf()-l.valueOf()%1e3;return new Date(h)},i.prototype.adjustLongHeaderSize=function(){I([this.element],Rf),this.dayHeaderFormat==="Wide"&&T([this.getModuleName()==="calendar"?this.element:this.calendarElement],Rf)},i.prototype.selectDate=function(e,t,r,s,a){var o=r||e.currentTarget;if(this.isDateSelected=!1,this.currentView()==="Decade")this.setDateDecade(this.currentDate,t.getFullYear());else if(this.currentView()==="Year")this.setDateYear(this.currentDate,t);else{if(s&&!this.checkPresentDate(t,a)){var l=this.copyValues(a);!d(a)&&l.length>0?(l.push(new Date(this.checkValue(t))),this.setProperties({values:l},!0),this.setProperties({value:a[a.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(t))]},!0)}else this.setProperties({value:new Date(this.checkValue(t))},!0);this.currentDate=new Date(this.checkValue(t))}var h=M(o,"."+la);if(d(h)&&(h=this.tableBodyElement),!s&&!d(h.querySelector("."+Ct))&&I([h.querySelector("."+Ct)],Ct),!s&&!d(h.querySelector("."+Zt))&&I([h.querySelector("."+Zt)],Zt),!s&&!d(h.querySelector("."+ys))&&I([h.querySelector("."+ys)],ys),s){for(var l=this.copyValues(a),c=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td")),u=0;u<c.length;u++){var p=h.querySelectorAll("td."+Zt)[0],f=h.querySelectorAll("td."+Ct)[0];c[u]===p&&I([c[u]],Zt),c[u]===f&&!this.checkPresentDate(new Date(parseInt(f.getAttribute("id").split("_")[0],10)),a)&&I([c[u]],Ct)}if(o.classList.contains(Ct)){I([o],Ct);for(var v=0;v<l.length;v++){var m=this.calendarMode==="Gregorian"?"gregorian":"islamic",g={format:null,type:"date",skeleton:"short",calendar:m},y=this.globalize.formatDate(t,g),b=this.globalize.formatDate(l[v],g);if(y===b){var u=l.indexOf(l[v]);l.splice(u,1),T([o],Zt)}}this.setProperties({values:l},!0)}else T([o],Ct)}else T([o],Ct);this.isDateSelected=!0},i.prototype.checkPresentDate=function(e,t){var r=!1;if(!d(t))for(var s=0;s<t.length;s++){var a=this.calendarMode==="Gregorian"?"gregorian":"islamic",o=this.globalize.formatDate(e,{format:null,type:"date",skeleton:"short",calendar:a}),l=this.globalize.formatDate(t[s],{format:null,type:"date",skeleton:"short",calendar:a});o===l&&(r=!0)}return r},i.prototype.setAriaActiveDescendant=function(){J(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})},i.prototype.previousIconHandler=function(e){e?d(this.previousIcon)||(C.remove(this.previousIcon,"click",this.navigatePreviousHandler),T([this.previousIcon],""+_e),T([this.previousIcon],""+Fr),this.previousIcon.setAttribute("aria-disabled","true")):(C.add(this.previousIcon,"click",this.navigatePreviousHandler),I([this.previousIcon],""+_e),I([this.previousIcon],""+Fr),this.previousIcon.setAttribute("aria-disabled","false"))},i.prototype.renderDayCellEvent=function(e){$(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)},i.prototype.navigatedEvent=function(e){$(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)},i.prototype.triggerNavigate=function(e){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(e)},i.prototype.nextIconHandler=function(e){e?d(this.previousIcon)||(C.remove(this.nextIcon,"click",this.navigateNextHandler),T([this.nextIcon],_e),T([this.nextIcon],Fr),this.nextIcon.setAttribute("aria-disabled","true")):(C.add(this.nextIcon,"click",this.navigateNextHandler),I([this.nextIcon],_e),I([this.nextIcon],Fr),this.nextIcon.setAttribute("aria-disabled","false"))},i.prototype.compare=function(e,t,r){var s=t.getFullYear(),a,o;return a=s,o=0,r&&(s=s-s%r,a=s-s%r+r-1),e.getFullYear()>a?o=1:e.getFullYear()<s&&(o=-1),o},i.prototype.isMinMaxRange=function(e){return+e>=+this.min&&+e<=+this.max},i.prototype.isMonthYearRange=function(e){if(this.calendarMode==="Gregorian")return e.getMonth()>=this.min.getMonth()&&e.getFullYear()>=this.min.getFullYear()&&e.getMonth()<=this.max.getMonth()&&e.getFullYear()<=this.max.getFullYear();var t=this.islamicModule.getIslamicDate(e);return t.month>=this.islamicModule.getIslamicDate(new Date(1941,12,18)).month&&t.year>=this.islamicModule.getIslamicDate(new Date(1941,12,18)).year&&t.month<=this.islamicModule.getIslamicDate(new Date(2068,2,4)).month&&t.year<=this.islamicModule.getIslamicDate(new Date(2068,2,4)).year},i.prototype.compareYear=function(e,t){return this.compare(e,t,0)},i.prototype.compareDecade=function(e,t){return this.compare(e,t,10)},i.prototype.shiftArray=function(e,t){return e.slice(t).concat(e.slice(0,t))},i.prototype.addDay=function(e,t,r,s,a){var o=t,l=new Date(+e);if(!d(this.tableBodyElement)&&!d(r)){for(;this.findNextTD(new Date(+e),o,s,a);)o+=t;var h=new Date(l.setDate(l.getDate()+o));o=+h>+s||+h<+a?o===t?t-t:t:o}e.setDate(e.getDate()+o)},i.prototype.findNextTD=function(e,t,r,s){var a=new Date(e.setDate(e.getDate()+t)),o=[],l=!1;if((!d(a)&&a.getMonth())===(!d(this.currentDate)&&this.currentDate.getMonth())){var h=void 0;this.calendarMode==="Gregorian"?h=this.renderDays(a):h=this.islamicModule.islamicRenderDays(this.currentDate,a),o=h.filter(function(u){return u.classList.contains(_e)})}else o=this.tableBodyElement.querySelectorAll("td."+_e);if(+a<=+r&&+a>=+s&&o.length)for(var c=0;c<o.length&&(l=+a==+new Date(parseInt(o[c].id,0)),!l);c++);return l},i.prototype.getMaxDays=function(e){var t,r=new Date(this.checkValue(e));t=28;for(var s=r.getMonth();r.getMonth()===s;)++t,r.setDate(t);return t-1},i.prototype.setDateDecade=function(e,t){e.setFullYear(t),this.setProperties({value:new Date(this.checkValue(e))},!0)},i.prototype.setDateYear=function(e,t){e.setFullYear(t.getFullYear(),t.getMonth(),e.getDate()),t.getMonth()!==e.getMonth()&&(e.setDate(0),this.currentDate=new Date(this.checkValue(t))),this.setProperties({value:new Date(this.checkValue(e))},!0)},i.prototype.compareMonth=function(e,t){var r;return e.getFullYear()>t.getFullYear()?r=1:e.getFullYear()<t.getFullYear()?r=-1:r=e.getMonth()===t.getMonth()?0:e.getMonth()>t.getMonth()?1:-1,r},i.prototype.checkValue=function(e){return e instanceof Date?e.toUTCString():""+e},i.prototype.checkView=function(){this.start!=="Decade"&&this.start!=="Year"&&this.setProperties({start:"Month"},!0),this.depth!=="Decade"&&this.depth!=="Year"&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)},i.prototype.getDate=function(e,t){return t&&(e=new Date(e.toLocaleString("en-US",{timeZone:t}))),e},Ge([S(new Date(1900,0,1))],i.prototype,"min",void 0),Ge([S(!0)],i.prototype,"enabled",void 0),Ge([S(null)],i.prototype,"cssClass",void 0),Ge([S(new Date(2099,11,31))],i.prototype,"max",void 0),Ge([S(null)],i.prototype,"firstDayOfWeek",void 0),Ge([S("Gregorian")],i.prototype,"calendarMode",void 0),Ge([S("Month")],i.prototype,"start",void 0),Ge([S("Month")],i.prototype,"depth",void 0),Ge([S(!1)],i.prototype,"weekNumber",void 0),Ge([S("FirstDay")],i.prototype,"weekRule",void 0),Ge([S(!0)],i.prototype,"showTodayButton",void 0),Ge([S("Short")],i.prototype,"dayHeaderFormat",void 0),Ge([S(!1)],i.prototype,"enablePersistence",void 0),Ge([S(null)],i.prototype,"keyConfigs",void 0),Ge([S(null)],i.prototype,"serverTimezoneOffset",void 0),Ge([_()],i.prototype,"created",void 0),Ge([_()],i.prototype,"destroyed",void 0),Ge([_()],i.prototype,"navigated",void 0),Ge([_()],i.prototype,"renderDayCell",void 0),i=Ge([Ft],i),i}(_i),iy=function(n){ty(i,n);function i(e,t){return n.call(this,e,t)||this}return i.prototype.render=function(){if(this.calendarMode==="Islamic"&&this.islamicModule===void 0&&yS("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&typeof this.values=="object"&&!d(this.values)&&this.values.length>0){for(var e=[],t=[],r=0;r<this.values.length;r++)e.indexOf(+this.values[r])===-1&&(e.push(+this.values[r]),t.push(this.values[r]));this.setProperties({values:t},!0);for(var s=0;s<this.values.length;s++)if(!this.checkDateValue(this.values[s]))if(typeof this.values[s]=="string"&&this.checkDateValue(new Date(this.checkValue(this.values[s])))){var a=new Date(this.checkValue(this.values[s]));this.values.splice(s,1),this.values.splice(s,0,a)}else this.values.splice(s,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),this.getModuleName()==="calendar"&&(this.setEnable(this.enabled),this.setClass(this.cssClass)),n.prototype.render.call(this),this.getModuleName()==="calendar"){var o=M(this.element,"form");o&&C.add(o,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()},i.prototype.setEnable=function(e){e?I([this.element],_e):T([this.element],_e)},i.prototype.setClass=function(e,t){d(t)||(t=t.replace(/\s+/g," ").trim()),d(e)||(e=e.replace(/\s+/g," ").trim()),!d(t)&&t!==""&&I([this.element],t.split(" ")),d(e)||T([this.element],e.split(" "))},i.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(t,e)},i.prototype.setTimeZone=function(e){if(!d(this.serverTimezoneOffset)&&this.value){var t=e,r=new Date().getTimezoneOffset()/60,s=t+r;s=this.isDayLightSaving()?s--:s,this.value=new Date(this.value.getTime()+s*60*60*1e3)}},i.prototype.formResetHandler=function(){this.setProperties({value:null},!0)},i.prototype.validateDate=function(){typeof this.value=="string"&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),n.prototype.validateDate.call(this,this.value),!d(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)},i.prototype.minMaxUpdate=function(){this.getModuleName()==="calendar"&&(!d(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!d(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),this.getModuleName()!=="calendar"&&!d(this.value)?!d(this.value)&&this.value<this.min&&this.min<=this.max?n.prototype.minMaxUpdate.call(this,this.min):!d(this.value)&&this.value>this.max&&this.min<=this.max&&n.prototype.minMaxUpdate.call(this,this.max):n.prototype.minMaxUpdate.call(this,this.value)},i.prototype.generateTodayVal=function(e){var t=new Date;return d(this.timezone)||(t=n.prototype.getDate.call(this,t,this.timezone)),e&&d(this.timezone)?(t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),t.setSeconds(e.getSeconds()),t.setMilliseconds(e.getMilliseconds())):t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),t},i.prototype.todayButtonClick=function(e){if(this.showTodayButton){var t=this.generateTodayVal(this.value);if(this.setProperties({value:t},!0),this.isTodayClicked=!0,this.todayButtonEvent=e,this.isMultiSelection){var r=this.copyValues(this.values);n.prototype.checkPresentDate.call(this,t,this.values)||(r.push(t),this.setProperties({values:r}))}n.prototype.todayButtonClick.call(this,e,new Date(+this.value))}},i.prototype.keyActionHandle=function(e){n.prototype.keyActionHandle.call(this,e,this.value,this.isMultiSelection)},i.prototype.preRender=function(){var e=this;this.changeHandler=function(t){e.triggerChange(t)},this.checkView(),n.prototype.preRender.call(this,this.value)},i.prototype.createContent=function(){this.previousDate=this.value,this.previousDateTime=this.value,n.prototype.createContent.call(this)},i.prototype.minMaxDate=function(e){return n.prototype.minMaxDate.call(this,e)},i.prototype.renderMonths=function(e,t,r){n.prototype.renderMonths.call(this,e,this.value,r)},i.prototype.renderDays=function(e,t,r,s,a,o){var l=n.prototype.renderDays.call(this,e,this.value,this.isMultiSelection,this.values,a,o);return this.isMultiSelection&&n.prototype.validateValues.call(this,this.isMultiSelection,this.values),l},i.prototype.renderYears=function(e){this.calendarMode==="Gregorian"?n.prototype.renderYears.call(this,e,this.value):this.islamicModule.islamicRenderYears(e,this.value)},i.prototype.renderDecades=function(e){this.calendarMode==="Gregorian"?n.prototype.renderDecades.call(this,e,this.value):this.islamicModule.islamicRenderDecade(e,this.value)},i.prototype.renderTemplate=function(e,t,r,s){this.calendarMode==="Gregorian"?n.prototype.renderTemplate.call(this,e,t,r,s,this.value):this.islamicModule.islamicRenderTemplate(e,t,r,s,this.value),this.changedArgs={value:this.value,values:this.values},s&&s.type==="click"&&s.currentTarget.classList.contains(bi)?this.changeHandler(s):this.changeHandler()},i.prototype.clickHandler=function(e){var t=e.currentTarget;if(this.isPopupClicked=!0,t.classList.contains(bi))if(this.isMultiSelection){var r=this.copyValues(this.values);r.toString().indexOf(this.getIdValue(e,null).toString())===-1?(r.push(this.getIdValue(e,null)),this.setProperties({values:r},!0),this.setProperties({value:this.values[this.values.length-1]},!0)):this.previousDates=!0}else this.setProperties({value:this.getIdValue(e,null)},!0);var s=this.currentView();n.prototype.clickHandler.call(this,e,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!d(this.tableBodyElement.querySelectorAll("."+Zt)[0])&&s==="Year"&&this.tableBodyElement.querySelectorAll("."+Zt)[0].classList.remove(Zt)},i.prototype.switchView=function(e,t,r,s){n.prototype.switchView.call(this,e,t,this.isMultiSelection,s)},i.prototype.getModuleName=function(){return n.prototype.getModuleName.call(this),"calendar"},i.prototype.getPersistData=function(){n.prototype.getPersistData.call(this);var e=["value","values"];return this.addOnPersist(e)},i.prototype.onPropertyChanged=function(e,t){this.effect="",this.rangeValidation(this.min,this.max);for(var r=0,s=Object.keys(e);r<s.length;r++){var a=s[r];switch(a){case"value":this.isDateSelected&&(typeof e.value=="string"?this.setProperties({value:new Date(this.checkValue(e.value))},!0):e.value=new Date(this.checkValue(e.value)),isNaN(+this.value)&&this.setProperties({value:t.value},!0),this.update());break;case"values":if(this.isDateSelected){if(typeof e.values=="string"||typeof e.values=="number")this.setProperties({values:null},!0);else{for(var o=this.copyValues(this.values),l=0;l<o.length;l++){var h=o[l];this.checkDateValue(h)&&!n.prototype.checkPresentDate.call(this,h,o)&&o.push(h)}this.setProperties({values:o},!0),this.values.length>0&&this.setProperties({value:e.values[e.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:e.isMultiSelection},!0),this.update());break;case"enabled":this.setEnable(this.enabled);break;case"cssClass":this.getModuleName()==="calendar"&&this.setClass(e.cssClass,t.cssClass);break;default:n.prototype.onPropertyChanged.call(this,e,t,this.isMultiSelection,this.values)}}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},i.prototype.destroy=function(){if(n.prototype.destroy.call(this),this.getModuleName()==="calendar"){this.changedArgs=null;var e=M(this.element,"form");e&&C.remove(e,"reset",this.formResetHandler.bind(this))}},i.prototype.navigateTo=function(e,t,r){this.minMaxUpdate(),n.prototype.navigateTo.call(this,e,t,r)},i.prototype.currentView=function(){return n.prototype.currentView.call(this)},i.prototype.addDate=function(e){if(typeof e!="string"&&typeof e!="number"){var t=this.copyValues(this.values);if(typeof e=="object"&&e.length>0)for(var r=e,s=0;s<r.length;s++)this.checkDateValue(r[s])&&!n.prototype.checkPresentDate.call(this,r[s],t)&&(!d(t)&&t.length>0?t.push(r[s]):t=[new Date(+r[s])]);else this.checkDateValue(e)&&!n.prototype.checkPresentDate.call(this,e,t)&&(!d(t)&&t.length>0?t.push(e):t=[new Date(+e)]);this.setProperties({values:t},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,t),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},i.prototype.removeDate=function(e){if(typeof e!="string"&&typeof e!="number"&&!d(this.values)&&this.values.length>0){var t=this.copyValues(this.values);if(typeof e=="object"&&e.length>0)for(var r=e,s=0;s<r.length;s++)for(var a=0;a<t.length;a++)+t[a]==+r[s]&&t.splice(a,1);else for(var a=0;a<t.length;a++)+t[a]==+e&&t.splice(a,1);this.setProperties({values:t},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},i.prototype.setTodayDate=function(e){var t=new Date(+e);this.setProperties({value:t},!0),n.prototype.todayButtonClick.call(this,null,t,!0)},i.prototype.update=function(){this.validateDate(),this.minMaxUpdate(),n.prototype.setValueUpdate.call(this)},i.prototype.selectDate=function(e,t,r){n.prototype.selectDate.call(this,e,t,r,this.isMultiSelection,this.values),this.isMultiSelection&&!d(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(e)},i.prototype.changeEvent=function(e){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))},i.prototype.triggerChange=function(e){!d(this.todayButtonEvent)&&this.isTodayClicked&&(e=this.todayButtonEvent,this.isTodayClicked=!1),this.changedArgs.event=e||null,this.changedArgs.isInteracted=!d(e),d(this.value)||this.setProperties({value:this.value},!0),!this.isMultiSelection&&+this.value!==Number.NaN&&(!d(this.value)&&!d(this.previousDate)||this.previousDate===null&&!isNaN(+this.value))?this.changeEvent(e):!d(this.values)&&this.previousValues!==this.values.length&&(this.changeEvent(e),this.previousValues=this.values.length)},Ge([S(null)],i.prototype,"value",void 0),Ge([S(null)],i.prototype,"values",void 0),Ge([S(!1)],i.prototype,"isMultiSelection",void 0),Ge([_()],i.prototype,"change",void 0),i=Ge([Ft],i),i}(oC),lC=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Re=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},hC="e-date-wrapper",Ho="e-datepicker",cC="e-lib",uC="e-control",Nf="e-popup-wrapper",dC="e-input-group-icon",pC="e-popup",fC="e-input-group",oc="e-input-focus",vC="e-input",Lf="e-error",Bo="e-active",Vf="e-date-overflow",mC="e-date-icon",gC="e-icons",yC=300,bC=4,Fo="e-selected",SC="e-focused-date",lc="e-non-edit",Pf=["title","class","style"],ry=function(n){lC(i,n);function i(e,t){var r=n.call(this,e,t)||this;return r.isDateIconClicked=!1,r.isAltKeyPressed=!1,r.isInteracted=!0,r.invalidValueString=null,r.checkPreviousValue=null,r.maskedDateValue="",r.preventChange=!1,r.isIconClicked=!1,r.isDynamicValueChanged=!1,r.moduleName=r.getModuleName(),r.isFocused=!1,r.isBlur=!1,r.isKeyAction=!1,r.datepickerOptions=e,r}return i.prototype.render=function(){this.initialize(),this.bindEvents(),this.floatLabelType!=="Never"&&X.calculateWidth(this.inputElement,this.inputWrapper.container),!d(this.inputWrapper.buttons[0])&&!d(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!d(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),this.initTimeZone=new Date().getTimezoneOffset(),this.renderComplete(),this.setTimeZone(this.serverTimezoneOffset)},i.prototype.setTimeZone=function(e){if(!d(this.serverTimezoneOffset)&&this.value){var t=new Date().getTimezoneOffset()/60,r=e,s=r+t;s=this.isDayLightSaving()?s--:s,this.value=new Date(this.value.getTime()+s*60*60*1e3),this.updateInput(),this.changeTrigger(null)}},i.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,t)},i.prototype.setAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):J(this.inputElement,{readonly:""}),this.updateIconState()},i.prototype.updateIconState=function(){!this.allowEdit&&this.inputWrapper&&!this.readonly?this.inputElement.value===""?I([this.inputWrapper.container],[lc]):T([this.inputWrapper.container],[lc]):this.inputWrapper&&I([this.inputWrapper.container],[lc])},i.prototype.initialize=function(){this.checkInvalidValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),this.enableMask&&!this.value&&this.maskedDateValue&&(this.floatLabelType==="Always"||!this.floatLabelType||!this.placeholder)?(this.updateInput(!0),this.updateInputValue(this.maskedDateValue)):this.enableMask||this.updateInput(!0),this.previousElementValue=this.inputElement.value,this.previousDate=d(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value},i.prototype.createInput=function(){var e={"aria-atomic":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false"};if(this.getModuleName()==="datepicker"){var t={placeholder:this.placeholder};this.globalize=new je(this.locale),this.l10n=new hi("datepicker",t,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}this.fullScreenMode&&H.isDevice&&(this.cssClass+=" e-popup-expand");var r=this.cssClass;!d(this.cssClass)&&this.cssClass!==""&&(r=this.cssClass.replace(/\s+/g," ").trim());var s=!this.enableMask;this.inputWrapper=X.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,bindClearAction:s,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:r,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:[dC+" "+mC+" "+gC]},this.createElement),this.setWidth(this.width),this.inputElement.name!==""?this.inputElement.setAttribute("name",""+this.inputElement.getAttribute("name")):this.inputElement.setAttribute("name",""+this.element.id),J(this.inputElement,e),this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName()),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),X.addAttributes({"aria-label":"select",role:"button"},this.inputWrapper.buttons[0]),T([this.inputWrapper.container],hC)},i.prototype.updateInput=function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r;if(this.value&&!this.isCalendar()&&this.disabledDates(e,t),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(n.prototype.validateDate.call(this),this.minMaxUpdates(),n.prototype.minMaxUpdate.call(this)),!d(this.value)){var s=this.value,a=void 0,o=d(this.formatString)?this.dateTimeFormat:this.formatString;if(this.getModuleName()==="datetimepicker"?this.calendarMode==="Gregorian"?a=this.globalize.formatDate(this.value,{format:o,type:"dateTime",skeleton:"yMd"}):a=this.globalize.formatDate(this.value,{format:o,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(this.calendarMode==="Gregorian"?r={format:this.formatString,type:"dateTime",skeleton:"yMd"}:r={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},a=this.globalize.formatDate(this.value,r)),+s<=+this.max&&+s>=+this.min)this.updateInputValue(a);else{var l=+s>=+this.max||!+this.value||!+this.value||+s<=+this.min;!this.strictMode&&l&&this.updateInputValue(a)}}d(this.value)&&this.strictMode&&(this.enableMask?(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})):this.updateInputValue("")),!this.strictMode&&d(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()},i.prototype.minMaxUpdates=function(){!d(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!d(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})},i.prototype.checkStringValue=function(e){var t=null,r=null,s=null;if(this.getModuleName()==="datetimepicker"){var a=new je(this.locale);this.calendarMode==="Gregorian"?(r={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},s={format:a.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(r={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},s={format:a.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else this.calendarMode==="Gregorian"?r={format:this.formatString,type:"dateTime",skeleton:"yMd"}:r={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return t=this.checkDateValue(this.globalize.parseDate(this.getAmPmValue(e),r)),d(t)&&this.getModuleName()==="datetimepicker"&&(t=this.checkDateValue(this.globalize.parseDate(this.getAmPmValue(e),s))),t},i.prototype.checkInvalidValue=function(e){if(!(e instanceof Date)&&!d(e)){var t=null,r=e;if(typeof e=="number"&&(r=e.toString()),this.getModuleName()==="datetimepicker"){var s=new je(this.locale);this.calendarMode==="Gregorian"?(this.dateTimeFormat,s.getDatePattern({skeleton:"yMd"})):(this.dateTimeFormat,s.getDatePattern({skeleton:"yMd"}))}else this.calendarMode==="Gregorian"?this.formatString:this.formatString;var a=!1;if(typeof r!="string")r=null,a=!0;else if(typeof r=="string"&&(r=r.trim()),t=this.checkStringValue(r),!t){var o=null,l=null;o=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,l=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!o.test(r)&&!l.test(r)||/^[a-zA-Z0-9- ]*$/.test(r)||isNaN(+new Date(this.checkValue(r)))?a=!0:t=new Date(r)}a?(this.strictMode||(this.invalidValueString=r),this.setProperties({value:null},!0)):this.setProperties({value:t},!0)}},i.prototype.bindInputEvent=function(){(!d(this.formatString)||this.enableMask)&&(this.enableMask||this.formatString.indexOf("y")===-1?C.add(this.inputElement,"input",this.inputHandler,this):C.remove(this.inputElement,"input",this.inputHandler))},i.prototype.bindEvents=function(){C.add(this.inputWrapper.buttons[0],"mousedown",this.dateIconHandler,this),C.add(this.inputElement,"mouseup",this.mouseUpHandler,this),C.add(this.inputElement,"focus",this.inputFocusHandler,this),C.add(this.inputElement,"blur",this.inputBlurHandler,this),C.add(this.inputElement,"keyup",this.keyupHandler,this),this.enableMask&&C.add(this.inputElement,"keydown",this.keydownHandler,this),this.bindInputEvent(),C.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&C.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&C.add(this.formElement,"reset",this.resetFormHandler,this),this.defaultKeyConfigs=$(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new Ci(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},i.prototype.keydownHandler=function(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Backspace":case"Delete":this.enableMask&&!this.popupObj&&!this.readonly&&(e.code!=="Delete"&&e.code!=="Backspace"&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e}));break}},i.prototype.unBindEvents=function(){d(this.inputWrapper)||C.remove(this.inputWrapper.buttons[0],"mousedown",this.dateIconHandler),C.remove(this.inputElement,"mouseup",this.mouseUpHandler),C.remove(this.inputElement,"focus",this.inputFocusHandler),C.remove(this.inputElement,"blur",this.inputBlurHandler),C.remove(this.inputElement,"change",this.inputChangeHandler),C.remove(this.inputElement,"keyup",this.keyupHandler),this.enableMask&&C.remove(this.inputElement,"keydown",this.keydownHandler),this.showClearButton&&this.inputWrapper.clearButton&&C.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&C.remove(this.formElement,"reset",this.resetFormHandler)},i.prototype.resetFormHandler=function(){if(this.enabled&&!this.inputElement.disabled){var e=this.inputElement.getAttribute("value");(this.element.tagName==="EJS-DATEPICKER"||this.element.tagName==="EJS-DATETIMEPICKER")&&(e="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(e),this.errorClass())}},i.prototype.restoreValue=function(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=d(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:"yMd"})},i.prototype.inputChangeHandler=function(e){this.enabled&&e.stopPropagation()},i.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&C.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},i.prototype.resetHandler=function(e){this.enabled&&(e.preventDefault(),this.clear(e))},i.prototype.mouseUpHandler=function(e){this.enableMask&&(e.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"}))},i.prototype.clear=function(e){this.setProperties({value:null},!0),this.enableMask||this.updateInputValue(""),d(this.value)&&(this.currentDate=new Date(new Date().setHours(0,0,0,0)));var t={event:e};if(this.trigger("cleared",t),this.invalidValueString="",this.updateInput(),this.popupUpdate(),this.changeEvent(e),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}),M(this.element,"form")){var r=this.element,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),r.dispatchEvent(s)}},i.prototype.preventEventBubbling=function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")},i.prototype.updateInputValue=function(e){X.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)},i.prototype.dateIconHandler=function(e){this.enabled&&(this.isIconClicked=!0,H.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),e.preventDefault(),this.readonly||(this.isCalendar()?this.hide(e):(this.isDateIconClicked=!0,this.show(null,e),this.getModuleName()==="datetimepicker"&&this.inputElement.focus(),this.inputElement.focus(),T([this.inputWrapper.container],[oc]),T(this.inputWrapper.buttons,Bo))),this.isIconClicked=!1)},i.prototype.updateHtmlAttributeToWrapper=function(){if(!d(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var r=t[e];if(!d(this.htmlAttributes[""+r])&&Pf.indexOf(r)>-1)if(r==="class"){var s=this.htmlAttributes[""+r].replace(/\s+/g," ").trim();s!==""&&T([this.inputWrapper.container],s.split(" "))}else if(r==="style"){var a=this.inputWrapper.container.getAttribute(r);d(a)?a=this.htmlAttributes[""+r]:a.charAt(a.length-1)===";"?a=a+this.htmlAttributes[""+r]:a=a+";"+this.htmlAttributes[""+r],this.inputWrapper.container.setAttribute(r,a)}else this.inputWrapper.container.setAttribute(r,this.htmlAttributes[""+r])}},i.prototype.updateHtmlAttributeToElement=function(){if(!d(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var r=t[e];Pf.indexOf(r)<0&&this.inputElement.setAttribute(r,this.htmlAttributes[""+r])}},i.prototype.updateCssClass=function(e,t){d(t)||(t=t.replace(/\s+/g," ").trim()),d(e)||(e=e.replace(/\s+/g," ").trim()),X.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&X.setCssClass(e,[this.popupWrapper],t)},i.prototype.calendarKeyActionHandle=function(e){switch(e.action){case"escape":this.isCalendar()?this.hide(e):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value!=+this.currentDate&&!this.isCalendar()&&this.inputWrapper.container.children[this.index].focus():this.show(null,e),this.getModuleName()==="datetimepicker"&&this.inputElement.focus();break}},i.prototype.inputFocusHandler=function(){if(this.isFocused=!0,!!this.enabled){this.initTimeZone!==new Date().getTimezoneOffset()&&this.strictModeUpdate(!0),this.enableMask&&!this.inputElement.value&&this.placeholder&&this.maskedDateValue&&!this.value&&(this.floatLabelType==="Auto"||this.floatLabelType==="Never"||this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length),this.enableMask&&this.showClearButton&&this.inputElement&&this.inputElement.value===this.maskedDateValue&&this.inputWrapper&&this.inputWrapper.clearButton&&!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")&&this.inputWrapper.clearButton.classList.add("e-clear-icon-hide");var e={model:this};this.isDateIconClicked=!1,this.trigger("focus",e),this.updateIconState(),this.clearFloatLabelOverflowWidth(),this.openOnFocus&&!this.isIconClicked&&this.show()}},i.prototype.inputHandler=function(e){this.isPopupClicked=!1,this.enableMask&&(!d(e)&&!d(e.inputType)&&e.inputType==="insertFromPaste"?this.notify("maskPasteInputHandler",{module:"MaskedDateTime"}):this.notify("inputHandler",{module:"MaskedDateTime"}))},i.prototype.inputBlurHandler=function(e){if(this.updateFloatLabelOverflowWidth(),!!this.enabled){if(this.strictModeUpdate(),this.inputElement.value===""&&d(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.isBlur=!0,this.updateInput(!1,!0),this.isBlur=!1,this.popupUpdate(),this.changeTrigger(e),this.enableMask&&this.maskedDateValue&&this.placeholder&&this.floatLabelType!=="Always"&&this.inputElement.value===this.maskedDateValue&&!this.value&&(this.floatLabelType==="Auto"||this.floatLabelType==="Never"||this.placeholder)&&this.updateInputValue(""),this.errorClass(),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),this.getModuleName()==="datepicker"){var t={model:this};this.trigger("blur",t)}this.isCalendar()&&(this.defaultKeyConfigs=$(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new Ci(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1}},i.prototype.documentHandler=function(e){!d(this.popupObj)&&!d(this.inputWrapper)&&(this.inputWrapper.container.contains(e.target)&&e.type!=="mousedown"||this.popupObj.element&&this.popupObj.element.contains(e.target))&&e.type!=="touchstart"&&e.preventDefault();var t=e.target;!M(t,".e-datepicker.e-popup-wrapper")&&!d(this.inputWrapper)&&M(t,"."+fC)!==this.inputWrapper.container&&!t.classList.contains("e-day")?(this.hide(e),t.classList.contains("e-dlg-overlay")?e.preventDefault():this.focusOut()):M(t,".e-datepicker.e-popup-wrapper")&&(t.classList.contains("e-day")&&!d(e.target.parentElement)&&e.target.parentElement.classList.contains("e-selected")&&M(t,".e-content")&&M(t,".e-content").classList.contains("e-"+this.depth.toLowerCase())?this.hide(e):M(t,".e-footer-container")&&t.classList.contains("e-today")&&t.classList.contains("e-btn")&&+new Date(+this.value)==+n.prototype.generateTodayVal.call(this,this.value)&&this.hide(e))},i.prototype.inputKeyActionHandle=function(e){var t=this.currentView();switch(e.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(e),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.strictModeUpdate(),this.updateInput(),this.changeTrigger(e),this.getModuleName()==="datepicker"&&this.show(null,e);break;case"escape":this.hide(e);break;case"enter":{var r=this.inputElement.value===this.previousElementValue,s=this.value instanceof Date&&this.previousDate instanceof Date?this.value.getTime()===this.previousDate.getTime():this.value===this.previousDate;r&&s||(this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass()),!this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),this.isCalendar()&&(e.preventDefault(),e.stopPropagation());break}case"tab":case"shiftTab":{var a=this.inputElement.selectionStart,o=this.inputElement.selectionEnd;if(this.enableMask&&!this.popupObj&&!this.readonly){var l=this.inputElement.value.length;(a===0&&o===l||o!==l&&e.action==="tab"||a!==0&&e.action==="shiftTab")&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e}),a=this.inputElement.selectionStart,o=this.inputElement.selectionEnd}this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),this.enableMask&&(this.inputElement.selectionStart=a,this.inputElement.selectionEnd=o),e.action==="tab"&&e.target===this.inputElement&&this.isCalendar()&&document.activeElement===this.inputElement&&(e.preventDefault(),this.headerTitleElement.focus()),e.action==="shiftTab"&&e.target===this.inputElement&&this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e);break}default:this.defaultAction(e),e.action==="select"&&t===this.depth&&this.hide(e)}},i.prototype.defaultAction=function(e){this.previousDate=!d(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(n.prototype.keyActionHandle.call(this,e),this.isCalendar()&&J(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))},i.prototype.popupUpdate=function(){if((d(this.value)&&!d(this.previousDate)||this.getModuleName()!=="datetimepicker"&&+this.value!=+this.previousDate||this.getModuleName()==="datetimepicker"&&+this.value!=+this.previousDateTime)&&(this.popupObj&&this.popupObj.element.querySelectorAll("."+Fo).length>0&&I(this.popupObj.element.querySelectorAll("."+Fo),[Fo]),!d(this.value)&&+this.value>=+this.min&&+this.value<=+this.max)){var e=new Date(this.checkValue(this.value));n.prototype.navigateTo.call(this,"Month",e)}},i.prototype.strictModeUpdate=function(e){var t,r=/^y/,s=/[^a-zA-Z]/,a;if(this.getModuleName()==="datetimepicker"?t=d(this.formatString)?this.dateTimeFormat:this.formatString:(!r.test(this.formatString)||s.test(this.formatString))&&(t=d(this.formatString)?this.formatString:this.formatString.replace("dd","d")),d(t))t=this.formatString;else{var o=t.split("M").length-1;o<3&&(t=t.replace("MM","M"))}var l;this.getModuleName()==="datetimepicker"?this.calendarMode==="Gregorian"?l={format:d(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:l={format:d(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:(this.calendarMode==="Gregorian"?a={format:t,type:"dateTime",skeleton:"yMd"}:a={format:t,type:"dateTime",skeleton:"yMd",calendar:"islamic"},l=a);var h;if(typeof this.inputElement.value=="string"&&(this.inputElement.value=this.inputElement.value.trim()),this.getModuleName()==="datetimepicker"){if(this.checkDateValue(this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),l))?h=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),l):(this.calendarMode==="Gregorian"?a={format:t,type:"dateTime",skeleton:"yMd"}:a={format:t,type:"dateTime",skeleton:"yMd",calendar:"islamic"},h=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),a)),(d(h)||typeof h=="object"&&isNaN(h.getTime()))&&!d(this.inputFormatsString))for(var c=0,u=this.inputFormatsString;c<u.length;c++){var p=u[c],f=void 0;if(this.calendarMode==="Gregorian"?f={format:p,type:"dateTime",skeleton:"yMd"}:f={format:p,type:"dateTime",skeleton:"yMd",calendar:"islamic"},h=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),f),!d(h)&&h instanceof Date&&!isNaN(h.getTime()))break}}else{if(h=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),l),(d(h)||typeof h=="object"&&isNaN(h.getTime()))&&!d(this.inputFormatsString))for(var v=0,m=this.inputFormatsString;v<m.length;v++){var g=m[v],f=void 0;if(this.calendarMode==="Gregorian"?f={format:g,type:"dateTime",skeleton:"yMd"}:f={format:g,type:"dateTime",skeleton:"yMd",calendar:"islamic"},h=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),f),!d(h)&&h instanceof Date&&!isNaN(h.getTime()))break}h=!d(h)&&isNaN(+h)?null:h,!d(this.formatString)&&this.inputElement.value!==""&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&this.formatString.indexOf("y")===-1&&h.setFullYear(this.value.getFullYear())}this.getModuleName()==="datepicker"&&this.value&&!isNaN(+this.value)&&h&&!e&&h.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&h?(this.updateInputValue(this.globalize.formatDate(h,l)),(this.inputElement.value!==this.previousElementValue||e)&&this.setProperties({value:h},!0)):this.strictMode||(this.inputElement.value!==this.previousElementValue||e)&&this.setProperties({value:h},!0),this.strictMode&&!h&&this.inputElement.value===(this.enableMask?this.maskedDateValue:"")&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),d(this.value)&&(this.currentDate=new Date(new Date().setHours(0,0,0,0)))},i.prototype.createCalendar=function(){var e=this;this.popupWrapper=this.createElement("div",{className:""+Ho+" "+Nf,id:this.inputElement.id+"_options"}),this.popupWrapper.setAttribute("aria-label",this.element.id),this.popupWrapper.setAttribute("role","dialog"),d(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),H.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className=""+Ho+" e-date-modal",document.body.className+=" "+Vf,this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new xr(this.popupWrapper,{content:this.calendarElement,relateTo:H.isDevice?document.body:this.inputWrapper.container,position:H.isDevice?{X:"center",Y:"center"}:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},offsetY:bC,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:H.isDevice?{X:"fit",Y:"fit"}:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},open:function(){H.isDevice&&e.fullScreenMode&&(e.iconRight=parseInt(window.getComputedStyle(e.calendarElement.querySelector(".e-header.e-month .e-prev")).marginRight,10)>16,e.touchModule=new wr(e.calendarElement.querySelector(".e-content.e-month"),{swipe:e.CalendarSwipeHandler.bind(e)}),C.add(e.calendarElement.querySelector(".e-content.e-month"),"touchstart",e.TouchStartHandler,e)),e.getModuleName()!=="datetimepicker"&&document.activeElement!==e.inputElement&&(e.defaultKeyConfigs=$(e.defaultKeyConfigs,e.keyConfigs),e.calendarElement.children[1].firstElementChild.focus(),e.calendarKeyboardModules=new Ci(e.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}),e.calendarKeyboardModules=new Ci(e.inputWrapper.container.children[e.index],{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs})),H.isDevice&&e.allowEdit&&!e.readonly&&H.isIos&&e.inputElement.blur()},close:function(){e.isDateIconClicked&&e.inputWrapper.container.children[e.index].focus(),e.value&&e.disabledDates(),e.popupObj&&e.popupObj.destroy(),e.resetCalendar(),Q(e.popupWrapper),e.popupObj=e.popupWrapper=null,e.preventArgs=null,e.calendarKeyboardModules=null,e.setAriaAttributes()},targetExitViewport:function(){H.isDevice||e.hide()}}),this.popupObj.element.className+=" "+this.cssClass,this.setAriaAttributes()},i.prototype.getAmPmValue=function(e){try{return typeof e=="string"&&e.trim()!==""?e.replace(/(am|pm|Am|aM|pM|Pm)/g,function(t){return t.toLocaleUpperCase()}):""}catch(t){return console.error("Error occurred while processing date:",t),""}},i.prototype.CalendarSwipeHandler=function(e){var t=0;if(this.iconRight)switch(e.swipeDirection){case"Left":t=1;break;case"Right":t=-1;break}else switch(e.swipeDirection){case"Up":t=1;break;case"Down":t=-1;break}this.touchStart&&(t===1?this.navigateNext(e):t===-1&&this.navigatePrevious(e),this.touchStart=!1)},i.prototype.TouchStartHandler=function(e){this.touchStart=!0},i.prototype.setAriaDisabled=function(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)},i.prototype.modelHeader=function(){var e,t=this.createElement("div",{className:"e-model-header"}),r=this.createElement("h1",{className:"e-model-year"}),s=this.createElement("div"),a=this.createElement("span",{className:"e-model-day"}),o=this.createElement("span",{className:"e-model-month"});if(this.calendarMode==="Gregorian"?e={format:"y",skeleton:"dateTime"}:e={format:"y",skeleton:"dateTime",calendar:"islamic"},r.textContent=""+this.globalize.formatDate(this.value||new Date,e),this.calendarMode==="Gregorian"?e={format:"E",skeleton:"dateTime"}:e={format:"E",skeleton:"dateTime",calendar:"islamic"},a.textContent=""+this.globalize.formatDate(this.value||new Date,e)+", ",this.calendarMode==="Gregorian"?e={format:"MMM d",skeleton:"dateTime"}:e={format:"MMM d",skeleton:"dateTime",calendar:"islamic"},o.textContent=""+this.globalize.formatDate(this.value||new Date,e),this.fullScreenMode){var l=this.createElement("span",{className:"e-popup-close"});C.add(l,"mousedown touchstart",this.modelCloseHandler,this);var h=this.showTodayButton?this.calendarElement.querySelector("button.e-today"):null;s.classList.add("e-day-wrapper"),t.appendChild(l),h&&(h.classList.add("e-outline"),t.appendChild(h))}this.fullScreenMode||t.appendChild(r),s.appendChild(a),s.appendChild(o),t.appendChild(s),this.calendarElement.insertBefore(t,this.calendarElement.firstElementChild)},i.prototype.modelCloseHandler=function(e){this.hide()},i.prototype.changeTrigger=function(e){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.isDynamicValueChanged&&this.isCalendar()&&this.popupUpdate(),this.changedArgs.value=this.value,this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!d(e),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0),this.isKeyAction=!1},i.prototype.navigatedEvent=function(e){$(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)},i.prototype.keyupHandler=function(e){this.isKeyAction=this.inputElement.value!==this.previousElementValue,this.enableMask&&this.showClearButton&&this.inputElement&&this.inputElement.value===this.maskedDateValue&&this.inputWrapper&&this.inputWrapper.clearButton&&!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")&&this.inputWrapper.clearButton.classList.add("e-clear-icon-hide")},i.prototype.changeEvent=function(e){!this.isIconClicked&&!(this.isBlur||this.isKeyAction)&&this.selectCalendar(e),(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())?(this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.isDynamicValueChanged||(this.isAngular&&(this.previousDate=this.value&&new Date(+this.value)),this.trigger("change",this.changedArgs)),this.previousDate=this.value&&new Date(+this.value),this.isDynamicValueChanged||this.hide(e),this.previousElementValue=this.inputElement.value,this.errorClass()):e&&this.hide(e),this.isKeyAction=!1},i.prototype.requiredModules=function(){var e=[];return this.calendarMode==="Islamic"&&e.push({args:[this],member:"islamic",name:"Islamic"}),this.enableMask&&e.push({args:[this],member:"MaskedDateTime"}),e},i.prototype.selectCalendar=function(e){var t,r,s;this.getModuleName()==="datetimepicker"?r=d(this.formatString)?this.dateTimeFormat:this.formatString:r=this.formatString,this.value&&(this.getModuleName()==="datetimepicker"?(this.calendarMode==="Gregorian"?s={format:r,type:"dateTime",skeleton:"yMd"}:s={format:r,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,s)):(this.calendarMode==="Gregorian"?s={format:this.formatString,type:"dateTime",skeleton:"yMd"}:s={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,s)),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})),d(t)||(this.updateInputValue(t),this.enableMask&&this.notify("setMaskSelection",{module:"MaskedDateTime"}))},i.prototype.isCalendar=function(){return!!(this.popupWrapper&&this.popupWrapper.classList.contains(""+Nf))},i.prototype.setWidth=function(e){typeof e=="number"?this.inputWrapper.container.style.width=ce(this.width):typeof e=="string"?this.inputWrapper.container.style.width=e.match(/px|%|em/)?this.width:ce(this.width):this.inputWrapper.container.style.width="100%",this.updateFloatLabelOverflowWidth()},i.prototype.show=function(e,t){var r=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){var s=!0,a=void 0;!d(this.value)&&!(+this.value>=+new Date(this.checkValue(this.min))&&+this.value<=+new Date(this.checkValue(this.max)))?(a=new Date(this.checkValue(this.value)),this.setProperties({value:null},!0)):a=this.value||null,this.isCalendar()||(n.prototype.render.call(this),this.setProperties({value:a||null},!0),this.previousDate=a,this.createCalendar()),H.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:function(){s=!1},popup:this.popupObj,event:t||null,cancel:!1,appendTo:H.isDevice?this.mobilePopupWrapper:document.body};var o=this.preventArgs;this.trigger("open",o,function(l){if(r.preventArgs=l,s&&!r.preventArgs.cancel){T(r.inputWrapper.buttons,Bo),r.preventArgs.appendTo.appendChild(r.popupWrapper),r.popupObj.refreshPosition(r.inputElement);var h={name:"FadeIn",duration:H.isDevice?0:yC};if(r.zIndex===1e3?r.popupObj.show(new wi(h),r.element):r.popupObj.show(new wi(h),null),n.prototype.setOverlayIndex.call(r,r.mobilePopupWrapper,r.popupObj.element,r.modal,H.isDevice),r.setAriaAttributes(),H.isDevice){var c=r.createElement("div",{className:"e-dlg-overlay"});c.style.zIndex=(r.zIndex-1).toString(),r.mobilePopupWrapper.appendChild(c)}}else r.popupObj.destroy(),r.popupWrapper=r.popupObj=null;!d(r.inputElement)&&r.inputElement.value===""&&!d(r.tableBodyElement)&&r.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(T([r.tableBodyElement.querySelector("td.e-selected")],SC),I(r.tableBodyElement.querySelectorAll("td.e-selected"),Fo)),C.add(document,"mousedown touchstart",r.documentHandler,r)})}},i.prototype.hide=function(e){var t=this;if(d(this.popupWrapper))H.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{var r=!0;this.preventArgs={preventDefault:function(){r=!1},popup:this.popupObj,event:e||null,cancel:!1},I(this.inputWrapper.buttons,Bo),I([document.body],Vf);var s=this.preventArgs;this.isCalendar()?this.trigger("close",s,function(a){t.closeEventCallback(r,a)}):this.closeEventCallback(r,s)}},i.prototype.closeEventCallback=function(e,t){var r=this;this.preventArgs=t,this.isCalendar()&&e&&!this.preventArgs.cancel&&(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy(),I(this.inputWrapper.buttons,Bo)),this.setAriaAttributes(),H.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),H.isDevice&&!d(this.mobilePopupWrapper)&&e&&(d(this.preventArgs)||!this.preventArgs.cancel)&&(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null),C.remove(document,"mousedown touchstart",this.documentHandler),H.isDevice&&this.allowEdit&&!this.readonly&&(this.inputElement.removeAttribute("readonly"),H.isIos&&setTimeout(function(){r.inputElement.focus()},1)),this.setAllowEdit()},i.prototype.focusIn=function(e){document.activeElement!==this.inputElement&&this.enabled&&(this.inputElement.focus(),T([this.inputWrapper.container],[oc]))},i.prototype.focusOut=function(){document.activeElement===this.inputElement&&(I([this.inputWrapper.container],[oc]),this.inputElement.blur())},i.prototype.currentView=function(){var e;return this.calendarElement&&(e=n.prototype.currentView.call(this)),e},i.prototype.navigateTo=function(e,t){this.calendarElement&&n.prototype.navigateTo.call(this,e,t)},i.prototype.destroy=function(){this.unBindEvents(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),n.prototype.destroy.call(this),X.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),d(this.keyboardModules)||this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains(pC)&&n.prototype.destroy.call(this);var e={"aria-atomic":"true","aria-disabled":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"};this.inputElement.hasAttribute("aria-label")&&this.inputElement.removeAttribute("aria-label"),this.inputElement&&(X.removeAttributes(e,this.inputElement),d(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),C.remove(this.inputElement,"blur",this.inputBlurHandler),C.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&Q(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.keyboardModule.destroy()),this.ngTag===null&&(this.inputElement&&(d(this.inputWrapper)||this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),I([this.inputElement],[vC])),I([this.element],[Ho]),d(this.inputWrapper)||Q(this.inputWrapper.container)),this.formElement&&C.remove(this.formElement,"reset",this.resetFormHandler),this.inputWrapper=null,this.keyboardModules=null},i.prototype.ensureInputAttribute=function(){for(var e=[],t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(var t=0;t<e.length;t++)d(this.inputElementCopy.getAttribute(e[t]))?(e[t].toLowerCase()==="value"&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[t])):(e[t].toLowerCase()==="value"&&(this.inputElement.value=this.inputElementCopy.getAttribute(e[t])),this.inputElement.setAttribute(e[t],this.inputElementCopy.getAttribute(e[t])))},i.prototype.preRender=function(){this.inputElementCopy=this.element.cloneNode(!0),I([this.inputElementCopy],[Ho,uC,cC]),this.inputElement=this.element,this.formElement=M(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.ngTag=null,(this.element.tagName==="EJS-DATEPICKER"||this.element.tagName==="EJS-DATETIMEPICKER")&&(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?this.ngTag!==null&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):this.getModuleName()==="datetimepicker"?(this.element.id=Nt("ej2-datetimepicker"),this.ngTag!==null&&J(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=Nt("ej2-datepicker"),this.ngTag!==null&&J(this.inputElement,{id:this.element.id+"_input"})),this.ngTag!==null&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.inputFormats&&this.checkInputFormats(),this.ngTag!==null?(this.tabIndex=this.inputElement.hasAttribute("tabindex")?this.inputElement.getAttribute("tabindex"):"0",this.inputElement.removeAttribute("tabindex")):(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex")),n.prototype.preRender.call(this)},i.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs},i.prototype.validationAttribute=function(e,t){var r=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",r),e.removeAttribute("name");for(var s=["required","aria-required","form"],a=0;a<s.length;a++)if(!d(e.getAttribute(s[a]))){var o=e.getAttribute(s[a]);t.setAttribute(s[a],o),e.removeAttribute(s[a])}},i.prototype.checkFormat=function(){var e=new je(this.locale);if(this.format)if(typeof this.format=="string")this.formatString=this.format;else if(this.format.skeleton!==""&&!d(this.format.skeleton)){var t=this.format.skeleton;this.getModuleName()==="datetimepicker"?this.formatString=e.getDatePattern({skeleton:t,type:"dateTime"}):this.formatString=e.getDatePattern({skeleton:t,type:"date"})}else this.getModuleName()==="datetimepicker"?this.formatString=this.dateTimeFormat:this.formatString=null;else this.formatString=null},i.prototype.checkInputFormats=function(){var e=new je(this.locale);if(this.inputFormatsString=[],this.inputFormats){for(var t=0,r=this.inputFormats;t<r.length;t++){var s=r[t],a="";if(typeof s=="string")a=s;else if(s.skeleton!==""&&!d(s.skeleton)){var o=s.skeleton;this.getModuleName()==="datetimepicker"?a=e.getDatePattern({skeleton:o,type:"dateTime"}):a=e.getDatePattern({skeleton:o,type:"date"})}a&&this.inputFormatsString.push(a)}this.inputFormatsString.length===0&&(this.inputFormatsString=null)}else this.inputFormatsString=null},i.prototype.checkHtmlAttributes=function(e){this.globalize=new je(this.locale),this.checkFormat(),this.checkView();var t=e?d(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"],r;this.getModuleName()==="datetimepicker"?this.calendarMode==="Gregorian"?r={format:d(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:r={format:d(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:this.calendarMode==="Gregorian"?r={format:this.formatString,type:"dateTime",skeleton:"yMd"}:r={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(var s=0,a=t;s<a.length;s++){var o=a[s];if(!d(this.inputElement.getAttribute(o)))switch(o){case"disabled":if(d(this.datepickerOptions)||this.datepickerOptions.enabled===void 0||e){var l=!(this.inputElement.getAttribute(o)==="disabled"||this.inputElement.getAttribute(o)===""||this.inputElement.getAttribute(o)==="true");this.setProperties({enabled:l},!e)}break;case"readonly":if(d(this.datepickerOptions)||this.datepickerOptions.readonly===void 0||e){var h=this.inputElement.getAttribute(o)==="readonly"||this.inputElement.getAttribute(o)===""||this.inputElement.getAttribute(o)==="true";this.setProperties({readonly:h},!e)}break;case"placeholder":(d(this.datepickerOptions)||this.datepickerOptions.placeholder===void 0||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(o)},!e);break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(o));break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(o));break;case"value":if(d(this.datepickerOptions)||this.datepickerOptions.value===void 0||e){var c=this.inputElement.getAttribute(o);this.setProperties(ze(o,this.globalize.parseDate(this.getAmPmValue(c),r),{}),!e)}break;case"min":if(+this.min==+new Date(1900,0,1)||e){var u=this.inputElement.getAttribute(o);this.setProperties(ze(o,this.globalize.parseDate(this.getAmPmValue(u),r),{}),!e)}break;case"max":if(+this.max==+new Date(2099,11,31)||e){var p=this.inputElement.getAttribute(o);this.setProperties(ze(o,this.globalize.parseDate(this.getAmPmValue(p),r),{}),!e)}break;case"type":this.inputElement.getAttribute(o)!=="text"&&this.inputElement.setAttribute("type","text");break}}},i.prototype.getModuleName=function(){return"datepicker"},i.prototype.updateFloatLabelOverflowWidth=function(){for(var e=this.inputWrapper.container,t=e.querySelector(".e-float-text.e-label-bottom"),r=0,s=".e-input-group-icon, .e-clear-icon",a=e.querySelectorAll(s),o=0;o<a.length;o++)r+=a[o].offsetWidth;if(t){var l=this.element.parentElement.offsetWidth-r;l&&!(this.cssClass&&this.cssClass.split(" ").indexOf("e-outline")!==-1)&&(t.style.width=l+"px")}},i.prototype.clearFloatLabelOverflowWidth=function(){var e=this.inputWrapper.container,t=e.querySelector(".e-float-text.e-label-top");t&&t.removeAttribute("style")},i.prototype.disabledDates=function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r,s,a=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value)),o=this.previousDate;this.minMaxUpdates(),(!e||e&&!d(this.renderDayCell))&&n.prototype.render.call(this),this.previousDate=o;var l=a&&+a,h='*[id^="/id"]'.replace("/id",""+l);this.strictMode||(typeof this.value=="string"||typeof this.value=="object"&&+this.value!=+a)&&this.setProperties({value:a},!0),!d(this.calendarElement)&&!d(this.calendarElement.querySelectorAll(h)[0])&&this.calendarElement.querySelectorAll(h)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date(new Date().setHours(0,0,0,0))));var c;this.getModuleName()==="datetimepicker"?(this.calendarMode==="Gregorian"?s=this.globalize.formatDate(a,{format:d(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}):s=this.globalize.formatDate(a,{format:d(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),c=s):(this.calendarMode==="Gregorian"?r={format:this.formatString,type:"dateTime",skeleton:"yMd"}:r={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},c=this.globalize.formatDate(a,r)),this.popupObj||(this.updateInputValue(c),this.enableMask&&(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime",isBlur:t})))},i.prototype.setAriaAttributes=function(){this.isCalendar()?(X.addAttributes({"aria-expanded":"true"},this.inputElement),J(this.inputElement,{"aria-owns":this.inputElement.id+"_options"}),J(this.inputElement,{"aria-controls":this.inputElement.id}),this.value&&J(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(X.addAttributes({"aria-expanded":"false"},this.inputElement),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-controls"),this.inputElement.removeAttribute("aria-activedescendant"))},i.prototype.errorClass=function(){var e='*[id^="/id"]'.replace("/id",""+ +this.value),t=this.calendarElement&&this.calendarElement.querySelectorAll(e)[0]&&this.calendarElement.querySelectorAll(e)[0].classList.contains("e-disabled");!d(this.value)&&!d(this.min)&&!d(this.max)&&!(new Date(this.value).setMilliseconds(0)>=new Date(this.min).setMilliseconds(0)&&new Date(this.value).setMilliseconds(0)<=new Date(this.max).setMilliseconds(0))||!this.strictMode&&this.inputElement.value!==""&&this.inputElement.value!==this.maskedDateValue&&d(this.value)||t||!this.isValidTime(this.value)?(T([this.inputWrapper.container],Lf),J(this.inputElement,{"aria-invalid":"true"})):d(this.inputWrapper)||(I([this.inputWrapper.container],Lf),J(this.inputElement,{"aria-invalid":"false"}))},i.prototype.isValidTime=function(e){return!0},i.prototype.onPropertyChanged=function(e,t){for(var r=0,s=Object.keys(e);r<s.length;r++){var a=s[r],o=["blur","change","cleared","close","created","destroyed","focus","navigated","open","renderDayCell"];switch(o.indexOf(a)>0&&this.isReact&&(this.isDynamicValueChanged=!0),a){case"value":this.isDynamicValueChanged=!0,this.isInteracted=!1,this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,this.previousElementValue=this.inputElement.value,d(this.value)&&(this.enableMask?this.updateInputValue(this.maskedDateValue):this.updateInputValue(""),this.currentDate=new Date(new Date().setHours(0,0,0,0))),this.updateInput(!0),+this.previousDate!=+this.value&&this.changeTrigger(null),this.isInteracted=!0,this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"format":this.checkFormat(),this.bindInputEvent(),this.updateInput(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||this.updateInputValue(this.maskedDateValue));break;case"inputFormats":this.checkInputFormats();break;case"allowEdit":this.setAllowEdit();break;case"placeholder":X.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":X.setReadonly(this.readonly,this.inputElement);break;case"enabled":X.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new je(this.locale),this.l10n.setLocale(this.locale),this.datepickerOptions&&this.datepickerOptions.placeholder==null&&(this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),X.setPlaceholder(this.placeholder,this.inputElement)),this.updateInput(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"enableRtl":X.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&n.prototype.onPropertyChanged.call(this,e,t);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"showClearButton":X.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width),X.calculateWidth(this.inputElement,this.inputWrapper.container),!d(this.inputWrapper.buttons[0])&&!d(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"floatLabelType":this.floatLabelType=e.floatLabelType,X.removeFloating(this.inputWrapper),X.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!d(this.inputWrapper.buttons[0])&&!d(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue),this.bindInputEvent()):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break;case"min":case"max":a==="min"&&d(this.min)&&(this.min=new Date(1900,0,1)),a==="max"&&d(this.max)&&(this.max=new Date(2099,11,31)),this.errorClass();break;default:this.calendarElement&&this.isCalendar()&&n.prototype.onPropertyChanged.call(this,e,t);break}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}},i.prototype.addDate=function(e){},Re([S(null)],i.prototype,"width",void 0),Re([S(null)],i.prototype,"value",void 0),Re([S(null)],i.prototype,"cssClass",void 0),Re([S(!1)],i.prototype,"strictMode",void 0),Re([S(null)],i.prototype,"format",void 0),Re([S(null)],i.prototype,"inputFormats",void 0),Re([S(!0)],i.prototype,"enabled",void 0),Re([S(!1)],i.prototype,"fullScreenMode",void 0),Re([S({})],i.prototype,"htmlAttributes",void 0),Re([S(null)],i.prototype,"values",void 0),Re([S(!1)],i.prototype,"isMultiSelection",void 0),Re([S(!0)],i.prototype,"showClearButton",void 0),Re([S(!0)],i.prototype,"allowEdit",void 0),Re([S(null)],i.prototype,"keyConfigs",void 0),Re([S(!1)],i.prototype,"enablePersistence",void 0),Re([S(1e3)],i.prototype,"zIndex",void 0),Re([S(!1)],i.prototype,"readonly",void 0),Re([S(null)],i.prototype,"placeholder",void 0),Re([S("Never")],i.prototype,"floatLabelType",void 0),Re([S(null)],i.prototype,"serverTimezoneOffset",void 0),Re([S(!1)],i.prototype,"openOnFocus",void 0),Re([S(!1)],i.prototype,"enableMask",void 0),Re([S({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],i.prototype,"maskPlaceholder",void 0),Re([_()],i.prototype,"open",void 0),Re([_()],i.prototype,"cleared",void 0),Re([_()],i.prototype,"close",void 0),Re([_()],i.prototype,"blur",void 0),Re([_()],i.prototype,"focus",void 0),Re([_()],i.prototype,"created",void 0),Re([_()],i.prototype,"destroyed",void 0),i=Re([Ft],i),i}(iy),sy=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ye=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},EC="e-time-wrapper",CC="e-popup",Hf="e-error",Bf="240px",Ff=new Date().getDate(),Wf=new Date().getMonth(),_f=new Date().getFullYear(),Wo="e-timepicker",wC="e-lib",TC="e-control",DC="e-content",bs="e-active",hc="e-hover",cc="e-navigation",ki="e-disabled",AC="e-icon-anim",uc="e-input-focus",pr="e-list-item",qf=2,zf=50,jf="e-time-overflow",xC=4,dc="e-non-edit",Uf=["title","class","style"],uu;(function(n){function i(e,t,r,s,a,o){this.calendarMode;var l,h=o*6e4,c=[],u=[];l=+t.setMilliseconds(0);for(var p=+r.setMilliseconds(0);p>=l;)u.push(l),c.push(s.formatDate(new Date(l),{format:a,type:"time"})),l+=h;var f=gt.createList(e,c,null,!0);return{collection:u,list:f}}n.createListItems=i})(uu||(uu={}));(function(n){sy(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return ye([S("day")],i.prototype,"day",void 0),ye([S("month")],i.prototype,"month",void 0),ye([S("year")],i.prototype,"year",void 0),ye([S("day of the week")],i.prototype,"dayOfTheWeek",void 0),ye([S("hour")],i.prototype,"hour",void 0),ye([S("minute")],i.prototype,"minute",void 0),ye([S("second")],i.prototype,"second",void 0),i})(Kt);(function(n){sy(i,n);function i(e,t){var r=n.call(this,e,t)||this;return r.liCollections=[],r.timeCollections=[],r.disableItemCollection=[],r.invalidValueString=null,r.preventChange=!1,r.maskedDateValue="",r.moduleName=r.getModuleName(),r.timeOptions=e,r}return i.prototype.preRender=function(){this.keyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.cloneElement=this.element.cloneNode(!0),I([this.cloneElement],[Wo,TC,wC]),this.inputElement=this.element,this.angularTag=null,this.formElement=M(this.element,"form"),this.element.tagName==="EJS-TIMEPICKER"&&(this.angularTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.openPopupEventArgs={appendTo:document.body}},i.prototype.render=function(){this.initialize(),this.createInputElement(),this.updateHtmlAttributeToWrapper(),this.setTimeAllowEdit(),this.setEnable(),this.validateInterval(),this.bindEvents(),this.validateDisable(),this.setTimeZone(),this.setValue(this.getFormattedValue(this.value)),this.enableMask&&!this.value&&this.maskedDateValue&&(this.floatLabelType==="Always"||!this.floatLabelType||!this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.checkErrorState(this.maskedDateValue)),this.anchor=this.inputElement,this.inputElement.setAttribute("value",this.inputElement.value),this.inputEleValue=this.getDateObject(this.inputElement.value),!d(this.inputWrapper.buttons[0])&&!d(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!d(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete()},i.prototype.setTimeZone=function(){if(!d(this.serverTimezoneOffset)&&this.value){var e=new Date().getTimezoneOffset()/60,t=this.serverTimezoneOffset,r=t+e;r=this.isDayLightSaving()?r--:r,this.value=new Date(this.value.getTime()+r*60*60*1e3)}},i.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,t)},i.prototype.setTimeAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):J(this.inputElement,{readonly:""}),this.clearIconState()},i.prototype.clearIconState=function(){!this.allowEdit&&this.inputWrapper&&!this.readonly?this.inputElement.value===""?I([this.inputWrapper.container],[dc]):T([this.inputWrapper.container],[dc]):this.inputWrapper&&I([this.inputWrapper.container],[dc])},i.prototype.validateDisable=function(){this.setMinMax(this.initMin,this.initMax),d(this.value)||(this.popupCreation(),this.popupObj.destroy(),this.popupWrapper=this.popupObj=null),!isNaN(+this.value)&&this.value!==null&&(this.valueIsDisable(this.value)||(this.strictMode&&this.resetState(),this.initValue=null,this.initMax=this.getDateObject(this.initMax),this.initMin=this.getDateObject(this.initMin),this.timeCollections=this.liCollections=[],this.setMinMax(this.initMin,this.initMax)))},i.prototype.validationAttribute=function(e,t){var r=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",r),e.removeAttribute("name");for(var s=["required","aria-required","form"],a=0;a<s.length;a++)if(!d(e.getAttribute(s[a]))){var o=e.getAttribute(s[a]);t.setAttribute(s[a],o),e.removeAttribute(s[a])}},i.prototype.initialize=function(){this.globalize=new je(this.locale),this.defaultCulture=new je("en"),this.checkTimeFormat(),this.checkInvalidValue(this.value),this.setProperties({value:this.checkDateValue(new Date(this.checkInValue(this.value)))},!0),this.setProperties({min:this.checkDateValue(new Date(this.checkInValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkInValue(this.max)))},!0),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkInValue(this.scrollTo)))},!0),this.angularTag!==null&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.checkAttributes(!1);var e={placeholder:this.placeholder};this.l10n=new hi("timepicker",e,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.angularTag!==null?(this.tabIndex=this.inputElement.hasAttribute("tabindex")?this.inputElement.getAttribute("tabindex"):"0",this.inputElement.removeAttribute("tabindex")):(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex")),this.initValue=this.checkDateValue(this.value),this.initMin=this.checkDateValue(this.min),this.initMax=this.checkDateValue(this.max),this.isNavigate=this.isPreventBlur=this.isTextSelected=!1,this.activeIndex=this.valueWithMinutes=this.prevDate=null,d(this.element.getAttribute("id"))?(this.element.id=Nt("ej2_timepicker"),this.angularTag!==null&&J(this.inputElement,{id:this.element.id+"_input"})):this.angularTag!==null&&(this.inputElement.id=this.element.getAttribute("id")+"_input"),d(this.inputElement.getAttribute("name"))&&J(this.inputElement,{name:this.element.id}),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})},i.prototype.checkTimeFormat=function(){if(this.format)if(typeof this.format=="string")this.formatString=this.format;else if(!d(this.format.skeleton)&&this.format.skeleton!==""){var e=this.format.skeleton;this.formatString=this.globalize.getDatePattern({type:"time",skeleton:e})}else this.formatString=this.globalize.getDatePattern({type:"time",skeleton:"short"});else this.formatString=null},i.prototype.checkDateValue=function(e){return!d(e)&&e instanceof Date&&!isNaN(+e)?e:null},i.prototype.createInputElement=function(){this.fullScreenMode&&H.isDevice&&(this.cssClass+=" e-popup-expand");var e=this.cssClass,t=!this.enableMask;!d(this.cssClass)&&this.cssClass!==""&&(e=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=X.createInput({element:this.inputElement,bindClearAction:t,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:[" e-input-group-icon e-time-icon e-icons"]},this.createElement),this.inputWrapper.container.style.width=this.setWidth(this.width),this.updateFloatLabelOverflowWidth(),J(this.inputElement,{"aria-autocomplete":"list",tabindex:"0","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-disabled":"false","aria-invalid":"false"}),this.isNullOrEmpty(this.inputStyle)||X.addAttributes({style:this.inputStyle},this.inputElement),T([this.inputWrapper.container],EC)},i.prototype.getCldrDateTimeFormat=function(){var e=new je(this.locale),t,r=e.getDatePattern({skeleton:"yMd"});return this.isNullOrEmpty(this.formatString)?t=r+" "+this.cldrFormat("time"):t=this.formatString,t},i.prototype.checkInvalidValue=function(e){var t=!1;if(typeof e!="object"&&!d(e)){var r=e;typeof r=="string"&&(r=r.trim());var s=null,a=null;if(typeof e=="number"?r=e.toString():typeof e=="string"&&(/^[a-zA-Z0-9- ]*$/.test(e)||(s=this.setCurrentDate(this.getDateObject(e)),d(s)&&(s=this.checkDateValue(this.globalize.parseDate(this.getAmPmValue(r),{format:this.getCldrDateTimeFormat(),type:"datetime"})),d(s)&&(s=this.checkDateValue(this.globalize.parseDate(this.getAmPmValue(r),{format:this.formatString,type:"dateTime",skeleton:"yMd"})))))),a=this.globalize.parseDate(this.getAmPmValue(r),{format:this.getCldrDateTimeFormat(),type:"datetime"}),s=!d(a)&&a instanceof Date&&!isNaN(+a)?a:null,d(s)&&r.replace(/\s/g,"").length){var o=null,l=null;o=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,l=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!o.test(r)&&!l.test(r)||/^[a-zA-Z0-9- ]*$/.test(e)||isNaN(+new Date(""+r))?t=!0:s=new Date(""+r)}t?(this.strictMode||(this.invalidValueString=r),this.setProperties({value:null},!0),this.initValue=null):(this.setProperties({value:s},!0),this.initValue=this.value)}},i.prototype.requiredModules=function(){var e=[];return this.enableMask&&e.push({args:[this],member:"MaskedDateTime"}),e},i.prototype.getAmPmValue=function(e){try{return typeof e=="string"&&e.trim()!==""?e.replace(/(am|pm|Am|aM|pM|Pm)/g,function(t){return t.toLocaleUpperCase()}):""}catch(t){return console.error("Error occurred while processing date:",t),""}},i.prototype.cldrFormat=function(e){var t;return this.locale==="en"||this.locale==="en-US"?t=V("timeFormats.short",Lt()):t=this.getCultureTimeObject(Vt,""+this.locale),t},i.prototype.destroy=function(){this.hide(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),this.unBindEvents();var e={"aria-autocomplete":"list",tabindex:"0","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-disabled":"true","aria-invalid":"false"};this.inputElement&&(X.removeAttributes(e,this.inputElement),this.angularTag===null&&this.inputWrapper.container.parentElement.appendChild(this.inputElement),d(this.cloneElement.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),this.ensureInputAttribute(),this.enableElement([this.inputElement]),this.inputElement.classList.remove("e-input"),d(this.cloneElement.getAttribute("disabled"))&&X.setEnabled(!0,this.inputElement,this.floatLabelType)),this.inputWrapper.container&&Q(this.inputWrapper.container),this.inputWrapper=this.popupWrapper=this.cloneElement=void 0,this.liCollections=this.timeCollections=this.disableItemCollection=[],d(this.rippleFn)||this.rippleFn(),X.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),n.prototype.destroy.call(this),this.formElement&&C.remove(this.formElement,"reset",this.formResetHandler),this.rippleFn=null,this.openPopupEventArgs=null,this.selectedElement=null,this.listTag=null,this.liCollections=null},i.prototype.ensureInputAttribute=function(){for(var e=[],t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(var t=0;t<e.length;t++)d(this.cloneElement.getAttribute(e[t]))?(this.inputElement.removeAttribute(e[t]),e[t].toLowerCase()==="value"&&(this.inputElement.value="")):(this.inputElement.setAttribute(e[t],this.cloneElement.getAttribute(e[t])),e[t].toLowerCase()==="value"&&(this.inputElement.value=this.cloneElement.getAttribute(e[t])))},i.prototype.popupCreation=function(){this.popupWrapper=this.createElement("div",{className:Wo+" "+CC,attrs:{id:this.element.id+"_popup"}}),this.popupWrapper.style.visibility="hidden",this.popupWrapper.setAttribute("aria-label",this.element.id),this.popupWrapper.setAttribute("role","dialog"),d(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),!d(this.step)&&this.step>0&&(this.generateList(),oe([this.listWrapper],this.popupWrapper)),this.addSelection(),this.renderPopup(),Q(this.popupWrapper)},i.prototype.getPopupHeight=function(){var e=parseInt(Bf,10),t=this.popupWrapper.getBoundingClientRect().height;return t>e?e:t},i.prototype.generateList=function(){this.createListItems(),this.wireListEvents();var e={duration:300,selector:"."+pr};this.rippleFn=Xr(this.listWrapper,e),this.liCollections=this.listWrapper.querySelectorAll("."+pr)},i.prototype.renderPopup=function(){var e=this;if(this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),this.popupObj=new xr(this.popupWrapper,{width:this.setPopupWidth(this.width),zIndex:this.zIndex,targetType:"relative",position:H.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},collision:H.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},enableRtl:this.enableRtl,relateTo:H.isDevice?document.body:this.inputWrapper.container,offsetY:xC,open:function(){e.popupWrapper.style.visibility="visible",T([e.inputWrapper.buttons[0]],bs)},close:function(){I([e.inputWrapper.buttons[0]],bs),e.unWireListEvents(),e.inputElement.removeAttribute("aria-activedescendant"),ve(e.popupObj.element),e.popupObj.destroy(),e.popupWrapper.innerHTML="",e.listWrapper=e.popupWrapper=e.listTag=void 0},targetExitViewport:function(){H.isDevice||e.hide()}}),H.isDevice||(this.popupObj.collision={X:"none",Y:"flip"}),H.isDevice&&this.fullScreenMode?(this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%"):this.popupObj.element.style.maxHeight=Bf,H.isDevice&&this.fullScreenMode){var t=this.createElement("div",{className:"e-model-header"}),r=this.createElement("span",{className:"e-model-title"});r.textContent="Select time";var s=this.createElement("span",{className:"e-popup-close"});C.add(s,"mousedown touchstart",this.timePopupCloseHandler,this),t.appendChild(s),t.appendChild(r),this.popupWrapper.insertBefore(t,this.popupWrapper.firstElementChild)}},i.prototype.timePopupCloseHandler=function(e){this.hide()},i.prototype.getFormattedValue=function(e){return d(this.checkDateValue(e))?null:this.globalize.formatDate(e,{skeleton:"medium",type:"time"})},i.prototype.getDateObject=function(e){if(!this.isNullOrEmpty(e)){var t=this.createDateObj(e),r=!this.isNullOrEmpty(this.initValue);if(this.checkDateValue(t)){var s=r?this.initValue.getDate():Ff,a=r?this.initValue.getMonth():Wf,o=r?this.initValue.getFullYear():_f;return new Date(o,a,s,t.getHours(),t.getMinutes(),t.getSeconds())}}return null},i.prototype.updateHtmlAttributeToWrapper=function(){if(!d(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var r=t[e];if(Uf.indexOf(r)>-1)if(r==="class"){var s=this.htmlAttributes[""+r].replace(/\s+/g," ").trim();s!==""&&T([this.inputWrapper.container],s.split(" "))}else if(r==="style"){var a=this.inputWrapper.container.getAttribute(r);a=d(a)?this.htmlAttributes[""+r]:a+this.htmlAttributes[""+r],this.inputWrapper.container.setAttribute(r,a)}else this.inputWrapper.container.setAttribute(r,this.htmlAttributes[""+r])}},i.prototype.updateHtmlAttributeToElement=function(){if(!d(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var r=t[e];Uf.indexOf(r)<0&&this.inputElement.setAttribute(r,this.htmlAttributes[""+r])}},i.prototype.updateCssClass=function(e,t){d(t)||(t=t.replace(/\s+/g," ").trim()),d(e)||(e=e.replace(/\s+/g," ").trim()),X.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&X.setCssClass(e,[this.popupWrapper],t)},i.prototype.removeErrorClass=function(){I([this.inputWrapper.container],Hf),J(this.inputElement,{"aria-invalid":"false"})},i.prototype.checkErrorState=function(e){var t=this.getDateObject(e);this.validateState(t)&&!this.invalidValueString||this.enableMask&&this.inputElement.value===this.maskedDateValue?this.removeErrorClass():(T([this.inputWrapper.container],Hf),J(this.inputElement,{"aria-invalid":"true"}))},i.prototype.validateInterval=function(){!d(this.step)&&this.step>0?this.enableElement([this.inputWrapper.buttons[0]]):this.disableTimeIcon()},i.prototype.disableTimeIcon=function(){this.disableElement([this.inputWrapper.buttons[0]]),this.hide()},i.prototype.disableElement=function(e){T(e,ki)},i.prototype.enableElement=function(e){I(e,ki)},i.prototype.selectInputText=function(){this.inputElement.setSelectionRange(0,this.inputElement.value.length)},i.prototype.setCursorToEnd=function(){this.inputElement.setSelectionRange(this.inputElement.value.length,this.inputElement.value.length)},i.prototype.getMeridianText=function(){var e;if(this.locale==="en"||this.locale==="en-US")e=V("dayPeriods.format.wide",Lt());else{var t=".dates.calendars.gregorian.dayPeriods.format.abbreviated",r="main.";e=V(r+""+this.locale+t,Vt)}return e},i.prototype.getCursorSelection=function(){var e=this.inputElement,t=0,r=0;return isNaN(e.selectionStart)||(t=e.selectionStart,r=e.selectionEnd),{start:Math.abs(t),end:Math.abs(r)}},i.prototype.getActiveElement=function(){return d(this.popupWrapper)?null:this.popupWrapper.querySelectorAll("."+bs)},i.prototype.isNullOrEmpty=function(e){return!!(d(e)||typeof e=="string"&&e.trim()==="")},i.prototype.setWidth=function(e){return typeof e=="number"?e=ce(e):typeof e=="string"?e=e.match(/px|%|em/)?e:ce(e):e="100%",e},i.prototype.setPopupWidth=function(e){if(e=this.setWidth(e),e.indexOf("%")>-1){var t=this.containerStyle.width*parseFloat(e)/100;e=t.toString()+"px"}return e},i.prototype.setScrollPosition=function(){var e=this.selectedElement;d(e)?this.popupWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)},i.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),r=e.nextElementSibling,s=r?r.offsetTop:e.offsetTop,a=e.getBoundingClientRect().height;s+e.offsetTop>t?this.popupWrapper.scrollTop=r?s-(t/qf+a/qf):s:this.popupWrapper.scrollTop=0},i.prototype.setScrollTo=function(){var e;if(d(this.popupWrapper))this.popupWrapper.scrollTop=0;else{var t=this.popupWrapper.querySelectorAll("."+pr);if(t.length){var r=this.timeCollections[0],s=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();e=t[Math.round((s-r)/(this.step*6e4))]}}d(e)?this.popupWrapper.scrollTop=0:this.findScrollTop(e)},i.prototype.getText=function(){return d(this.checkDateValue(this.value))?"":this.getValue(this.value)},i.prototype.getValue=function(e){return d(this.checkDateValue(e))?null:this.globalize.formatDate(e,{format:this.cldrTimeFormat(),type:"time"})},i.prototype.cldrDateFormat=function(){var e;return this.locale==="en"||this.locale==="en-US"?e=V("dateFormats.short",Lt()):e=this.getCultureDateObject(Vt,""+this.locale),e},i.prototype.cldrTimeFormat=function(){var e;return this.isNullOrEmpty(this.formatString)?this.locale==="en"||this.locale==="en-US"?e=V("timeFormats.short",Lt()):e=this.getCultureTimeObject(Vt,""+this.locale):e=this.formatString,e},i.prototype.dateToNumeric=function(){var e;return this.locale==="en"||this.locale==="en-US"?e=V("timeFormats.medium",Lt()):e=V("main."+this.locale+".dates.calendars.gregorian.timeFormats.medium",Vt),e},i.prototype.getExactDateTime=function(e){return d(this.checkDateValue(e))?null:this.globalize.formatDate(e,{format:this.dateToNumeric(),type:"time"})},i.prototype.setValue=function(e){var t=this.checkValue(e);!this.strictMode&&!this.validateState(t)?(this.checkDateValue(this.valueWithMinutes)===null&&(this.initValue=this.valueWithMinutes=null),this.validateMinMax(this.value,this.min,this.max)):this.isNullOrEmpty(t)?(this.initValue=null,this.validateMinMax(this.value,this.min,this.max)):this.initValue=this.compareFormatChange(t),this.updateInput(!0,this.initValue)},i.prototype.compareFormatChange=function(e){return d(e)?null:e!==this.getText()?this.getDateObject(e):this.getDateObject(this.value)},i.prototype.updatePlaceHolder=function(){X.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement)},i.prototype.updateInputValue=function(e){X.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)},i.prototype.preventEventBubbling=function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnTimeIconClick")},i.prototype.popupHandler=function(e){this.enabled&&(H.isDevice&&this.inputElement.setAttribute("readonly",""),e.preventDefault(),this.isPopupOpen()?this.closePopup(0,e):(this.inputElement.focus(),this.show(e)))},i.prototype.mouseDownHandler=function(){this.enabled&&(this.readonly||(this.inputElement.setSelectionRange(0,0),C.add(this.inputElement,"mouseup",this.mouseUpHandler,this)))},i.prototype.mouseUpHandler=function(e){if(!this.readonly)if(e.preventDefault(),this.enableMask){e.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"});return}else{C.remove(this.inputElement,"mouseup",this.mouseUpHandler);var t=this.getCursorSelection();t.start===0&&t.end===this.inputElement.value.length||(this.inputElement.value.length>0&&(this.cursorDetails=this.focusSelection()),this.inputElement.setSelectionRange(this.cursorDetails.start,this.cursorDetails.end))}},i.prototype.focusSelection=function(){var e=new RegExp("^[a-zA-Z0-9]+$"),t=this.inputElement.value.split("");t.push(" ");var r=this.getCursorSelection(),s=0,a=0,o=!1;if(this.isTextSelected)s=r.start,a=r.end,this.isTextSelected=!1;else for(var l=0;l<t.length;l++)if(e.test(t[l])||(a=l,o=!0),o)if(r.start>=s&&r.end<=a){a=a,this.isTextSelected=!0;break}else s=l+1,o=!1;return{start:s,end:a}},i.prototype.inputHandler=function(e){if(!this.readonly&&this.enabled)switch(e.action==="right"||e.action==="left"||e.action==="tab"||(e.action==="home"||e.action==="end"||e.action==="up"||e.action==="down")&&!this.isPopupOpen()&&!this.enableMask||e.preventDefault(),e.action){case"home":case"end":case"up":case"down":this.isPopupOpen()||(this.popupCreation(),this.popupObj.destroy(),this.popupObj=this.popupWrapper=null),this.enableMask&&!this.readonly&&!this.isPopupOpen()&&(e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e})),this.isPopupOpen()&&this.keyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.updateValue(this.valueWithMinutes,e)):this.updateValue(this.inputElement.value,e),this.hide(),this.isNavigate=!1,this.isPopupOpen()&&e.stopPropagation();break;case"open":this.show(e);break;case"escape":this.updateInputValue(this.objToString(this.value)),this.enableMask&&(this.value||this.updateInputValue(this.maskedDateValue),this.createMask()),this.previousState(this.value),this.hide();break;case"close":this.hide();break;case"right":case"left":case"tab":case"shiftTab":!this.isPopupOpen()&&this.enableMask&&!this.readonly&&((this.inputElement.selectionStart===0&&this.inputElement.selectionEnd===this.inputElement.value.length||this.inputElement.selectionEnd!==this.inputElement.value.length&&e.action==="tab"||this.inputElement.selectionStart!==0&&e.action==="shiftTab"||e.action==="left"||e.action==="right")&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e}));break;default:this.isNavigate=!1;break}},i.prototype.onMouseClick=function(e){var t=e.target,r=this.selectedElement=M(t,"."+pr);this.setSelection(r,e),r&&r.classList.contains(pr)&&this.hide()},i.prototype.closePopup=function(e,t){var r=this;if(this.isPopupOpen()&&this.popupWrapper){var s={popup:this.popupObj,event:t||null,cancel:!1,name:"open"};I([document.body],jf),this.trigger("close",s,function(a){if(!a.cancel){var o={name:"FadeOut",duration:zf,delay:e||0};r.popupObj.hide(new wi(o)),I([r.inputWrapper.container],[AC]),J(r.inputElement,{"aria-expanded":"false"}),r.inputElement.removeAttribute("aria-owns"),r.inputElement.removeAttribute("aria-controls"),r.inputElement.removeAttribute("aria-activedescendant"),C.remove(document,"mousedown touchstart",r.documentClickHandler)}H.isDevice&&r.modal&&(r.modal.style.display="none",r.modal.outerHTML="",r.modal=null),H.isDevice&&(d(r.mobileTimePopupWrap)||(r.mobileTimePopupWrap.remove(),r.mobileTimePopupWrap=null)),H.isDevice&&r.allowEdit&&!r.readonly&&r.inputElement.removeAttribute("readonly")})}else H.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly")},i.prototype.disposeServerPopup=function(){this.popupWrapper&&(this.popupWrapper.style.visibility="hidden",this.popupWrapper.style.top="-9999px",this.popupWrapper.style.left="-9999px",this.popupWrapper.style.width="0px",this.popupWrapper.style.height="0px")},i.prototype.checkValueChange=function(e,t){if(!this.strictMode&&!this.validateState(this.valueWithMinutes))this.checkDateValue(this.valueWithMinutes)===null&&(this.initValue=this.valueWithMinutes=null),this.setProperties({value:this.compareFormatChange(this.inputElement.value)},!0),this.initValue=this.valueWithMinutes=this.compareFormatChange(this.inputElement.value),this.prevValue=this.inputElement.value,+this.prevDate!=+this.value&&this.changeEvent(e);else if(t){var r=this.getDateObject(new Date(this.timeCollections[this.activeIndex]));+this.prevDate!=+r&&this.valueProcess(e,r)}else{var r=this.compareFormatChange(this.inputElement.value);(+this.prevDate!=+r||d(this.checkDateValue(this.value)))&&this.valueProcess(e,r)}},i.prototype.onMouseOver=function(e){var t=M(e.target,"."+pr);this.setHover(t,hc)},i.prototype.setHover=function(e,t){this.enabled&&this.isValidLI(e)&&!e.classList.contains(t)&&(this.removeHover(t),T([e],t),t===cc&&e.setAttribute("aria-selected","true"))},i.prototype.setSelection=function(e,t){this.isValidLI(e)&&(this.checkValue(e.getAttribute("data-value")),this.enableMask&&this.createMask(),this.selectedElement=e,this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(e),this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),T([this.selectedElement],bs),this.selectedElement.setAttribute("aria-selected","true"),this.checkValueChange(t,!0))},i.prototype.onMouseLeave=function(){this.removeHover(hc)},i.prototype.scrollHandler=function(){this.getModuleName()==="timepicker"&&H.isDevice||this.hide()},i.prototype.setMinMax=function(e,t){d(this.checkDateValue(e))&&(this.initMin=this.getDateObject("12:00:00 AM")),d(this.checkDateValue(t))&&(this.initMax=this.getDateObject("11:59:59 PM"))},i.prototype.validateMinMax=function(e,t,r){var s=e instanceof Date?e:this.getDateObject(e);return d(this.checkDateValue(s))?+this.createDateObj(this.getFormattedValue(this.initMin))>+this.createDateObj(this.getFormattedValue(this.initMax))&&this.disableTimeIcon():e=this.strictOperation(this.initMin,this.initMax,e,s),this.strictMode&&(e=this.valueIsDisable(e)?e:null),this.checkErrorState(e),e},i.prototype.valueIsDisable=function(e){if(!d(this.disableItemCollection)&&this.disableItemCollection.length>0){if(this.disableItemCollection.length===this.timeCollections.length)return!1;for(var t=e instanceof Date?this.objToString(e):e,r=0;r<this.disableItemCollection.length;r++)if(t===this.disableItemCollection[r])return!1}return!0},i.prototype.validateState=function(e){if(!this.strictMode)if(this.valueIsDisable(e)){var t=typeof e=="string"?this.setCurrentDate(this.getDateObject(e)):this.setCurrentDate(this.getDateObject(e)),r=this.setCurrentDate(this.getDateObject(this.initMax)),s=this.setCurrentDate(this.getDateObject(this.initMin));if(d(this.checkDateValue(t))){if(+r<+s||this.inputElement.value!=="")return!1}else if(+t>+r||+t<+s)return!1}else return!1;return!0},i.prototype.strictOperation=function(e,t,r,s){var a=this.createDateObj(this.getFormattedValue(t)),o=this.createDateObj(this.getFormattedValue(e)),l=this.createDateObj(this.getFormattedValue(s));if(this.strictMode){if(+o>+a)return this.disableTimeIcon(),this.initValue=this.getDateObject(a),this.updateInputValue(this.getValue(this.initValue)),this.enableMask&&this.createMask(),this.inputElement.value;if(+o>=+l)return this.getDateObject(o);if(+l>=+a||+o==+a)return this.getDateObject(a)}else if(+o>+a&&(this.disableTimeIcon(),!isNaN(+this.createDateObj(r))))return r;return r},i.prototype.bindEvents=function(){C.add(this.inputWrapper.buttons[0],"mousedown",this.popupHandler,this),C.add(this.inputElement,"blur",this.inputBlurHandler,this),C.add(this.inputElement,"focus",this.inputFocusHandler,this),C.add(this.inputElement,"change",this.inputChangeHandler,this),C.add(this.inputElement,"input",this.inputEventHandler,this),this.enableMask&&(C.add(this.inputElement,"keydown",this.keydownHandler,this),C.add(this.inputElement,"keyup",this.keyupHandler,this)),this.showClearButton&&this.inputWrapper.clearButton&&C.add(this.inputWrapper.clearButton,"mousedown",this.clearHandler,this),this.formElement&&C.add(this.formElement,"reset",this.formResetHandler,this),H.isDevice||(this.keyConfigure=$(this.keyConfigure,this.keyConfigs),this.inputEvent=new Ci(this.inputWrapper.container,{keyAction:this.inputHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.inputElement&&(this.showClearButton||this.enableMask)&&C.add(this.inputElement,"mousedown",this.mouseDownHandler,this))},i.prototype.keydownHandler=function(e){switch(e.code){case"Delete":this.enableMask&&!this.popupObj&&!this.readonly&&this.notify("keyDownHandler",{module:"MaskedDateTime",e});break}},i.prototype.keyupHandler=function(e){(e.code==="Backspace"||e.code==="Delete")&&this.enableMask&&this.showClearButton&&this.inputElement&&this.inputElement.value===this.maskedDateValue&&this.inputWrapper&&this.inputWrapper.clearButton&&!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")&&this.inputWrapper.clearButton.classList.add("e-clear-icon-hide")},i.prototype.formResetHandler=function(){if(this.enabled&&!this.inputElement.disabled){var e=this.inputElement.getAttribute("value"),t=this.checkDateValue(this.inputEleValue);this.element.tagName==="EJS-TIMEPICKER"&&(t=null,e="",this.inputElement.setAttribute("value","")),this.setProperties({value:t},!0),this.prevDate=this.value,this.valueWithMinutes=this.value,this.initValue=this.value,this.inputElement&&(this.updateInputValue(e),this.enableMask&&(e||this.updateInputValue(this.maskedDateValue),this.createMask()),this.checkErrorState(e),this.prevValue=this.inputElement.value)}},i.prototype.inputChangeHandler=function(e){this.enabled&&e.stopPropagation()},i.prototype.inputEventHandler=function(){this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})},i.prototype.unBindEvents=function(){this.inputWrapper&&C.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.popupHandler),C.remove(this.inputElement,"blur",this.inputBlurHandler),C.remove(this.inputElement,"focus",this.inputFocusHandler),C.remove(this.inputElement,"change",this.inputChangeHandler),C.remove(this.inputElement,"input",this.inputEventHandler),this.enableMask&&C.remove(this.inputElement,"keyup",this.keyupHandler),this.inputEvent&&this.inputEvent.destroy(),C.remove(this.inputElement,"mousedown touchstart",this.mouseDownHandler),this.showClearButton&&!d(this.inputWrapper)&&!d(this.inputWrapper.clearButton)&&C.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.clearHandler),this.formElement&&C.remove(this.formElement,"reset",this.formResetHandler)},i.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&C.add(this.inputWrapper.clearButton,"mousedown",this.clearHandler,this)},i.prototype.raiseClearedEvent=function(e){var t={event:e};this.trigger("cleared",t)},i.prototype.clearHandler=function(e){if(this.enabled&&(e.preventDefault(),d(this.value)?(this.resetState(),this.raiseClearedEvent(e)):this.clear(e),this.popupWrapper&&(this.popupWrapper.scrollTop=0),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}),M(this.element,"form"))){var t=this.element,r=document.createEvent("KeyboardEvent");r.initEvent("keyup",!1,!0),t.dispatchEvent(r)}},i.prototype.clear=function(e){this.setProperties({value:null},!0),this.initValue=null,this.resetState(),this.raiseClearedEvent(e),this.changeEvent(e)},i.prototype.setZIndex=function(){this.popupObj&&(this.popupObj.zIndex=this.zIndex,this.popupObj.dataBind())},i.prototype.checkAttributes=function(e){for(var t=e?d(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["step","disabled","readonly","style","name","value","min","max","placeholder"],r,s=0,a=t;s<a.length;s++){var o=a[s];if(!d(this.inputElement.getAttribute(o)))switch(o){case"disabled":if(d(this.timeOptions)||this.timeOptions.enabled===void 0||e){var l=!(this.inputElement.getAttribute(o)==="disabled"||this.inputElement.getAttribute(o)===""||this.inputElement.getAttribute(o)==="true");this.setProperties({enabled:l},!e)}break;case"style":this.inputStyle=this.inputElement.getAttribute(o);break;case"readonly":if(d(this.timeOptions)||this.timeOptions.readonly===void 0||e){var h=this.inputElement.getAttribute(o)==="readonly"||this.inputElement.getAttribute(o)===""||this.inputElement.getAttribute(o)==="true";this.setProperties({readonly:h},!e)}break;case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(o));break;case"step":this.step=parseInt(this.inputElement.getAttribute(o),10);break;case"placeholder":(d(this.timeOptions)||this.timeOptions.placeholder===void 0||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(o)},!e);break;case"min":(d(this.timeOptions)||this.timeOptions.min===void 0||e)&&(r=new Date(this.inputElement.getAttribute(o)),d(this.checkDateValue(r))||this.setProperties({min:r},!e));break;case"max":(d(this.timeOptions)||this.timeOptions.max===void 0||e)&&(r=new Date(this.inputElement.getAttribute(o)),d(this.checkDateValue(r))||this.setProperties({max:r},!e));break;case"value":(d(this.timeOptions)||this.timeOptions.value===void 0||e)&&(r=new Date(this.inputElement.getAttribute(o)),d(this.checkDateValue(r))||(this.initValue=r,this.updateInput(!1,this.initValue),this.setProperties({value:r},!e)));break}}},i.prototype.setCurrentDate=function(e){return d(this.checkDateValue(e))?null:new Date(_f,Wf,Ff,e.getHours(),e.getMinutes(),e.getSeconds())},i.prototype.getTextFormat=function(){var e=0;if(this.cldrTimeFormat().split(" ")[0]==="a"||this.cldrTimeFormat().indexOf("a")===0)e=1;else if(this.cldrTimeFormat().indexOf("a")<0){for(var t=this.cldrTimeFormat().split(" "),r=0;r<t.length;r++)if(t[r].toLowerCase().indexOf("h")>=0){e=r;break}}return e},i.prototype.updateValue=function(e,t){var r;if(this.isNullOrEmpty(e))this.resetState();else if(r=this.checkValue(e),this.strictMode){var s=r===null&&e.trim().length>0?this.previousState(this.prevDate):this.inputElement.value;this.updateInputValue(s),this.enableMask&&(s||this.updateInputValue(this.maskedDateValue),d(r)&&e!==this.maskedDateValue&&this.createMask(),d(r)&&e===this.maskedDateValue&&this.updateInputValue(this.maskedDateValue))}this.checkValueChange(t,typeof e!="string")},i.prototype.previousState=function(e){for(var t=this.getDateObject(e),r=0;r<this.timeCollections.length;r++)if(+t===this.timeCollections[r]){this.activeIndex=r,this.selectedElement=this.liCollections[r],this.valueWithMinutes=new Date(this.timeCollections[r]);break}return this.getValue(e)},i.prototype.resetState=function(){this.removeSelection(),X.setValue("",this.inputElement,this.floatLabelType,!1),this.valueWithMinutes=this.activeIndex=null,this.strictMode||this.checkErrorState(null)},i.prototype.objToString=function(e){return d(this.checkDateValue(e))?null:this.globalize.formatDate(e,{format:this.cldrTimeFormat(),type:"time"})},i.prototype.checkValue=function(e){if(!this.isNullOrEmpty(e)){var t=e instanceof Date?e:this.getDateObject(e);return this.validateValue(t,e)}return this.resetState(),this.valueWithMinutes=null},i.prototype.validateValue=function(e,t){var r,s=this.validateMinMax(t,this.min,this.max),a=this.getDateObject(s);if(this.getFormattedValue(a)!==this.getFormattedValue(this.value)?(this.valueWithMinutes=d(a)?null:a,r=this.objToString(this.valueWithMinutes)):(this.strictMode&&(e=a),this.valueWithMinutes=this.checkDateValue(e),r=this.objToString(this.valueWithMinutes)),!this.strictMode&&d(r)){var o=s.trim().length>0?s:"";this.updateInputValue(o),this.enableMask&&(o||this.updateInputValue(this.maskedDateValue))}else this.updateInputValue(r),this.enableMask&&(r===""&&this.updateInputValue(this.maskedDateValue),d(r)&&t!==this.maskedDateValue&&this.createMask(),d(r)&&t===this.maskedDateValue&&this.updateInputValue(this.maskedDateValue));return r},i.prototype.createMask=function(){this.notify("createMask",{module:"MaskedDateTime"})},i.prototype.findNextElement=function(e){var t=this.inputElement.value,r=d(this.valueWithMinutes)?this.createDateObj(t):this.getDateObject(this.valueWithMinutes),s=null,a=this.liCollections.length,o=this.timeCollections;if(!d(this.checkDateValue(r))||!d(this.activeIndex)){if(e.action==="home"){var l=this.validLiElement(0);s=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l}else if(e.action==="end"){var l=this.validLiElement(o.length-1,!0);s=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l}else if(e.action==="down"){for(var h=0;h<a;h++)if(+r<this.timeCollections[h]){var l=this.validLiElement(h);s=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l;break}else if(h===a-1){var l=this.validLiElement(0);s=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l;break}}else for(var h=a-1;h>=0;h--)if(+r>this.timeCollections[h]){var l=this.validLiElement(h,!0);s=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l;break}else if(h===0){var l=this.validLiElement(a-1);s=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l;break}this.selectedElement=this.liCollections[this.activeIndex],this.elementValue(d(s)?null:new Date(s))}else this.selectNextItem(e)},i.prototype.selectNextItem=function(e){var t=this.validLiElement(0,e.action!=="down");this.activeIndex=t,this.selectedElement=this.liCollections[t],this.elementValue(new Date(this.timeCollections[t]))},i.prototype.elementValue=function(e){d(this.checkDateValue(e))||this.checkValue(e)},i.prototype.validLiElement=function(e,t){var r=null,s=d(this.popupWrapper)?this.liCollections:this.popupWrapper.querySelectorAll("."+pr),a=!0;if(s.length)if(t)for(var o=e;o>=0;o--)if(s[o].classList.contains(ki))o===0&&a&&(e=o=s.length,a=!1);else{r=o;break}else for(var o=e;o<=s.length-1;o++)if(s[o].classList.contains(ki))o===s.length-1&&a&&(e=o=-1,a=!1);else{r=o;break}return r},i.prototype.keyHandler=function(e){if(!(d(this.step)||this.step<=0||!d(this.inputWrapper)&&this.inputWrapper.buttons[0].classList.contains(ki))){var t=this.timeCollections.length;if(d(this.getActiveElement())||this.getActiveElement().length===0)if(this.liCollections.length>0)if(d(this.value)&&d(this.activeIndex)){var r=this.validLiElement(0,e.action!=="down");this.activeIndex=r,this.selectedElement=this.liCollections[r],this.elementValue(new Date(this.timeCollections[r]))}else this.findNextElement(e);else this.findNextElement(e);else{var s=void 0;if(e.keyCode>=37&&e.keyCode<=40){var r=e.keyCode===40||e.keyCode===39?++this.activeIndex:--this.activeIndex;this.activeIndex=r=this.activeIndex===t?0:this.activeIndex,this.activeIndex=r=this.activeIndex<0?t-1:this.activeIndex,this.activeIndex=r=this.validLiElement(this.activeIndex,!(e.keyCode===40||e.keyCode===39)),s=d(this.timeCollections[r])?this.timeCollections[0]:this.timeCollections[r]}else if(e.action==="home"){var r=this.validLiElement(0);this.activeIndex=r,s=this.timeCollections[r]}else if(e.action==="end"){var r=this.validLiElement(t-1,!0);this.activeIndex=r,s=this.timeCollections[r]}this.selectedElement=this.liCollections[this.activeIndex],this.elementValue(new Date(s))}this.isNavigate=!0,this.setHover(this.selectedElement,cc),this.setActiveDescendant(),this.enableMask&&this.selectInputText(),this.isPopupOpen()&&this.selectedElement!==null&&(!e||e.type!=="click")&&this.setScrollPosition()}},i.prototype.getCultureTimeObject=function(e,t){return V("main."+t+".dates.calendars.gregorian.timeFormats.short",e)},i.prototype.getCultureDateObject=function(e,t){return V("main."+t+".dates.calendars.gregorian.dateFormats.short",e)},i.prototype.wireListEvents=function(){C.add(this.listWrapper,"click",this.onMouseClick,this),H.isDevice||(C.add(this.listWrapper,"mouseover",this.onMouseOver,this),C.add(this.listWrapper,"mouseout",this.onMouseLeave,this))},i.prototype.unWireListEvents=function(){this.listWrapper&&(C.remove(this.listWrapper,"click",this.onMouseClick),H.isDevice||(C.remove(this.listWrapper,"mouseover",this.onMouseOver),C.remove(this.listWrapper,"mouseout",this.onMouseLeave)))},i.prototype.valueProcess=function(e,t){var r=d(this.checkDateValue(t))?null:t;+this.prevDate!=+r&&(this.initValue=r,this.changeEvent(e))},i.prototype.changeEvent=function(e){this.addSelection(),this.updateInput(!0,this.initValue);var t={event:e||null,value:this.value,text:this.inputElement.value,isInteracted:!d(e),element:this.element};t.value=this.valueWithMinutes||this.getDateObject(this.inputElement.value),this.prevDate=this.valueWithMinutes||this.getDateObject(this.inputElement.value),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",t),this.invalidValueString=null,this.checkErrorState(this.value)},i.prototype.updateInput=function(e,t){e&&(this.prevValue=this.getValue(this.prevDate)),this.prevDate=this.valueWithMinutes=t,(typeof t!="number"||(this.value&&+new Date(+this.value).setMilliseconds(0))!==+t)&&(this.setProperties({value:t},!0),this.enableMask&&this.value&&this.createMask()),!this.strictMode&&d(this.value)&&this.invalidValueString&&(this.checkErrorState(this.invalidValueString),this.updateInputValue(this.invalidValueString)),this.clearIconState()},i.prototype.setActiveDescendant=function(){!d(this.selectedElement)&&this.value?J(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")}):this.inputElement.removeAttribute("aria-activedescendant")},i.prototype.removeSelection=function(){if(this.removeHover(hc),!d(this.popupWrapper)){var e=this.popupWrapper.querySelectorAll("."+bs);e.length&&(I(e,bs),e[0].removeAttribute("aria-selected"))}},i.prototype.removeHover=function(e){var t=this.getHoverItem(e);t&&t.length&&(I(t,e),e===cc&&t[0].removeAttribute("aria-selected"))},i.prototype.getHoverItem=function(e){var t;return d(this.popupWrapper)||(t=this.popupWrapper.querySelectorAll("."+e)),t},i.prototype.setActiveClass=function(){if(!d(this.popupWrapper)){var e=this.popupWrapper.querySelectorAll("."+pr);if(e.length){for(var t=0;t<e.length;t++)if(this.timeCollections[t]===+this.getDateObject(this.valueWithMinutes)){e[t].setAttribute("aria-selected","true"),this.selectedElement=e[t],this.activeIndex=t;break}}}},i.prototype.addSelection=function(){this.selectedElement=null,this.removeSelection(),this.setActiveClass(),d(this.selectedElement)||(T([this.selectedElement],bs),this.selectedElement.setAttribute("aria-selected","true"))},i.prototype.isValidLI=function(e){return e&&e.classList.contains(pr)&&!e.classList.contains(ki)},i.prototype.createDateObj=function(e){var t=null,r=this.globalize.formatDate(new Date,{format:t,skeleton:"short",type:"date"}),s=null;return typeof e=="string"&&!(this.enableMask&&this.maskedDateValue&&this.inputElement.value===this.maskedDateValue&&!this.value)?e.toUpperCase().indexOf("AM")>-1||e.toUpperCase().indexOf("PM")>-1?(r=this.defaultCulture.formatDate(new Date,{format:t,skeleton:"short",type:"date"}),s=isNaN(+new Date(r+" "+e))?null:new Date(new Date(r+" "+e).setMilliseconds(0)),d(s)&&(s=this.timeParse(r,e))):s=this.timeParse(r,e):e instanceof Date&&(s=e),s},i.prototype.timeParse=function(e,t){var r;return r=this.globalize.parseDate(this.getAmPmValue(e+" "+t),{format:this.cldrDateFormat()+" "+this.cldrTimeFormat(),type:"datetime"}),r=d(r)?this.globalize.parseDate(this.getAmPmValue(e+" "+t),{format:this.cldrDateFormat()+" "+this.dateToNumeric(),type:"datetime"}):r,r=d(r)?r:new Date(r.setMilliseconds(0)),r},i.prototype.createListItems=function(){var e=this;this.listWrapper=this.createElement("div",{className:DC,attrs:{tabindex:"-1"}});var t,r=this.step*6e4,s=[];this.timeCollections=[],this.disableItemCollection=[],t=+this.getDateObject(this.initMin).setMilliseconds(0);for(var a=+this.getDateObject(this.initMax).setMilliseconds(0);a>=t;)this.timeCollections.push(t),s.push(this.globalize.formatDate(new Date(t),{format:this.cldrTimeFormat(),type:"time"})),t+=r;var o={itemCreated:function(l){var h={element:l.item,text:l.text,value:e.getDateObject(l.text),isDisabled:!1};e.trigger("itemRender",h,function(c){c.isDisabled&&c.element.classList.add(ki),c.element.classList.contains(ki)&&e.disableItemCollection.push(c.element.getAttribute("data-value"))})}};this.listTag=gt.createList(this.createElement,s,o,!0),J(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options",tabindex:"0"}),oe([this.listTag],this.listWrapper)},i.prototype.documentClickHandler=function(e){var t=e.target;!d(this.popupObj)&&!d(this.inputWrapper)&&(this.inputWrapper.container.contains(t)&&e.type!=="mousedown"||this.popupObj.element&&this.popupObj.element.contains(t))&&e.type!=="touchstart"&&e.preventDefault(),!M(t,'[id="'+this.popupObj.element.id+'"]')&&t!==this.inputElement&&t!==(this.inputWrapper&&this.inputWrapper.buttons[0])&&t!==(this.inputWrapper&&this.inputWrapper.clearButton)&&t!==(this.inputWrapper&&this.inputWrapper.container)?this.isPopupOpen()&&(this.hide(),t.classList.contains("e-dlg-overlay")?e.preventDefault():this.focusOut()):t!==this.inputElement&&(H.isDevice||(this.isPreventBlur=(H.isIE||H.info.name==="edge")&&document.activeElement===this.inputElement&&t===this.popupWrapper))},i.prototype.setEnableRtl=function(){X.setEnableRtl(this.enableRtl,[this.inputWrapper.container]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},i.prototype.setEnable=function(){X.setEnabled(this.enabled,this.inputElement,this.floatLabelType),this.enabled?(I([this.inputWrapper.container],ki),J(this.inputElement,{"aria-disabled":"false"}),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.hide(),T([this.inputWrapper.container],ki),J(this.inputElement,{"aria-disabled":"true"}),this.inputElement.tabIndex=-1)},i.prototype.getProperty=function(e,t){t==="min"?(this.initMin=this.checkDateValue(new Date(this.checkInValue(e.min))),this.setProperties({min:this.initMin},!0)):(this.initMax=this.checkDateValue(new Date(this.checkInValue(e.max))),this.setProperties({max:this.initMax},!0)),this.inputElement.value===""?this.validateMinMax(this.value,this.min,this.max):this.checkValue(this.inputElement.value),this.checkValueChange(null,!1)},i.prototype.inputBlurHandler=function(e){if(this.updateFloatLabelOverflowWidth(),!!this.enabled){if(this.isPreventBlur&&this.isPopupOpen()){this.inputElement.focus();return}this.closePopup(0,e),this.enableMask&&this.maskedDateValue&&this.placeholder&&this.floatLabelType!=="Always"&&this.inputElement.value===this.maskedDateValue&&!this.value&&(this.floatLabelType==="Auto"||this.floatLabelType==="Never"||this.placeholder)&&this.updateInputValue(""),I([this.inputWrapper.container],[uc]),this.getText()!==this.inputElement.value?this.updateValue(this.inputElement.value,e):this.inputElement.value.trim().length===0&&this.resetState(),this.cursorDetails=null,this.isNavigate=!1,this.inputElement.value===""&&(this.invalidValueString=null);var t={model:this};this.trigger("blur",t)}},i.prototype.focusOut=function(){if(document.activeElement===this.inputElement){this.inputElement.blur(),I([this.inputWrapper.container],[uc]);var e={model:this};this.trigger("blur",e)}},i.prototype.isPopupOpen=function(){return!!(this.popupWrapper&&this.popupWrapper.classList.contains(""+Wo))},i.prototype.inputFocusHandler=function(){if(this.enabled){var e={model:this};!this.readonly&&!H.isDevice&&!this.enableMask&&this.selectInputText(),this.enableMask&&!this.inputElement.value&&this.placeholder&&this.maskedDateValue&&!this.value&&(this.floatLabelType==="Auto"||this.floatLabelType==="Never"||this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length),this.enableMask&&this.showClearButton&&this.inputElement&&this.inputElement.value===this.maskedDateValue&&this.inputWrapper&&this.inputWrapper.clearButton&&!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")&&this.inputWrapper.clearButton.classList.add("e-clear-icon-hide"),this.trigger("focus",e),this.clearIconState(),this.clearFloatLabelOverflowWidth(),this.openOnFocus&&this.show()}},i.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},i.prototype.hide=function(){this.closePopup(100,null),this.clearIconState()},i.prototype.show=function(e){var t=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupWrapper)){this.popupCreation(),H.isDevice&&this.listWrapper&&(this.modal=this.createElement("div"),this.modal.className=""+Wo+" e-time-modal",document.body.className+=" "+jf,document.body.appendChild(this.modal)),H.isDevice&&(this.mobileTimePopupWrap=this.createElement("div",{className:"e-timepicker-mob-popup-wrap"}),document.body.appendChild(this.mobileTimePopupWrap)),this.openPopupEventArgs={popup:this.popupObj||null,cancel:!1,event:e||null,name:"open",appendTo:H.isDevice?this.mobileTimePopupWrap:document.body};var r=this.openPopupEventArgs;this.trigger("open",r,function(s){if(t.openPopupEventArgs=s,!t.openPopupEventArgs.cancel&&!t.inputWrapper.buttons[0].classList.contains(ki)){t.openPopupEventArgs.appendTo.appendChild(t.popupWrapper),t.popupAlignment(t.openPopupEventArgs),t.setScrollPosition(),H.isDevice||t.inputElement.focus();var a={name:"FadeIn",duration:zf};if(t.popupObj.refreshPosition(t.anchor),t.zIndex===1e3?t.popupObj.show(new wi(a),t.element):t.popupObj.show(new wi(a),null),t.setActiveDescendant(),J(t.inputElement,{"aria-expanded":"true"}),J(t.inputElement,{"aria-owns":t.inputElement.id+"_options"}),J(t.inputElement,{"aria-controls":t.inputElement.id}),T([t.inputWrapper.container],uc),C.add(document,"mousedown touchstart",t.documentClickHandler,t),t.setOverlayIndex(t.mobileTimePopupWrap,t.popupObj.element,t.modal,H.isDevice),H.isDevice){var o=t.createElement("div",{className:"e-dlg-overlay"});o.style.zIndex=(t.zIndex-1).toString(),t.mobileTimePopupWrap.appendChild(o)}}else t.popupObj.destroy(),t.popupWrapper=t.listTag=void 0,t.liCollections=t.timeCollections=t.disableItemCollection=[],t.popupObj=null})}},i.prototype.setOverlayIndex=function(e,t,r,s){if(s&&!d(t)&&!d(r)&&!d(e)){var a=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;r.style.zIndex=(a-1).toString(),e.style.zIndex=a.toString()}},i.prototype.formatValues=function(e){var t;return typeof e=="number"?t=ce(e):typeof e=="string"&&(t=e.match(/px|%|em/)||isNaN(parseInt(e,10))?e:ce(e)),t},i.prototype.popupAlignment=function(e){if(e.popup.position.X=this.formatValues(e.popup.position.X),e.popup.position.Y=this.formatValues(e.popup.position.Y),(!isNaN(parseFloat(e.popup.position.X))||!isNaN(parseFloat(e.popup.position.Y)))&&(this.popupObj.relateTo=this.anchor=document.body,this.popupObj.targetType="container"),isNaN(parseFloat(e.popup.position.X))||(this.popupObj.offsetX=parseFloat(e.popup.position.X)),isNaN(parseFloat(e.popup.position.Y))||(this.popupObj.offsetY=parseFloat(e.popup.position.Y)),H.isDevice)e.popup.position.X==="center"&&e.popup.position.Y==="center"&&(this.popupObj.relateTo=this.anchor=document.body,this.popupObj.offsetY=0,this.popupObj.targetType="container",this.popupObj.collision={X:"fit",Y:"fit"});else{switch(e.popup.position.X){case"left":break;case"right":e.popup.offsetX=this.containerStyle.width;break;case"center":e.popup.offsetX=-(this.containerStyle.width/2);break}switch(e.popup.position.Y){case"top":break;case"bottom":break;case"center":e.popup.offsetY=-(this.containerStyle.height/2);break}e.popup.position.X==="center"&&e.popup.position.Y==="center"&&(this.popupObj.relateTo=this.inputWrapper.container,this.anchor=this.inputElement,this.popupObj.targetType="relative")}},i.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},i.prototype.getModuleName=function(){return"timepicker"},i.prototype.updateFloatLabelOverflowWidth=function(){for(var e=this.inputWrapper.container,t=e.querySelector(".e-float-text.e-label-bottom"),r=0,s=".e-input-group-icon, .e-clear-icon",a=e.querySelectorAll(s),o=0;o<a.length;o++)r+=a[o].offsetWidth;if(t){var l=this.element.parentElement.offsetWidth-r;l&&!(this.cssClass&&this.cssClass.split(" ").indexOf("e-outline")!==-1)&&(t.style.width=l+"px")}},i.prototype.clearFloatLabelOverflowWidth=function(){var e=this.inputWrapper.container,t=e.querySelector(".e-float-text.e-label-top");t&&t.removeAttribute("style")},i.prototype.onPropertyChanged=function(e,t){for(var r=0,s=Object.keys(e);r<s.length;r++){var a=s[r];switch(a){case"placeholder":X.setPlaceholder(e.placeholder,this.inputElement);break;case"readonly":X.setReadonly(this.readonly,this.inputElement,this.floatLabelType),this.readonly&&this.hide(),this.setTimeAllowEdit();break;case"enabled":this.setProperties({enabled:e.enabled},!0),this.setEnable();break;case"allowEdit":this.setTimeAllowEdit();break;case"enableRtl":this.setProperties({enableRtl:e.enableRtl},!0),this.setEnableRtl();break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"min":case"max":this.getProperty(e,a);break;case"showClearButton":X.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent();break;case"locale":this.setProperties({locale:e.locale},!0),this.globalize=new je(this.locale),this.l10n.setLocale(this.locale),this.timeOptions&&this.timeOptions.placeholder==null&&this.updatePlaceHolder(),this.setValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"width":de(this.inputWrapper.container,{width:this.setWidth(e.width)}),this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),X.calculateWidth(this.inputElement,this.inputWrapper.container),!d(this.inputWrapper.buttons[0])&&!d(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"format":this.setProperties({format:e.format},!0),this.checkTimeFormat(),this.setValue(this.value),this.enableMask&&(this.createMask(),this.value||this.updateInputValue(this.maskedDateValue));break;case"value":this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,this.invalidValueString?(this.updateInputValue(this.invalidValueString),this.checkErrorState(this.invalidValueString)):(typeof e.value=="string"?(this.setProperties({value:this.checkDateValue(new Date(e.value))},!0),e.value=this.value):(e.value&&+new Date(+e.value).setMilliseconds(0))!==+this.value&&(e.value=this.checkDateValue(new Date(""+e.value))),this.initValue=e.value,e.value=this.compareFormatChange(this.checkValue(e.value))),this.enableMask&&d(e.value)&&(this.updateInputValue(this.maskedDateValue),this.checkErrorState(this.maskedDateValue)),this.checkValueChange(null,!1),this.isPopupOpen()&&this.setScrollPosition(),this.isAngular&&this.preventChange&&(this.preventChange=!1),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"floatLabelType":this.floatLabelType=e.floatLabelType,X.removeFloating(this.inputWrapper),X.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!d(this.inputWrapper.buttons[0])&&!d(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"strictMode":this.invalidValueString=null,e.strictMode&&this.checkErrorState(null),this.setProperties({strictMode:e.strictMode},!0),this.checkValue(this.inputElement.value),this.checkValueChange(null,!1);break;case"scrollTo":this.checkDateValue(new Date(this.checkInValue(e.scrollTo)))?(this.popupWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkInValue(e.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue)):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break}}},i.prototype.checkInValue=function(e){return e instanceof Date?e.toUTCString():""+e},ye([S(null)],i.prototype,"width",void 0),ye([S(null)],i.prototype,"cssClass",void 0),ye([S(!1)],i.prototype,"strictMode",void 0),ye([S(null)],i.prototype,"keyConfigs",void 0),ye([S(null)],i.prototype,"format",void 0),ye([S(!0)],i.prototype,"enabled",void 0),ye([S(!1)],i.prototype,"fullScreenMode",void 0),ye([S(!1)],i.prototype,"readonly",void 0),ye([S({})],i.prototype,"htmlAttributes",void 0),ye([S("Never")],i.prototype,"floatLabelType",void 0),ye([S(null)],i.prototype,"placeholder",void 0),ye([S(1e3)],i.prototype,"zIndex",void 0),ye([S(!1)],i.prototype,"enablePersistence",void 0),ye([S(!0)],i.prototype,"showClearButton",void 0),ye([S(30)],i.prototype,"step",void 0),ye([S(null)],i.prototype,"scrollTo",void 0),ye([S(null)],i.prototype,"value",void 0),ye([S(null)],i.prototype,"min",void 0),ye([S(null)],i.prototype,"max",void 0),ye([S(!0)],i.prototype,"allowEdit",void 0),ye([S(!1)],i.prototype,"openOnFocus",void 0),ye([S(!1)],i.prototype,"enableMask",void 0),ye([S({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],i.prototype,"maskPlaceholder",void 0),ye([S(null)],i.prototype,"serverTimezoneOffset",void 0),ye([_()],i.prototype,"change",void 0),ye([_()],i.prototype,"created",void 0),ye([_()],i.prototype,"destroyed",void 0),ye([_()],i.prototype,"open",void 0),ye([_()],i.prototype,"itemRender",void 0),ye([_()],i.prototype,"close",void 0),ye([_()],i.prototype,"cleared",void 0),ye([_()],i.prototype,"blur",void 0),ye([_()],i.prototype,"focus",void 0),i=ye([Ft],i),i})(_i);var kC=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),we=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},IC="e-date-wrapper",MC="e-datepicker",OC="e-datetime-wrapper",RC=new Date().getDate(),NC=new Date().getMonth(),LC=new Date().getFullYear(),VC=new Date().getHours(),PC=new Date().getMinutes(),HC=new Date().getSeconds(),BC=new Date().getMilliseconds(),ca="e-datetimepicker",Yf="e-datetimepopup-wrapper",FC="e-input-group-icon",Gf="e-popup",WC="e-time-icon",ua="e-input-focus",$f="250px",Kf="e-icon-anim",pc="e-disabled",Qf="e-error",_C="e-content",qC="e-navigation",Wr="e-active",fc="e-hover",zC="e-icons",_o=2,_r="e-list-item",Xf=100,Zf="e-time-overflow",jC=function(n){kC(i,n);function i(e,t){var r=n.call(this,e,t)||this;return r.valueWithMinutes=null,r.scrollInvoked=!1,r.moduleName=r.getModuleName(),r.formatRegex=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yyy|yy|y|'[^']*'|'[^']*'/g,r.dateFormatString="",r.dateTimeOptions=e,r}return i.prototype.focusHandler=function(){this.clearLabelOverflowWidth(),this.enabled&&T([this.inputWrapper.container],ua)},i.prototype.focusIn=function(){n.prototype.focusIn.call(this)},i.prototype.focusOut=function(){document.activeElement===this.inputElement&&(this.inputElement.blur(),this.inputWrapper&&I([this.inputWrapper.container],[ua]))},i.prototype.blurHandler=function(e){if(this.updateLabelOverflowWidth(),!!this.enabled){if(this.isTimePopupOpen()&&this.isPreventBlur){this.inputElement.focus();return}I([this.inputWrapper.container],ua);var t={model:this};this.isTimePopupOpen()&&this.hide(e),this.trigger("blur",t)}},i.prototype.destroy=function(){this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),this.popupObject&&this.popupObject.element.classList.contains(Gf)&&(this.popupObject.destroy(),Q(this.dateTimeWrapper),this.dateTimeWrapper=void 0,this.liCollections=this.timeCollections=[],d(this.rippleFn)||this.rippleFn());var e={"aria-live":"assertive","aria-atomic":"true","aria-invalid":"false",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-expanded":"false",role:"combobox",autocomplete:"off"};this.inputElement&&X.removeAttributes(e,this.inputElement),this.isCalendar()&&(this.popupWrapper&&Q(this.popupWrapper),this.popupObject=this.popupWrapper=null,this.keyboardHandler.destroy()),this.unBindInputEvents(),this.liCollections=null,this.rippleFn=null,this.selectedElement=null,this.listTag=null,this.timeIcon=null,this.popupObject=null,this.preventArgs=null,this.keyboardModule=null,X.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),n.prototype.destroy.call(this)},i.prototype.render=function(){this.timekeyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.valueWithMinutes=null,this.previousDateTime=null,this.isPreventBlur=!1,this.cloneElement=this.element.cloneNode(!0),this.dateTimeFormat=this.cldrDateTimeFormat(),this.initValue=this.value,typeof this.min=="string"&&(this.min=this.checkDateValue(new Date(this.min))),typeof this.max=="string"&&(this.max=this.checkDateValue(new Date(this.max))),typeof this.minTime=="string"&&(this.minTime=this.checkDateValue(new Date(this.minTime))),typeof this.maxTime=="string"&&(this.maxTime=this.checkDateValue(new Date(this.maxTime))),!d(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),n.prototype.updateHtmlAttributeToElement.call(this),this.checkAttributes(!1);var e={placeholder:this.placeholder};this.l10n=new hi("datetimepicker",e,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),n.prototype.render.call(this),this.createInputElement(),n.prototype.updateHtmlAttributeToWrapper.call(this),this.bindInputEvents(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.setValue(!0),this.enableMask&&!this.value&&this.maskedDateValue&&(this.floatLabelType==="Always"||!this.floatLabelType||!this.placeholder)&&X.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(this.scrollTo)))},!0),this.previousDateTime=this.value&&new Date(+this.value),this.element.tagName==="EJS-DATETIMEPICKER"&&(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.enabled||(this.inputElement.tabIndex=-1)),this.floatLabelType!=="Never"&&X.calculateWidth(this.inputElement,this.inputWrapper.container),!d(this.inputWrapper.buttons[0])&&!d(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon"),this.renderComplete()},i.prototype.setValue=function(e){if(e===void 0&&(e=!1),this.initValue=this.validateMinMaxRange(this.value),!this.strictMode&&this.isDateObject(this.initValue)){var t=this.validateMinMaxRange(this.initValue);X.setValue(this.getFormattedValue(t),this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:t},!0)}else d(this.value)&&(this.initValue=null,this.setProperties({value:null},!0));this.valueWithMinutes=this.value,n.prototype.updateInput.call(this,e)},i.prototype.validateMinMaxRange=function(e){var t=e;return this.isDateObject(e)?t=this.validateValue(e):+this.min>+this.max&&this.disablePopupButton(!0),this.checkValidState(t),t},i.prototype.checkValidState=function(e){this.isValidState=!0,this.strictMode||(+e>+this.max||+e<+this.min||!this.isValidTime(e))&&(this.isValidState=!1),this.checkErrorState()},i.prototype.checkErrorState=function(){this.isValidState?I([this.inputWrapper.container],Qf):T([this.inputWrapper.container],Qf),J(this.inputElement,{"aria-invalid":this.isValidState?"false":"true"})},i.prototype.isValidTime=function(e){if(e!=null&&(this.minTime||this.maxTime)){var t=void 0,r=void 0,s=void 0,a=void 0,o=e.getHours()*36e5+e.getMinutes()*6e4+e.getSeconds()*1e3+e.getMilliseconds();if(this.minTime&&(t=this.minTime.getHours()*36e5+this.minTime.getMinutes()*6e4+this.minTime.getSeconds()*1e3+this.minTime.getMilliseconds()),this.maxTime&&(r=this.maxTime.getHours()*36e5+this.maxTime.getMinutes()*6e4+this.maxTime.getSeconds()*1e3+this.maxTime.getMilliseconds()),this.min&&+e.getDate()==+this.min.getDate()&&+e.getMonth()==+this.min.getMonth()&&+e.getFullYear()==+this.min.getFullYear()&&(a=this.min.getHours()*36e5+this.min.getMinutes()*6e4+this.min.getSeconds()*1e3+this.min.getMilliseconds(),t=t<a?a:t),this.max&&+e.getDate()==+this.max.getDate()&&+e.getMonth()==+this.max.getMonth()&&+this.max.getFullYear()==+this.max.getFullYear()&&(s=this.max.getHours()*36e5+this.max.getMinutes()*6e4+this.max.getSeconds()*1e3+this.max.getMilliseconds(),r=r>s?s:r),this.strictMode){var l=void 0;return t&&o<t?(l=new Date(e.getFullYear(),e.getMonth(),e.getDate(),this.minTime.getHours(),this.minTime.getMinutes(),this.minTime.getSeconds(),this.minTime.getMilliseconds()),this.setProperties({value:l},!0),this.changedArgs={value:this.value}):r&&o>r&&(l=new Date(e.getFullYear(),e.getMonth(),e.getDate(),this.maxTime.getHours(),this.maxTime.getMinutes(),this.maxTime.getSeconds(),this.maxTime.getMilliseconds()),this.setProperties({value:l},!0),this.changedArgs={value:this.value}),!0}else return!(t&&o<t||r&&o>r)}return!0},i.prototype.validateValue=function(e){var t=e;return this.strictMode?+this.min>+this.max?(this.disablePopupButton(!0),t=this.max):+e<+this.min?t=this.min:+e>+this.max&&(t=this.max):+this.min>+this.max&&(this.disablePopupButton(!0),t=e),t},i.prototype.disablePopupButton=function(e){e?(T([this.inputWrapper.buttons[0],this.timeIcon],pc),this.hide()):I([this.inputWrapper.buttons[0],this.timeIcon],pc)},i.prototype.getFormattedValue=function(e){var t;return d(e)?null:(this.calendarMode==="Gregorian"?t={format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd"}:t={format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd",calendar:"islamic"},this.globalize.formatDate(e,t))},i.prototype.isDateObject=function(e){return!d(e)&&!isNaN(+e)},i.prototype.createInputElement=function(){I([this.inputElement],MC),I([this.inputWrapper.container],IC),T([this.inputWrapper.container],OC),T([this.inputElement],ca),this.renderTimeIcon(),this.updateLabelOverflowWidth()},i.prototype.renderTimeIcon=function(){this.timeIcon=X.appendSpan(FC+" "+WC+" "+zC,this.inputWrapper.container)},i.prototype.bindInputEvents=function(){C.add(this.timeIcon,"mousedown",this.timeHandler,this),C.add(this.inputWrapper.buttons[0],"mousedown",this.dateHandler,this),C.add(this.inputElement,"blur",this.blurHandler,this),C.add(this.inputElement,"focus",this.focusHandler,this),this.defaultKeyConfigs=$(this.defaultKeyConfigs,this.keyConfigs),this.keyboardHandler=new Ci(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyAction.bind(this),keyConfigs:this.defaultKeyConfigs})},i.prototype.unBindInputEvents=function(){C.remove(this.timeIcon,"mousedown touchstart",this.timeHandler),C.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateHandler),this.inputElement&&(C.remove(this.inputElement,"blur",this.blurHandler),C.remove(this.inputElement,"focus",this.focusHandler)),this.keyboardHandler&&this.keyboardHandler.destroy()},i.prototype.cldrTimeFormat=function(){var e;return this.isNullOrEmpty(this.timeFormat)?this.locale==="en"||this.locale==="en-US"?e=V("timeFormats.short",Lt()):e=this.getCultureTimeObject(Vt,""+this.locale):e=this.timeFormat,e},i.prototype.cldrDateTimeFormat=function(){var e,t=new je(this.locale),r=t.getDatePattern({skeleton:"yMd"});return this.isNullOrEmpty(this.formatString)?e=r+" "+this.getCldrFormat("time"):e=this.formatString,e},i.prototype.getCldrFormat=function(e){var t;return this.locale==="en"||this.locale==="en-US"?t=V("timeFormats.short",Lt()):t=this.getCultureTimeObject(Vt,""+this.locale),t},i.prototype.isNullOrEmpty=function(e){return!!(d(e)||typeof e=="string"&&e.trim()==="")},i.prototype.getCultureTimeObject=function(e,t){return this.calendarMode==="Gregorian"?V("main."+this.locale+".dates.calendars.gregorian.timeFormats.short",e):V("main."+this.locale+".dates.calendars.islamic.timeFormats.short",e)},i.prototype.timeHandler=function(e){this.enabled&&(this.isIconClicked=!0,H.isDevice&&this.inputElement.setAttribute("readonly",""),e.currentTarget===this.timeIcon&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isDatePopupOpen()&&n.prototype.hide.call(this,e),this.isTimePopupOpen()?this.closePopup(e):(this.inputElement.focus(),this.popupCreation("time",e),T([this.inputWrapper.container],[ua]))),this.isIconClicked=!1)},i.prototype.dateHandler=function(e){this.enabled&&(e.currentTarget===this.inputWrapper.buttons[0]&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isTimePopupOpen()&&this.closePopup(e),d(this.popupWrapper)||this.popupCreation("date",e)))},i.prototype.show=function(e,t){this.enabled&&this.readonly||!this.enabled||(e==="time"&&!this.dateTimeWrapper?(this.isDatePopupOpen()&&this.hide(t),this.popupCreation("time",t)):this.popupObj||(this.isTimePopupOpen()&&this.hide(t),n.prototype.show.call(this),this.popupCreation("date",t)))},i.prototype.toggle=function(e){this.isDatePopupOpen()?(n.prototype.hide.call(this,e),this.show("time",null)):this.isTimePopupOpen()?(this.hide(e),n.prototype.show.call(this,null,e),this.popupCreation("date",null)):this.show(null,e)},i.prototype.listCreation=function(){var e;this.calendarMode==="Gregorian"?(this.cldrDateTimeFormat().replace(this.formatRegex,this.TimePopupFormat()),this.dateFormatString===""&&(this.dateFormatString=this.cldrDateTimeFormat()),e=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),{format:this.dateFormatString,type:"datetime"})):e=this.globalize.parseDate(this.getAmPmValue(this.inputElement.value),{format:this.cldrDateTimeFormat(),type:"datetime",calendar:"islamic"});var t=d(this.value)?this.inputElement.value!==""?e:new Date:this.value;this.valueWithMinutes=t,this.listWrapper=R("div",{className:_C,attrs:{tabindex:"0"}});var r=this.startTime(t),s=this.endTime(t),a=uu.createListItems(this.createElement,r,s,this.globalize,this.cldrTimeFormat(),this.step);this.timeCollections=a.collection,this.listTag=a.list,J(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),oe([a.list],this.listWrapper),this.wireTimeListEvents();var o={duration:300,selector:"."+_r};this.rippleFn=Xr(this.listWrapper,o),this.liCollections=this.listWrapper.querySelectorAll("."+_r)},i.prototype.popupCreation=function(e,t){if(H.isDevice&&this.element.setAttribute("readonly","readonly"),e==="date")!this.readonly&&this.popupWrapper&&(T([this.popupWrapper],Yf),J(this.popupWrapper,{id:this.element.id+"_options"}));else if(!this.readonly){var r=R("div",{className:ca+" "+Gf,attrs:{id:this.element.id+"_timepopup"}});r.style.cssText="visibility: hidden; display: block;",this.dateTimeWrapper=r,d(this.cssClass)||(this.dateTimeWrapper.className+=" "+this.cssClass),!d(this.step)&&this.step>0&&(this.listCreation(),oe([this.listWrapper],this.dateTimeWrapper)),document.body.appendChild(this.dateTimeWrapper),this.addTimeSelection(),this.renderPopup(),this.setTimeScrollPosition(),this.openPopup(t),(!H.isDevice||H.isDevice&&!this.fullScreenMode)&&this.popupObject.refreshPosition(this.inputElement),H.isDevice&&(this.modelWrapper.style.zIndex=(this.popupObject.zIndex-1).toString(),this.fullScreenMode&&(this.dateTimeWrapper.style.left="0px"))}},i.prototype.openPopup=function(e){var t=this;this.preventArgs={cancel:!1,popup:this.popupObject,event:e||null};var r=this.preventArgs;this.trigger("open",r,function(s){if(t.preventArgs=s,!t.preventArgs.cancel&&!t.readonly){var a={name:"FadeIn",duration:Xf};t.zIndex===1e3?t.popupObject.show(new wi(a),t.element):t.popupObject.show(new wi(a),null),T([t.inputWrapper.container],[Kf]),J(t.inputElement,{"aria-expanded":"true"}),J(t.inputElement,{"aria-owns":t.inputElement.id+"_options"}),J(t.inputElement,{"aria-controls":t.inputElement.id}),C.add(document,"mousedown touchstart",t.documentClickHandler,t)}})},i.prototype.documentClickHandler=function(e){var t=e.target;!d(this.popupObject)&&(this.inputWrapper.container.contains(t)&&e.type!=="mousedown"||this.popupObject.element&&this.popupObject.element.contains(t))&&e.type!=="touchstart"&&e.preventDefault(),!M(t,'[id="'+(this.popupObject&&this.popupObject.element.id+'"]'))&&t!==this.inputElement&&t!==this.timeIcon&&!d(this.inputWrapper)&&t!==this.inputWrapper.container?this.isTimePopupOpen()&&(this.hide(e),t.classList.contains("e-dlg-overlay")?e.preventDefault():this.focusOut()):t!==this.inputElement&&(H.isDevice||(this.isPreventBlur=document.activeElement===this.inputElement&&(H.isIE||H.info.name==="edge")&&t===this.popupObject.element))},i.prototype.isTimePopupOpen=function(){return!!(this.dateTimeWrapper&&this.dateTimeWrapper.classList.contains(""+ca))},i.prototype.isDatePopupOpen=function(){return!!(this.popupWrapper&&this.popupWrapper.classList.contains(""+Yf))},i.prototype.renderPopup=function(){var e=this;if(this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),H.isDevice&&(this.timeModal=R("div"),this.timeModal.className=""+ca+" e-time-modal",document.body.className+=" "+Zf,this.timeModal.style.display="block",document.body.appendChild(this.timeModal)),H.isDevice){this.modelWrapper=R("div",{className:"e-datetime-mob-popup-wrap"}),this.modelWrapper.appendChild(this.dateTimeWrapper);var t=R("div",{className:"e-dlg-overlay"});t.style.zIndex=(this.zIndex-1).toString(),this.modelWrapper.appendChild(t),document.body.appendChild(this.modelWrapper)}var r=4;if(this.popupObject=new xr(this.dateTimeWrapper,{width:this.setPopupWidth(),zIndex:this.zIndex,targetType:"container",collision:H.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},relateTo:H.isDevice?document.body:this.inputWrapper.container,position:H.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},enableRtl:this.enableRtl,offsetY:r,open:function(){e.dateTimeWrapper.style.visibility="visible",T([e.timeIcon],Wr),H.isDevice||(e.timekeyConfigure=$(e.timekeyConfigure,e.keyConfigs),e.inputEvent=new Ci(e.inputWrapper.container,{keyAction:e.timeKeyActionHandle.bind(e),keyConfigs:e.timekeyConfigure,eventName:"keydown"}))},close:function(){I([e.timeIcon],Wr),e.unWireTimeListEvents(),e.inputElement.removeAttribute("aria-activedescendant"),ve(e.popupObject.element),e.popupObject.destroy(),e.dateTimeWrapper.innerHTML="",e.modelWrapper&&ve(e.modelWrapper),e.listWrapper=e.dateTimeWrapper=void 0,e.inputEvent&&e.inputEvent.destroy()},targetExitViewport:function(){H.isDevice||e.hide()}}),H.isDevice&&this.fullScreenMode?(this.popupObject.element.style.maxHeight="100%",this.popupObject.element.style.width="100%"):this.popupObject.element.style.maxHeight=$f,H.isDevice&&this.fullScreenMode){var s=this.createElement("div",{className:"e-model-header"}),a=this.createElement("span",{className:"e-model-title"});a.textContent="Select time";var o=this.createElement("span",{className:"e-popup-close"});C.add(o,"mousedown touchstart",this.dateTimeCloseHandler,this),s.appendChild(o),s.appendChild(a),this.dateTimeWrapper.insertBefore(s,this.dateTimeWrapper.firstElementChild)}},i.prototype.dateTimeCloseHandler=function(e){this.hide()},i.prototype.setDimension=function(e){return typeof e=="number"?e=ce(e):typeof e=="string"?e=e:e="100%",e},i.prototype.setPopupWidth=function(){var e=this.setDimension(this.width);if(e.indexOf("%")>-1){var t=this.containerStyle.width*parseFloat(e)/100;e=t.toString()+"px"}return e},i.prototype.wireTimeListEvents=function(){C.add(this.listWrapper,"click",this.onMouseClick,this),H.isDevice||(C.add(this.listWrapper,"mouseover",this.onMouseOver,this),C.add(this.listWrapper,"mouseout",this.onMouseLeave,this))},i.prototype.unWireTimeListEvents=function(){this.listWrapper&&(C.remove(this.listWrapper,"click",this.onMouseClick),C.remove(document,"mousedown touchstart",this.documentClickHandler),H.isDevice||(C.add(this.listWrapper,"mouseover",this.onMouseOver,this),C.add(this.listWrapper,"mouseout",this.onMouseLeave,this)))},i.prototype.onMouseOver=function(e){var t=M(e.target,"."+_r);this.setTimeHover(t,fc)},i.prototype.onMouseLeave=function(){this.removeTimeHover(fc)},i.prototype.setTimeHover=function(e,t){this.enabled&&this.isValidLI(e)&&!e.classList.contains(t)&&(this.removeTimeHover(t),T([e],t))},i.prototype.getPopupHeight=function(){var e=parseInt($f,10),t=this.dateTimeWrapper.getBoundingClientRect().height;return H.isDevice&&this.fullScreenMode?t:t>e?e:t},i.prototype.changeEvent=function(e){n.prototype.changeEvent.call(this,e),(this.value&&this.value.valueOf())!==(this.previousDateTime&&+this.previousDateTime.valueOf())&&(this.valueWithMinutes=this.value,this.setInputValue("date"),this.previousDateTime=this.value&&new Date(+this.value))},i.prototype.updateValue=function(e){this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs={value:this.value,event:e||null,isInteracted:!d(e),element:this.element},this.addTimeSelection(),this.trigger("change",this.changedArgs),this.previousDateTime=this.previousDate=this.value)},i.prototype.setTimeScrollPosition=function(){var e=this.selectedElement;d(e)?this.dateTimeWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)},i.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),r=e.nextElementSibling,s=r?r.offsetTop:e.offsetTop,a=e.getBoundingClientRect().height;if(s+e.offsetTop>t)if(H.isDevice&&this.fullScreenMode){var o=this.dateTimeWrapper.querySelector(".e-content");o.scrollTop=r?s-(t/_o+a/_o):s}else this.dateTimeWrapper.scrollTop=r?s-(t/_o+a/_o):s;else this.dateTimeWrapper.scrollTop=0},i.prototype.setScrollTo=function(){var e,t=this.dateTimeWrapper.querySelectorAll("."+_r);if(t.length>=0){this.scrollInvoked=!0;var r=this.timeCollections[0],s=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();e=t[Math.round((s-r)/(this.step*6e4))]}else this.dateTimeWrapper.scrollTop=0;d(e)?this.dateTimeWrapper.scrollTop=0:this.findScrollTop(e)},i.prototype.setInputValue=function(e){if(e==="date")this.inputElement.value=this.previousElementValue=this.getFormattedValue(this.getFullDateTime()),this.setProperties({value:this.getFullDateTime()},!0);else{var t=this.getFormattedValue(new Date(this.timeCollections[this.activeIndex]));X.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.previousElementValue=this.inputElement.value,this.setProperties({value:new Date(this.timeCollections[this.activeIndex])},!0),this.enableMask&&this.createMask()}this.updateIconState()},i.prototype.getFullDateTime=function(){var e=null;return this.isDateObject(this.valueWithMinutes)?e=this.combineDateTime(this.valueWithMinutes):e=this.previousDate,this.validateMinMaxRange(e)},i.prototype.createMask=function(){this.notify("createMask",{module:"MaskedDateTime"})},i.prototype.combineDateTime=function(e){if(this.isDateObject(e)){var t=this.previousDate.getDate(),r=this.previousDate.getMonth(),s=this.previousDate.getFullYear(),a=e.getHours(),o=e.getMinutes(),l=e.getSeconds();return new Date(s,r,t,a,o,l)}else return this.previousDate},i.prototype.onMouseClick=function(e){var t=e.target,r=this.selectedElement=M(t,"."+_r);r&&r.classList.contains(_r)&&(this.timeValue=r.getAttribute("data-value"),this.hide(e)),this.setSelection(r,e)},i.prototype.setSelection=function(e,t){if(this.isValidLI(e)&&!e.classList.contains(Wr)){this.selectedElement=e;var r=Array.prototype.slice.call(this.liCollections).indexOf(e);this.activeIndex=r,this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),T([this.selectedElement],Wr),this.selectedElement.setAttribute("aria-selected","true"),this.updateValue(t)}},i.prototype.setTimeActiveClass=function(){var e=d(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;if(!d(e)){var t=e.querySelectorAll("."+_r);if(t.length){for(var r=0;r<t.length;r++)if(this.timeCollections[r]===+this.valueWithMinutes){t[r].setAttribute("aria-selected","true"),this.selectedElement=t[r],this.activeIndex=r,this.setTimeActiveDescendant();break}}}},i.prototype.setTimeActiveDescendant=function(){!d(this.selectedElement)&&this.value?J(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")}):this.inputElement.removeAttribute("aria-activedescendant")},i.prototype.addTimeSelection=function(){this.selectedElement=null,this.removeTimeSelection(),this.setTimeActiveClass(),d(this.selectedElement)||(T([this.selectedElement],Wr),this.selectedElement.setAttribute("aria-selected","true"))},i.prototype.removeTimeSelection=function(){if(this.removeTimeHover(fc),!d(this.dateTimeWrapper)){var e=this.dateTimeWrapper.querySelectorAll("."+Wr);e.length&&(I(e,Wr),e[0].removeAttribute("aria-selected"))}},i.prototype.removeTimeHover=function(e){var t=this.getTimeHoverItem(e);t&&t.length&&I(t,e)},i.prototype.getTimeHoverItem=function(e){var t=d(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper,r;return d(t)||(r=t.querySelectorAll("."+e)),r},i.prototype.isValidLI=function(e){return e&&e.classList.contains(_r)&&!e.classList.contains(pc)},i.prototype.calculateStartEnd=function(e,t,r){var s=e.getDate(),a=e.getMonth(),o=e.getFullYear(),l=e.getHours(),h=e.getMinutes(),c=e.getSeconds(),u=e.getMilliseconds();return t?r==="starttime"?new Date(o,a,s,0,0,0):new Date(o,a,s,23,59,59):new Date(o,a,s,l,h,c,u)},i.prototype.startTime=function(e){var t,r,s=this.min,a=this.max,o=e===null?new Date:e,l=!1,h;return this.minTime?(h=new Date(o.getFullYear(),o.getMonth(),o.getDate(),this.minTime.getHours(),this.minTime.getMinutes(),this.minTime.getSeconds(),this.minTime.getMilliseconds()),l=!0):h=o,+h.getDate()==+s.getDate()&&+h.getMonth()==+s.getMonth()&&+h.getFullYear()==+s.getFullYear()||+new Date(h.getFullYear(),h.getMonth(),h.getDate())<=+new Date(s.getFullYear(),s.getMonth(),s.getDate())?(r=!1,t=s,l&&+new Date(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds())>=+new Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds())&&t.setHours(h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds())):+h<+a&&+h>+s?(r=!l,t=h):+h>=+a&&(r=!0,t=a),this.calculateStartEnd(t,r,"starttime")},i.prototype.TimePopupFormat=function(){var e="",t=0,r=this;function s(a){switch(a){case"d":case"dd":case"ddd":case"dddd":case"M":case"MM":case"MMM":case"MMMM":case"y":case"yy":case"yyy":case"yyyy":e===""?e=e+a:e=e+"/"+a,t=t+1;break}return t>2&&(r.dateFormatString=e),e}return s},i.prototype.endTime=function(e){var t,r,s=this.max,a=e===null?new Date:e,o=!1,l;return this.maxTime?(l=new Date(a.getFullYear(),a.getMonth(),a.getDate(),this.maxTime.getHours(),this.maxTime.getMinutes(),this.maxTime.getSeconds(),this.maxTime.getMilliseconds()),o=!0):l=a,+l.getDate()==+s.getDate()&&+l.getMonth()==+s.getMonth()&&+l.getFullYear()==+s.getFullYear()||+new Date(l.getUTCFullYear(),l.getMonth(),l.getDate())>=+new Date(s.getFullYear(),s.getMonth(),s.getDate())?(r=!1,t=this.max,o&&+new Date(l.getUTCFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds())<=+new Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds())&&t.setHours(l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds())):+l<+this.max&&+l>+this.min?(r=!o,t=l):+l<=+this.min&&(r=!0,t=this.min),this.calculateStartEnd(t,r,"endtime")},i.prototype.hide=function(e){var t=this;if(this.popupObj||this.dateTimeWrapper){this.preventArgs={cancel:!1,popup:this.popupObj||this.popupObject,event:e||null};var r=this.preventArgs;d(this.popupObj)?this.trigger("close",r,function(s){t.dateTimeCloseEventCallback(e,s)}):this.dateTimeCloseEventCallback(e,r)}else H.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},i.prototype.dateTimeCloseEventCallback=function(e,t){this.preventArgs=t,this.preventArgs.cancel||(this.isDatePopupOpen()?n.prototype.hide.call(this,e):this.isTimePopupOpen()&&(this.closePopup(e),I([document.body],Zf),H.isDevice&&this.timeModal&&(this.timeModal.style.display="none",this.timeModal.outerHTML="",this.timeModal=null),this.setTimeActiveDescendant())),H.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},i.prototype.closePopup=function(e){if(this.isTimePopupOpen()&&this.popupObject){var t={name:"FadeOut",duration:Xf,delay:0};this.popupObject.hide(new wi(t)),this.inputWrapper.container.classList.remove(Kf),J(this.inputElement,{"aria-expanded":"false"}),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-controls"),C.remove(document,"mousedown touchstart",this.documentClickHandler)}},i.prototype.preRender=function(){this.checkFormat(),this.dateTimeFormat=this.cldrDateTimeFormat(),n.prototype.preRender.call(this),I([this.inputElementCopy],[ca])},i.prototype.getProperty=function(e,t){t==="min"?this.setProperties({min:this.validateValue(e.min)},!0):this.setProperties({max:this.validateValue(e.max)},!0)},i.prototype.checkAttributes=function(e){for(var t=e?d(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["style","name","step","disabled","readonly","value","min","max","placeholder","type"],r,s=0,a=t;s<a.length;s++){var o=a[s];if(!d(this.inputElement.getAttribute(o)))switch(o){case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(o));break;case"step":this.step=parseInt(this.inputElement.getAttribute(o),10);break;case"readonly":if(d(this.dateTimeOptions)||this.dateTimeOptions.readonly===void 0||e){var l=this.inputElement.getAttribute(o)==="disabled"||this.inputElement.getAttribute(o)===""||this.inputElement.getAttribute(o)==="true";this.setProperties({readonly:l},!e)}break;case"placeholder":(d(this.dateTimeOptions)||this.dateTimeOptions.placeholder===void 0||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(o)},!e);break;case"min":(d(this.dateTimeOptions)||this.dateTimeOptions.min===void 0||e)&&(r=new Date(this.inputElement.getAttribute(o)),!this.isNullOrEmpty(r)&&!isNaN(+r)&&this.setProperties({min:r},!e));break;case"disabled":if(d(this.dateTimeOptions)||this.dateTimeOptions.enabled===void 0||e){var h=!(this.inputElement.getAttribute(o)==="disabled"||this.inputElement.getAttribute(o)==="true"||this.inputElement.getAttribute(o)==="");this.setProperties({enabled:h},!e)}break;case"value":(d(this.dateTimeOptions)||this.dateTimeOptions.value===void 0||e)&&(r=new Date(this.inputElement.getAttribute(o)),!this.isNullOrEmpty(r)&&!isNaN(+r)&&this.setProperties({value:r},!e));break;case"max":(d(this.dateTimeOptions)||this.dateTimeOptions.max===void 0||e)&&(r=new Date(this.inputElement.getAttribute(o)),!this.isNullOrEmpty(r)&&!isNaN(+r)&&this.setProperties({max:r},!e));break}}},i.prototype.requiredModules=function(){var e=[];return this.calendarMode==="Islamic"&&e.push({args:[this],member:"islamic",name:"Islamic"}),this.enableMask&&e.push(this.maskedDateModule()),e},i.prototype.maskedDateModule=function(){var e={args:[this],member:"MaskedDateTime"};return e},i.prototype.getTimeActiveElement=function(){return d(this.dateTimeWrapper)?null:this.dateTimeWrapper.querySelectorAll("."+Wr)},i.prototype.createDateObj=function(e){return e instanceof Date?e:null},i.prototype.getDateObject=function(e){if(!this.isNullOrEmpty(e)){var t=this.createDateObj(e),r=this.valueWithMinutes,s=!d(r);if(this.checkDateValue(t)){var a=s?r.getDate():RC,o=s?r.getMonth():NC,l=s?r.getFullYear():LC,h=s?r.getHours():VC,c=s?r.getMinutes():PC,u=s?r.getSeconds():HC,p=s?r.getMilliseconds():BC;return this.scrollInvoked?(this.scrollInvoked=!1,new Date(l,o,a,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())):new Date(l,o,a,h,c,u,p)}}return null},i.prototype.findNextTimeElement=function(e){var t=this.inputElement.value,r=d(this.valueWithMinutes)?this.createDateObj(t):this.getDateObject(this.valueWithMinutes),s=null,a=this.liCollections.length;if(!d(this.activeIndex)||!d(this.checkDateValue(r))){if(e.action==="home")s=+this.createDateObj(new Date(this.timeCollections[0])),this.activeIndex=0;else if(e.action==="end")s=+this.createDateObj(new Date(this.timeCollections[this.timeCollections.length-1])),this.activeIndex=this.timeCollections.length-1;else if(e.action==="down"){for(var o=0;o<a;o++)if(+r<this.timeCollections[o]){s=+this.createDateObj(new Date(this.timeCollections[o])),this.activeIndex=o;break}}else for(var o=a-1;o>=0;o--)if(+r>this.timeCollections[o]){s=+this.createDateObj(new Date(this.timeCollections[o])),this.activeIndex=o;break}this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(d(s)?null:new Date(s))}},i.prototype.setTimeValue=function(e,t){var r,s,a=this.validateMinMaxRange(t),o=this.createDateObj(a);return this.getFormattedValue(o)!==(d(this.value)?null:this.getFormattedValue(this.value))?(this.valueWithMinutes=d(o)?null:o,s=new Date(+this.valueWithMinutes)):(this.strictMode&&(e=o),this.valueWithMinutes=this.checkDateValue(e),s=new Date(+this.valueWithMinutes)),this.calendarMode==="Gregorian"?r=this.globalize.formatDate(s,{format:d(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd"}):r=this.globalize.formatDate(s,{format:d(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),!this.strictMode&&d(s)?X.setValue(r,this.inputElement,this.floatLabelType,this.showClearButton):X.setValue(r,this.inputElement,this.floatLabelType,this.showClearButton),s},i.prototype.timeElementValue=function(e){if(!d(this.checkDateValue(e))&&!this.isNullOrEmpty(e)){var t=e instanceof Date?e:this.getDateObject(e);return this.setTimeValue(t,e)}return null},i.prototype.timeKeyHandler=function(e){if(!(d(this.step)||this.step<=0)){var t=this.timeCollections.length;if(d(this.getTimeActiveElement())||this.getTimeActiveElement().length===0)this.liCollections.length>0&&(d(this.value)&&d(this.activeIndex)?(this.activeIndex=0,this.selectedElement=this.liCollections[0],this.timeElementValue(new Date(this.timeCollections[0]))):this.findNextTimeElement(e));else{var r=void 0;if(e.keyCode>=37&&e.keyCode<=40){var s=e.keyCode===40||e.keyCode===39?++this.activeIndex:--this.activeIndex;this.activeIndex=s=this.activeIndex===t?0:this.activeIndex,this.activeIndex=s=this.activeIndex<0?t-1:this.activeIndex,r=d(this.timeCollections[s])?this.timeCollections[0]:this.timeCollections[s]}else e.action==="home"?(this.activeIndex=0,r=this.timeCollections[0]):e.action==="end"&&(this.activeIndex=t-1,r=this.timeCollections[t-1]);this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(new Date(r))}this.isNavigate=!0,this.setTimeHover(this.selectedElement,qC),this.setTimeActiveDescendant(),this.isTimePopupOpen()&&this.selectedElement!==null&&(!e||e.type!=="click")&&this.setTimeScrollPosition()}},i.prototype.timeKeyActionHandle=function(e){if(this.enabled)switch(e.action!=="right"&&e.action!=="left"&&e.action!=="tab"&&e.preventDefault(),e.action){case"up":case"down":case"home":case"end":this.timeKeyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs.value=this.value,this.addTimeSelection(),this.previousDateTime=this.value)):this.updateValue(e),this.hide(e),T([this.inputWrapper.container],ua),this.isNavigate=!1,e.stopPropagation();break;case"escape":this.hide(e);break;default:this.isNavigate=!1;break}},i.prototype.inputKeyAction=function(e){switch(e.action){case"altDownArrow":this.strictModeUpdate(),this.updateInput(),this.toggle(e);break}},i.prototype.onPropertyChanged=function(e,t){for(var r=0,s=Object.keys(e);r<s.length;r++){var a=s[r],o=["blur","change","cleared","close","created","destroyed","focus","navigated","open","renderDayCell"];switch(o.indexOf(a)>0&&this.isReact&&(this.isDynamicValueChanged=!0),a){case"value":this.isDynamicValueChanged=!0,this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,e.value=this.validateValue(e.value),this.enableMask?X.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton):X.setValue(this.getFormattedValue(e.value),this.inputElement,this.floatLabelType,this.showClearButton),this.valueWithMinutes=e.value,this.setProperties({value:e.value},!0),this.popupObj&&this.popupUpdate(),this.previousDateTime=new Date(this.inputElement.value),this.updateInput(),this.changeTrigger(null),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.value&&this.notify("createMask",{module:"MaskedDateTime"});break;case"min":case"max":this.getProperty(e,a),this.updateInput();break;case"enableRtl":X.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"cssClass":d(t.cssClass)||(t.cssClass=t.cssClass.replace(/\s+/g," ").trim()),d(e.cssClass)||(e.cssClass=e.cssClass.replace(/\s+/g," ").trim()),X.setCssClass(e.cssClass,[this.inputWrapper.container],t.cssClass),this.dateTimeWrapper&&X.setCssClass(e.cssClass,[this.dateTimeWrapper],t.cssClass);break;case"locale":this.globalize=new je(this.locale),this.l10n.setLocale(this.locale),this.dateTimeOptions&&this.dateTimeOptions.placeholder==null&&(this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),X.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement)),this.dateTimeFormat=this.cldrDateTimeFormat(),n.prototype.updateInput.call(this);break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"format":this.setProperties({format:e.format},!0),this.checkFormat(),this.dateTimeFormat=this.formatString,this.setValue(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||X.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;case"placeholder":X.setPlaceholder(e.placeholder,this.inputElement);break;case"enabled":X.setEnabled(this.enabled,this.inputElement),this.enabled?this.inputElement.setAttribute("tabindex",this.tabIndex):this.inputElement.tabIndex=-1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width),X.calculateWidth(this.inputElement,this.inputWrapper.container),!d(this.inputWrapper.buttons[0])&&!d(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"readonly":X.setReadonly(this.readonly,this.inputElement);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,X.removeFloating(this.inputWrapper),X.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!d(this.inputWrapper.buttons[0])&&!d(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"scrollTo":this.checkDateValue(new Date(this.checkValue(e.scrollTo)))?(this.dateTimeWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(e.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),X.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton)):this.inputElement.value===this.maskedDateValue&&(this.maskedDateValue="",X.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;default:n.prototype.onPropertyChanged.call(this,e,t);break}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}},i.prototype.updateLabelOverflowWidth=function(){for(var e=this.inputWrapper.container,t=e.querySelector(".e-float-text.e-label-bottom"),r=0,s=".e-input-group-icon, .e-clear-icon",a=e.querySelectorAll(s),o=0;o<a.length;o++)r+=a[o].offsetWidth;if(t){var l=this.element.parentElement.offsetWidth-r;l&&!(this.cssClass&&this.cssClass.split(" ").indexOf("e-outline")!==-1)&&(t.style.width=l+"px")}},i.prototype.clearLabelOverflowWidth=function(){var e=this.inputWrapper.container,t=e.querySelector(".e-float-text.e-label-top");t&&t.removeAttribute("style")},i.prototype.getModuleName=function(){return"datetimepicker"},i.prototype.restoreValue=function(){this.previousDateTime=this.previousDate,this.currentDate=this.value?this.value:new Date,this.valueWithMinutes=this.value,this.previousDate=this.value,this.previousElementValue=this.previousElementValue=d(this.inputValueCopy)?"":this.getFormattedValue(this.inputValueCopy)},we([S(null)],i.prototype,"timeFormat",void 0),we([S(30)],i.prototype,"step",void 0),we([S(null)],i.prototype,"scrollTo",void 0),we([S(1e3)],i.prototype,"zIndex",void 0),we([S(null)],i.prototype,"value",void 0),we([S(null)],i.prototype,"keyConfigs",void 0),we([S({})],i.prototype,"htmlAttributes",void 0),we([S(!1)],i.prototype,"enablePersistence",void 0),we([S(!0)],i.prototype,"allowEdit",void 0),we([S(!1)],i.prototype,"isMultiSelection",void 0),we([S(null)],i.prototype,"values",void 0),we([S(!0)],i.prototype,"showClearButton",void 0),we([S(null)],i.prototype,"placeholder",void 0),we([S(!1)],i.prototype,"strictMode",void 0),we([S(!1)],i.prototype,"fullScreenMode",void 0),we([S(null)],i.prototype,"serverTimezoneOffset",void 0),we([S(new Date(1900,0,1))],i.prototype,"min",void 0),we([S(new Date(2099,11,31))],i.prototype,"max",void 0),we([S(null)],i.prototype,"minTime",void 0),we([S(null)],i.prototype,"maxTime",void 0),we([S(null)],i.prototype,"firstDayOfWeek",void 0),we([S("Gregorian")],i.prototype,"calendarMode",void 0),we([S("Month")],i.prototype,"start",void 0),we([S("Month")],i.prototype,"depth",void 0),we([S(!1)],i.prototype,"weekNumber",void 0),we([S(!0)],i.prototype,"showTodayButton",void 0),we([S("Short")],i.prototype,"dayHeaderFormat",void 0),we([S(!1)],i.prototype,"openOnFocus",void 0),we([S(!1)],i.prototype,"enableMask",void 0),we([S({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],i.prototype,"maskPlaceholder",void 0),we([_()],i.prototype,"open",void 0),we([_()],i.prototype,"close",void 0),we([_()],i.prototype,"cleared",void 0),we([_()],i.prototype,"blur",void 0),we([_()],i.prototype,"focus",void 0),we([_()],i.prototype,"created",void 0),we([_()],i.prototype,"destroyed",void 0),i=we([Ft],i),i}(ry);const UC={class:"px-4"},YC={class:"kanban-table space-y-4 h-[85vh] mt-4 overflow-y-auto overflow-x-auto"},GC={class:"w-full table-fixed border-collapse rounded-[6px] shadow-sm bg-bg-body/20 text-sm border border-border/60"},$C={class:"bg-bg-surface border-b border-border sticky top-[-1px] z-10"},KC={class:"text-text-secondary"},QC=["onMousedown"],XC={class:"w-10 p-2 text-center relative"},ZC={class:"relative inline-block"},JC={key:0,class:"column-menu absolute w-[200px] -right-1 bg-bg-dropdown border border-border rounded shadow z-50"},ew=["checked","onChange"],tw={class:"bg-bg-surface/20"},iw=["colspan"],rw=["onClick"],sw=["colspan"],nw=["onMouseenter"],aw=["colspan"],ow=["onUpdate:modelValue","onBlur"],lw=["colspan"],fV=Ks({__name:"TableView",props:{columns:{},rows:{},isPending:{type:Boolean},canCreate:{type:Boolean,default:!0},canCreateVariable:{type:Boolean,default:!0}},emits:["update:rows","create","toggleVisibility","addVar"],setup(n,{emit:i}){const e=n,t=i,r=xh(e.rows||[]);Qa(()=>e.rows,O=>{O&&r.splice(0,r.length,...O)});const s=xh({id:null,field:""}),a=nt(null),o=nt(null),l=Bt(()=>r.some(O=>s.id===O.id&&!O[s.field])),h=(O,P)=>{s.id=O.id,s.field=P,dd(()=>{var F;return(F=o.value)==null?void 0:F.focus()})},c=()=>{s.id=null,s.field=""},u=O=>{var P;if(!((P=O[s.field])!=null&&P.trim())){const F=r.findIndex(ie=>ie.id===O.id);F!==-1&&r.splice(F,1)}c(),t("update:rows",r.slice()),t("create",O)},p=O=>{var F;const P={id:Date.now()};e.columns.forEach(ie=>P[ie.key]=""),r.splice(O,0,P),h(P,((F=e.columns[0])==null?void 0:F.key)||""),a.value=null,t("update:rows",r.slice())};function f(O,P){if(!(!O||!P))return P.includes(".")?P.split(".").reduce((F,ie)=>F==null?F:F[ie],O):O[P]}function v(O,P){return P!=null&&P.accessor?P.accessor(O):f(O,P.key)}const m=O=>{var F;const P=v(O.row,O.column);return(F=O.column)!=null&&F.render?O.column.render({row:O==null?void 0:O.row,column:O==null?void 0:O.column,value:P,index:O==null?void 0:O.index}):Wa("span",String(P??""))},g=xh({});Qa(()=>e.columns,O=>{O.forEach((P,F)=>{F==0?g[P.key]=250:g[P.key]||(g[P.key]=150)})},{immediate:!0});let y=null,b=0,E=0;const w=(O,P)=>{y=P,b=O.clientX,E=g[P],document.addEventListener("mousemove",A),document.addEventListener("mouseup",D)},A=O=>{if(!y)return;const P=O.clientX-b,F=Math.max(80,E+P);g[y]=F},D=()=>{y=null,document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",D)};document.addEventListener("click",O=>{O.target.closest(".column-menu")||(j.value=!1)});const N=nt(e.columns.filter(O=>O.visible??!0).map(O=>O.key)),x=Bt(()=>e.columns.filter(O=>N.value.includes(O.key))),j=nt(!1);document.addEventListener("click",O=>{O.target.closest(".column-menu")||(j.value=!1)});const q=O=>{const P=N.value.indexOf(O);P===-1?(t("toggleVisibility",O,!0),N.value.push(O)):(t("toggleVisibility",O,!1),N.value.splice(P,1))},L=Bt(()=>1+x.value.length+1);return(O,P)=>(fe(),me("div",UC,[be("div",YC,[be("table",GC,[be("thead",$C,[be("tr",KC,[P[8]||(P[8]=be("th",{class:"w-2 p-0"},null,-1)),(fe(!0),me(Ki,null,Kr(x.value,F=>(fe(),me("th",{key:F==null?void 0:F.key,class:"relative font-bold p-2 uppercase text-left text-[11px] tracking-wide border-r border-border/40 select-none whitespace-nowrap min-w-[200px]",style:Tr({width:g[F.key]?g[F.key]+"px":"100%"})},[be("span",null,Oi(F==null?void 0:F.label),1),be("div",{class:"absolute right-0 top-0 h-full w-2 cursor-col-resize z-30 hover:bg-accent/20 active:bg-accent/40 transition",onMousedown:ie=>w(ie,F.key)},null,40,QC)],4))),128)),be("th",XC,[be("div",ZC,[be("button",{onClick:P[0]||(P[0]=Dn(F=>j.value=!j.value,["stop"])),class:"p-1 rounded hover:bg-bg-surface/50 cursor-pointer"},P[6]||(P[6]=[be("i",{class:"fa-regular fa-columns-3"},null,-1)])),j.value?(fe(),me("div",JC,[(fe(!0),me(Ki,null,Kr(e.columns,F=>(fe(),me("div",{key:"toggle-"+F.key,class:"flex items-center space-x-2 px-3 py-1.5 capitalize font-medium cursor-pointer hover:bg-bg-dropdown-menu-hover text-[12px] text-text-primary gap-2"},[be("input",{type:"checkbox",checked:N.value.includes(F.key),onChange:ie=>q(F.key),class:"h-4 w-4 mt-0.5 rounded border-border accent-accent cursor-pointer flex-shrink-0"},null,40,ew),be("span",null,Oi(F.label),1)]))),128)),O.canCreateVariable?(fe(),me("div",{key:0,onClick:P[1]||(P[1]=F=>t("addVar")),class:"sticky bottom-0 bg-bg-dropdown shadow-md mt-2 shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},P[7]||(P[7]=[be("i",{class:"fa-solid fa-plus"},null,-1),Sl(" Add new ")]))):Ls("",!0)])):Ls("",!0)])])])]),be("tbody",tw,[O.isPending?(fe(),me(Ki,{key:0},Kr(5,F=>be("tr",{key:"sk-"+F,class:"border-b border-border animate-pulse"},[P[10]||(P[10]=be("td",null,[be("div",{class:"w-4 h-4 bg-bg-surface rounded"})],-1)),(fe(!0),me(Ki,null,Kr(O.columns,(ie,U)=>(fe(),me("td",{key:ie.key,class:"border-r border-border h-8",style:Tr({width:g[ie.key]+"px"}),colspan:U===x.value.length-1?2:1},P[9]||(P[9]=[be("div",{class:"w-full h-4 bg-bg-surface rounded"},null,-1)]),12,iw))),128))])),64)):(fe(!0),me(Ki,{key:1},Kr(r,(F,ie)=>{var U;return fe(),me(Ki,{key:F==null?void 0:F.id},[a.value===ie&&!l.value?(fe(),me("tr",{key:0,class:"relative bg-bg-surface/20 transition-all cursor-pointer border border-accent",onMouseleave:P[2]||(P[2]=ne=>a.value=null)},[be("td",{class:"!p-0 w-8",onClick:ne=>p(ie)},P[11]||(P[11]=[be("span",{class:"absolute left-[-6px] top-[-14px] bg-bg-surface border border-border w-6 h-6 text-sm rounded-md flex justify-center items-center shadow-sm hover:bg-bg-surface/70"},"+",-1)]),8,rw),be("td",{class:"!p-0",colspan:(U=O.columns)==null?void 0:U.length},null,8,sw)],32)):Ls("",!0),be("tr",{onMouseenter:ne=>a.value=ie,class:"border-b border-border hover:bg-bg-surface/40 transition-colors"},[P[12]||(P[12]=be("td",null,null,-1)),(fe(!0),me(Ki,null,Kr(x.value,(ne,Ae)=>(fe(),me("td",{key:ne==null?void 0:ne.key,class:"border-r border-border overflow-visible relative h-8",style:Tr({width:g[ne.key]+"px"}),colspan:Ae===x.value.length-1?2:1},[(s==null?void 0:s.id)===(F==null?void 0:F.id)&&(s==null?void 0:s.field)===(ne==null?void 0:ne.key)?hd((fe(),me("input",{key:0,"onUpdate:modelValue":ge=>F[ne==null?void 0:ne.key]=ge,onBlur:ge=>u(F),class:"min-w-[200px] w-full p-1 border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-bg-body text-[12px] h-8",ref_for:!0,ref:ge=>ge&&(s==null?void 0:s.id)===(F==null?void 0:F.id)&&(s==null?void 0:s.field)===(ne==null?void 0:ne.key)&&(o.value=ge)},null,40,ow)),[[cd,F[ne==null?void 0:ne.key]]]):ou(O.$slots,ne.key,{key:2,row:F,column:ne,index:`r-${F._id}`},()=>[(fe(),ud(bS(m),{row:F,column:ne,index:F._id},null,8,["row","column","index"]))])],12,aw))),128))],40,nw)],64)}),128)),!l.value&&O.canCreate?(fe(),me("tr",{key:2,onClick:P[3]||(P[3]=F=>p(r==null?void 0:r.length)),class:"sticky bottom-0 bg-bg-surface border-t border-border cursor-pointer transition hover:bg-bg-body",onMouseenter:P[4]||(P[4]=F=>a.value=r==null?void 0:r.length),onMouseleave:P[5]||(P[5]=F=>a.value=null)},[be("td",{colspan:L.value,class:"text-text-secondary h-8 px-3"},P[13]||(P[13]=[be("span",{class:"inline-flex w-5 h-5 border border-border-input rounded-full justify-center items-center text-secondary hover:bg-bg-surface/50 transition pb-0.5"},"+",-1),Sl(" Add New Row ")]),8,lw)],32)):Ls("",!0)])])])]))}});(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".mind-elixir{--gap: 30px;--root-radius: 30px;--main-radius: 20px;--root-color: #ffffff;--root-bgcolor: #4c4f69;--main-color: #444446;--main-bgcolor: #ffffff;--topic-padding: 3px;--color: #777777;--bgcolor: #f6f6f6;--selected: #4dc4ff;--panel-color: #444446;--panel-bgcolor: #ffffff;--panel-border-color: #eaeaea;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif}.mind-elixir .hyper-link{text-decoration:none;margin-left:.3em}.map-container{-webkit-user-select:none;user-select:none;height:100%;width:100%;overflow:scroll;font-size:15px}.map-container *{box-sizing:border-box}.map-container::-webkit-scrollbar{width:0px;height:0px}.map-container .selected{box-shadow:0 0 0 2px var(--selected)}.map-container .lhs{direction:rtl}.map-container .lhs me-tpc{direction:ltr}.map-container .map-canvas{height:20000px;width:20000px;position:relative;-webkit-user-select:none;user-select:none;transition:transform .3s;transform:scale(1);background-color:var(--bgcolor)}.map-container .map-canvas me-nodes{position:absolute;display:flex;justify-content:center;align-items:center;height:fit-content;width:fit-content}.map-container .map-canvas me-root{position:relative}.map-container .map-canvas me-root me-tpc{display:block;font-size:25px;color:var(--root-color);padding:10px var(--gap);border-radius:var(--root-radius);white-space:pre-wrap;background-color:var(--root-bgcolor)}.map-container .map-canvas me-root me-tpc #input-box{padding:10px var(--gap)}.map-container me-main>me-wrapper{position:relative;margin:45px 65px}.map-container me-main>me-wrapper>me-parent{margin:10px;padding:0}.map-container me-main>me-wrapper>me-parent>me-tpc{border-radius:var(--main-radius);background-color:var(--main-bgcolor);border:2px solid var(--main-color);color:var(--main-color);padding:8px 25px}.map-container me-main>me-wrapper>me-parent>me-tpc #input-box{padding:8px 25px}.map-container me-wrapper{display:block;pointer-events:none;width:fit-content}.map-container me-children,.map-container me-parent{display:inline-block;vertical-align:middle}.map-container me-parent{position:relative;cursor:pointer;padding:6px var(--gap);margin-top:10px}.map-container me-parent me-tpc{position:relative;display:block;border-radius:3px;color:var(--color);pointer-events:all;max-width:35em;white-space:pre-wrap;padding:var(--topic-padding)}.map-container me-parent me-tpc .insert-preview{position:absolute;width:100%;left:0;z-index:9}.map-container me-parent me-tpc .show{background:#7ad5ff;pointer-events:none;opacity:.7}.map-container me-parent me-tpc .before{height:14px;top:-14px}.map-container me-parent me-tpc .in{height:100%;top:0}.map-container me-parent me-tpc .after{height:14px;bottom:-14px}.map-container me-parent me-epd{position:absolute;height:18px;width:18px;opacity:.8;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NDcxNzI0MiIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNDgwaC0xMzguNjY2NjY3VjM0MS4zMzMzMzNjMC0xNy4wNjY2NjctMTQuOTMzMzMzLTMyLTMyLTMycy0zMiAxNC45MzMzMzMtMzIgMzJ2MTM4LjY2NjY2N0gzNDEuMzMzMzMzYy0xNy4wNjY2NjcgMC0zMiAxNC45MzMzMzMtMzIgMzJzMTQuOTMzMzMzIDMyIDMyIDMyaDEzOC42NjY2NjdWNjgyLjY2NjY2N2MwIDE3LjA2NjY2NyAxNC45MzMzMzMgMzIgMzIgMzJzMzItMTQuOTMzMzMzIDMyLTMydi0xMzguNjY2NjY3SDY4Mi42NjY2NjdjMTcuMDY2NjY3IDAgMzItMTQuOTMzMzMzIDMyLTMycy0xNC45MzMzMzMtMzItMzItMzJ6Ij48L3BhdGg+Cjwvc3ZnPg==);background-repeat:no-repeat;background-size:contain;background-position:center;pointer-events:all;z-index:9}.map-container me-parent me-epd.minus{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NTU2NDk4NSIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNTQ0SDM0MS4zMzMzMzNjLTE3LjA2NjY2NyAwLTMyLTE0LjkzMzMzMy0zMi0zMnMxNC45MzMzMzMtMzIgMzItMzJoMzQxLjMzMzMzNGMxNy4wNjY2NjcgMCAzMiAxNC45MzMzMzMgMzIgMzJzLTE0LjkzMzMzMyAzMi0zMiAzMnoiPjwvcGF0aD4KPC9zdmc+)!important;transition:opacity .3s;opacity:0}.map-container me-parent me-epd.minus:hover{opacity:.8}.map-container .icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}.map-container .lines,.map-container .summary,.map-container .subLines,.map-container .topiclinks,.map-container .linkcontroller{position:absolute;height:102%;width:100%;top:0;left:0}.map-container .topiclinks,.map-container .linkcontroller,.map-container .summary{pointer-events:none}.map-container .topiclinks text,.map-container .linkcontroller text,.map-container .summary text{pointer-events:all}.map-container .topiclinks .selected,.map-container .linkcontroller .selected,.map-container .summary .selected{pointer-events:none}.map-container .lines,.map-container .subLines{pointer-events:none;z-index:-1}.map-container .topiclinks *,.map-container .linkcontroller *{z-index:100}.map-container .topiclinks g{cursor:pointer}.map-container #input-box{position:absolute;top:0;left:0;padding:var(--topic-padding);color:var(--color);background-color:var(--bgcolor);width:max-content;max-width:35em;z-index:11;direction:ltr;-webkit-user-select:auto;user-select:auto;pointer-events:all}.map-container me-tpc>*{pointer-events:none}.map-container me-tpc>img{display:block;margin-bottom:8px;object-fit:cover}.map-container me-tpc>.text{display:inline-block}.map-container .circle{position:absolute;height:10px;width:10px;margin-top:-5px;margin-left:-5px;border-radius:100%;background:#757575;border:2px solid #ffffff;cursor:pointer}.map-container .tags{direction:ltr}.map-container .tags span{display:inline-block;border-radius:3px;padding:2px 4px;background:#d6f0f8;color:#276f86;margin:2px 3px 0 0;font-size:12px;line-height:1.3em}.map-container .icons{display:inline-block;direction:ltr;margin-right:10px}.map-container .icons span{display:inline-block;line-height:1.3em}.map-container .mind-elixir-ghost{position:fixed;top:-100%;left:-100%;box-sizing:content-box;opacity:.5;background-color:#f6f6f6;max-width:200px;width:fit-content;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:8px 16px;border-radius:6px;border:#666666 2px solid}.map-container .selection-area{background:#4f90f22d;border:1px solid #4f90f2}.mind-elixir .context-menu{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99}.mind-elixir .context-menu .menu-list{position:fixed;list-style:none;margin:0;padding:0;font:300 15px Roboto,sans-serif;color:var(--panel-color);box-shadow:0 12px 15px #0003}.mind-elixir .context-menu .menu-list li{min-width:200px;overflow:hidden;white-space:nowrap;padding:10px 14px;background:var(--panel-bgcolor);border-bottom:1px solid var(--panel-border-color)}.mind-elixir .context-menu .menu-list li a{color:#333;text-decoration:none}.mind-elixir .context-menu .menu-list li.disabled{display:none;color:#5e5e5e;background-color:#f7f7f7}.mind-elixir .context-menu .menu-list li.disabled:hover{cursor:default;background-color:#f7f7f7}.mind-elixir .context-menu .menu-list li:hover{cursor:pointer;filter:brightness(.9)}.mind-elixir .context-menu .menu-list li:first-child{border-radius:5px 5px 0 0}.mind-elixir .context-menu .menu-list li:last-child{border-bottom:0;border-radius:0 0 5px 5px}.mind-elixir .context-menu .menu-list li span:last-child{float:right}.mind-elixir .tips{position:absolute;bottom:20px;left:50%;transform:translate(-50%);color:var(--panel-color);font-weight:bolder}.mind-elixir .mobile-menu{position:absolute;left:20px;bottom:70px;z-index:99;margin:0;padding:0;color:#333;border-radius:5px;box-shadow:0 12px 15px #0003;overflow:hidden}.mind-elixir .mobile-menu *{transition:color .4s,background-color .4s}.mind-elixir .mobile-menu div{float:left;text-align:center;width:30px;overflow:hidden;white-space:nowrap;padding:8px;background-color:#fff;border-bottom:1px solid #ecf0f1}.mind-elixir .mobile-menu div a{color:#333;text-decoration:none}.mind-elixir .mobile-menu div.disabled{color:#5e5e5e;background-color:#f7f7f7}.mind-elixir .mobile-menu div.disabled:hover{cursor:default;background-color:#f7f7f7}.mind-elixir .mobile-menu div:hover{cursor:pointer;background-color:#ecf0f1}.mind-elixir-toolbar{font-family:iconfont;position:absolute;color:var(--panel-color);background:var(--panel-bgcolor);padding:10px;border-radius:5px;box-shadow:0 1px 2px #0003}.mind-elixir-toolbar svg{display:inline-block}.mind-elixir-toolbar span:active{opacity:.5}.mind-elixir-toolbar.rb{right:20px;bottom:20px}.mind-elixir-toolbar.rb span+span{margin-left:10px}.mind-elixir-toolbar.lt{font-size:20px;left:20px;top:20px}.mind-elixir-toolbar.lt span{display:block}.mind-elixir-toolbar.lt span+span{margin-top:10px}")),document.head.appendChild(n)}}catch(i){console.error("vite-plugin-css-injected-by-js",i)}})();(function(n){var i,e,t,r,s,a,o='<svg><symbol id="icon-edit" viewBox="0 0 1024 1024"><path d="M423.765333 128a42.666667 42.666667 0 0 1 3.2 85.205333L423.765333 213.333333H234.666667a64 64 0 0 0-63.872 60.245334L170.666667 277.333333v512a64 64 0 0 0 60.245333 63.872L234.666667 853.333333h512a64 64 0 0 0 63.872-60.245333L810.666667 789.333333v-189.098666a42.666667 42.666667 0 0 1 85.205333-3.2l0.128 3.2V789.333333a149.333333 149.333333 0 0 1-144.213333 149.248L746.666667 938.666667h-512a149.333333 149.333333 0 0 1-149.248-144.213334L85.333333 789.333333v-512a149.333333 149.333333 0 0 1 144.213334-149.248L234.666667 128h189.098666z m324.949334-53.248a42.666667 42.666667 0 0 1 60.330666 0l150.869334 150.869333a42.666667 42.666667 0 0 1 0 60.330667l-329.386667 329.386667a42.666667 42.666667 0 0 1-29.44 12.458666l-153.386667 2.517334a42.666667 42.666667 0 0 1-43.349333-43.349334l2.56-153.386666a42.666667 42.666667 0 0 1 12.458667-29.44z m30.165333 90.496L491.946667 452.266667l-1.493334 91.989333 92.032-1.493333 286.976-286.976-90.538666-90.538667z"  ></path></symbol><symbol id="icon-rising" viewBox="0 0 1024 1024"><path d="M553.173333 803.84h-64l0.021334-474.581333-224.021334 224-45.269333-45.226667L521.6 206.293333l301.717333 301.696-45.269333 45.269334-224.853333-224.896v475.477333z"  ></path></symbol><symbol id="icon-falling" viewBox="0 0 1024 1024"><path d="M553.173333 238.314667h-64l0.021334 474.602666-224.021334-224-45.269333 45.226667L521.6 835.861333l301.717333-301.717333-45.269333-45.226667-224.853333 224.853334V238.336z"  ></path></symbol><symbol id="icon-shanchu2" viewBox="0 0 1024 1024"><path d="M516.60601807 107.93026734c-82.64382935 0-149.71865844 65.51751709-152.5729065 147.77160644H171.37136841c-21.40603638 0-38.92044068 17.38504028-38.92044068 38.92126465 0 21.40686036 17.38504028 38.92208862 38.92126466 38.92208862h42.94308471v435.40136719c0 81.73498536 55.39828492 148.55026245 123.90106201 148.55026245h348.99444581c68.37341309 0 123.90106201-66.42553711 123.901062-148.55026245V333.80477906h38.92126465c21.40686036 0 38.92126464-17.38586426 38.92126465-38.92208863 0-21.40686036-17.38504028-38.92126464-38.92126465-38.92126465H668.91854859C666.45321656 173.44860839 599.24902344 107.93109131 516.60601807 107.93109131z m-79.65939331 147.77160644c2.85424805-42.16442872 37.2354126-74.85809326 79.78875732-74.85809326s76.93450927 32.82302857 79.39984131 74.85809326H436.94662476z m-98.86047364 589.01165771c-24.2611084 0-50.98754883-31.13717651-50.98754883-75.76693725V333.80477906h450.97036744V769.33551026c0 44.50039673-26.72644043 75.76776123-50.98754884 75.76776122H338.08615112v-0.38973999z m0 0"  ></path><path d="M390.37063599 751.17263794c17.77313232 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.77478027 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.27124023 40.08883667 32.43493653 40.08883667z m117.41308594 0c17.7739563 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.7739563 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.66098023 40.08883667 32.43493653 40.08883667z m123.51049804 0c17.7739563 0 32.43493653-17.7739563 32.43493652-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43493652-40.08966065-17.7739563 0-32.43411255 17.77478027-32.43411255 40.08966065v228.72875976c0 22.18469239 14.14105224 40.08883667 32.43411255 40.08883667z m0 0"  ></path></symbol><symbol id="icon-zijiedian" viewBox="0 0 1024 1024"><path d="M312.208 472c19.568-157.856 153.432-280 315.656-280 175.68 0 318.112 143.272 318.112 320S803.552 832 627.864 832c-162.224 0-296.08-122.144-315.656-280H120a40 40 0 0 1 0-80h192.208zM632 752c132.552 0 240-107.448 240-240 0-132.552-107.448-240-240-240-132.552 0-240 107.448-240 240 0 132.552 107.448 240 240 240z m-40-280v-80a40 40 0 0 1 80 0v80h80a40 40 0 0 1 0 80h-80v80a40 40 0 0 1-80 0v-80h-80a40 40 0 0 1 0-80h80z"  ></path></symbol><symbol id="icon-tongjijiedian-" viewBox="0 0 1024 1024"><path d="M803.84 131.626667H410.24A59.733333 59.733333 0 0 0 350.506667 192v45.226667H199.68a51.626667 51.626667 0 0 0-51.626667 51.626666v465.92a51.626667 51.626667 0 0 0 51.626667 51.626667h187.52v-55.466667h-162.133333a21.333333 21.333333 0 0 1-21.333334-21.333333V313.386667a21.333333 21.333333 0 0 1 21.333334-21.333334h125.653333v64a59.733333 59.733333 0 0 0 59.733333 59.733334h393.386667a59.733333 59.733333 0 0 0 59.733333-59.733334V192a59.733333 59.733333 0 0 0-59.733333-60.373333z m4.266667 224.64a4.266667 4.266667 0 0 1-4.266667 4.266666H410.24a4.266667 4.266667 0 0 1-4.266667-4.266666V192a4.266667 4.266667 0 0 1 4.266667-4.266667h393.6a4.266667 4.266667 0 0 1 4.266667 4.266667zM716.16 749.44h-81.28v-81.493333a27.733333 27.733333 0 0 0-55.466667 0v81.28h-81.493333a27.733333 27.733333 0 1 0 0 55.466666h81.28v81.28a27.733333 27.733333 0 1 0 55.466667 0v-81.066666h81.28a27.733333 27.733333 0 0 0 0-55.466667z"  ></path></symbol><symbol id="icon-close" viewBox="0 0 1024 1024"><path d="M557.312 513.248l265.28-263.904c12.544-12.48 12.608-32.704 0.128-45.248-12.512-12.576-32.704-12.608-45.248-0.128L512.128 467.904l-263.04-263.84c-12.448-12.48-32.704-12.544-45.248-0.064-12.512 12.48-12.544 32.736-0.064 45.28l262.976 263.776L201.6 776.8c-12.544 12.48-12.608 32.704-0.128 45.248a31.937 31.937 0 0 0 22.688 9.44c8.16 0 16.32-3.104 22.56-9.312l265.216-263.808 265.44 266.24c6.24 6.272 14.432 9.408 22.656 9.408a31.94 31.94 0 0 0 22.592-9.344c12.512-12.48 12.544-32.704 0.064-45.248L557.312 513.248z" fill="" ></path></symbol><symbol id="icon-menu" viewBox="0 0 1024 1024"><path d="M109.714 292.571h804.572c21.943 0 36.571-21.942 36.571-43.885 0-14.629-14.628-29.257-36.571-29.257H109.714c-21.943 0-36.571 14.628-36.571 36.571 0 14.629 14.628 36.571 36.571 36.571zM914.286 512H109.714c-21.943 0-36.571 14.629-36.571 36.571 0 14.629 14.628 36.572 36.571 36.572h804.572c21.943 0 36.571-21.943 36.571-43.886 0-14.628-14.628-29.257-36.571-29.257z m0 292.571H109.714c-21.943 0-36.571 14.629-36.571 36.572s14.628 36.571 36.571 36.571h804.572c21.943 0 36.571-21.943 36.571-36.571 0-21.943-14.628-36.572-36.571-36.572z"  ></path></symbol><symbol id="icon-right" viewBox="0 0 1024 1024"><path d="M385 560.69999999L385 738.9c0 36.90000001 26.4 68.5 61.3 68.5l150.2 0c1.5 0 3-0.1 4.5-0.3 10.2 38.7 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-42 0-77.3 28.6-87.5 67.39999999-1.4-0.3-2.9-0.4-4.5-0.39999999L446.3 760.4c-6.8 0-14.3-8.9-14.3-21.49999999l0-427.00000001c0-12.7 7.40000001-21.5 14.30000001-21.5l150.19999999 0c1.5 0 3-0.2 4.5-0.4 10.2 38.8 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.4 0-49.9-40.5-90.6-90.5-90.59999999-42 0-77.3 28.6-87.5 67.39999999-1.4-0.2-2.9-0.4-4.49999999-0.4L446.3 243.3c-34.80000001 0-61.3 31.6-61.3 68.50000001L385 513.7l-79.1 0c-10.4-38.5-45.49999999-67-87.4-67-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c41.79999999 0 77.00000001-28.4 87.4-67L385 560.69999999z" fill="" ></path></symbol><symbol id="icon-left" viewBox="0 0 1024 1024"><path d="M639 463.30000001L639 285.1c0-36.90000001-26.4-68.5-61.3-68.5l-150.2 0c-1.5 0-3 0.1-4.5 0.3-10.2-38.7-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c42 0 77.3-28.6 87.5-67.39999999 1.4 0.3 2.9 0.4 4.5 0.39999999L577.7 263.6c6.8 0 14.3 8.9 14.3 21.49999999l0 427.00000001c0 12.7-7.40000001 21.5-14.30000001 21.5l-150.19999999 0c-1.5 0-3 0.2-4.5 0.4-10.2-38.8-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.4 0 49.9 40.5 90.6 90.5 90.59999999 42 0 77.3-28.6 87.5-67.39999999 1.4 0.2 2.9 0.4 4.49999999 0.4L577.7 780.7c34.80000001 0 61.3-31.6 61.3-68.50000001L639 510.3l79.1 0c10.4 38.5 45.49999999 67 87.4 67 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-41.79999999 0-77.00000001 28.4-87.4 67L639 463.30000001z" fill="" ></path></symbol><symbol id="icon-side" viewBox="0 0 1024 1024"><path d="M851.91168 328.45312c-59.97056 0-108.6208 48.47104-108.91264 108.36992l-137.92768 38.4a109.14304 109.14304 0 0 0-63.46752-46.58688l1.39264-137.11872c47.29344-11.86816 82.31936-54.66624 82.31936-105.64096 0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.76288-108.91776 108.91776c0 49.18784 32.60928 90.75712 77.38368 104.27392l-1.41312 138.87488a109.19936 109.19936 0 0 0-63.50336 48.55808l-138.93632-39.48544 0.01024-0.72704c0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.75776-108.91776 108.91776c0 60.15488 48.76288 108.91264 108.91776 108.91264 39.3984 0 73.91232-20.92032 93.03552-52.2496l139.19232 39.552-0.00512 0.2304c0 25.8304 9.00096 49.5616 24.02816 68.23424l-90.14272 132.63872a108.7488 108.7488 0 0 0-34.2528-5.504c-60.15488 0-108.91776 48.768-108.91776 108.91776 0 60.16 48.76288 108.91776 108.91776 108.91776 60.16 0 108.92288-48.75776 108.92288-108.91776 0-27.14624-9.9328-51.968-26.36288-71.04l89.04704-131.03104a108.544 108.544 0 0 0 37.6832 6.70208 108.672 108.672 0 0 0 36.48512-6.272l93.13792 132.57216a108.48256 108.48256 0 0 0-24.69888 69.0688c0 60.16 48.768 108.92288 108.91776 108.92288 60.16 0 108.91776-48.76288 108.91776-108.92288 0-60.14976-48.75776-108.91776-108.91776-108.91776a108.80512 108.80512 0 0 0-36.69504 6.3488l-93.07136-132.48a108.48768 108.48768 0 0 0 24.79616-72.22784l136.09984-37.888c18.99008 31.93856 53.84192 53.3504 93.69088 53.3504 60.16 0 108.92288-48.75776 108.92288-108.91264-0.00512-60.15488-48.77312-108.92288-108.92288-108.92288z"  ></path></symbol><symbol id="icon-B" viewBox="0 0 1024 1024"><path d="M98.067692 65.457231H481.28c75.854769 0 132.411077 3.150769 169.668923 9.452307 37.336615 6.301538 70.656 19.534769 100.036923 39.620924 29.459692 20.007385 53.956923 46.710154 73.570462 80.029538 19.692308 33.398154 29.459692 70.734769 29.459692 112.167385 0 44.898462-12.130462 86.094769-36.233846 123.588923a224.886154 224.886154 0 0 1-98.461539 84.283077c58.368 17.092923 103.266462 46.08 134.695385 87.04 31.350154 40.96 47.025231 89.088 47.025231 144.462769 0 43.638154-10.082462 86.016-30.404923 127.212308-20.243692 41.196308-47.891692 74.043077-83.02277 98.697846-35.052308 24.654769-78.296615 39.778462-129.732923 45.449846-32.295385 3.465846-110.119385 5.671385-233.472 6.537846H98.067692V65.457231z m193.536 159.507692V446.621538h126.818462c75.460923 0 122.328615-1.024 140.603077-3.229538 33.083077-3.938462 59.155692-15.36 78.139077-34.343385 18.904615-18.904615 28.435692-43.874462 28.435692-74.830769 0-29.696-8.192-53.720615-24.497231-72.310154-16.384-18.510769-40.644923-29.696-72.940307-33.634461-19.140923-2.205538-74.279385-3.308308-165.415385-3.308308h-111.064615z m0 381.243077v256.315077h179.2c69.710769 0 113.979077-1.969231 132.726154-5.907692 28.750769-5.198769 52.145231-17.959385 70.262154-38.281847 18.116923-20.243692 27.096615-47.340308 27.096615-81.368615 0-28.750769-6.931692-53.169231-20.873846-73.255385a118.232615 118.232615 0 0 0-60.494769-43.795692c-26.387692-9.137231-83.574154-13.705846-171.638154-13.705846H291.603692z"  ></path></symbol><symbol id="icon-a" viewBox="0 0 1024 1024"><path d="M757.76 665.6q0 20.48 1.536 34.304t7.68 22.016 18.944 12.288 34.304 4.096q-3.072 25.6-15.36 44.032-11.264 16.384-33.28 29.696t-62.976 13.312q-11.264 0-20.48-0.512t-17.408-2.56l-6.144-2.048-1.024 0q-4.096-1.024-10.24-4.096-2.048-2.048-4.096-2.048-1.024-1.024-2.048-1.024-14.336-8.192-23.552-17.408t-14.336-17.408q-6.144-10.24-9.216-20.48-63.488 75.776-178.176 75.776-48.128 0-88.064-15.36t-69.12-44.032-45.056-68.096-15.872-88.576 16.896-89.088 47.616-67.584 74.24-42.496 96.768-14.848q48.128 0 88.576 17.408t66.048 49.152q0-8.192 0.512-16.384t0.512-15.36q0-71.68-39.936-104.448t-128-32.768q-43.008 0-84.992 6.656t-84.992 17.92q14.336-28.672 25.088-47.616t24.064-29.184q30.72-24.576 158.72-24.576 79.872 0 135.168 13.824t90.624 43.52 51.2 75.264 15.872 108.032l0 200.704zM487.424 743.424q50.176 0 79.872-33.28t29.696-95.744q0-61.44-28.672-93.696t-76.8-32.256q-52.224 0-82.944 33.28t-30.72 94.72q0 58.368 31.744 92.672t77.824 34.304z"  ></path></symbol><symbol id="icon-full" viewBox="0 0 1024 1024"><path d="M639.328 416c8.032 0 16.096-3.008 22.304-9.056l202.624-197.184-0.8 143.808c-0.096 17.696 14.144 32.096 31.808 32.192 0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808l1.248-222.208c0-0.672-0.352-1.248-0.384-1.92 0.032-0.512 0.288-0.896 0.288-1.408 0.032-17.664-14.272-32-31.968-32.032L671.552 96l-0.032 0c-17.664 0-31.968 14.304-32 31.968C639.488 145.632 653.824 160 671.488 160l151.872 0.224-206.368 200.8c-12.672 12.32-12.928 32.608-0.64 45.248C622.656 412.736 630.976 416 639.328 416z"  ></path><path d="M896.032 639.552 896.032 639.552c-17.696 0-32 14.304-32.032 31.968l-0.224 151.872-200.832-206.4c-12.32-12.64-32.576-12.96-45.248-0.64-12.672 12.352-12.928 32.608-0.64 45.248l197.184 202.624-143.808-0.8c-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808-0.096 17.696 14.144 32.096 31.808 32.192l222.24 1.248c0.064 0 0.128 0 0.192 0 0.64 0 1.12-0.32 1.76-0.352 0.512 0.032 0.896 0.288 1.408 0.288l0.032 0c17.664 0 31.968-14.304 32-31.968L928 671.584C928.032 653.952 913.728 639.584 896.032 639.552z"  ></path><path d="M209.76 159.744l143.808 0.8c0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808 0.096-17.696-14.144-32.096-31.808-32.192L131.68 95.328c-0.064 0-0.128 0-0.192 0-0.672 0-1.248 0.352-1.888 0.384-0.448 0-0.8-0.256-1.248-0.256 0 0-0.032 0-0.032 0-17.664 0-31.968 14.304-32 31.968L96 352.448c-0.032 17.664 14.272 32 31.968 32.032 0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968l0.224-151.936 200.832 206.4c6.272 6.464 14.624 9.696 22.944 9.696 8.032 0 16.096-3.008 22.304-9.056 12.672-12.32 12.96-32.608 0.64-45.248L209.76 159.744z"  ></path><path d="M362.368 617.056l-202.624 197.184 0.8-143.808c0.096-17.696-14.144-32.096-31.808-32.192-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808l-1.248 222.24c0 0.704 0.352 1.312 0.384 2.016 0 0.448-0.256 0.832-0.256 1.312-0.032 17.664 14.272 32 31.968 32.032L352.448 928c0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968s-14.272-32-31.968-32.032l-151.936-0.224 206.4-200.832c12.672-12.352 12.96-32.608 0.64-45.248S375.008 604.704 362.368 617.056z"  ></path></symbol><symbol id="icon-add" viewBox="0 0 1024 1024"><path d="M863.328 482.56l-317.344-1.12L545.984 162.816c0-17.664-14.336-32-32-32s-32 14.336-32 32l0 318.4L159.616 480.064c-0.032 0-0.064 0-0.096 0-17.632 0-31.936 14.24-32 31.904C127.424 529.632 141.728 544 159.392 544.064l322.592 1.152 0 319.168c0 17.696 14.336 32 32 32s32-14.304 32-32l0-318.944 317.088 1.12c0.064 0 0.096 0 0.128 0 17.632 0 31.936-14.24 32-31.904C895.264 496.992 880.96 482.624 863.328 482.56z"  ></path></symbol><symbol id="icon-move" viewBox="0 0 1024 1024"><path d="M863.744 544 163.424 544c-17.664 0-32-14.336-32-32s14.336-32 32-32l700.32 0c17.696 0 32 14.336 32 32S881.44 544 863.744 544z"  ></path></symbol><symbol id="icon-living" viewBox="0 0 1024 1024"><path d="M514.133333 488.533333m-106.666666 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z" fill="" ></path><path d="M512 64C264.533333 64 64 264.533333 64 512c0 236.8 183.466667 428.8 416 445.866667v-134.4c-53.333333-59.733333-200.533333-230.4-200.533333-334.933334 0-130.133333 104.533333-234.666667 234.666666-234.666666s234.666667 104.533333 234.666667 234.666666c0 61.866667-49.066667 153.6-145.066667 270.933334l-59.733333 68.266666V960C776.533333 942.933333 960 748.8 960 512c0-247.466667-200.533333-448-448-448z" fill="" ></path></symbol></svg>',l=(l=document.getElementsByTagName("script"))[l.length-1].getAttribute("data-injectcss");if(l&&!n.__iconfont__svg__cssinject__){n.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(c){console&&console.log(c)}}function h(){s||(s=!0,t())}i=function(){var c,u,p,f;(f=document.createElement("div")).innerHTML=o,o=null,(p=f.getElementsByTagName("svg")[0])&&(p.setAttribute("aria-hidden","true"),p.style.position="absolute",p.style.width=0,p.style.height=0,p.style.overflow="hidden",c=p,(u=document.body).firstChild?(f=c,(p=u.firstChild).parentNode.insertBefore(f,p)):u.appendChild(c))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(i,0):(e=function(){document.removeEventListener("DOMContentLoaded",e,!1),i()},document.addEventListener("DOMContentLoaded",e,!1)):document.attachEvent&&(t=i,r=n.document,s=!1,(a=function(){try{r.documentElement.doScroll("left")}catch{return void setTimeout(a,50)}h()})(),r.onreadystatechange=function(){r.readyState=="complete"&&(r.onreadystatechange=null,h())})})(window);const Li=0,Vs=1,nh=2,Yr=30,ny={name:"Latte",palette:["#dd7878","#ea76cb","#8839ef","#e64553","#fe640b","#df8e1d","#40a02b","#209fb5","#1e66f5","#7287fd"],cssVar:{"--main-color":"#444446","--main-bgcolor":"#ffffff","--color":"#777777","--bgcolor":"#f6f6f6","--panel-color":"#444446","--panel-bgcolor":"#ffffff","--panel-border-color":"#eaeaea"}},ay={name:"Dark",palette:["#848FA0","#748BE9","#D2F9FE","#4145A5","#789AFA","#706CF4","#EF987F","#775DD5","#FCEECF","#DA7FBC"],cssVar:{"--main-color":"#ffffff","--main-bgcolor":"#4c4f69","--color":"#cccccc","--bgcolor":"#252526","--panel-color":"#ffffff","--panel-bgcolor":"#2d3748","--panel-border-color":"#696969"}};function Tl(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}const hw=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Dl=function(n,i){if(i.id===n)return i;if(i.children&&i.children.length){for(let e=0;e<i.children.length;e++){const t=Dl(n,i.children[e]);if(t)return t}return null}else return null},os=(n,i)=>{if(n.parent=i,n.children)for(let e=0;e<n.children.length;e++)os(n.children[e],n)};function md(n){if(n.id=lo(),n.children)for(let i=0;i<n.children.length;i++)md(n.children[i])}const cw=(n,i)=>{let e=Date.now();return function(...t){Date.now()-e<i||(n(...t),e=Date.now())}};function oy(n,i,e,t){const r=t-i,s=n-e;let a=Math.atan(Math.abs(r)/Math.abs(s))/3.14*180;s<0&&r>0&&(a=180-a),s<0&&r<0&&(a=180+a),s>0&&r<0&&(a=360-a);const o=15,l=30,h=a+l,c=a-l;return{x1:e+Math.cos(Math.PI*h/180)*o,y1:t-Math.sin(Math.PI*h/180)*o,x2:e+Math.cos(Math.PI*c/180)*o,y2:t-Math.sin(Math.PI*c/180)*o}}function lo(){return(new Date().getTime().toString(16)+Math.random().toString(16).substr(2)).substr(2,16)}const uw=function(){const n=lo();return{topic:this.newTopicName,id:n}};function gd(n){return JSON.parse(JSON.stringify(n,(i,e)=>{if(i!=="parent")return e}))}const ls=(n,i)=>{let e=0,t=0;for(;i&&i!==n;)e+=i.offsetLeft,t+=i.offsetTop,i=i.offsetParent;return{offsetLeft:e,offsetTop:t}},et=(n,i)=>{for(const e in i)n.setAttribute(e,i[e])},du=n=>n?n.tagName==="ME-TPC":!1,ah=n=>n.filter(i=>{for(let e=0;e<n.length;e++)if(i!==n[e]&&n[e].parentElement.parentElement.contains(i))return!1;return!0}),Mi={moved:!1,mousedown:!1,onMove(n,i){if(this.mousedown){this.moved=!0;const e=n.movementX,t=n.movementY;i.scrollTo(i.scrollLeft-e,i.scrollTop-t)}},clear(){this.moved=!1,this.mousedown=!1}};function dw(n){n.map.addEventListener("click",i=>{var e,t;if(i.button!==0)return;if((e=n.helper1)!=null&&e.moved){n.helper1.clear();return}if((t=n.helper2)!=null&&t.moved){n.helper2.clear();return}if(Mi.moved){Mi.clear();return}n.clearSelection();const r=i.target;if(r.tagName==="ME-EPD")n.expandNode(r.previousSibling);else if(n.editable)du(r)?n.selectNode(r,!1,i):r.tagName==="text"?r.dataset.type==="custom-link"?n.selectArrow(r.parentElement):n.selectSummary(r.parentElement):r.className;else return}),n.map.addEventListener("dblclick",i=>{if(i.preventDefault(),!n.editable)return;const e=i.target;du(e)?n.beginEdit(e):e.tagName==="text"&&(e.dataset.type==="custom-link"?n.editArrowLabel(e.parentElement):n.editSummary(e.parentElement))}),n.map.addEventListener("mousemove",i=>{i.target.contentEditable!=="true"&&Mi.onMove(i,n.container)}),n.map.addEventListener("mousedown",i=>{const e=n.mouseSelectionButton===0?2:0;i.button===e&&i.target.contentEditable!=="true"&&(Mi.moved=!1,Mi.mousedown=!0)}),n.map.addEventListener("mouseleave",i=>{const e=n.mouseSelectionButton===0?2:0;i.button===e&&Mi.clear()}),n.map.addEventListener("mouseup",i=>{const e=n.mouseSelectionButton===0?2:0;i.button===e&&Mi.clear()}),n.map.addEventListener("contextmenu",i=>{i.preventDefault()})}const pw={create(){return{handlers:{},showHandler:function(){console.log(this.handlers)},addListener:function(n,i){this.handlers[n]===void 0&&(this.handlers[n]=[]),this.handlers[n].push(i)},fire:function(n,...i){if(this.handlers[n]instanceof Array){const e=this.handlers[n];for(let t=0;t<e.length;t++)e[t](...i)}},removeListener:function(n,i){if(!this.handlers[n])return;const e=this.handlers[n];if(!i)e.length=0;else if(e.length)for(let t=0;t<e.length;t++)e[t]===i&&this.handlers[n].splice(t,1)}}}},Al=document,fw=function(){console.time("layout"),this.nodes.innerHTML="";const n=this.createTopic(this.nodeData);yd(n,this.nodeData),n.draggable=!1;const i=Al.createElement("me-root");i.appendChild(n);const e=this.nodeData.children||[];if(this.direction===nh){let t=0,r=0;e.map(s=>{s.direction===Li?t+=1:s.direction===Vs?r+=1:t<=r?(s.direction=Li,t+=1):(s.direction=Vs,r+=1)})}vw(this,e,i),console.timeEnd("layout")},vw=function(n,i,e){const t=Al.createElement("me-main");t.className="lhs";const r=Al.createElement("me-main");r.className="rhs";for(let s=0;s<i.length;s++){const a=i[s],{grp:o}=n.createWrapper(a);n.direction===nh?a.direction===Li?t.appendChild(o):r.appendChild(o):n.direction===Li?t.appendChild(o):r.appendChild(o)}n.nodes.appendChild(t),n.nodes.appendChild(e),n.nodes.appendChild(r),n.nodes.appendChild(n.lines)},mw=function(n,i){const e=Al.createElement("me-children");for(let t=0;t<i.length;t++){const r=i[t],{grp:s}=n.createWrapper(r);e.appendChild(s)}return e},li=document,ot=(n,i)=>{const e=(i?i.mindElixirBox:li).querySelector(`[data-nodeid=me${n}]`);if(!e)throw new Error(`FindEle: Node ${n} not found, maybe it's collapsed.`);return e},yd=function(n,i){if(n.innerHTML="",i.style&&(n.style.color=i.style.color||"",n.style.background=i.style.background||"",n.style.fontSize=i.style.fontSize+"px",n.style.fontWeight=i.style.fontWeight||"normal"),i.dangerouslySetInnerHTML){n.innerHTML=i.dangerouslySetInnerHTML;return}if(i.image){const e=i.image;if(e.url&&e.width&&e.height){const t=li.createElement("img");t.src=e.url,t.style.width=e.width+"px",t.style.height=e.height+"px",n.appendChild(t),n.image=t}else console.warn("image url/width/height are required")}else n.image&&(n.image=void 0);{const e=li.createElement("span");e.className="text",e.textContent=i.topic,n.appendChild(e),n.text=e}if(i.hyperLink){const e=li.createElement("a");e.className="hyper-link",e.target="_blank",e.innerText="",e.href=i.hyperLink,n.appendChild(e),n.linkContainer=e}else n.linkContainer&&(n.linkContainer=void 0);if(i.icons&&i.icons.length){const e=li.createElement("span");e.className="icons",e.innerHTML=i.icons.map(t=>`<span>${Tl(t)}</span>`).join(""),n.appendChild(e),n.icons=e}else n.icons&&(n.icons=void 0);if(i.tags&&i.tags.length){const e=li.createElement("div");e.className="tags",e.innerHTML=i.tags.map(t=>`<span>${Tl(t)}</span>`).join(""),n.appendChild(e),n.tags=e}else n.tags&&(n.tags=void 0)},gw=function(n,i){const e=li.createElement("me-wrapper"),{p:t,tpc:r}=this.createParent(n);if(e.appendChild(t),!i&&n.children&&n.children.length>0){const s=bd(n.expanded);if(t.appendChild(s),n.expanded!==!1){const a=mw(this,n.children);e.appendChild(a)}}return{grp:e,top:t,tpc:r}},yw=function(n){const i=li.createElement("me-parent"),e=this.createTopic(n);return yd(e,n),i.appendChild(e),{p:i,tpc:e}},bw=function(n){const i=li.createElement("me-children");return i.append(...n),i},Sw=function(n){const i=li.createElement("me-tpc");return i.nodeObj=n,i.dataset.nodeid="me"+n.id,i.draggable=this.draggable,i};function ly(n){const i=li.createRange();i.selectNodeContents(n);const e=window.getSelection();e&&(e.removeAllRanges(),e.addRange(i))}const Ew=function(n){if(console.time("editTopic"),!n)return;const i=li.createElement("div"),e=n.text.textContent;n.appendChild(i),i.id="input-box",i.textContent=e,i.contentEditable="true",i.spellcheck=!1,i.style.cssText=`min-width:${n.offsetWidth-8}px;`,this.direction===Li&&(i.style.right="0"),i.focus(),ly(i),this.bus.fire("operation",{name:"beginEdit",obj:n.nodeObj}),i.addEventListener("keydown",t=>{t.stopPropagation();const r=t.key;if(r==="Enter"||r==="Tab"){if(t.shiftKey)return;t.preventDefault(),i==null||i.blur(),this.map.focus()}}),i.addEventListener("blur",()=>{var t;if(!i)return;const r=n.nodeObj,s=((t=i.textContent)==null?void 0:t.trim())||"";console.log(s),s===""?r.topic=e:r.topic=s,i.remove(),s!==e&&(n.text.textContent=r.topic,this.linkDiv(),this.bus.fire("operation",{name:"finishEdit",obj:r,origin:e}))}),console.timeEnd("editTopic")},bd=function(n){const i=li.createElement("me-epd");return i.expanded=n!==!1,i.className=n!==!1?"minus":"",i},An=document,xn="http://www.w3.org/2000/svg",hy=function(n,i,e){const t=An.createElementNS(xn,"path");return et(t,{d:n,stroke:i||"#666",fill:"none","stroke-width":e}),t},Ha=function(n){const i=An.createElementNS(xn,"svg");return i.setAttribute("class",n),i.setAttribute("overflow","visible"),i},Jf=function(){const n=An.createElementNS(xn,"line");return n.setAttribute("stroke","#bbb"),n.setAttribute("fill","none"),n.setAttribute("stroke-width","2"),n},Cw=function(n,i){const e={stroke:"rgb(235, 95, 82)",fill:"none","stroke-linecap":"cap","stroke-width":"2"},t=An.createElementNS(xn,"g"),r=An.createElementNS(xn,"path"),s=An.createElementNS(xn,"path");return et(s,{d:i,...e}),et(r,{d:n,...e,"stroke-dasharray":"8,2"}),t.appendChild(r),t.appendChild(s),t},cy=function(n,i,e){if(console.time("editSummary"),!i)return;const t=document.createElement("div");n.nodes.appendChild(t);const r=i.innerHTML;t.id="input-box",t.textContent=r,t.contentEditable="true",t.spellcheck=!1;const s=i.getAttribute("x"),a=i.getAttribute("y");t.style.cssText=`min-width:88px;position:absolute;left:${s}px;top:${a}px;`;const o=i.getAttribute("text-anchor");o==="end"?t.style.cssText+="transform: translate(-100%, -100%);":o==="middle"?t.style.cssText+="transform: translate(-50%, -100%);":t.style.cssText+="transform: translate(0, -100%);",t.focus(),ly(t),t.addEventListener("keydown",l=>{l.stopPropagation();const h=l.key;if(h==="Enter"||h==="Tab"){if(l.shiftKey)return;l.preventDefault(),t.blur(),n.map.focus()}}),t.addEventListener("blur",()=>{t&&e(t)}),console.timeEnd("editSummary")},ww=function(n){console.time("linkDiv"),this.nodes.style.top=`${1e4-this.nodes.offsetHeight/2}px`,this.nodes.style.left=`${1e4-this.nodes.offsetWidth/2}px`;const i=this.map.querySelectorAll("me-main > me-wrapper");this.lines.innerHTML="";const e=this.map.querySelector("me-root"),t=e.offsetTop,r=e.offsetLeft,s=e.offsetWidth,a=e.offsetHeight;for(let o=0;o<i.length;o++){const l=i[o],h=l.querySelector("me-tpc"),{offsetLeft:c,offsetTop:u}=ls(this.nodes,h),p=h.offsetWidth,f=h.offsetHeight,v=l.parentNode.className,m=this.generateMainBranch({pT:t,pL:r,pW:s,pH:a,cT:u,cL:c,cW:p,cH:f,direction:v,containerHeight:this.nodes.offsetHeight}),g=this.theme.palette,y=h.nodeObj.branchColor||g[o%g.length];h.style.borderColor=y,this.lines.appendChild(hy(m,y,"3"));const b=l.children[0].children[1];if(b&&(b.style.top=(b.parentNode.offsetHeight-b.offsetHeight)/2+"px",v==="lhs"?b.style.left="-10px":b.style.right="-10px"),!(n&&n!==l)&&l.childElementCount){const E=Ha("subLines"),w=l.lastChild;w.tagName==="svg"&&w.remove(),l.appendChild(E),uy(this,E,y,l,v,!0)}}this.renderArrow(),this.renderSummary(),console.timeEnd("linkDiv")},uy=function(n,i,e,t,r,s){const a=t.firstChild,o=t.children[1].children,l=a.offsetTop,h=a.offsetLeft,c=a.offsetWidth,u=a.offsetHeight;for(let p=0;p<o.length;p++){const f=o[p],v=f.firstChild,m=v.offsetTop,g=v.offsetLeft,y=v.offsetWidth,b=v.offsetHeight,E=v.firstChild.nodeObj.branchColor||e,w=n.generateSubBranch({pT:l,pL:h,pW:c,pH:u,cT:m,cL:g,cW:y,cH:b,direction:r,isFirst:s});i.appendChild(hy(w,E,"2"));const A=v.children[1];if(A){if(A.style.bottom=-(A.offsetHeight/2)+"px",r==="lhs"?A.style.left="10px":r==="rhs"&&(A.style.right="10px"),!A.expanded)continue}else continue;f.children[1].children.length>0&&uy(n,i,E,f,r)}},ev={addChild:"",addParent:"",addSibling:"",removeNode:"",focus:"",cancelFocus:"",moveUp:"",moveDown:"",link:"",clickTips:"",summary:""},tv={cn:ev,zh_CN:ev,zh_TW:{addChild:"",addParent:"",addSibling:"",removeNode:"",focus:"",cancelFocus:"",moveUp:"",moveDown:"",link:"",clickTips:"",summary:""},en:{addChild:"Add child",addParent:"Add parent",addSibling:"Add sibling",removeNode:"Remove node",focus:"Focus Mode",cancelFocus:"Cancel Focus Mode",moveUp:"Move up",moveDown:"Move down",link:"Link",clickTips:"Please click the target node",summary:"Summary"},ru:{addChild:"  ",addParent:"  ",addSibling:"   ",removeNode:" ",focus:" ",cancelFocus:"  ",moveUp:" ",moveDown:" ",link:"",clickTips:",    ",summary:""},ja:{addChild:"",addParent:"",addSibling:"",removeNode:"",focus:"",cancelFocus:"",moveUp:"",moveDown:"",link:"",clickTips:"",summary:""},pt:{addChild:"Adicionar item filho",addParent:"Adicionar item pai",addSibling:"Adicionar item irmao",removeNode:"Remover item",focus:"Modo Foco",cancelFocus:"Cancelar Modo Foco",moveUp:"Mover para cima",moveDown:"Mover para baixo",link:"Link",clickTips:"Favor clicar no item alvo",summary:"Resumo"}};function Tw(n,i){const e=E=>{const w=document.createElement("div");return w.innerText=E,w.className="tips",w},t=(E,w,A)=>{const D=document.createElement("li");return D.id=E,D.innerHTML=`<span>${Tl(w)}</span><span>${Tl(A)}</span>`,D},r=tv[n.locale]?n.locale:"en",s=tv[r],a=t("cm-add_child",s.addChild,"tab"),o=t("cm-add_parent",s.addParent,""),l=t("cm-add_sibling",s.addSibling,"enter"),h=t("cm-remove_child",s.removeNode,"delete"),c=t("cm-fucus",s.focus,""),u=t("cm-unfucus",s.cancelFocus,""),p=t("cm-up",s.moveUp,"PgUp"),f=t("cm-down",s.moveDown,"Pgdn"),v=t("cm-down",s.link,""),m=t("cm-down",s.summary,""),g=document.createElement("ul");if(g.className="menu-list",g.appendChild(a),g.appendChild(o),g.appendChild(l),g.appendChild(h),(!i||i.focus)&&(g.appendChild(c),g.appendChild(u)),g.appendChild(p),g.appendChild(f),g.appendChild(m),(!i||i.link)&&g.appendChild(v),i&&i.extend)for(let E=0;E<i.extend.length;E++){const w=i.extend[E],A=t(w.name,w.name,w.key||"");g.appendChild(A),A.onclick=D=>{w.onclick(D)}}const y=document.createElement("div");y.className="context-menu",y.appendChild(g),y.hidden=!0,n.container.append(y);let b=!0;n.container.oncontextmenu=function(E){if(E.preventDefault(),!n.editable)return;const w=E.target;if(du(w)){w.parentElement.tagName==="ME-ROOT"?b=!0:b=!1,b?(c.className="disabled",p.className="disabled",f.className="disabled",o.className="disabled",l.className="disabled",h.className="disabled"):(c.className="",p.className="",f.className="",o.className="",l.className="",h.className=""),n.currentNodes||n.selectNode(w),y.hidden=!1,Mi.mousedown&&(Mi.mousedown=!1),g.style.top="",g.style.bottom="",g.style.left="",g.style.right="";const A=g.getBoundingClientRect(),D=g.offsetHeight,N=g.offsetWidth,x=E.clientY-A.top,j=E.clientX-A.left;D+x>window.innerHeight?(g.style.top="",g.style.bottom="0px"):(g.style.bottom="",g.style.top=x+15+"px"),N+j>window.innerWidth?(g.style.left="",g.style.right="0px"):(g.style.right="",g.style.left=j+10+"px")}},y.onclick=E=>{E.target===y&&(y.hidden=!0)},a.onclick=()=>{n.addChild(),y.hidden=!0},o.onclick=()=>{n.insertParent(),y.hidden=!0},l.onclick=()=>{b||(n.insertSibling("after"),y.hidden=!0)},h.onclick=()=>{b||(n.removeNode(),y.hidden=!0)},c.onclick=()=>{b||(n.focusNode(n.currentNode),y.hidden=!0)},u.onclick=()=>{n.cancelFocus(),y.hidden=!0},p.onclick=()=>{b||(n.moveUpNode(),y.hidden=!0)},f.onclick=()=>{b||(n.moveDownNode(),y.hidden=!0)},v.onclick=()=>{y.hidden=!0;const E=n.currentNode,w=e(s.clickTips);n.container.appendChild(w),n.map.addEventListener("click",A=>{A.preventDefault(),w.remove();const D=A.target;D.parentElement.tagName==="ME-PARENT"||D.parentElement.tagName==="ME-ROOT"?n.createArrow(E,D):console.log("link cancel")},{once:!0})},m.onclick=()=>{y.hidden=!0,n.createSummary(),n.unselectNodes()}}const Dw=n=>{const i=n.map.querySelectorAll(".lhs>me-wrapper>me-parent>me-tpc");n.selectNode(i[Math.ceil(i.length/2)-1])},Aw=n=>{const i=n.map.querySelectorAll(".rhs>me-wrapper>me-parent>me-tpc");n.selectNode(i[Math.ceil(i.length/2)-1])},xw=n=>{n.selectNode(n.map.querySelector("me-root>me-tpc"))},kw=function(n,i){const e=i.parentElement.parentElement.parentElement.previousSibling;if(e){const t=e.firstChild;n.selectNode(t)}},Iw=function(n,i){const e=i.parentElement.nextSibling;if(e&&e.firstChild){const t=e.firstChild.firstChild.firstChild;n.selectNode(t)}},iv=function(n,i){var e,t;const r=n.currentNode||((e=n.currentNodes)==null?void 0:e[0]);if(!r)return;const s=r.nodeObj,a=r.offsetParent.offsetParent.parentElement;s.root?i==="lhs"?Dw(n):Aw(n):a.className===i?Iw(n,r):(t=s.parent)!=null&&t.root?xw(n):kw(n,r)},rv=function(n,i){var e;const t=n.currentNode||((e=n.currentNodes)==null?void 0:e[0]);if(!t||t.nodeObj.root)return;const r=i+"Sibling",s=t.parentElement.parentElement[r];s&&n.selectNode(s.firstChild.firstChild)};function Mw(n){const i=()=>{n.currentArrow?n.removeArrow():n.currentSummary?n.removeSummary(n.currentSummary.summaryObj.id):n.currentNode?n.removeNode():n.currentNodes&&n.removeNodes(n.currentNodes)},e={13:t=>{t.shiftKey?n.insertSibling("before"):t.ctrlKey?n.insertParent():n.insertSibling("after")},9:()=>{n.addChild()},112:()=>{n.toCenter()},113:()=>{n.beginEdit()},38:t=>{if(t.altKey)n.moveUpNode();else{if(t.metaKey||t.ctrlKey)return n.initSide();rv(n,"previous")}},40:t=>{t.altKey?n.moveDownNode():rv(n,"next")},37:t=>{if(t.metaKey||t.ctrlKey)return n.initLeft();iv(n,"lhs")},39:t=>{if(t.metaKey||t.ctrlKey)return n.initRight();iv(n,"rhs")},33(){n.moveUpNode()},34(){n.moveDownNode()},67:t=>{(t.metaKey||t.ctrlKey)&&(n.currentNode?n.waitCopy=[n.currentNode]:n.currentNodes&&(n.waitCopy=n.currentNodes))},86:t=>{!n.waitCopy||!n.currentNode||(t.metaKey||t.ctrlKey)&&(n.waitCopy.length===1?n.copyNode(n.waitCopy[0],n.currentNode):n.copyNodes(n.waitCopy,n.currentNode))},187:t=>{if(t.metaKey||t.ctrlKey){if(n.scaleVal>1.6)return;n.scale(n.scaleVal+=.2)}},189:t=>{if(t.metaKey||t.ctrlKey){if(n.scaleVal<.6)return;n.scale(n.scaleVal-=.2)}},48:t=>{(t.metaKey||t.ctrlKey)&&n.scale(1)},8:i,46:i};n.map.onkeydown=t=>{if(t.preventDefault(),!n.editable||t.target!==t.currentTarget)return;const r=e[t.keyCode];r&&r(t)}}function Ow(n,i){const e=(p,f)=>{const v=document.createElement("div");return v.id=p,v.innerHTML=`<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-${f}"></use>
  </svg>`,v},t=e("cm-add_child","zijiedian"),r=e("cm-add_sibling","tongjijiedian-"),s=e("cm-remove_child","shanchu2"),a=e("cm-up","rising"),o=e("cm-down","falling"),l=e("cm-edit","edit"),h=document.createElement("ul");h.className="menu-list";const c=document.createElement("mmenu");c.className="mobile-menu",c.appendChild(t),c.appendChild(r),c.appendChild(s),c.appendChild(a),c.appendChild(o),c.appendChild(l),c.hidden=!0,n.container.append(c);let u=!0;n.bus.addListener("unselectNode",function(){c.hidden=!0}),n.bus.addListener("selectNode",function(p){c.hidden=!1,p.root?u=!0:u=!1}),c.onclick=p=>{p.target===c&&(c.hidden=!0)},t.onclick=()=>{n.addChild()},r.onclick=()=>{u||n.insertSibling("after")},s.onclick=()=>{u||n.removeNode()},a.onclick=p=>{u||n.moveUpNode()},o.onclick=p=>{u||n.moveDownNode()},l.onclick=p=>{n.beginEdit()}}const pu=document,Rw=function(n,i){if(!i)return fu(n),n;let e=n.querySelector(".insert-preview");const t=`insert-preview ${i} show`;return e||(e=pu.createElement("div"),n.appendChild(e)),e.className=t,n},fu=function(n){if(!n)return;const i=n.querySelectorAll(".insert-preview");for(const e of i||[])e.remove()},sv=function(n,i){for(const e of i){const t=e.parentElement.parentElement.contains(n);if(!(n&&n.tagName==="ME-TPC"&&n!==e&&!t&&n.nodeObj.root!==!0))return!1}return!0},Nw=function(n){const i=document.createElement("div");return i.className="mind-elixir-ghost",n.map.appendChild(i),i};function Lw(n){let i=null,e=null,t=null;const r=Nw(n),s=12;n.map.addEventListener("dragstart",a=>{var o,l;const h=a.target;if((h==null?void 0:h.tagName)!=="ME-TPC"){a.preventDefault();return}(o=n.currentNodes)!=null&&o.includes(h)||(n.unselectNodes(),n.selectNode(h)),n.currentNodes?(i=n.currentNodes,r.innerHTML=n.currentNodes.length+" nodes"):(i=[h],r.innerHTML=h.innerHTML);for(const c of i)c.parentElement.parentElement.style.opacity="0.5";(l=a.dataTransfer)==null||l.setDragImage(r,0,0),Mi.clear()}),n.map.addEventListener("dragend",async a=>{if(!i)return;for(const l of i)l.parentElement.parentElement.style.opacity="1";const o=a.target;o.style.opacity="",t&&(fu(t),e==="before"?n.moveNodeBefore(i,t):e==="after"?n.moveNodeAfter(i,t):e==="in"&&n.moveNodeIn(i,t),i=null)}),n.map.addEventListener("dragover",cw(function(a){if(!i)return;fu(t);const o=pu.elementFromPoint(a.clientX,a.clientY-s);if(sv(o,i)){t=o;const l=o.getBoundingClientRect().y;a.clientY>l+o.clientHeight?e="after":e="in"}else{const l=pu.elementFromPoint(a.clientX,a.clientY+s);if(sv(l,i)){t=l;const h=l.getBoundingClientRect().y;a.clientY<h?e="before":e="in"}else e=t=null}t&&Rw(t,e)},100))}const Vw=function(n){return["createSummary","removeSummary","finishEditSummary"].includes(n.name)?{type:"summary",value:n.obj.id}:["createArrow","removeArrow","finishEditArrowLabel"].includes(n.name)?{type:"arrow",value:n.obj.id}:["removeNodes","copyNodes","moveNodeBefore","moveNodeAfter","moveNodeIn"].includes(n.name)?{type:"nodes",value:n.objs.map(i=>i.id)}:{type:"node",value:n.obj.id}};function Pw(n){let i=[],e=-1,t=n.getData();n.bus.addListener("operation",r=>{if(r.name==="beginEdit")return;i=i.slice(0,e+1);const s=n.getData();i.push({prev:t,currentObject:Vw(r),next:s}),t=s,e=i.length-1}),n.undo=function(){if(e>-1){const r=i[e];t=r.prev,n.refresh(r.prev),r.currentObject.type==="node"?n.selectNode(ot(r.currentObject.value)):r.currentObject.type==="nodes"&&n.selectNodes(r.currentObject.value.map(s=>ot(s))),e--,console.log("current",t)}},n.redo=function(){if(e<i.length-1){e++;const r=i[e];t=r.next,n.refresh(r.next),r.currentObject.type==="node"?n.selectNode(ot(r.currentObject.value)):r.currentObject.type==="nodes"&&n.selectNodes(r.currentObject.value.map(s=>ot(s)))}},n.map.addEventListener("keydown",r=>{(r.metaKey||r.ctrlKey)&&r.shiftKey&&r.key==="Z"?n.redo():(r.metaKey||r.ctrlKey)&&r.key==="z"&&n.undo()})}const Ps=(n,i)=>{const e=document.createElement("span");return e.id=n,e.innerHTML=`<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-${i}"></use>
  </svg>`,e};function Hw(n){const i=document.createElement("div"),e=Ps("fullscreen","full"),t=Ps("toCenter","living"),r=Ps("zoomout","move"),s=Ps("zoomin","add"),a=document.createElement("span");return a.innerText="100%",i.appendChild(e),i.appendChild(t),i.appendChild(r),i.appendChild(s),i.className="mind-elixir-toolbar rb",e.onclick=()=>{n.container.requestFullscreen()},t.onclick=()=>{n.toCenter()},r.onclick=()=>{n.scaleVal<.6||n.scale(n.scaleVal-=.2)},s.onclick=()=>{n.scaleVal>1.6||n.scale(n.scaleVal+=.2)},i}function Bw(n){const i=document.createElement("div"),e=Ps("tbltl","left"),t=Ps("tbltr","right"),r=Ps("tblts","side");return i.appendChild(e),i.appendChild(t),i.appendChild(r),i.className="mind-elixir-toolbar lt",e.onclick=()=>{n.initLeft()},t.onclick=()=>{n.initRight()},r.onclick=()=>{n.initSide()},i}function Fw(n){n.container.append(Hw(n)),n.container.append(Bw(n))}/*! @viselect/vanilla v3.3.1 MIT | https://github.com/Simonwep/selection/tree/master/packages/vanilla */var Ww=Object.defineProperty,_w=(n,i,e)=>i in n?Ww(n,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[i]=e,Ze=(n,i,e)=>(_w(n,typeof i!="symbol"?i+"":i,e),e);class qw{constructor(){Ze(this,"_listeners",new Map),Ze(this,"on",this.addEventListener),Ze(this,"off",this.removeEventListener),Ze(this,"emit",this.dispatchEvent)}addEventListener(i,e){const t=this._listeners.get(i)??new Set;return this._listeners.set(i,t),t.add(e),this}removeEventListener(i,e){var t;return(t=this._listeners.get(i))==null||t.delete(e),this}dispatchEvent(i,...e){let t=!0;for(const r of this._listeners.get(i)??[])t=r(...e)!==!1&&t;return t}unbindAllListeners(){this._listeners.clear()}}const nv=(n,i="px")=>typeof n=="number"?n+i:n;function qr({style:n},i,e){if(typeof i=="object")for(const[t,r]of Object.entries(i))r!==void 0&&(n[t]=nv(r));else e!==void 0&&(n[i]=nv(e))}function dy(n){return(i,e,t,r={})=>{i instanceof HTMLCollection||i instanceof NodeList?i=Array.from(i):Array.isArray(i)||(i=[i]),Array.isArray(e)||(e=[e]);for(const s of i)for(const a of e)s[n](a,t,{capture:!1,...r});return[i,e,t,r]}}const hn=dy("addEventListener"),zr=dy("removeEventListener"),qo=n=>{var i;const{clientX:e,clientY:t,target:r}=((i=n.touches)==null?void 0:i[0])??n;return{x:e,y:t,target:r}};function av(n,i,e="touch"){switch(e){case"center":{const t=i.left+i.width/2,r=i.top+i.height/2;return t>=n.left&&t<=n.right&&r>=n.top&&r<=n.bottom}case"cover":return i.left>=n.left&&i.top>=n.top&&i.right<=n.right&&i.bottom<=n.bottom;case"touch":return n.right>=i.left&&n.left<=i.right&&n.bottom>=i.top&&n.top<=i.bottom}}function cn(n,i=document){const e=Array.isArray(n)?n:[n];let t=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];typeof a=="string"?t=t.concat(Array.from(i.querySelectorAll(a))):a instanceof Element&&t.push(a)}return t}const zw=()=>matchMedia("(hover: none), (pointer: coarse)").matches,jw=()=>"safari"in window,Uw=n=>{let i,e=-1,t=!1;return{next(...r){i=r,t||(t=!0,e=requestAnimationFrame(()=>{n(...i),t=!1}))},cancel(){cancelAnimationFrame(e),t=!1}}},{abs:Ss,max:ov,min:lv,ceil:hv}=Math;class py extends qw{constructor(i){var e,t,r,s,a;super(),Ze(this,"_options"),Ze(this,"_selection",{stored:[],selected:[],touched:[],changed:{added:[],removed:[]}}),Ze(this,"_area"),Ze(this,"_clippingElement"),Ze(this,"_targetElement"),Ze(this,"_targetRect"),Ze(this,"_selectables",[]),Ze(this,"_latestElement"),Ze(this,"_areaRect",new DOMRect),Ze(this,"_areaLocation",{y1:0,x2:0,y2:0,x1:0}),Ze(this,"_singleClick",!0),Ze(this,"_frame"),Ze(this,"_scrollAvailable",!0),Ze(this,"_scrollingActive",!1),Ze(this,"_scrollSpeed",{x:0,y:0}),Ze(this,"_scrollDelta",{x:0,y:0}),Ze(this,"disable",this._bindStartEvents.bind(this,!1)),Ze(this,"enable",this._bindStartEvents),this._options={selectionAreaClass:"selection-area",selectionContainerClass:void 0,selectables:[],document:window.document,startAreas:["html"],boundaries:["html"],container:"body",...i,behaviour:{overlap:"invert",intersect:"touch",...i.behaviour,startThreshold:(e=i.behaviour)!=null&&e.startThreshold?typeof i.behaviour.startThreshold=="number"?i.behaviour.startThreshold:{x:10,y:10,...i.behaviour.startThreshold}:{x:10,y:10},scrolling:{speedDivider:10,manualSpeed:750,...(t=i.behaviour)==null?void 0:t.scrolling,startScrollMargins:{x:0,y:0,...(s=(r=i.behaviour)==null?void 0:r.scrolling)==null?void 0:s.startScrollMargins}}},features:{range:!0,touch:!0,...i.features,singleTap:{allow:!0,intersect:"native",...(a=i.features)==null?void 0:a.singleTap}}};for(const c of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))typeof this[c]=="function"&&(this[c]=this[c].bind(this));const{document:o,selectionAreaClass:l,selectionContainerClass:h}=this._options;this._area=o.createElement("div"),this._clippingElement=o.createElement("div"),this._clippingElement.appendChild(this._area),this._area.classList.add(l),h&&this._clippingElement.classList.add(h),qr(this._area,{willChange:"top, left, bottom, right, width, height",top:0,left:0,position:"fixed"}),qr(this._clippingElement,{overflow:"hidden",position:"fixed",transform:"translate3d(0, 0, 0)",pointerEvents:"none",zIndex:"1"}),this._frame=Uw(c=>{this._recalculateSelectionAreaRect(),this._updateElementSelection(),this._emitEvent("move",c),this._redrawSelectionArea()}),this.enable()}_bindStartEvents(i=!0){const{document:e,features:t}=this._options,r=i?hn:zr;r(e,"mousedown",this._onTapStart),t.touch&&r(e,"touchstart",this._onTapStart,{passive:!1})}_onTapStart(i,e=!1){const{x:t,y:r,target:s}=qo(i),{_options:a}=this,{document:o}=this._options,l=s.getBoundingClientRect(),h=cn(a.startAreas,a.document),c=cn(a.boundaries,a.document);this._targetElement=c.find(f=>av(f.getBoundingClientRect(),l));const u=i.composedPath();if(!this._targetElement||!h.find(f=>u.includes(f))||!c.find(f=>u.includes(f))||!e&&this._emitEvent("beforestart",i)===!1)return;this._areaLocation={x1:t,y1:r,x2:0,y2:0};const p=o.scrollingElement??o.body;this._scrollDelta={x:p.scrollLeft,y:p.scrollTop},this._singleClick=!0,this.clearSelection(!1,!0),hn(o,["touchmove","mousemove"],this._delayedTapMove,{passive:!1}),hn(o,["mouseup","touchcancel","touchend"],this._onTapStop),hn(o,"scroll",this._onScroll)}_onSingleTap(i){const{singleTap:{intersect:e},range:t}=this._options.features,r=qo(i);let s;if(e==="native")s=r.target;else if(e==="touch"){this.resolveSelectables();const{x:o,y:l}=r;s=this._selectables.find(h=>{const{right:c,left:u,top:p,bottom:f}=h.getBoundingClientRect();return o<c&&o>u&&l<f&&l>p})}if(!s)return;for(this.resolveSelectables();!this._selectables.includes(s);){if(!s.parentElement)return;s=s.parentElement}const{stored:a}=this._selection;if(this._emitEvent("start",i),i.shiftKey&&t&&this._latestElement){const o=this._latestElement,[l,h]=o.compareDocumentPosition(s)&4?[s,o]:[o,s],c=[...this._selectables.filter(u=>u.compareDocumentPosition(l)&4&&u.compareDocumentPosition(h)&2),l,h];this.select(c),this._latestElement=o}else a.includes(s)&&(a.length===1||i.ctrlKey||a.every(o=>this._selection.stored.includes(o)))?this.deselect(s):(this.select(s),this._latestElement=s);this._emitEvent("stop",i)}_delayedTapMove(i){const{container:e,document:t,behaviour:{startThreshold:r}}=this._options,{x1:s,y1:a}=this._areaLocation,{x:o,y:l}=qo(i);if(typeof r=="number"&&Ss(o+l-(s+a))>=r||typeof r=="object"&&Ss(o-s)>=r.x||Ss(l-a)>=r.y){if(zr(t,["mousemove","touchmove"],this._delayedTapMove,{passive:!1}),this._emitEvent("beforedrag",i)===!1){zr(t,["mouseup","touchcancel","touchend"],this._onTapStop);return}hn(t,["mousemove","touchmove"],this._onTapMove,{passive:!1}),qr(this._area,"display","block"),cn(e,t)[0].appendChild(this._clippingElement),this.resolveSelectables(),this._singleClick=!1,this._targetRect=this._targetElement.getBoundingClientRect(),this._scrollAvailable=this._targetElement.scrollHeight!==this._targetElement.clientHeight||this._targetElement.scrollWidth!==this._targetElement.clientWidth,this._scrollAvailable&&(hn(t,"wheel",this._manualScroll,{passive:!1}),this._selectables=this._selectables.filter(h=>this._targetElement.contains(h))),this._setupSelectionArea(),this._emitEvent("start",i),this._onTapMove(i)}this._handleMoveEvent(i)}_setupSelectionArea(){const{_clippingElement:i,_targetElement:e,_area:t}=this,r=this._targetRect=e.getBoundingClientRect();this._scrollAvailable?(qr(i,{top:r.top,left:r.left,width:r.width,height:r.height}),qr(t,{marginTop:-r.top,marginLeft:-r.left})):(qr(i,{top:0,left:0,width:"100%",height:"100%"}),qr(t,{marginTop:0,marginLeft:0}))}_onTapMove(i){const{x:e,y:t}=qo(i),{_scrollSpeed:r,_areaLocation:s,_options:a,_frame:o}=this,{speedDivider:l}=a.behaviour.scrolling,h=this._targetElement;if(s.x2=e,s.y2=t,this._scrollAvailable&&!this._scrollingActive&&(r.y||r.x)){this._scrollingActive=!0;const c=()=>{if(!r.x&&!r.y){this._scrollingActive=!1;return}const{scrollTop:u,scrollLeft:p}=h;r.y&&(h.scrollTop+=hv(r.y/l),s.y1-=h.scrollTop-u),r.x&&(h.scrollLeft+=hv(r.x/l),s.x1-=h.scrollLeft-p),o.next(i),requestAnimationFrame(c)};requestAnimationFrame(c)}else o.next(i);this._handleMoveEvent(i)}_handleMoveEvent(i){const{features:e}=this._options;(e.touch&&zw()||this._scrollAvailable&&jw())&&i.preventDefault()}_onScroll(){const{_scrollDelta:i,_options:{document:e}}=this,{scrollTop:t,scrollLeft:r}=e.scrollingElement??e.body;this._areaLocation.x1+=i.x-r,this._areaLocation.y1+=i.y-t,i.x=r,i.y=t,this._setupSelectionArea(),this._frame.next(null)}_manualScroll(i){const{manualSpeed:e}=this._options.behaviour.scrolling,t=i.deltaY?i.deltaY>0?1:-1:0,r=i.deltaX?i.deltaX>0?1:-1:0;this._scrollSpeed.y+=t*e,this._scrollSpeed.x+=r*e,this._onTapMove(i),i.preventDefault()}_recalculateSelectionAreaRect(){const{_scrollSpeed:i,_areaLocation:e,_areaRect:t,_targetElement:r,_options:s}=this,{scrollTop:a,scrollHeight:o,clientHeight:l,scrollLeft:h,scrollWidth:c,clientWidth:u}=r,p=this._targetRect,{x1:f,y1:v}=e;let{x2:m,y2:g}=e;const{behaviour:{scrolling:{startScrollMargins:y}}}=s;m<p.left+y.x?(i.x=h?-Ss(p.left-m+y.x):0,m=m<p.left?p.left:m):m>p.right-y.x?(i.x=c-h-u?Ss(p.left+p.width-m-y.x):0,m=m>p.right?p.right:m):i.x=0,g<p.top+y.y?(i.y=a?-Ss(p.top-g+y.y):0,g=g<p.top?p.top:g):g>p.bottom-y.y?(i.y=o-a-l?Ss(p.top+p.height-g-y.y):0,g=g>p.bottom?p.bottom:g):i.y=0;const b=lv(f,m),E=lv(v,g),w=ov(f,m),A=ov(v,g);t.x=b,t.y=E,t.width=w-b,t.height=A-E}_redrawSelectionArea(){const{x:i,y:e,width:t,height:r}=this._areaRect,{style:s}=this._area;s.left=`${i}px`,s.top=`${e}px`,s.width=`${t}px`,s.height=`${r}px`}_onTapStop(i,e){var t;const{document:r,features:s}=this._options,{_singleClick:a}=this;zr(r,["mousemove","touchmove"],this._delayedTapMove),zr(r,["touchmove","mousemove"],this._onTapMove),zr(r,["mouseup","touchcancel","touchend"],this._onTapStop),zr(r,"scroll",this._onScroll),this._keepSelection(),i&&a&&s.singleTap.allow?this._onSingleTap(i):!a&&!e&&(this._updateElementSelection(),this._emitEvent("stop",i)),this._scrollSpeed.x=0,this._scrollSpeed.y=0,this._scrollAvailable&&zr(r,"wheel",this._manualScroll,{passive:!0}),this._clippingElement.remove(),(t=this._frame)==null||t.cancel(),qr(this._area,"display","none")}_updateElementSelection(){const{_selectables:i,_options:e,_selection:t,_areaRect:r}=this,{stored:s,selected:a,touched:o}=t,{intersect:l,overlap:h}=e.behaviour,c=h==="invert",u=[],p=[],f=[];for(let m=0;m<i.length;m++){const g=i[m];if(av(r,g.getBoundingClientRect(),l)){if(a.includes(g))s.includes(g)&&!o.includes(g)&&o.push(g);else if(c&&s.includes(g)){f.push(g);continue}else p.push(g);u.push(g)}}c&&p.push(...s.filter(m=>!a.includes(m)));const v=h==="keep";for(let m=0;m<a.length;m++){const g=a[m];!u.includes(g)&&!(v&&s.includes(g))&&f.push(g)}t.selected=u,t.changed={added:p,removed:f},this._latestElement=void 0}_emitEvent(i,e){return this.emit(i,{event:e,store:this._selection,selection:this})}_keepSelection(){const{_options:i,_selection:e}=this,{selected:t,changed:r,touched:s,stored:a}=e,o=t.filter(l=>!a.includes(l));switch(i.behaviour.overlap){case"drop":{e.stored=[...o,...a.filter(l=>!s.includes(l))];break}case"invert":{e.stored=[...o,...a.filter(l=>!r.removed.includes(l))];break}case"keep":{e.stored=[...a,...t.filter(l=>!a.includes(l))];break}}}trigger(i,e=!0){this._onTapStart(i,e)}resolveSelectables(){this._selectables=cn(this._options.selectables,this._options.document)}clearSelection(i=!0,e=!1){const{selected:t,stored:r,changed:s}=this._selection;s.added=[],s.removed.push(...t,...i?r:[]),e||(this._emitEvent("move",null),this._emitEvent("stop",null)),this._selection={stored:i?[]:r,selected:[],touched:[],changed:{added:[],removed:[]}}}getSelection(){return this._selection.stored}getSelectionArea(){return this._area}cancel(i=!1){this._onTapStop(null,!i)}destroy(){this.cancel(),this.disable(),this._clippingElement.remove(),super.unbindAllListeners()}select(i,e=!1){const{changed:t,selected:r,stored:s}=this._selection,a=cn(i,this._options.document).filter(o=>!r.includes(o)&&!s.includes(o));return s.push(...a),r.push(...a),t.added.push(...a),t.removed=[],this._latestElement=void 0,e||(this._emitEvent("move",null),this._emitEvent("stop",null)),a}deselect(i,e=!1){const{selected:t,stored:r,changed:s}=this._selection,a=cn(i,this._options.document).filter(o=>t.includes(o)||r.includes(o));a.length&&(this._selection.stored=r.filter(o=>!a.includes(o)),this._selection.selected=t.filter(o=>!a.includes(o)),this._selection.changed.added=[],this._selection.changed.removed.push(...a.filter(o=>!s.removed.includes(o))),this._latestElement=void 0,e||(this._emitEvent("move",null),this._emitEvent("stop",null)))}}Ze(py,"version","3.3.1");function Yw(n){const i=new py({selectables:[".map-container me-tpc"],boundaries:[n.container],container:"body",behaviour:{scrolling:{speedDivider:10,manualSpeed:750,startScrollMargins:{x:10,y:10}}}}).on("beforestart",({event:e})=>{if(e.button!==n.mouseSelectionButton||e.target.tagName==="ME-TPC"||e.target.id==="input-box"||e.target.className==="circle")return!1;const t=i.getSelectionArea();return t.style.background="#4f90f22d",t.style.border="1px solid #4f90f2",t.parentElement&&(t.parentElement.style.zIndex="9999"),!0}).on("start",({event:e})=>{!e.ctrlKey&&!e.metaKey&&(n.clearSelection(),i.clearSelection(!0,!0))}).on("move",({store:{changed:{added:e,removed:t}}})=>{Mi.moved=!0;for(const r of e)r.classList.add("selected");for(const r of t)r.classList.remove("selected")}).on("stop",({store:{stored:e}})=>{n.selectNodes(e)});n.selection=i}const Gw=function(n,i=!0){this.theme=n;const e=this.theme.cssVar,t=Object.keys(e);for(let r=0;r<t.length;r++){const s=t[r];this.mindElixirBox.style.setProperty(s,e[s])}i&&this.refresh()};function fy(n){return{nodeData:n.isFocusMode?n.nodeDataBackup:n.nodeData,arrows:n.arrows,summaries:n.summaries,direction:n.direction,theme:n.theme}}const $w=function(n,i,e){if(n){if(console.time("selectNode"),this.clearSelection(),typeof n=="string"){const t=ot(n);return t?this.selectNode(t):void 0}n.className="selected",n.scrollIntoView({block:"nearest",inline:"nearest"}),this.currentNode=n,i?this.bus.fire("selectNewNode",n.nodeObj):this.bus.fire("selectNode",n.nodeObj,e),console.timeEnd("selectNode")}},Kw=function(){this.currentNode&&(this.currentNode.className=""),this.currentNode=null,this.bus.fire("unselectNode")},Qw=function(n){console.time("selectNodes"),this.clearSelection();for(const i of n)i.className="selected";this.currentNodes=n,this.bus.fire("selectNodes",n.map(i=>i.nodeObj)),console.timeEnd("selectNodes")},Xw=function(){if(this.currentNodes)for(const n of this.currentNodes)n.classList.remove("selected");this.currentNodes=null,this.bus.fire("unselectNodes")},Zw=function(){this.unselectNode(),this.unselectNodes(),this.unselectSummary(),this.unselectArrow()},Jw=function(){const n=fy(this);return JSON.stringify(n,(i,e)=>{if(!(i==="parent"&&typeof e!="string"))return e})},eT=function(){return JSON.parse(this.getDataString())},tT=function(){const n=fy(this).nodeData;let i="# "+n.topic+`

`;function e(t,r){for(let s=0;s<t.length;s++)r<=6?i+="".padStart(r,"#")+" "+t[s].topic+`

`:i+="".padStart(r-7,"	")+"- "+t[s].topic+`
`,t[s].children&&e(t[s].children||[],r+1)}return e(n.children||[],2),i},iT=function(){this.editable=!0},rT=function(){this.editable=!1},sT=function(n){this.scaleVal=n,this.map.style.transform="scale("+n+")"},nT=function(){this.container.scrollTo(1e4-this.container.offsetWidth/2,1e4-this.container.offsetHeight/2)},aT=function(n){n(this)},oT=function(n){n.nodeObj.root||(this.tempDirection===null&&(this.tempDirection=this.direction),this.isFocusMode||(this.nodeDataBackup=this.nodeData,this.isFocusMode=!0),this.nodeData=n.nodeObj,this.nodeData.root=!0,this.initRight(),this.toCenter())},lT=function(){this.isFocusMode=!1,this.tempDirection!==null&&(delete this.nodeData.root,this.nodeData=this.nodeDataBackup,this.direction=this.tempDirection,this.tempDirection=null,this.refresh(),this.toCenter())},hT=function(){this.direction=0,this.refresh()},cT=function(){this.direction=1,this.refresh()},uT=function(){this.direction=2,this.refresh()},dT=function(n){this.locale=n,this.refresh()},pT=function(n,i){const e=n.nodeObj;typeof i=="boolean"?e.expanded=i:e.expanded!==!1?e.expanded=!1:e.expanded=!0,this.layout(),this.linkDiv(),this.bus.fire("expandNode",e)},fT=function(n){n&&(n=JSON.parse(JSON.stringify(n)),this.nodeData=n.nodeData,this.arrows=n.arrows||[],this.summaries=n.summaries||[]),os(this.nodeData),this.layout(),this.linkDiv()},vT=Object.freeze(Object.defineProperty({__proto__:null,cancelFocus:lT,clearSelection:Zw,disableEdit:rT,enableEdit:iT,expandNode:pT,focusNode:oT,getData:eT,getDataMd:tT,getDataString:Jw,initLeft:hT,initRight:cT,initSide:uT,install:aT,refresh:fT,scale:sT,selectNode:$w,selectNodes:Qw,setLocale:dT,toCenter:nT,unselectNode:Kw,unselectNodes:Xw},Symbol.toStringTag,{value:"Module"})),zn=n=>{var i;const e=(i=n.parent)==null?void 0:i.children,t=e.indexOf(n);return{siblings:e,index:t}};function mT(n){const{siblings:i,index:e}=zn(n),t=i[e];e===0?(i[e]=i[i.length-1],i[i.length-1]=t):(i[e]=i[e-1],i[e-1]=t)}function gT(n){const{siblings:i,index:e}=zn(n),t=i[e];e===i.length-1?(i[e]=i[0],i[0]=t):(i[e]=i[e+1],i[e+1]=t)}function Sd(n){const{siblings:i,index:e}=zn(n);return i.splice(e,1),i.length}function yT(n,i,e){const{siblings:t,index:r}=zn(e);i==="before"?t.splice(r,0,n):t.splice(r+1,0,n)}function bT(n,i){const{siblings:e,index:t}=zn(n);e[t]=i,i.children=[n]}function vy(n,i,e){if(Sd(i),n==="in")e.children?e.children.push(i):e.children=[i];else{i.direction!==void 0&&(i.direction=e.direction);const{siblings:t,index:r}=zn(e);n==="before"?t.splice(r,0,i):t.splice(r+1,0,i)}}const ST=function(n,i){var e,t;if(n===Li)return Li;if(n===Vs)return Vs;if(n===nh){const r=((e=document.querySelector(".lhs"))==null?void 0:e.childElementCount)||0,s=((t=document.querySelector(".rhs"))==null?void 0:t.childElementCount)||0;return r<=s?(i.direction=Li,Li):(i.direction=Vs,Vs)}},my=function(n,i,e){var t,r;const s=e.children[0].children[0],a=i.parentElement;if(a.tagName==="ME-PARENT"){if(oh(s),a.children[1])a.nextSibling.appendChild(e);else{const o=n.createChildren([e]);a.appendChild(bd(!0)),a.insertAdjacentElement("afterend",o)}n.linkDiv(e.offsetParent)}else a.tagName==="ME-ROOT"&&(ST(n.direction,s.nodeObj)===Li?(t=document.querySelector(".lhs"))==null||t.appendChild(e):(r=document.querySelector(".rhs"))==null||r.appendChild(e),n.linkDiv())},Ed=function(n,i,e){if(!i)return null;const t=i.nodeObj;t.expanded===!1&&(n.expandNode(i,!0),i=ot(t.id));const r=e||n.generateNewObj();t.children?t.children.push(r):t.children=[r],os(n.nodeData);const{grp:s,top:a}=n.createWrapper(r);return my(n,i,s),{newTop:a,newNodeObj:r}},gy=function(n,i){const e=n.parentNode;if(i===0){const t=e.parentNode.parentNode;t.tagName!=="ME-MAIN"&&t.previousSibling.children[1].remove()}e.parentNode.remove()},yy={before:"beforebegin",after:"afterend"},oh=function(n){const i=n.parentElement.parentElement.lastElementChild;(i==null?void 0:i.tagName)==="svg"&&(i==null||i.remove())},ET=function(n,i){const e=n.nodeObj,t=gd(e);t.style&&i.style&&(i.style=Object.assign(t.style,i.style));const r=Object.assign(e,i);yd(n,r),this.linkDiv(),this.bus.fire("operation",{name:"reshapeNode",obj:r,origin:t})},CT=function(n,i,e){var t,r,s;const a=i||this.currentNode;if(!a)return;const o=a.nodeObj;if(o.root===!0){this.addChild();return}else if(((t=o.parent)==null?void 0:t.root)===!0&&((s=(r=o.parent)==null?void 0:r.children)==null?void 0:s.length)===1){this.addChild(ot(o.parent.id));return}const l=e||this.generateNewObj();yT(l,n,o),os(this.nodeData);const h=a.parentElement;console.time("insertSibling_DOM");const{grp:c,top:u}=this.createWrapper(l);h.parentElement.insertAdjacentElement(yy[n],c),this.linkDiv(c.offsetParent),e||this.editTopic(u.firstChild),this.selectNode(u.firstChild,!0),console.timeEnd("insertSibling_DOM"),this.bus.fire("operation",{name:"insertSibling",type:n,obj:l})},wT=function(n,i){const e=n||this.currentNode;if(!e)return;oh(e);const t=e.nodeObj;if(t.root===!0)return;const r=i||this.generateNewObj();bT(t,r),os(this.nodeData);const s=e.parentElement.parentElement;console.time("insertParent_DOM");const{grp:a,top:o}=this.createWrapper(r,!0);o.appendChild(bd(!0)),s.insertAdjacentElement("afterend",a);const l=this.createChildren([s]);o.insertAdjacentElement("afterend",l),this.linkDiv(),i||this.editTopic(o.firstChild),this.selectNode(o.firstChild,!0),console.timeEnd("insertParent_DOM"),this.bus.fire("operation",{name:"insertParent",obj:r})},TT=function(n,i){console.time("addChild");const e=n||this.currentNode;if(!e)return;const t=Ed(this,e,i);if(!t)return;const{newTop:r,newNodeObj:s}=t;this.bus.fire("operation",{name:"addChild",obj:s}),console.timeEnd("addChild"),i||this.editTopic(r.firstChild),this.selectNode(r.firstChild,!0)},DT=function(n,i){console.time("copyNode");const e=gd(n.nodeObj);md(e);const t=Ed(this,i,e);if(!t)return;const{newNodeObj:r}=t;console.timeEnd("copyNode"),this.selectNode(ot(r.id)),this.bus.fire("operation",{name:"copyNode",obj:r})},AT=function(n,i){n=ah(n);const e=[];for(let t=0;t<n.length;t++){const r=n[t],s=gd(r.nodeObj);md(s);const a=Ed(this,i,s);if(!a)return;const{newNodeObj:o}=a;e.push(o)}this.selectNodes(e.map(t=>ot(t.id))),this.bus.fire("operation",{name:"copyNodes",objs:e})},xT=function(n){const i=n||this.currentNode;if(!i)return;const e=i.nodeObj;mT(e);const t=i.parentNode.parentNode;t.parentNode.insertBefore(t,t.previousSibling),this.linkDiv(),this.bus.fire("operation",{name:"moveUpNode",obj:e})},kT=function(n){const i=n||this.currentNode;if(!i)return;const e=i.nodeObj;gT(e);const t=i.parentNode.parentNode;t.nextSibling?t.nextSibling.insertAdjacentElement("afterend",t):t.parentNode.prepend(t),this.linkDiv(),this.bus.fire("operation",{name:"moveDownNode",obj:e})},IT=function(n){var i;const e=n||this.currentNode;if(!e)return;const t=e.nodeObj;if(t.root===!0)throw new Error("Can not remove root node");const r=t.parent.children,s=r.findIndex(o=>o===t),a=Sd(t);if(gy(e,a),r.length!==0){const o=r[s]||r[s-1];this.selectNode(ot(o.id))}else this.selectNode(ot(t.parent.id));this.linkDiv(),this.bus.fire("operation",{name:"removeNode",obj:t,originIndex:s,originParentId:(i=t==null?void 0:t.parent)==null?void 0:i.id})},MT=function(n){n=ah(n);for(const i of n){const e=i.nodeObj;if(e.root===!0)continue;const t=Sd(e);gy(i,t)}this.linkDiv(),this.bus.fire("operation",{name:"removeNodes",objs:n.map(i=>i.nodeObj)})},OT=function(n,i){n=ah(n);const e=i.nodeObj;e.expanded===!1&&(this.expandNode(i,!0),i=ot(e.id)),console.time("moveNodeIn");for(const t of n){const r=t.nodeObj;vy("in",r,e),os(this.nodeData);const s=t.parentElement;my(this,i,s.parentElement)}this.linkDiv(),this.bus.fire("operation",{name:"moveNodeIn",objs:n.map(t=>t.nodeObj),toObj:e}),console.timeEnd("moveNodeIn")},by=(n,i,e,t)=>{n=ah(n),i==="after"&&(n=n.reverse());const r=e.nodeObj;for(const s of n){const a=s.nodeObj;vy(i,a,r),os(t.nodeData),oh(s);const o=s.parentElement.parentNode;e.parentElement.parentNode.insertAdjacentElement(yy[i],o)}t.linkDiv(),t.bus.fire("operation",{name:i==="before"?"moveNodeBefore":"moveNodeAfter",objs:n.map(s=>s.nodeObj),toObj:r})},RT=function(n,i){by(n,"before",i,this)},NT=function(n,i){by(n,"after",i,this)},LT=function(n){const i=n||this.currentNode;i&&(i.nodeObj.dangerouslySetInnerHTML||this.editTopic(i))},VT=function(n,i){n.text.textContent=i,n.nodeObj.topic=i,this.linkDiv()},Sy=Object.freeze(Object.defineProperty({__proto__:null,addChild:TT,beginEdit:LT,copyNode:DT,copyNodes:AT,insertParent:wT,insertSibling:CT,mainToSub:oh,moveDownNode:kT,moveNodeAfter:NT,moveNodeBefore:RT,moveNodeIn:OT,moveUpNode:xT,removeNode:IT,removeNodes:MT,reshapeNode:ET,setNodeTopic:VT},Symbol.toStringTag,{value:"Module"})),PT=function(n){return{dom:n,moved:!1,mousedown:!1,handleMouseMove(i){this.mousedown&&(this.moved=!0,this.cb&&this.cb(i.movementX,i.movementY))},handleMouseDown(i){i.button===0&&(this.mousedown=!0)},handleClear(i){this.mousedown=!1},cb:null,init(i,e){this.cb=e,this.handleClear=this.handleClear.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),i.addEventListener("mousemove",this.handleMouseMove),i.addEventListener("mouseleave",this.handleClear),i.addEventListener("mouseup",this.handleClear),this.dom.addEventListener("mousedown",this.handleMouseDown)},destory(i){i.removeEventListener("mousemove",this.handleMouseMove),i.removeEventListener("mouseleave",this.handleClear),i.removeEventListener("mouseup",this.handleClear),this.dom.removeEventListener("mousedown",this.handleMouseDown)},clear(){this.moved=!1,this.mousedown=!1}}},cv={create:PT};function xl(n,i,e){const{offsetLeft:t,offsetTop:r}=ls(n.nodes,i),s=i.offsetWidth,a=i.offsetHeight,o=t+s/2,l=r+a/2,h=o+e.x,c=l+e.y;return{w:s,h:a,cx:o,cy:l,ctrlX:h,ctrlY:c}}function Sn(n){let i,e;const t=(n.cy-n.ctrlY)/(n.ctrlX-n.cx);return t>n.h/n.w||t<-n.h/n.w?n.cy-n.ctrlY<0?(i=n.cx-n.h/2/t,e=n.cy+n.h/2):(i=n.cx+n.h/2/t,e=n.cy-n.h/2):n.cx-n.ctrlX<0?(i=n.cx+n.w/2,e=n.cy-n.w*t/2):(i=n.cx-n.w/2,e=n.cy+n.w*t/2),{x:i,y:e}}const HT=function(n,i,e,t){const r=document.createElementNS("http://www.w3.org/2000/svg","text");return et(r,{"text-anchor":"middle",x:i+"",y:e+"",fill:t||"#666"}),r.dataset.type="custom-link",r.innerHTML=n,r},Ey=function(n,i,e,t,r){if(!i||!e)return;const s=performance.now(),a=xl(n,i,t.delta1),o=xl(n,e,t.delta2),{x:l,y:h}=Sn(a),{ctrlX:c,ctrlY:u}=a,{ctrlX:p,ctrlY:f}=o,{x:v,y:m}=Sn(o),g=oy(p,f,v,m),y=Cw(`M ${l} ${h} C ${c} ${u} ${p} ${f} ${v} ${m}`,`M ${g.x1} ${g.y1} L ${v} ${m} L ${g.x2} ${g.y2}`),b=l/8+c*3/8+p*3/8+v/8,E=h/8+u*3/8+f*3/8+m/8,w=HT(t.label,b,E,n.theme.cssVar["--color"]);y.appendChild(w),y.arrowObj=t,y.dataset.linkid=t.id,n.linkSvgGroup.appendChild(y),r||(n.arrows.push(t),n.currentArrow=y,wy(n,t,a,o));const A=performance.now();console.log(`DrawArrow Execution time: ${A-s} ms`)},BT=function(n,i){const e={id:lo(),label:"Custom Link",from:n.nodeObj.id,to:i.nodeObj.id,delta1:{x:0,y:-200},delta2:{x:0,y:-200}};Ey(this,n,i,e),this.bus.fire("operation",{name:"createArrow",obj:e})},FT=function(n){let i;if(n?i=n:i=this.currentArrow,!i)return;Cy(this);const e=i.arrowObj.id;this.arrows=this.arrows.filter(t=>t.id!==e),i.remove(),this.bus.fire("operation",{name:"removeArrow",obj:{id:e}})},WT=function(n){this.currentArrow=n;const i=n.arrowObj,e=ot(i.from),t=ot(i.to),r=xl(this,e,i.delta1),s=xl(this,t,i.delta2);wy(this,i,r,s)},_T=function(){this.currentArrow=null,Cy(this)},Cy=function(n){n.linkController.style.display="none",n.P2.style.display="none",n.P3.style.display="none"},wy=function(n,i,e,t){var r;n.linkController.style.display="initial",n.P2.style.display="initial",n.P3.style.display="initial",n.nodes.appendChild(n.linkController),n.nodes.appendChild(n.P2),n.nodes.appendChild(n.P3);let{x:s,y:a}=Sn(e),{ctrlX:o,ctrlY:l}=e,{ctrlX:h,ctrlY:c}=t,{x:u,y:p}=Sn(t);n.P2.style.cssText=`top:${l}px;left:${o}px;`,n.P3.style.cssText=`top:${c}px;left:${h}px;`,et(n.line1,{x1:s+"",y1:a+"",x2:o+"",y2:l+""}),et(n.line2,{x1:h+"",y1:c+"",x2:u+"",y2:p+""}),n.helper1&&(n.helper1.destory(n.map),(r=n.helper2)==null||r.destory(n.map)),n.helper1=cv.create(n.P2),n.helper2=cv.create(n.P3),n.helper1.init(n.map,(f,v)=>{var m;o=o+f/n.scaleVal,l=l+v/n.scaleVal;const g=Sn({...e,ctrlX:o,ctrlY:l});s=g.x,a=g.y;const y=s/8+o*3/8+h*3/8+u/8,b=a/8+l*3/8+c*3/8+p/8;n.P2.style.top=l+"px",n.P2.style.left=o+"px",(m=n.currentArrow)==null||m.children[0].setAttribute("d",`M ${s} ${a} C ${o} ${l} ${h} ${c} ${u} ${p}`),et(n.currentArrow.children[2],{x:y+"",y:b+""}),et(n.line1,{x1:s+"",y1:a+"",x2:o+"",y2:l+""}),i.delta1.x=o-e.cx,i.delta1.y=l-e.cy}),n.helper2.init(n.map,(f,v)=>{var m,g;h=h+f/n.scaleVal,c=c+v/n.scaleVal;const y=Sn({...t,ctrlX:h,ctrlY:c});u=y.x,p=y.y;const b=s/8+o*3/8+h*3/8+u/8,E=a/8+l*3/8+c*3/8+p/8,w=oy(h,c,u,p);n.P3.style.top=c+"px",n.P3.style.left=h+"px",(m=n.currentArrow)==null||m.children[0].setAttribute("d",`M ${s} ${a} C ${o} ${l} ${h} ${c} ${u} ${p}`),(g=n.currentArrow)==null||g.children[1].setAttribute("d",`M ${w.x1} ${w.y1} L ${u} ${p} L ${w.x2} ${w.y2}`),et(n.currentArrow.children[2],{x:b+"",y:E+""}),et(n.line2,{x1:h+"",y1:c+"",x2:u+"",y2:p+""}),i.delta2.x=h-t.cx,i.delta2.y=c-t.cy})};function qT(){this.linkSvgGroup.innerHTML="";for(let n=0;n<this.arrows.length;n++){const i=this.arrows[n];try{Ey(this,ot(i.from),ot(i.to),i,!0)}catch{console.warn("Node may not be expanded")}}this.nodes.appendChild(this.linkSvgGroup)}function zT(n){if(console.time("editSummary"),!n)return;const i=n.children[2];console.log(i,n),cy(this,i,e=>{var t;const r=n.arrowObj,s=((t=e.textContent)==null?void 0:t.trim())||"";s===""?r.label=origin:r.label=s,e.remove(),s!==origin&&(i.innerHTML=r.label,this.linkDiv(),this.bus.fire("operation",{name:"finishEditArrowLabel",obj:r}))}),console.timeEnd("editSummary")}function jT(){this.arrows=this.arrows.filter(n=>Dl(n.from,this.nodeData)&&Dl(n.to,this.nodeData))}const UT=Object.freeze(Object.defineProperty({__proto__:null,createArrow:BT,editArrowLabel:zT,removeArrow:FT,renderArrow:qT,selectArrow:WT,tidyArrow:jT,unselectArrow:_T},Symbol.toStringTag,{value:"Module"})),YT=function(n){var i,e;if(n.length===0)throw new Error("No selected node.");if(n.length===1){const c=n[0].nodeObj,u=n[0].nodeObj.parent;if(!u)throw new Error("Can not select root node.");const p=u.children.findIndex(f=>c===f);return{parent:u.id,start:p,end:p}}let t=0;const r=n.map(c=>{let u=c.nodeObj;const p=[];for(;u.parent;){const f=u.parent,v=f.children,m=v==null?void 0:v.indexOf(u);u=f,p.unshift({node:u,index:m})}return p.length>t&&(t=p.length),p});let s=0;e:for(;s<t;s++){const c=(i=r[0][s])==null?void 0:i.node;for(let u=1;u<r.length;u++)if(((e=r[u][s])==null?void 0:e.node)!==c)break e}if(!s)throw new Error("Can not select root node.");const a=r.map(c=>c[s-1].index).sort(),o=a[0]||0,l=a[a.length-1]||0,h=r[0][s-1].node;if(h.root)throw new Error("Please select nodes in the same main topic.");return{parent:h.id,start:o,end:l}},GT=function(n){const i=document.createElementNS("http://www.w3.org/2000/svg","g");return i.setAttribute("id",n),i},uv=function(n,i){const e=document.createElementNS("http://www.w3.org/2000/svg","path");return et(e,{d:n,stroke:i||"#666",fill:"none","stroke-linecap":"round","stroke-width":"2"}),e},dv=function(n,i,e,t,r){const s=document.createElementNS("http://www.w3.org/2000/svg","text");return et(s,{"text-anchor":t,x:i+"",y:e+"",fill:r||"#666"}),s.innerHTML=n,s},$T=n=>ot(n).parentElement.parentElement,KT=function({parent:n,start:i}){var e,t;const r=ot(n),s=r.nodeObj;let a;return s.root===!0?a=(e=ot(s.children[i].id).closest("me-main"))==null?void 0:e.className:a=(t=r.closest("me-main"))==null?void 0:t.className,a},Ty=function(n,i){var e;const{id:t,text:r,parent:s,start:a,end:o}=i,l=n.nodes,h=ot(s).nodeObj,c=KT(i);let u=1/0,p=0,f=0,v=0;for(let D=a;D<=o;D++){const N=(e=h.children)==null?void 0:e[D];if(!N)return console.warn("Child not found"),n.removeSummary(t),null;const x=$T(N.id),{offsetLeft:j,offsetTop:q}=ls(l,x);D===a&&(f=q),D===o&&(v=q+x.offsetHeight),j<u&&(u=j),x.offsetWidth+j>p&&(p=x.offsetWidth+j)}let m,g;const y=f+10,b=v+10,E=(y+b)/2,w=n.theme.cssVar["--color"];c==="lhs"?(m=uv(`M ${u+10} ${y} c -5 0 -10 5 -10 10 L ${u} ${b-10} c 0 5 5 10 10 10 M ${u} ${E} h -10`,w),g=dv(r,u-20,E+6,"end",w)):(m=uv(`M ${p-10} ${y} c 5 0 10 5 10 10 L ${p} ${b-10} c 0 5 -5 10 -10 10 M ${p} ${E} h 10`,w),g=dv(r,p+20,E+6,"start",w));const A=GT("s-"+t);return A.appendChild(m),A.appendChild(g),A.summaryObj=i,n.summarySvg.appendChild(A),A},QT=function(){let n=[];this.currentNode?n=[this.currentNode]:this.currentNodes&&(n=this.currentNodes);const{parent:i,start:e,end:t}=YT(n),r={id:lo(),parent:i,start:e,end:t,text:"summary"},s=Ty(this,r);this.summaries.push(r),this.editSummary(s),this.bus.fire("operation",{name:"createSummary",obj:r})},XT=function(n){var i;const e=this.summaries.findIndex(t=>t.id===n);e>-1&&(this.summaries.splice(e,1),(i=document.querySelector("#s-"+n))==null||i.remove()),this.bus.fire("operation",{name:"removeSummary",obj:{id:n}})},ZT=function(n){const i=n.children[1].getBBox(),e=6,t=3,r=document.createElementNS("http://www.w3.org/2000/svg","rect");et(r,{x:i.x-e+"",y:i.y-e+"",width:i.width+e*2+"",height:i.height+e*2+"",rx:t+"",stroke:this.theme.cssVar["--selected"]||"#4dc4ff","stroke-width":"2",fill:"none"}),r.classList.add("selected"),n.appendChild(r),this.currentSummary=n},JT=function(){var n,i;(i=(n=this.currentSummary)==null?void 0:n.querySelector("rect"))==null||i.remove(),this.currentSummary=null},eD=function(){this.summarySvg.innerHTML="",this.summaries.forEach(n=>{try{Ty(this,n)}catch{console.warn("Node may not be expanded")}}),this.nodes.insertAdjacentElement("beforeend",this.summarySvg)},tD=function(n){if(console.time("editSummary"),!n)return;const i=n.childNodes[1];cy(this,i,e=>{var t;const r=n.summaryObj,s=((t=e.textContent)==null?void 0:t.trim())||"";s===""?r.text=origin:r.text=s,e.remove(),s!==origin&&(i.innerHTML=r.text,this.linkDiv(),this.bus.fire("operation",{name:"finishEditSummary",obj:r}))}),console.timeEnd("editSummary")},iD=Object.freeze(Object.defineProperty({__proto__:null,createSummary:QT,editSummary:tD,removeSummary:XT,renderSummary:eD,selectSummary:ZT,unselectSummary:JT},Symbol.toStringTag,{value:"Module"})),pi="http://www.w3.org/2000/svg";function rD(n,i){const e=document.createElementNS(pi,"svg");return et(e,{version:"1.1",xmlns:pi,height:n,width:i}),e}function sD(n,i){return(parseInt(n)-parseInt(i))/2}function nD(n,i,e,t){const r=document.createElementNS(pi,"g");let s="";return n.text?s=n.text.textContent:s=n.childNodes[0].textContent,s.split(`
`).forEach((a,o)=>{const l=document.createElementNS(pi,"text");et(l,{x:e+parseInt(i.paddingLeft)+"",y:t+parseInt(i.paddingTop)+sD(i.lineHeight,i.fontSize)*(o+1)+parseFloat(i.fontSize)*(o+1)+"","text-anchor":"start","font-family":i.fontFamily,"font-size":`${i.fontSize}`,"font-weight":`${i.fontWeight}`,fill:`${i.color}`}),l.innerHTML=a,r.appendChild(l)}),r}function aD(n,i,e,t){var r;let s="";(r=n.nodeObj)!=null&&r.dangerouslySetInnerHTML?s=n.nodeObj.dangerouslySetInnerHTML:n.text?s=n.text.textContent:s=n.childNodes[0].textContent;const a=document.createElementNS(pi,"foreignObject");et(a,{x:e+parseInt(i.paddingLeft)+"",y:t+parseInt(i.paddingTop)+"",width:i.width,height:i.height});const o=document.createElement("div");return et(o,{xmlns:"http://www.w3.org/1999/xhtml",style:`font-family: ${i.fontFamily}; font-size: ${i.fontSize}; font-weight: ${i.fontWeight}; color: ${i.color}; white-space: pre-wrap;`}),o.innerHTML=s,a.appendChild(o),a}function oD(n,i){const e=getComputedStyle(i),{offsetLeft:t,offsetTop:r}=ls(n.nodes,i),s=document.createElementNS(pi,"rect");return et(s,{x:t+"",y:r+"",rx:e.borderRadius,ry:e.borderRadius,width:e.width,height:e.height,fill:e.backgroundColor,stroke:e.borderColor,"stroke-width":e.borderWidth}),s}function zo(n,i,e=!1){const t=getComputedStyle(i),{offsetLeft:r,offsetTop:s}=ls(n.nodes,i),a=document.createElementNS(pi,"rect");et(a,{x:r+"",y:s+"",rx:t.borderRadius,ry:t.borderRadius,width:t.width,height:t.height,fill:t.backgroundColor,stroke:t.borderColor,"stroke-width":t.borderWidth});const o=document.createElementNS(pi,"g");o.appendChild(a);let l;return e?l=aD(i,t,r,s):l=nD(i,t,r,s),o.appendChild(l),o}function lD(n,i){const e=getComputedStyle(i),{offsetLeft:t,offsetTop:r}=ls(n.nodes,i),s=document.createElementNS(pi,"a"),a=document.createElementNS(pi,"text");return et(a,{x:t+"",y:r+parseInt(e.fontSize)+"","text-anchor":"start","font-family":e.fontFamily,"font-size":`${e.fontSize}`,"font-weight":`${e.fontWeight}`,fill:`${e.color}`}),a.innerHTML=i.textContent,s.appendChild(a),s.setAttribute("href",i.href),s}function hD(n,i){const e=getComputedStyle(i),{offsetLeft:t,offsetTop:r}=ls(n.nodes,i),s=document.createElementNS(pi,"image");return et(s,{x:t+"",y:r+"",width:e.width+"",height:e.height+"",href:i.src}),s}const jo=100,cD='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',uD=(n,i=!1)=>{var e,t,r;const s=n.nodes,a=s.offsetHeight+jo*2,o=s.offsetWidth+jo*2,l=rD(a+"px",o+"px"),h=document.createElementNS(pi,"svg"),c=document.createElementNS(pi,"rect");et(c,{x:"0",y:"0",width:`${o}`,height:`${a}`,fill:n.theme.cssVar["--bgcolor"]}),l.appendChild(c),s.querySelectorAll(".subLines").forEach(v=>{const m=v.cloneNode(!0),{offsetLeft:g,offsetTop:y}=ls(s,v.parentElement);m.setAttribute("x",`${g}`),m.setAttribute("y",`${y}`),h.appendChild(m)});const u=(e=s.querySelector(".lines"))==null?void 0:e.cloneNode(!0);u&&h.appendChild(u);const p=(t=s.querySelector(".topiclinks"))==null?void 0:t.cloneNode(!0);p&&h.appendChild(p);const f=(r=s.querySelector(".summary"))==null?void 0:r.cloneNode(!0);return f&&h.appendChild(f),s.querySelectorAll("me-tpc").forEach(v=>{v.nodeObj.dangerouslySetInnerHTML?h.appendChild(zo(n,v,!i)):(h.appendChild(oD(n,v)),h.appendChild(zo(n,v.text,!i)))}),s.querySelectorAll(".tags > span").forEach(v=>{h.appendChild(zo(n,v))}),s.querySelectorAll(".icons > span").forEach(v=>{h.appendChild(zo(n,v))}),s.querySelectorAll(".hyper-link").forEach(v=>{h.appendChild(lD(n,v))}),s.querySelectorAll("img").forEach(v=>{h.appendChild(hD(n,v))}),et(h,{x:jo+"",y:jo+"",overflow:"visible"}),l.appendChild(h),l},dD=(n,i)=>(i&&n.insertAdjacentHTML("afterbegin","<style>"+i+"</style>"),cD+n.outerHTML);function pD(n){return new Promise((i,e)=>{const t=new FileReader;t.onload=r=>{i(r.target.result)},t.onerror=r=>{e(r)},t.readAsDataURL(n)})}const fD=function(n=!1,i){const e=uD(this,n),t=dD(e,i);return new Blob([t],{type:"image/svg+xml"})},vD=async function(n=!1,i){const e=this.exportSvg(n,i),t=await pD(e);return new Promise((r,s)=>{const a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=()=>{const o=document.createElement("canvas");o.width=a.width,o.height=a.height,o.getContext("2d").drawImage(a,0,0),o.toBlob(r,"image/png",1)},a.src=t,a.onerror=s})},mD=Object.freeze(Object.defineProperty({__proto__:null,exportPng:vD,exportSvg:fD},Symbol.toStringTag,{value:"Module"}));function gD(n,i){return async function(...e){const t=this.before[i];t&&!await t.apply(this,e)||n.apply(this,e)}}const pv=Object.keys(Sy),Dy={};for(let n=0;n<pv.length;n++){const i=pv[n];Dy[i]=gD(Sy[i],i)}const yD={getObjById:Dl,generateNewObj:uw,layout:fw,linkDiv:ww,editTopic:Ew,createWrapper:gw,createParent:yw,createChildren:bw,createTopic:Sw,findEle:ot,changeTheme:Gw,...vT,...Dy,...UT,...iD,...mD,init(n){if(!n||!n.nodeData)return new Error("MindElixir: `data` is required");n.direction!==void 0&&(this.direction=n.direction),this.changeTheme(n.theme||this.theme,!1),this.nodeData=n.nodeData,os(this.nodeData),this.arrows=n.arrows||[],this.summaries=n.summaries||[],this.tidyArrow(),this.toolBar&&Fw(this),this.keypress&&Mw(this),this.editable&&Yw(this),hw()&&this.mobileMenu?Ow(this):this.contextMenu&&Tw(this,this.contextMenuOption),this.draggable&&Lw(this),this.allowUndo&&Pw(this),this.toCenter(),this.layout(),this.linkDiv()}};function bD({pT:n,pL:i,pW:e,pH:t,cT:r,cL:s,cW:a,cH:o,direction:l,containerHeight:h}){let c=i+e/2;const u=n+t/2;let p;l==="lhs"?p=s+a:p=s;const f=r+o/2,v=(1-Math.abs(f-u)/h)*.25*(e/2);return l==="lhs"?c=c-e/10-v:c=c+e/10+v,`M ${c} ${u} Q ${c} ${f} ${p} ${f}`}function SD({pT:n,pL:i,pW:e,pH:t,cT:r,cL:s,cW:a,cH:o,direction:l,isFirst:h}){let c=0,u=0;h?c=n+t/2:c=n+t;const p=r+o;let f=0,v=0,m=0;const g=Math.abs(c-p)/300*Yr;return l==="lhs"?(m=i,f=m+Yr,v=m-Yr,u=s+Yr,`M ${f} ${c} C ${m} ${c} ${m+g} ${p} ${v} ${p} H ${u}`):(m=i+e,f=m-Yr,v=m+Yr,u=s+a-Yr,`M ${f} ${c} C ${m} ${c} ${m-g} ${p} ${v} ${p} H ${u}`)}const da=document;function nr({el:n,direction:i,locale:e,draggable:t,editable:r,contextMenu:s,contextMenuOption:a,toolBar:o,keypress:l,mouseSelectionButton:h,before:c,newTopicName:u,allowUndo:p,generateMainBranch:f,generateSubBranch:v,overflowHidden:m,mobileMenu:g,theme:y}){console.log("ME_version "+nr.version,this);let b=null;const E=Object.prototype.toString.call(n);if(E==="[object HTMLDivElement]"?b=n:E==="[object String]"&&(b=document.querySelector(n)),!b)throw new Error("MindElixir: el is not a valid element");b.className+=" mind-elixir",b.innerHTML="",b.style.setProperty("--gap",Yr+"px"),this.mindElixirBox=b,this.before=c||{},this.locale=e||"en",this.contextMenuOption=a,this.contextMenu=s===void 0?!0:s,this.toolBar=o===void 0?!0:o,this.keypress=l===void 0?!0:l,this.mouseSelectionButton=h||0,this.mobileMenu=g||!1,this.direction=typeof i=="number"?i:1,this.draggable=t===void 0?!0:t,this.newTopicName=u||"new node",this.editable=r===void 0?!0:r,this.allowUndo=p===void 0?!1:p,this.currentNode=null,this.currentArrow=null,this.scaleVal=1,this.tempDirection=null,this.generateMainBranch=f||bD,this.generateSubBranch=v||SD,this.overflowHidden=m||!1,this.bus=pw.create(),this.container=da.createElement("div"),this.container.className="map-container";const w=window.matchMedia("(prefers-color-scheme: dark)");this.theme=y||(w.matches?ay:ny);const A=da.createElement("div");A.className="map-canvas",this.map=A,this.map.setAttribute("tabindex","0"),this.container.appendChild(this.map),this.mindElixirBox.appendChild(this.container),this.nodes=da.createElement("me-nodes"),this.nodes.className="main-node-container",this.lines=Ha("lines"),this.summarySvg=Ha("summary"),this.linkController=Ha("linkcontroller"),this.P2=da.createElement("div"),this.P3=da.createElement("div"),this.P2.className=this.P3.className="circle",this.P2.style.display=this.P3.style.display="none",this.line1=Jf(),this.line2=Jf(),this.linkController.appendChild(this.line1),this.linkController.appendChild(this.line2),this.linkSvgGroup=Ha("topiclinks"),this.map.appendChild(this.nodes),this.overflowHidden?this.container.style.overflow="hidden":dw(this)}nr.prototype=yD;nr.LEFT=Li;nr.RIGHT=Vs;nr.SIDE=nh;nr.THEME=ny;nr.DARK_THEME=ay;nr.version="4.0.0";nr.E=ot;nr.new=n=>({nodeData:{id:lo(),topic:n||"new topic",root:!0,children:[]}});const ED={key:1,class:"truncate text-text-secondary opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-2 text-xs font-medium"},CD={key:1,class:"relative w-full h-full"},wD=["placeholder"],TD={class:"max-h-50 overflow-y-auto"},DD=["onMousedown"],AD={key:1,class:"px-3 py-2 text-center text-text-secondary text-sm"},vV=Ks({__name:"TableSearchCell",props:{modelValue:{},options:{default:()=>[]},placeholder:{default:"Type to search..."},disabled:{type:Boolean,default:!1},displayField:{},emptyText:{},columnName:{default:""}},emits:["update:modelValue","change"],setup(n,{emit:i}){const e=n,t=i,r={High:"#F87171",Medium:"#FBBF24",Low:"#34D399"},s=Bt(()=>{if(e.columnName.toLowerCase()!=="priority")return"transparent";const L=E.value;return r[L]??"#E5E7EB"}),a=L=>e.columnName.toLowerCase()!=="priority"?"transparent":r[L]??"#E5E7EB",o=nt(!1),l=nt(!1),h=nt(""),c=nt(null),u=nt(null),p=nt(null),f=nt({top:"0px",left:"0px",width:"100%"}),v=nt(!1),m=()=>{if(!c.value||!p.value)return;const L=c.value.getBoundingClientRect(),O=p.value.offsetHeight||200,F=window.innerHeight-L.bottom;let U=L.bottom+window.scrollY+6;F<O&&L.top>O&&(U=L.top+window.scrollY-O-5),f.value={top:`${U}px`,left:`${L.left+window.scrollX}px`,width:`${L.width}px`}};Qa(()=>e.modelValue,L=>{E.value=L});const g=L=>typeof L=="string"?L:String(L.title??L.label??L.value??""),y=Bt(()=>{if(!E.value)return"";const L=e.options.find(O=>{var P,F;return typeof O=="string"?O===E.value:typeof E.value!="object"?O._id==E.value||O.value==E.value:O._id==((P=E.value)==null?void 0:P._id)||O.value==((F=E.value)==null?void 0:F.value)});return L?g(L):""}),b=Bt(()=>(e.options??[]).map(L=>typeof L=="string"?{value:L,label:L}:L));Qa(()=>e.modelValue,L=>{const O=b.value.find(P=>P._id==L||P.value==L);h.value=O?g(O):""},{immediate:!0});const E=nt(e.modelValue),w=Bt(()=>{if(!h.value||h.value===y.value)return b.value;const L=h.value.toLowerCase();return b.value.filter(O=>g(O).toLowerCase().includes(L))}),A=async()=>{var L,O;e.disabled||(o.value=!0,h.value=y.value,l.value=!0,await dd(),(L=c.value)==null||L.focus(),(O=c.value)==null||O.select(),m(),window.addEventListener("scroll",m,!0),window.addEventListener("resize",m))},D=()=>{o.value=!1,l.value=!1,h.value="",window.removeEventListener("scroll",m,!0),window.removeEventListener("resize",m)},N=L=>{let O;typeof L=="string"?O=L:O=L._id??L.value??L.title,E.value=O,t("update:modelValue",O),t("change",O),D()},x=()=>{if(w.value.length>0){const L=w.value.find(O=>g(O).toLowerCase()===h.value.toLowerCase());if(L){N(L);return}}t("update:modelValue",h.value),t("change",h.value),D()},j=()=>{setTimeout(()=>{if(v.value){v.value=!1;return}o.value&&x()},150)},q=L=>{u.value&&!u.value.contains(L.target)&&p.value&&!p.value.contains(L.target)&&o.value&&x()};return Kg(()=>{document.addEventListener("mousedown",q)}),Qg(()=>{document.removeEventListener("mousedown",q),window.removeEventListener("scroll",m,!0),window.removeEventListener("resize",m)}),(L,O)=>(fe(),me("div",{class:"relative w-full h-full",ref_key:"containerRef",ref:u,onClick:O[2]||(O[2]=Dn(()=>{},["stop"]))},[o.value?(fe(),me("div",CD,[hd(be("input",{ref_key:"inputRef",ref:c,"onUpdate:modelValue":O[0]||(O[0]=P=>h.value=P),onBlur:j,onKeydown:[El(x,["enter"]),El(D,["esc"])],onInput:O[1]||(O[1]=P=>l.value=!0),class:"absolute left-0 top-1/2 -translate-y-1/2 min-w-[150px] w-full p-1 border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-bg-body z-50 text-[12px] h-8",placeholder:L.placeholder},null,40,wD),[[cd,h.value]]),(fe(),ud(pd,{to:"body"},[l.value?(fe(),me("div",{key:0,ref_key:"dropdownRef",ref:p,class:"fixed z-[9999] bg-bg-dropdown border border-border rounded-md shadow-lg py-2",style:Tr(f.value)},[be("div",TD,[w.value.length>0?(fe(!0),me(Ki,{key:0},Kr(w.value,P=>(fe(),me("div",{key:P._id??P.value,onMousedown:Dn(F=>N(P),["prevent"]),class:"px-3 py-1.5 capitalize font-medium cursor-pointer hover:bg-bg-dropdown-menu-hover text-[12px] text-text-primary flex items-center gap-2"},[ou(L.$slots,"option",{option:P},()=>{var F;return[be("span",{style:Tr(((F=L.columnName)==null?void 0:F.toLowerCase())==="priority"?{backgroundColor:a(g(P)),color:"white",padding:"2px 8px",borderRadius:"10px"}:{})},Oi(g(P)),5)]})],40,DD))),128)):(fe(),me("div",AD," No match found "))])],4)):Ls("",!0)]))])):(fe(),me("div",{key:0,onClick:A,class:Xg(["h-full flex items-center px-3 py-1.5 cursor-pointer hover:bg-bg-surface-hover rounded-md truncate transition-all duration-200 group",{"opacity-50 cursor-not-allowed":L.disabled}])},[ou(L.$slots,"display",{},()=>{var P;return[y.value?(fe(),me("span",{key:0,class:"truncate font-normal text-[12px] text-text-primary",style:Tr(((P=L.columnName)==null?void 0:P.toLowerCase())==="priority"?{backgroundColor:s.value,color:"white",padding:"2px 8px",borderRadius:"10px",fontSize:"10px"}:{})},Oi(y.value),5)):L.emptyText&&!L.disabled?(fe(),me("span",ED,[O[3]||(O[3]=be("i",{class:"fa-solid fa-plus text-[10px]"},null,-1)),Sl(" Add "+Oi(L.emptyText),1)])):Ls("",!0)]})],2))],512))}}),xD={key:0,class:"flex gap-2 items-center truncate"},kD=["src"],ID={key:2,class:"w-6 h-6 bg-bg-body border border-border rounded-full flex justify-center items-center flex-shrink-0"},MD={class:"text-[11px] text-text-primary truncate"},OD={key:1,class:"truncate text-text-secondary opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1.5 text-xs"},RD={key:1,class:"relative w-full"},ND={class:"max-h-60 overflow-y-auto py-1"},LD=["onMousedown"],VD={class:"flex items-center gap-3 min-w-0"},PD=["src"],HD={key:2,class:"w-6 h-6 bg-bg-body border border-border rounded-full flex justify-center items-center flex-shrink-0"},BD={class:"min-w-0"},FD={class:"text-xs font-medium truncate"},WD={class:"text-[10px] text-text-secondary truncate"},_D={class:"text-xs font-medium text-text-secondary whitespace-nowrap ml-2"},qD={key:0,class:"text-[10px] px-2 py-1 border rounded-full border-red-500 transition group-hover:bg-red-500 group-hover:text-white"},zD={key:1,class:"text-red-500"},jD={key:2,class:"text-[10px] px-2 py-1 border rounded-full border-accent group-hover:bg-accent transition group-hover:text-white"},UD={key:1,class:"px-4 py-3 text-center text-sm text-text-secondary"},mV=Ks({__name:"TableAssigneeCell",props:{assigneeId:{},disabled:{type:Boolean},seat:{},workspaceId:{},name:{},emptyText:{}},emits:["update:modelValue","assign","unassign"],setup(n,{emit:i}){const e=n,t=i,{canAssignCard:r}=SS(),{workspaceId:s}=ES(),{data:a}=CS(Bt(()=>(e==null?void 0:e.workspaceId)??s.value)),o=nt(e.assigneeId??e.seat);Qa(()=>[e.assigneeId,e.seat],()=>{o.value=e.assigneeId??e.seat},{deep:!0});const l=nt(!1),h=nt(!1),c=nt(""),u=nt(null),p=nt(null),f=nt(null),v=nt({top:"0px",left:"0px",width:"100%"}),m=Bt(()=>{const L=o.value;if(!L)return null;const O=L._id||L.id||L;return(a.value||[]).find(F=>{var ne,Ae;const ie=F._id||F.id,U=((ne=F.user)==null?void 0:ne._id)||((Ae=F.user)==null?void 0:Ae.id);return ie==O||U==O})||L}),g=Bt(()=>{const L=m.value,O=a.value||[];if(L&&(L._id||L.id)){const P=L._id||L.id,F=L,ie=O.filter(U=>{var Ve,rt,pt,ft;const ne=U._id||U.id,Ae=((Ve=U.user)==null?void 0:Ve._id)||((rt=U.user)==null?void 0:rt.id),ge=((pt=L.user)==null?void 0:pt._id)||((ft=L.user)==null?void 0:ft.id);return!(ne==P||Ae&&Ae==(ge||P))});return[F,{_id:null,name:"Unassign",email:""},...ie]}return[{_id:null,name:"Unassign",email:""},...O]}),y=Bt(()=>{const L=c.value.trim().toLowerCase(),O=g.value;return L?O.filter(P=>(P.title||P.name||"").toLowerCase().includes(L)||(P.email||"").toLowerCase().includes(L)):O}),b=()=>{if(!u.value||!f.value)return;const L=u.value.getBoundingClientRect(),O=f.value.offsetHeight||200,F=window.innerHeight-L.bottom;let U=L.bottom+window.scrollY+6;F<O&&L.top>O&&(U=L.top+window.scrollY-O-5),v.value={top:`${U}px`,left:`${L.left+window.scrollX}px`,width:`${L.width}px`}},E=async()=>{var O,P,F,ie,U;if(e.disabled||!r.value)return;l.value=!0,h.value=!0;const L=((O=m.value)==null?void 0:O.name)||((P=m.value)==null?void 0:P.title)||((F=m.value)==null?void 0:F.u_full_name);c.value=L||"",await dd(),(ie=u.value)==null||ie.focus(),(U=u.value)==null||U.select(),b(),window.addEventListener("scroll",b,!0),window.addEventListener("resize",b)},w=()=>{l.value=!1,h.value=!1,c.value="",window.removeEventListener("scroll",b,!0),window.removeEventListener("resize",b)};function A(L){const O=g.value.find(P=>P._id==L);O&&(o.value=O,t("assign",O),t("update:modelValue",L)),w()}function D(){o.value=null,t("unassign"),t("assign",{_id:null}),t("update:modelValue",null),w()}function N(L){if(L._id==null){D();return}if(m.value&&L._id===m.value._id){D();return}A(L._id)}const x=()=>{y.value.length>0?N(y.value[0]):w()},j=()=>{setTimeout(()=>{l.value&&w()},150)},q=L=>{p.value&&!p.value.contains(L.target)&&f.value&&!f.value.contains(L.target)&&l.value&&w()};return Kg(()=>{document.addEventListener("mousedown",q)}),Qg(()=>{document.removeEventListener("mousedown",q),window.removeEventListener("scroll",b,!0),window.removeEventListener("resize",b)}),(L,O)=>{var P,F,ie,U,ne,Ae,ge,Ve,rt,pt,ft,vt,Wt,ni,_t,fo,Js,Yn,ai,en,Gn,Qt,qt,tn,Lr,qi;return fe(),me("div",{class:"relative w-full h-full",ref_key:"containerRef",ref:p,onClick:O[3]||(O[3]=Dn(()=>{},["stop"]))},[l.value?(fe(),me("div",RD,[hd(be("input",{ref_key:"inputRef",ref:u,"onUpdate:modelValue":O[0]||(O[0]=ke=>c.value=ke),onBlur:j,onKeydown:[El(x,["enter"]),El(w,["esc"])],onInput:O[1]||(O[1]=ke=>h.value=!0),class:"absolute left-0 top-1/2 h-8 -translate-y-1/2 min-w-[200px] w-full p-1 border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-bg-body z-50 text-[12px]",placeholder:"Add people by name or email"},null,544),[[cd,c.value]]),(fe(),ud(pd,{to:"body"},[h.value?(fe(),me("div",{key:0,ref_key:"dropdownRef",ref:f,class:"fixed z-[9999] bg-bg-dropdown border border-border rounded-md shadow-lg",style:Tr(v.value),onMousedown:O[2]||(O[2]=Dn(()=>{},["prevent"]))},[be("ul",ND,[y.value.length>0?(fe(!0),me(Ki,{key:0},Kr(y.value,ke=>{var cs,kt;return fe(),me("li",{key:ke._id??"unassign",onMousedown:Dn(Tp=>N(ke),["prevent"]),class:"px-3 py-2 cursor-pointer hover:bg-bg-dropdown-menu-hover text-[12px] text-text-primary flex items-center justify-between group"},[be("div",VD,[(cs=ke==null?void 0:ke.user)!=null&&cs.avatar?(fe(),me("img",{key:0,src:ke.user.avatar,class:"w-6 h-6 rounded-full object-cover flex-shrink-0",alt:""},null,8,PD)):ke.name&&ke._id?(fe(),me("div",{key:1,class:"w-6 h-6 border border-border rounded-full text-xs font-semibold flex items-center justify-center flex-shrink-0",style:Tr({backgroundColor:ke!=null&&ke.email?Sr(kp)({name:ke.name,email:ke.email,_id:ke._id}):""})},Oi(Sr(Ip)(ke.name)),5)):(fe(),me("div",HD,O[6]||(O[6]=[be("i",{class:"fa-regular fa-user text-xs"},null,-1)]))),be("div",BD,[be("div",FD,Oi(ke.name||ke.title),1),be("div",WD,Oi(ke.role_title),1)])]),be("div",_D,[ke._id&&((kt=m.value)==null?void 0:kt._id)===ke._id?(fe(),me("span",qD," Unassign ")):ke._id==null?(fe(),me("span",zD)):(fe(),me("span",jD," Assign to "))])],40,LD)}),128)):(fe(),me("div",UD," No match found "))])],36)):Ls("",!0)]))])):(fe(),me("div",{key:0,onClick:E,class:Xg(["w-full h-full flex items-center px-3 py-1.5 cursor-pointer hover:bg-bg-surface-hover rounded-md truncate transition-all duration-200 min-h-[36px] group",{"opacity-50 cursor-not-allowed":L.disabled}])},[(F=(P=m.value)==null?void 0:P.user)!=null&&F.avatar||(ie=m.value)!=null&&ie._id||(U=L.seat)!=null&&U._id?(fe(),me("div",xD,[(Ae=(ne=m.value)==null?void 0:ne.avatar)!=null&&Ae.src||(Ve=(ge=m.value)==null?void 0:ge.user)!=null&&Ve.avatar||(rt=m.value)!=null&&rt.u_profile_image?(fe(),me("img",{key:0,src:((ft=(pt=m.value)==null?void 0:pt.avatar)==null?void 0:ft.src)??((vt=m.value)==null?void 0:vt.u_profile_image)??((ni=(Wt=m.value)==null?void 0:Wt.user)==null?void 0:ni.avatar),class:"w-5 h-5 object-cover rounded-full flex-shrink-0",alt:""},null,8,kD)):(_t=m.value)!=null&&_t.u_full_name||(fo=m.value)!=null&&fo.name?(fe(),me("div",{key:1,class:"w-5 h-5 aspect-square rounded-full text-[11px] bg-bg-surface text-text-primary flex items-center justify-center flex-shrink-0",style:Tr({backgroundColor:((Js=m.value)==null?void 0:Js.u_full_name)??((Yn=m.value)==null?void 0:Yn.title)?Sr(kp)({name:((ai=m.value)==null?void 0:ai.u_full_name)??((en=m.value)==null?void 0:en.title),_id:(Gn=m.value)==null?void 0:Gn._id}):""})},Oi(Sr(Ip)(((Qt=m.value)==null?void 0:Qt.u_full_name)??((qt=m.value)==null?void 0:qt.name))),5)):(fe(),me("div",ID,O[4]||(O[4]=[be("i",{class:"fa-regular fa-user text-xs"},null,-1)]))),be("span",MD,Oi((((tn=m.value)==null?void 0:tn.name)||((Lr=m.value)==null?void 0:Lr.title)||((qi=m.value)==null?void 0:qi.u_full_name))??"Unassigned"),1)])):(fe(),me("span",OD,[O[5]||(O[5]=be("i",{class:"fa-solid fa-plus text-[10px]"},null,-1)),Sl(" Add "+Oi(L.emptyText||"Assignee"),1)]))],2))],512)}}});var lh,ue,Ay,xy,Pn,Ms,fv,ky,Iy,kl={},My=[],YD=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Zr(n,i){for(var e in i)n[e]=i[e];return n}function Oy(n){var i=n.parentNode;i&&i.removeChild(n)}function k(n,i,e){var t,r,s,a={};for(s in i)s=="key"?t=i[s]:s=="ref"?r=i[s]:a[s]=i[s];if(arguments.length>2&&(a.children=arguments.length>3?lh.call(arguments,2):e),typeof n=="function"&&n.defaultProps!=null)for(s in n.defaultProps)a[s]===void 0&&(a[s]=n.defaultProps[s]);return ll(n,a,t,r,null)}function ll(n,i,e,t,r){var s={type:n,props:i,key:e,ref:t,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r??++Ay};return r==null&&ue.vnode!=null&&ue.vnode(s),s}function Gt(){return{current:null}}function Ue(n){return n.children}function GD(n,i,e,t,r){var s;for(s in e)s==="children"||s==="key"||s in i||Il(n,s,null,e[s],t);for(s in i)r&&typeof i[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||e[s]===i[s]||Il(n,s,i[s],e[s],t)}function vv(n,i,e){i[0]==="-"?n.setProperty(i,e??""):n[i]=e==null?"":typeof e!="number"||YD.test(i)?e:e+"px"}function Il(n,i,e,t,r){var s;e:if(i==="style")if(typeof e=="string")n.style.cssText=e;else{if(typeof t=="string"&&(n.style.cssText=t=""),t)for(i in t)e&&i in e||vv(n.style,i,"");if(e)for(i in e)t&&e[i]===t[i]||vv(n.style,i,e[i])}else if(i[0]==="o"&&i[1]==="n")s=i!==(i=i.replace(/Capture$/,"")),i=i.toLowerCase()in n?i.toLowerCase().slice(2):i.slice(2),n.l||(n.l={}),n.l[i+s]=e,e?t||n.addEventListener(i,s?gv:mv,s):n.removeEventListener(i,s?gv:mv,s);else if(i!=="dangerouslySetInnerHTML"){if(r)i=i.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(i!=="width"&&i!=="height"&&i!=="href"&&i!=="list"&&i!=="form"&&i!=="tabIndex"&&i!=="download"&&i in n)try{n[i]=e??"";break e}catch{}typeof e=="function"||(e==null||e===!1&&i.indexOf("-")==-1?n.removeAttribute(i):n.setAttribute(i,e))}}function mv(n){Pn=!0;try{return this.l[n.type+!1](ue.event?ue.event(n):n)}finally{Pn=!1}}function gv(n){Pn=!0;try{return this.l[n.type+!0](ue.event?ue.event(n):n)}finally{Pn=!1}}function ci(n,i){this.props=n,this.context=i}function Za(n,i){if(i==null)return n.__?Za(n.__,n.__.__k.indexOf(n)+1):null;for(var e;i<n.__k.length;i++)if((e=n.__k[i])!=null&&e.__e!=null)return e.__e;return typeof n.type=="function"?Za(n):null}function Ry(n){var i,e;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,i=0;i<n.__k.length;i++)if((e=n.__k[i])!=null&&e.__e!=null){n.__e=n.__c.base=e.__e;break}return Ry(n)}}function $D(n){Pn?setTimeout(n):ky(n)}function vu(n){(!n.__d&&(n.__d=!0)&&Ms.push(n)&&!Ml.__r++||fv!==ue.debounceRendering)&&((fv=ue.debounceRendering)||$D)(Ml)}function Ml(){var n,i,e,t,r,s,a,o;for(Ms.sort(function(l,h){return l.__v.__b-h.__v.__b});n=Ms.shift();)n.__d&&(i=Ms.length,t=void 0,r=void 0,a=(s=(e=n).__v).__e,(o=e.__P)&&(t=[],(r=Zr({},s)).__v=s.__v+1,Cd(o,s,r,e.__n,o.ownerSVGElement!==void 0,s.__h!=null?[a]:null,t,a??Za(s),s.__h),Hy(t,s),s.__e!=a&&Ry(s)),Ms.length>i&&Ms.sort(function(l,h){return l.__v.__b-h.__v.__b}));Ml.__r=0}function Ny(n,i,e,t,r,s,a,o,l,h){var c,u,p,f,v,m,g,y=t&&t.__k||My,b=y.length;for(e.__k=[],c=0;c<i.length;c++)if((f=e.__k[c]=(f=i[c])==null||typeof f=="boolean"?null:typeof f=="string"||typeof f=="number"||typeof f=="bigint"?ll(null,f,null,null,f):Array.isArray(f)?ll(Ue,{children:f},null,null,null):f.__b>0?ll(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f)!=null){if(f.__=e,f.__b=e.__b+1,(p=y[c])===null||p&&f.key==p.key&&f.type===p.type)y[c]=void 0;else for(u=0;u<b;u++){if((p=y[u])&&f.key==p.key&&f.type===p.type){y[u]=void 0;break}p=null}Cd(n,f,p=p||kl,r,s,a,o,l,h),v=f.__e,(u=f.ref)&&p.ref!=u&&(g||(g=[]),p.ref&&g.push(p.ref,null,f),g.push(u,f.__c||v,f)),v!=null?(m==null&&(m=v),typeof f.type=="function"&&f.__k===p.__k?f.__d=l=Ly(f,l,n):l=Vy(n,f,p,y,v,l),typeof e.type=="function"&&(e.__d=l)):l&&p.__e==l&&l.parentNode!=n&&(l=Za(p))}for(e.__e=m,c=b;c--;)y[c]!=null&&(typeof e.type=="function"&&y[c].__e!=null&&y[c].__e==e.__d&&(e.__d=Py(t).nextSibling),Fy(y[c],y[c]));if(g)for(c=0;c<g.length;c++)By(g[c],g[++c],g[++c])}function Ly(n,i,e){for(var t,r=n.__k,s=0;r&&s<r.length;s++)(t=r[s])&&(t.__=n,i=typeof t.type=="function"?Ly(t,i,e):Vy(e,t,t,r,t.__e,i));return i}function Ol(n,i){return i=i||[],n==null||typeof n=="boolean"||(Array.isArray(n)?n.some(function(e){Ol(e,i)}):i.push(n)),i}function Vy(n,i,e,t,r,s){var a,o,l;if(i.__d!==void 0)a=i.__d,i.__d=void 0;else if(e==null||r!=s||r.parentNode==null)e:if(s==null||s.parentNode!==n)n.appendChild(r),a=null;else{for(o=s,l=0;(o=o.nextSibling)&&l<t.length;l+=1)if(o==r)break e;n.insertBefore(r,s),a=s}return a!==void 0?a:r.nextSibling}function Py(n){var i,e,t;if(n.type==null||typeof n.type=="string")return n.__e;if(n.__k){for(i=n.__k.length-1;i>=0;i--)if((e=n.__k[i])&&(t=Py(e)))return t}return null}function Cd(n,i,e,t,r,s,a,o,l){var h,c,u,p,f,v,m,g,y,b,E,w,A,D,N,x=i.type;if(i.constructor!==void 0)return null;e.__h!=null&&(l=e.__h,o=i.__e=e.__e,i.__h=null,s=[o]),(h=ue.__b)&&h(i);try{e:if(typeof x=="function"){if(g=i.props,y=(h=x.contextType)&&t[h.__c],b=h?y?y.props.value:h.__:t,e.__c?m=(c=i.__c=e.__c).__=c.__E:("prototype"in x&&x.prototype.render?i.__c=c=new x(g,b):(i.__c=c=new ci(g,b),c.constructor=x,c.render=QD),y&&y.sub(c),c.props=g,c.state||(c.state={}),c.context=b,c.__n=t,u=c.__d=!0,c.__h=[],c._sb=[]),c.__s==null&&(c.__s=c.state),x.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=Zr({},c.__s)),Zr(c.__s,x.getDerivedStateFromProps(g,c.__s))),p=c.props,f=c.state,c.__v=i,u)x.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(x.getDerivedStateFromProps==null&&g!==p&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(g,b),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(g,c.__s,b)===!1||i.__v===e.__v){for(i.__v!==e.__v&&(c.props=g,c.state=c.__s,c.__d=!1),i.__e=e.__e,i.__k=e.__k,i.__k.forEach(function(j){j&&(j.__=i)}),E=0;E<c._sb.length;E++)c.__h.push(c._sb[E]);c._sb=[],c.__h.length&&a.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(g,c.__s,b),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(p,f,v)})}if(c.context=b,c.props=g,c.__P=n,w=ue.__r,A=0,"prototype"in x&&x.prototype.render){for(c.state=c.__s,c.__d=!1,w&&w(i),h=c.render(c.props,c.state,c.context),D=0;D<c._sb.length;D++)c.__h.push(c._sb[D]);c._sb=[]}else do c.__d=!1,w&&w(i),h=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++A<25);c.state=c.__s,c.getChildContext!=null&&(t=Zr(Zr({},t),c.getChildContext())),u||c.getSnapshotBeforeUpdate==null||(v=c.getSnapshotBeforeUpdate(p,f)),N=h!=null&&h.type===Ue&&h.key==null?h.props.children:h,Ny(n,Array.isArray(N)?N:[N],i,e,t,r,s,a,o,l),c.base=i.__e,i.__h=null,c.__h.length&&a.push(c),m&&(c.__E=c.__=null),c.__e=!1}else s==null&&i.__v===e.__v?(i.__k=e.__k,i.__e=e.__e):i.__e=KD(e.__e,i,e,t,r,s,a,l);(h=ue.diffed)&&h(i)}catch(j){i.__v=null,(l||s!=null)&&(i.__e=o,i.__h=!!l,s[s.indexOf(o)]=null),ue.__e(j,i,e)}}function Hy(n,i){ue.__c&&ue.__c(i,n),n.some(function(e){try{n=e.__h,e.__h=[],n.some(function(t){t.call(e)})}catch(t){ue.__e(t,e.__v)}})}function KD(n,i,e,t,r,s,a,o){var l,h,c,u=e.props,p=i.props,f=i.type,v=0;if(f==="svg"&&(r=!0),s!=null){for(;v<s.length;v++)if((l=s[v])&&"setAttribute"in l==!!f&&(f?l.localName===f:l.nodeType===3)){n=l,s[v]=null;break}}if(n==null){if(f===null)return document.createTextNode(p);n=r?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,p.is&&p),s=null,o=!1}if(f===null)u===p||o&&n.data===p||(n.data=p);else{if(s=s&&lh.call(n.childNodes),h=(u=e.props||kl).dangerouslySetInnerHTML,c=p.dangerouslySetInnerHTML,!o){if(s!=null)for(u={},v=0;v<n.attributes.length;v++)u[n.attributes[v].name]=n.attributes[v].value;(c||h)&&(c&&(h&&c.__html==h.__html||c.__html===n.innerHTML)||(n.innerHTML=c&&c.__html||""))}if(GD(n,p,u,r,o),c)i.__k=[];else if(v=i.props.children,Ny(n,Array.isArray(v)?v:[v],i,e,t,r&&f!=="foreignObject",s,a,s?s[0]:e.__k&&Za(e,0),o),s!=null)for(v=s.length;v--;)s[v]!=null&&Oy(s[v]);o||("value"in p&&(v=p.value)!==void 0&&(v!==n.value||f==="progress"&&!v||f==="option"&&v!==u.value)&&Il(n,"value",v,u.value,!1),"checked"in p&&(v=p.checked)!==void 0&&v!==n.checked&&Il(n,"checked",v,u.checked,!1))}return n}function By(n,i,e){try{typeof n=="function"?n(i):n.current=i}catch(t){ue.__e(t,e)}}function Fy(n,i,e){var t,r;if(ue.unmount&&ue.unmount(n),(t=n.ref)&&(t.current&&t.current!==n.__e||By(t,null,i)),(t=n.__c)!=null){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(s){ue.__e(s,i)}t.base=t.__P=null,n.__c=void 0}if(t=n.__k)for(r=0;r<t.length;r++)t[r]&&Fy(t[r],i,e||typeof n.type!="function");e||n.__e==null||Oy(n.__e),n.__=n.__e=n.__d=void 0}function QD(n,i,e){return this.constructor(n,e)}function Ja(n,i,e){var t,r,s;ue.__&&ue.__(n,i),r=(t=!1)?null:i.__k,s=[],Cd(i,n=i.__k=k(Ue,null,[n]),r||kl,kl,i.ownerSVGElement!==void 0,r?null:i.firstChild?lh.call(i.childNodes):null,s,r?r.__e:i.firstChild,t),Hy(s,n)}function XD(n,i){var e={__c:i="__cC"+Iy++,__:n,Consumer:function(t,r){return t.children(r)},Provider:function(t){var r,s;return this.getChildContext||(r=[],(s={})[i]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&r.some(function(o){o.__e=!0,vu(o)})},this.sub=function(a){r.push(a);var o=a.componentWillUnmount;a.componentWillUnmount=function(){r.splice(r.indexOf(a),1),o&&o.call(a)}}),t.children}};return e.Provider.__=e.Consumer.contextType=e}lh=My.slice,ue={__e:function(n,i,e,t){for(var r,s,a;i=i.__;)if((r=i.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(n)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(n,t||{}),a=r.__d),a)return r.__E=r}catch(o){n=o}throw n}},Ay=0,xy=function(n){return n!=null&&n.constructor===void 0},Pn=!1,ci.prototype.setState=function(n,i){var e;e=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Zr({},this.state),typeof n=="function"&&(n=n(Zr({},e),this.props)),n&&Zr(e,n),n!=null&&this.__v&&(i&&this._sb.push(i),vu(this))},ci.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),vu(this))},ci.prototype.render=Ue,Ms=[],ky=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ml.__r=0,Iy=0;var Zi,vc,yv,Wy=[],mc=[],bv=ue.__b,Sv=ue.__r,Ev=ue.diffed,Cv=ue.__c,wv=ue.unmount;function ZD(){for(var n;n=Wy.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(hl),n.__H.__h.forEach(mu),n.__H.__h=[]}catch(i){n.__H.__h=[],ue.__e(i,n.__v)}}ue.__b=function(n){Zi=null,bv&&bv(n)},ue.__r=function(n){Sv&&Sv(n);var i=(Zi=n.__c).__H;i&&(vc===Zi?(i.__h=[],Zi.__h=[],i.__.forEach(function(e){e.__N&&(e.__=e.__N),e.__V=mc,e.__N=e.i=void 0})):(i.__h.forEach(hl),i.__h.forEach(mu),i.__h=[])),vc=Zi},ue.diffed=function(n){Ev&&Ev(n);var i=n.__c;i&&i.__H&&(i.__H.__h.length&&(Wy.push(i)!==1&&yv===ue.requestAnimationFrame||((yv=ue.requestAnimationFrame)||JD)(ZD)),i.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.__V!==mc&&(e.__=e.__V),e.i=void 0,e.__V=mc})),vc=Zi=null},ue.__c=function(n,i){i.some(function(e){try{e.__h.forEach(hl),e.__h=e.__h.filter(function(t){return!t.__||mu(t)})}catch(t){i.some(function(r){r.__h&&(r.__h=[])}),i=[],ue.__e(t,e.__v)}}),Cv&&Cv(n,i)},ue.unmount=function(n){wv&&wv(n);var i,e=n.__c;e&&e.__H&&(e.__H.__.forEach(function(t){try{hl(t)}catch(r){i=r}}),e.__H=void 0,i&&ue.__e(i,e.__v))};var Tv=typeof requestAnimationFrame=="function";function JD(n){var i,e=function(){clearTimeout(t),Tv&&cancelAnimationFrame(i),setTimeout(n)},t=setTimeout(e,100);Tv&&(i=requestAnimationFrame(e))}function hl(n){var i=Zi,e=n.__c;typeof e=="function"&&(n.__c=void 0,e()),Zi=i}function mu(n){var i=Zi;n.__c=n.__(),Zi=i}function eA(n,i){for(var e in i)n[e]=i[e];return n}function Dv(n,i){for(var e in n)if(e!=="__source"&&!(e in i))return!0;for(var t in i)if(t!=="__source"&&n[t]!==i[t])return!0;return!1}function Av(n){this.props=n}(Av.prototype=new ci).isPureReactComponent=!0,Av.prototype.shouldComponentUpdate=function(n,i){return Dv(this.props,n)||Dv(this.state,i)};var xv=ue.__b;ue.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),xv&&xv(n)};var tA=ue.__e;ue.__e=function(n,i,e,t){if(n.then){for(var r,s=i;s=s.__;)if((r=s.__c)&&r.__c)return i.__e==null&&(i.__e=e.__e,i.__k=e.__k),r.__c(n,i)}tA(n,i,e,t)};var kv=ue.unmount;function _y(n,i,e){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(t){typeof t.__c=="function"&&t.__c()}),n.__c.__H=null),(n=eA({},n)).__c!=null&&(n.__c.__P===e&&(n.__c.__P=i),n.__c=null),n.__k=n.__k&&n.__k.map(function(t){return _y(t,i,e)})),n}function qy(n,i,e){return n&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(t){return qy(t,i,e)}),n.__c&&n.__c.__P===i&&(n.__e&&e.insertBefore(n.__e,n.__d),n.__c.__e=!0,n.__c.__P=e)),n}function gc(){this.__u=0,this.t=null,this.__b=null}function zy(n){var i=n.__.__c;return i&&i.__a&&i.__a(n)}function Uo(){this.u=null,this.o=null}ue.unmount=function(n){var i=n.__c;i&&i.__R&&i.__R(),i&&n.__h===!0&&(n.type=null),kv&&kv(n)},(gc.prototype=new ci).__c=function(n,i){var e=i.__c,t=this;t.t==null&&(t.t=[]),t.t.push(e);var r=zy(t.__v),s=!1,a=function(){s||(s=!0,e.__R=null,r?r(o):o())};e.__R=a;var o=function(){if(!--t.__u){if(t.state.__a){var h=t.state.__a;t.__v.__k[0]=qy(h,h.__c.__P,h.__c.__O)}var c;for(t.setState({__a:t.__b=null});c=t.t.pop();)c.forceUpdate()}},l=i.__h===!0;t.__u++||l||t.setState({__a:t.__b=t.__v.__k[0]}),n.then(a,a)},gc.prototype.componentWillUnmount=function(){this.t=[]},gc.prototype.render=function(n,i){if(this.__b){if(this.__v.__k){var e=document.createElement("div"),t=this.__v.__k[0].__c;this.__v.__k[0]=_y(this.__b,e,t.__O=t.__P)}this.__b=null}var r=i.__a&&k(Ue,null,n.fallback);return r&&(r.__h=null),[k(Ue,null,i.__a?null:n.children),r]};var Iv=function(n,i,e){if(++e[1]===e[0]&&n.o.delete(i),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.o.size))for(e=n.u;e;){for(;e.length>3;)e.pop()();if(e[1]<e[0])break;n.u=e=e[2]}};function iA(n){return this.getChildContext=function(){return n.context},n.children}function rA(n){var i=this,e=n.i;i.componentWillUnmount=function(){Ja(null,i.l),i.l=null,i.i=null},i.i&&i.i!==e&&i.componentWillUnmount(),n.__v?(i.l||(i.i=e,i.l={nodeType:1,parentNode:e,childNodes:[],appendChild:function(t){this.childNodes.push(t),i.i.appendChild(t)},insertBefore:function(t,r){this.childNodes.push(t),i.i.appendChild(t)},removeChild:function(t){this.childNodes.splice(this.childNodes.indexOf(t)>>>1,1),i.i.removeChild(t)}}),Ja(k(iA,{context:i.context},n.__v),i.l)):i.l&&i.componentWillUnmount()}function sA(n,i){var e=k(rA,{__v:n,i});return e.containerInfo=i,e}(Uo.prototype=new ci).__a=function(n){var i=this,e=zy(i.__v),t=i.o.get(n);return t[0]++,function(r){var s=function(){i.props.revealOrder?(t.push(r),Iv(i,n,t)):r()};e?e(s):s()}},Uo.prototype.render=function(n){this.u=null,this.o=new Map;var i=Ol(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&i.reverse();for(var e=i.length;e--;)this.o.set(i[e],this.u=[1,0,this.u]);return n.children},Uo.prototype.componentDidUpdate=Uo.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(i,e){Iv(n,e,i)})};var nA=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,aA=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,oA=typeof document<"u",lA=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(n)};ci.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(ci.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(i){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:i})}})});var Mv=ue.event;function hA(){}function cA(){return this.cancelBubble}function uA(){return this.defaultPrevented}ue.event=function(n){return Mv&&(n=Mv(n)),n.persist=hA,n.isPropagationStopped=cA,n.isDefaultPrevented=uA,n.nativeEvent=n};var Ov={configurable:!0,get:function(){return this.class}},Rv=ue.vnode;ue.vnode=function(n){var i=n.type,e=n.props,t=e;if(typeof i=="string"){var r=i.indexOf("-")===-1;for(var s in t={},e){var a=e[s];oA&&s==="children"&&i==="noscript"||s==="value"&&"defaultValue"in e&&a==null||(s==="defaultValue"&&"value"in e&&e.value==null?s="value":s==="download"&&a===!0?a="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+i)&&!lA(e.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(s)?s=s.toLowerCase():r&&aA.test(s)?s=s.replace(/[A-Z0-9]/g,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput$/i.test(s)&&(s=s.toLowerCase(),t[s]&&(s="oninputCapture")),t[s]=a)}i=="select"&&t.multiple&&Array.isArray(t.value)&&(t.value=Ol(e.children).forEach(function(o){o.props.selected=t.value.indexOf(o.props.value)!=-1})),i=="select"&&t.defaultValue!=null&&(t.value=Ol(e.children).forEach(function(o){o.props.selected=t.multiple?t.defaultValue.indexOf(o.props.value)!=-1:t.defaultValue==o.props.value})),n.props=t,e.class!=e.className&&(Ov.enumerable="className"in e,e.className!=null&&(t.class=e.className),Object.defineProperty(t,"className",Ov))}n.$$typeof=nA,Rv&&Rv(n)};var Nv=ue.__r;ue.__r=function(n){Nv&&Nv(n),n.__c};const jy=[],gu=new Map;function wd(n){jy.push(n),gu.forEach(i=>{Yy(i,n)})}function dA(n){n.isConnected&&n.getRootNode&&Uy(n.getRootNode())}function Uy(n){let i=gu.get(n);if(!i||!i.isConnected){if(i=n.querySelector("style[data-fullcalendar]"),!i){i=document.createElement("style"),i.setAttribute("data-fullcalendar","");const e=fA();e&&(i.nonce=e);const t=n===document?document.head:n,r=n===document?t.querySelector("script,link[rel=stylesheet],link[as=style],style"):t.firstChild;t.insertBefore(i,r)}gu.set(n,i),pA(i)}}function pA(n){for(const i of jy)Yy(n,i)}function Yy(n,i){const{sheet:e}=n,t=e.cssRules.length;i.split("}").forEach((r,s)=>{r=r.trim(),r&&e.insertRule(r+"}",t+s)})}let yc;function fA(){return yc===void 0&&(yc=vA()),yc}function vA(){const n=document.querySelector('meta[name="csp-nonce"]');if(n&&n.hasAttribute("content"))return n.getAttribute("content");const i=document.querySelector("script[nonce]");return i&&i.nonce||""}typeof document<"u"&&Uy(document);var mA=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';wd(mA);class Td{constructor(i){this.drainedOption=i,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(i){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),i==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),i))}pause(i=""){let{pauseDepths:e}=this;e[i]=(e[i]||0)+1,this.clearTimeout()}resume(i="",e){let{pauseDepths:t}=this;i in t&&(e?delete t[i]:(t[i]-=1,t[i]<=0&&delete t[i]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function Dd(n){n.parentNode&&n.parentNode.removeChild(n)}function Ht(n,i){if(n.closest)return n.closest(i);if(!document.documentElement.contains(n))return null;do{if(gA(n,i))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null}function gA(n,i){return(n.matches||n.matchesSelector||n.msMatchesSelector).call(n,i)}function yA(n,i){let e=n instanceof HTMLElement?[n]:n,t=[];for(let r=0;r<e.length;r+=1){let s=e[r].querySelectorAll(i);for(let a=0;a<s.length;a+=1)t.push(s[a])}return t}const bA=/(top|left|right|bottom|width|height)$/i;function _a(n,i){for(let e in i)Gy(n,e,i[e])}function Gy(n,i,e){e==null?n.style[i]="":typeof e=="number"&&bA.test(i)?n.style[i]=`${e}px`:n.style[i]=e}function $y(n){var i,e;return(e=(i=n.composedPath)===null||i===void 0?void 0:i.call(n)[0])!==null&&e!==void 0?e:n.target}let Lv=0;function hh(){return Lv+=1,"fc-dom-"+Lv}function ch(n){n.preventDefault()}function SA(n,i){return e=>{let t=Ht(e.target,n);t&&i.call(t,e,t)}}function Ky(n,i,e,t){let r=SA(e,t);return n.addEventListener(i,r),()=>{n.removeEventListener(i,r)}}function EA(n,i,e,t){let r;return Ky(n,"mouseover",i,(s,a)=>{if(a!==r){r=a,e(s,a);let o=l=>{r=null,t(l,a),a.removeEventListener("mouseleave",o)};a.addEventListener("mouseleave",o)}})}const Vv=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function CA(n,i){let e=t=>{i(t),Vv.forEach(r=>{n.removeEventListener(r,e)})};Vv.forEach(t=>{n.addEventListener(t,e)})}function Qy(n){return Object.assign({onClick:n},Xy(n))}function Xy(n){return{tabIndex:0,onKeyDown(i){(i.key==="Enter"||i.key===" ")&&(n(i),i.preventDefault())}}}let Pv=0;function Qs(){return Pv+=1,String(Pv)}function Ad(){document.body.classList.add("fc-not-allowed")}function xd(){document.body.classList.remove("fc-not-allowed")}function wA(n){n.style.userSelect="none",n.style.webkitUserSelect="none",n.addEventListener("selectstart",ch)}function TA(n){n.style.userSelect="",n.style.webkitUserSelect="",n.removeEventListener("selectstart",ch)}function DA(n){n.addEventListener("contextmenu",ch)}function AA(n){n.removeEventListener("contextmenu",ch)}function xA(n){let i=[],e=[],t,r;for(typeof n=="string"?e=n.split(/\s*,\s*/):typeof n=="function"?e=[n]:Array.isArray(n)&&(e=n),t=0;t<e.length;t+=1)r=e[t],typeof r=="string"?i.push(r.charAt(0)==="-"?{field:r.substring(1),order:-1}:{field:r,order:1}):typeof r=="function"&&i.push({func:r});return i}function kA(n,i,e){let t,r;for(t=0;t<e.length;t+=1)if(r=IA(n,i,e[t]),r)return r;return 0}function IA(n,i,e){return e.func?e.func(n,i):MA(n[e.field],i[e.field])*(e.order||1)}function MA(n,i){return!n&&!i?0:i==null?-1:n==null?1:typeof n=="string"||typeof i=="string"?String(n).localeCompare(String(i)):n-i}function kn(n,i){let e=String(n);return"000".substr(0,i-e.length)+e}function qa(n,i,e){return typeof n=="function"?n(...i):typeof n=="string"?i.reduce((t,r,s)=>t.replace("$"+s,r||""),n):e}function OA(n,i){return n-i}function cl(n){return n%1===0}function RA(n){let i=n.querySelector(".fc-scrollgrid-shrink-frame"),e=n.querySelector(".fc-scrollgrid-shrink-cushion");if(!i)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!e)throw new Error("needs fc-scrollgrid-shrink-cushion className");return n.getBoundingClientRect().width-i.getBoundingClientRect().width+e.getBoundingClientRect().width}const Hv=["years","months","days","milliseconds"],NA=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function De(n,i){return typeof n=="string"?LA(n):typeof n=="object"&&n?Bv(n):typeof n=="number"?Bv({[i||"milliseconds"]:n}):null}function LA(n){let i=NA.exec(n);if(i){let e=i[1]?-1:1;return{years:0,months:0,days:e*(i[2]?parseInt(i[2],10):0),milliseconds:e*((i[3]?parseInt(i[3],10):0)*60*60*1e3+(i[4]?parseInt(i[4],10):0)*60*1e3+(i[5]?parseInt(i[5],10):0)*1e3+(i[6]?parseInt(i[6],10):0))}}return null}function Bv(n){let i={years:n.years||n.year||0,months:n.months||n.month||0,days:n.days||n.day||0,milliseconds:(n.hours||n.hour||0)*60*60*1e3+(n.minutes||n.minute||0)*60*1e3+(n.seconds||n.second||0)*1e3+(n.milliseconds||n.millisecond||n.ms||0)},e=n.weeks||n.week;return e&&(i.days+=e*7,i.specifiedWeeks=!0),i}function VA(n,i){return n.years===i.years&&n.months===i.months&&n.days===i.days&&n.milliseconds===i.milliseconds}function yu(n,i){return{years:n.years+i.years,months:n.months+i.months,days:n.days+i.days,milliseconds:n.milliseconds+i.milliseconds}}function PA(n,i){return{years:n.years-i.years,months:n.months-i.months,days:n.days-i.days,milliseconds:n.milliseconds-i.milliseconds}}function HA(n,i){return{years:n.years*i,months:n.months*i,days:n.days*i,milliseconds:n.milliseconds*i}}function BA(n){return In(n)/365}function FA(n){return In(n)/30}function In(n){return Vi(n)/864e5}function Vi(n){return n.years*(365*864e5)+n.months*(30*864e5)+n.days*864e5+n.milliseconds}function kd(n,i){let e=null;for(let t=0;t<Hv.length;t+=1){let r=Hv[t];if(i[r]){let s=n[r]/i[r];if(!cl(s)||e!==null&&e!==s)return null;e=s}else if(n[r])return null}return e}function bu(n){let i=n.milliseconds;if(i){if(i%1e3!==0)return{unit:"millisecond",value:i};if(i%(1e3*60)!==0)return{unit:"second",value:i/1e3};if(i%(1e3*60*60)!==0)return{unit:"minute",value:i/(1e3*60)};if(i)return{unit:"hour",value:i/(1e3*60*60)}}return n.days?n.specifiedWeeks&&n.days%7===0?{unit:"week",value:n.days/7}:{unit:"day",value:n.days}:n.months?{unit:"month",value:n.months}:n.years?{unit:"year",value:n.years}:{unit:"millisecond",value:0}}function ss(n,i,e){if(n===i)return!0;let t=n.length,r;if(t!==i.length)return!1;for(r=0;r<t;r+=1)if(!(e?e(n[r],i[r]):n[r]===i[r]))return!1;return!0}const WA=["sun","mon","tue","wed","thu","fri","sat"];function Fv(n,i){let e=Jr(n);return e[2]+=i*7,ri(e)}function xt(n,i){let e=Jr(n);return e[2]+=i,ri(e)}function ns(n,i){let e=Jr(n);return e[6]+=i,ri(e)}function _A(n,i){return Xs(n,i)/7}function Xs(n,i){return(i.valueOf()-n.valueOf())/(1e3*60*60*24)}function qA(n,i){return(i.valueOf()-n.valueOf())/(1e3*60*60)}function zA(n,i){return(i.valueOf()-n.valueOf())/(1e3*60)}function jA(n,i){return(i.valueOf()-n.valueOf())/1e3}function UA(n,i){let e=Ye(n),t=Ye(i);return{years:0,months:0,days:Math.round(Xs(e,t)),milliseconds:i.valueOf()-t.valueOf()-(n.valueOf()-e.valueOf())}}function YA(n,i){let e=Rl(n,i);return e!==null&&e%7===0?e/7:null}function Rl(n,i){return es(n)===es(i)?Math.round(Xs(n,i)):null}function Ye(n){return ri([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()])}function GA(n){return ri([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()])}function $A(n){return ri([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()])}function KA(n){return ri([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()])}function QA(n,i,e){let t=n.getUTCFullYear(),r=bc(n,t,i,e);if(r<1)return bc(n,t-1,i,e);let s=bc(n,t+1,i,e);return s>=1?Math.min(r,s):r}function bc(n,i,e,t){let r=ri([i,0,1+XA(i,e,t)]),s=Ye(n),a=Math.round(Xs(r,s));return Math.floor(a/7)+1}function XA(n,i,e){let t=7+i-e;return-((7+ri([n,0,t]).getUTCDay()-i)%7)+t-1}function Wv(n){return[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()]}function _v(n){return new Date(n[0],n[1]||0,n[2]==null?1:n[2],n[3]||0,n[4]||0,n[5]||0)}function Jr(n){return[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]}function ri(n){return n.length===1&&(n=n.concat([0])),new Date(Date.UTC(...n))}function Zy(n){return!isNaN(n.valueOf())}function es(n){return n.getUTCHours()*1e3*60*60+n.getUTCMinutes()*1e3*60+n.getUTCSeconds()*1e3+n.getUTCMilliseconds()}function Jy(n,i,e=!1){let t=n.toISOString();return t=t.replace(".000",""),e&&(t=t.replace("T00:00:00Z","")),t.length>10&&(i==null?t=t.replace("Z",""):i!==0&&(t=t.replace("Z",Md(i,!0)))),t}function Id(n){return n.toISOString().replace(/T.*$/,"")}function ZA(n){return n.toISOString().match(/^\d{4}-\d{2}/)[0]}function JA(n){return kn(n.getUTCHours(),2)+":"+kn(n.getUTCMinutes(),2)+":"+kn(n.getUTCSeconds(),2)}function Md(n,i=!1){let e=n<0?"-":"+",t=Math.abs(n),r=Math.floor(t/60),s=Math.round(t%60);return i?`${e+kn(r,2)}:${kn(s,2)}`:`GMT${e}${r}${s?`:${kn(s,2)}`:""}`}function pe(n,i,e){let t,r;return function(...s){if(!t)r=n.apply(this,s);else if(!ss(t,s)){let a=n.apply(this,s);(!i||!i(a,r))&&(r=a)}return t=s,r}}function ul(n,i,e){let t,r;return s=>(t?Bi(t,s)||(r=n.call(this,s)):r=n.call(this,s),t=s,r)}const Sc={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},Nl={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Yo=/\s*([ap])\.?m\.?/i,ex=/,/g,tx=/\s+/g,ix=/\u200e/g,rx=/UTC|GMT/;class sx{constructor(i){let e={},t={},r=9;for(let s in i)s in Sc?(t[s]=i[s],Sc[s]<9&&(r=Math.min(Sc[s],r))):(e[s]=i[s],s in Nl&&(r=Math.min(Nl[s],r)));this.standardDateProps=e,this.extendedSettings=t,this.smallestUnitNum=r,this.buildFormattingFunc=pe(qv)}format(i,e){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,e)(i)}formatRange(i,e,t,r){let{standardDateProps:s,extendedSettings:a}=this,o=cx(i.marker,e.marker,t.calendarSystem);if(!o)return this.format(i,t);let l=o;l>1&&(s.year==="numeric"||s.year==="2-digit")&&(s.month==="numeric"||s.month==="2-digit")&&(s.day==="numeric"||s.day==="2-digit")&&(l=1);let h=this.format(i,t),c=this.format(e,t);if(h===c)return h;let u=ux(s,l),p=qv(u,a,t),f=p(i),v=p(e),m=dx(h,f,c,v),g=a.separator||r||t.defaultSeparator||"";return m?m.before+f+g+v+m.after:h+g+c}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function qv(n,i,e){let t=Object.keys(n).length;return t===1&&n.timeZoneName==="short"?r=>Md(r.timeZoneOffset):t===0&&i.week?r=>hx(e.computeWeekNumber(r.marker),e.weekText,e.weekTextLong,e.locale,i.week):nx(n,i,e)}function nx(n,i,e){n=Object.assign({},n),i=Object.assign({},i),ax(n,i),n.timeZone="UTC";let t=new Intl.DateTimeFormat(e.locale.codes,n),r;if(i.omitZeroMinute){let s=Object.assign({},n);delete s.minute,r=new Intl.DateTimeFormat(e.locale.codes,s)}return s=>{let{marker:a}=s,o;r&&!a.getUTCMinutes()?o=r:o=t;let l=o.format(a);return ox(l,s,n,i,e)}}function ax(n,i){n.timeZoneName&&(n.hour||(n.hour="2-digit"),n.minute||(n.minute="2-digit")),n.timeZoneName==="long"&&(n.timeZoneName="short"),i.omitZeroMinute&&(n.second||n.millisecond)&&delete i.omitZeroMinute}function ox(n,i,e,t,r){return n=n.replace(ix,""),e.timeZoneName==="short"&&(n=lx(n,r.timeZone==="UTC"||i.timeZoneOffset==null?"UTC":Md(i.timeZoneOffset))),t.omitCommas&&(n=n.replace(ex,"").trim()),t.omitZeroMinute&&(n=n.replace(":00","")),t.meridiem===!1?n=n.replace(Yo,"").trim():t.meridiem==="narrow"?n=n.replace(Yo,(s,a)=>a.toLocaleLowerCase()):t.meridiem==="short"?n=n.replace(Yo,(s,a)=>`${a.toLocaleLowerCase()}m`):t.meridiem==="lowercase"&&(n=n.replace(Yo,s=>s.toLocaleLowerCase())),n=n.replace(tx," "),n=n.trim(),n}function lx(n,i){let e=!1;return n=n.replace(rx,()=>(e=!0,i)),e||(n+=` ${i}`),n}function hx(n,i,e,t,r){let s=[];return r==="long"?s.push(e):(r==="short"||r==="narrow")&&s.push(i),(r==="long"||r==="short")&&s.push(" "),s.push(t.simpleNumberFormat.format(n)),t.options.direction==="rtl"&&s.reverse(),s.join("")}function cx(n,i,e){return e.getMarkerYear(n)!==e.getMarkerYear(i)?5:e.getMarkerMonth(n)!==e.getMarkerMonth(i)?4:e.getMarkerDay(n)!==e.getMarkerDay(i)?2:es(n)!==es(i)?1:0}function ux(n,i){let e={};for(let t in n)(!(t in Nl)||Nl[t]<=i)&&(e[t]=n[t]);return e}function dx(n,i,e,t){let r=0;for(;r<n.length;){let s=n.indexOf(i,r);if(s===-1)break;let a=n.substr(0,s);r=s+i.length;let o=n.substr(r),l=0;for(;l<e.length;){let h=e.indexOf(t,l);if(h===-1)break;let c=e.substr(0,h);l=h+t.length;let u=e.substr(l);if(a===c&&o===u)return{before:a,after:o}}}return null}function zv(n,i){let e=i.markerToArray(n.marker);return{marker:n.marker,timeZoneOffset:n.timeZoneOffset,array:e,year:e[0],month:e[1],day:e[2],hour:e[3],minute:e[4],second:e[5],millisecond:e[6]}}function Ll(n,i,e,t){let r=zv(n,e.calendarSystem),s=i?zv(i,e.calendarSystem):null;return{date:r,start:r,end:s,timeZone:e.timeZone,localeCodes:e.locale.codes,defaultSeparator:t||e.defaultSeparator}}class px{constructor(i){this.cmdStr=i}format(i,e,t){return e.cmdFormatter(this.cmdStr,Ll(i,null,e,t))}formatRange(i,e,t,r){return t.cmdFormatter(this.cmdStr,Ll(i,e,t,r))}}class fx{constructor(i){this.func=i}format(i,e,t){return this.func(Ll(i,null,e,t))}formatRange(i,e,t,r){return this.func(Ll(i,e,t,r))}}function tt(n){return typeof n=="object"&&n?new sx(n):typeof n=="string"?new px(n):typeof n=="function"?new fx(n):null}const jv={navLinkDayClick:B,navLinkWeekClick:B,duration:De,bootstrapFontAwesome:B,buttonIcons:B,customButtons:B,defaultAllDayEventDuration:De,defaultTimedEventDuration:De,nextDayThreshold:De,scrollTime:De,scrollTimeReset:Boolean,slotMinTime:De,slotMaxTime:De,dayPopoverFormat:tt,slotDuration:De,snapDuration:De,headerToolbar:B,footerToolbar:B,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:tt,dayHeaderClassNames:B,dayHeaderContent:B,dayHeaderDidMount:B,dayHeaderWillUnmount:B,dayCellClassNames:B,dayCellContent:B,dayCellDidMount:B,dayCellWillUnmount:B,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:B,weekNumbers:Boolean,weekNumberClassNames:B,weekNumberContent:B,weekNumberDidMount:B,weekNumberWillUnmount:B,editable:Boolean,viewClassNames:B,viewDidMount:B,viewWillUnmount:B,nowIndicator:Boolean,nowIndicatorSnap:B,nowIndicatorClassNames:B,nowIndicatorContent:B,nowIndicatorDidMount:B,nowIndicatorWillUnmount:B,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:B,locale:B,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:B,eventOrder:xA,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:B,contentHeight:B,direction:String,weekNumberFormat:tt,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:B,initialDate:B,now:B,eventDataTransform:B,stickyHeaderDates:B,stickyFooterScrollbar:B,viewHeight:B,defaultAllDay:Boolean,eventSourceFailure:B,eventSourceSuccess:B,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:B,eventConstraint:B,eventAllow:B,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:B,eventContent:B,eventDidMount:B,eventWillUnmount:B,selectConstraint:B,selectOverlap:B,selectAllow:B,droppable:Boolean,unselectCancel:String,slotLabelFormat:B,slotLaneClassNames:B,slotLaneContent:B,slotLaneDidMount:B,slotLaneWillUnmount:B,slotLabelClassNames:B,slotLabelContent:B,slotLabelDidMount:B,slotLabelWillUnmount:B,dayMaxEvents:B,dayMaxEventRows:B,dayMinWidth:Number,slotLabelInterval:De,allDayText:String,allDayClassNames:B,allDayContent:B,allDayDidMount:B,allDayWillUnmount:B,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:tt,rerenderDelay:Number,moreLinkText:B,moreLinkHint:B,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:B,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:De,hiddenDays:B,fixedWeekCount:Boolean,validRange:B,visibleRange:B,titleFormat:B,eventInteractive:Boolean,noEventsText:String,viewHint:B,navLinkHint:B,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:B,moreLinkClassNames:B,moreLinkContent:B,moreLinkDidMount:B,moreLinkWillUnmount:B,monthStartFormat:tt,handleCustomRendering:B,customRenderingMetaMap:B,customRenderingReplaces:Boolean},za={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},Uv={datesSet:B,eventsSet:B,eventAdd:B,eventChange:B,eventRemove:B,windowResize:B,eventClick:B,eventMouseEnter:B,eventMouseLeave:B,select:B,unselect:B,loading:B,_unmount:B,_beforeprint:B,_afterprint:B,_noEventDrop:B,_noEventResize:B,_resize:B,_scrollRequest:B},Yv={buttonText:B,buttonHints:B,views:B,plugins:B,initialEvents:B,events:B,eventSources:B},As={headerToolbar:xs,footerToolbar:xs,buttonText:xs,buttonHints:xs,buttonIcons:xs,dateIncrement:xs,plugins:Go,events:Go,eventSources:Go,resources:Go};function xs(n,i){return typeof n=="object"&&typeof i=="object"&&n&&i?Bi(n,i):n===i}function Go(n,i){return Array.isArray(n)&&Array.isArray(i)?ss(n,i):n===i}const vx={type:String,component:B,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:B,usesMinMaxTime:Boolean,classNames:B,content:B,didMount:B,willUnmount:B};function Ec(n){return Rd(n,As)}function Od(n,i){let e={},t={};for(let r in i)r in n&&(e[r]=i[r](n[r]));for(let r in n)r in i||(t[r]=n[r]);return{refined:e,extra:t}}function B(n){return n}const{hasOwnProperty:Vl}=Object.prototype;function Rd(n,i){let e={};if(i){for(let t in i)if(i[t]===xs){let r=[];for(let s=n.length-1;s>=0;s-=1){let a=n[s][t];if(typeof a=="object"&&a)r.unshift(a);else if(a!==void 0){e[t]=a;break}}r.length&&(e[t]=Rd(r))}}for(let t=n.length-1;t>=0;t-=1){let r=n[t];for(let s in r)s in e||(e[s]=r[s])}return e}function Us(n,i){let e={};for(let t in n)i(n[t],t)&&(e[t]=n[t]);return e}function kr(n,i){let e={};for(let t in n)e[t]=i(n[t],t);return e}function e0(n){let i={};for(let e of n)i[e]=!0;return i}function Nd(n){let i=[];for(let e in n)i.push(n[e]);return i}function Bi(n,i){if(n===i)return!0;for(let e in n)if(Vl.call(n,e)&&!(e in i))return!1;for(let e in i)if(Vl.call(i,e)&&n[e]!==i[e])return!1;return!0}const mx=/^on[A-Z]/;function gx(n,i){const e=yx(n,i);for(let t of e)if(!mx.test(t))return!1;return!0}function yx(n,i){let e=[];for(let t in n)Vl.call(n,t)&&(t in i||e.push(t));for(let t in i)Vl.call(i,t)&&n[t]!==i[t]&&e.push(t);return e}function Cc(n,i,e={}){if(n===i)return!0;for(let t in i)if(!(t in n&&bx(n[t],i[t],e[t])))return!1;for(let t in n)if(!(t in i))return!1;return!0}function bx(n,i,e){return n===i||e===!0?!0:e?e(n,i):!1}function Sx(n,i=0,e,t=1){let r=[];e==null&&(e=Object.keys(n).length);for(let s=i;s<e;s+=t){let a=n[s];a!==void 0&&r.push(a)}return r}let t0={};function Ex(n,i){t0[n]=i}function Cx(n){return new t0[n]}class wx{getMarkerYear(i){return i.getUTCFullYear()}getMarkerMonth(i){return i.getUTCMonth()}getMarkerDay(i){return i.getUTCDate()}arrayToMarker(i){return ri(i)}markerToArray(i){return Jr(i)}}Ex("gregory",wx);const Tx=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function Dx(n){let i=Tx.exec(n);if(i){let e=new Date(Date.UTC(Number(i[1]),i[3]?Number(i[3])-1:0,Number(i[5]||1),Number(i[7]||0),Number(i[8]||0),Number(i[10]||0),i[12]?+`0.${i[12]}`*1e3:0));if(Zy(e)){let t=null;return i[13]&&(t=(i[15]==="-"?-1:1)*(Number(i[16]||0)*60+Number(i[18]||0))),{marker:e,isTimeUnspecified:!i[6],timeZoneOffset:t}}}return null}class Ax{constructor(i){let e=this.timeZone=i.timeZone,t=e!=="local"&&e!=="UTC";i.namedTimeZoneImpl&&t&&(this.namedTimeZoneImpl=new i.namedTimeZoneImpl(e)),this.canComputeOffset=!!(!t||this.namedTimeZoneImpl),this.calendarSystem=Cx(i.calendarSystem),this.locale=i.locale,this.weekDow=i.locale.week.dow,this.weekDoy=i.locale.week.doy,i.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof i.firstDay=="number"&&(this.weekDow=i.firstDay),typeof i.weekNumberCalculation=="function"&&(this.weekNumberFunc=i.weekNumberCalculation),this.weekText=i.weekText!=null?i.weekText:i.locale.options.weekText,this.weekTextLong=(i.weekTextLong!=null?i.weekTextLong:i.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=i.cmdFormatter,this.defaultSeparator=i.defaultSeparator}createMarker(i){let e=this.createMarkerMeta(i);return e===null?null:e.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):ri(Wv(new Date))}createMarkerMeta(i){if(typeof i=="string")return this.parse(i);let e=null;return typeof i=="number"?e=this.timestampToMarker(i):i instanceof Date?(i=i.valueOf(),isNaN(i)||(e=this.timestampToMarker(i))):Array.isArray(i)&&(e=ri(i)),e===null||!Zy(e)?null:{marker:e,isTimeUnspecified:!1,forcedTzo:null}}parse(i){let e=Dx(i);if(e===null)return null;let{marker:t}=e,r=null;return e.timeZoneOffset!==null&&(this.canComputeOffset?t=this.timestampToMarker(t.valueOf()-e.timeZoneOffset*60*1e3):r=e.timeZoneOffset),{marker:t,isTimeUnspecified:e.isTimeUnspecified,forcedTzo:r}}getYear(i){return this.calendarSystem.getMarkerYear(i)}getMonth(i){return this.calendarSystem.getMarkerMonth(i)}getDay(i){return this.calendarSystem.getMarkerDay(i)}add(i,e){let t=this.calendarSystem.markerToArray(i);return t[0]+=e.years,t[1]+=e.months,t[2]+=e.days,t[6]+=e.milliseconds,this.calendarSystem.arrayToMarker(t)}subtract(i,e){let t=this.calendarSystem.markerToArray(i);return t[0]-=e.years,t[1]-=e.months,t[2]-=e.days,t[6]-=e.milliseconds,this.calendarSystem.arrayToMarker(t)}addYears(i,e){let t=this.calendarSystem.markerToArray(i);return t[0]+=e,this.calendarSystem.arrayToMarker(t)}addMonths(i,e){let t=this.calendarSystem.markerToArray(i);return t[1]+=e,this.calendarSystem.arrayToMarker(t)}diffWholeYears(i,e){let{calendarSystem:t}=this;return es(i)===es(e)&&t.getMarkerDay(i)===t.getMarkerDay(e)&&t.getMarkerMonth(i)===t.getMarkerMonth(e)?t.getMarkerYear(e)-t.getMarkerYear(i):null}diffWholeMonths(i,e){let{calendarSystem:t}=this;return es(i)===es(e)&&t.getMarkerDay(i)===t.getMarkerDay(e)?t.getMarkerMonth(e)-t.getMarkerMonth(i)+(t.getMarkerYear(e)-t.getMarkerYear(i))*12:null}greatestWholeUnit(i,e){let t=this.diffWholeYears(i,e);return t!==null?{unit:"year",value:t}:(t=this.diffWholeMonths(i,e),t!==null?{unit:"month",value:t}:(t=YA(i,e),t!==null?{unit:"week",value:t}:(t=Rl(i,e),t!==null?{unit:"day",value:t}:(t=qA(i,e),cl(t)?{unit:"hour",value:t}:(t=zA(i,e),cl(t)?{unit:"minute",value:t}:(t=jA(i,e),cl(t)?{unit:"second",value:t}:{unit:"millisecond",value:e.valueOf()-i.valueOf()}))))))}countDurationsBetween(i,e,t){let r;return t.years&&(r=this.diffWholeYears(i,e),r!==null)?r/BA(t):t.months&&(r=this.diffWholeMonths(i,e),r!==null)?r/FA(t):t.days&&(r=Rl(i,e),r!==null)?r/In(t):(e.valueOf()-i.valueOf())/Vi(t)}startOf(i,e){return e==="year"?this.startOfYear(i):e==="month"?this.startOfMonth(i):e==="week"?this.startOfWeek(i):e==="day"?Ye(i):e==="hour"?GA(i):e==="minute"?$A(i):e==="second"?KA(i):null}startOfYear(i){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(i)])}startOfMonth(i){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(i),this.calendarSystem.getMarkerMonth(i)])}startOfWeek(i){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(i),this.calendarSystem.getMarkerMonth(i),i.getUTCDate()-(i.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(i){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(i)):QA(i,this.weekDow,this.weekDoy)}format(i,e,t={}){return e.format({marker:i,timeZoneOffset:t.forcedTzo!=null?t.forcedTzo:this.offsetForMarker(i)},this)}formatRange(i,e,t,r={}){return r.isEndExclusive&&(e=ns(e,-1)),t.formatRange({marker:i,timeZoneOffset:r.forcedStartTzo!=null?r.forcedStartTzo:this.offsetForMarker(i)},{marker:e,timeZoneOffset:r.forcedEndTzo!=null?r.forcedEndTzo:this.offsetForMarker(e)},this,r.defaultSeparator)}formatIso(i,e={}){let t=null;return e.omitTimeZoneOffset||(e.forcedTzo!=null?t=e.forcedTzo:t=this.offsetForMarker(i)),Jy(i,t,e.omitTime)}timestampToMarker(i){return this.timeZone==="local"?ri(Wv(new Date(i))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(i):ri(this.namedTimeZoneImpl.timestampToArray(i))}offsetForMarker(i){return this.timeZone==="local"?-_v(Jr(i)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Jr(i)):null}toDate(i,e){return this.timeZone==="local"?_v(Jr(i)):this.timeZone==="UTC"?new Date(i.valueOf()):this.namedTimeZoneImpl?new Date(i.valueOf()-this.namedTimeZoneImpl.offsetForArray(Jr(i))*1e3*60):new Date(i.valueOf()-(e||0))}}class ho{constructor(i){this.iconOverrideOption&&this.setIconOverride(i[this.iconOverrideOption])}setIconOverride(i){let e,t;if(typeof i=="object"&&i){e=Object.assign({},this.iconClasses);for(t in i)e[t]=this.applyIconOverridePrefix(i[t]);this.iconClasses=e}else i===!1&&(this.iconClasses={})}applyIconOverridePrefix(i){let e=this.iconOverridePrefix;return e&&i.indexOf(e)!==0&&(i=e+i),i}getClass(i){return this.classes[i]||""}getIconClass(i,e){let t;return e&&this.rtlIconClasses?t=this.rtlIconClasses[i]||this.iconClasses[i]:t=this.iconClasses[i],t?`${this.baseIconClass} ${t}`:""}getCustomButtonIconClass(i){let e;return this.iconOverrideCustomButtonOption&&(e=i[this.iconOverrideCustomButtonOption],e)?`${this.baseIconClass} ${this.applyIconOverridePrefix(e)}`:""}}ho.prototype.classes={};ho.prototype.iconClasses={};ho.prototype.baseIconClass="";ho.prototype.iconOverridePrefix="";function Pl(n){n();let i=ue.debounceRendering,e=[];function t(r){e.push(r)}for(ue.debounceRendering=t,Ja(k(xx,{}),document.createElement("div"));e.length;)e.shift()();ue.debounceRendering=i}class xx extends ci{render(){return k("div",{})}componentDidMount(){this.setState({})}}function i0(n){let i=XD(n),e=i.Provider;return i.Provider=function(){let t=!this.getChildContext,r=e.apply(this,arguments);if(t){let s=[];this.shouldComponentUpdate=a=>{this.props.value!==a.value&&s.forEach(o=>{o.context=a.value,o.forceUpdate()})},this.sub=a=>{s.push(a);let o=a.componentWillUnmount;a.componentWillUnmount=()=>{s.splice(s.indexOf(a),1),o&&o.call(a)}}}return r},i}class kx{constructor(i,e,t,r){this.execFunc=i,this.emitter=e,this.scrollTime=t,this.scrollTimeReset=r,this.handleScrollRequest=s=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},s),this.drain()},e.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(i){i&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Rr=i0({});function Ix(n,i,e,t,r,s,a,o,l,h,c,u,p,f){return{dateEnv:r,nowManager:s,options:e,pluginHooks:o,emitter:c,dispatch:l,getCurrentData:h,calendarApi:u,viewSpec:n,viewApi:i,dateProfileGenerator:t,theme:a,isRtl:e.direction==="rtl",addResizeHandler(v){c.on("_resize",v)},removeResizeHandler(v){c.off("_resize",v)},createScrollResponder(v){return new kx(v,c,De(e.scrollTime),e.scrollTimeReset)},registerInteractiveComponent:p,unregisterInteractiveComponent:f}}class Zs extends ci{shouldComponentUpdate(i,e){return!Cc(this.props,i,this.propEquality)||!Cc(this.state,e,this.stateEquality)}safeSetState(i){Cc(this.state,Object.assign(Object.assign({},this.state),i),this.stateEquality)||this.setState(i)}}Zs.addPropsEquality=Mx;Zs.addStateEquality=Ox;Zs.contextType=Rr;Zs.prototype.propEquality={};Zs.prototype.stateEquality={};class Le extends Zs{}Le.contextType=Rr;function Mx(n){let i=Object.create(this.prototype.propEquality);Object.assign(i,n),this.prototype.propEquality=i}function Ox(n){let i=Object.create(this.prototype.stateEquality);Object.assign(i,n),this.prototype.stateEquality=i}function sr(n,i){typeof n=="function"?n(i):n&&(n.current=i)}class Ld extends Le{constructor(){super(...arguments),this.id=Qs(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=i=>{const{options:e}=this.context,{generatorName:t}=this.props;(!e.customRenderingReplaces||!Su(t,e))&&this.updateElRef(i)},this.updateElRef=i=>{this.props.elRef&&sr(this.props.elRef,i)}}render(){const{props:i,context:e}=this,{options:t}=e,{customGenerator:r,defaultGenerator:s,renderProps:a}=i,o=r0(i,[],this.handleEl);let l=!1,h,c=[],u;if(r!=null){const p=typeof r=="function"?r(a,k):r;if(p===!0)l=!0;else{const f=p&&typeof p=="object";f&&"html"in p?o.dangerouslySetInnerHTML={__html:p.html}:f&&"domNodes"in p?c=Array.prototype.slice.call(p.domNodes):(f?xy(p):typeof p!="function")?h=p:u=p}}else l=!Su(i.generatorName,t);return l&&s&&(h=s(a)),this.queuedDomNodes=c,this.currentGeneratorMeta=u,k(i.elTag,o,h)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(i){var e;const{props:t,context:r}=this,{handleCustomRendering:s,customRenderingMetaMap:a}=r.options;if(s){const o=(e=this.currentGeneratorMeta)!==null&&e!==void 0?e:a==null?void 0:a[t.generatorName];o&&s(Object.assign(Object.assign({id:this.id,isActive:i,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:o},t),{elClasses:(t.elClasses||[]).filter(Rx)}))}}applyQueueudDomNodes(){const{queuedDomNodes:i,currentDomNodes:e}=this,t=this.base;if(!ss(i,e)){e.forEach(Dd);for(let r of i)t.appendChild(r);this.currentDomNodes=i}}}Ld.addPropsEquality({elClasses:ss,elStyle:Bi,elAttrs:gx,renderProps:Bi});function Su(n,i){var e;return!!(i.handleCustomRendering&&n&&(!((e=i.customRenderingMetaMap)===null||e===void 0)&&e[n]))}function r0(n,i,e){const t=Object.assign(Object.assign({},n.elAttrs),{ref:e});return(n.elClasses||i)&&(t.className=(n.elClasses||[]).concat(i||[]).concat(t.className||[]).filter(Boolean).join(" ")),n.elStyle&&(t.style=n.elStyle),t}function Rx(n){return!!n}const s0=i0(0);class fi extends ci{constructor(){super(...arguments),this.InnerContent=Nx.bind(void 0,this),this.handleEl=i=>{this.el=i,this.props.elRef&&(sr(this.props.elRef,i),i&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:i}=this,e=Lx(i.classNameGenerator,i.renderProps);if(i.children){const t=r0(i,e,this.handleEl),r=i.children(this.InnerContent,i.renderProps,t);return i.elTag?k(i.elTag,t,r):r}else return k(Ld,Object.assign(Object.assign({},i),{elRef:this.handleEl,elTag:i.elTag||"div",elClasses:(i.elClasses||[]).concat(e),renderId:this.context}))}componentDidMount(){var i,e;this.el?(e=(i=this.props).didMount)===null||e===void 0||e.call(i,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var i,e;(e=(i=this.props).willUnmount)===null||e===void 0||e.call(i,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}fi.contextType=s0;function Nx(n,i){const e=n.props;return k(Ld,Object.assign({renderProps:e.renderProps,generatorName:e.generatorName,customGenerator:e.customGenerator,defaultGenerator:e.defaultGenerator,renderId:n.context},i))}function Lx(n,i){const e=typeof n=="function"?n(i):n||[];return typeof e=="string"?[e]:e}class Hl extends Le{render(){let{props:i,context:e}=this,{options:t}=e,r={view:e.viewApi};return k(fi,{elRef:i.elRef,elTag:i.elTag||"div",elAttrs:i.elAttrs,elClasses:[...n0(i.viewSpec),...i.elClasses||[]],elStyle:i.elStyle,renderProps:r,classNameGenerator:t.viewClassNames,generatorName:void 0,didMount:t.viewDidMount,willUnmount:t.viewWillUnmount},()=>i.children)}}function n0(n){return[`fc-${n.type}-view`,"fc-view"]}function Vx(n,i){let e=null,t=null;return n.start&&(e=i.createMarker(n.start)),n.end&&(t=i.createMarker(n.end)),!e&&!t||e&&t&&t<e?null:{start:e,end:t}}function Gv(n,i){let e=[],{start:t}=i,r,s;for(n.sort(Px),r=0;r<n.length;r+=1)s=n[r],s.start>t&&e.push({start:t,end:s.start}),s.end>t&&(t=s.end);return t<i.end&&e.push({start:t,end:i.end}),e}function Px(n,i){return n.start.valueOf()-i.start.valueOf()}function Ys(n,i){let{start:e,end:t}=n,r=null;return i.start!==null&&(e===null?e=i.start:e=new Date(Math.max(e.valueOf(),i.start.valueOf()))),i.end!=null&&(t===null?t=i.end:t=new Date(Math.min(t.valueOf(),i.end.valueOf()))),(e===null||t===null||e<t)&&(r={start:e,end:t}),r}function Hx(n,i){return(n.start===null?null:n.start.valueOf())===(i.start===null?null:i.start.valueOf())&&(n.end===null?null:n.end.valueOf())===(i.end===null?null:i.end.valueOf())}function Vd(n,i){return(n.end===null||i.start===null||n.end>i.start)&&(n.start===null||i.end===null||n.start<i.end)}function uh(n,i){return(n.start===null||i.start!==null&&i.start>=n.start)&&(n.end===null||i.end!==null&&i.end<=n.end)}function Dr(n,i){return(n.start===null||i>=n.start)&&(n.end===null||i<n.end)}function Bx(n,i){return i.start!=null&&n<i.start?i.start:i.end!=null&&n>=i.end?new Date(i.end.valueOf()-1):n}function a0(n){let i=Math.floor(Xs(n.start,n.end))||1,e=Ye(n.start),t=xt(e,i);return{start:e,end:t}}function o0(n,i=De(0)){let e=null,t=null;if(n.end){t=Ye(n.end);let r=n.end.valueOf()-t.valueOf();r&&r>=Vi(i)&&(t=xt(t,1))}return n.start&&(e=Ye(n.start),t&&t<=e&&(t=xt(e,1))),{start:e,end:t}}function En(n,i,e,t){return t==="year"?De(e.diffWholeYears(n,i),"year"):t==="month"?De(e.diffWholeMonths(n,i),"month"):UA(n,i)}class l0{constructor(i){this.props=i,this.initHiddenDays()}buildPrev(i,e,t){let{dateEnv:r}=this.props,s=r.subtract(r.startOf(e,i.currentRangeUnit),i.dateIncrement);return this.build(s,-1,t)}buildNext(i,e,t){let{dateEnv:r}=this.props,s=r.add(r.startOf(e,i.currentRangeUnit),i.dateIncrement);return this.build(s,1,t)}build(i,e,t=!0){let{props:r}=this,s,a,o,l,h,c;return s=this.buildValidRange(),s=this.trimHiddenDays(s),t&&(i=Bx(i,s)),a=this.buildCurrentRangeInfo(i,e),o=/^(year|month|week|day)$/.test(a.unit),l=this.buildRenderRange(this.trimHiddenDays(a.range),a.unit,o),l=this.trimHiddenDays(l),h=l,r.showNonCurrentDates||(h=Ys(h,a.range)),h=this.adjustActiveRange(h),h=Ys(h,s),c=Vd(a.range,s),Dr(l,i)||(i=l.start),{currentDate:i,validRange:s,currentRange:a.range,currentRangeUnit:a.unit,isRangeAllDay:o,activeRange:h,renderRange:l,slotMinTime:r.slotMinTime,slotMaxTime:r.slotMaxTime,isValid:c,dateIncrement:this.buildDateIncrement(a.duration)}}buildValidRange(){let i=this.props.validRangeInput,e=typeof i=="function"?i.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):i;return this.refineRange(e)||{start:null,end:null}}buildCurrentRangeInfo(i,e){let{props:t}=this,r=null,s=null,a=null,o;return t.duration?(r=t.duration,s=t.durationUnit,a=this.buildRangeFromDuration(i,e,r,s)):(o=this.props.dayCount)?(s="day",a=this.buildRangeFromDayCount(i,e,o)):(a=this.buildCustomVisibleRange(i))?s=t.dateEnv.greatestWholeUnit(a.start,a.end).unit:(r=this.getFallbackDuration(),s=bu(r).unit,a=this.buildRangeFromDuration(i,e,r,s)),{duration:r,unit:s,range:a}}getFallbackDuration(){return De({day:1})}adjustActiveRange(i){let{dateEnv:e,usesMinMaxTime:t,slotMinTime:r,slotMaxTime:s}=this.props,{start:a,end:o}=i;return t&&(In(r)<0&&(a=Ye(a),a=e.add(a,r)),In(s)>1&&(o=Ye(o),o=xt(o,-1),o=e.add(o,s))),{start:a,end:o}}buildRangeFromDuration(i,e,t,r){let{dateEnv:s,dateAlignment:a}=this.props,o,l,h;if(!a){let{dateIncrement:u}=this.props;u&&Vi(u)<Vi(t)?a=bu(u).unit:a=r}In(t)<=1&&this.isHiddenDay(o)&&(o=this.skipHiddenDays(o,e),o=Ye(o));function c(){o=s.startOf(i,a),l=s.add(o,t),h={start:o,end:l}}return c(),this.trimHiddenDays(h)||(i=this.skipHiddenDays(i,e),c()),h}buildRangeFromDayCount(i,e,t){let{dateEnv:r,dateAlignment:s}=this.props,a=0,o=i,l;s&&(o=r.startOf(o,s)),o=Ye(o),o=this.skipHiddenDays(o,e),l=o;do l=xt(l,1),this.isHiddenDay(l)||(a+=1);while(a<t);return{start:o,end:l}}buildCustomVisibleRange(i){let{props:e}=this,t=e.visibleRangeInput,r=typeof t=="function"?t.call(e.calendarApi,e.dateEnv.toDate(i)):t,s=this.refineRange(r);return s&&(s.start==null||s.end==null)?null:s}buildRenderRange(i,e,t){return i}buildDateIncrement(i){let{dateIncrement:e}=this.props,t;return e||((t=this.props.dateAlignment)?De(1,t):i||De({days:1}))}refineRange(i){if(i){let e=Vx(i,this.props.dateEnv);return e&&(e=o0(e)),e}return null}initHiddenDays(){let i=this.props.hiddenDays||[],e=[],t=0,r;for(this.props.weekends===!1&&i.push(0,6),r=0;r<7;r+=1)(e[r]=i.indexOf(r)!==-1)||(t+=1);if(!t)throw new Error("invalid hiddenDays");this.isHiddenDayHash=e}trimHiddenDays(i){let{start:e,end:t}=i;return e&&(e=this.skipHiddenDays(e)),t&&(t=this.skipHiddenDays(t,-1,!0)),e==null||t==null||e<t?{start:e,end:t}:null}isHiddenDay(i){return i instanceof Date&&(i=i.getUTCDay()),this.isHiddenDayHash[i]}skipHiddenDays(i,e=1,t=!1){for(;this.isHiddenDayHash[(i.getUTCDay()+(t?e:0)+7)%7];)i=xt(i,e);return i}}function Pd(n,i,e,t){return{instanceId:Qs(),defId:n,range:i,forcedStartTzo:e??null,forcedEndTzo:t??null}}function Fx(n,i,e,t){for(let r=0;r<t.length;r+=1){let s=t[r].parse(n,e);if(s){let{allDay:a}=n;return a==null&&(a=i,a==null&&(a=s.allDayGuess,a==null&&(a=!1))),{allDay:a,duration:s.duration,typeData:s.typeData,typeId:r}}}return null}function Gs(n,i,e){let{dateEnv:t,pluginHooks:r,options:s}=e,{defs:a,instances:o}=n;o=Us(o,l=>!a[l.defId].recurringDef);for(let l in a){let h=a[l];if(h.recurringDef){let{duration:c}=h.recurringDef;c||(c=h.allDay?s.defaultAllDayEventDuration:s.defaultTimedEventDuration);let u=Wx(h,c,i,t,r.recurringTypes);for(let p of u){let f=Pd(l,{start:p,end:t.add(p,c)});o[f.instanceId]=f}}}return{defs:a,instances:o}}function Wx(n,i,e,t,r){let a=r[n.recurringDef.typeId].expand(n.recurringDef.typeData,{start:t.subtract(e.start,i),end:e.end},t);return n.allDay&&(a=a.map(Ye)),a}const dl={id:String,groupId:String,title:String,url:String,interactive:Boolean},h0={start:B,end:B,date:B,allDay:Boolean},_x=Object.assign(Object.assign(Object.assign({},dl),h0),{extendedProps:B});function c0(n,i,e,t,r=Hd(e),s,a){let{refined:o,extra:l}=u0(n,e,r),h=zx(i,e),c=Fx(o,h,e.dateEnv,e.pluginHooks.recurringTypes);if(c){let p=Eu(o,l,i?i.sourceId:"",c.allDay,!!c.duration,e,s);return p.recurringDef={typeId:c.typeId,typeData:c.typeData,duration:c.duration},{def:p,instance:null}}let u=qx(o,h,e,t);if(u){let p=Eu(o,l,i?i.sourceId:"",u.allDay,u.hasEnd,e,s),f=Pd(p.defId,u.range,u.forcedStartTzo,u.forcedEndTzo);return a&&p.publicId&&a[p.publicId]&&(f.instanceId=a[p.publicId]),{def:p,instance:f}}return null}function u0(n,i,e=Hd(i)){return Od(n,e)}function Hd(n){return Object.assign(Object.assign(Object.assign({},Bl),_x),n.pluginHooks.eventRefiners)}function Eu(n,i,e,t,r,s,a){let o={title:n.title||"",groupId:n.groupId||"",publicId:n.id||"",url:n.url||"",recurringDef:null,defId:(a&&n.id?a[n.id]:"")||Qs(),sourceId:e,allDay:t,hasEnd:r,interactive:n.interactive,ui:Fl(n,s),extendedProps:Object.assign(Object.assign({},n.extendedProps||{}),i)};for(let l of s.pluginHooks.eventDefMemberAdders)Object.assign(o,l(n));return Object.freeze(o.ui.classNames),Object.freeze(o.extendedProps),o}function qx(n,i,e,t){let{allDay:r}=n,s,a=null,o=!1,l,h=null,c=n.start!=null?n.start:n.date;if(s=e.dateEnv.createMarkerMeta(c),s)a=s.marker;else if(!t)return null;return n.end!=null&&(l=e.dateEnv.createMarkerMeta(n.end)),r==null&&(i!=null?r=i:r=(!s||s.isTimeUnspecified)&&(!l||l.isTimeUnspecified)),r&&a&&(a=Ye(a)),l&&(h=l.marker,r&&(h=Ye(h)),a&&h<=a&&(h=null)),h?o=!0:t||(o=e.options.forceEventDuration||!1,h=e.dateEnv.add(a,r?e.options.defaultAllDayEventDuration:e.options.defaultTimedEventDuration)),{allDay:r,hasEnd:o,range:{start:a,end:h},forcedStartTzo:s?s.forcedTzo:null,forcedEndTzo:l?l.forcedTzo:null}}function zx(n,i){let e=null;return n&&(e=n.defaultAllDay),e==null&&(e=i.options.defaultAllDay),e}function eo(n,i,e,t,r,s){let a=ui(),o=Hd(e);for(let l of n){let h=c0(l,i,e,t,o,r,s);h&&Cu(h,a)}return a}function Cu(n,i=ui()){return i.defs[n.def.defId]=n.def,n.instance&&(i.instances[n.instance.instanceId]=n.instance),i}function Bd(n,i){let e=n.instances[i];if(e){let t=n.defs[e.defId],r=dh(n,s=>jx(t,s));return r.defs[t.defId]=t,r.instances[e.instanceId]=e,r}return ui()}function jx(n,i){return!!(n.groupId&&n.groupId===i.groupId)}function ui(){return{defs:{},instances:{}}}function Fd(n,i){return{defs:Object.assign(Object.assign({},n.defs),i.defs),instances:Object.assign(Object.assign({},n.instances),i.instances)}}function dh(n,i){let e=Us(n.defs,i),t=Us(n.instances,r=>e[r.defId]);return{defs:e,instances:t}}function Ux(n,i){let{defs:e,instances:t}=n,r={},s={};for(let a in e)i.defs[a]||(r[a]=e[a]);for(let a in t)!i.instances[a]&&r[t[a].defId]&&(s[a]=t[a]);return{defs:r,instances:s}}function Yx(n,i){return Array.isArray(n)?eo(n,null,i,!0):typeof n=="object"&&n?eo([n],null,i,!0):n!=null?String(n):null}function $v(n){return Array.isArray(n)?n:typeof n=="string"?n.split(/\s+/):[]}const Bl={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:B,overlap:B,allow:B,className:$v,classNames:$v,color:String,backgroundColor:String,borderColor:String,textColor:String},Gx={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Fl(n,i){let e=Yx(n.constraint,i);return{display:n.display||null,startEditable:n.startEditable!=null?n.startEditable:n.editable,durationEditable:n.durationEditable!=null?n.durationEditable:n.editable,constraints:e!=null?[e]:[],overlap:n.overlap!=null?n.overlap:null,allows:n.allow!=null?[n.allow]:[],backgroundColor:n.backgroundColor||n.color||"",borderColor:n.borderColor||n.color||"",textColor:n.textColor||"",classNames:(n.className||[]).concat(n.classNames||[])}}function d0(n){return n.reduce($x,Gx)}function $x(n,i){return{display:i.display!=null?i.display:n.display,startEditable:i.startEditable!=null?i.startEditable:n.startEditable,durationEditable:i.durationEditable!=null?i.durationEditable:n.durationEditable,constraints:n.constraints.concat(i.constraints),overlap:typeof i.overlap=="boolean"?i.overlap:n.overlap,allows:n.allows.concat(i.allows),backgroundColor:i.backgroundColor||n.backgroundColor,borderColor:i.borderColor||n.borderColor,textColor:i.textColor||n.textColor,classNames:n.classNames.concat(i.classNames)}}const Kx={id:String,defaultAllDay:Boolean,url:String,format:String,events:B,eventDataTransform:B,success:B,failure:B};function p0(n,i,e=f0(i)){let t;if(typeof n=="string"?t={url:n}:typeof n=="function"||Array.isArray(n)?t={events:n}:typeof n=="object"&&n&&(t=n),t){let{refined:r,extra:s}=Od(t,e),a=Qx(r,i);if(a)return{_raw:n,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:r.defaultAllDay,eventDataTransform:r.eventDataTransform,success:r.success,failure:r.failure,publicId:r.id||"",sourceId:Qs(),sourceDefId:a.sourceDefId,meta:a.meta,ui:Fl(r,i),extendedProps:s}}return null}function f0(n){return Object.assign(Object.assign(Object.assign({},Bl),Kx),n.pluginHooks.eventSourceRefiners)}function Qx(n,i){let e=i.pluginHooks.eventSourceDefs;for(let t=e.length-1;t>=0;t-=1){let s=e[t].parseMeta(n);if(s)return{sourceDefId:t,meta:s}}return null}function Xx(n,i,e,t,r){switch(i.type){case"RECEIVE_EVENTS":return Zx(n,e[i.sourceId],i.fetchId,i.fetchRange,i.rawEvents,r);case"RESET_RAW_EVENTS":return Jx(n,e[i.sourceId],i.rawEvents,t.activeRange,r);case"ADD_EVENTS":return ek(n,i.eventStore,t?t.activeRange:null,r);case"RESET_EVENTS":return i.eventStore;case"MERGE_EVENTS":return Fd(n,i.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return t?Gs(n,t.activeRange,r):n;case"REMOVE_EVENTS":return Ux(n,i.eventStore);case"REMOVE_EVENT_SOURCE":return m0(n,i.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return dh(n,s=>!s.sourceId);case"REMOVE_ALL_EVENTS":return ui();default:return n}}function Zx(n,i,e,t,r,s){if(i&&e===i.latestFetchId){let a=eo(v0(r,i,s),i,s);return t&&(a=Gs(a,t,s)),Fd(m0(n,i.sourceId),a)}return n}function Jx(n,i,e,t,r){const{defIdMap:s,instanceIdMap:a}=ik(n);let o=eo(v0(e,i,r),i,r,!1,s,a);return Gs(o,t,r)}function v0(n,i,e){let t=e.options.eventDataTransform,r=i?i.eventDataTransform:null;return r&&(n=Kv(n,r)),t&&(n=Kv(n,t)),n}function Kv(n,i){let e;if(!i)e=n;else{e=[];for(let t of n){let r=i(t);r?e.push(r):r==null&&e.push(t)}}return e}function ek(n,i,e,t){return e&&(i=Gs(i,e,t)),Fd(n,i)}function Qv(n,i,e){let{defs:t}=n,r=kr(n.instances,s=>t[s.defId].allDay?s:Object.assign(Object.assign({},s),{range:{start:e.createMarker(i.toDate(s.range.start,s.forcedStartTzo)),end:e.createMarker(i.toDate(s.range.end,s.forcedEndTzo))},forcedStartTzo:e.canComputeOffset?null:s.forcedStartTzo,forcedEndTzo:e.canComputeOffset?null:s.forcedEndTzo}));return{defs:t,instances:r}}function m0(n,i){return dh(n,e=>e.sourceId!==i)}function tk(n,i){return{defs:n.defs,instances:Us(n.instances,e=>!i[e.instanceId])}}function ik(n){const{defs:i,instances:e}=n,t={},r={};for(let s in i){const a=i[s],{publicId:o}=a;o&&(t[o]=s)}for(let s in e){const a=e[s],o=i[a.defId],{publicId:l}=o;l&&(r[l]=s)}return{defIdMap:t,instanceIdMap:r}}class ph{constructor(){this.handlers={},this.thisContext=null}setThisContext(i){this.thisContext=i}setOptions(i){this.options=i}on(i,e){rk(this.handlers,i,e)}off(i,e){sk(this.handlers,i,e)}trigger(i,...e){let t=this.handlers[i]||[],r=this.options&&this.options[i],s=[].concat(r||[],t);for(let a of s)a.apply(this.thisContext,e)}hasHandlers(i){return!!(this.handlers[i]&&this.handlers[i].length||this.options&&this.options[i])}}function rk(n,i,e){(n[i]||(n[i]=[])).push(e)}function sk(n,i,e){e?n[i]&&(n[i]=n[i].filter(t=>t!==e)):delete n[i]}const nk={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function ak(n,i){return eo(ok(n),null,i)}function ok(n){let i;return n===!0?i=[{}]:Array.isArray(n)?i=n.filter(e=>e.daysOfWeek):typeof n=="object"&&n?i=[n]:i=[],i=i.map(e=>Object.assign(Object.assign({},nk),e)),i}function g0(n,i,e){e.emitter.trigger("select",Object.assign(Object.assign({},Wd(n,e)),{jsEvent:i?i.origEvent:null,view:e.viewApi||e.calendarApi.view}))}function lk(n,i){i.emitter.trigger("unselect",{jsEvent:n?n.origEvent:null,view:i.viewApi||i.calendarApi.view})}function Wd(n,i){let e={};for(let t of i.pluginHooks.dateSpanTransforms)Object.assign(e,t(n,i));return Object.assign(e,Ck(n,i.dateEnv)),e}function Xv(n,i,e){let{dateEnv:t,options:r}=e,s=i;return n?(s=Ye(s),s=t.add(s,r.defaultAllDayEventDuration)):s=t.add(s,r.defaultTimedEventDuration),s}function _d(n,i,e,t){let r=Wl(n.defs,i),s=ui();for(let a in n.defs){let o=n.defs[a];s.defs[a]=hk(o,r[a],e,t)}for(let a in n.instances){let o=n.instances[a],l=s.defs[o.defId];s.instances[a]=ck(o,l,r[o.defId],e,t)}return s}function hk(n,i,e,t){let r=e.standardProps||{};r.hasEnd==null&&i.durationEditable&&(e.startDelta||e.endDelta)&&(r.hasEnd=!0);let s=Object.assign(Object.assign(Object.assign({},n),r),{ui:Object.assign(Object.assign({},n.ui),r.ui)});e.extendedProps&&(s.extendedProps=Object.assign(Object.assign({},s.extendedProps),e.extendedProps));for(let a of t.pluginHooks.eventDefMutationAppliers)a(s,e,t);return!s.hasEnd&&t.options.forceEventDuration&&(s.hasEnd=!0),s}function ck(n,i,e,t,r){let{dateEnv:s}=r,a=t.standardProps&&t.standardProps.allDay===!0,o=t.standardProps&&t.standardProps.hasEnd===!1,l=Object.assign({},n);return a&&(l.range=a0(l.range)),t.datesDelta&&e.startEditable&&(l.range={start:s.add(l.range.start,t.datesDelta),end:s.add(l.range.end,t.datesDelta)}),t.startDelta&&e.durationEditable&&(l.range={start:s.add(l.range.start,t.startDelta),end:l.range.end}),t.endDelta&&e.durationEditable&&(l.range={start:l.range.start,end:s.add(l.range.end,t.endDelta)}),o&&(l.range={start:l.range.start,end:Xv(i.allDay,l.range.start,r)}),i.allDay&&(l.range={start:Ye(l.range.start),end:Ye(l.range.end)}),l.range.end<l.range.start&&(l.range.end=Xv(i.allDay,l.range.start,r)),l}class pn{constructor(i,e){this.context=i,this.internalEventSource=e}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Qe{constructor(i,e,t){this._context=i,this._def=e,this._instance=t||null}setProp(i,e){if(i in h0)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(i==="id")e=dl[i](e),this.mutate({standardProps:{publicId:e}});else if(i in dl)e=dl[i](e),this.mutate({standardProps:{[i]:e}});else if(i in Bl){let t=Bl[i](e);i==="color"?t={backgroundColor:e,borderColor:e}:i==="editable"?t={startEditable:e,durationEditable:e}:t={[i]:e},this.mutate({standardProps:{ui:t}})}else console.warn(`Could not set prop '${i}'. Use setExtendedProp instead.`)}setExtendedProp(i,e){this.mutate({extendedProps:{[i]:e}})}setStart(i,e={}){let{dateEnv:t}=this._context,r=t.createMarker(i);if(r&&this._instance){let s=this._instance.range,a=En(s.start,r,t,e.granularity);e.maintainDuration?this.mutate({datesDelta:a}):this.mutate({startDelta:a})}}setEnd(i,e={}){let{dateEnv:t}=this._context,r;if(!(i!=null&&(r=t.createMarker(i),!r))&&this._instance)if(r){let s=En(this._instance.range.end,r,t,e.granularity);this.mutate({endDelta:s})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(i,e,t={}){let{dateEnv:r}=this._context,s={allDay:t.allDay},a=r.createMarker(i),o;if(a&&!(e!=null&&(o=r.createMarker(e),!o))&&this._instance){let l=this._instance.range;t.allDay===!0&&(l=a0(l));let h=En(l.start,a,r,t.granularity);if(o){let c=En(l.end,o,r,t.granularity);VA(h,c)?this.mutate({datesDelta:h,standardProps:s}):this.mutate({startDelta:h,endDelta:c,standardProps:s})}else s.hasEnd=!1,this.mutate({datesDelta:h,standardProps:s})}}moveStart(i){let e=De(i);e&&this.mutate({startDelta:e})}moveEnd(i){let e=De(i);e&&this.mutate({endDelta:e})}moveDates(i){let e=De(i);e&&this.mutate({datesDelta:e})}setAllDay(i,e={}){let t={allDay:i},{maintainDuration:r}=e;r==null&&(r=this._context.options.allDayMaintainDuration),this._def.allDay!==i&&(t.hasEnd=r),this.mutate({standardProps:t})}formatRange(i){let{dateEnv:e}=this._context,t=this._instance,r=tt(i);return this._def.hasEnd?e.formatRange(t.range.start,t.range.end,r,{forcedStartTzo:t.forcedStartTzo,forcedEndTzo:t.forcedEndTzo}):e.format(t.range.start,r,{forcedTzo:t.forcedStartTzo})}mutate(i){let e=this._instance;if(e){let t=this._def,r=this._context,{eventStore:s}=r.getCurrentData(),a=Bd(s,e.instanceId);a=_d(a,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},i,r);let l=new Qe(r,t,e);this._def=a.defs[t.defId],this._instance=a.instances[e.instanceId],r.dispatch({type:"MERGE_EVENTS",eventStore:a}),r.emitter.trigger("eventChange",{oldEvent:l,event:this,relatedEvents:_s(a,r,e),revert(){r.dispatch({type:"RESET_EVENTS",eventStore:s})}})}}remove(){let i=this._context,e=y0(this);i.dispatch({type:"REMOVE_EVENTS",eventStore:e}),i.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){i.dispatch({type:"MERGE_EVENTS",eventStore:e})}})}get source(){let{sourceId:i}=this._def;return i?new pn(this._context,this._context.getCurrentData().eventSources[i]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let i=this._instance;return i?this._context.dateEnv.formatIso(i.range.start,{omitTime:this._def.allDay,forcedTzo:i.forcedStartTzo}):""}get endStr(){let i=this._instance;return i&&this._def.hasEnd?this._context.dateEnv.formatIso(i.range.end,{omitTime:this._def.allDay,forcedTzo:i.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(i={}){let e=this._def,{ui:t}=e,{startStr:r,endStr:s}=this,a={allDay:e.allDay};return e.title&&(a.title=e.title),r&&(a.start=r),s&&(a.end=s),e.publicId&&(a.id=e.publicId),e.groupId&&(a.groupId=e.groupId),e.url&&(a.url=e.url),t.display&&t.display!=="auto"&&(a.display=t.display),i.collapseColor&&t.backgroundColor&&t.backgroundColor===t.borderColor?a.color=t.backgroundColor:(t.backgroundColor&&(a.backgroundColor=t.backgroundColor),t.borderColor&&(a.borderColor=t.borderColor)),t.textColor&&(a.textColor=t.textColor),t.classNames.length&&(a.classNames=t.classNames),Object.keys(e.extendedProps).length&&(i.collapseExtendedProps?Object.assign(a,e.extendedProps):a.extendedProps=e.extendedProps),a}toJSON(){return this.toPlainObject()}}function y0(n){let i=n._def,e=n._instance;return{defs:{[i.defId]:i},instances:e?{[e.instanceId]:e}:{}}}function _s(n,i,e){let{defs:t,instances:r}=n,s=[],a=e?e.instanceId:"";for(let o in r){let l=r[o],h=t[l.defId];l.instanceId!==a&&s.push(new Qe(i,h,l))}return s}function Zv(n,i,e,t){let r={},s={},a={},o=[],l=[],h=Wl(n.defs,i);for(let c in n.defs){let u=n.defs[c];h[u.defId].display==="inverse-background"&&(u.groupId?(r[u.groupId]=[],a[u.groupId]||(a[u.groupId]=u)):s[c]=[])}for(let c in n.instances){let u=n.instances[c],p=n.defs[u.defId],f=h[p.defId],v=u.range,m=!p.allDay&&t?o0(v,t):v,g=Ys(m,e);g&&(f.display==="inverse-background"?p.groupId?r[p.groupId].push(g):s[u.defId].push(g):f.display!=="none"&&(f.display==="background"?o:l).push({def:p,ui:f,instance:u,range:g,isStart:m.start&&m.start.valueOf()===g.start.valueOf(),isEnd:m.end&&m.end.valueOf()===g.end.valueOf()}))}for(let c in r){let u=r[c],p=Gv(u,e);for(let f of p){let v=a[c],m=h[v.defId];o.push({def:v,ui:m,instance:null,range:f,isStart:!1,isEnd:!1})}}for(let c in s){let u=s[c],p=Gv(u,e);for(let f of p)o.push({def:n.defs[c],ui:h[c],instance:null,range:f,isStart:!1,isEnd:!1})}return{bg:o,fg:l}}function uk(n){return n.ui.display==="background"||n.ui.display==="inverse-background"}function Jv(n,i){n.fcSeg=i}function Hn(n){return n.fcSeg||n.parentNode.fcSeg||null}function Wl(n,i){return kr(n,e=>b0(e,i))}function b0(n,i){let e=[];return i[""]&&e.push(i[""]),i[n.defId]&&e.push(i[n.defId]),e.push(n.ui),d0(e)}function S0(n,i){let e=n.map(dk);return e.sort((t,r)=>kA(t,r,i)),e.map(t=>t._seg)}function dk(n){let{eventRange:i}=n,e=i.def,t=i.instance?i.instance.range:i.range,r=t.start?t.start.valueOf():0,s=t.end?t.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},e.extendedProps),e),{id:e.publicId,start:r,end:s,duration:s-r,allDay:Number(e.allDay),_seg:n})}function pk(n,i){let{pluginHooks:e}=i,t=e.isDraggableTransformers,{def:r,ui:s}=n.eventRange,a=s.startEditable;for(let o of t)a=o(a,r,s,i);return a}function fk(n,i){return n.isStart&&n.eventRange.ui.durationEditable&&i.options.eventResizableFromStart}function vk(n,i){return n.isEnd&&n.eventRange.ui.durationEditable}function E0(n,i,e,t,r,s,a){let{dateEnv:o,options:l}=e,{displayEventTime:h,displayEventEnd:c}=l,u=n.eventRange.def,p=n.eventRange.instance;h==null&&(h=t!==!1),c==null&&(c=r!==!1);let f=p.range.start,v=p.range.end,m=n.start||n.eventRange.range.start,g=n.end||n.eventRange.range.end,y=Ye(f).valueOf()===Ye(m).valueOf(),b=Ye(ns(v,-1)).valueOf()===Ye(ns(g,-1)).valueOf();return h&&!u.allDay&&(y||b)?(m=y?f:m,g=b?v:g,c&&u.hasEnd?o.formatRange(m,g,i,{forcedStartTzo:p.forcedStartTzo,forcedEndTzo:p.forcedEndTzo}):o.format(m,i,{forcedTzo:p.forcedStartTzo})):""}function rs(n,i,e){let t=n.eventRange.range;return{isPast:t.end<=(e||i.start),isFuture:t.start>=(e||i.end),isToday:i&&Dr(i,t.start)}}function mk(n){let i=["fc-event"];return n.isMirror&&i.push("fc-event-mirror"),n.isDraggable&&i.push("fc-event-draggable"),(n.isStartResizable||n.isEndResizable)&&i.push("fc-event-resizable"),n.isDragging&&i.push("fc-event-dragging"),n.isResizing&&i.push("fc-event-resizing"),n.isSelected&&i.push("fc-event-selected"),n.isStart&&i.push("fc-event-start"),n.isEnd&&i.push("fc-event-end"),n.isPast&&i.push("fc-event-past"),n.isToday&&i.push("fc-event-today"),n.isFuture&&i.push("fc-event-future"),i}function C0(n){return n.instance?n.instance.instanceId:`${n.def.defId}:${n.range.start.toISOString()}`}function w0(n,i){let{def:e,instance:t}=n.eventRange,{url:r}=e;if(r)return{href:r};let{emitter:s,options:a}=i,{eventInteractive:o}=a;return o==null&&(o=e.interactive,o==null&&(o=!!s.hasHandlers("eventClick"))),o?Xy(l=>{s.trigger("eventClick",{el:l.target,event:new Qe(i,e,t),jsEvent:l,view:i.viewApi})}):{}}const gk={start:B,end:B,allDay:Boolean};function yk(n,i,e){let t=bk(n,i),{range:r}=t;if(!r.start)return null;if(!r.end){if(e==null)return null;r.end=i.add(r.start,e)}return t}function bk(n,i){let{refined:e,extra:t}=Od(n,gk),r=e.start?i.createMarkerMeta(e.start):null,s=e.end?i.createMarkerMeta(e.end):null,{allDay:a}=e;return a==null&&(a=r&&r.isTimeUnspecified&&(!s||s.isTimeUnspecified)),Object.assign({range:{start:r?r.marker:null,end:s?s.marker:null},allDay:a},t)}function Sk(n,i){return Hx(n.range,i.range)&&n.allDay===i.allDay&&Ek(n,i)}function Ek(n,i){for(let e in i)if(e!=="range"&&e!=="allDay"&&n[e]!==i[e])return!1;for(let e in n)if(!(e in i))return!1;return!0}function Ck(n,i){return Object.assign(Object.assign({},D0(n.range,i,n.allDay)),{allDay:n.allDay})}function T0(n,i,e){return Object.assign(Object.assign({},D0(n,i,e)),{timeZone:i.timeZone})}function D0(n,i,e){return{start:i.toDate(n.start),end:i.toDate(n.end),startStr:i.formatIso(n.start,{omitTime:e}),endStr:i.formatIso(n.end,{omitTime:e})}}function wk(n,i,e){let t=u0({editable:!1},e),r=Eu(t.refined,t.extra,"",n.allDay,!0,e);return{def:r,ui:b0(r,i),instance:Pd(r.defId,n.range),range:n.range,isStart:!0,isEnd:!0}}function Tk(n,i,e){let t=!1,r=function(o){t||(t=!0,i(o))},s=function(o){t||(t=!0,e(o))},a=n(r,s);a&&typeof a.then=="function"&&a.then(r,s)}class em extends Error{constructor(i,e){super(i),this.response=e}}function Dk(n,i,e){n=n.toUpperCase();const t={method:n};return n==="GET"?i+=(i.indexOf("?")===-1?"?":"&")+new URLSearchParams(e):(t.body=new URLSearchParams(e),t.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(i,t).then(r=>{if(r.ok)return r.json().then(s=>[s,r],()=>{throw new em("Failure parsing JSON",r)});throw new em("Request failed",r)})}let wc;function A0(){return wc==null&&(wc=Ak()),wc}function Ak(){if(typeof document>"u")return!0;let n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.innerHTML="<table><tr><td><div></div></td></tr></table>",n.querySelector("table").style.height="100px",n.querySelector("div").style.height="100%",document.body.appendChild(n);let e=n.querySelector("div").offsetHeight>0;return document.body.removeChild(n),e}class xk extends Le{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{Pl(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{Pl(()=>{this.setState({forPrint:!1})})}}render(){let{props:i}=this,{options:e}=i,{forPrint:t}=this.state,r=t||e.height==="auto"||e.contentHeight==="auto",s=!r&&e.height!=null?e.height:"",a=["fc",t?"fc-media-print":"fc-media-screen",`fc-direction-${e.direction}`,i.theme.getClass("root")];return A0()||a.push("fc-liquid-hack"),i.children(a,s,r,t)}componentDidMount(){let{emitter:i}=this.props;i.on("_beforeprint",this.handleBeforePrint),i.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:i}=this.props;i.off("_beforeprint",this.handleBeforePrint),i.off("_afterprint",this.handleAfterPrint)}}class jn{constructor(i){this.component=i.component,this.isHitComboAllowed=i.isHitComboAllowed||null}destroy(){}}function kk(n,i){return{component:n,el:i.el,useEventCenter:i.useEventCenter!=null?i.useEventCenter:!0,isHitComboAllowed:i.isHitComboAllowed||null}}function qd(n){return{[n.component.uid]:n}}const wu={};class Un extends ci{constructor(i,e){super(i,e),this.handleRefresh=()=>{let t=this.computeTiming();t.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(t.state),this.clearTimeout(),this.setTimeout(t.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:i,state:e}=this;return i.children(e.nowDate,e.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(i){i.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:i,context:e}=this,t=e.nowManager.getDateMarker(),{nowIndicatorSnap:r}=e.options;r==="auto"&&(r=/year|month|week|day/.test(i.unit)||(i.unitValue||1)===1);let s,a;return r?(s=e.dateEnv.startOf(t,i.unit),a=e.dateEnv.add(s,De(1,i.unit)).valueOf()-t.valueOf()):(s=t,a=1e3*60),a=Math.min(1e3*60*60*24,a),{state:{nowDate:s,todayRange:Ik(s)},waitMs:a}}setTimeout(i=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const e=this.computeTiming();this.setState(e.state,()=>{this.setTimeout(e.waitMs)})},i)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}Un.contextType=Rr;function Ik(n){let i=Ye(n),e=xt(i,1);return{start:i,end:e}}class Mk{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(i){this.currentDataManager.dispatch(i)}get view(){return this.getCurrentData().viewApi}batchRendering(i){i()}updateSize(){this.trigger("_resize",!0)}setOption(i,e){this.dispatch({type:"SET_OPTION",optionName:i,rawOptionValue:e})}getOption(i){return this.currentDataManager.currentCalendarOptionsInput[i]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(i,e){let{currentDataManager:t}=this;t.currentCalendarOptionsRefiners[i]?t.emitter.on(i,e):console.warn(`Unknown listener name '${i}'`)}off(i,e){this.currentDataManager.emitter.off(i,e)}trigger(i,...e){this.currentDataManager.emitter.trigger(i,...e)}changeView(i,e){this.batchRendering(()=>{if(this.unselect(),e)if(e.start&&e.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:e});else{let{dateEnv:t}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i,dateMarker:t.createMarker(e)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i})})}zoomTo(i,e){let t=this.getCurrentData(),r;e=e||"day",r=t.viewSpecs[e]||this.getUnitViewSpec(e),this.unselect(),r?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:r.type,dateMarker:i}):this.dispatch({type:"CHANGE_DATE",dateMarker:i})}getUnitViewSpec(i){let{viewSpecs:e,toolbarConfig:t}=this.getCurrentData(),r=[].concat(t.header?t.header.viewsWithButtons:[],t.footer?t.footer.viewsWithButtons:[]),s,a;for(let o in e)r.push(o);for(s=0;s<r.length;s+=1)if(a=e[r[s]],a&&a.singleUnit===i)return a;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let i=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:i.dateEnv.addYears(i.currentDate,-1)})}nextYear(){let i=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:i.dateEnv.addYears(i.currentDate,1)})}today(){let i=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:i.nowManager.getDateMarker()})}gotoDate(i){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.createMarker(i)})}incrementDate(i){let e=this.getCurrentData(),t=De(i);t&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.add(e.currentDate,t)}))}getDate(){let i=this.getCurrentData();return i.dateEnv.toDate(i.currentDate)}formatDate(i,e){let{dateEnv:t}=this.getCurrentData();return t.format(t.createMarker(i),tt(e))}formatRange(i,e,t){let{dateEnv:r}=this.getCurrentData();return r.formatRange(r.createMarker(i),r.createMarker(e),tt(t),t)}formatIso(i,e){let{dateEnv:t}=this.getCurrentData();return t.formatIso(t.createMarker(i),{omitTime:e})}select(i,e){let t;e==null?i.start!=null?t=i:t={start:i,end:null}:t={start:i,end:e};let r=this.getCurrentData(),s=yk(t,r.dateEnv,De({days:1}));s&&(this.dispatch({type:"SELECT_DATES",selection:s}),g0(s,null,r))}unselect(i){let e=this.getCurrentData();e.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),lk(i,e))}addEvent(i,e){if(i instanceof Qe){let a=i._def,o=i._instance;return this.getCurrentData().eventStore.defs[a.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Cu({def:a,instance:o})}),this.triggerEventAdd(i)),i}let t=this.getCurrentData(),r;if(e instanceof pn)r=e.internalEventSource;else if(typeof e=="boolean")e&&([r]=Nd(t.eventSources));else if(e!=null){let a=this.getEventSourceById(e);if(!a)return console.warn(`Could not find an event source with ID "${e}"`),null;r=a.internalEventSource}let s=c0(i,r,t,!1);if(s){let a=new Qe(t,s.def,s.def.recurringDef?null:s.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Cu(s)}),this.triggerEventAdd(a),a}return null}triggerEventAdd(i){let{emitter:e}=this.getCurrentData();e.trigger("eventAdd",{event:i,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:y0(i)})}})}getEventById(i){let e=this.getCurrentData(),{defs:t,instances:r}=e.eventStore;i=String(i);for(let s in t){let a=t[s];if(a.publicId===i){if(a.recurringDef)return new Qe(e,a,null);for(let o in r){let l=r[o];if(l.defId===a.defId)return new Qe(e,a,l)}}}return null}getEvents(){let i=this.getCurrentData();return _s(i.eventStore,i)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let i=this.getCurrentData(),e=i.eventSources,t=[];for(let r in e)t.push(new pn(i,e[r]));return t}getEventSourceById(i){let e=this.getCurrentData(),t=e.eventSources;i=String(i);for(let r in t)if(t[r].publicId===i)return new pn(e,t[r]);return null}addEventSource(i){let e=this.getCurrentData();if(i instanceof pn)return e.eventSources[i.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[i.internalEventSource]}),i;let t=p0(i,e);return t?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[t]}),new pn(e,t)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(i){let e=De(i);e&&this.trigger("_scrollRequest",{time:e})}}function Ok(n,i){return n.left>=i.left&&n.left<i.right&&n.top>=i.top&&n.top<i.bottom}function x0(n,i){let e={left:Math.max(n.left,i.left),right:Math.min(n.right,i.right),top:Math.max(n.top,i.top),bottom:Math.min(n.bottom,i.bottom)};return e.left<e.right&&e.top<e.bottom?e:!1}function Rk(n,i){return{left:Math.min(Math.max(n.left,i.left),i.right),top:Math.min(Math.max(n.top,i.top),i.bottom)}}function Nk(n){return{left:(n.left+n.right)/2,top:(n.top+n.bottom)/2}}function Lk(n,i){return{left:n.left-i.left,top:n.top-i.top}}const Tc=ui();class Vk{constructor(){this.getKeysForEventDefs=pe(this._getKeysForEventDefs),this.splitDateSelection=pe(this._splitDateSpan),this.splitEventStore=pe(this._splitEventStore),this.splitIndividualUi=pe(this._splitIndividualUi),this.splitEventDrag=pe(this._splitInteraction),this.splitEventResize=pe(this._splitInteraction),this.eventUiBuilders={}}splitProps(i){let e=this.getKeyInfo(i),t=this.getKeysForEventDefs(i.eventStore),r=this.splitDateSelection(i.dateSelection),s=this.splitIndividualUi(i.eventUiBases,t),a=this.splitEventStore(i.eventStore,t),o=this.splitEventDrag(i.eventDrag),l=this.splitEventResize(i.eventResize),h={};this.eventUiBuilders=kr(e,(c,u)=>this.eventUiBuilders[u]||pe(Pk));for(let c in e){let u=e[c],p=a[c]||Tc,f=this.eventUiBuilders[c];h[c]={businessHours:u.businessHours||i.businessHours,dateSelection:r[c]||null,eventStore:p,eventUiBases:f(i.eventUiBases[""],u.ui,s[c]),eventSelection:p.instances[i.eventSelection]?i.eventSelection:"",eventDrag:o[c]||null,eventResize:l[c]||null}}return h}_splitDateSpan(i){let e={};if(i){let t=this.getKeysForDateSpan(i);for(let r of t)e[r]=i}return e}_getKeysForEventDefs(i){return kr(i.defs,e=>this.getKeysForEventDef(e))}_splitEventStore(i,e){let{defs:t,instances:r}=i,s={};for(let a in t)for(let o of e[a])s[o]||(s[o]=ui()),s[o].defs[a]=t[a];for(let a in r){let o=r[a];for(let l of e[o.defId])s[l]&&(s[l].instances[a]=o)}return s}_splitIndividualUi(i,e){let t={};for(let r in i)if(r)for(let s of e[r])t[s]||(t[s]={}),t[s][r]=i[r];return t}_splitInteraction(i){let e={};if(i){let t=this._splitEventStore(i.affectedEvents,this._getKeysForEventDefs(i.affectedEvents)),r=this._getKeysForEventDefs(i.mutatedEvents),s=this._splitEventStore(i.mutatedEvents,r),a=o=>{e[o]||(e[o]={affectedEvents:t[o]||Tc,mutatedEvents:s[o]||Tc,isEvent:i.isEvent})};for(let o in t)a(o);for(let o in s)a(o)}return e}}function Pk(n,i,e){let t=[];n&&t.push(n),i&&t.push(i);let r={"":d0(t)};return e&&Object.assign(r,e),r}function k0(n,i,e,t){return{dow:n.getUTCDay(),isDisabled:!!(t&&(!t.activeRange||!Dr(t.activeRange,n))),isOther:!!(t&&!Dr(t.currentRange,n)),isToday:!!(i&&Dr(i,n)),isPast:!!(i&&n<i.start),isFuture:!!(i&&n>=i.end)}}function zd(n,i){let e=["fc-day",`fc-day-${WA[n.dow]}`];return n.isDisabled?e.push("fc-day-disabled"):(n.isToday&&(e.push("fc-day-today"),e.push(i.getClass("today"))),n.isPast&&e.push("fc-day-past"),n.isFuture&&e.push("fc-day-future"),n.isOther&&e.push("fc-day-other")),e}const Hk=tt({year:"numeric",month:"long",day:"numeric"}),Bk=tt({week:"long"});function _l(n,i,e="day",t=!0){const{dateEnv:r,options:s,calendarApi:a}=n;let o=r.format(i,e==="week"?Bk:Hk);if(s.navLinks){let l=r.toDate(i);const h=c=>{let u=e==="day"?s.navLinkDayClick:e==="week"?s.navLinkWeekClick:null;typeof u=="function"?u.call(a,r.toDate(i),c):(typeof u=="string"&&(e=u),a.zoomTo(i,e))};return Object.assign({title:qa(s.navLinkHint,[o,l],o),"data-navlink":""},t?Qy(h):{onClick:h})}return{"aria-label":o}}let Dc=null;function Fk(){return Dc===null&&(Dc=Wk()),Dc}function Wk(){let n=document.createElement("div");_a(n,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),n.innerHTML="<div></div>",document.body.appendChild(n);let e=n.firstChild.getBoundingClientRect().left>n.getBoundingClientRect().left;return Dd(n),e}let Ac;function _k(){return Ac||(Ac=qk()),Ac}function qk(){let n=document.createElement("div");n.style.overflow="scroll",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",document.body.appendChild(n);let i=I0(n);return document.body.removeChild(n),i}function I0(n){return{x:n.offsetHeight-n.clientHeight,y:n.offsetWidth-n.clientWidth}}function zk(n,i=!1){let e=window.getComputedStyle(n),t=parseInt(e.borderLeftWidth,10)||0,r=parseInt(e.borderRightWidth,10)||0,s=parseInt(e.borderTopWidth,10)||0,a=parseInt(e.borderBottomWidth,10)||0,o=I0(n),l=o.y-t-r,h=o.x-s-a,c={borderLeft:t,borderRight:r,borderTop:s,borderBottom:a,scrollbarBottom:h,scrollbarLeft:0,scrollbarRight:0};return Fk()&&e.direction==="rtl"?c.scrollbarLeft=l:c.scrollbarRight=l,i&&(c.paddingLeft=parseInt(e.paddingLeft,10)||0,c.paddingRight=parseInt(e.paddingRight,10)||0,c.paddingTop=parseInt(e.paddingTop,10)||0,c.paddingBottom=parseInt(e.paddingBottom,10)||0),c}function jk(n,i=!1,e){let t=jd(n),r=zk(n,i),s={left:t.left+r.borderLeft+r.scrollbarLeft,right:t.right-r.borderRight-r.scrollbarRight,top:t.top+r.borderTop,bottom:t.bottom-r.borderBottom-r.scrollbarBottom};return i&&(s.left+=r.paddingLeft,s.right-=r.paddingRight,s.top+=r.paddingTop,s.bottom-=r.paddingBottom),s}function jd(n){let i=n.getBoundingClientRect();return{left:i.left+window.scrollX,top:i.top+window.scrollY,right:i.right+window.scrollX,bottom:i.bottom+window.scrollY}}function Uk(n){let i=M0(n),e=n.getBoundingClientRect();for(let t of i){let r=x0(e,t.getBoundingClientRect());if(r)e=r;else return null}return e}function M0(n){let i=[];for(;n instanceof HTMLElement;){let e=window.getComputedStyle(n);if(e.position==="fixed")break;/(auto|scroll)/.test(e.overflow+e.overflowY+e.overflowX)&&i.push(n),n=n.parentNode}return i}class Bn{constructor(i,e,t,r){this.els=e;let s=this.originClientRect=i.getBoundingClientRect();t&&this.buildElHorizontals(s.left),r&&this.buildElVerticals(s.top)}buildElHorizontals(i){let e=[],t=[];for(let r of this.els){let s=r.getBoundingClientRect();e.push(s.left-i),t.push(s.right-i)}this.lefts=e,this.rights=t}buildElVerticals(i){let e=[],t=[];for(let r of this.els){let s=r.getBoundingClientRect();e.push(s.top-i),t.push(s.bottom-i)}this.tops=e,this.bottoms=t}leftToIndex(i){let{lefts:e,rights:t}=this,r=e.length,s;for(s=0;s<r;s+=1)if(i>=e[s]&&i<t[s])return s}topToIndex(i){let{tops:e,bottoms:t}=this,r=e.length,s;for(s=0;s<r;s+=1)if(i>=e[s]&&i<t[s])return s}getWidth(i){return this.rights[i]-this.lefts[i]}getHeight(i){return this.bottoms[i]-this.tops[i]}similarTo(i){return $o(this.tops||[],i.tops||[])&&$o(this.bottoms||[],i.bottoms||[])&&$o(this.lefts||[],i.lefts||[])&&$o(this.rights||[],i.rights||[])}}function $o(n,i){const e=n.length;if(e!==i.length)return!1;for(let t=0;t<e;t++)if(Math.round(n[t])!==Math.round(i[t]))return!1;return!0}class Ud{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class Yk extends Ud{constructor(i){super(),this.el=i}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(i){this.el.scrollTop=i}setScrollLeft(i){this.el.scrollLeft=i}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class Gk extends Ud{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(i){window.scroll(window.scrollX,i)}setScrollLeft(i){window.scroll(i,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class ar extends Le{constructor(){super(...arguments),this.uid=Qs()}prepareHits(){}queryHit(i,e,t,r){return null}isValidSegDownEl(i){return!this.props.eventDrag&&!this.props.eventResize&&!Ht(i,".fc-event-mirror")}isValidDateDownEl(i){return!Ht(i,".fc-event:not(.fc-bg-event)")&&!Ht(i,".fc-more-link")&&!Ht(i,"a[data-navlink]")&&!Ht(i,".fc-popover")}}class O0{constructor(i=e=>e.thickness||1){this.getEntryThickness=i,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(i){let e=[];for(let t of i)this.insertEntry(t,e);return e}insertEntry(i,e){let t=this.findInsertion(i);this.isInsertionValid(t,i)?this.insertEntryAt(i,t):this.handleInvalidInsertion(t,i,e)}isInsertionValid(i,e){return(this.maxCoord===-1||i.levelCoord+this.getEntryThickness(e)<=this.maxCoord)&&(this.maxStackCnt===-1||i.stackCnt<this.maxStackCnt)}handleInvalidInsertion(i,e,t){if(this.allowReslicing&&i.touchingEntry){const r=Object.assign(Object.assign({},e),{span:Yd(e.span,i.touchingEntry.span)});t.push(r),this.splitEntry(e,i.touchingEntry,t)}else t.push(e)}splitEntry(i,e,t){let r=i.span,s=e.span;r.start<s.start&&this.insertEntry({index:i.index,thickness:i.thickness,span:{start:r.start,end:s.start}},t),r.end>s.end&&this.insertEntry({index:i.index,thickness:i.thickness,span:{start:s.end,end:r.end}},t)}insertEntryAt(i,e){let{entriesByLevel:t,levelCoords:r}=this;e.lateral===-1?(xc(r,e.level,e.levelCoord),xc(t,e.level,[i])):xc(t[e.level],e.lateral,i),this.stackCnts[qs(i)]=e.stackCnt}findInsertion(i){let{levelCoords:e,entriesByLevel:t,strictOrder:r,stackCnts:s}=this,a=e.length,o=0,l=-1,h=-1,c=null,u=0;for(let v=0;v<a;v+=1){const m=e[v];if(!r&&m>=o+this.getEntryThickness(i))break;let g=t[v],y,b=Du(g,i.span.start,Tu),E=b[0]+b[1];for(;(y=g[E])&&y.span.start<i.span.end;){let w=m+this.getEntryThickness(y);w>o&&(o=w,c=y,l=v,h=E),w===o&&(u=Math.max(u,s[qs(y)]+1)),E+=1}}let p=0;if(c)for(p=l+1;p<a&&e[p]<o;)p+=1;let f=-1;return p<a&&e[p]===o&&(f=Du(t[p],i.span.end,Tu)[0]),{touchingLevel:l,touchingLateral:h,touchingEntry:c,stackCnt:u,levelCoord:o,level:p,lateral:f}}toRects(){let{entriesByLevel:i,levelCoords:e}=this,t=i.length,r=[];for(let s=0;s<t;s+=1){let a=i[s],o=e[s];for(let l of a)r.push(Object.assign(Object.assign({},l),{thickness:this.getEntryThickness(l),levelCoord:o}))}return r}}function Tu(n){return n.span.end}function qs(n){return n.index+":"+n.span.start}function $k(n){let i=[];for(let e of n){let t=[],r={span:e.span,entries:[e]};for(let s of i)Yd(s.span,r.span)?r={entries:s.entries.concat(r.entries),span:Kk(s.span,r.span)}:t.push(s);t.push(r),i=t}return i}function Kk(n,i){return{start:Math.min(n.start,i.start),end:Math.max(n.end,i.end)}}function Yd(n,i){let e=Math.max(n.start,i.start),t=Math.min(n.end,i.end);return e<t?{start:e,end:t}:null}function xc(n,i,e){n.splice(i,0,e)}function Du(n,i,e){let t=0,r=n.length;if(!r||i<e(n[t]))return[0,0];if(i>e(n[r-1]))return[r,0];for(;t<r;){let s=Math.floor(t+(r-t)/2),a=e(n[s]);if(i<a)r=s;else if(i>a)t=s+1;else return[s,1]}return[t,0]}class Qk{constructor(i,e){this.emitter=new ph}destroy(){}setMirrorIsVisible(i){}setMirrorNeedsRevert(i){}setAutoScrollEnabled(i){}}const Gd={};function Xk(n,i){return!n||i>10?tt({weekday:"short"}):i>1?tt({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):tt({weekday:"long"})}const R0="fc-col-header-cell";function N0(n){return n.text}class Zk extends Le{render(){let{dateEnv:i,options:e,theme:t,viewApi:r}=this.context,{props:s}=this,{date:a,dateProfile:o}=s,l=k0(a,s.todayRange,null,o),h=[R0].concat(zd(l,t)),c=i.format(a,s.dayHeaderFormat),u=!l.isDisabled&&s.colCnt>1?_l(this.context,a):{},p=i.toDate(a);i.namedTimeZoneImpl&&(p=ns(p,36e5));let f=Object.assign(Object.assign(Object.assign({date:p,view:r},s.extraRenderProps),{text:c}),l);return k(fi,{elTag:"th",elClasses:h,elAttrs:Object.assign({role:"columnheader",colSpan:s.colSpan,"data-date":l.isDisabled?void 0:Id(a)},s.extraDataAttrs),renderProps:f,generatorName:"dayHeaderContent",customGenerator:e.dayHeaderContent,defaultGenerator:N0,classNameGenerator:e.dayHeaderClassNames,didMount:e.dayHeaderDidMount,willUnmount:e.dayHeaderWillUnmount},v=>k("div",{className:"fc-scrollgrid-sync-inner"},!l.isDisabled&&k(v,{elTag:"a",elAttrs:u,elClasses:["fc-col-header-cell-cushion",s.isSticky&&"fc-sticky"]})))}}const Jk=tt({weekday:"long"});class eI extends Le{render(){let{props:i}=this,{dateEnv:e,theme:t,viewApi:r,options:s}=this.context,a=xt(new Date(2592e5),i.dow),o={dow:i.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},l=e.format(a,i.dayHeaderFormat),h=Object.assign(Object.assign(Object.assign(Object.assign({date:a},o),{view:r}),i.extraRenderProps),{text:l});return k(fi,{elTag:"th",elClasses:[R0,...zd(o,t),...i.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:i.colSpan},i.extraDataAttrs),renderProps:h,generatorName:"dayHeaderContent",customGenerator:s.dayHeaderContent,defaultGenerator:N0,classNameGenerator:s.dayHeaderClassNames,didMount:s.dayHeaderDidMount,willUnmount:s.dayHeaderWillUnmount},c=>k("div",{className:"fc-scrollgrid-sync-inner"},k(c,{elTag:"a",elClasses:["fc-col-header-cell-cushion",i.isSticky&&"fc-sticky"],elAttrs:{"aria-label":e.format(a,Jk)}})))}}class L0 extends Le{constructor(){super(...arguments),this.createDayHeaderFormatter=pe(tI)}render(){let{context:i}=this,{dates:e,dateProfile:t,datesRepDistinctDays:r,renderIntro:s}=this.props,a=this.createDayHeaderFormatter(i.options.dayHeaderFormat,r,e.length);return k(Un,{unit:"day"},(o,l)=>k("tr",{role:"row"},s&&s("day"),e.map(h=>r?k(Zk,{key:h.toISOString(),date:h,dateProfile:t,todayRange:l,colCnt:e.length,dayHeaderFormat:a}):k(eI,{key:h.getUTCDay(),dow:h.getUTCDay(),dayHeaderFormat:a}))))}}function tI(n,i,e){return n||Xk(i,e)}class V0{constructor(i,e){let t=i.start,{end:r}=i,s=[],a=[],o=-1;for(;t<r;)e.isHiddenDay(t)?s.push(o+.5):(o+=1,s.push(o),a.push(t)),t=xt(t,1);this.dates=a,this.indices=s,this.cnt=a.length}sliceRange(i){let e=this.getDateDayIndex(i.start),t=this.getDateDayIndex(xt(i.end,-1)),r=Math.max(0,e),s=Math.min(this.cnt-1,t);return r=Math.ceil(r),s=Math.floor(s),r<=s?{firstIndex:r,lastIndex:s,isStart:e===r,isEnd:t===s}:null}getDateDayIndex(i){let{indices:e}=this,t=Math.floor(Xs(this.dates[0],i));return t<0?e[0]-1:t>=e.length?e[e.length-1]+1:e[t]}}class P0{constructor(i,e){let{dates:t}=i,r,s,a;if(e){for(s=t[0].getUTCDay(),r=1;r<t.length&&t[r].getUTCDay()!==s;r+=1);a=Math.ceil(t.length/r)}else a=1,r=t.length;this.rowCnt=a,this.colCnt=r,this.daySeries=i,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let i=[];for(let e=0;e<this.rowCnt;e+=1){let t=[];for(let r=0;r<this.colCnt;r+=1)t.push(this.buildCell(e,r));i.push(t)}return i}buildCell(i,e){let t=this.daySeries.dates[i*this.colCnt+e];return{key:t.toISOString(),date:t}}buildHeaderDates(){let i=[];for(let e=0;e<this.colCnt;e+=1)i.push(this.cells[0][e].date);return i}sliceRange(i){let{colCnt:e}=this,t=this.daySeries.sliceRange(i),r=[];if(t){let{firstIndex:s,lastIndex:a}=t,o=s;for(;o<=a;){let l=Math.floor(o/e),h=Math.min((l+1)*e,a+1);r.push({row:l,firstCol:o%e,lastCol:(h-1)%e,isStart:t.isStart&&o===s,isEnd:t.isEnd&&h-1===a}),o=h}}return r}}class H0{constructor(){this.sliceBusinessHours=pe(this._sliceBusinessHours),this.sliceDateSelection=pe(this._sliceDateSpan),this.sliceEventStore=pe(this._sliceEventStore),this.sliceEventDrag=pe(this._sliceInteraction),this.sliceEventResize=pe(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(i,e,t,r,...s){let{eventUiBases:a}=i,o=this.sliceEventStore(i.eventStore,a,e,t,...s);return{dateSelectionSegs:this.sliceDateSelection(i.dateSelection,e,t,a,r,...s),businessHourSegs:this.sliceBusinessHours(i.businessHours,e,t,r,...s),fgEventSegs:o.fg,bgEventSegs:o.bg,eventDrag:this.sliceEventDrag(i.eventDrag,a,e,t,...s),eventResize:this.sliceEventResize(i.eventResize,a,e,t,...s),eventSelection:i.eventSelection}}sliceNowDate(i,e,t,r,...s){return this._sliceDateSpan({range:{start:i,end:ns(i,1)},allDay:!1},e,t,{},r,...s)}_sliceBusinessHours(i,e,t,r,...s){return i?this._sliceEventStore(Gs(i,Ko(e,!!t),r),{},e,t,...s).bg:[]}_sliceEventStore(i,e,t,r,...s){if(i){let a=Zv(i,e,Ko(t,!!r),r);return{bg:this.sliceEventRanges(a.bg,s),fg:this.sliceEventRanges(a.fg,s)}}return{bg:[],fg:[]}}_sliceInteraction(i,e,t,r,...s){if(!i)return null;let a=Zv(i.mutatedEvents,e,Ko(t,!!r),r);return{segs:this.sliceEventRanges(a.fg,s),affectedInstances:i.affectedEvents.instances,isEvent:i.isEvent}}_sliceDateSpan(i,e,t,r,s,...a){if(!i)return[];let o=Ko(e,!!t),l=Ys(i.range,o);if(l){i=Object.assign(Object.assign({},i),{range:l});let h=wk(i,r,s),c=this.sliceRange(i.range,...a);for(let u of c)u.eventRange=h;return c}return[]}sliceEventRanges(i,e){let t=[];for(let r of i)t.push(...this.sliceEventRange(r,e));return t}sliceEventRange(i,e){let t=i.range;this.forceDayIfListItem&&i.ui.display==="list-item"&&(t={start:t.start,end:xt(t.start,1)});let r=this.sliceRange(t,...e);for(let s of r)s.eventRange=i,s.isStart=i.isStart&&s.isStart,s.isEnd=i.isEnd&&s.isEnd;return r}}function Ko(n,i){let e=n.activeRange;return i?e:{start:ns(e.start,n.slotMinTime.milliseconds),end:ns(e.end,n.slotMaxTime.milliseconds-864e5)}}function B0(n,i,e){let{instances:t}=n.mutatedEvents;for(let r in t)if(!uh(i.validRange,t[r].range))return!1;return F0({eventDrag:n},e)}function iI(n,i,e){return uh(i.validRange,n.range)?F0({dateSelection:n},e):!1}function F0(n,i){let e=i.getCurrentData(),t=Object.assign({businessHours:e.businessHours,dateSelection:"",eventStore:e.eventStore,eventUiBases:e.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},n);return(i.pluginHooks.isPropsValid||rI)(t,i)}function rI(n,i,e={},t){return!(n.eventDrag&&!sI(n,i,e,t)||n.dateSelection&&!nI(n,i,e,t))}function sI(n,i,e,t){let r=i.getCurrentData(),s=n.eventDrag,a=s.mutatedEvents,o=a.defs,l=a.instances,h=Wl(o,s.isEvent?n.eventUiBases:{"":r.selectionConfig});t&&(h=kr(h,t));let c=tk(n.eventStore,s.affectedEvents.instances),u=c.defs,p=c.instances,f=Wl(u,n.eventUiBases);for(let v in l){let m=l[v],g=m.range,y=h[m.defId],b=o[m.defId];if(!W0(y.constraints,g,c,n.businessHours,i))return!1;let{eventOverlap:E}=i.options,w=typeof E=="function"?E:null;for(let D in p){let N=p[D];if(Vd(g,N.range)&&(f[N.defId].overlap===!1&&s.isEvent||y.overlap===!1||w&&!w(new Qe(i,u[N.defId],N),new Qe(i,b,m))))return!1}let A=r.eventStore;for(let D of y.allows){let N=Object.assign(Object.assign({},e),{range:m.range,allDay:b.allDay}),x=A.defs[b.defId],j=A.instances[v],q;if(x?q=new Qe(i,x,j):q=new Qe(i,b),!D(Wd(N,i),q))return!1}}return!0}function nI(n,i,e,t){let r=n.eventStore,s=r.defs,a=r.instances,o=n.dateSelection,l=o.range,{selectionConfig:h}=i.getCurrentData();if(t&&(h=t(h)),!W0(h.constraints,l,r,n.businessHours,i))return!1;let{selectOverlap:c}=i.options,u=typeof c=="function"?c:null;for(let p in a){let f=a[p];if(Vd(l,f.range)&&(h.overlap===!1||u&&!u(new Qe(i,s[f.defId],f),null)))return!1}for(let p of h.allows){let f=Object.assign(Object.assign({},e),o);if(!p(Wd(f,i),null))return!1}return!0}function W0(n,i,e,t,r){for(let s of n)if(!oI(aI(s,i,e,t,r),i))return!1;return!0}function aI(n,i,e,t,r){return n==="businessHours"?kc(Gs(t,i,r)):typeof n=="string"?kc(dh(e,s=>s.groupId===n)):typeof n=="object"&&n?kc(Gs(n,i,r)):[]}function kc(n){let{instances:i}=n,e=[];for(let t in i)e.push(i[t].range);return e}function oI(n,i){for(let e of n)if(uh(e,i))return!0;return!1}const Qo=/^(visible|hidden)$/;class lI extends Le{constructor(){super(...arguments),this.handleEl=i=>{this.el=i,sr(this.props.elRef,i)}}render(){let{props:i}=this,{liquid:e,liquidIsAbsolute:t}=i,r=e&&t,s=["fc-scroller"];return e&&(t?s.push("fc-scroller-liquid-absolute"):s.push("fc-scroller-liquid")),k("div",{ref:this.handleEl,className:s.join(" "),style:{overflowX:i.overflowX,overflowY:i.overflowY,left:r&&-(i.overcomeLeft||0)||"",right:r&&-(i.overcomeRight||0)||"",bottom:r&&-(i.overcomeBottom||0)||"",marginLeft:!r&&-(i.overcomeLeft||0)||"",marginRight:!r&&-(i.overcomeRight||0)||"",marginBottom:!r&&-(i.overcomeBottom||0)||"",maxHeight:i.maxHeight||""}},i.children)}needsXScrolling(){if(Qo.test(this.props.overflowX))return!1;let{el:i}=this,e=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:t}=i;for(let r=0;r<t.length;r+=1)if(t[r].getBoundingClientRect().width>e)return!0;return!1}needsYScrolling(){if(Qo.test(this.props.overflowY))return!1;let{el:i}=this,e=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:t}=i;for(let r=0;r<t.length;r+=1)if(t[r].getBoundingClientRect().height>e)return!0;return!1}getXScrollbarWidth(){return Qo.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Qo.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class Er{constructor(i){this.masterCallback=i,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(e,t)=>{let{depths:r,currentMap:s}=this,a=!1,o=!1;e!==null?(a=t in s,s[t]=e,r[t]=(r[t]||0)+1,o=!0):(r[t]-=1,r[t]||(delete s[t],delete this.callbackMap[t],a=!0)),this.masterCallback&&(a&&this.masterCallback(null,String(t)),o&&this.masterCallback(e,String(t)))}}createRef(i){let e=this.callbackMap[i];return e||(e=this.callbackMap[i]=t=>{this.handleValue(t,String(i))}),e}collect(i,e,t){return Sx(this.currentMap,i,e,t)}getAll(){return Nd(this.currentMap)}}function hI(n){let i=yA(n,".fc-scrollgrid-shrink"),e=0;for(let t of i)e=Math.max(e,RA(t));return Math.ceil(e)}function _0(n,i){return n.liquid&&i.liquid}function cI(n,i){return i.maxHeight!=null||_0(n,i)}function uI(n,i,e,t){let{expandRows:r}=e;return typeof i.content=="function"?i.content(e):k("table",{role:"presentation",className:[i.tableClassName,n.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:r?e.clientHeight:""}},e.tableColGroupNode,k(t?"thead":"tbody",{role:"presentation"},typeof i.rowContent=="function"?i.rowContent(e):i.rowContent))}function dI(n,i){return ss(n,i,Bi)}function pI(n,i){let e=[];for(let t of n){let r=t.span||1;for(let s=0;s<r;s+=1)e.push(k("col",{style:{width:t.width==="shrink"?fI(i):t.width||"",minWidth:t.minWidth||""}}))}return k("colgroup",{},...e)}function fI(n){return n??4}function vI(n){for(let i of n)if(i.width==="shrink")return!0;return!1}function mI(n,i){let e=["fc-scrollgrid",i.theme.getClass("table")];return n&&e.push("fc-scrollgrid-liquid"),e}function gI(n,i){let e=["fc-scrollgrid-section",`fc-scrollgrid-section-${n.type}`,n.className];return i&&n.liquid&&n.maxHeight==null&&e.push("fc-scrollgrid-section-liquid"),n.isSticky&&e.push("fc-scrollgrid-section-sticky"),e}function Au(n){return k("div",{className:"fc-scrollgrid-sticky-shim",style:{width:n.clientWidth,minWidth:n.tableMinWidth}})}function ql(n){let{stickyHeaderDates:i}=n;return(i==null||i==="auto")&&(i=n.height==="auto"||n.viewHeight==="auto"),i}function q0(n){let{stickyFooterScrollbar:i}=n;return(i==null||i==="auto")&&(i=n.height==="auto"||n.viewHeight==="auto"),i}class $d extends Le{constructor(){super(...arguments),this.processCols=pe(i=>i,dI),this.renderMicroColGroup=pe(pI),this.scrollerRefs=new Er,this.scrollerElRefs=new Er(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:i,state:e,context:t}=this,r=i.sections||[],s=this.processCols(i.cols),a=this.renderMicroColGroup(s,e.shrinkWidth),o=mI(i.liquid,t);i.collapsibleWidth&&o.push("fc-scrollgrid-collapsible");let l=r.length,h=0,c,u=[],p=[],f=[];for(;h<l&&(c=r[h]).type==="header";)u.push(this.renderSection(c,a,!0)),h+=1;for(;h<l&&(c=r[h]).type==="body";)p.push(this.renderSection(c,a,!1)),h+=1;for(;h<l&&(c=r[h]).type==="footer";)f.push(this.renderSection(c,a,!0)),h+=1;let v=!A0();const m={role:"rowgroup"};return k("table",{role:"grid",className:o.join(" "),style:{height:i.height}},!!(!v&&u.length)&&k("thead",m,...u),!!(!v&&p.length)&&k("tbody",m,...p),!!(!v&&f.length)&&k("tfoot",m,...f),v&&k("tbody",m,...u,...p,...f))}renderSection(i,e,t){return"outerContent"in i?k(Ue,{key:i.key},i.outerContent):k("tr",{key:i.key,role:"presentation",className:gI(i,this.props.liquid).join(" ")},this.renderChunkTd(i,e,i.chunk,t))}renderChunkTd(i,e,t,r){if("outerContent"in t)return t.outerContent;let{props:s}=this,{forceYScrollbars:a,scrollerClientWidths:o,scrollerClientHeights:l}=this.state,h=cI(s,i),c=_0(s,i),u=s.liquid?a?"scroll":h?"auto":"hidden":"visible",p=i.key,f=uI(i,t,{tableColGroupNode:e,tableMinWidth:"",clientWidth:!s.collapsibleWidth&&o[p]!==void 0?o[p]:null,clientHeight:l[p]!==void 0?l[p]:null,expandRows:i.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},r);return k(r?"th":"td",{ref:t.elRef,role:"presentation"},k("div",{className:`fc-scroller-harness${c?" fc-scroller-harness-liquid":""}`},k(lI,{ref:this.scrollerRefs.createRef(p),elRef:this.scrollerElRefs.createRef(p),overflowY:u,overflowX:s.liquid?"hidden":"visible",maxHeight:i.maxHeight,liquid:c,liquidIsAbsolute:!0},f)))}_handleScrollerEl(i,e){let t=yI(this.props.sections,e);t&&sr(t.chunk.scrollerElRef,i)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return vI(this.props.cols)?hI(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let i=_k(),{scrollerRefs:e,scrollerElRefs:t}=this,r=!1,s={},a={};for(let o in e.currentMap){let l=e.currentMap[o];if(l&&l.needsYScrolling()){r=!0;break}}for(let o of this.props.sections){let l=o.key,h=t.currentMap[l];if(h){let c=h.parentNode;s[l]=Math.floor(c.getBoundingClientRect().width-(r?i.y:0)),a[l]=Math.floor(c.getBoundingClientRect().height)}}return{forceYScrollbars:r,scrollerClientWidths:s,scrollerClientHeights:a}}}$d.addStateEquality({scrollerClientWidths:Bi,scrollerClientHeights:Bi});function yI(n,i){for(let e of n)if(e.key===i)return e;return null}class Kd extends Le{constructor(){super(...arguments),this.buildPublicEvent=pe((i,e,t)=>new Qe(i,e,t)),this.handleEl=i=>{this.el=i,sr(this.props.elRef,i),i&&Jv(i,this.props.seg)}}render(){const{props:i,context:e}=this,{options:t}=e,{seg:r}=i,{eventRange:s}=r,{ui:a}=s,o={event:this.buildPublicEvent(e,s.def,s.instance),view:e.viewApi,timeText:i.timeText,textColor:a.textColor,backgroundColor:a.backgroundColor,borderColor:a.borderColor,isDraggable:!i.disableDragging&&pk(r,e),isStartResizable:!i.disableResizing&&fk(r,e),isEndResizable:!i.disableResizing&&vk(r),isMirror:!!(i.isDragging||i.isResizing||i.isDateSelecting),isStart:!!r.isStart,isEnd:!!r.isEnd,isPast:!!i.isPast,isFuture:!!i.isFuture,isToday:!!i.isToday,isSelected:!!i.isSelected,isDragging:!!i.isDragging,isResizing:!!i.isResizing};return k(fi,{elRef:this.handleEl,elTag:i.elTag,elAttrs:i.elAttrs,elClasses:[...mk(o),...r.eventRange.ui.classNames,...i.elClasses||[]],elStyle:i.elStyle,renderProps:o,generatorName:"eventContent",customGenerator:t.eventContent,defaultGenerator:i.defaultGenerator,classNameGenerator:t.eventClassNames,didMount:t.eventDidMount,willUnmount:t.eventWillUnmount},i.children)}componentDidUpdate(i){this.el&&this.props.seg!==i.seg&&Jv(this.el,this.props.seg)}}class Qd extends Le{render(){let{props:i,context:e}=this,{options:t}=e,{seg:r}=i,{ui:s}=r.eventRange,a=t.eventTimeFormat||i.defaultTimeFormat,o=E0(r,a,e,i.defaultDisplayEventTime,i.defaultDisplayEventEnd);return k(Kd,Object.assign({},i,{elTag:"a",elStyle:{borderColor:s.borderColor,backgroundColor:s.backgroundColor},elAttrs:w0(r,e),defaultGenerator:bI,timeText:o}),(l,h)=>k(Ue,null,k(l,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:h.textColor}}),!!h.isStartResizable&&k("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!h.isEndResizable&&k("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}Qd.addPropsEquality({seg:Bi});function bI(n){return k("div",{className:"fc-event-main-frame"},n.timeText&&k("div",{className:"fc-event-time"},n.timeText),k("div",{className:"fc-event-title-container"},k("div",{className:"fc-event-title fc-sticky"},n.event.title||k(Ue,null,""))))}const Xd=n=>k(Rr.Consumer,null,i=>{let{options:e}=i,t={isAxis:n.isAxis,date:i.dateEnv.toDate(n.date),view:i.viewApi};return k(fi,{elRef:n.elRef,elTag:n.elTag||"div",elAttrs:n.elAttrs,elClasses:n.elClasses,elStyle:n.elStyle,renderProps:t,generatorName:"nowIndicatorContent",customGenerator:e.nowIndicatorContent,classNameGenerator:e.nowIndicatorClassNames,didMount:e.nowIndicatorDidMount,willUnmount:e.nowIndicatorWillUnmount},n.children)}),SI=tt({day:"numeric"});class Zd extends Le{constructor(){super(...arguments),this.refineRenderProps=ul(EI)}render(){let{props:i,context:e}=this,{options:t}=e,r=this.refineRenderProps({date:i.date,dateProfile:i.dateProfile,todayRange:i.todayRange,isMonthStart:i.isMonthStart||!1,showDayNumber:i.showDayNumber,extraRenderProps:i.extraRenderProps,viewApi:e.viewApi,dateEnv:e.dateEnv,monthStartFormat:t.monthStartFormat});return k(fi,{elRef:i.elRef,elTag:i.elTag,elAttrs:Object.assign(Object.assign({},i.elAttrs),r.isDisabled?{}:{"data-date":Id(i.date)}),elClasses:[...zd(r,e.theme),...i.elClasses||[]],elStyle:i.elStyle,renderProps:r,generatorName:"dayCellContent",customGenerator:t.dayCellContent,defaultGenerator:i.defaultGenerator,classNameGenerator:r.isDisabled?void 0:t.dayCellClassNames,didMount:t.dayCellDidMount,willUnmount:t.dayCellWillUnmount},i.children)}}function Jd(n){return!!(n.dayCellContent||Su("dayCellContent",n))}function EI(n){let{date:i,dateEnv:e,dateProfile:t,isMonthStart:r}=n,s=k0(i,n.todayRange,null,t),a=n.showDayNumber?e.format(i,r?n.monthStartFormat:SI):"";return Object.assign(Object.assign(Object.assign({date:e.toDate(i),view:n.viewApi},s),{isMonthStart:r,dayNumberText:a}),n.extraRenderProps)}class z0 extends Le{render(){let{props:i}=this,{seg:e}=i;return k(Kd,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:e.eventRange.ui.backgroundColor},defaultGenerator:CI,seg:e,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:i.isPast,isFuture:i.isFuture,isToday:i.isToday,disableDragging:!0,disableResizing:!0})}}function CI(n){let{title:i}=n.event;return i&&k("div",{className:"fc-event-title"},n.event.title)}function j0(n){return k("div",{className:`fc-${n}`})}const U0=n=>k(Rr.Consumer,null,i=>{let{dateEnv:e,options:t}=i,{date:r}=n,s=t.weekNumberFormat||n.defaultFormat,a=e.computeWeekNumber(r),o=e.format(r,s),l={num:a,text:o,date:r};return k(fi,{elRef:n.elRef,elTag:n.elTag,elAttrs:n.elAttrs,elClasses:n.elClasses,elStyle:n.elStyle,renderProps:l,generatorName:"weekNumberContent",customGenerator:t.weekNumberContent,defaultGenerator:wI,classNameGenerator:t.weekNumberClassNames,didMount:t.weekNumberDidMount,willUnmount:t.weekNumberWillUnmount},n.children)});function wI(n){return n.text}const Ic=10;class TI extends Le{constructor(){super(...arguments),this.state={titleId:hh()},this.handleRootEl=i=>{this.rootEl=i,this.props.elRef&&sr(this.props.elRef,i)},this.handleDocumentMouseDown=i=>{const e=$y(i);this.rootEl.contains(e)||this.handleCloseClick()},this.handleDocumentKeyDown=i=>{i.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:i}=this.props;i&&i()}}render(){let{theme:i,options:e}=this.context,{props:t,state:r}=this,s=["fc-popover",i.getClass("popover")].concat(t.extraClassNames||[]);return sA(k("div",Object.assign({},t.extraAttrs,{id:t.id,className:s.join(" "),"aria-labelledby":r.titleId,ref:this.handleRootEl}),k("div",{className:"fc-popover-header "+i.getClass("popoverHeader")},k("span",{className:"fc-popover-title",id:r.titleId},t.title),k("span",{className:"fc-popover-close "+i.getIconClass("close"),title:e.closeHint,onClick:this.handleCloseClick})),k("div",{className:"fc-popover-body "+i.getClass("popoverContent")},t.children)),t.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:i}=this.context,{alignmentEl:e,alignGridTop:t}=this.props,{rootEl:r}=this,s=Uk(e);if(s){let a=r.getBoundingClientRect(),o=t?Ht(e,".fc-scrollgrid").getBoundingClientRect().top:s.top,l=i?s.right-a.width:s.left;o=Math.max(o,Ic),l=Math.min(l,document.documentElement.clientWidth-Ic-a.width),l=Math.max(l,Ic);let h=r.offsetParent.getBoundingClientRect();_a(r,{top:o-h.top,left:l-h.left})}}}class DI extends ar{constructor(){super(...arguments),this.handleRootEl=i=>{this.rootEl=i,i?this.context.registerInteractiveComponent(this,{el:i,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:i,dateEnv:e}=this.context,{props:t}=this,{startDate:r,todayRange:s,dateProfile:a}=t,o=e.format(r,i.dayPopoverFormat);return k(Zd,{elRef:this.handleRootEl,date:r,dateProfile:a,todayRange:s},(l,h,c)=>k(TI,{elRef:c.ref,id:t.id,title:o,extraClassNames:["fc-more-popover"].concat(c.className||[]),extraAttrs:c,parentEl:t.parentEl,alignmentEl:t.alignmentEl,alignGridTop:t.alignGridTop,onClose:t.onClose},Jd(i)&&k(l,{elTag:"div",elClasses:["fc-more-popover-misc"]}),t.children))}queryHit(i,e,t,r){let{rootEl:s,props:a}=this;return i>=0&&i<t&&e>=0&&e<r?{dateProfile:a.dateProfile,dateSpan:Object.assign({allDay:!a.forceTimed,range:{start:a.startDate,end:a.endDate}},a.extraDateSpan),dayEl:s,rect:{left:0,top:0,right:t,bottom:r},layer:1}:null}}class Y0 extends Le{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:hh()},this.handleLinkEl=i=>{this.linkEl=i,this.props.elRef&&sr(this.props.elRef,i)},this.handleClick=i=>{let{props:e,context:t}=this,{moreLinkClick:r}=t.options,s=tm(e).start;function a(o){let{def:l,instance:h,range:c}=o.eventRange;return{event:new Qe(t,l,h),start:t.dateEnv.toDate(c.start),end:t.dateEnv.toDate(c.end),isStart:o.isStart,isEnd:o.isEnd}}typeof r=="function"&&(r=r({date:s,allDay:!!e.allDayDate,allSegs:e.allSegs.map(a),hiddenSegs:e.hiddenSegs.map(a),jsEvent:i,view:t.viewApi})),!r||r==="popover"?this.setState({isPopoverOpen:!0}):typeof r=="string"&&t.calendarApi.zoomTo(s,r)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:i,state:e}=this;return k(Rr.Consumer,null,t=>{let{viewApi:r,options:s,calendarApi:a}=t,{moreLinkText:o}=s,{moreCnt:l}=i,h=tm(i),c=typeof o=="function"?o.call(a,l):`+${l} ${o}`,u=qa(s.moreLinkHint,[l],c),p={num:l,shortText:`+${l}`,text:c,view:r};return k(Ue,null,!!i.moreCnt&&k(fi,{elTag:i.elTag||"a",elRef:this.handleLinkEl,elClasses:[...i.elClasses||[],"fc-more-link"],elStyle:i.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},i.elAttrs),Qy(this.handleClick)),{title:u,"aria-expanded":e.isPopoverOpen,"aria-controls":e.isPopoverOpen?e.popoverId:""}),renderProps:p,generatorName:"moreLinkContent",customGenerator:s.moreLinkContent,defaultGenerator:i.defaultGenerator||AI,classNameGenerator:s.moreLinkClassNames,didMount:s.moreLinkDidMount,willUnmount:s.moreLinkWillUnmount},i.children),e.isPopoverOpen&&k(DI,{id:e.popoverId,startDate:h.start,endDate:h.end,dateProfile:i.dateProfile,todayRange:i.todayRange,extraDateSpan:i.extraDateSpan,parentEl:this.parentEl,alignmentEl:i.alignmentElRef?i.alignmentElRef.current:this.linkEl,alignGridTop:i.alignGridTop,forceTimed:i.forceTimed,onClose:this.handlePopoverClose},i.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Ht(this.linkEl,".fc-view-harness"))}}function AI(n){return n.text}function tm(n){if(n.allDayDate)return{start:n.allDayDate,end:xt(n.allDayDate,1)};let{hiddenSegs:i}=n;return{start:G0(i),end:kI(i)}}function G0(n){return n.reduce(xI).eventRange.range.start}function xI(n,i){return n.eventRange.range.start<i.eventRange.range.start?n:i}function kI(n){return n.reduce(II).eventRange.range.end}function II(n,i){return n.eventRange.range.end>i.eventRange.range.end?n:i}class MI{constructor(){this.handlers=[]}set(i){this.currentValue=i;for(let e of this.handlers)e(i)}subscribe(i){this.handlers.push(i),this.currentValue!==void 0&&i(this.currentValue)}}class OI extends MI{constructor(){super(...arguments),this.map=new Map}handle(i){const{map:e}=this;let t=!1;i.isActive?(e.set(i.id,i),t=!0):e.has(i.id)&&(e.delete(i.id),t=!0),t&&this.set(e)}}const RI=[],$0={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},K0=Object.assign(Object.assign({},$0),{buttonHints:{prev:"Previous $0",next:"Next $0",today(n,i){return i==="day"?"Today":`This ${n}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(n){return`Show ${n} more event${n===1?"":"s"}`}});function NI(n){let i=n.length>0?n[0].code:"en",e=RI.concat(n),t={en:K0};for(let r of e)t[r.code]=r;return{map:t,defaultCode:i}}function Q0(n,i){return typeof n=="object"&&!Array.isArray(n)?X0(n.code,[n.code],n):LI(n,i)}function LI(n,i){let e=[].concat(n||[]),t=VI(e,i)||K0;return X0(n,e,t)}function VI(n,i){for(let e=0;e<n.length;e+=1){let t=n[e].toLocaleLowerCase().split("-");for(let r=t.length;r>0;r-=1){let s=t.slice(0,r).join("-");if(i[s])return i[s]}}return null}function X0(n,i,e){let t=Rd([$0,e],["buttonText"]);delete t.code;let{week:r}=t;return delete t.week,{codeArg:n,codes:i,week:r,simpleNumberFormat:new Intl.NumberFormat(n),options:t}}function Nr(n){return{id:Qs(),name:n.name,premiumReleaseDate:n.premiumReleaseDate?new Date(n.premiumReleaseDate):void 0,deps:n.deps||[],reducers:n.reducers||[],isLoadingFuncs:n.isLoadingFuncs||[],contextInit:[].concat(n.contextInit||[]),eventRefiners:n.eventRefiners||{},eventDefMemberAdders:n.eventDefMemberAdders||[],eventSourceRefiners:n.eventSourceRefiners||{},isDraggableTransformers:n.isDraggableTransformers||[],eventDragMutationMassagers:n.eventDragMutationMassagers||[],eventDefMutationAppliers:n.eventDefMutationAppliers||[],dateSelectionTransformers:n.dateSelectionTransformers||[],datePointTransforms:n.datePointTransforms||[],dateSpanTransforms:n.dateSpanTransforms||[],views:n.views||{},viewPropsTransformers:n.viewPropsTransformers||[],isPropsValid:n.isPropsValid||null,externalDefTransforms:n.externalDefTransforms||[],viewContainerAppends:n.viewContainerAppends||[],eventDropTransformers:n.eventDropTransformers||[],componentInteractions:n.componentInteractions||[],calendarInteractions:n.calendarInteractions||[],themeClasses:n.themeClasses||{},eventSourceDefs:n.eventSourceDefs||[],cmdFormatter:n.cmdFormatter,recurringTypes:n.recurringTypes||[],namedTimeZonedImpl:n.namedTimeZonedImpl,initialView:n.initialView||"",elementDraggingImpl:n.elementDraggingImpl,optionChangeHandlers:n.optionChangeHandlers||{},scrollGridImpl:n.scrollGridImpl||null,listenerRefiners:n.listenerRefiners||{},optionRefiners:n.optionRefiners||{},propSetHandlers:n.propSetHandlers||{}}}function PI(n,i){let e={},t={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function r(s){for(let a of s){const o=a.name,l=e[o];l===void 0?(e[o]=a.id,r(a.deps),t=BI(t,a)):l!==a.id&&console.warn(`Duplicate plugin '${o}'`)}}return n&&r(n),r(i),t}function HI(){let n=[],i=[],e;return(t,r)=>((!e||!ss(t,n)||!ss(r,i))&&(e=PI(t,r)),n=t,i=r,e)}function BI(n,i){return{premiumReleaseDate:FI(n.premiumReleaseDate,i.premiumReleaseDate),reducers:n.reducers.concat(i.reducers),isLoadingFuncs:n.isLoadingFuncs.concat(i.isLoadingFuncs),contextInit:n.contextInit.concat(i.contextInit),eventRefiners:Object.assign(Object.assign({},n.eventRefiners),i.eventRefiners),eventDefMemberAdders:n.eventDefMemberAdders.concat(i.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},n.eventSourceRefiners),i.eventSourceRefiners),isDraggableTransformers:n.isDraggableTransformers.concat(i.isDraggableTransformers),eventDragMutationMassagers:n.eventDragMutationMassagers.concat(i.eventDragMutationMassagers),eventDefMutationAppliers:n.eventDefMutationAppliers.concat(i.eventDefMutationAppliers),dateSelectionTransformers:n.dateSelectionTransformers.concat(i.dateSelectionTransformers),datePointTransforms:n.datePointTransforms.concat(i.datePointTransforms),dateSpanTransforms:n.dateSpanTransforms.concat(i.dateSpanTransforms),views:Object.assign(Object.assign({},n.views),i.views),viewPropsTransformers:n.viewPropsTransformers.concat(i.viewPropsTransformers),isPropsValid:i.isPropsValid||n.isPropsValid,externalDefTransforms:n.externalDefTransforms.concat(i.externalDefTransforms),viewContainerAppends:n.viewContainerAppends.concat(i.viewContainerAppends),eventDropTransformers:n.eventDropTransformers.concat(i.eventDropTransformers),calendarInteractions:n.calendarInteractions.concat(i.calendarInteractions),componentInteractions:n.componentInteractions.concat(i.componentInteractions),themeClasses:Object.assign(Object.assign({},n.themeClasses),i.themeClasses),eventSourceDefs:n.eventSourceDefs.concat(i.eventSourceDefs),cmdFormatter:i.cmdFormatter||n.cmdFormatter,recurringTypes:n.recurringTypes.concat(i.recurringTypes),namedTimeZonedImpl:i.namedTimeZonedImpl||n.namedTimeZonedImpl,initialView:n.initialView||i.initialView,elementDraggingImpl:n.elementDraggingImpl||i.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},n.optionChangeHandlers),i.optionChangeHandlers),scrollGridImpl:i.scrollGridImpl||n.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},n.listenerRefiners),i.listenerRefiners),optionRefiners:Object.assign(Object.assign({},n.optionRefiners),i.optionRefiners),propSetHandlers:Object.assign(Object.assign({},n.propSetHandlers),i.propSetHandlers)}}function FI(n,i){return n===void 0?i:i===void 0?n:new Date(Math.max(n.valueOf(),i.valueOf()))}class hs extends ho{}hs.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};hs.prototype.baseIconClass="fc-icon";hs.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};hs.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};hs.prototype.iconOverrideOption="buttonIcons";hs.prototype.iconOverrideCustomButtonOption="icon";hs.prototype.iconOverridePrefix="fc-icon-";function WI(n,i){let e={},t;for(t in n)xu(t,e,n,i);for(t in i)xu(t,e,n,i);return e}function xu(n,i,e,t){if(i[n])return i[n];let r=_I(n,i,e,t);return r&&(i[n]=r),r}function _I(n,i,e,t){let r=e[n],s=t[n],a=c=>r&&r[c]!==null?r[c]:s&&s[c]!==null?s[c]:null,o=a("component"),l=a("superType"),h=null;if(l){if(l===n)throw new Error("Can't have a custom view type that references itself");h=xu(l,i,e,t)}return!o&&h&&(o=h.component),o?{type:n,component:o,defaults:Object.assign(Object.assign({},h?h.defaults:{}),r?r.rawOptions:{}),overrides:Object.assign(Object.assign({},h?h.overrides:{}),s?s.rawOptions:{})}:null}function im(n){return kr(n,qI)}function qI(n){let i=typeof n=="function"?{component:n}:n,{component:e}=i;return i.content?e=rm(i):e&&!(e.prototype instanceof Le)&&(e=rm(Object.assign(Object.assign({},i),{content:e}))),{superType:i.type,component:e,rawOptions:i}}function rm(n){return i=>k(Rr.Consumer,null,e=>k(fi,{elTag:"div",elClasses:n0(e.viewSpec),renderProps:Object.assign(Object.assign({},i),{nextDayThreshold:e.options.nextDayThreshold}),generatorName:void 0,customGenerator:n.content,classNameGenerator:n.classNames,didMount:n.didMount,willUnmount:n.willUnmount}))}function zI(n,i,e,t){let r=im(n),s=im(i.views),a=WI(r,s);return kr(a,o=>jI(o,s,i,e,t))}function jI(n,i,e,t,r){let s=n.overrides.duration||n.defaults.duration||t.duration||e.duration,a=null,o="",l="",h={};if(s&&(a=UI(s),a)){let p=bu(a);o=p.unit,p.value===1&&(l=o,h=i[o]?i[o].rawOptions:{})}let c=p=>{let f=p.buttonText||{},v=n.defaults.buttonTextKey;return v!=null&&f[v]!=null?f[v]:f[n.type]!=null?f[n.type]:f[l]!=null?f[l]:null},u=p=>{let f=p.buttonHints||{},v=n.defaults.buttonTextKey;return v!=null&&f[v]!=null?f[v]:f[n.type]!=null?f[n.type]:f[l]!=null?f[l]:null};return{type:n.type,component:n.component,duration:a,durationUnit:o,singleUnit:l,optionDefaults:n.defaults,optionOverrides:Object.assign(Object.assign({},h),n.overrides),buttonTextOverride:c(t)||c(e)||n.overrides.buttonText,buttonTextDefault:c(r)||n.defaults.buttonText||c(za)||n.type,buttonTitleOverride:u(t)||u(e)||n.overrides.buttonHint,buttonTitleDefault:u(r)||n.defaults.buttonHint||u(za)}}let sm={};function UI(n){let i=JSON.stringify(n),e=sm[i];return e===void 0&&(e=De(n),sm[i]=e),e}function YI(n,i){switch(i.type){case"CHANGE_VIEW_TYPE":n=i.viewType}return n}function GI(n,i){switch(i.type){case"CHANGE_DATE":return i.dateMarker;default:return n}}function $I(n,i,e){let t=n.initialDate;return t!=null?i.createMarker(t):e.getDateMarker()}function KI(n,i){switch(i.type){case"SET_OPTION":return Object.assign(Object.assign({},n),{[i.optionName]:i.rawOptionValue});default:return n}}function QI(n,i,e,t){let r;switch(i.type){case"CHANGE_VIEW_TYPE":return t.build(i.dateMarker||e);case"CHANGE_DATE":return t.build(i.dateMarker);case"PREV":if(r=t.buildPrev(n,e),r.isValid)return r;break;case"NEXT":if(r=t.buildNext(n,e),r.isValid)return r;break}return n}function XI(n,i,e){let t=i?i.activeRange:null;return J0({},s1(n,e),t,e)}function ZI(n,i,e,t){let r=e?e.activeRange:null;switch(i.type){case"ADD_EVENT_SOURCES":return J0(n,i.sources,r,t);case"REMOVE_EVENT_SOURCE":return e1(n,i.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return e?eb(n,r,t):n;case"FETCH_EVENT_SOURCES":return ep(n,i.sourceIds?e0(i.sourceIds):tb(n,t),r,i.isRefetch||!1,t);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return r1(n,i.sourceId,i.fetchId,i.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return n}}function JI(n,i,e){let t=i?i.activeRange:null;return ep(n,tb(n,e),t,!0,e)}function Z0(n){for(let i in n)if(n[i].isFetching)return!0;return!1}function J0(n,i,e,t){let r={};for(let s of i)r[s.sourceId]=s;return e&&(r=eb(r,e,t)),Object.assign(Object.assign({},n),r)}function e1(n,i){return Us(n,e=>e.sourceId!==i)}function eb(n,i,e){return ep(n,Us(n,t=>t1(t,i,e)),i,!1,e)}function t1(n,i,e){return ib(n,e)?!e.options.lazyFetching||!n.fetchRange||n.isFetching||i.start<n.fetchRange.start||i.end>n.fetchRange.end:!n.latestFetchId}function ep(n,i,e,t,r){let s={};for(let a in n){let o=n[a];i[a]?s[a]=i1(o,e,t,r):s[a]=o}return s}function i1(n,i,e,t){let{options:r,calendarApi:s}=t,a=t.pluginHooks.eventSourceDefs[n.sourceDefId],o=Qs();return a.fetch({eventSource:n,range:i,isRefetch:e,context:t},l=>{let{rawEvents:h}=l;r.eventSourceSuccess&&(h=r.eventSourceSuccess.call(s,h,l.response)||h),n.success&&(h=n.success.call(s,h,l.response)||h),t.dispatch({type:"RECEIVE_EVENTS",sourceId:n.sourceId,fetchId:o,fetchRange:i,rawEvents:h})},l=>{let h=!1;r.eventSourceFailure&&(r.eventSourceFailure.call(s,l),h=!0),n.failure&&(n.failure(l),h=!0),h||console.warn(l.message,l),t.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:n.sourceId,fetchId:o,fetchRange:i,error:l})}),Object.assign(Object.assign({},n),{isFetching:!0,latestFetchId:o})}function r1(n,i,e,t){let r=n[i];return r&&e===r.latestFetchId?Object.assign(Object.assign({},n),{[i]:Object.assign(Object.assign({},r),{isFetching:!1,fetchRange:t})}):n}function tb(n,i){return Us(n,e=>ib(e,i))}function s1(n,i){let e=f0(i),t=[].concat(n.eventSources||[]),r=[];n.initialEvents&&t.unshift(n.initialEvents),n.events&&t.unshift(n.events);for(let s of t){let a=p0(s,i,e);a&&r.push(a)}return r}function ib(n,i){return!i.pluginHooks.eventSourceDefs[n.sourceDefId].ignoreRange}function n1(n,i){switch(i.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return i.selection;default:return n}}function a1(n,i){switch(i.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return i.eventInstanceId;default:return n}}function o1(n,i){let e;switch(i.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return e=i.state,{affectedEvents:e.affectedEvents,mutatedEvents:e.mutatedEvents,isEvent:e.isEvent};default:return n}}function l1(n,i){let e;switch(i.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return e=i.state,{affectedEvents:e.affectedEvents,mutatedEvents:e.mutatedEvents,isEvent:e.isEvent};default:return n}}function h1(n,i,e,t,r){let s=n.headerToolbar?nm(n.headerToolbar,n,i,e,t,r):null,a=n.footerToolbar?nm(n.footerToolbar,n,i,e,t,r):null;return{header:s,footer:a}}function nm(n,i,e,t,r,s){let a={},o=[],l=!1;for(let h in n){let c=n[h],u=c1(c,i,e,t,r,s);a[h]=u.widgets,o.push(...u.viewsWithButtons),l=l||u.hasTitle}return{sectionWidgets:a,viewsWithButtons:o,hasTitle:l}}function c1(n,i,e,t,r,s){let a=i.direction==="rtl",o=i.customButtons||{},l=e.buttonText||{},h=i.buttonText||{},c=e.buttonHints||{},u=i.buttonHints||{},p=n?n.split(" "):[],f=[],v=!1;return{widgets:p.map(g=>g.split(",").map(y=>{if(y==="title")return v=!0,{buttonName:y};let b,E,w,A,D,N;if(b=o[y])w=x=>{b.click&&b.click.call(x.target,x,x.target)},(A=t.getCustomButtonIconClass(b))||(A=t.getIconClass(y,a))||(D=b.text),N=b.hint||b.text;else if(E=r[y]){f.push(y),w=()=>{s.changeView(y)},(D=E.buttonTextOverride)||(A=t.getIconClass(y,a))||(D=E.buttonTextDefault);let x=E.buttonTextOverride||E.buttonTextDefault;N=qa(E.buttonTitleOverride||E.buttonTitleDefault||i.viewHint,[x,y],x)}else if(s[y])if(w=()=>{s[y]()},(D=l[y])||(A=t.getIconClass(y,a))||(D=h[y]),y==="prevYear"||y==="nextYear"){let x=y==="prevYear"?"prev":"next";N=qa(c[x]||u[x],[h.year||"year","year"],h[y])}else N=x=>qa(c[y]||u[y],[h[x]||x,x],h[y]);return{buttonName:y,buttonClick:w,buttonIcon:A,buttonText:D,buttonHint:N}})),viewsWithButtons:f,hasTitle:v}}class u1{constructor(i,e,t){this.type=i,this.getCurrentData=e,this.dateEnv=t}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(i){return this.getCurrentData().options[i]}}let d1={ignoreRange:!0,parseMeta(n){return Array.isArray(n.events)?n.events:null},fetch(n,i){i({rawEvents:n.eventSource.meta})}};const p1=Nr({name:"array-event-source",eventSourceDefs:[d1]});let f1={parseMeta(n){return typeof n.events=="function"?n.events:null},fetch(n,i,e){const{dateEnv:t}=n.context,r=n.eventSource.meta;Tk(r.bind(null,T0(n.range,t)),s=>i({rawEvents:s}),e)}};const v1=Nr({name:"func-event-source",eventSourceDefs:[f1]}),m1={method:String,extraParams:B,startParam:String,endParam:String,timeZoneParam:String};let g1={parseMeta(n){return n.url&&(n.format==="json"||!n.format)?{url:n.url,format:"json",method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams,startParam:n.startParam,endParam:n.endParam,timeZoneParam:n.timeZoneParam}:null},fetch(n,i,e){const{meta:t}=n.eventSource,r=b1(t,n.range,n.context);Dk(t.method,t.url,r).then(([s,a])=>{i({rawEvents:s,response:a})},e)}};const y1=Nr({name:"json-event-source",eventSourceRefiners:m1,eventSourceDefs:[g1]});function b1(n,i,e){let{dateEnv:t,options:r}=e,s,a,o,l,h={};return s=n.startParam,s==null&&(s=r.startParam),a=n.endParam,a==null&&(a=r.endParam),o=n.timeZoneParam,o==null&&(o=r.timeZoneParam),typeof n.extraParams=="function"?l=n.extraParams():l=n.extraParams||{},Object.assign(h,l),h[s]=t.formatIso(i.start),h[a]=t.formatIso(i.end),t.timeZone!=="local"&&(h[o]=t.timeZone),h}const S1={daysOfWeek:B,startTime:De,endTime:De,duration:De,startRecur:B,endRecur:B};let E1={parse(n,i){if(n.daysOfWeek||n.startTime||n.endTime||n.startRecur||n.endRecur){let e={daysOfWeek:n.daysOfWeek||null,startTime:n.startTime||null,endTime:n.endTime||null,startRecur:n.startRecur?i.createMarker(n.startRecur):null,endRecur:n.endRecur?i.createMarker(n.endRecur):null,dateEnv:i},t;return n.duration&&(t=n.duration),!t&&n.startTime&&n.endTime&&(t=PA(n.endTime,n.startTime)),{allDayGuess:!n.startTime&&!n.endTime,duration:t,typeData:e}}return null},expand(n,i,e){let t=Ys(i,{start:n.startRecur,end:n.endRecur});return t?w1(n.daysOfWeek,n.startTime,n.dateEnv,e,t):[]}};const C1=Nr({name:"simple-recurring-event",recurringTypes:[E1],eventRefiners:S1});function w1(n,i,e,t,r){let s=n?e0(n):null,a=Ye(r.start),o=r.end,l=[];for(i&&(i.milliseconds<0?o=xt(o,1):i.milliseconds>=1e3*60*60*24&&(a=xt(a,-1)));a<o;){let h;(!s||s[a.getUTCDay()])&&(i?h=t.add(a,i):h=a,l.push(t.createMarker(e.toDate(h)))),a=xt(a,1)}return l}const T1=Nr({name:"change-handler",optionChangeHandlers:{events(n,i){am([n],i)},eventSources:am}});function am(n,i){let e=Nd(i.getCurrentData().eventSources);if(e.length===1&&n.length===1&&Array.isArray(e[0]._raw)&&Array.isArray(n[0])){i.dispatch({type:"RESET_RAW_EVENTS",sourceId:e[0].sourceId,rawEvents:n[0]});return}let t=[];for(let r of n){let s=!1;for(let a=0;a<e.length;a+=1)if(e[a]._raw===r){e.splice(a,1),s=!0;break}s||t.push(r)}for(let r of e)i.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:r.sourceId});for(let r of t)i.calendarApi.addEventSource(r)}function D1(n,i){i.emitter.trigger("datesSet",Object.assign(Object.assign({},T0(n.activeRange,i.dateEnv)),{view:i.viewApi}))}function A1(n,i){let{emitter:e}=i;e.hasHandlers("eventsSet")&&e.trigger("eventsSet",_s(n,i))}const x1=[p1,v1,y1,C1,T1,Nr({name:"misc",isLoadingFuncs:[n=>Z0(n.eventSources)],propSetHandlers:{dateProfile:D1,eventStore:A1}})];class k1{constructor(i,e){this.runTaskOption=i,this.drainedOption=e,this.queue=[],this.delayedRunner=new Td(this.drain.bind(this))}request(i,e){this.queue.push(i),this.delayedRunner.request(e)}pause(i){this.delayedRunner.pause(i)}resume(i,e){this.delayedRunner.resume(i,e)}drain(){let{queue:i}=this;for(;i.length;){let e=[],t;for(;t=i.shift();)this.runTask(t),e.push(t);this.drained(e)}}runTask(i){this.runTaskOption&&this.runTaskOption(i)}drained(i){this.drainedOption&&this.drainedOption(i)}}function I1(n,i,e){let t;return/^(year|month)$/.test(n.currentRangeUnit)?t=n.currentRange:t=n.activeRange,e.formatRange(t.start,t.end,tt(i.titleFormat||M1(n)),{isEndExclusive:n.isRangeAllDay,defaultSeparator:i.titleRangeSeparator})}function M1(n){let{currentRangeUnit:i}=n;if(i==="year")return{year:"numeric"};if(i==="month")return{year:"numeric",month:"long"};let e=Rl(n.currentRange.start,n.currentRange.end);return e!==null&&e>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class om{constructor(){this.resetListeners=new Set}handleInput(i,e){const t=this.dateEnv;if(i!==t&&(typeof e=="function"?this.nowFn=e:t||(this.nowAnchorDate=i.toDate(e?i.createMarker(e):i.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=i,t))for(const r of this.resetListeners.values())r()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(i){this.resetListeners.add(i)}removeResetListener(i){this.resetListeners.delete(i)}}class O1{constructor(i){this.computeCurrentViewData=pe(this._computeCurrentViewData),this.organizeRawLocales=pe(NI),this.buildLocale=pe(Q0),this.buildPluginHooks=HI(),this.buildDateEnv=pe(R1),this.buildTheme=pe(N1),this.parseToolbars=pe(h1),this.buildViewSpecs=pe(zI),this.buildDateProfileGenerator=ul(L1),this.buildViewApi=pe(V1),this.buildViewUiProps=ul(B1),this.buildEventUiBySource=pe(P1,Bi),this.buildEventUiBases=pe(H1),this.parseContextBusinessHours=ul(F1),this.buildTitle=pe(I1),this.nowManager=new om,this.emitter=new ph,this.actionRunner=new k1(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=p=>{this.actionRunner.request(p)},this.props=i,this.actionRunner.pause(),this.nowManager=new om;let e={},t=this.computeOptionsData(i.optionOverrides,e,i.calendarApi),r=t.calendarOptions.initialView||t.pluginHooks.initialView,s=this.computeCurrentViewData(r,t,i.optionOverrides,e);i.calendarApi.currentDataManager=this,this.emitter.setThisContext(i.calendarApi),this.emitter.setOptions(s.options);let a={nowManager:this.nowManager,dateEnv:t.dateEnv,options:t.calendarOptions,pluginHooks:t.pluginHooks,calendarApi:i.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},o=$I(t.calendarOptions,t.dateEnv,this.nowManager),l=s.dateProfileGenerator.build(o);Dr(l.activeRange,o)||(o=l.currentRange.start);for(let p of t.pluginHooks.contextInit)p(a);let h=XI(t.calendarOptions,l,a),c={dynamicOptionOverrides:e,currentViewType:r,currentDate:o,dateProfile:l,businessHours:this.parseContextBusinessHours(a),eventSources:h,eventUiBases:{},eventStore:ui(),renderableEventStore:ui(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(a).selectionConfig},u=Object.assign(Object.assign({},a),c);for(let p of t.pluginHooks.reducers)Object.assign(c,p(null,null,u));Mc(c,a)&&this.emitter.trigger("loading",!0),this.state=c,this.updateData(),this.actionRunner.resume()}resetOptions(i,e){let{props:t}=this;e===void 0?t.optionOverrides=i:(t.optionOverrides=Object.assign(Object.assign({},t.optionOverrides||{}),i),this.optionsForRefining.push(...e)),(e===void 0||e.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(i){let{props:e,state:t,emitter:r}=this,s=KI(t.dynamicOptionOverrides,i),a=this.computeOptionsData(e.optionOverrides,s,e.calendarApi),o=YI(t.currentViewType,i),l=this.computeCurrentViewData(o,a,e.optionOverrides,s);e.calendarApi.currentDataManager=this,r.setThisContext(e.calendarApi),r.setOptions(l.options);let h={nowManager:this.nowManager,dateEnv:a.dateEnv,options:a.calendarOptions,pluginHooks:a.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:r,getCurrentData:this.getCurrentData},{currentDate:c,dateProfile:u}=t;this.data&&this.data.dateProfileGenerator!==l.dateProfileGenerator&&(u=l.dateProfileGenerator.build(c)),c=GI(c,i),u=QI(u,i,c,l.dateProfileGenerator),(i.type==="PREV"||i.type==="NEXT"||!Dr(u.currentRange,c))&&(c=u.currentRange.start);let p=ZI(t.eventSources,i,u,h),f=Xx(t.eventStore,i,p,u,h),m=Z0(p)&&!l.options.progressiveEventRendering&&t.renderableEventStore||f,{eventUiSingleBase:g,selectionConfig:y}=this.buildViewUiProps(h),b=this.buildEventUiBySource(p),E=this.buildEventUiBases(m.defs,g,b),w={dynamicOptionOverrides:s,currentViewType:o,currentDate:c,dateProfile:u,eventSources:p,eventStore:f,renderableEventStore:m,selectionConfig:y,eventUiBases:E,businessHours:this.parseContextBusinessHours(h),dateSelection:n1(t.dateSelection,i),eventSelection:a1(t.eventSelection,i),eventDrag:o1(t.eventDrag,i),eventResize:l1(t.eventResize,i)},A=Object.assign(Object.assign({},h),w);for(let x of a.pluginHooks.reducers)Object.assign(w,x(t,i,A));let D=Mc(t,h),N=Mc(w,h);!D&&N?r.trigger("loading",!0):D&&!N&&r.trigger("loading",!1),this.state=w,e.onAction&&e.onAction(i)}updateData(){let{props:i,state:e}=this,t=this.data,r=this.computeOptionsData(i.optionOverrides,e.dynamicOptionOverrides,i.calendarApi),s=this.computeCurrentViewData(e.currentViewType,r,i.optionOverrides,e.dynamicOptionOverrides),a=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(e.dateProfile,s.options,r.dateEnv),calendarApi:i.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},r),s),e),o=r.pluginHooks.optionChangeHandlers,l=t&&t.calendarOptions,h=r.calendarOptions;if(l&&l!==h){l.timeZone!==h.timeZone&&(e.eventSources=a.eventSources=JI(a.eventSources,e.dateProfile,a),e.eventStore=a.eventStore=Qv(a.eventStore,t.dateEnv,a.dateEnv),e.renderableEventStore=a.renderableEventStore=Qv(a.renderableEventStore,t.dateEnv,a.dateEnv));for(let c in o)(this.optionsForHandling.indexOf(c)!==-1||l[c]!==h[c])&&o[c](h[c],a)}this.optionsForHandling=[],i.onData&&i.onData(a)}computeOptionsData(i,e,t){if(!this.optionsForRefining.length&&i===this.stableOptionOverrides&&e===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:r,pluginHooks:s,localeDefaults:a,availableLocaleData:o,extra:l}=this.processRawCalendarOptions(i,e);lm(l);let h=this.buildDateEnv(r.timeZone,r.locale,r.weekNumberCalculation,r.firstDay,r.weekText,s,o,r.defaultRangeSeparator),c=this.buildViewSpecs(s.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,a),u=this.buildTheme(r,s),p=this.parseToolbars(r,this.stableOptionOverrides,u,c,t);return this.stableCalendarOptionsData={calendarOptions:r,pluginHooks:s,dateEnv:h,viewSpecs:c,theme:u,toolbarConfig:p,localeDefaults:a,availableRawLocales:o.map}}processRawCalendarOptions(i,e){let{locales:t,locale:r}=Ec([za,i,e]),s=this.organizeRawLocales(t),a=s.map,o=this.buildLocale(r||s.defaultCode,a).options,l=this.buildPluginHooks(i.plugins||[],x1),h=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},jv),Uv),Yv),l.listenerRefiners),l.optionRefiners),c={},u=Ec([za,o,i,e]),p={},f=this.currentCalendarOptionsInput,v=this.currentCalendarOptionsRefined,m=!1;for(let g in u)this.optionsForRefining.indexOf(g)===-1&&(u[g]===f[g]||As[g]&&g in f&&As[g](f[g],u[g]))?p[g]=v[g]:h[g]?(p[g]=h[g](u[g]),m=!0):c[g]=f[g];return m&&(this.currentCalendarOptionsInput=u,this.currentCalendarOptionsRefined=p,this.stableOptionOverrides=i,this.stableDynamicOptionOverrides=e),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:l,availableLocaleData:s,localeDefaults:o,extra:c}}_computeCurrentViewData(i,e,t,r){let s=e.viewSpecs[i];if(!s)throw new Error(`viewType "${i}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:a,extra:o}=this.processRawViewOptions(s,e.pluginHooks,e.localeDefaults,t,r);lm(o),this.nowManager.handleInput(e.dateEnv,a.now);let l=this.buildDateProfileGenerator({dateProfileGeneratorClass:s.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:s.duration,durationUnit:s.durationUnit,usesMinMaxTime:s.optionDefaults.usesMinMaxTime,dateEnv:e.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,showNonCurrentDates:a.showNonCurrentDates,dayCount:a.dayCount,dateAlignment:a.dateAlignment,dateIncrement:a.dateIncrement,hiddenDays:a.hiddenDays,weekends:a.weekends,validRangeInput:a.validRange,visibleRangeInput:a.visibleRange,fixedWeekCount:a.fixedWeekCount}),h=this.buildViewApi(i,this.getCurrentData,e.dateEnv);return{viewSpec:s,options:a,dateProfileGenerator:l,viewApi:h}}processRawViewOptions(i,e,t,r,s){let a=Ec([za,i.optionDefaults,t,r,i.optionOverrides,s]),o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},jv),Uv),Yv),vx),e.listenerRefiners),e.optionRefiners),l={},h=this.currentViewOptionsInput,c=this.currentViewOptionsRefined,u=!1,p={};for(let f in a)a[f]===h[f]||As[f]&&As[f](a[f],h[f])?l[f]=c[f]:(a[f]===this.currentCalendarOptionsInput[f]||As[f]&&As[f](a[f],this.currentCalendarOptionsInput[f])?f in this.currentCalendarOptionsRefined&&(l[f]=this.currentCalendarOptionsRefined[f]):o[f]?l[f]=o[f](a[f]):p[f]=a[f],u=!0);return u&&(this.currentViewOptionsInput=a,this.currentViewOptionsRefined=l),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:p}}}function R1(n,i,e,t,r,s,a,o){let l=Q0(i||a.defaultCode,a.map);return new Ax({calendarSystem:"gregory",timeZone:n,namedTimeZoneImpl:s.namedTimeZonedImpl,locale:l,weekNumberCalculation:e,firstDay:t,weekText:r,cmdFormatter:s.cmdFormatter,defaultSeparator:o})}function N1(n,i){let e=i.themeClasses[n.themeSystem]||hs;return new e(n)}function L1(n){let i=n.dateProfileGeneratorClass||l0;return new i(n)}function V1(n,i,e){return new u1(n,i,e)}function P1(n){return kr(n,i=>i.ui)}function H1(n,i,e){let t={"":i};for(let r in n){let s=n[r];s.sourceId&&e[s.sourceId]&&(t[r]=e[s.sourceId])}return t}function B1(n){let{options:i}=n;return{eventUiSingleBase:Fl({display:i.eventDisplay,editable:i.editable,startEditable:i.eventStartEditable,durationEditable:i.eventDurationEditable,constraint:i.eventConstraint,overlap:typeof i.eventOverlap=="boolean"?i.eventOverlap:void 0,allow:i.eventAllow,backgroundColor:i.eventBackgroundColor,borderColor:i.eventBorderColor,textColor:i.eventTextColor,color:i.eventColor},n),selectionConfig:Fl({constraint:i.selectConstraint,overlap:typeof i.selectOverlap=="boolean"?i.selectOverlap:void 0,allow:i.selectAllow},n)}}function Mc(n,i){for(let e of i.pluginHooks.isLoadingFuncs)if(e(n))return!0;return!1}function F1(n){return ak(n.options.businessHours,n)}function lm(n,i){for(let e in n)console.warn(`Unknown option '${e}'`)}class W1 extends Le{render(){let i=this.props.widgetGroups.map(e=>this.renderWidgetGroup(e));return k("div",{className:"fc-toolbar-chunk"},...i)}renderWidgetGroup(i){let{props:e}=this,{theme:t}=this.context,r=[],s=!0;for(let a of i){let{buttonName:o,buttonClick:l,buttonText:h,buttonIcon:c,buttonHint:u}=a;if(o==="title")s=!1,r.push(k("h2",{className:"fc-toolbar-title",id:e.titleId},e.title));else{let p=o===e.activeButton,f=!e.isTodayEnabled&&o==="today"||!e.isPrevEnabled&&o==="prev"||!e.isNextEnabled&&o==="next",v=[`fc-${o}-button`,t.getClass("button")];p&&v.push(t.getClass("buttonActive")),r.push(k("button",{type:"button",title:typeof u=="function"?u(e.navUnit):u,disabled:f,"aria-pressed":p,className:v.join(" "),onClick:l},h||(c?k("span",{className:c,role:"img"}):"")))}}if(r.length>1){let a=s&&t.getClass("buttonGroup")||"";return k("div",{className:a},...r)}return r[0]}}class hm extends Le{render(){let{model:i,extraClassName:e}=this.props,t=!1,r,s,a=i.sectionWidgets,o=a.center;return a.left?(t=!0,r=a.left):r=a.start,a.right?(t=!0,s=a.right):s=a.end,k("div",{className:[e||"","fc-toolbar",t?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",r||[]),this.renderSection("center",o||[]),this.renderSection("end",s||[]))}renderSection(i,e){let{props:t}=this;return k(W1,{key:i,widgetGroups:e,title:t.title,navUnit:t.navUnit,activeButton:t.activeButton,isTodayEnabled:t.isTodayEnabled,isPrevEnabled:t.isPrevEnabled,isNextEnabled:t.isNextEnabled,titleId:t.titleId})}}class _1 extends Le{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=i=>{this.el=i,sr(this.props.elRef,i),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:i,state:e}=this,{aspectRatio:t}=i,r=["fc-view-harness",t||i.liquid||i.height?"fc-view-harness-active":"fc-view-harness-passive"],s="",a="";return t?e.availableWidth!==null?s=e.availableWidth/t:a=`${1/t*100}%`:s=i.height||"",k("div",{"aria-labelledby":i.labeledById,ref:this.handleEl,className:r.join(" "),style:{height:s,paddingBottom:a}},i.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class q1 extends jn{constructor(i){super(i),this.handleSegClick=(e,t)=>{let{component:r}=this,{context:s}=r,a=Hn(t);if(a&&r.isValidSegDownEl(e.target)){let o=Ht(e.target,".fc-event-forced-url"),l=o?o.querySelector("a[href]").href:"";s.emitter.trigger("eventClick",{el:t,event:new Qe(r.context,a.eventRange.def,a.eventRange.instance),jsEvent:e,view:s.viewApi}),l&&!e.defaultPrevented&&(window.location.href=l)}},this.destroy=Ky(i.el,"click",".fc-event",this.handleSegClick)}}class z1 extends jn{constructor(i){super(i),this.handleEventElRemove=e=>{e===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(e,t)=>{Hn(t)&&(this.currentSegEl=t,this.triggerEvent("eventMouseEnter",e,t))},this.handleSegLeave=(e,t)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",e,t))},this.removeHoverListeners=EA(i.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(i,e,t){let{component:r}=this,{context:s}=r,a=Hn(t);(!e||r.isValidSegDownEl(e.target))&&s.emitter.trigger(i,{el:t,event:new Qe(s,a.eventRange.def,a.eventRange.instance),jsEvent:e,view:s.viewApi})}}class j1 extends Zs{constructor(){super(...arguments),this.buildViewContext=pe(Ix),this.buildViewPropTransformers=pe(Y1),this.buildToolbarProps=pe(U1),this.headerRef=Gt(),this.footerRef=Gt(),this.interactionsStore={},this.state={viewLabelId:hh()},this.registerInteractiveComponent=(i,e)=>{let t=kk(i,e),a=[q1,z1].concat(this.props.pluginHooks.componentInteractions).map(o=>new o(t));this.interactionsStore[i.uid]=a,wu[i.uid]=t},this.unregisterInteractiveComponent=i=>{let e=this.interactionsStore[i.uid];if(e){for(let t of e)t.destroy();delete this.interactionsStore[i.uid]}delete wu[i.uid]},this.resizeRunner=new Td(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=i=>{let{options:e}=this.props;e.handleWindowResize&&i.target===window&&this.resizeRunner.request(e.windowResizeDelay)}}render(){let{props:i}=this,{toolbarConfig:e,options:t}=i,r=!1,s="",a;i.isHeightAuto||i.forPrint?s="":t.height!=null?r=!0:t.contentHeight!=null?s=t.contentHeight:a=Math.max(t.aspectRatio,.5);let o=this.buildViewContext(i.viewSpec,i.viewApi,i.options,i.dateProfileGenerator,i.dateEnv,i.nowManager,i.theme,i.pluginHooks,i.dispatch,i.getCurrentData,i.emitter,i.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),l=e.header&&e.header.hasTitle?this.state.viewLabelId:void 0;return k(Rr.Provider,{value:o},k(Un,{unit:"day"},h=>{let c=this.buildToolbarProps(i.viewSpec,i.dateProfile,i.dateProfileGenerator,i.currentDate,h,i.viewTitle);return k(Ue,null,e.header&&k(hm,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:e.header,titleId:l},c)),k(_1,{liquid:r,height:s,aspectRatio:a,labeledById:l},this.renderView(i),this.buildAppendContent()),e.footer&&k(hm,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:e.footer,titleId:""},c)))}))}componentDidMount(){let{props:i}=this;this.calendarInteractions=i.pluginHooks.calendarInteractions.map(t=>new t(i)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:e}=i.pluginHooks;for(let t in e)e[t](i[t],i)}componentDidUpdate(i){let{props:e}=this,{propSetHandlers:t}=e.pluginHooks;for(let r in t)e[r]!==i[r]&&t[r](e[r],e)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let i of this.calendarInteractions)i.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:i}=this,e=i.pluginHooks.viewContainerAppends.map(t=>t(i));return k(Ue,{},...e)}renderView(i){let{pluginHooks:e}=i,{viewSpec:t}=i,r={dateProfile:i.dateProfile,businessHours:i.businessHours,eventStore:i.renderableEventStore,eventUiBases:i.eventUiBases,dateSelection:i.dateSelection,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,isHeightAuto:i.isHeightAuto,forPrint:i.forPrint},s=this.buildViewPropTransformers(e.viewPropsTransformers);for(let o of s)Object.assign(r,o.transform(r,i));let a=t.component;return k(a,Object.assign({},r))}}function U1(n,i,e,t,r,s){let a=e.build(r,void 0,!1),o=e.buildPrev(i,t,!1),l=e.buildNext(i,t,!1);return{title:s,activeButton:n.type,navUnit:n.singleUnit,isTodayEnabled:a.isValid&&!Dr(i.currentRange,r),isPrevEnabled:o.isValid,isNextEnabled:l.isValid}}function Y1(n){return n.map(i=>new i)}class G1 extends Mk{constructor(i,e={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=t=>{switch(t.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=t=>{this.currentData=t,this.renderRunner.request(t.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:t}=this;Pl(()=>{Ja(k(xk,{options:t.calendarOptions,theme:t.theme,emitter:t.emitter},(r,s,a,o)=>(this.setClassNames(r),this.setHeight(s),k(s0.Provider,{value:this.customContentRenderId},k(j1,Object.assign({isHeightAuto:a,forPrint:o},t))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Ja(null,this.el),this.setClassNames([]),this.setHeight(""))},dA(i),this.el=i,this.renderRunner=new Td(this.handleRenderRequest),new O1({optionOverrides:e,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let i=this.isRendering;i?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),i&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){Pl(()=>{super.updateSize()})}batchRendering(i){this.renderRunner.pause("batchRendering"),i(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(i,e){this.currentDataManager.resetOptions(i,e)}setClassNames(i){if(!ss(i,this.currentClassNames)){let{classList:e}=this.el;for(let t of this.currentClassNames)e.remove(t);for(let t of i)e.add(t);this.currentClassNames=i}}setHeight(i){Gy(this.el,"height",i)}}const $1={headerToolbar:!0,footerToolbar:!0,events:!0,eventSources:!0,resources:!0},K1=Ks({props:{options:Object},data(){return{renderId:0,customRenderingMap:new Map}},methods:{getApi(){return this.calendar},buildOptions(n){return{...n,customRenderingMetaMap:Z1(this.$slots),handleCustomRendering:this.handleCustomRendering}}},render(){const n=[];for(const i of this.customRenderingMap.values())n.push(Wa(Q1,{key:i.id,customRendering:i}));return Wa("div",{attrs:{"data-fc-render-id":this.renderId}},Wa(Ki,n))},mounted(){const n=new OI;this.handleCustomRendering=n.handle.bind(n);const i=this.buildOptions(this.options),e=new G1(this.$el,i);this.calendar=e,e.render(),n.subscribe(t=>{this.customRenderingMap=t,this.renderId++,this.needCustomRenderingResize=!0})},beforeUpdate(){this.getApi().resumeRendering()},updated(){this.needCustomRenderingResize&&(this.needCustomRenderingResize=!1,this.getApi().updateSize())},beforeUnmount(){this.getApi().destroy()},watch:X1()}),Q1=Ks({props:{customRendering:Object},render(){const n=this.customRendering,i=typeof n.generatorMeta=="function"?n.generatorMeta(n.renderProps):n.generatorMeta;return Wa(pd,{to:n.containerEl},i)}});function X1(){let n={options:{deep:!0,handler(i){let e=this.getApi();e.pauseRendering();let t=this.buildOptions(i);e.resetOptions(t),this.renderId++}}};for(let i in $1)n[`options.${i}`]={deep:!0,handler(e){if(e!==void 0){let t=this.getApi();t.pauseRendering(),t.resetOptions({[i]:e},[i]),this.renderId++}}};return n}function Z1(n){const i={};for(const e in n)i[J1(e)]=n[e];return i}function J1(n){return n.split("-").map((i,e)=>e?eM(i):i).join("")}function eM(n){return n.charAt(0).toUpperCase()+n.slice(1)}class tM extends ar{constructor(){super(...arguments),this.headerElRef=Gt()}renderSimpleLayout(i,e){let{props:t,context:r}=this,s=[],a=ql(r.options);return i&&s.push({type:"header",key:"header",isSticky:a,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:i}}),s.push({type:"body",key:"body",liquid:!0,chunk:{content:e}}),k(Hl,{elClasses:["fc-daygrid"],viewSpec:r.viewSpec},k($d,{liquid:!t.isHeightAuto&&!t.forPrint,collapsibleWidth:t.forPrint,cols:[],sections:s}))}renderHScrollLayout(i,e,t,r){let s=this.context.pluginHooks.scrollGridImpl;if(!s)throw new Error("No ScrollGrid implementation");let{props:a,context:o}=this,l=!a.forPrint&&ql(o.options),h=!a.forPrint&&q0(o.options),c=[];return i&&c.push({type:"header",key:"header",isSticky:l,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:i}]}),c.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:e}]}),h&&c.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:Au}]}),k(Hl,{elClasses:["fc-daygrid"],viewSpec:o.viewSpec},k(s,{liquid:!a.isHeightAuto&&!a.forPrint,forPrint:a.forPrint,collapsibleWidth:a.forPrint,colGroups:[{cols:[{span:t,minWidth:r}]}],sections:c}))}}function pl(n,i){let e=[];for(let t=0;t<i;t+=1)e[t]=[];for(let t of n)e[t.row].push(t);return e}function Xo(n,i){let e=[];for(let t=0;t<i;t+=1)e[t]=[];for(let t of n)e[t.firstCol].push(t);return e}function cm(n,i){let e=[];if(n){for(let t=0;t<i;t+=1)e[t]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let t of n.segs)e[t.row].segs.push(t)}else for(let t=0;t<i;t+=1)e[t]=null;return e}const rb=tt({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function sb(n){let{display:i}=n.eventRange.ui;return i==="list-item"||i==="auto"&&!n.eventRange.def.allDay&&n.firstCol===n.lastCol&&n.isStart&&n.isEnd}class nb extends Le{render(){let{props:i}=this;return k(Qd,Object.assign({},i,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:rb,defaultDisplayEventEnd:i.defaultDisplayEventEnd,disableResizing:!i.seg.eventRange.def.allDay}))}}class ab extends Le{render(){let{props:i,context:e}=this,{options:t}=e,{seg:r}=i,s=t.eventTimeFormat||rb,a=E0(r,s,e,!0,i.defaultDisplayEventEnd);return k(Kd,Object.assign({},i,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:w0(i.seg,e),defaultGenerator:iM,timeText:a,isResizing:!1,isDateSelecting:!1}))}}function iM(n){return k(Ue,null,k("div",{className:"fc-daygrid-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}}),n.timeText&&k("div",{className:"fc-event-time"},n.timeText),k("div",{className:"fc-event-title"},n.event.title||k(Ue,null,"")))}class rM extends Le{constructor(){super(...arguments),this.compileSegs=pe(sM)}render(){let{props:i}=this,{allSegs:e,invisibleSegs:t}=this.compileSegs(i.singlePlacements);return k(Y0,{elClasses:["fc-daygrid-more-link"],dateProfile:i.dateProfile,todayRange:i.todayRange,allDayDate:i.allDayDate,moreCnt:i.moreCnt,allSegs:e,hiddenSegs:t,alignmentElRef:i.alignmentElRef,alignGridTop:i.alignGridTop,extraDateSpan:i.extraDateSpan,popoverContent:()=>{let r=(i.eventDrag?i.eventDrag.affectedInstances:null)||(i.eventResize?i.eventResize.affectedInstances:null)||{};return k(Ue,null,e.map(s=>{let a=s.eventRange.instance.instanceId;return k("div",{className:"fc-daygrid-event-harness",key:a,style:{visibility:r[a]?"hidden":""}},sb(s)?k(ab,Object.assign({seg:s,isDragging:!1,isSelected:a===i.eventSelection,defaultDisplayEventEnd:!1},rs(s,i.todayRange))):k(nb,Object.assign({seg:s,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:a===i.eventSelection,defaultDisplayEventEnd:!1},rs(s,i.todayRange))))}))}})}}function sM(n){let i=[],e=[];for(let t of n)i.push(t.seg),t.isVisible||e.push(t.seg);return{allSegs:i,invisibleSegs:e}}const nM=tt({week:"narrow"});class aM extends ar{constructor(){super(...arguments),this.rootElRef=Gt(),this.state={dayNumberId:hh()},this.handleRootEl=i=>{sr(this.rootElRef,i),sr(this.props.elRef,i)}}render(){let{context:i,props:e,state:t,rootElRef:r}=this,{options:s,dateEnv:a}=i,{date:o,dateProfile:l}=e;const h=e.showDayNumber&&lM(o,l.currentRange,a);return k(Zd,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...e.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},e.extraDataAttrs),e.showDayNumber?{"aria-labelledby":t.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:oM,date:o,dateProfile:l,todayRange:e.todayRange,showDayNumber:e.showDayNumber,isMonthStart:h,extraRenderProps:e.extraRenderProps},(c,u)=>k("div",{ref:e.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:e.minHeight}},e.showWeekNumber&&k(U0,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:_l(i,o,"week"),date:o,defaultFormat:nM}),!u.isDisabled&&(e.showDayNumber||Jd(s)||e.forceDayTop)?k("div",{className:"fc-daygrid-day-top"},k(c,{elTag:"a",elClasses:["fc-daygrid-day-number",h&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},_l(i,o)),{id:t.dayNumberId})})):e.showDayNumber?k("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},k("a",{className:"fc-daygrid-day-number"},"")):void 0,k("div",{className:"fc-daygrid-day-events",ref:e.fgContentElRef},e.fgContent,k("div",{className:"fc-daygrid-day-bottom",style:{marginTop:e.moreMarginTop}},k(rM,{allDayDate:o,singlePlacements:e.singlePlacements,moreCnt:e.moreCnt,alignmentElRef:r,alignGridTop:!e.showDayNumber,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange}))),k("div",{className:"fc-daygrid-day-bg"},e.bgContent)))}}function oM(n){return n.dayNumberText||k(Ue,null,"")}function lM(n,i,e){const{start:t,end:r}=i,s=ns(r,-1),a=e.getYear(t),o=e.getMonth(t),l=e.getYear(s),h=e.getMonth(s);return!(a===l&&o===h)&&(n.valueOf()===t.valueOf()||e.getDay(n)===1&&n.valueOf()<r.valueOf())}function ob(n){return n.eventRange.instance.instanceId+":"+n.firstCol}function lb(n){return ob(n)+":"+n.lastCol}function hM(n,i,e,t,r,s,a){let o=new dM(y=>{let b=n[y.index].eventRange.instance.instanceId+":"+y.span.start+":"+(y.span.end-1);return r[b]||1});o.allowReslicing=!0,o.strictOrder=t,i===!0||e===!0?(o.maxCoord=s,o.hiddenConsumes=!0):typeof i=="number"?o.maxStackCnt=i:typeof e=="number"&&(o.maxStackCnt=e,o.hiddenConsumes=!0);let l=[],h=[];for(let y=0;y<n.length;y+=1){let b=n[y],E=lb(b);r[E]!=null?l.push({index:y,span:{start:b.firstCol,end:b.lastCol+1}}):h.push(b)}let c=o.addSegs(l),u=o.toRects(),{singleColPlacements:p,multiColPlacements:f,leftoverMargins:v}=cM(u,n,a),m=[],g=[];for(let y of h){f[y.firstCol].push({seg:y,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let b=y.firstCol;b<=y.lastCol;b+=1)p[b].push({seg:Mn(y,b,b+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let y=0;y<a.length;y+=1)m.push(0);for(let y of c){let b=n[y.index],E=y.span;f[E.start].push({seg:Mn(b,E.start,E.end,a),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let w=E.start;w<E.end;w+=1)m[w]+=1,p[w].push({seg:Mn(b,w,w+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let y=0;y<a.length;y+=1)g.push(v[y]);return{singleColPlacements:p,multiColPlacements:f,moreCnts:m,moreMarginTops:g}}function cM(n,i,e){let t=uM(n,e.length),r=[],s=[],a=[];for(let o=0;o<e.length;o+=1){let l=t[o],h=[],c=0,u=0;for(let f of l){let v=i[f.index];h.push({seg:Mn(v,o,o+1,e),isVisible:!0,isAbsolute:!1,absoluteTop:f.levelCoord,marginTop:f.levelCoord-c}),c=f.levelCoord+f.thickness}let p=[];c=0,u=0;for(let f of l){let v=i[f.index],m=f.span.end-f.span.start>1,g=f.span.start===o;u+=f.levelCoord-c,c=f.levelCoord+f.thickness,m?(u+=f.thickness,g&&p.push({seg:Mn(v,f.span.start,f.span.end,e),isVisible:!0,isAbsolute:!0,absoluteTop:f.levelCoord,marginTop:0})):g&&(p.push({seg:Mn(v,f.span.start,f.span.end,e),isVisible:!0,isAbsolute:!1,absoluteTop:f.levelCoord,marginTop:u}),u=0)}r.push(h),s.push(p),a.push(u)}return{singleColPlacements:r,multiColPlacements:s,leftoverMargins:a}}function uM(n,i){let e=[];for(let t=0;t<i;t+=1)e.push([]);for(let t of n)for(let r=t.span.start;r<t.span.end;r+=1)e[r].push(t);return e}function Mn(n,i,e,t){if(n.firstCol===i&&n.lastCol===e-1)return n;let r=n.eventRange,s=r.range,a=Ys(s,{start:t[i].date,end:xt(t[e-1].date,1)});return Object.assign(Object.assign({},n),{firstCol:i,lastCol:e-1,eventRange:{def:r.def,ui:Object.assign(Object.assign({},r.ui),{durationEditable:!1}),instance:r.instance,range:a},isStart:n.isStart&&a.start.valueOf()===s.start.valueOf(),isEnd:n.isEnd&&a.end.valueOf()===s.end.valueOf()})}class dM extends O0{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(i){const e=super.addSegs(i),{entriesByLevel:t}=this,r=s=>!this.forceHidden[qs(s)];for(let s=0;s<t.length;s+=1)t[s]=t[s].filter(r);return e}handleInvalidInsertion(i,e,t){const{entriesByLevel:r,forceHidden:s}=this,{touchingEntry:a,touchingLevel:o,touchingLateral:l}=i;if(this.hiddenConsumes&&a){const h=qs(a);if(!s[h])if(this.allowReslicing){const c=Object.assign(Object.assign({},a),{span:Yd(a.span,e.span)}),u=qs(c);s[u]=!0,r[o][l]=c,t.push(c),this.splitEntry(a,e,t)}else s[h]=!0,t.push(a)}super.handleInvalidInsertion(i,e,t)}}class hb extends ar{constructor(){super(...arguments),this.cellElRefs=new Er,this.frameElRefs=new Er,this.fgElRefs=new Er,this.segHarnessRefs=new Er,this.rootElRef=Gt(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=i=>{i&&this.updateSizing(!0)}}render(){let{props:i,state:e,context:t}=this,{options:r}=t,s=i.cells.length,a=Xo(i.businessHourSegs,s),o=Xo(i.bgEventSegs,s),l=Xo(this.getHighlightSegs(),s),h=Xo(this.getMirrorSegs(),s),{singleColPlacements:c,multiColPlacements:u,moreCnts:p,moreMarginTops:f}=hM(S0(i.fgEventSegs,r.eventOrder),i.dayMaxEvents,i.dayMaxEventRows,r.eventOrderStrict,e.segHeights,e.maxContentHeight,i.cells),v=i.eventDrag&&i.eventDrag.affectedInstances||i.eventResize&&i.eventResize.affectedInstances||{};return k("tr",{ref:this.rootElRef,role:"row"},i.renderIntro&&i.renderIntro(),i.cells.map((m,g)=>{let y=this.renderFgSegs(g,i.forPrint?c[g]:u[g],i.todayRange,v),b=this.renderFgSegs(g,pM(h[g],u),i.todayRange,{},!!i.eventDrag,!!i.eventResize,!1);return k(aM,{key:m.key,elRef:this.cellElRefs.createRef(m.key),innerElRef:this.frameElRefs.createRef(m.key),dateProfile:i.dateProfile,date:m.date,showDayNumber:i.showDayNumbers,showWeekNumber:i.showWeekNumbers&&g===0,forceDayTop:i.showWeekNumbers,todayRange:i.todayRange,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,extraRenderProps:m.extraRenderProps,extraDataAttrs:m.extraDataAttrs,extraClassNames:m.extraClassNames,extraDateSpan:m.extraDateSpan,moreCnt:p[g],moreMarginTop:f[g],singlePlacements:c[g],fgContentElRef:this.fgElRefs.createRef(m.key),fgContent:k(Ue,null,k(Ue,null,y),k(Ue,null,b)),bgContent:k(Ue,null,this.renderFillSegs(l[g],"highlight"),this.renderFillSegs(a[g],"non-business"),this.renderFillSegs(o[g],"bg-event")),minHeight:i.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(i,e){let t=this.props;this.updateSizing(!Bi(i,t))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:i}=this;return i.eventDrag&&i.eventDrag.segs.length?i.eventDrag.segs:i.eventResize&&i.eventResize.segs.length?i.eventResize.segs:i.dateSelectionSegs}getMirrorSegs(){let{props:i}=this;return i.eventResize&&i.eventResize.segs.length?i.eventResize.segs:[]}renderFgSegs(i,e,t,r,s,a,o){let{context:l}=this,{eventSelection:h}=this.props,{framePositions:c}=this.state,u=this.props.cells.length===1,p=s||a||o,f=[];if(c)for(let v of e){let{seg:m}=v,{instanceId:g}=m.eventRange.instance,y=v.isVisible&&!r[g],b=v.isAbsolute,E="",w="";b&&(l.isRtl?(w=0,E=c.lefts[m.lastCol]-c.lefts[m.firstCol]):(E=0,w=c.rights[m.firstCol]-c.rights[m.lastCol])),f.push(k("div",{className:"fc-daygrid-event-harness"+(b?" fc-daygrid-event-harness-abs":""),key:ob(m),ref:p?null:this.segHarnessRefs.createRef(lb(m)),style:{visibility:y?"":"hidden",marginTop:b?"":v.marginTop,top:b?v.absoluteTop:"",left:E,right:w}},sb(m)?k(ab,Object.assign({seg:m,isDragging:s,isSelected:g===h,defaultDisplayEventEnd:u},rs(m,t))):k(nb,Object.assign({seg:m,isDragging:s,isResizing:a,isDateSelecting:o,isSelected:g===h,defaultDisplayEventEnd:u},rs(m,t)))))}return f}renderFillSegs(i,e){let{isRtl:t}=this.context,{todayRange:r}=this.props,{framePositions:s}=this.state,a=[];if(s)for(let o of i){let l=t?{right:0,left:s.lefts[o.lastCol]-s.lefts[o.firstCol]}:{left:0,right:s.rights[o.firstCol]-s.rights[o.lastCol]};a.push(k("div",{key:C0(o.eventRange),className:"fc-daygrid-bg-harness",style:l},e==="bg-event"?k(z0,Object.assign({seg:o},rs(o,r))):j0(e)))}return k(Ue,{},...a)}updateSizing(i){let{props:e,state:t,frameElRefs:r}=this;if(!e.forPrint&&e.clientWidth!==null){if(i){let l=e.cells.map(h=>r.currentMap[h.key]);if(l.length){let h=this.rootElRef.current,c=new Bn(h,l,!0,!1);(!t.framePositions||!t.framePositions.similarTo(c))&&this.setState({framePositions:new Bn(h,l,!0,!1)})}}const s=this.state.segHeights,a=this.querySegHeights(),o=e.dayMaxEvents===!0||e.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},s),a),maxContentHeight:o?this.computeMaxContentHeight():null})}}querySegHeights(){let i=this.segHarnessRefs.currentMap,e={};for(let t in i){let r=Math.round(i[t].getBoundingClientRect().height);e[t]=Math.max(e[t]||0,r)}return e}computeMaxContentHeight(){let i=this.props.cells[0].key,e=this.cellElRefs.currentMap[i],t=this.fgElRefs.currentMap[i];return e.getBoundingClientRect().bottom-t.getBoundingClientRect().top}getCellEls(){let i=this.cellElRefs.currentMap;return this.props.cells.map(e=>i[e.key])}}hb.addStateEquality({segHeights:Bi});function pM(n,i){if(!n.length)return[];let e=fM(i);return n.map(t=>({seg:t,isVisible:!0,isAbsolute:!0,absoluteTop:e[t.eventRange.instance.instanceId],marginTop:0}))}function fM(n){let i={};for(let e of n)for(let t of e)i[t.seg.eventRange.instance.instanceId]=t.absoluteTop;return i}class vM extends ar{constructor(){super(...arguments),this.splitBusinessHourSegs=pe(pl),this.splitBgEventSegs=pe(mM),this.splitFgEventSegs=pe(pl),this.splitDateSelectionSegs=pe(pl),this.splitEventDrag=pe(cm),this.splitEventResize=pe(cm),this.rowRefs=new Er}render(){let{props:i,context:e}=this,t=i.cells.length,r=this.splitBusinessHourSegs(i.businessHourSegs,t),s=this.splitBgEventSegs(i.bgEventSegs,t),a=this.splitFgEventSegs(i.fgEventSegs,t),o=this.splitDateSelectionSegs(i.dateSelectionSegs,t),l=this.splitEventDrag(i.eventDrag,t),h=this.splitEventResize(i.eventResize,t),c=t>=7&&i.clientWidth?i.clientWidth/e.options.aspectRatio/6:null;return k(Un,{unit:"day"},(u,p)=>k(Ue,null,i.cells.map((f,v)=>k(hb,{ref:this.rowRefs.createRef(v),key:f.length?f[0].date.toISOString():v,showDayNumbers:t>1,showWeekNumbers:i.showWeekNumbers,todayRange:p,dateProfile:i.dateProfile,cells:f,renderIntro:i.renderRowIntro,businessHourSegs:r[v],eventSelection:i.eventSelection,bgEventSegs:s[v],fgEventSegs:a[v],dateSelectionSegs:o[v],eventDrag:l[v],eventResize:h[v],dayMaxEvents:i.dayMaxEvents,dayMaxEventRows:i.dayMaxEventRows,clientWidth:i.clientWidth,clientHeight:i.clientHeight,cellMinHeight:c,forPrint:i.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const i=this.rowRefs.currentMap[0].getCellEls()[0],e=i?i.closest(".fc-daygrid-body"):null;e&&(this.rootEl=e,this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new Bn(this.rootEl,this.rowRefs.collect().map(i=>i.getCellEls()[0]),!1,!0),this.colPositions=new Bn(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(i,e){let{colPositions:t,rowPositions:r}=this,s=t.leftToIndex(i),a=r.topToIndex(e);if(a!=null&&s!=null){let o=this.props.cells[a][s];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(a,s),allDay:!0},o.extraDateSpan),dayEl:this.getCellEl(a,s),rect:{left:t.lefts[s],right:t.rights[s],top:r.tops[a],bottom:r.bottoms[a]},layer:0}}return null}getCellEl(i,e){return this.rowRefs.currentMap[i].getCellEls()[e]}getCellRange(i,e){let t=this.props.cells[i][e].date,r=xt(t,1);return{start:t,end:r}}}function mM(n,i){return pl(n.filter(gM),i)}function gM(n){return n.eventRange.def.allDay}class yM extends ar{constructor(){super(...arguments),this.elRef=Gt(),this.needsScrollReset=!1}render(){let{props:i}=this,{dayMaxEventRows:e,dayMaxEvents:t,expandRows:r}=i,s=t===!0||e===!0;s&&!r&&(s=!1,e=null,t=null);let a=["fc-daygrid-body",s?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",r?"":"fc-daygrid-body-natural"];return k("div",{ref:this.elRef,className:a.join(" "),style:{width:i.clientWidth,minWidth:i.tableMinWidth}},k("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:i.clientWidth,minWidth:i.tableMinWidth,height:r?i.clientHeight:""}},i.colGroupNode,k("tbody",{role:"presentation"},k(vM,{dateProfile:i.dateProfile,cells:i.cells,renderRowIntro:i.renderRowIntro,showWeekNumbers:i.showWeekNumbers,clientWidth:i.clientWidth,clientHeight:i.clientHeight,businessHourSegs:i.businessHourSegs,bgEventSegs:i.bgEventSegs,fgEventSegs:i.fgEventSegs,dateSelectionSegs:i.dateSelectionSegs,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,dayMaxEvents:t,dayMaxEventRows:e,forPrint:i.forPrint,isHitComboAllowed:i.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(i){i.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const i=bM(this.elRef.current,this.props.dateProfile);if(i){const e=i.closest(".fc-daygrid-body"),t=e.closest(".fc-scroller"),r=i.getBoundingClientRect().top-e.getBoundingClientRect().top;t.scrollTop=r?r+1:0}this.needsScrollReset=!1}}}function bM(n,i){let e;return i.currentRangeUnit.match(/year|month/)&&(e=n.querySelector(`[data-date="${ZA(i.currentDate)}-01"]`)),e||(e=n.querySelector(`[data-date="${Id(i.currentDate)}"]`)),e}class SM extends H0{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(i,e){return e.sliceRange(i)}}class cb extends ar{constructor(){super(...arguments),this.slicer=new SM,this.tableRef=Gt()}render(){let{props:i,context:e}=this;return k(yM,Object.assign({ref:this.tableRef},this.slicer.sliceProps(i,i.dateProfile,i.nextDayThreshold,e,i.dayTableModel),{dateProfile:i.dateProfile,cells:i.dayTableModel.cells,colGroupNode:i.colGroupNode,tableMinWidth:i.tableMinWidth,renderRowIntro:i.renderRowIntro,dayMaxEvents:i.dayMaxEvents,dayMaxEventRows:i.dayMaxEventRows,showWeekNumbers:i.showWeekNumbers,expandRows:i.expandRows,headerAlignElRef:i.headerAlignElRef,clientWidth:i.clientWidth,clientHeight:i.clientHeight,forPrint:i.forPrint}))}}class EM extends tM{constructor(){super(...arguments),this.buildDayTableModel=pe(CM),this.headerRef=Gt(),this.tableRef=Gt()}render(){let{options:i,dateProfileGenerator:e}=this.context,{props:t}=this,r=this.buildDayTableModel(t.dateProfile,e),s=i.dayHeaders&&k(L0,{ref:this.headerRef,dateProfile:t.dateProfile,dates:r.headerDates,datesRepDistinctDays:r.rowCnt===1}),a=o=>k(cb,{ref:this.tableRef,dateProfile:t.dateProfile,dayTableModel:r,businessHours:t.businessHours,dateSelection:t.dateSelection,eventStore:t.eventStore,eventUiBases:t.eventUiBases,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,nextDayThreshold:i.nextDayThreshold,colGroupNode:o.tableColGroupNode,tableMinWidth:o.tableMinWidth,dayMaxEvents:i.dayMaxEvents,dayMaxEventRows:i.dayMaxEventRows,showWeekNumbers:i.weekNumbers,expandRows:!t.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:o.clientWidth,clientHeight:o.clientHeight,forPrint:t.forPrint});return i.dayMinWidth?this.renderHScrollLayout(s,a,r.colCnt,i.dayMinWidth):this.renderSimpleLayout(s,a)}}function CM(n,i){let e=new V0(n.renderRange,i);return new P0(e,/year|month|week/.test(n.currentRangeUnit))}class wM extends l0{buildRenderRange(i,e,t){let r=super.buildRenderRange(i,e,t),{props:s}=this;return TM({currentRange:r,snapToWeek:/^(year|month)$/.test(e),fixedWeekCount:s.fixedWeekCount,dateEnv:s.dateEnv})}}function TM(n){let{dateEnv:i,currentRange:e}=n,{start:t,end:r}=e,s;if(n.snapToWeek&&(t=i.startOfWeek(t),s=i.startOfWeek(r),s.valueOf()!==r.valueOf()&&(r=Fv(s,1))),n.fixedWeekCount){let a=i.startOfWeek(i.startOfMonth(xt(e.end,-1))),o=Math.ceil(_A(a,r));r=Fv(r,6-o)}return{start:t,end:r}}var DM=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';wd(DM);var AM=Nr({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:EM,dateProfileGeneratorClass:wM},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class xM extends Vk{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(i){return i.allDay?["allDay"]:["timed"]}getKeysForEventDef(i){return i.allDay?uk(i)?["timed","allDay"]:["allDay"]:["timed"]}}const kM=tt({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function ub(n){let i=["fc-timegrid-slot","fc-timegrid-slot-label",n.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return k(Rr.Consumer,null,e=>{if(!n.isLabeled)return k("td",{className:i.join(" "),"data-time":n.isoTimeStr});let{dateEnv:t,options:r,viewApi:s}=e,a=r.slotLabelFormat==null?kM:Array.isArray(r.slotLabelFormat)?tt(r.slotLabelFormat[0]):tt(r.slotLabelFormat),o={level:0,time:n.time,date:t.toDate(n.date),view:s,text:t.format(n.date,a)};return k(fi,{elTag:"td",elClasses:i,elAttrs:{"data-time":n.isoTimeStr},renderProps:o,generatorName:"slotLabelContent",customGenerator:r.slotLabelContent,defaultGenerator:IM,classNameGenerator:r.slotLabelClassNames,didMount:r.slotLabelDidMount,willUnmount:r.slotLabelWillUnmount},l=>k("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},k(l,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function IM(n){return n.text}class MM extends Le{render(){return this.props.slatMetas.map(i=>k("tr",{key:i.key},k(ub,Object.assign({},i))))}}const OM=tt({week:"short"}),RM=5;class NM extends ar{constructor(){super(...arguments),this.allDaySplitter=new xM,this.headerElRef=Gt(),this.rootElRef=Gt(),this.scrollerElRef=Gt(),this.state={slatCoords:null},this.handleScrollTopRequest=i=>{let e=this.scrollerElRef.current;e&&(e.scrollTop=i)},this.renderHeadAxis=(i,e="")=>{let{options:t}=this.context,{dateProfile:r}=this.props,s=r.renderRange,o=Xs(s.start,s.end)===1?_l(this.context,s.start,"week"):{};return t.weekNumbers&&i==="day"?k(U0,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:s.start,defaultFormat:OM},l=>k("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:e}},k(l,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:o}))):k("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},k("div",{className:"fc-timegrid-axis-frame",style:{height:e}}))},this.renderTableRowAxis=i=>{let{options:e,viewApi:t}=this.context,r={text:e.allDayText,view:t};return k(fi,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:r,generatorName:"allDayContent",customGenerator:e.allDayContent,defaultGenerator:LM,classNameGenerator:e.allDayClassNames,didMount:e.allDayDidMount,willUnmount:e.allDayWillUnmount},s=>k("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",i==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:i}},k(s,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=i=>{this.setState({slatCoords:i})}}renderSimpleLayout(i,e,t){let{context:r,props:s}=this,a=[],o=ql(r.options);return i&&a.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:i}}),e&&(a.push({type:"body",key:"all-day",chunk:{content:e}}),a.push({type:"body",key:"all-day-divider",outerContent:k("tr",{role:"presentation",className:"fc-scrollgrid-section"},k("td",{className:"fc-timegrid-divider "+r.theme.getClass("tableCellShaded")}))})),a.push({type:"body",key:"body",liquid:!0,expandRows:!!r.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:t}}),k(Hl,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:r.viewSpec},k($d,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[{width:"shrink"}],sections:a}))}renderHScrollLayout(i,e,t,r,s,a,o){let l=this.context.pluginHooks.scrollGridImpl;if(!l)throw new Error("No ScrollGrid implementation");let{context:h,props:c}=this,u=!c.forPrint&&ql(h.options),p=!c.forPrint&&q0(h.options),f=[];i&&f.push({type:"header",key:"header",isSticky:u,syncRowHeights:!0,chunks:[{key:"axis",rowContent:m=>k("tr",{role:"presentation"},this.renderHeadAxis("day",m.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:i}]}),e&&(f.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:m=>k("tr",{role:"presentation"},this.renderTableRowAxis(m.rowSyncHeights[0]))},{key:"cols",content:e}]}),f.push({key:"all-day-divider",type:"body",outerContent:k("tr",{role:"presentation",className:"fc-scrollgrid-section"},k("td",{colSpan:2,className:"fc-timegrid-divider "+h.theme.getClass("tableCellShaded")}))}));let v=h.options.nowIndicator;return f.push({type:"body",key:"body",liquid:!0,expandRows:!!h.options.expandRows,chunks:[{key:"axis",content:m=>k("div",{className:"fc-timegrid-axis-chunk"},k("table",{"aria-hidden":!0,style:{height:m.expandRows?m.clientHeight:""}},m.tableColGroupNode,k("tbody",null,k(MM,{slatMetas:a}))),k("div",{className:"fc-timegrid-now-indicator-container"},k(Un,{unit:v?"minute":"day"},g=>{let y=v&&o&&o.safeComputeTop(g);return typeof y=="number"?k(Xd,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:y},isAxis:!0,date:g}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:t}]}),p&&f.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:Au},{key:"cols",content:Au}]}),k(Hl,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:h.viewSpec},k(l,{liquid:!c.isHeightAuto&&!c.forPrint,forPrint:c.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:r,minWidth:s}]}],sections:f}))}getAllDayMaxEventProps(){let{dayMaxEvents:i,dayMaxEventRows:e}=this.context.options;return(i===!0||e===!0)&&(i=void 0,e=RM),{dayMaxEvents:i,dayMaxEventRows:e}}}function LM(n){return n.text}class VM{constructor(i,e,t){this.positions=i,this.dateProfile=e,this.slotDuration=t}safeComputeTop(i){let{dateProfile:e}=this;if(Dr(e.currentRange,i)){let t=Ye(i),r=i.valueOf()-t.valueOf();if(r>=Vi(e.slotMinTime)&&r<Vi(e.slotMaxTime))return this.computeTimeTop(De(r))}return null}computeDateTop(i,e){return e||(e=Ye(i)),this.computeTimeTop(De(i.valueOf()-e.valueOf()))}computeTimeTop(i){let{positions:e,dateProfile:t}=this,r=e.els.length,s=(i.milliseconds-Vi(t.slotMinTime))/Vi(this.slotDuration),a,o;return s=Math.max(0,s),s=Math.min(r,s),a=Math.floor(s),a=Math.min(a,r-1),o=s-a,e.tops[a]+e.getHeight(a)*o}}class PM extends Le{render(){let{props:i,context:e}=this,{options:t}=e,{slatElRefs:r}=i;return k("tbody",null,i.slatMetas.map((s,a)=>{let o={time:s.time,date:e.dateEnv.toDate(s.date),view:e.viewApi};return k("tr",{key:s.key,ref:r.createRef(s.key)},i.axis&&k(ub,Object.assign({},s)),k(fi,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!s.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":s.isoTimeStr},renderProps:o,generatorName:"slotLaneContent",customGenerator:t.slotLaneContent,classNameGenerator:t.slotLaneClassNames,didMount:t.slotLaneDidMount,willUnmount:t.slotLaneWillUnmount}))}))}}class HM extends Le{constructor(){super(...arguments),this.rootElRef=Gt(),this.slatElRefs=new Er}render(){let{props:i,context:e}=this;return k("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},k("table",{"aria-hidden":!0,className:e.theme.getClass("table"),style:{minWidth:i.tableMinWidth,width:i.clientWidth,height:i.minHeight}},i.tableColGroupNode,k(PM,{slatElRefs:this.slatElRefs,axis:i.axis,slatMetas:i.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:i,props:e}=this;e.onCoords&&e.clientWidth!==null&&this.rootElRef.current.offsetHeight&&e.onCoords(new VM(new Bn(this.rootElRef.current,BM(this.slatElRefs.currentMap,e.slatMetas),!1,!0),this.props.dateProfile,i.options.slotDuration))}}function BM(n,i){return i.map(e=>n[e.key])}function pa(n,i){let e=[],t;for(t=0;t<i;t+=1)e.push([]);if(n)for(t=0;t<n.length;t+=1)e[n[t].col].push(n[t]);return e}function um(n,i){let e=[];if(n){for(let t=0;t<i;t+=1)e[t]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let t of n.segs)e[t.col].segs.push(t)}else for(let t=0;t<i;t+=1)e[t]=null;return e}class FM extends Le{render(){let{props:i}=this;return k(Y0,{elClasses:["fc-timegrid-more-link"],elStyle:{top:i.top,bottom:i.bottom},allDayDate:null,moreCnt:i.hiddenSegs.length,allSegs:i.hiddenSegs,hiddenSegs:i.hiddenSegs,extraDateSpan:i.extraDateSpan,dateProfile:i.dateProfile,todayRange:i.todayRange,popoverContent:()=>pb(i.hiddenSegs,i),defaultGenerator:WM,forceTimed:!0},e=>k(e,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function WM(n){return n.shortText}function _M(n,i,e){let t=new O0;i!=null&&(t.strictOrder=i),e!=null&&(t.maxStackCnt=e);let r=t.addSegs(n),s=$k(r),a=qM(t);return a=YM(a,1),{segRects:GM(a),hiddenGroups:s}}function qM(n){const{entriesByLevel:i}=n,e=tp((t,r)=>t+":"+r,(t,r)=>{let s=UM(n,t,r),a=dm(s,e),o=i[t][r];return[Object.assign(Object.assign({},o),{nextLevelNodes:a[0]}),o.thickness+a[1]]});return dm(i.length?{level:0,lateralStart:0,lateralEnd:i[0].length}:null,e)[0]}function dm(n,i){if(!n)return[[],0];let{level:e,lateralStart:t,lateralEnd:r}=n,s=t,a=[];for(;s<r;)a.push(i(e,s)),s+=1;return a.sort(zM),[a.map(jM),a[0][1]]}function zM(n,i){return i[1]-n[1]}function jM(n){return n[0]}function UM(n,i,e){let{levelCoords:t,entriesByLevel:r}=n,s=r[i][e],a=t[i]+s.thickness,o=t.length,l=i;for(;l<o&&t[l]<a;l+=1);for(;l<o;l+=1){let h=r[l],c,u=Du(h,s.span.start,Tu),p=u[0]+u[1],f=p;for(;(c=h[f])&&c.span.start<s.span.end;)f+=1;if(p<f)return{level:l,lateralStart:p,lateralEnd:f}}return null}function YM(n,i){const e=tp((t,r,s)=>qs(t),(t,r,s)=>{let{nextLevelNodes:a,thickness:o}=t,l=o+s,h=o/l,c,u=[];if(!a.length)c=i;else for(let f of a)if(c===void 0){let v=e(f,r,l);c=v[0],u.push(v[1])}else{let v=e(f,c,0);u.push(v[1])}let p=(c-r)*h;return[c-p,Object.assign(Object.assign({},t),{thickness:p,nextLevelNodes:u})]});return n.map(t=>e(t,0,0)[1])}function GM(n){let i=[];const e=tp((r,s,a)=>qs(r),(r,s,a)=>{let o=Object.assign(Object.assign({},r),{levelCoord:s,stackDepth:a,stackForward:0});return i.push(o),o.stackForward=t(r.nextLevelNodes,s+r.thickness,a+1)+1});function t(r,s,a){let o=0;for(let l of r)o=Math.max(e(l,s,a),o);return o}return t(n,0,0),i}function tp(n,i){const e={};return(...t)=>{let r=n(...t);return r in e?e[r]:e[r]=i(...t)}}function pm(n,i,e=null,t=0){let r=[];if(e)for(let s=0;s<n.length;s+=1){let a=n[s],o=e.computeDateTop(a.start,i),l=Math.max(o+(t||0),e.computeDateTop(a.end,i));r.push({start:Math.round(o),end:Math.round(l)})}return r}function $M(n,i,e,t){let r=[],s=[];for(let h=0;h<n.length;h+=1){let c=i[h];c?r.push({index:h,thickness:1,span:c}):s.push(n[h])}let{segRects:a,hiddenGroups:o}=_M(r,e,t),l=[];for(let h of a)l.push({seg:n[h.index],rect:h});for(let h of s)l.push({seg:h,rect:null});return{segPlacements:l,hiddenGroups:o}}const KM=tt({hour:"numeric",minute:"2-digit",meridiem:!1});class db extends Le{render(){return k(Qd,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:KM}))}}class QM extends Le{constructor(){super(...arguments),this.sortEventSegs=pe(S0)}render(){let{props:i,context:e}=this,{options:t}=e,r=t.selectMirror,s=i.eventDrag&&i.eventDrag.segs||i.eventResize&&i.eventResize.segs||r&&i.dateSelectionSegs||[],a=i.eventDrag&&i.eventDrag.affectedInstances||i.eventResize&&i.eventResize.affectedInstances||{},o=this.sortEventSegs(i.fgEventSegs,t.eventOrder);return k(Zd,{elTag:"td",elRef:i.elRef,elClasses:["fc-timegrid-col",...i.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},i.extraDataAttrs),date:i.date,dateProfile:i.dateProfile,todayRange:i.todayRange,extraRenderProps:i.extraRenderProps},l=>k("div",{className:"fc-timegrid-col-frame"},k("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(i.businessHourSegs,"non-business"),this.renderFillSegs(i.bgEventSegs,"bg-event"),this.renderFillSegs(i.dateSelectionSegs,"highlight")),k("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(o,a,!1,!1,!1)),k("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(s,{},!!i.eventDrag,!!i.eventResize,!!r,"mirror")),k("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(i.nowIndicatorSegs)),Jd(t)&&k(l,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(i,e,t,r,s,a){let{props:o}=this;return o.forPrint?pb(i,o):this.renderPositionedFgSegs(i,e,t,r,s,a)}renderPositionedFgSegs(i,e,t,r,s,a){let{eventMaxStack:o,eventShortHeight:l,eventOrderStrict:h,eventMinHeight:c}=this.context.options,{date:u,slatCoords:p,eventSelection:f,todayRange:v,nowDate:m}=this.props,g=t||r||s,y=pm(i,u,p,c),{segPlacements:b,hiddenGroups:E}=$M(i,y,h,o);return k(Ue,null,this.renderHiddenGroups(E,i),b.map(w=>{let{seg:A,rect:D}=w,N=A.eventRange.instance.instanceId,x=g||!!(!e[N]&&D),j=Oc(D&&D.span),q=!g&&D?this.computeSegHStyle(D):{left:0,right:0},L=!!D&&D.stackForward>0,O=!!D&&D.span.end-D.span.start<l;return k("div",{className:"fc-timegrid-event-harness"+(L?" fc-timegrid-event-harness-inset":""),key:a||N,style:Object.assign(Object.assign({visibility:x?"":"hidden"},j),q)},k(db,Object.assign({seg:A,isDragging:t,isResizing:r,isDateSelecting:s,isSelected:N===f,isShort:O},rs(A,v,m))))}))}renderHiddenGroups(i,e){let{extraDateSpan:t,dateProfile:r,todayRange:s,nowDate:a,eventSelection:o,eventDrag:l,eventResize:h}=this.props;return k(Ue,null,i.map(c=>{let u=Oc(c.span),p=XM(c.entries,e);return k(FM,{key:Jy(G0(p)),hiddenSegs:p,top:u.top,bottom:u.bottom,extraDateSpan:t,dateProfile:r,todayRange:s,nowDate:a,eventSelection:o,eventDrag:l,eventResize:h})}))}renderFillSegs(i,e){let{props:t,context:r}=this,a=pm(i,t.date,t.slatCoords,r.options.eventMinHeight).map((o,l)=>{let h=i[l];return k("div",{key:C0(h.eventRange),className:"fc-timegrid-bg-harness",style:Oc(o)},e==="bg-event"?k(z0,Object.assign({seg:h},rs(h,t.todayRange,t.nowDate))):j0(e))});return k(Ue,null,a)}renderNowIndicator(i){let{slatCoords:e,date:t}=this.props;return e?i.map((r,s)=>k(Xd,{key:s,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:e.computeDateTop(r.start,t)},isAxis:!1,date:t})):null}computeSegHStyle(i){let{isRtl:e,options:t}=this.context,r=t.slotEventOverlap,s=i.levelCoord,a=i.levelCoord+i.thickness,o,l;r&&(a=Math.min(1,s+(a-s)*2)),e?(o=1-a,l=s):(o=s,l=1-a);let h={zIndex:i.stackDepth+1,left:o*100+"%",right:l*100+"%"};return r&&!i.stackForward&&(h[e?"marginLeft":"marginRight"]=10*2),h}}function pb(n,{todayRange:i,nowDate:e,eventSelection:t,eventDrag:r,eventResize:s}){let a=(r?r.affectedInstances:null)||(s?s.affectedInstances:null)||{};return k(Ue,null,n.map(o=>{let l=o.eventRange.instance.instanceId;return k("div",{key:l,style:{visibility:a[l]?"hidden":""}},k(db,Object.assign({seg:o,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:l===t,isShort:!1},rs(o,i,e))))}))}function Oc(n){return n?{top:n.start,bottom:-n.end}:{top:"",bottom:""}}function XM(n,i){return n.map(e=>i[e.index])}class ZM extends Le{constructor(){super(...arguments),this.splitFgEventSegs=pe(pa),this.splitBgEventSegs=pe(pa),this.splitBusinessHourSegs=pe(pa),this.splitNowIndicatorSegs=pe(pa),this.splitDateSelectionSegs=pe(pa),this.splitEventDrag=pe(um),this.splitEventResize=pe(um),this.rootElRef=Gt(),this.cellElRefs=new Er}render(){let{props:i,context:e}=this,t=e.options.nowIndicator&&i.slatCoords&&i.slatCoords.safeComputeTop(i.nowDate),r=i.cells.length,s=this.splitFgEventSegs(i.fgEventSegs,r),a=this.splitBgEventSegs(i.bgEventSegs,r),o=this.splitBusinessHourSegs(i.businessHourSegs,r),l=this.splitNowIndicatorSegs(i.nowIndicatorSegs,r),h=this.splitDateSelectionSegs(i.dateSelectionSegs,r),c=this.splitEventDrag(i.eventDrag,r),u=this.splitEventResize(i.eventResize,r);return k("div",{className:"fc-timegrid-cols",ref:this.rootElRef},k("table",{role:"presentation",style:{minWidth:i.tableMinWidth,width:i.clientWidth}},i.tableColGroupNode,k("tbody",{role:"presentation"},k("tr",{role:"row"},i.axis&&k("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},k("div",{className:"fc-timegrid-col-frame"},k("div",{className:"fc-timegrid-now-indicator-container"},typeof t=="number"&&k(Xd,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:t},isAxis:!0,date:i.nowDate})))),i.cells.map((p,f)=>k(QM,{key:p.key,elRef:this.cellElRefs.createRef(p.key),dateProfile:i.dateProfile,date:p.date,nowDate:i.nowDate,todayRange:i.todayRange,extraRenderProps:p.extraRenderProps,extraDataAttrs:p.extraDataAttrs,extraClassNames:p.extraClassNames,extraDateSpan:p.extraDateSpan,fgEventSegs:s[f],bgEventSegs:a[f],businessHourSegs:o[f],nowIndicatorSegs:l[f],dateSelectionSegs:h[f],eventDrag:c[f],eventResize:u[f],slatCoords:i.slatCoords,eventSelection:i.eventSelection,forPrint:i.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:i}=this;i.onColCoords&&i.clientWidth!==null&&i.onColCoords(new Bn(this.rootElRef.current,JM(this.cellElRefs.currentMap,i.cells),!0,!1))}}function JM(n,i){return i.map(e=>n[e.key])}class eO extends ar{constructor(){super(...arguments),this.processSlotOptions=pe(tO),this.state={slatCoords:null},this.handleRootEl=i=>{i?this.context.registerInteractiveComponent(this,{el:i,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=i=>{let{onScrollTopRequest:e}=this.props,{slatCoords:t}=this.state;if(e&&t){if(i.time){let r=t.computeTimeTop(i.time);r=Math.ceil(r),r&&(r+=1),e(r)}return!0}return!1},this.handleColCoords=i=>{this.colCoords=i},this.handleSlatCoords=i=>{this.setState({slatCoords:i}),this.props.onSlatCoords&&this.props.onSlatCoords(i)}}render(){let{props:i,state:e}=this;return k("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:i.clientWidth,minWidth:i.tableMinWidth}},k(HM,{axis:i.axis,dateProfile:i.dateProfile,slatMetas:i.slatMetas,clientWidth:i.clientWidth,minHeight:i.expandRows?i.clientHeight:"",tableMinWidth:i.tableMinWidth,tableColGroupNode:i.axis?i.tableColGroupNode:null,onCoords:this.handleSlatCoords}),k(ZM,{cells:i.cells,axis:i.axis,dateProfile:i.dateProfile,businessHourSegs:i.businessHourSegs,bgEventSegs:i.bgEventSegs,fgEventSegs:i.fgEventSegs,dateSelectionSegs:i.dateSelectionSegs,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,todayRange:i.todayRange,nowDate:i.nowDate,nowIndicatorSegs:i.nowIndicatorSegs,clientWidth:i.clientWidth,tableMinWidth:i.tableMinWidth,tableColGroupNode:i.tableColGroupNode,slatCoords:e.slatCoords,onColCoords:this.handleColCoords,forPrint:i.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(i){this.scrollResponder.update(i.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(i,e){let{dateEnv:t,options:r}=this.context,{colCoords:s}=this,{dateProfile:a}=this.props,{slatCoords:o}=this.state,{snapDuration:l,snapsPerSlot:h}=this.processSlotOptions(this.props.slotDuration,r.snapDuration),c=s.leftToIndex(i),u=o.positions.topToIndex(e);if(c!=null&&u!=null){let p=this.props.cells[c],f=o.positions.tops[u],v=o.positions.getHeight(u),m=(e-f)/v,g=Math.floor(m*h),y=u*h+g,b=this.props.cells[c].date,E=yu(a.slotMinTime,HA(l,y)),w=t.add(b,E),A=t.add(w,l);return{dateProfile:a,dateSpan:Object.assign({range:{start:w,end:A},allDay:!1},p.extraDateSpan),dayEl:s.els[c],rect:{left:s.lefts[c],right:s.rights[c],top:f,bottom:f+v},layer:0}}return null}}function tO(n,i){let e=i||n,t=kd(n,e);return t===null&&(e=n,t=1),{snapDuration:e,snapsPerSlot:t}}class iO extends H0{sliceRange(i,e){let t=[];for(let r=0;r<e.length;r+=1){let s=Ys(i,e[r]);s&&t.push({start:s.start,end:s.end,isStart:s.start.valueOf()===i.start.valueOf(),isEnd:s.end.valueOf()===i.end.valueOf(),col:r})}return t}}class rO extends ar{constructor(){super(...arguments),this.buildDayRanges=pe(sO),this.slicer=new iO,this.timeColsRef=Gt()}render(){let{props:i,context:e}=this,{dateProfile:t,dayTableModel:r}=i,{nowIndicator:s,nextDayThreshold:a}=e.options,o=this.buildDayRanges(r,t,e.dateEnv);return k(Un,{unit:s?"minute":"day"},(l,h)=>k(eO,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(i,t,null,e,o),{forPrint:i.forPrint,axis:i.axis,dateProfile:t,slatMetas:i.slatMetas,slotDuration:i.slotDuration,cells:r.cells[0],tableColGroupNode:i.tableColGroupNode,tableMinWidth:i.tableMinWidth,clientWidth:i.clientWidth,clientHeight:i.clientHeight,expandRows:i.expandRows,nowDate:l,nowIndicatorSegs:s&&this.slicer.sliceNowDate(l,t,a,e,o),todayRange:h,onScrollTopRequest:i.onScrollTopRequest,onSlatCoords:i.onSlatCoords})))}}function sO(n,i,e){let t=[];for(let r of n.headerDates)t.push({start:e.add(r,i.slotMinTime),end:e.add(r,i.slotMaxTime)});return t}const fm=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function nO(n,i,e,t,r){let s=new Date(0),a=n,o=De(0),l=e||aO(t),h=[];for(;Vi(a)<Vi(i);){let c=r.add(s,a),u=kd(o,l)!==null;h.push({date:c,time:a,key:c.toISOString(),isoTimeStr:JA(c),isLabeled:u}),a=yu(a,t),o=yu(o,t)}return h}function aO(n){let i,e,t;for(i=fm.length-1;i>=0;i-=1)if(e=De(fm[i]),t=kd(e,n),t!==null&&t>1)return e;return n}class oO extends NM{constructor(){super(...arguments),this.buildTimeColsModel=pe(lO),this.buildSlatMetas=pe(nO)}render(){let{options:i,dateEnv:e,dateProfileGenerator:t}=this.context,{props:r}=this,{dateProfile:s}=r,a=this.buildTimeColsModel(s,t),o=this.allDaySplitter.splitProps(r),l=this.buildSlatMetas(s.slotMinTime,s.slotMaxTime,i.slotLabelInterval,i.slotDuration,e),{dayMinWidth:h}=i,c=!h,u=h,p=i.dayHeaders&&k(L0,{dates:a.headerDates,dateProfile:s,datesRepDistinctDays:!0,renderIntro:c?this.renderHeadAxis:null}),f=i.allDaySlot!==!1&&(m=>k(cb,Object.assign({},o.allDay,{dateProfile:s,dayTableModel:a,nextDayThreshold:i.nextDayThreshold,tableMinWidth:m.tableMinWidth,colGroupNode:m.tableColGroupNode,renderRowIntro:c?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:m.clientWidth,clientHeight:m.clientHeight,forPrint:r.forPrint},this.getAllDayMaxEventProps()))),v=m=>k(rO,Object.assign({},o.timed,{dayTableModel:a,dateProfile:s,axis:c,slotDuration:i.slotDuration,slatMetas:l,forPrint:r.forPrint,tableColGroupNode:m.tableColGroupNode,tableMinWidth:m.tableMinWidth,clientWidth:m.clientWidth,clientHeight:m.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:m.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return u?this.renderHScrollLayout(p,f,v,a.colCnt,h,l,this.state.slatCoords):this.renderSimpleLayout(p,f,v)}}function lO(n,i){let e=new V0(n.renderRange,i);return new P0(e,!1)}var hO='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';wd(hO);const cO={allDaySlot:Boolean};var uO=Nr({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:cO,views:{timeGrid:{component:oO,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});Gd.touchMouseIgnoreWait=500;let ku=0,zl=0,Iu=!1;class fb{constructor(i){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=e=>{if(!this.shouldIgnoreMouse()&&dO(e)&&this.tryStart(e)){let t=this.createEventFromMouse(e,!0);this.emitter.trigger("pointerdown",t),this.initScrollWatch(t),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=e=>{let t=this.createEventFromMouse(e);this.recordCoords(t),this.emitter.trigger("pointermove",t)},this.handleMouseUp=e=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(e)),this.cleanup()},this.handleTouchStart=e=>{if(this.tryStart(e)){this.isTouchDragging=!0;let t=this.createEventFromTouch(e,!0);this.emitter.trigger("pointerdown",t),this.initScrollWatch(t);let r=e.target;this.shouldIgnoreMove||r.addEventListener("touchmove",this.handleTouchMove),r.addEventListener("touchend",this.handleTouchEnd),r.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=e=>{let t=this.createEventFromTouch(e);this.recordCoords(t),this.emitter.trigger("pointermove",t)},this.handleTouchEnd=e=>{if(this.isDragging){let t=e.target;t.removeEventListener("touchmove",this.handleTouchMove),t.removeEventListener("touchend",this.handleTouchEnd),t.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(e)),this.cleanup(),this.isTouchDragging=!1,pO()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=e=>{if(!this.shouldIgnoreMove){let t=window.scrollX-this.prevScrollX+this.prevPageX,r=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:e,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:t,pageY:r,deltaX:t-this.origPageX,deltaY:r-this.origPageY})}},this.containerEl=i,this.emitter=new ph,i.addEventListener("mousedown",this.handleMouseDown),i.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),fO()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),vO()}tryStart(i){let e=this.querySubjectEl(i),t=i.target;return e&&(!this.handleSelector||Ht(t,this.handleSelector))?(this.subjectEl=e,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){Iu=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(i){return this.selector?Ht(i.target,this.selector):this.containerEl}shouldIgnoreMouse(){return ku||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(Iu=!0)}initScrollWatch(i){this.shouldWatchScroll&&(this.recordCoords(i),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(i){this.shouldWatchScroll&&(this.prevPageX=i.pageX,this.prevPageY=i.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(i,e){let t=0,r=0;return e?(this.origPageX=i.pageX,this.origPageY=i.pageY):(t=i.pageX-this.origPageX,r=i.pageY-this.origPageY),{origEvent:i,isTouch:!1,subjectEl:this.subjectEl,pageX:i.pageX,pageY:i.pageY,deltaX:t,deltaY:r}}createEventFromTouch(i,e){let t=i.touches,r,s,a=0,o=0;return t&&t.length?(r=t[0].pageX,s=t[0].pageY):(r=i.pageX,s=i.pageY),e?(this.origPageX=r,this.origPageY=s):(a=r-this.origPageX,o=s-this.origPageY),{origEvent:i,isTouch:!0,subjectEl:this.subjectEl,pageX:r,pageY:s,deltaX:a,deltaY:o}}}function dO(n){return n.button===0&&!n.ctrlKey}function pO(){ku+=1,setTimeout(()=>{ku-=1},Gd.touchMouseIgnoreWait)}function fO(){zl+=1,zl===1&&window.addEventListener("touchmove",vb,{passive:!1})}function vO(){zl-=1,zl||window.removeEventListener("touchmove",vb,{passive:!1})}function vb(n){Iu&&n.preventDefault()}class mO{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(i,e,t){this.sourceEl=i,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=e-window.scrollX,this.origScreenY=t-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(i,e){this.deltaX=i-window.scrollX-this.origScreenX,this.deltaY=e-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(i){i?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=i,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=i)}stop(i,e){let t=()=>{this.cleanup(),e()};i&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(t,this.revertDuration):setTimeout(t,0)}doRevertAnimation(i,e){let t=this.mirrorEl,r=this.sourceEl.getBoundingClientRect();t.style.transition="top "+e+"ms,left "+e+"ms",_a(t,{left:r.left,top:r.top}),CA(t,()=>{t.style.transition="",i()})}cleanup(){this.mirrorEl&&(Dd(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&_a(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let i=this.sourceElRect,e=this.mirrorEl;return e||(e=this.mirrorEl=this.sourceEl.cloneNode(!0),e.style.userSelect="none",e.style.webkitUserSelect="none",e.style.pointerEvents="none",e.classList.add("fc-event-dragging"),_a(e,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:i.right-i.left,height:i.bottom-i.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(e)),e}}class mb extends Ud{constructor(i,e){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=i,this.doesListening=e,this.scrollTop=this.origScrollTop=i.getScrollTop(),this.scrollLeft=this.origScrollLeft=i.getScrollLeft(),this.scrollWidth=i.getScrollWidth(),this.scrollHeight=i.getScrollHeight(),this.clientWidth=i.getClientWidth(),this.clientHeight=i.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(i){this.scrollController.setScrollTop(i),this.doesListening||(this.scrollTop=Math.max(Math.min(i,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(i){this.scrollController.setScrollLeft(i),this.doesListening||(this.scrollLeft=Math.max(Math.min(i,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class gb extends mb{constructor(i,e){super(new Yk(i),e)}getEventTarget(){return this.scrollController.el}computeClientRect(){return jk(this.scrollController.el)}}class gO extends mb{constructor(i){super(new Gk,i)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const vm=typeof performance=="function"?performance.now:Date.now;class yO{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let i=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(i){let e=vm();this.handleSide(i,(e-this.msSinceRequest)/1e3),this.requestAnimation(e)}else this.isAnimating=!1}}}start(i,e,t){this.isEnabled&&(this.scrollCaches=this.buildCaches(t),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(i,e))}handleMove(i,e){if(this.isEnabled){let t=i-window.scrollX,r=e-window.scrollY,s=this.pointerScreenY===null?0:r-this.pointerScreenY,a=this.pointerScreenX===null?0:t-this.pointerScreenX;s<0?this.everMovedUp=!0:s>0&&(this.everMovedDown=!0),a<0?this.everMovedLeft=!0:a>0&&(this.everMovedRight=!0),this.pointerScreenX=t,this.pointerScreenY=r,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(vm()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let i of this.scrollCaches)i.destroy();this.scrollCaches=null}}requestAnimation(i){this.msSinceRequest=i,requestAnimationFrame(this.animate)}handleSide(i,e){let{scrollCache:t}=i,{edgeThreshold:r}=this,s=r-i.distance,a=s*s/(r*r)*this.maxVelocity*e,o=1;switch(i.name){case"left":o=-1;case"right":t.setScrollLeft(t.getScrollLeft()+a*o);break;case"top":o=-1;case"bottom":t.setScrollTop(t.getScrollTop()+a*o);break}}computeBestEdge(i,e){let{edgeThreshold:t}=this,r=null,s=this.scrollCaches||[];for(let a of s){let o=a.clientRect,l=i-o.left,h=o.right-i,c=e-o.top,u=o.bottom-e;l>=0&&h>=0&&c>=0&&u>=0&&(c<=t&&this.everMovedUp&&a.canScrollUp()&&(!r||r.distance>c)&&(r={scrollCache:a,name:"top",distance:c}),u<=t&&this.everMovedDown&&a.canScrollDown()&&(!r||r.distance>u)&&(r={scrollCache:a,name:"bottom",distance:u}),l<=t&&this.everMovedLeft&&a.canScrollLeft()&&(!r||r.distance>l)&&(r={scrollCache:a,name:"left",distance:l}),h<=t&&this.everMovedRight&&a.canScrollRight()&&(!r||r.distance>h)&&(r={scrollCache:a,name:"right",distance:h}))}return r}buildCaches(i){return this.queryScrollEls(i).map(e=>e===window?new gO(!1):new gb(e,!1))}queryScrollEls(i){let e=[];for(let t of this.scrollQuery)typeof t=="object"?e.push(t):e.push(...Array.prototype.slice.call(i.getRootNode().querySelectorAll(t)));return e}}class co extends Qk{constructor(i,e){super(i),this.containerEl=i,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=r=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,wA(document.body),DA(document.body),r.isTouch||r.origEvent.preventDefault(),this.emitter.trigger("pointerdown",r),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(r.subjectEl,r.pageX,r.pageY),this.startDelay(r),this.minDistance||this.handleDistanceSurpassed(r)))},this.onPointerMove=r=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",r),!this.isDistanceSurpassed){let s=this.minDistance,a,{deltaX:o,deltaY:l}=r;a=o*o+l*l,a>=s*s&&this.handleDistanceSurpassed(r)}this.isDragging&&(r.origEvent.type!=="scroll"&&(this.mirror.handleMove(r.pageX,r.pageY),this.autoScroller.handleMove(r.pageX,r.pageY)),this.emitter.trigger("dragmove",r))}},this.onPointerUp=r=>{this.isInteracting&&(this.isInteracting=!1,TA(document.body),AA(document.body),this.emitter.trigger("pointerup",r),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(r)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let t=this.pointer=new fb(i);t.emitter.on("pointerdown",this.onPointerDown),t.emitter.on("pointermove",this.onPointerMove),t.emitter.on("pointerup",this.onPointerUp),e&&(t.selector=e),this.mirror=new mO,this.autoScroller=new yO}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(i){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(i)},this.delay):this.handleDelayEnd(i)}handleDelayEnd(i){this.isDelayEnded=!0,this.tryStartDrag(i)}handleDistanceSurpassed(i){this.isDistanceSurpassed=!0,this.tryStartDrag(i)}tryStartDrag(i){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(i.pageX,i.pageY,this.containerEl),this.emitter.trigger("dragstart",i),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(i){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,i))}stopDrag(i){this.isDragging=!1,this.emitter.trigger("dragend",i)}setIgnoreMove(i){this.pointer.shouldIgnoreMove=i}setMirrorIsVisible(i){this.mirror.setIsVisible(i)}setMirrorNeedsRevert(i){this.mirrorNeedsRevert=i}setAutoScrollEnabled(i){this.autoScroller.isEnabled=i}}class bO{constructor(i){this.el=i,this.origRect=jd(i),this.scrollCaches=M0(i).map(e=>new gb(e,!0))}destroy(){for(let i of this.scrollCaches)i.destroy()}computeLeft(){let i=this.origRect.left;for(let e of this.scrollCaches)i+=e.origScrollLeft-e.getScrollLeft();return i}computeTop(){let i=this.origRect.top;for(let e of this.scrollCaches)i+=e.origScrollTop-e.getScrollTop();return i}isWithinClipping(i,e){let t={left:i,top:e};for(let r of this.scrollCaches)if(!SO(r.getEventTarget())&&!Ok(t,r.clientRect))return!1;return!0}}function SO(n){let i=n.tagName;return i==="HTML"||i==="BODY"}class fh{constructor(i,e){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=t=>{let{dragging:r}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(t),this.initialHit||!this.requireInitial?(r.setIgnoreMove(!1),this.emitter.trigger("pointerdown",t)):r.setIgnoreMove(!0)},this.handleDragStart=t=>{this.emitter.trigger("dragstart",t),this.handleMove(t,!0)},this.handleDragMove=t=>{this.emitter.trigger("dragmove",t),this.handleMove(t)},this.handlePointerUp=t=>{this.releaseHits(),this.emitter.trigger("pointerup",t)},this.handleDragEnd=t=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,t),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",t)},this.droppableStore=e,i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("dragmove",this.handleDragMove),i.emitter.on("pointerup",this.handlePointerUp),i.emitter.on("dragend",this.handleDragEnd),this.dragging=i,this.emitter=new ph}processFirstCoord(i){let e={left:i.pageX,top:i.pageY},t=e,r=i.subjectEl,s;r instanceof HTMLElement&&(s=jd(r),t=Rk(t,s));let a=this.initialHit=this.queryHitForOffset(t.left,t.top);if(a){if(this.useSubjectCenter&&s){let o=x0(s,a.rect);o&&(t=Nk(o))}this.coordAdjust=Lk(t,e)}else this.coordAdjust={left:0,top:0}}handleMove(i,e){let t=this.queryHitForOffset(i.pageX+this.coordAdjust.left,i.pageY+this.coordAdjust.top);(e||!vh(this.movingHit,t))&&(this.movingHit=t,this.emitter.trigger("hitupdate",t,!1,i))}prepareHits(){this.offsetTrackers=kr(this.droppableStore,i=>(i.component.prepareHits(),new bO(i.el)))}releaseHits(){let{offsetTrackers:i}=this;for(let e in i)i[e].destroy();this.offsetTrackers={}}queryHitForOffset(i,e){let{droppableStore:t,offsetTrackers:r}=this,s=null;for(let a in t){let o=t[a].component,l=r[a];if(l&&l.isWithinClipping(i,e)){let h=l.computeLeft(),c=l.computeTop(),u=i-h,p=e-c,{origRect:f}=l,v=f.right-f.left,m=f.bottom-f.top;if(u>=0&&u<v&&p>=0&&p<m){let g=o.queryHit(u,p,v,m);g&&uh(g.dateProfile.activeRange,g.dateSpan.range)&&(this.disablePointCheck||l.el.contains(l.el.getRootNode().elementFromPoint(u+h-window.scrollX,p+c-window.scrollY)))&&(!s||g.layer>s.layer)&&(g.componentId=a,g.context=o.context,g.rect.left+=h,g.rect.right+=h,g.rect.top+=c,g.rect.bottom+=c,s=g)}}}return s}}function vh(n,i){return!n&&!i?!0:!!n!=!!i?!1:Sk(n.dateSpan,i.dateSpan)}function yb(n,i){let e={};for(let t of i.pluginHooks.datePointTransforms)Object.assign(e,t(n,i));return Object.assign(e,EO(n,i.dateEnv)),e}function EO(n,i){return{date:i.toDate(n.range.start),dateStr:i.formatIso(n.range.start,{omitTime:n.allDay}),allDay:n.allDay}}class CO extends jn{constructor(i){super(i),this.handlePointerDown=t=>{let{dragging:r}=this,s=t.origEvent.target;r.setIgnoreMove(!this.component.isValidDateDownEl(s))},this.handleDragEnd=t=>{let{component:r}=this,{pointer:s}=this.dragging;if(!s.wasTouchScroll){let{initialHit:a,finalHit:o}=this.hitDragging;if(a&&o&&vh(a,o)){let{context:l}=r,h=Object.assign(Object.assign({},yb(a.dateSpan,l)),{dayEl:a.dayEl,jsEvent:t.origEvent,view:l.viewApi||l.calendarApi.view});l.emitter.trigger("dateClick",h)}}},this.dragging=new co(i.el),this.dragging.autoScroller.isEnabled=!1;let e=this.hitDragging=new fh(this.dragging,qd(i));e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class wO extends jn{constructor(i){super(i),this.dragSelection=null,this.handlePointerDown=a=>{let{component:o,dragging:l}=this,{options:h}=o.context,c=h.selectable&&o.isValidDateDownEl(a.origEvent.target);l.setIgnoreMove(!c),l.delay=a.isTouch?TO(o):null},this.handleDragStart=a=>{this.component.context.calendarApi.unselect(a)},this.handleHitUpdate=(a,o)=>{let{context:l}=this.component,h=null,c=!1;if(a){let u=this.hitDragging.initialHit;a.componentId===u.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(u,a)||(h=DO(u,a,l.pluginHooks.dateSelectionTransformers)),(!h||!iI(h,a.dateProfile,l))&&(c=!0,h=null)}h?l.dispatch({type:"SELECT_DATES",selection:h}):o||l.dispatch({type:"UNSELECT_DATES"}),c?Ad():xd(),o||(this.dragSelection=h)},this.handlePointerUp=a=>{this.dragSelection&&(g0(this.dragSelection,a,this.component.context),this.dragSelection=null)};let{component:e}=i,{options:t}=e.context,r=this.dragging=new co(i.el);r.touchScrollAllowed=!1,r.minDistance=t.selectMinDistance||0,r.autoScroller.isEnabled=t.dragScroll;let s=this.hitDragging=new fh(this.dragging,qd(i));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function TO(n){let{options:i}=n.context,e=i.selectLongPressDelay;return e==null&&(e=i.longPressDelay),e}function DO(n,i,e){let t=n.dateSpan,r=i.dateSpan,s=[t.range.start,t.range.end,r.range.start,r.range.end];s.sort(OA);let a={};for(let o of e){let l=o(n,i);if(l===!1)return null;l&&Object.assign(a,l)}return a.range={start:s[0],end:s[3]},a.allDay=t.allDay,a}class uo extends jn{constructor(i){super(i),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=a=>{let o=a.origEvent.target,{component:l,dragging:h}=this,{mirror:c}=h,{options:u}=l.context,p=l.context;this.subjectEl=a.subjectEl;let f=this.subjectSeg=Hn(a.subjectEl),m=(this.eventRange=f.eventRange).instance.instanceId;this.relevantEvents=Bd(p.getCurrentData().eventStore,m),h.minDistance=a.isTouch?0:u.eventDragMinDistance,h.delay=a.isTouch&&m!==l.props.eventSelection?xO(l):null,u.fixedMirrorParent?c.parentNode=u.fixedMirrorParent:c.parentNode=Ht(o,".fc"),c.revertDuration=u.dragRevertDuration;let g=l.isValidSegDownEl(o)&&!Ht(o,".fc-event-resizer");h.setIgnoreMove(!g),this.isDragging=g&&a.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=a=>{let o=this.component.context,l=this.eventRange,h=l.instance.instanceId;a.isTouch?h!==this.component.props.eventSelection&&o.dispatch({type:"SELECT_EVENT",eventInstanceId:h}):o.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(o.calendarApi.unselect(a),o.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Qe(o,l.def,l.instance),jsEvent:a.origEvent,view:o.viewApi}))},this.handleHitUpdate=(a,o)=>{if(!this.isDragging)return;let l=this.relevantEvents,h=this.hitDragging.initialHit,c=this.component.context,u=null,p=null,f=null,v=!1,m={affectedEvents:l,mutatedEvents:ui(),isEvent:!0};if(a){u=a.context;let g=u.options;c===u||g.editable&&g.droppable?(p=AO(h,a,this.eventRange.instance.range.start,u.getCurrentData().pluginHooks.eventDragMutationMassagers),p&&(f=_d(l,u.getCurrentData().eventUiBases,p,u),m.mutatedEvents=f,B0(m,a.dateProfile,u)||(v=!0,p=null,f=null,m.mutatedEvents=ui()))):u=null}this.displayDrag(u,m),v?Ad():xd(),o||(c===u&&vh(h,a)&&(p=null),this.dragging.setMirrorNeedsRevert(!p),this.dragging.setMirrorIsVisible(!a||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=u,this.validMutation=p,this.mutatedRelevantEvents=f)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=a=>{if(this.isDragging){let o=this.component.context,l=o.viewApi,{receivingContext:h,validMutation:c}=this,u=this.eventRange.def,p=this.eventRange.instance,f=new Qe(o,u,p),v=this.relevantEvents,m=this.mutatedRelevantEvents,{finalHit:g}=this.hitDragging;if(this.clearDrag(),o.emitter.trigger("eventDragStop",{el:this.subjectEl,event:f,jsEvent:a.origEvent,view:l}),c){if(h===o){let y=new Qe(o,m.defs[u.defId],p?m.instances[p.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:m});let b={oldEvent:f,event:y,relatedEvents:_s(m,o,p),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:v})}},E={};for(let w of o.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(E,w(c,o));o.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},b),E),{el:a.subjectEl,delta:c.datesDelta,jsEvent:a.origEvent,view:l})),o.emitter.trigger("eventChange",b)}else if(h){let y={event:f,relatedEvents:_s(v,o,p),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:v})}};o.emitter.trigger("eventLeave",Object.assign(Object.assign({},y),{draggedEl:a.subjectEl,view:l})),o.dispatch({type:"REMOVE_EVENTS",eventStore:v}),o.emitter.trigger("eventRemove",y);let b=m.defs[u.defId],E=m.instances[p.instanceId],w=new Qe(h,b,E);h.dispatch({type:"MERGE_EVENTS",eventStore:m});let A={event:w,relatedEvents:_s(m,h,E),revert(){h.dispatch({type:"REMOVE_EVENTS",eventStore:m})}};h.emitter.trigger("eventAdd",A),a.isTouch&&h.dispatch({type:"SELECT_EVENT",eventInstanceId:p.instanceId}),h.emitter.trigger("drop",Object.assign(Object.assign({},yb(g.dateSpan,h)),{draggedEl:a.subjectEl,jsEvent:a.origEvent,view:g.context.viewApi})),h.emitter.trigger("eventReceive",Object.assign(Object.assign({},A),{draggedEl:a.subjectEl,view:g.context.viewApi}))}}else o.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:e}=this,{options:t}=e.context,r=this.dragging=new co(i.el);r.pointer.selector=uo.SELECTOR,r.touchScrollAllowed=!1,r.autoScroller.isEnabled=t.dragScroll;let s=this.hitDragging=new fh(this.dragging,wu);s.useSubjectCenter=i.useEventCenter,s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(i,e){let t=this.component.context,r=this.receivingContext;r&&r!==i&&(r===t?r.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:e.affectedEvents,mutatedEvents:ui(),isEvent:!0}}):r.dispatch({type:"UNSET_EVENT_DRAG"})),i&&i.dispatch({type:"SET_EVENT_DRAG",state:e})}clearDrag(){let i=this.component.context,{receivingContext:e}=this;e&&e.dispatch({type:"UNSET_EVENT_DRAG"}),i!==e&&i.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}uo.SELECTOR=".fc-event-draggable, .fc-event-resizable";function AO(n,i,e,t){let r=n.dateSpan,s=i.dateSpan,a=r.range.start,o=s.range.start,l={};r.allDay!==s.allDay&&(l.allDay=s.allDay,l.hasEnd=i.context.options.allDayMaintainDuration,s.allDay?a=Ye(e):a=e);let h=En(a,o,n.context.dateEnv,n.componentId===i.componentId?n.largeUnit:null);h.milliseconds&&(l.allDay=!1);let c={datesDelta:h,standardProps:l};for(let u of t)u(c,n,i);return c}function xO(n){let{options:i}=n.context,e=i.eventLongPressDelay;return e==null&&(e=i.longPressDelay),e}class kO extends jn{constructor(i){super(i),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=s=>{let{component:a}=this,o=this.querySegEl(s),l=Hn(o),h=this.eventRange=l.eventRange;this.dragging.minDistance=a.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(s.origEvent.target)||s.isTouch&&this.component.props.eventSelection!==h.instance.instanceId)},this.handleDragStart=s=>{let{context:a}=this.component,o=this.eventRange;this.relevantEvents=Bd(a.getCurrentData().eventStore,this.eventRange.instance.instanceId);let l=this.querySegEl(s);this.draggingSegEl=l,this.draggingSeg=Hn(l),a.calendarApi.unselect(),a.emitter.trigger("eventResizeStart",{el:l,event:new Qe(a,o.def,o.instance),jsEvent:s.origEvent,view:a.viewApi})},this.handleHitUpdate=(s,a,o)=>{let{context:l}=this.component,h=this.relevantEvents,c=this.hitDragging.initialHit,u=this.eventRange.instance,p=null,f=null,v=!1,m={affectedEvents:h,mutatedEvents:ui(),isEvent:!0};s&&(s.componentId===c.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(c,s)||(p=IO(c,s,o.subjectEl.classList.contains("fc-event-resizer-start"),u.range))),p&&(f=_d(h,l.getCurrentData().eventUiBases,p,l),m.mutatedEvents=f,B0(m,s.dateProfile,l)||(v=!0,p=null,f=null,m.mutatedEvents=null)),f?l.dispatch({type:"SET_EVENT_RESIZE",state:m}):l.dispatch({type:"UNSET_EVENT_RESIZE"}),v?Ad():xd(),a||(p&&vh(c,s)&&(p=null),this.validMutation=p,this.mutatedRelevantEvents=f)},this.handleDragEnd=s=>{let{context:a}=this.component,o=this.eventRange.def,l=this.eventRange.instance,h=new Qe(a,o,l),c=this.relevantEvents,u=this.mutatedRelevantEvents;if(a.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:h,jsEvent:s.origEvent,view:a.viewApi}),this.validMutation){let p=new Qe(a,u.defs[o.defId],l?u.instances[l.instanceId]:null);a.dispatch({type:"MERGE_EVENTS",eventStore:u});let f={oldEvent:h,event:p,relatedEvents:_s(u,a,l),revert(){a.dispatch({type:"MERGE_EVENTS",eventStore:c})}};a.emitter.trigger("eventResize",Object.assign(Object.assign({},f),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||De(0),endDelta:this.validMutation.endDelta||De(0),jsEvent:s.origEvent,view:a.viewApi})),a.emitter.trigger("eventChange",f)}else a.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:e}=i,t=this.dragging=new co(i.el);t.pointer.selector=".fc-event-resizer",t.touchScrollAllowed=!1,t.autoScroller.isEnabled=e.context.options.dragScroll;let r=this.hitDragging=new fh(this.dragging,qd(i));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(i){return Ht(i.subjectEl,".fc-event")}}function IO(n,i,e,t){let r=n.context.dateEnv,s=n.dateSpan.range.start,a=i.dateSpan.range.start,o=En(s,a,r,n.largeUnit);if(e){if(r.add(t.start,o)<t.end)return{startDelta:o}}else if(r.add(t.end,o)>t.start)return{endDelta:o};return null}class MO{constructor(i){this.context=i,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=t=>{t.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=t=>{let r=this.context.options.unselectCancel,s=$y(t.origEvent);this.matchesCancel=!!Ht(s,r),this.matchesEvent=!!Ht(s,uo.SELECTOR)},this.onDocumentPointerUp=t=>{let{context:r}=this,{documentPointer:s}=this,a=r.getCurrentData();if(!s.wasTouchScroll){if(a.dateSelection&&!this.isRecentPointerDateSelect){let o=r.options.unselectAuto;o&&(!o||!this.matchesCancel)&&r.calendarApi.unselect(t)}a.eventSelection&&!this.matchesEvent&&r.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let e=this.documentPointer=new fb(document);e.shouldIgnoreMove=!0,e.shouldWatchScroll=!1,e.emitter.on("pointerdown",this.onDocumentPointerDown),e.emitter.on("pointerup",this.onDocumentPointerUp),i.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const OO={fixedMirrorParent:B},RO={dateClick:B,eventDragStart:B,eventDragStop:B,eventDrop:B,eventResizeStart:B,eventResizeStop:B,eventResize:B,drop:B,eventReceive:B,eventLeave:B};Gd.dataAttrPrefix="";var NO=Nr({name:"@fullcalendar/interaction",componentInteractions:[CO,wO,uo,kO],calendarInteractions:[MO],elementDraggingImpl:co,optionRefiners:OO,listenerRefiners:RO});const LO={class:"calendar-wrapper m-4 max-h-[calc(100vh-100px)] overflow-y-auto"},VO=Ks({__name:"CalendarView",props:{data:{}},emits:["select:ticket"],setup(n,{emit:i}){const e=n,t=i,r=["#DBEAFE","#DCFCE7","#FEF3C7","#FCE7F3","#EDE9FE","#ECFEFF","#FFE4E6"],s=Bt(()=>e.data.filter(o=>o["start-date"]).map((o,l)=>{const h=r[l%r.length];return{id:o._id,title:o["card-title"],start:o["start-date"],allDay:!0,backgroundColor:h,borderColor:h,textColor:"#374151",extendedProps:{card:o}}})),a=Bt(()=>({plugins:[AM,uO,NO],initialView:"dayGridMonth",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},events:s.value,dayMaxEventRows:!0,eventDisplay:"block",eventClick(o){t("select:ticket",o.event.extendedProps.card)}}));return(o,l)=>(fe(),me("div",LO,[Qi(Sr(K1),{options:a.value,onSelectCard:l[0]||(l[0]=()=>{})},null,8,["options"])]))}}),gV=Zg(VO,[["__scopeId","data-v-8c3ddf00"]]),PO={class:"max-h-[calc(100vh-100px)]"},yV=Ks({__name:"GanttChartView",props:{data:{}},emits:["select:ticket"],setup(n,{emit:i}){const e=n,t=["#DBEAFE","#DCFCE7","#FEF3C7","#FCE7F3","#EDE9FE","#ECFEFF","#FFE4E6"],r={id:"TaskID",name:"TaskName",startDate:"StartDate",endDate:"EndDate",duration:"Duration",progress:"Progress",child:"subtasks"},s=Bt(()=>e.data.map((l,h)=>{const c=new Date(l["start-date"]),u=l["end-date"]?new Date(l["end-date"]):c,p=Math.ceil((u.getTime()-c.getTime())/(1e3*60*60*24))||1,f=t[h%t.length];return{TaskID:l._id,TaskName:l["card-title"],StartDate:c,EndDate:u,Duration:p,Progress:0,barColor:f,foreground:"#374151",extendedProps:{card:l}}})),a=i,o=l=>{const h=l.data.extendedProps.card;a("select:ticket",h)};return(l,h)=>{const c=kh("e-column"),u=kh("e-columns"),p=kh("ejs-gantt");return fe(),me("div",PO,[Qi(p,{ref:"ganttRef",dataSource:s.value,treeColumnIndex:1,taskFields:r,height:"100%",onRowSelected:o},{default:Cl(()=>[Qi(u,null,{default:Cl(()=>[Qi(c,{field:"TaskID",headerText:"Task ID",textAlign:"Right",width:"70"}),Qi(c,{field:"TaskName",headerText:"Task Name",textAlign:"Left",width:"200"}),Qi(c,{field:"StartDate",headerText:"Start Date",textAlign:"Right",format:"yMd",width:"90"}),Qi(c,{field:"Duration",headerText:"Duration",textAlign:"Right",width:"80"})]),_:1})]),_:1},8,["dataSource"])])}}});var Ir="cellClick",HO="cellDoubleClick",BO="moreEventsClick",ja="select",FO="hover",Yt="actionBegin",Mr="actionComplete",fa="actionFailure",Mu="navigating",di="renderCell",On="eventClick",WO="eventDoubleClick",to="eventRendered",_O="dataBinding",qO="dataBound",Ua="popupOpen",jl="popupClose",Fn="inlineClick",mm="cellSelect",Rc="virtualScrollStart",gm="virtualScrollStop",Ou="noEvents",bb="agendaCells",zO="resourceHeader",Sb="dateHeader",jO="beforePaste",UO="tooltipOpen",YO="print",Fi="data-ready",ip="events-loaded",si="content-ready",ym="scroll",Ul="virtual-scroll",Wi="scroll-ui-update",Ru="ui-update",Or="document-click",Nu="document-paste",Lu="cell-mouse-down",Si=7,bm=6,it=864e5,at=6e4;function GO(n,i,e){var t=0,r=R("div",{className:i}).cloneNode();return r.style.visibility="hidden",r.style.position="absolute",n.appendChild(r),t=Eb(r,e),ve(r),t}function $O(n,i,e){var t=0,r=R("div",{className:i}).cloneNode();return r.style.visibility="hidden",r.style.position="absolute",n.appendChild(r),t=sp(r,e),ve(r),t}function KO(n){var i=getComputedStyle(n);return window.WebKitCSSMatrix?new WebKitCSSMatrix(i.webkitTransform).m42:0}function Sm(n){var i=getComputedStyle(n);return window.WebKitCSSMatrix?new WebKitCSSMatrix(i.webkitTransform).m41:0}function Ni(n,i){var e=new Date(n.getTime());return i=(i-e.getDay()+7*-1)%7,new Date(e.setDate(e.getDate()+(isNaN(i)?0:i)))}function Em(n,i){var e=Ni(n,i),t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+6);return new Date(t.getTime())}function Vu(n){return new Date(n.getFullYear(),n.getMonth(),1)}function mh(n){return new Date(n.getFullYear(),n.getMonth()+1,0)}function Nc(n){var i=new Date(n.getFullYear(),0,1).valueOf(),e=new Date(n.getFullYear(),n.getMonth(),n.getDate()).valueOf(),t=(e-i+it)/it;return Math.ceil(t/7)}function QO(n,i){return new Date(i.valueOf()-(i.valueOf()-n.valueOf())/2)}function XO(n,i){var e=n.getTimezoneOffset(),t=new Date(n.getTime()+i),r=t.getTimezoneOffset()-e;return n.setTime(t.getTime()+r*at),n}function W(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())}function ts(n){var i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0).getTimezoneOffset(),e=n.getTimezoneOffset(),t=e-i;return n.getTime()-new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0).getTime()-t*60*1e3}function ZO(n,i){return Math.ceil((i.getTime()-n.getTime())/it)}function Z(n,i){return n=new Date(""+n),new Date(n.setDate(n.getDate()+i))}function Hs(n,i){n=new Date(""+n);var e=n.getDate();return n.setDate(1),n.setMonth(n.getMonth()+i),n.setDate(Math.min(e,JO(n))),n}function ei(n,i,e){var t=new Date(n.getTime());t.setHours(i.getHours()),t.setMinutes(i.getMinutes()),t.setSeconds(i.getSeconds());var r=new Date(n.getTime());return e.getHours()===0?r=Z(r,1):(r.setHours(e.getHours()),r.setMinutes(e.getMinutes()),r.setSeconds(e.getSeconds())),{startHour:t,endHour:r}}function JO(n){return mh(n).getDate()}function Pu(n,i){var e=W(new Date(n)),t=W(new Date(i));return Math.round((t.getTime()-e.getTime())/it)}function Cm(n){return n.indexOf("Date")!==-1?new Date(parseInt(n.match(/\d+/g).toString(),10)):n.indexOf("T")!==-1?new Date(n):new Date(n.replace(/-/g,"/"))}var fl=null,Ya=null;function rp(){if(fl!==null)return fl;Ya===null&&(Ya=window.devicePixelRatio||window.screen.availWidth/document.documentElement.clientWidth);var n=R("div"),i=0;n.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(n);var e=devicePixelRatio?devicePixelRatio.toFixed(2)==="1.10"||devicePixelRatio<=1?Math.ceil(devicePixelRatio%1):Math.floor(devicePixelRatio%1):0;return i=n.offsetWidth-n.clientWidth-e|0,document.body.removeChild(n),fl=i}function eR(){var n=window.devicePixelRatio||window.screen.availWidth/document.documentElement.clientWidth;Ya&&Ya!==n&&(fl=null,Ya=n)}function io(n,i,e,t,r){for(var s=0,a=n.length;s<a;s++)if(n[parseInt(s.toString(),10)][""+i]===e)if(t){var o=r.slice(-2)[0].field,l=t[""+o]instanceof Array?t[""+o]:[t[""+o]],h=l.join(",");if(h.includes(n[parseInt(s.toString(),10)][r.slice(-1)[0].groupIDField]))return s}else return s;return-1}function Hu(n){var i=getComputedStyle(n);return n.offsetHeight+(parseInt(i.marginTop,10)||0)+(parseInt(i.marginBottom,10)||0)}function rr(n){for(var i=[].slice.call(n.children),e=0,t=i;e<t.length;e++){var r=t[e];n.removeChild(r)}}function tR(n){var i=new Date(n.getFullYear(),0,1),e=new Date(n.getFullYear(),6,1);return n.getTimezoneOffset()<Math.max(i.getTimezoneOffset(),e.getTimezoneOffset())}function Dt(n){var i=n.getFullYear(),e=n.getMonth(),t=n.getDate(),r=n.getHours(),s=n.getMinutes(),a=n.getSeconds(),o=n.getMilliseconds();return Date.UTC(i,e,t,r,s,a,o)}function iR(){return window.navigator.userAgent.toLowerCase().indexOf("mobi")>-1}function rR(){return window.navigator.userAgent.toLowerCase().indexOf("ipad")>-1}function Ne(n,i){if(i==="multiple")n=n.split(" ").map(function(t){return t.charAt(0).toLocaleUpperCase()+t.substring(1)}).join(" ");else if(i==="single"){if(n[0]>="0"&&n[0]<="9"){var e=n.match(/[a-zA-Z]/);n=d(e)?n:n.slice(0,e.index)+n[e.index].toLocaleUpperCase()+n.slice(e.index+1)}n=n[0].toLocaleUpperCase()+n.slice(1)}return n}function sp(n,i){return i?n.offsetWidth:n.getBoundingClientRect().width}function Eb(n,i){return i?n.offsetHeight:n.getBoundingClientRect().height}var Bu="e-schedule",Lc="e-rtl",Rn="e-device",wm="e-adaptive",Vc="e-multi-drag",qe="e-icons",is="e-enable",Oe="e-disable",Ei="e-table-container",Cb="e-schedule-table",Me="e-all-day-cells",sR="e-header-popup",nR="e-header-calendar",Wn="e-all-day-row",$e="e-content-table",se="e-work-cells",Cn="e-work-hours",Je="e-popup-open",aR="e-popup-close",Hi="e-date-header-wrap",np="e-date-header-container",bt="e-header-cells",oR="e-header-week-cell",lR="e-header-month-cell",hR="e-header-year-cell",cR="e-work-days",Xe="e-other-month",wb="e-current-day",Fu="e-current-date",Wu="e-current-panel",_u="e-previous-panel",Tm="e-next-panel",uR="e-prev",dR="e-next",un="e-translate",pR="e-left-indent",Tb="e-left-indent-wrap",Nn="e-event-table",fR="e-resource-left-td",Ln="e-resource-group-cells",vl="e-resource-text",Pi="e-resource-column-wrap",Ga="e-resource-column-table",Dm="e-child-node",gr="e-parent-node",ks="e-resource-expand",$i="e-resource-collapse",wn="e-resource-tree-icon",ti="e-resource-cells",Am="e-time-cells-wrap",vR="e-time-cells",Yl="e-time-slots",mR="e-alternate-cells",xm="e-current-time",Gl="e-current-timeline",km="e-previous-timeline",Pc="e-hide-childs",Im="e-scroll-container",Db="e-timeline-wrapper",ir="e-appointment-wrapper",Ba="e-appointment-wrapper-hidden",Ab="e-day-wrapper",gR="e-schedule-toolbar-container",ro="e-schedule-resource-toolbar-container",Mm="e-schedule-toolbar",xb="e-schedule-resource-toolbar",Bs="e-selected-cell",$l="e-week-number-wrapper",gh="e-week-number",Hc="e-wrapper-container",yh="e-appointment-container",he="e-appointment",_n="e-block-appointment",Kl="e-block-indicator",fn="e-appointment-border",ap="e-appointment-details",Ql="e-subject-wrap",kb="e-resource-name",Fs="e-time",op="e-table-wrap",lp="e-outer-table",Te="e-content-wrap",so="e-virtual-track",er="e-agenda-cells",Ib="e-current-day",Xl="e-active-appointment-agenda",Mb="e-month-header",Om="e-day-date-header",yR="e-resource-column",Rm="e-date-column",qn="e-navigate",qu="e-date-header",Nm="e-day-border",bR="e-date-border",SR="e-day-padding",zu="e-date-time",ER="e-date-time-wrapper",CR="e-empty-event",Lm="e-no-event",Zl="e-indicator",wR="e-up-icon",TR="e-down-icon",Ob="e-left-icon",Rb="e-right-icon",Vm="e-event-action",Jl="e-new-event",DR="e-drag-clone",Nb="e-event-resize",AR="e-resize-clone",Pm="e-left-handler",Hm="e-right-handler",xR="e-top-handler",kR="e-bottom-handler",no="e-recurrence-icon",ao="e-recurrence-edit-icon",hp="e-header-row",Tn="e-all-day-appointment-wrapper",ju="e-all-day-appointment",Bm="e-appointment-hide",va="e-row-count-wrapper",$a="e-all-day-appointment-section",ml="e-appointment-expand",Fm="e-appointment-collapse",$t="e-more-indicator",Bc="e-cell-popup",Fc="e-event-popup",IR="e-multiple-event-popup",Wc="e-popup-header",Wm="e-header-icon-wrapper",MR="e-popup-content",Uu="e-popup-footer",_m="e-date-time-details",OR="e-recurrence-summary",eh="e-event-details",th="e-event-create",Os="e-event-edit",br="e-event-delete",Ot="e-text-ellipsis",tr="e-more-popup-wrapper",_c="e-more-event-popup",RR="e-more-event-header",qc="e-more-event-date-header",qm="e-header-day",vn="e-header-date",Yu="e-more-event-close",Zo="e-more-event-content",zc="e-more-appointment-wrapper",zm="e-quick-dialog",jc="e-quick-dialog-occurrence-event",Uc="e-quick-dialog-series-event",jm="e-quick-dialog-following-events",Um="e-following-events-dialog",Yc="e-quick-dialog-delete",ma="e-quick-dialog-cancel",jr="e-quick-alertok",Ui="e-quick-alertcancel",Ym="e-quick-alertfollowing",Gm="e-quick-dialog-alert-btn",fr="e-schedule-dialog",NR="e-form-container",yr="e-schedule-form",LR="e-all-day-time-zone-row",ga="e-all-day",Gr="e-time-zone",VR="e-time-zone-icon",PR="e-time-zone-details",HR="e-repeat-parent-row",ya="e-repeat",BR="e-title-location-row",Ke="e-subject",zs="e-location",FR="e-location-icon",$m="e-location-details",WR="e-start-end-row",Ur="e-start",Es="e-end",_R="e-resources-row",mn="e-description",qR="e-description-icon",Km="e-description-details",ba="e-time-zone-row",Sa="e-start-time-zone",Ea="e-end-time-zone",zR="e-back-icon",Qm="e-save-icon",Lb="e-event-cancel",Jo="e-event-save",jR="e-dialog-parent",Xm="e-title-text",Zm="e-icon-disable",$r="e-edit",Ca="e-edit-icon",Fa="e-delete",Jm="e-delete-icon",Is="e-close",el="e-close-icon",eg="e-schedule-error",UR="e-schedule-event-tooltip",Gc="e-tooltip-hidden",$c="e-animate",YR="e-timescale-disable",GR="e-disable-date",Rt="e-hidden",Gu="e-disable-dates",Ri="e-quick-popup-wrapper",$R="e-popup-table",tg="e-resource-menu",ig="e-icon-menu",rg="e-resource-level-title",KR="e-resource-tree",sg="e-resource-tree-popup-overlay",wa="e-resource-tree-popup",ng="e-resource",ag="e-resource-icon",Kc="e-resource-details",og="e-date-time-icon",Vb="e-virtual-scroll",lg="e-icon-disable",Pb="e-auto-height",Hb="e-ignore-whitespace",QR="e-template",gl="e-read-only",Jt="e-inline-subject",Ka="e-inline-appointment",Qc="e-inline-edit",hg="e-scroll-hidden",oo="e-all-day-scroll",yl="e-all-day-auto",XR="e-clipboard",Qr=function(){return Qr=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Qr.apply(this,arguments)},Xc=function(){function n(i){this.parent=i,this.l10n=this.parent.localeObj,this.renderHeader(),this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.on(Or,this.closeHeaderPopup,this)},n.prototype.removeEventListener=function(){this.parent.off(Or,this.closeHeaderPopup)},n.prototype.closeHeaderPopup=function(i){var e=M(i.event.target,".e-date-range,.e-header-popup,.e-day,.e-selected"),t=M(i.event.target,".e-hor-nav,.e-toolbar-pop"),r=this.parent.element.querySelector("."+Te),s=this.parent.element.querySelector(".e-toolbar-pop");if(this.parent.isAdaptive)if(!d(t)&&(t.classList.contains("e-toolbar-pop")||t.classList.contains("e-hor-nav"))&&!(t.classList.contains("e-hor-nav")&&s&&s.classList.contains(Je)))T([r],hg);else{I([r],hg);var a=this.element.querySelector(".e-toolbar-pop");if(!d(a)){var o=a.ej2_instances[0];o&&!(!d(t)&&t.classList.contains("e-hor-nav")&&a.classList.contains(Je))&&o.hide()}}d(e)&&this.hideHeaderPopup()},n.prototype.hideHeaderPopup=function(){this.headerPopup&&this.headerPopup.hide()},n.prototype.renderHeader=function(){this.element=R("div",{className:gR});var i=R("div",{className:Mm});this.element.appendChild(i),this.parent.element.insertBefore(this.element,this.parent.element.firstElementChild),this.renderToolbar()},n.prototype.renderToolbar=function(){var i=this,e=this.parent.toolbarItems&&this.parent.toolbarItems.length>0?this.getToolbarItems():this.getItems();this.parent.trigger(Yt,{requestType:"toolbarItemRendering",items:e},function(t){i.toolbarObj=new oE({items:t.items,overflowMode:"Popup",clicked:i.toolbarClickHandler.bind(i),created:i.toolbarCreateHandler.bind(i),enableRtl:i.parent.enableRtl,enableHtmlSanitizer:i.parent.enableHtmlSanitizer,locale:i.parent.locale}),i.toolbarObj.isStringTemplate=!0,i.toolbarObj.root=i.parent.root?i.parent.root:i.parent,i.toolbarObj.appendTo(i.parent.element.querySelector("."+Mm)),i.toolbarObj.element.setAttribute("aria-label","Scheduler");var r=i.toolbarObj.element.querySelector(".e-prev");r&&r.firstElementChild.setAttribute("title",i.l10n.getConstant("previous"));var s=i.toolbarObj.element.querySelector(".e-next");s&&s.firstElementChild.setAttribute("title",i.l10n.getConstant("next")),i.updateAddIcon(),i.updateActiveView(),i.parent.trigger(Mr,{requestType:"toolBarItemRendered",items:i.toolbarObj.items})})},n.prototype.updateItems=function(){var i=this;if(this.toolbarObj){var e=this.getItems();this.parent.trigger(Yt,{requestType:"toolbarItemRendering",items:e},function(t){i.toolbarObj.items=t.items,i.toolbarObj.dataBind(),i.parent.trigger(Mr,{requestType:"toolBarItemRendered",items:i.toolbarObj.items})})}},n.prototype.getPopUpRelativeElement=function(){return this.parent.isAdaptive?this.toolbarObj.element:this.element.querySelector(".e-date-range")},n.prototype.setDayOfWeek=function(i){this.headerCalendar&&(this.headerCalendar.firstDayOfWeek=i,this.headerCalendar.dataBind())},n.prototype.setCalendarDate=function(i){this.headerCalendar&&(this.headerCalendar.value=i,this.headerCalendar.dataBind())},n.prototype.setCalendarMinMaxDate=function(){this.headerCalendar&&(this.headerCalendar.min=this.parent.minDate,this.headerCalendar.max=this.parent.maxDate,this.headerCalendar.dataBind())},n.prototype.getCalendarView=function(){return["Month","MonthAgenda","TimelineMonth"].indexOf(this.parent.currentView)>-1?"Year":["Year","TimelineYear"].indexOf(this.parent.currentView)>-1?"Decade":"Month"},n.prototype.setCalendarView=function(){if(this.headerCalendar){var i=this.getCalendarView();this.headerCalendar.depth=i,this.headerCalendar.start=i,this.headerCalendar.refresh()}},n.prototype.updateActiveView=function(){var i=[].slice.call(this.toolbarObj.element.querySelectorAll(".e-views"));I(i,["e-active-view"]),i.length>0&&i[this.parent.viewIndex]&&T([i[this.parent.viewIndex]],["e-active-view"])},n.prototype.updateDateRange=function(i){var e=this.toolbarObj.element.querySelector(".e-date-range");if(e){e.firstElementChild.setAttribute("aria-haspopup","true");var t=e.querySelector(".e-tbar-btn-text");if(this.parent.activeViewOptions.dateRangeTemplate){t.textContent="";var r={startDate:this.parent.activeView.getStartDate(),endDate:this.parent.activeView.getEndDate(),currentView:this.parent.currentView},s=this.parent.activeViewOptions.dateRangeTemplateName,a=this.parent.element.id+"_"+s+"dateRangeTemplate",o=[].slice.call(this.parent.getDateRangeTemplate()(r,this.parent,"dateRangeTemplate",a,!1,void 0,void 0,this.parent.root));oe(o,t)}else{var l=this.parent.activeView.getDateRangeText(i);e.firstElementChild.setAttribute("aria-label",l),t.textContent=l}this.refresh()}},n.prototype.refresh=function(){this.toolbarObj&&this.toolbarObj.refreshOverflow()},n.prototype.updateAddIcon=function(){var i=this.toolbarObj.element.querySelector(".e-add");i&&(this.parent.eventSettings.allowAdding?I([i],Rt):T([i],Rt))},n.prototype.getDateRangeText=function(){var i=this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y",calendar:this.parent.getCalendarMode()});return Ne(i,"single")},n.prototype.getItemModel=function(i){var e={};return i.id&&(e.id=i.id),i.text&&(e.text=i.text),i.tooltipText&&(e.tooltipText=i.tooltipText),i.prefixIcon&&(e.prefixIcon=i.prefixIcon),i.cssClass&&(e.cssClass=i.cssClass),i.showTextOn!=="Both"&&(e.showTextOn=i.showTextOn),i.template&&(e.template=i.template),i.disabled&&(e.disabled=i.disabled),i.width!=="auto"&&(e.width=i.width),i.suffixIcon&&(e.suffixIcon=i.suffixIcon),i.align!=="Left"&&(e.align=i.align),i.overflow!=="None"&&(e.overflow=i.overflow),i.htmlAttributes&&(e.htmlAttributes=i.htmlAttributes),i.type!=="Button"&&(e.type=i.type),i.visible!==!0&&(e.visible=i.visible),i.showAlwaysInPopup&&(e.showAlwaysInPopup=i.showAlwaysInPopup),i.tabIndex!==-1&&(e.tabIndex=i.tabIndex),e},n.prototype.getToolbarItems=function(){for(var i=[],e,t=0,r=this.parent.toolbarItems;t<r.length;t++){var s=r[t];e=this.getItemModel(s);var a=void 0;if(s.name)switch(s.name){case"Today":a={showAlwaysInPopup:this.parent.isAdaptive||this.parent.enableAdaptiveUI,prefixIcon:"e-icon-today",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"},a.align=e.align?e.align:s.align,i.push(Qr({},a,e));break;case"Previous":a={prefixIcon:"e-icon-prev",tooltipText:"Previous",overflow:"Show",cssClass:"e-prev",htmlAttributes:{role:"navigation"}},a.align=e.align?e.align:s.align,i.push(Qr({},a,e));break;case"Next":a={prefixIcon:"e-icon-next",tooltipText:"Next",overflow:"Show",cssClass:"e-next",htmlAttributes:{role:"navigation"}},a.align=e.align?e.align:s.align,i.push(Qr({},a,e));break;case"DateRangeText":a={text:this.getDateRangeText(),suffixIcon:"e-icon-down-arrow",cssClass:"e-date-range",overflow:"Show",htmlAttributes:{"aria-atomic":"true","aria-live":"assertive",role:"navigation"}},a.align=e.align?e.align:s.align,i.push(Qr({},a,e));break;case"NewEvent":a={showAlwaysInPopup:this.parent.isAdaptive||this.parent.enableAdaptiveUI,prefixIcon:"e-icon-add",text:this.l10n.getConstant("newEvent"),cssClass:"e-add",overflow:"Show"},a.align=e.align?e.align:s.align,i.push(Qr({},a,e));break;case"Views":if(!d(this.parent.views)&&this.parent.views.length>1)for(var o=0,l=this.parent.views;o<l.length;o++){var h=l[o];a=this.getItemObject(h),a.align=e.align?e.align:s.align,i.push(Qr({},a,e))}break;case"Custom":i.push(s);break}else i.push(s)}return i},n.prototype.getItems=function(){var i=[];if(i.push({align:"Left",prefixIcon:"e-icon-prev",tooltipText:"Previous",overflow:"Show",cssClass:"e-prev"}),i.push({align:"Left",prefixIcon:"e-icon-next",tooltipText:"Next",overflow:"Show",cssClass:"e-next"}),i.push({align:"Left",text:this.getDateRangeText(),suffixIcon:"e-icon-down-arrow",cssClass:"e-date-range",overflow:"Show",htmlAttributes:{"aria-atomic":"true","aria-live":"assertive"}}),this.parent.isAdaptive||this.parent.enableAdaptiveUI?(i.push({align:"Right",showAlwaysInPopup:this.parent.isAdaptive||this.parent.enableAdaptiveUI,prefixIcon:"e-icon-add",text:this.l10n.getConstant("newEvent"),cssClass:"e-add",overflow:"Show"}),i.push({align:"Right",showAlwaysInPopup:this.parent.isAdaptive||this.parent.enableAdaptiveUI,prefixIcon:"e-icon-today",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"})):(i.push({align:"Right",showAlwaysInPopup:this.parent.isAdaptive||this.parent.enableAdaptiveUI,prefixIcon:"e-icon-today",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"}),!d(this.parent.views)&&this.parent.views.length>1&&i.push({align:"Right",type:"Separator",cssClass:"e-schedule-seperator"})),!d(this.parent.views)&&this.parent.views.length>1)for(var e=0,t=this.parent.views;e<t.length;e++){var r=t[e];i.push(this.getItemObject(r))}return i},n.prototype.getItemObject=function(i){var e,t;typeof i=="string"?(e=i.toLowerCase(),t=null):(e=i.option.toLowerCase(),t=i.displayName);var r,s,a=this.parent.isAdaptive||this.parent.enableAdaptiveUI;switch(e){case"day":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-day",text:t||this.l10n.getConstant("day"),cssClass:"e-views e-day"};break;case"week":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-week",text:t||this.l10n.getConstant("week"),cssClass:"e-views e-week"};break;case"workweek":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-workweek",text:t||this.l10n.getConstant("workWeek"),cssClass:"e-views e-work-week"};break;case"month":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-month",text:t||this.l10n.getConstant("month"),cssClass:"e-views e-month"};break;case"year":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-year",text:t||this.l10n.getConstant("year"),cssClass:"e-views e-year"};break;case"agenda":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-agenda",text:t||this.l10n.getConstant("agenda"),cssClass:"e-views e-agenda"};break;case"monthagenda":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-month-agenda",text:t||this.l10n.getConstant("monthAgenda"),cssClass:"e-views e-month-agenda"};break;case"timelineday":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-timeline-day",text:t||this.l10n.getConstant("timelineDay"),cssClass:"e-views e-timeline-day"};break;case"timelineweek":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-timeline-week",text:t||this.l10n.getConstant("timelineWeek"),cssClass:"e-views e-timeline-week"};break;case"timelineworkweek":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-timeline-workweek",text:t||this.l10n.getConstant("timelineWorkWeek"),cssClass:"e-views e-timeline-work-week"};break;case"timelinemonth":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-timeline-month",text:t||this.l10n.getConstant("timelineMonth"),cssClass:"e-views e-timeline-month"};break;case"timelineyear":s=i.orientation==="Vertical"?"vertical":"horizontal",r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-timeline-year-"+s,text:t||this.l10n.getConstant("timelineYear"),cssClass:"e-views e-timeline-year"};break}return r},n.prototype.renderHeaderPopup=function(){var i=R("div",{className:sR}),e=R("div",{className:nR});i.appendChild(e),this.element.appendChild(i),this.headerPopup=new xr(i,{actionOnScroll:"hide",targetType:"relative",relateTo:this.getPopUpRelativeElement(),position:{X:"left",Y:"bottom"},collision:{X:"fit"},viewPortElement:this.element,enableRtl:this.parent.enableRtl});var t=this.getCalendarView(),r=this.parent.currentView==="Month"&&!d(this.parent.activeViewOptions.displayDate)&&!this.hasSelectedDate();this.headerCalendar=new iy({value:r?this.parent.activeViewOptions.displayDate:this.parent.selectedDate,min:this.parent.minDate,max:this.parent.maxDate,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,weekNumber:this.parent.activeViewOptions.showWeekNumber,enableRtl:this.parent.enableRtl,locale:this.parent.locale,depth:t,start:t,calendarMode:this.parent.calendarMode,change:this.calendarChange.bind(this)}),this.setCalendarTimezone(),this.headerCalendar.appendTo(e),this.headerPopup.hide()},n.prototype.calendarChange=function(i){if(i.value.getTime()!==this.parent.selectedDate.getTime()){var e=W(new Date(i.value));this.parent.changeDate(e)}this.headerPopup.hide()},n.prototype.setCalendarTimezone=function(){this.headerCalendar&&(this.headerCalendar.timezone=this.parent.timezone||this.parent.tzModule.getLocalTimezoneName())},n.prototype.calculateViewIndex=function(i){var e=M(i.originalEvent.target,".e-views"),t=[].slice.call(this.element.querySelectorAll(".e-views"));return t.indexOf(e)},n.prototype.toolbarCreateHandler=function(){this.parent&&this.parent.portals&&this.toolbarObj&&this.toolbarObj.portals&&(this.parent.portals=this.parent.portals.concat(this.toolbarObj.portals),this.parent.renderReactTemplates())},n.prototype.toolbarClickHandler=function(i){if(i.item){var e=i.item.cssClass.replace("e-views ",""),t,r,s;switch(e){case"e-date-range":this.headerPopup||this.renderHeaderPopup(),this.headerPopup.element.classList.contains(Je)?this.headerPopup.hide():this.headerPopup.show();break;case"e-day":this.parent.changeView("Day",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-week":this.parent.changeView("Week",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-work-week":this.parent.changeView("WorkWeek",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-month":this.parent.changeView("Month",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-year":this.parent.changeView("Year",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-agenda":this.parent.changeView("Agenda",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-month-agenda":this.parent.changeView("MonthAgenda",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-timeline-day":this.parent.changeView("TimelineDay",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-timeline-week":this.parent.changeView("TimelineWeek",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-timeline-work-week":this.parent.changeView("TimelineWorkWeek",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-timeline-month":this.parent.changeView("TimelineMonth",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-timeline-year":this.parent.changeView("TimelineYear",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-today":s=W(this.parent.getCurrentTime()),(this.parent.currentView==="Agenda"||this.parent.currentView==="MonthAgenda"||!this.parent.isSelectedDate(s)||this.parent.currentView==="Month"&&this.parent.activeViewOptions.displayDate&&!this.hasSelectedDate()&&W(this.parent.activeViewOptions.displayDate)!==s||this.parent.currentView==="Month"&&this.parent.activeViewOptions.numberOfWeeks>0&&!this.hasSelectedDate()&&W(Vu(this.parent.selectedDate))!==s)&&this.parent.changeDate(s,i.originalEvent);break;case"e-prev":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("Previous"),i.originalEvent);break;case"e-next":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("Next"),i.originalEvent);break;case"e-add":if(r=this.parent.activeCellsData.startTime.getTime()===this.parent.activeCellsData.endTime.getTime(),this.parent.activeCellsData&&!r)t=this.parent.activeCellsData;else{var a=this.parent.activeViewOptions.timeScale.interval,o=this.parent.activeViewOptions.timeScale.slotCount,l=a*at/o,h=new Date(this.parent.selectedDate.getTime()),c=this.parent.getCurrentTime();h.setHours(c.getHours(),Math.round(h.getMinutes()/l)*l,0);var u=new Date(new Date(h.getTime()).setMilliseconds(h.getMilliseconds()+l));t={startTime:h,endTime:u,isAllDay:!1}}this.parent.eventWindow.openEditor($(t,{cancel:!1,event:i.originalEvent}),"Add");break}if(!d(this.toolbarObj)){var p=this.toolbarObj.element.querySelector(".e-toolbar-pop");p&&i.item.type!=="Input"&&p.ej2_instances[0].hide({name:"SlideUp",duration:100})}}},n.prototype.hasSelectedDate=function(){var i=W(this.parent.selectedDate).getTime();return i>=this.parent.activeView.getStartDate().getTime()&&i<=this.parent.activeView.getEndDate().getTime()},n.prototype.getHeaderElement=function(){return this.toolbarObj.element},n.prototype.updateHeaderItems=function(i){var e=this.toolbarObj.element.querySelector(".e-prev"),t=this.toolbarObj.element.querySelector(".e-next"),r=this.toolbarObj.element.querySelector(".e-date-range");e&&(i==="add"?T([e],Rt):I([e],Rt)),t&&(i==="add"?T([t],Rt):I([t],Rt)),r&&(i==="add"?T([r],Ot):I([r],Ot))},n.prototype.previousNextIconHandler=function(){var i=this.parent.currentView==="Agenda"?[this.parent.getCurrentViewDates()[0]]:this.parent.getCurrentViewDates(),e=this.toolbarObj.element.querySelector("."+uR),t=this.toolbarObj.element.querySelector("."+dR),r=new Date(i[0].getTime()),s=new Date(i[i.length-1].getTime());if(this.parent.currentView==="WorkWeek"||this.parent.currentView==="TimelineWorkWeek")r=Ni(W(this.parent.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),s=Z(r,7*this.parent.activeViewOptions.interval);else if(this.parent.currentView==="Month"){var a=!d(this.parent.activeViewOptions.displayDate)||this.parent.activeViewOptions.numberOfWeeks>0;r=a?this.parent.activeView.getStartDate():Vu(this.parent.selectedDate),s=a?this.parent.activeView.getEndDate():mh(Hs(r,this.parent.activeViewOptions.interval-1))}d(e)||this.toolbarObj.enableItems(e,r>W(this.parent.minDate)),d(t)||this.toolbarObj.enableItems(t,s<W(this.parent.maxDate)),this.setCalendarMinMaxDate()},n.prototype.getModuleName=function(){return"headerbar"},n.prototype.destroy=function(){this.headerPopup&&!this.headerPopup.isDestroyed&&(this.headerPopup.destroy(),this.headerPopup=null),this.headerCalendar&&!this.headerCalendar.isDestroyed&&(this.headerCalendar.destroy(),this.headerCalendar=null),this.toolbarObj&&!this.toolbarObj.isDestroyed&&(this.toolbarObj.destroy(),this.removeEventListener(),ve(this.element),this.toolbarObj=null),this.element=null,this.parent=null,this.l10n=null},n}(),ZR=function(){function n(i){this.parent=i,this.addEventListener()}return n.prototype.getModuleName=function(){return"scroll"},n.prototype.setWidth=function(){this.parent.element.style.width=ce(this.parent.width)},n.prototype.setHeight=function(){this.parent.element.style.height=ce(this.parent.height)},n.prototype.addEventListener=function(){this.parent.on(si,this.setDimensions,this),this.parent.on(Ru,this.onPropertyChanged,this)},n.prototype.removeEventListener=function(){this.parent.off(si,this.setDimensions),this.parent.off(Ru,this.onPropertyChanged)},n.prototype.setDimensions=function(){this.setWidth(),this.setHeight();var i={cssProperties:this.parent.getCssProperties(),module:this.getModuleName()};this.parent.notify(Wi,i)},n.prototype.onPropertyChanged=function(){this.setDimensions()},n.prototype.destroy=function(){this.removeEventListener()},n}(),JR=function(){function n(i){this.parent=i,this.element=this.parent.element.querySelector("."+Ei),this.touchObj=new wr(this.element,{scroll:this.scrollHandler.bind(this),swipe:this.swipeHandler.bind(this),tapHold:this.tapHoldHandler.bind(this),swipeSettings:{swipeThresholdDistance:1}}),C.add(this.element,"transitionend",this.onTransitionEnd,this),this.touchLeftDirection=this.parent.enableRtl?"Right":"Left",this.touchRightDirection=this.parent.enableRtl?"Left":"Right"}return n.prototype.scrollHandler=function(i){d(this.parent.eventTooltip)||this.parent.eventTooltip.close();var e=!this.parent.isAdaptive&&i.originalEvent&&i.originalEvent.target&&!d(M(i.originalEvent.target,"."+he));if(this.parent.uiStateValues.isTouchScroll=e&&i.originalEvent.type==="touchmove"&&!this.parent.uiStateValues.action,!(e||this.parent.currentView==="Agenda"||this.parent.uiStateValues.action||!this.parent.allowSwiping||this.parent.uiStateValues.isTapHold)){if(this.parent.uiStateValues.isSwipeScroll=!0,this.timeStampStart||(this.timeStampStart=Date.now()),this.element.classList.contains(un)&&this.onTransitionEnd(),i.scrollDirection==="Left"||i.scrollDirection==="Right"){var t={requestType:"dateNavigate",cancel:!1,event:i.originalEvent};if(this.parent.trigger(Yt,t),t.cancel)return;var r=this.element.querySelector("."+Te);if(r&&r.scrollWidth>r.clientWidth)return;this.isScrollTriggered=!0,i.originalEvent.preventDefault(),i.originalEvent.stopPropagation()}if(i.scrollDirection===this.touchLeftDirection){this.nextPanel||(this.renderPanel(Tm,"Next"),this.nextPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime()),renderDates:this.parent.activeView.renderDates,colLevels:this.parent.activeView.colLevels},this.setDimensions(this.nextPanel.element));var s=this.parent.enableRtl?i.distanceX:-i.distanceX;this.element.style.transform="translatex("+(this.getTranslateX(this.element)+s)+"px)"}else if(i.scrollDirection===this.touchRightDirection){var a=0;this.previousPanel||(this.renderPanel(_u,"Previous"),this.previousPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime()),renderDates:this.parent.activeView.renderDates,colLevels:this.parent.activeView.colLevels},this.setDimensions(this.previousPanel.element),a=this.previousPanel.element.offsetWidth);var s=this.parent.enableRtl?a-i.distanceX:-a+i.distanceX;this.element.style.transform="translatex("+(this.getTranslateX(this.element)+s)+"px)"}}},n.prototype.swipeHandler=function(i){if(!(!this.isScrollTriggered||this.parent.uiStateValues.action||!this.parent.allowSwiping||this.parent.uiStateValues.isTapHold)){this.isScrollTriggered=!1;var e=i.swipeDirection==="Left"?this.parent.activeView.renderDates[0]:this.parent.activeView.renderDates.slice(-1)[0];if(i.swipeDirection==="Left"&&e<this.parent.maxDate||i.swipeDirection==="Right"&&e>=this.parent.minDate){var t=Date.now()-this.timeStampStart,r=i.distanceX*(H.isDevice?6:1.66);r>t||i.distanceX>this.parent.element.offsetWidth/2?(this.swapPanels(i.swipeDirection),r>t&&i.distanceX>this.parent.element.offsetWidth/2&&(this.element.style.transitionDuration=(H.isDevice?i.distanceX:r)/t/10+"s"),this.confirmSwipe(i.swipeDirection)):this.cancelSwipe();var s={requestType:"dateNavigate",cancel:!1,event:i.originalEvent};this.parent.trigger(Mr,s)}else this.cancelSwipe();this.timeStampStart=null}},n.prototype.tapHoldHandler=function(i){var e=M(i.originalEvent.target,"."+he);d(e)||(this.parent.uiStateValues.isTapHold=!0,this.parent.isAdaptive?(H.isIos&&C.add(this.element,"touchend",this.preventEventClick,this),this.parent.quickPopup.tapHoldEventPopup(i.originalEvent),this.triggerResizeStart(i.originalEvent)):["Agenda","MonthAgenda","Year"].indexOf(this.parent.currentView)<0&&(this.parent.selectedElements=[],this.parent.eventBase.getSelectedEventElements(e),this.triggerResizeStart(i.originalEvent)))},n.prototype.triggerResizeStart=function(i){this.parent.resizeModule&&M(i.target,"."+Nb)&&this.parent.resizeModule.resizeStart(i)},n.prototype.preventEventClick=function(i){i.preventDefault(),C.remove(this.element,"touchend",this.preventEventClick)},n.prototype.renderPanel=function(i,e){this.currentPanel?this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0):(this.currentPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime()),renderDates:this.parent.activeView.renderDates,colLevels:this.parent.activeView.colLevels},this.setDimensions(this.currentPanel.element)),this.parent.setProperties({selectedDate:this.parent.activeView.getNextPreviousDate(e)},!0),this.parent.headerModule&&this.parent.headerModule.setCalendarDate(this.parent.selectedDate),this.parent.activeView.getRenderDates(),this.parent.activeView.renderLayout(i)},n.prototype.swapPanels=function(i){if(i===this.touchLeftDirection){var e=this.nextPanel;this.nextPanel=this.currentPanel,this.currentPanel=e}else{var e=this.previousPanel;this.previousPanel=this.currentPanel,this.currentPanel=e}},n.prototype.confirmSwipe=function(i){var e=this,t=i===this.touchLeftDirection?this.nextPanel.selectedDate:this.previousPanel.selectedDate,r={action:"date",cancel:!1,previousDate:t,currentDate:this.currentPanel.selectedDate};this.parent.trigger(Mu,r,function(s){if(s.cancel)e.swapPanels(i),e.cancelSwipe();else{e.parent.activeView.setPanel(e.currentPanel.element),e.parent.setProperties({selectedDate:e.currentPanel.selectedDate},!0);var a=void 0;e.parent.enableRtl?a=i===e.touchLeftDirection?e.previousPanel?e.previousPanel.element.offsetLeft:e.currentPanel.element.offsetWidth:0:a=i===e.touchLeftDirection?-e.currentPanel.element.offsetLeft:0,e.parent.activeView.renderDates=e.currentPanel.renderDates,e.parent.activeView.colLevels=e.currentPanel.colLevels,T([e.element],un),e.element.style.transform="translatex("+a+"px)",e.parent.headerModule&&e.parent.headerModule.updateDateRange(),e.parent.renderTemplates(),e.parent.crudModule.refreshDataManager()}})},n.prototype.cancelSwipe=function(){var i=this;if(this.parent.activeView.setPanel(this.currentPanel.element),this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0),this.parent.activeView.renderDates=this.currentPanel.renderDates,this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.lastResourceLevel.length>0){var e=this.parent.resourceBase.resourceCollection[0].workDaysField;this.parent.resourceBase.lastResourceLevel.forEach(function(r){if(e){var s=r[e],a=Array.isArray(s)&&(!i.parent.showWeekend||i.parent.currentView==="WorkWeek");r.renderDates=a?i.calculateResourceSpecificDates(r,e):i.currentPanel.renderDates}else r.renderDates=i.currentPanel.renderDates})}this.parent.activeView.colLevels=this.currentPanel.colLevels,T([this.element],un);var t=this.previousPanel?this.previousPanel.element.offsetWidth:0;this.element.style.transform="translatex("+(this.parent.enableRtl?t:-this.currentPanel.element.offsetLeft)+"px)"},n.prototype.calculateResourceSpecificDates=function(i,e){var t=[],r=i[e];return this.currentPanel.renderDates.forEach(function(s){Array.isArray(r)&&r.indexOf(s.getDay())!==-1&&t.push(s)}),t},n.prototype.onTransitionEnd=function(){!d(this.element)&&!this.element.classList.contains(un)||(this.parent.uiStateValues.isSwipeScroll=!1,I([this.element],un),this.element.style.transitionDuration="",this.element.style.transform="",this.previousPanel&&(ve(this.previousPanel.element),this.previousPanel=null,I([this.currentPanel.element],_u),T([this.currentPanel.element],Wu)),this.nextPanel&&(ve(this.nextPanel.element),this.nextPanel=null,I([this.currentPanel.element],Tm),T([this.currentPanel.element],Wu)),this.currentPanel=null,this.parent.activeView.getPanel().style.width="")},n.prototype.getTranslateX=function(i){var e=window.getComputedStyle(i);return new WebKitCSSMatrix(e.webkitTransform).m41},n.prototype.setDimensions=function(i){i.style.width=this.parent.element.clientWidth+"px"},n.prototype.resetValues=function(){this.currentPanel=null,this.previousPanel=null,this.nextPanel=null,this.timeStampStart=null,this.element.style.transform="",this.element.style.transitionDuration="",rr(this.element),I([this.element],un)},n.prototype.destroy=function(){this.touchObj&&(this.touchObj.destroy(),this.touchObj=null),C.remove(this.element,"transitionend",this.onTransitionEnd),this.resetValues()},n}(),ih=function(){return ih=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},ih.apply(this,arguments)},cg=function(){function n(i){this.selectedCells=[],this.isCutContentPasted=!1,this.isCutAction=!1,this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDownArrow:"shift+downarrow",shiftUpArrow:"shift+uparrow",shiftRightArrow:"shift+rightarrow",shiftLeftArrow:"shift+leftarrow",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow",altOne:"alt+1",altTwo:"alt+2",altThree:"alt+3",altFour:"alt+4",altFive:"alt+5",altSix:"alt+6",altSeven:"alt+7",altEight:"alt+8",altNine:"alt+9",enter:"enter",escape:"escape",delete:"delete",backspace:"backspace",home:"home",pageUp:"pageup",pageDown:"pagedown",tab:"tab",shiftTab:"shift+tab",ctrlShiftUpArrow:"ctrl+shift+uparrow",ctrlShiftDownArrow:"ctrl+shift+downarrow",ctrlShiftLeftArrow:"ctrl+shift+leftarrow",ctrlShiftRightArrow:"ctrl+shift+rightarrow",shiftAltY:"shift+alt+y",shiftAltN:"shift+alt+n",cut:"ctrl+x",copy:"ctrl+c",cmdCut:"cmd+x",cmdCopy:"cmd+c"},this.parent=i,this.parent.element.tabIndex=this.parent.element.tabIndex===-1?0:this.parent.element.tabIndex,this.keyboardModule=new Ci(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.addEventListener(),this.createClipboardElement()}return n.prototype.keyActionHandler=function(i){var e=i.target;if(!(i.action==="home"&&e&&["INPUT","TEXTAREA","SELECT"].indexOf(e.tagName)>-1&&e.closest(".e-quick-popup-wrapper")))switch(i.action){case"downArrow":case"shiftDownArrow":this.processDown(i,i.shiftKey);break;case"upArrow":case"shiftUpArrow":this.processUp(i,i.shiftKey);break;case"leftArrow":case"shiftLeftArrow":this.processLeft(i,i.shiftKey);break;case"rightArrow":case"shiftRightArrow":this.processRight(i,i.shiftKey);break;case"ctrlLeftArrow":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("Previous"),i),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-prev button").focus();break;case"ctrlRightArrow":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("Next"),i),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-next button").focus();break;case"altOne":case"altTwo":case"altThree":case"altFour":case"altFive":case"altSix":case"altSeven":case"altEight":case"altNine":this.processViewNavigation(i);break;case"enter":this.processEnter(i);break;case"home":this.focusFirstCell();break;case"tab":case"shiftTab":this.processTab(i,i.shiftKey);break;case"delete":case"backspace":this.processDelete(i);break;case"ctrlShiftUpArrow":case"ctrlShiftDownArrow":case"ctrlShiftLeftArrow":case"ctrlShiftRightArrow":this.processCtrlShiftNavigationArrows(i);break;case"escape":this.processEscape(i);break;case"fTwelve":this.parent.allowInline&&this.parent.inlineModule&&(i.preventDefault(),this.processFTwelve(i));break;case"shiftAltY":this.parent.changeDate(new Date,i);break;case"shiftAltN":if(this.parent.currentView==="Agenda"||this.parent.currentView==="MonthAgenda"||this.parent.currentView==="Year")return;this.processShiftAltN(i);break;case"cut":case"cmdCut":(i.ctrlKey||i.metaKey)&&this.processClipboardAction(!0,void 0,i);break;case"copy":case"cmdCopy":(i.ctrlKey||i.metaKey)&&this.processClipboardAction(!1,void 0,i);break}},n.prototype.processShiftAltN=function(i){var e=this.parent.getSelectedCells(),t=i.target,r=$({},null,!0);if(e.length>0&&(M(t,"."+se)||M(t,"."+Me)||M(t,"."+bt)))r=this.getSelectedElements(t);else if(M(t,"."+he)&&!d(this.parent.activeEventData.event)){var s=this.parent.activeEventData.event;r.startTime=s.StartTime,r.endTime=s.EndTime,r.isAllDay=s.IsAllDay}else{var a=this.parent.getStartEndTime(this.parent.workHours.start),o=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount;r.startTime=new Date(this.parent.selectedDate),r.startTime.setHours(a.getHours(),a.getMinutes(),0,0),r.endTime=new Date(r.startTime.getTime()+o*6e4)}var l=$(r,{cancel:!1,event:i});l!=null&&this.parent.eventWindow.openEditor(l,"Add")},n.prototype.processFTwelve=function(i){var e=i.target;if(e.classList.contains(se)||e.classList.contains(Me)){this.parent.activeCellsData=this.getSelectedElements(e);var t=$(this.parent.activeCellsData,{cancel:!1,event:i}),r={element:t.element,groupIndex:t.groupIndex,type:"Cell"};this.parent.notify(Fn,r)}if(e.classList.contains(he)){e.click();return}},n.prototype.addEventListener=function(){this.parent.on(Lu,this.onCellMouseDown,this),this.parent.allowClipboard&&this.parent.on(Nu,this.pasteHandler,this)},n.prototype.removeEventListener=function(){this.parent.off(Lu,this.onCellMouseDown),this.parent.off(Nu,this.pasteHandler)},n.prototype.onCellMouseDown=function(i){if(!i.event.shiftKey&&(this.initialTarget=this.getClosestCell(i.event),!(this.parent.activeViewOptions.readonly||this.parent.currentView==="MonthAgenda"||!this.initialTarget)&&(i.event.target.classList.contains(se)&&i.event.which!==3&&(this.parent.removeSelectedClass(),C.add(this.parent.getContentTable(),"mousemove",this.onMouseSelection,this),C.add(this.parent.getContentTable(),"mouseup mouseleave",this.onMoveUp,this)),i.event.target.classList.contains(Me)&&i.event.which!==3))){this.parent.removeSelectedClass();var e=this.parent.getAllDayRow();C.add(e,"mousemove",this.onMouseSelection,this),C.add(e,"mouseup mouseleave",this.onMoveUp,this)}},n.prototype.onMouseSelection=function(i){var e=[].slice.call(this.parent.element.querySelectorAll("."+he));T(e,"e-allow-select");var t=this.parent.boundaryValidation(i.pageY,i.pageX);if(t.bottom||t.top||t.left||t.right){var r=this.parent.element.querySelector("."+Te),s=r.offsetHeight<=r.scrollHeight&&r.scrollTop>=0&&r.scrollTop+r.offsetHeight<=r.scrollHeight,a=r.offsetWidth<=r.scrollWidth&&r.scrollLeft>=0&&r.scrollLeft+r.offsetWidth<=r.scrollWidth;s&&(t.top||t.bottom)&&(r.scrollTop+=t.top?-i.target.offsetHeight:i.target.offsetHeight),a&&(t.left||t.right)&&(r.scrollLeft+=t.left?-i.target.offsetWidth:i.target.offsetWidth)}var o=this.getClosestCell(i);o&&this.selectCells(!0,o)},n.prototype.getClosestCell=function(i){return M(i.target,"."+se+",."+Me)},n.prototype.onMoveUp=function(i){var e=this,t=[].slice.call(this.parent.element.querySelectorAll("."+he));if(I(t,"e-allow-select"),C.remove(this.parent.getContentTable(),"mousemove",this.onMouseSelection),C.remove(this.parent.getContentTable(),"mouseup mouseleave",this.onMoveUp),i.target.classList.contains(Me)){var r=this.parent.getAllDayRow();C.remove(r,"mousemove",this.onMouseSelection),C.remove(r,"mouseup mouseleave",this.onMoveUp)}if(!this.isPreventAction(i)){var s="."+se+",."+Me+",."+bt,a=M(i.target,s);if(a){var o=this.parent.getSelectedCells();if(o.length>0&&o.indexOf(a)===-1&&(a=o[o.length-1]),!(this.parent.currentView==="TimelineYear"&&a.classList.contains(Xe))){this.parent.activeCellsData=this.getSelectedElements(a);var l={};this.parent.eventWindow&&this.parent.eventWindow.convertToEventData(this.parent.activeCellsData,l);var h={data:l,element:this.parent.activeCellsData.element,event:i,requestType:mm,showQuickPopup:!1};this.parent.trigger(ja,h,function(c){var u=c.showQuickPopup||e.parent.quickInfoOnSelectionEnd;if(u&&o.length>1){var p=$(e.parent.activeCellsData,{cancel:!1,event:i,name:"cellClick"});e.parent.notify(Ir,p)}})}}}},n.prototype.processEnter=function(i){if(!(this.parent.activeViewOptions.readonly&&!i.target.classList.contains(he)||this.isPreventAction(i))&&!(this.parent.currentView==="TimelineYear"&&i.target.classList.contains(Xe))){var e=i.target;if(M(e,"."+Ri)){e.classList.contains(eh)||e.classList.contains(th)||e.classList.contains(Os)||e.classList.contains(br)||e.classList.contains(Is)?(e.click(),i.preventDefault()):e.classList.contains(Ke)&&(this.parent.element.querySelector("."+th).click(),i.preventDefault());return}if(e.classList.contains(ti)&&e.classList.contains(gr)){var t=e.querySelector("."+wn);t&&t.click();return}if(e.classList.contains(se)||e.classList.contains(Me)){this.parent.activeCellsData=this.getSelectedElements(e);var r=$(this.parent.activeCellsData,{cancel:!1,event:i});if(this.parent.allowInline){var s={element:r.element,groupIndex:r.groupIndex,type:"Cell"};this.parent.notify(Fn,s)}else this.parent.currentView==="Year"?e.click():this.parent.notify(Ir,r);return}if(e.classList.contains(Jt)&&this.parent.inlineModule){this.parent.inlineModule.inlineCrudActions(e);return}if(e.classList.contains(he)||e.classList.contains(Yu)||e.classList.contains($a)||e.classList.contains($t)){e.click();return}if(e.classList.contains(vn)){this.parent.setProperties({selectedDate:this.parent.getDateFromElement(e)},!0),this.parent.changeView(this.parent.getNavigateView(),i),this.processEscape(i);return}}},n.prototype.getSelectedElements=function(i){var e;if(this.selectedCells.length>1&&i.classList.contains(Bs)){var t=this.parent.getCellDetails(this.selectedCells[0]),r=this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);t.endTime=r.endTime,t.element=i,e=t}else e=this.parent.getCellDetails(i);return e},n.prototype.getCells=function(i,e,t){var r=this.parent.getContentTable(),s=this.parent.currentView==="TimelineYear",a=s&&!i?"."+se+":not(."+Xe+")":"td",o=[].slice.call(r.querySelectorAll(a)),l=r.rows.length,h=r.rows[0].cells.length;if(e&&e.classList.contains(Me)){var c=this.parent.getAllDayRow();o=[].slice.call(c.cells),l=1,h=c.cells.length}var u=o.indexOf(e),p=o.indexOf(t),f=[];if(i){for(var v=0;v<h;v++)for(var m=0;m<l;m++){var g=o[h*m+v];s&&g.classList.contains(Xe)||f.push(g)}u=f.indexOf(e),p=f.indexOf(t)}if(u>p){var y=u;u=p,p=y}var b=i?f:o;return b.slice(u,p+1)},n.prototype.focusFirstCell=function(){if(this.parent.currentView==="Agenda"){var i=this.parent.getContentTable().querySelector("."+er);i.setAttribute("tabindex","0"),i.focus();return}if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.activeView.isTimelineView()&&this.parent.currentView!=="TimelineYear"){var e=this.parent.element.querySelector("."+$e+" tr:not(."+Rt+") ."+se+":not(."+Ln+")");this.selectCells(!1,e)}else if(this.parent.currentView.indexOf("Year")>-1){var t="."+se+":not(."+Xe+"):not(."+Ln+")",r=this.parent.currentView==="TimelineYear"&&this.parent.activeViewOptions.orientation==="Vertical";t+=r?'[data-date="'+this.parent.activeView.startDate().getTime()+'"]':"",this.selectCells(!1,this.parent.element.querySelector(t))}else this.selectCells(!1,this.parent.getWorkCellElements()[0])},n.prototype.isInverseTableSelect=function(){return this.parent.activeView.isInverseTableSelect},n.prototype.selectCells=function(i,e){var t=this;this.parent.removeSelectedClass();var r=e instanceof Array?e.slice(-1)[0]:e;if(i){var s,a=["Day","Week","WorkWeek","TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth","TimelineYear"],o={element:e,requestType:"mousemove",allowMultipleRow:!0};this.parent.inlineModule.removeInlineAppointmentElement(),this.parent.trigger(ja,o,function(l){var h=!l.allowMultipleRow||!t.parent.allowMultiRowSelection;if(h){var c=t.parent.currentView==="TimelineYear";if(c&&t.parent.activeViewOptions.orientation==="Horizontal"||t.parent.currentView==="Month"){var u=c&&t.parent.activeViewOptions.group.resources.length>0;r=u?t.initialTarget:t.initialTarget.parentElement.children[r.cellIndex]}else a.indexOf(t.parent.currentView)>-1&&(r=r.parentElement.children[t.initialTarget.cellIndex])}var p=t.getCells(t.isInverseTableSelect(),t.initialTarget,r);if(t.parent.activeViewOptions.group.resources.length>0){s=t.initialTarget.getAttribute("data-group-index");for(var f=[],v=0,m=p;v<m.length;v++){var g=m[v];g.getAttribute("data-group-index")===s&&f.push(g)}p=f}if(t.parent.allowMultiCellSelection||(p=[t.initialTarget]),t.selectedCells=p,p.length>2&&!r.classList.contains(Me)){var y=t.getAllDayCells(p);if(t.parent.activeViewOptions.group.resources.length>0){for(var b=[],E=0,w=y;E<w.length;E++){var g=w[E];g.getAttribute("data-group-index")===s&&b.push(g)}y=b}p=p.concat(y)}r.getAttribute("data-group-index")!==s&&t.parent.activeViewOptions.group.resources.length>0&&(r=t.selectedCells[t.selectedCells.length-1]),t.parent.addSelectedClass(p,r)})}else{var o={element:r,requestType:mm};this.parent.trigger(ja,o,function(){t.initialTarget=r,t.selectedCells=[r],t.parent.addSelectedClass([r],r)})}},n.prototype.selectAppointment=function(i,e){var t=this.getAppointmentElements();if(!(t.length<0)){this.parent.eventBase.removeSelectedAppointmentClass();var r;if(e.classList.contains(he)){var s=t.indexOf(e);r=t[i?s-1:s+1]}else r=i?t[t.length-1]:t[0];r&&(this.parent.eventBase.addSelectedAppointments([r],!0),r.focus(),T([r],Xl))}},n.prototype.selectAppointmentElementFromWorkCell=function(i,e){var t=this;if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.removeSelectedClass(),e.classList.contains(se)||e.classList.contains(Me)){var r=this.getUniqueAppointmentElements(),s=[],a=this.parent.getDateFromElement(e).getTime(),o=this.parent.eventsProcessed.filter(function(c){return i?c[t.parent.eventFields.startTime].getTime()<=a:c[t.parent.eventFields.startTime].getTime()>=a});if(o.filter(function(c){r.filter(function(u){JSON.stringify(c.Guid)===JSON.stringify(u.getAttribute("data-guid"))&&s.push(u)})}),s.length>0){var l=i?s[s.length-1]:s[0],h=this.getAppointmentElementsByGuid(l.getAttribute("data-guid"));this.parent.eventBase.addSelectedAppointments(h,!0),h[h.length-1].focus()}}},n.prototype.getAllDayCells=function(i){var e=this.parent.getAllDayRow();if(!e)return[];var t=i[0],r=i[i.length-1],s=this.parent.getCellDetails(t),a=this.parent.getCellDetails(r);if(a.endTime.getTime()-s.startTime.getTime()>=it){var o=[].slice.call(e.cells);return o.slice(t.cellIndex,r.cellIndex+1)}return[]},n.prototype.getAppointmentElements=function(){return[].slice.call(this.parent.element.querySelectorAll("."+he))},n.prototype.getAppointmentElementsByGuid=function(i){return[].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+i+'"]'))},n.prototype.getUniqueAppointmentElements=function(){var i=this.getAppointmentElements(),e=[];return i.map(function(t){return t.getAttribute("data-guid")}).filter(function(t,r,s){s.indexOf(t)===r&&e.push(i[parseInt(r.toString(),10)])}),e},n.prototype.getWorkCellFromAppointmentElement=function(i){var e=this.parent.eventBase.getEventByGuid(i.getAttribute("data-guid"));return this.parent.eventBase.selectWorkCellByTime([e])},n.prototype.processViewNavigation=function(i){if(!d(i.code)){var e=parseInt(i.code.slice(i.code.length-1),10)-1;if(!isNaN(e)&&!d(this.parent.views)&&e<this.parent.views.length){var t=this.parent.viewCollections[parseInt(e.toString(),10)].option;this.parent.changeView(t,i,void 0,e),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-active-view button").focus()}}},n.prototype.isCalendarTarget=function(i){var e=i.currentTarget||i.target;return!!(e&&!d(e.querySelector(".e-header-popup.e-popup-open")))},n.prototype.cancelUpDownAction=function(i){var e=i&&this.parent.activeViewOptions.orientation==="Vertical",t=this.parent.activeViewOptions.group.resources.length>0;return!!(e&&t||i&&this.initialTarget.classList.contains(Xe)||this.parent.activeView.isTimelineView()&&!i||this.parent.currentView==="MonthAgenda")},n.prototype.processUp=function(i,e){var t=this.parent.currentView==="TimelineYear";if(!(e&&this.cancelUpDownAction(t)||this.isCalendarTarget(i))){var r=i.target,s=this.parent.getSelectedCells(),a=this.parent.eventBase.getSelectedAppointments(),o=this.parent.element.querySelector("."+tr),l=this.getQuickPopupElement();if(s.length>0&&!i.target.classList.contains(se)&&(r=s[s.length-1]),a.length>0&&!o.classList.contains(Je)&&!l.classList.contains(Je)&&["Day","Week","WorkWeek","Month"].indexOf(this.parent.currentView)!==-1&&(r=this.getWorkCellFromAppointmentElement(a[a.length-1]),this.parent.eventBase.removeSelectedAppointmentClass()),!!r)if(r.classList.contains(se)&&!this.parent.element.querySelector("."+Je)){var h=this.parent.getTableRows(),c=h.indexOf(r.parentElement),u=void 0;if(t&&e&&this.parent.activeViewOptions.group.resources.length===0&&(u=this.isInverseTableSelect()?this.getVerticalUpDownCell(h,r,c,!0):this.getHorizontalUpDownCell(h,r,c,!0)),(c>0||u)&&c<h.length){if(u=u||h[c-1].cells[r.cellIndex],this.parent.currentView==="Year"&&u.classList.contains(Xe))if(this.parent.activeView.getStartDate().getTime()<+u.getAttribute("data-date"))u=this.getYearUpDownCell(h,c-1,r.cellIndex,!0);else return;i.preventDefault(),this.selectCells(e,u)}}else(this.parent.currentView==="Agenda"||this.parent.currentView==="MonthAgenda")&&this.selectAppointment(!0,r)}},n.prototype.processDown=function(i,e){var t=this.parent.currentView==="TimelineYear";if(!(e&&this.cancelUpDownAction(t)||this.isCalendarTarget(i))){var r=i.target,s=this.parent.getSelectedCells(),a=this.parent.eventBase.getSelectedAppointments(),o=this.parent.element.querySelector("."+tr),l=this.getQuickPopupElement();s.length>0&&!i.target.classList.contains(se)&&(r=s[s.length-1]),a.length>0&&!o.classList.contains(Je)&&!l.classList.contains(Je)&&["Day","Week","WorkWeek","Month"].indexOf(this.parent.currentView)!==-1&&(r=this.getWorkCellFromAppointmentElement(a[a.length-1]),this.parent.eventBase.removeSelectedAppointmentClass());var h=this.parent.getTableRows();if(r)if(r.classList.contains(se)&&!this.parent.element.querySelector("."+Je)){var c=h.indexOf(r.parentElement),u=void 0;if(t&&e&&this.parent.activeViewOptions.group.resources.length===0&&(u=this.isInverseTableSelect()?this.getVerticalUpDownCell(h,r,c,!1):this.getHorizontalUpDownCell(h,r,c,!1)),c>=0&&(c<h.length-1||u)){if(u=u||h[c+1].cells[r.cellIndex],this.parent.currentView==="Year"&&u.classList.contains(Xe))if(this.parent.activeView.getEndDate().getTime()>+u.getAttribute("data-date"))u=this.getYearUpDownCell(h,c+1,r.cellIndex,!1);else return;i.preventDefault(),this.selectCells(e,u)}}else(this.parent.currentView==="Agenda"||this.parent.currentView==="MonthAgenda")&&this.selectAppointment(!1,r)}},n.prototype.getYearUpDownCell=function(i,e,t,r){for(;i[parseInt(e.toString(),10)]&&i[parseInt(e.toString(),10)].cells[parseInt(t.toString(),10)].classList.contains(Xe);)e=e+(r?-1:1);return i[parseInt(e.toString(),10)].cells[parseInt(t.toString(),10)]},n.prototype.getHorizontalUpDownCell=function(i,e,t,r){var s=i[t+(r?-1:1)],a=s?s.cells[e.cellIndex]:e;if(a.classList.contains(Xe)){var o=s.querySelector("."+se+":not(."+Xe+")"),l=new Date(+o.getAttribute("data-date")),h='[data-date="'+new Date(l.getFullYear(),l.getMonth()+1,0).getTime()+'"]';a=a.cellIndex<o.cellIndex?o:s.querySelector(h)}return a},n.prototype.getVerticalUpDownCell=function(i,e,t,r){var s=r&&t>0||!r&&t<i.length-1,a=s?i[t+(r?-1:1)].cells[e.cellIndex]:void 0;if(!a||a.classList.contains(Xe)){var o=i[parseInt(t.toString(),10)].cells[e.cellIndex-(r?1:-1)];if(o){var l=+e.getAttribute("data-date")-(r?it:-864e5);return this.parent.getContentTable().querySelector("."+se+'[data-date="'+l+'"]')}a=e}return a},n.prototype.processLeftRight=function(i){var e=this.parent.currentView==="Year"?i.closest("tbody"):this.parent.getContentTable(),t=i.parentNode.sectionRowIndex,r={element:e,rowIndex:t,columnIndex:i.cellIndex,maxIndex:e.rows[parseInt(t.toString(),10)].cells.length};return r},n.prototype.getQuickPopupElement=function(){return(this.parent.isAdaptive?document.body:this.parent.element).querySelector("."+Ri)},n.prototype.isCancelLeftRightAction=function(i,e,t){var r=this.parent.currentView==="MonthAgenda"||t&&this.initialTarget.classList.contains(Xe);if(this.parent.currentView==="Agenda"||e&&r||this.isPreventAction(i)&&e)return!0;var s=this.parent.element.querySelector("."+tr),a=this.getQuickPopupElement();return!!(s.classList.contains(Je)||a.classList.contains(Je))},n.prototype.processRight=function(i,e){var t=this.parent.currentView==="TimelineYear";if(!(this.isCancelLeftRightAction(i,e,t)||this.isCalendarTarget(i))){var r=this.parent.getSelectedCells(),s,a=this.parent.eventBase.getSelectedAppointments(),o=i.target;if(r.length>0&&!o.classList.contains(se)&&!o.classList.contains(Me)&&(o=r[r.length-1]),!(a.length>0&&(o=this.getWorkCellFromAppointmentElement(a[a.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),!o))){if(o.classList.contains(se)&&i.target.classList.contains(se)){var l=this.processLeftRight(o),h=new Date(+o.getAttribute("data-date")),c=this.parent.currentView==="Year"&&h.getTime()===mh(h).getTime();if(l.columnIndex>=0&&l.columnIndex<l.maxIndex-1&&!c)s=this.calculateNextPrevDate(o,l.element.rows[l.rowIndex].cells[o.cellIndex+1],"right"),t&&e&&s.classList.contains(Xe)&&(s=this.getTimelineYearTargetCell(l,o,!0)),d(s)||this.selectCells(e,s);else if(l.columnIndex===l.maxIndex-1||c){if(!this.isInverseTableSelect()&&l.rowIndex<l.element.rows.length-1&&!c){s=this.calculateNextPrevDate(o,l.element.rows[l.rowIndex+1].cells[0],"right");var u=t&&e&&s.classList.contains(Xe);s=u?this.getHorizontalLeftRightCell(l,o,!0):s,d(s)||this.selectCells(e,s)}else if(!e){if(c&&h.getTime()!==this.parent.activeView.getEndDate().getTime()){this.selectCells(e,this.parent.element.querySelector(":not(."+Xe+')[data-date="'+(h.getTime()+it)+'"]'));return}var p=this.isInverseTableSelect()?l.rowIndex:0;this.parent.changeDate(this.parent.activeView.getNextPreviousDate("Next"),i);var f=this.parent.getContentTable(),v=c?f.rows[parseInt(p.toString(),10)].querySelector("."+se+":not(."+Xe+")"):f.rows[parseInt(p.toString(),10)].cells[0];this.selectCells(!1,v)}}}else if(o.classList.contains(Me)){var m=o.cellIndex,g=this.parent.getAllDayRow(),y=g.cells.length;if(m>=0&&m<y-1)this.selectCells(e,g.cells[m+1]);else if(m===y-1&&!e){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("Next"),i);var b=this.parent.getAllDayRow();this.selectCells(!1,b.cells[0])}}}}},n.prototype.processLeft=function(i,e){var t=this.parent.currentView==="TimelineYear";if(!(this.isCancelLeftRightAction(i,e,t)||this.isCalendarTarget(i))){var r=i.target,s=this.parent.getSelectedCells(),a;s.length>0&&!r.classList.contains(se)&&!r.classList.contains(Me)&&(r=s[s.length-1]);var o=this.parent.eventBase.getSelectedAppointments();if(!(o.length>0&&(r=this.getWorkCellFromAppointmentElement(o[o.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),!r))){if(i.target.classList.contains(se)&&r.classList.contains(se)){var l=this.processLeftRight(r),h=new Date(+r.getAttribute("data-date")),c=this.parent.currentView==="Year"&&h.getTime()===Vu(h).getTime();if(l.columnIndex>0&&l.columnIndex<l.maxIndex&&!c)a=this.calculateNextPrevDate(r,l.element.rows[l.rowIndex].cells[r.cellIndex-1],"left"),t&&e&&a.classList.contains(Xe)&&(a=this.getTimelineYearTargetCell(l,r,!1)),d(a)||this.selectCells(e,a);else if(l.columnIndex===0||c){if(!this.isInverseTableSelect()&&l.rowIndex>0){a=this.calculateNextPrevDate(r,l.element.rows[l.rowIndex-1].cells[l.maxIndex-1],"left");var u=t&&e&&a.classList.contains(Xe);a=u?this.getHorizontalLeftRightCell(l,r,!1):a,d(a)||this.selectCells(e,a)}else if(!e){if(c&&h.getTime()!==this.parent.activeView.getStartDate().getTime()){this.selectCells(e,this.parent.element.querySelector('[data-date="'+(h.getTime()-it)+'"]'));return}this.parent.changeDate(this.parent.activeView.getNextPreviousDate("Previous"),i);var p=this.parent.getContentTable(),f=this.isInverseTableSelect()?l.rowIndex:p.rows.length-1,v=p.rows[parseInt(f.toString(),10)].cells[l.maxIndex-1];if(c){var m=this.parent.element.querySelectorAll("."+$e+" tbody");v=m.item(m.length-1).querySelector(":not(."+Xe+')[data-date="'+this.parent.activeView.getEndDate().getTime()+'"]')}this.selectCells(!1,v)}}}else if(r.classList.contains(Me)){var g=r.cellIndex,y=this.parent.getAllDayRow(),b=y.cells.length;if(g>0&&g<b)this.selectCells(e,y.cells[g-1]);else if(g===0&&!e){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("Previous"),i);var E=this.parent.getAllDayRow();this.selectCells(!1,E.cells[b-1])}}}}},n.prototype.getTimelineYearTargetCell=function(i,e,t){return this.isInverseTableSelect()?this.getVerticalLeftRightCell(e,t):this.getHorizontalLeftRightCell(i,e,t)},n.prototype.getHorizontalLeftRightCell=function(i,e,t){var r=i.element.rows[e.parentNode.sectionRowIndex+(t?1:-1)];if(r){var s=t?"."+se+":not(."+Xe+")":'[data-date="'+(+e.getAttribute("data-date")-it)+'"]';return r.querySelector(s)}return e},n.prototype.getVerticalLeftRightCell=function(i,e){var t=new Date(+i.getAttribute("data-date")),r=new Date(t.getFullYear(),t.getMonth()+(e?1:-1),1),s=this.parent.getContentTable(),a=s.querySelector('[data-date="'+r.getTime()+'"]');return a.parentNode.sectionRowIndex>i.parentNode.sectionRowIndex?a:s.querySelector('[data-date="'+new Date(r.getFullYear(),r.getMonth()+1,0).getTime()+'"]')},n.prototype.calculateNextPrevDate=function(i,e,t){var r=this.initialTarget.getAttribute("data-group-index");if(this.parent.activeViewOptions.group.resources.length>0&&this.parent.currentView==="Month"&&i&&e&&e.getAttribute("data-group-index")!==r){var s=this.parent.getDateFromElement(i),a=t==="right"?new Date(s.setDate(s.getDate()+1)):new Date(s.setDate(s.getDate()-1));e=[].slice.call(this.parent.element.querySelectorAll('td[data-date="'+a.getTime().toString()+'"][data-group-index="'+r+'"]'))[0]}return e},n.prototype.getFocusableElements=function(i){var e='a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])';return[].slice.call(i.querySelectorAll(e))},n.prototype.processTabOnPopup=function(i,e){var t=this,r=this.getFocusableElements(e);r=r.filter(function(o){var l=t.parent.element.querySelector("."+Uu);return l&&l.offsetParent?!(o.classList.contains($r)||o.classList.contains(Fa)):!(o.classList.contains(Os)||o.classList.contains(br))});var s=r[0],a=r[r.length-1];!d(a)&&document.activeElement===a&&!i.shiftKey&&(i.preventDefault(),s.focus()),!d(s)&&document.activeElement===s&&i.shiftKey&&(i.preventDefault(),a.focus())},n.prototype.processTab=function(i,e){var t=i.target;if(t.classList.contains(Jt)&&this.parent.inlineModule&&(t=t.closest(".e-appointment"),this.parent.inlineModule.inlineCrudActions(i.target)),this.parent.currentView==="TimelineYear"&&t.classList.contains(Xe)){t.classList.contains(Bs)&&this.parent.removeSelectedClass();return}var r=M(t,"."+Ri+",."+tr);if(r&&r.classList.contains(Je)){r.classList.contains(tr)&&this.parent.eventBase.removeSelectedAppointmentClass(),this.processTabOnPopup(i,r);return}if(t.classList.contains(Bu)){this.parent.eventBase.removeSelectedAppointmentClass();return}if(t.classList.contains(ti)&&this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0){var s=parseInt(t.getAttribute("data-group-index"),10),a="."+he+'[data-group-index="'+(e?s-1:s)+'"]',o=[].slice.call(this.parent.element.querySelectorAll(a));if(o.length>0){this.parent.eventBase.removeSelectedAppointmentClass();var l=e?o.slice(-1)[0]:o[0];this.parent.eventBase.addSelectedAppointments([l],!0),l.focus(),i.preventDefault()}else if(s+1===this.parent.resourceBase.lastResourceLevel.length)this.parent.element.focus(),i.preventDefault();else if(this.parent.virtualScrollModule){var h=this.parent.element.querySelector("."+so),c=Math.round(h.offsetHeight/this.parent.resourceBase.expandedResources.length);this.parent.element.querySelector(".e-content-wrap").scrollTop=(e?s-1:s+1)*c,this.parent.virtualScrollModule.virtualScrolling()}else this.setScrollPosition(s);return}if(t.classList.contains(he)){var o=[].slice.call(this.parent.element.querySelectorAll("."+he)),u=this.parent.currentView==="TimelineYear",p=this.parent.activeView.isTimelineView()&&!u;if((p||u&&this.parent.activeViewOptions.orientation==="Vertical")&&this.parent.activeViewOptions.group.resources.length>0){var s=parseInt(t.getAttribute("data-group-index"),10);o=[].slice.call(this.parent.element.querySelectorAll("."+he+'[data-group-index="'+s+'"]'));var f="."+ti+'[data-group-index="'+(e?s:s+1)+'"]',v=this.parent.element.querySelector(f);if(v&&(e&&t.getAttribute("data-guid")===o[0].getAttribute("data-guid")||!e&&t.getAttribute("data-guid")===o.slice(-1)[0].getAttribute("data-guid"))){this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.virtualScrollModule?v.focus({preventScroll:!0}):v.focus(),this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&d(this.parent.virtualScrollModule)&&this.setScrollPosition(s),i.preventDefault();return}}var m=this.parent.eventBase.getSelectedAppointments();if(m.length>0&&(t=m[m.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),!e&&t.getAttribute("data-guid")===o[o.length-1].getAttribute("data-guid")||e&&t.getAttribute("data-guid")===o[0].getAttribute("data-guid"))return;(this.parent.currentView==="Agenda"||this.parent.currentView==="MonthAgenda")&&(this.selectAppointment(e,t),i.preventDefault());return}var g=this.parent.getSelectedCells();if(g.length>0&&!t.classList.contains(he)){t=g[g.length-1],this.selectAppointmentElementFromWorkCell(e,t),i.preventDefault();return}t&&!t.classList.contains(ti)&&this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&this.processTabOnResourceCells(t,e)},n.prototype.processDelete=function(i){var e=document.activeElement;if(this.parent.currentView==="MonthAgenda"||!d(e)&&M(e,"."+Ri)){var t=this.parent.eventBase.getSelectedEvents().element;e=t&&d(t.length)?t:t[0]}if(e&&e.classList.contains(he)){if(T([e],fn),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),this.parent.activeViewOptions.readonly||e.classList.contains(gl)||!this.parent.eventSettings.allowDeleting)return;this.parent.quickPopup.deleteClick(i)}},n.prototype.processCtrlShiftNavigationArrows=function(i){if(this.parent.activeViewOptions.group.resources.length>0&&document.activeElement.classList.contains(he)){var e=parseInt(document.activeElement.getAttribute("data-group-index"),10),t=i.action==="ctrlShiftLeftArrow"||i.action==="ctrlShiftUpArrow"?e-1:e+1;t=t<0?0:t>this.parent.resourceBase.lastResourceLevel.length?this.parent.resourceBase.lastResourceLevel.length:t;for(var r=[];r.length===0&&t>=0&&t<=this.parent.resourceBase.lastResourceLevel.length;)r=[].slice.call(this.parent.element.querySelectorAll("."+he+'[data-group-index="'+t+'"]')),t=i.action==="ctrlShiftLeftArrow"||i.action==="ctrlShiftUpArrow"?t-1:t+1;var s=r[0];s&&(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.eventBase.addSelectedAppointments([s],!0),s.focus())}else if(this.parent.activeViewOptions.group.resources.length>0&&!document.activeElement.classList.contains(he)){var t=this.parent.resourceBase.renderedResources[0].groupIndex,a="."+he+'[data-group-index="'+t+'"]',o=[].slice.call(this.parent.element.querySelectorAll(a));if(o.length>0){this.parent.eventBase.removeSelectedAppointmentClass();var l=o[0];this.parent.eventBase.addSelectedAppointments([l],!0),l.focus(),i.preventDefault()}}},n.prototype.processEscape=function(i){this.parent.quickPopup.onClosePopup(i),this.parent.quickPopup.morePopup.hide(),this.parent.headerModule&&this.parent.headerModule.hideHeaderPopup(),this.parent.inlineModule&&this.parent.inlineModule.removeInlineAppointmentElement()},n.prototype.isPreventAction=function(i){var e=M(i.target,"."+Ln);return!!(this.parent.activeView.isTimelineView()&&!d(e))},n.prototype.processTabOnResourceCells=function(i,e){var t=[].slice.call(this.parent.element.querySelectorAll('[tabIndex="0"]')),r=t.indexOf(i),s=e?t[r-1]:t[r+1];if(s&&s.classList.contains(ti)){var a=parseInt(s.getAttribute("data-group-index"),10);if(this.parent.virtualScrollModule){var o=this.parent.element.querySelector("."+Pi),l=[].slice.call(this.parent.element.querySelectorAll("."+ti));l.forEach(function(h){h.getBoundingClientRect().top<o.getBoundingClientRect().top&&h.setAttribute("tabindex","-1")})}else this.setScrollPosition(a)}},n.prototype.setScrollPosition=function(i){var e=this.parent.element.querySelector("."+se+'[data-group-index="'+i+'"]');e&&(this.parent.element.querySelector("."+Te).scrollTop=e.offsetTop)},n.prototype.createClipboardElement=function(){this.parent.allowClipboard&&(this.clipBoardTextArea=this.parent.createElement("textarea",{className:XR,attrs:{tabindex:"-1"}}),this.parent.element.appendChild(this.clipBoardTextArea))},n.prototype.setCopy=function(i,e){var t=this;if(window.getSelection().toString()===""){this.clipBoardTextArea.value="";var r={eventDatas:[]};if(i){var s=this.filterReadOnlyEvent(i);r.eventDatas=s}else{if(!this.parent||!this.parent.eventBase)return;var a=this.parent.eventBase.getSelectedEvents();a.event=a&&a.event?Array.isArray(a.event)?this.filterReadOnlyEvent(a.event):this.filterReadOnlyEvent([a.event]):void 0,a.element&&a.event?r={elements:a.element,eventDatas:a.event}:(r.element=[e.target],r.eventDatas=[this.parent.getEventDetails(e.target)])}this.clipBoardTextArea.value=JSON.stringify(r.eventDatas,void 0,2),/ipad|ipod|iphone/i.test(H.userAgent)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),d(navigator.clipboard)||navigator.clipboard.writeText(this.clipBoardTextArea.value).then(function(){if(t.clipBoardTextArea.blur(),t.clipBoardTextArea.selectionStart=t.clipBoardTextArea.selectionEnd,window.getSelection().removeAllRanges(),e){var o=e.target.closest("."+he);o&&o.focus()}}).catch(function(o){throw o})}},n.prototype.filterReadOnlyEvent=function(i){var e=this;return i.filter(function(t){return!t[e.parent.eventFields.isReadonly]})},n.prototype.processClipboardAction=function(i,e,t){this.parent.allowClipboard&&(this.isCutAction=i,this.isCutContentPasted=!1,this.parent.closeQuickInfoPopup(),this.setCopy(e||void 0,t))},n.prototype.pasteHandler=function(i,e){var t=this;if(!(!this.parent.allowClipboard||this.isCutContentPasted)){var r=this.parent.getSelectedCells().length>0?this.parent.getSelectedCells():e?[e]:[];if(!(r.length===0||this.parent.eventWindow.dialogObject.visible||this.parent.quickPopup.quickPopup.element.classList.contains(Je))){var s=i.clipboardData||i.event.clipboardData||window.clipboardData,a=s.getData("text");if(!(a==="[]"||a==="")){var o;try{o=JSON.parse(a)}catch{o=a}var l={cancel:!1,data:o,element:r};this.parent.trigger(jO,l,function(h){if(h.cancel){t.parent.closeQuickInfoPopup();return}else{if(!Array.isArray(h.data)||!h.data.every(function(c){return typeof c=="object"})){t.clipBoardTextArea.value="";return}t.processPaste(h.data,e),t.isCutAction&&(t.isCutContentPasted=!0)}})}}}},n.prototype.processPaste=function(i,e){if(!(!this.parent||!this.parent.eventWindow||!this.parent.eventBase||!i||!i.length)){var t=this.getTargetElements(e),r=this.parent.getCellDetails(t),s={};this.parent.eventWindow.convertToEventData(r,s);var a=this.isAllDayEvent(t),o=this.parent.getResourcesByIndex(r.groupIndex),l=this.processEventData(i,a,r,o),h=this.parent.eventBase.sortByDateTime(l),c=this.prepareEventData(h,s);I(t,Bs),c.length>0&&(this.isCutAction?this.parent.saveEvent(c):this.parent.addEvent(c))}},n.prototype.getTargetElements=function(i){return this.parent.getSelectedCells().length>0?this.parent.getSelectedCells():i?[i]:[]},n.prototype.isAllDayEvent=function(i){return!i.some(function(e){return e.classList.contains(se)})},n.prototype.processEventData=function(i,e,t,r){var s=this;return i.map(function(a){var o,l=ih({},a,(o={},o[s.parent.eventFields.startTime]=new Date(a[s.parent.eventFields.startTime]),o[s.parent.eventFields.endTime]=new Date(a[s.parent.eventFields.endTime]),o[s.parent.eventFields.recurrenceID]=null,o[s.parent.eventFields.isAllDay]=e,o));return s.adjustEventTime(l,e,a.IsAllDay,t),r&&r.groupData&&Object.assign(l,r.groupData),l})},n.prototype.adjustEventTime=function(i,e,t,r){var s=this.parent.activeViewOptions.timeScale.enable;["Day","Week","WorkWeek"].indexOf(this.parent.currentView)!==-1&&s?e?(i[this.parent.eventFields.endTime]=new Date(i[this.parent.eventFields.startTime]),i[this.parent.eventFields.endTime].setDate(i[this.parent.eventFields.startTime].getDate()+1)):t&&(i[this.parent.eventFields.startTime]=new Date(i[this.parent.eventFields.startTime].setHours(0,0,0,0)),i[this.parent.eventFields.endTime]=new Date(i[this.parent.eventFields.startTime].getTime()+(r.endTime.getTime()-r.startTime.getTime()))):t&&(i[this.parent.eventFields.isAllDay]=!0,i[this.parent.eventFields.startTime]=new Date(i[this.parent.eventFields.startTime].setHours(0,0,0,0)),i[this.parent.eventFields.endTime]=new Date(i[this.parent.eventFields.startTime].getTime()+(i[this.parent.eventFields.endTime].getTime()-i[this.parent.eventFields.startTime].getTime())))},n.prototype.prepareEventData=function(i,e){var t=this,r=new Date(i[0][this.parent.eventFields.startTime]),s=this.parent.getEventMaxID();return i.map(function(a){var o=t.calculateTotalDuration(a,e,r),l=t.isCutAction?a:ih({},a);return a[t.parent.eventFields.recurrenceRule]||(l[t.parent.eventFields.startTime]=new Date(new Date(l[t.parent.eventFields.startTime]).setMilliseconds(o)),l[t.parent.eventFields.endTime]=new Date(new Date(l[t.parent.eventFields.endTime]).setMilliseconds(o))),t.isCutAction||(l[t.parent.eventFields.id]=s++),l})},n.prototype.calculateTotalDuration=function(i,e,t){if(["Month","TimelineMonth","TimelineYear"].indexOf(this.parent.currentView)!==-1||!this.parent.activeViewOptions.timeScale.enable){var r=new Date(i[this.parent.eventFields.startTime]);return e[this.parent.eventFields.startTime].getTime()-t.getTime()+(r.getHours()*36e5+r.getMinutes()*6e4+r.getSeconds()*1e3)}else return e[this.parent.eventFields.startTime].getTime()-t.getTime()},n.prototype.getModuleName=function(){return"keyboard"},n.prototype.destroy=function(){this.removeEventListener(),this.selectedCells=[],this.clipBoardTextArea=null,this.keyboardModule.destroy()},n}(),Bb=function(){function n(i,e,t){this.parent=i,this.initDataManager(e,t)}return n.prototype.initDataManager=function(i,e){this.dataManager=i instanceof K?i:new K(i),this.query=e instanceof Se?e:new Se},n.prototype.generateQuery=function(i,e){var t=this.query.clone();if(this.parent&&i&&e){if(this.parent.activeViewOptions&&this.parent.activeViewOptions.enableLazyLoading&&!d(this.parent.activeViewOptions.group.resources)&&this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase&&this.parent.resourceBase.resourceCollection.length>0&&this.parent.resourceBase.renderedResources.length>0){var r=[];this.parent.resourceBase.resourceCollection.forEach(function(){return r.push([])}),this.parent.resourceBase.renderedResources.forEach(function(o){r.forEach(function(l,h){var c=o.groupOrder[parseInt(h.toString(),10)];c&&l.indexOf(c)<0&&l.push(c)})}),this.parent.resourceBase.resourceCollection.forEach(function(o,l){t.addParams(o.field,r[parseInt(l.toString(),10)].toString())})}if(this.parent.timezone&&(i=this.parent.tzModule.remove(new Date(+i.getTime()),this.parent.timezone),e=this.parent.tzModule.remove(new Date(+e.getTime()),this.parent.timezone)),this.parent.eventSettings.includeFiltersInQuery){var s=this.getStartEndQuery(i,e),a=new ut(this.parent.eventFields.recurrenceRule,"notequal",null).and(new ut(this.parent.eventFields.recurrenceRule,"notequal",""));return t.where(s.or(a))}t.addParams("StartDate",i.toISOString()),t.addParams("EndDate",e.toISOString())}return t},n.prototype.getStartEndQuery=function(i,e){var t=this.parent.eventFields,r=new ut(t.startTime,"greaterthanorequal",i).and(new ut(t.endTime,"greaterthanorequal",i)).and(new ut(t.startTime,"lessthan",e)).or(new ut(t.startTime,"lessthanorequal",i).and(new ut(t.endTime,"greaterthan",i)));return r},n.prototype.getData=function(i){return this.dataManager.executeQuery(i)},n.prototype.destroy=function(){this.dataManager=null,this.query=null},n}(),Fb=function(){function n(){}return n.prototype.firstDateOfMonth=function(i){return new Date(i.getFullYear(),i.getMonth())},n.prototype.lastDateOfMonth=function(i){return new Date(i.getFullYear(),i.getMonth()+1,0)},n.prototype.isMonthStart=function(i){return i.getDate()===1},n.prototype.getLeapYearDaysCount=function(){return 366},n.prototype.getYearDaysCount=function(i,e){return(i.getFullYear()+e)%4===0?366:365},n.prototype.getDate=function(i){return i.getDate()},n.prototype.getMonth=function(i){return i.getMonth()+1},n.prototype.getFullYear=function(i){return i.getFullYear()},n.prototype.getYearLastDate=function(i,e){return new Date(i.getFullYear()+e,0,0)},n.prototype.getMonthDaysCount=function(i){return this.lastDateOfMonth(i).getDate()},n.prototype.getMonthStartDate=function(i){return new Date(i.getFullYear(),i.getMonth(),1,i.getHours(),i.getMinutes())},n.prototype.getMonthEndDate=function(i){return i.setDate(1),new Date(i.setMonth(i.getMonth()+1))},n.prototype.getExpectedDays=function(i,e){return e},n.prototype.setDate=function(i,e){i.setDate(e)},n.prototype.setValidDate=function(i,e,t,r,s){d(s)?i.setMonth(i.getMonth()+e,t):i.setMonth((s?r:i.getMonth())+e)},n.prototype.setMonth=function(i,e,t){i.setDate(1),i.setFullYear(i.getFullYear()),i.setMonth(e-1);var r=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();i.setDate(Math.min(t,r))},n.prototype.addYears=function(i,e){i.setFullYear(i.getFullYear()+e)},n.prototype.isSameMonth=function(i,e){return i.getMonth()===e.getMonth()},n.prototype.checkMonth=function(i,e){return e.indexOf(i.getMonth()+1)===-1},n.prototype.compareMonth=function(i,e){return i.getMonth()>e.getMonth()},n.prototype.isSameYear=function(i,e){return i.getFullYear()===e.getFullYear()},n.prototype.isLastMonth=function(i){return i.getMonth()===11},n.prototype.isLeapYear=function(i,e){return(i+e)%4===0},n}(),Wb=function(){function n(){}return n.prototype.firstDateOfMonth=function(i){var e=this.getHijriDate(i),t=hr.toGregorian(e.year,e.month,1);return t},n.prototype.lastDateOfMonth=function(i){var e=this.getHijriDate(i),t=this.getDaysInMonth(e.month,e.year),r=hr.toGregorian(e.year,e.month,t),s=new Date(r.getTime());s=new Date(s.setDate(s.getDate()+1));var a=this.getHijriDate(s);return e.month===a.month?s:(a=this.getHijriDate(r),e.month===a.month?r:new Date(r.setDate(r.getDate()-1)))},n.prototype.isMonthStart=function(i){var e=this.getHijriDate(i);return e.date===1},n.prototype.getLeapYearDaysCount=function(){return 355},n.prototype.getYearDaysCount=function(i,e){var t=this.getHijriDate(i);return this.isLeapYear(t.year,e)?355:354},n.prototype.getDate=function(i){var e=this.getHijriDate(i);return e.date},n.prototype.getMonth=function(i){var e=this.getHijriDate(i);return e.month},n.prototype.getFullYear=function(i){var e=this.getHijriDate(i);return e.year},n.prototype.getYearLastDate=function(i,e){var t=this.getHijriDate(i),r=hr.toGregorian(t.year+e,1,0);return r},n.prototype.getMonthDaysCount=function(i){var e=this.lastDateOfMonth(i),t=this.getHijriDate(e);return t.date},n.prototype.getMonthStartDate=function(i){var e=this.firstDateOfMonth(i);return new Date(e.getFullYear(),e.getMonth(),e.getDate(),i.getHours(),i.getMinutes())},n.prototype.getMonthEndDate=function(i){var e=this.lastDateOfMonth(i);return e.setDate(e.getDate()+1),new Date(e.setMonth(e.getMonth()))},n.prototype.getExpectedDays=function(i,e){for(var t=this.getHijriDate(i),r=[],s=0;s<e.length;s++){var a=hr.toGregorian(t.year,t.month,e[parseInt(s.toString(),10)]);r.push(a.getDate())}return r},n.prototype.setDate=function(i,e){var t=this.getHijriDate(i),r=hr.toGregorian(t.year,t.month,e);this.updateDateObj(i,r)},n.prototype.setValidDate=function(i,e,t,r,s){var a=d(s)?i:this.firstDateOfMonth(s),o=this.getHijriDate(a),l=hr.toGregorian(o.year,o.month+e,t);this.updateDateObj(i,l)},n.prototype.setMonth=function(i,e,t){var r=this.getHijriDate(i),s=hr.toGregorian(r.year,e,t);this.updateDateObj(i,s)},n.prototype.addYears=function(i,e,t){var r=this.getHijriDate(i),s=hr.toGregorian(r.year+e,t,1);this.updateDateObj(i,s)},n.prototype.isSameMonth=function(i,e){var t=this.getHijriDate(i),r=this.getHijriDate(e);return t.month===r.month},n.prototype.checkMonth=function(i,e){var t=this.getHijriDate(i);return e.indexOf(t.month)===-1},n.prototype.compareMonth=function(i,e){var t=this.getHijriDate(i),r=this.getHijriDate(e);return t.month>r.month},n.prototype.isSameYear=function(i,e){var t=this.getHijriDate(i),r=this.getHijriDate(e);return t.year===r.year},n.prototype.isLastMonth=function(i){var e=this.getHijriDate(i);return e.month===12},n.prototype.updateDateObj=function(i,e){i.setFullYear(e.getFullYear(),e.getMonth(),e.getDate())},n.prototype.isLeapYear=function(i,e){return(14+11*(i+e))%30<11},n.prototype.getDaysInMonth=function(i,e){var t=0;return t=29+(i+1)%2,i===11&&this.isLeapYear(e,0)&&t++,t},n.prototype.getHijriDate=function(i){return hr.getHijriDate(i)},n}(),_b=function(){function n(){this.timezoneData=[],this.timezoneData=this.getTimezoneData()}return n.prototype.offset=function(i,e){var t=i.getTimezoneOffset();try{var r=new Date(i.toLocaleString("en-US",{timeZone:e}));return isNaN(r.getTime())?0:(i.getTime()-r.getTime())/6e4+t}catch{return 0}},n.prototype.convert=function(i,e,t){typeof e=="string"&&(e=this.offset(i,e)),typeof t=="string"&&(t=this.offset(i,t));var r=i.getTimezoneOffset();i=new Date(i.getTime()+(e-t)*6e4);var s=i.getTimezoneOffset();return new Date(i.getTime()+(s-r)*6e4)},n.prototype.add=function(i,e){return this.convert(i,i.getTimezoneOffset(),e)},n.prototype.remove=function(i,e){return this.convert(i,e,i.getTimezoneOffset())},n.prototype.removeLocalOffset=function(i){return new Date(i.getTime()-i.getTimezoneOffset()*6e4)},n.prototype.getLocalTimezoneName=function(){return window.Intl&&Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"},n.prototype.getTimezoneData=function(){return qb},n}(),qb=[{Value:"Pacific/Niue",Text:"(UTC-11:00) Niue"},{Value:"Pacific/Pago_Pago",Text:"(UTC-11:00) Pago Pago"},{Value:"Pacific/Honolulu",Text:"(UTC-10:00) Hawaii Time"},{Value:"Pacific/Rarotonga",Text:"(UTC-10:00) Rarotonga"},{Value:"Pacific/Tahiti",Text:"(UTC-10:00) Tahiti"},{Value:"Pacific/Marquesas",Text:"(UTC-09:30) Marquesas"},{Value:"America/Anchorage",Text:"(UTC-09:00) Alaska Time"},{Value:"Pacific/Gambier",Text:"(UTC-09:00) Gambier"},{Value:"America/Los_Angeles",Text:"(UTC-08:00) Pacific Time"},{Value:"America/Tijuana",Text:"(UTC-08:00) Pacific Time - Tijuana"},{Value:"America/Vancouver",Text:"(UTC-08:00) Pacific Time - Vancouver"},{Value:"America/Whitehorse",Text:"(UTC-08:00) Pacific Time - Whitehorse"},{Value:"Pacific/Pitcairn",Text:"(UTC-08:00) Pitcairn"},{Value:"America/Denver",Text:"(UTC-07:00) Mountain Time"},{Value:"America/Phoenix",Text:"(UTC-07:00) Mountain Time - Arizona"},{Value:"America/Mazatlan",Text:"(UTC-07:00) Mountain Time - Chihuahua, Mazatlan"},{Value:"America/Dawson_Creek",Text:"(UTC-07:00) Mountain Time - Dawson Creek"},{Value:"America/Edmonton",Text:"(UTC-07:00) Mountain Time - Edmonton"},{Value:"America/Hermosillo",Text:"(UTC-07:00) Mountain Time - Hermosillo"},{Value:"America/Yellowknife",Text:"(UTC-07:00) Mountain Time - Yellowknife"},{Value:"America/Belize",Text:"(UTC-06:00) Belize"},{Value:"America/Chicago",Text:"(UTC-06:00) Central Time"},{Value:"America/Mexico_City",Text:"(UTC-06:00) Central Time - Mexico City"},{Value:"America/Regina",Text:"(UTC-06:00) Central Time - Regina"},{Value:"America/Tegucigalpa",Text:"(UTC-06:00) Central Time - Tegucigalpa"},{Value:"America/Winnipeg",Text:"(UTC-06:00) Central Time - Winnipeg"},{Value:"America/Costa_Rica",Text:"(UTC-06:00) Costa Rica"},{Value:"America/El_Salvador",Text:"(UTC-06:00) El Salvador"},{Value:"Pacific/Galapagos",Text:"(UTC-06:00) Galapagos"},{Value:"America/Guatemala",Text:"(UTC-06:00) Guatemala"},{Value:"America/Managua",Text:"(UTC-06:00) Managua"},{Value:"America/Cancun",Text:"(UTC-05:00) America Cancun"},{Value:"America/Bogota",Text:"(UTC-05:00) Bogota"},{Value:"Pacific/Easter",Text:"(UTC-05:00) Easter Island"},{Value:"America/New_York",Text:"(UTC-05:00) Eastern Time"},{Value:"America/Iqaluit",Text:"(UTC-05:00) Eastern Time - Iqaluit"},{Value:"America/Toronto",Text:"(UTC-05:00) Eastern Time - Toronto"},{Value:"America/Guayaquil",Text:"(UTC-05:00) Guayaquil"},{Value:"America/Havana",Text:"(UTC-05:00) Havana"},{Value:"America/Jamaica",Text:"(UTC-05:00) Jamaica"},{Value:"America/Lima",Text:"(UTC-05:00) Lima"},{Value:"America/Nassau",Text:"(UTC-05:00) Nassau"},{Value:"America/Panama",Text:"(UTC-05:00) Panama"},{Value:"America/Port-au-Prince",Text:"(UTC-05:00) Port-au-Prince"},{Value:"America/Rio_Branco",Text:"(UTC-05:00) Rio Branco"},{Value:"America/Halifax",Text:"(UTC-04:00) Atlantic Time - Halifax"},{Value:"America/Barbados",Text:"(UTC-04:00) Barbados"},{Value:"Atlantic/Bermuda",Text:"(UTC-04:00) Bermuda"},{Value:"America/Boa_Vista",Text:"(UTC-04:00) Boa Vista"},{Value:"America/Caracas",Text:"(UTC-04:00) Caracas"},{Value:"America/Curacao",Text:"(UTC-04:00) Curacao"},{Value:"America/Grand_Turk",Text:"(UTC-04:00) Grand Turk"},{Value:"America/Guyana",Text:"(UTC-04:00) Guyana"},{Value:"America/La_Paz",Text:"(UTC-04:00) La Paz"},{Value:"America/Manaus",Text:"(UTC-04:00) Manaus"},{Value:"America/Martinique",Text:"(UTC-04:00) Martinique"},{Value:"America/Port_of_Spain",Text:"(UTC-04:00) Port of Spain"},{Value:"America/Porto_Velho",Text:"(UTC-04:00) Porto Velho"},{Value:"America/Puerto_Rico",Text:"(UTC-04:00) Puerto Rico"},{Value:"America/Santo_Domingo",Text:"(UTC-04:00) Santo Domingo"},{Value:"America/Thule",Text:"(UTC-04:00) Thule"},{Value:"America/St_Johns",Text:"(UTC-03:30) Newfoundland Time - St. Johns"},{Value:"America/Araguaina",Text:"(UTC-03:00) Araguaina"},{Value:"America/Asuncion",Text:"(UTC-03:00) Asuncion"},{Value:"America/Belem",Text:"(UTC-03:00) Belem"},{Value:"America/Argentina/Buenos_Aires",Text:"(UTC-03:00) Buenos Aires"},{Value:"America/Campo_Grande",Text:"(UTC-03:00) Campo Grande"},{Value:"America/Cayenne",Text:"(UTC-03:00) Cayenne"},{Value:"America/Cuiaba",Text:"(UTC-03:00) Cuiaba"},{Value:"America/Fortaleza",Text:"(UTC-03:00) Fortaleza"},{Value:"America/Godthab",Text:"(UTC-03:00) Godthab"},{Value:"America/Maceio",Text:"(UTC-03:00) Maceio"},{Value:"America/Miquelon",Text:"(UTC-03:00) Miquelon"},{Value:"America/Montevideo",Text:"(UTC-03:00) Montevideo"},{Value:"Antarctica/Palmer",Text:"(UTC-03:00) Palmer"},{Value:"America/Paramaribo",Text:"(UTC-03:00) Paramaribo"},{Value:"America/Punta_Arenas",Text:"(UTC-03:00) Punta Arenas"},{Value:"America/Recife",Text:"(UTC-03:00) Recife"},{Value:"Antarctica/Rothera",Text:"(UTC-03:00) Rothera"},{Value:"America/Bahia",Text:"(UTC-03:00) Salvador"},{Value:"America/Santiago",Text:"(UTC-03:00) Santiago"},{Value:"Atlantic/Stanley",Text:"(UTC-03:00) Stanley"},{Value:"America/Noronha",Text:"(UTC-02:00) Noronha"},{Value:"America/Sao_Paulo",Text:"(UTC-02:00) Sao Paulo"},{Value:"Atlantic/South_Georgia",Text:"(UTC-02:00) South Georgia"},{Value:"Atlantic/Azores",Text:"(UTC-01:00) Azores"},{Value:"Atlantic/Cape_Verde",Text:"(UTC-01:00) Cape Verde"},{Value:"America/Scoresbysund",Text:"(UTC-01:00) Scoresbysund"},{Value:"Africa/Abidjan",Text:"(UTC+00:00) Abidjan"},{Value:"Africa/Accra",Text:"(UTC+00:00) Accra"},{Value:"Africa/Bissau",Text:"(UTC+00:00) Bissau"},{Value:"Atlantic/Canary",Text:"(UTC+00:00) Canary Islands"},{Value:"Africa/Casablanca",Text:"(UTC+00:00) Casablanca"},{Value:"America/Danmarkshavn",Text:"(UTC+00:00) Danmarkshavn"},{Value:"Europe/Dublin",Text:"(UTC+00:00) Dublin"},{Value:"Africa/El_Aaiun",Text:"(UTC+00:00) El Aaiun"},{Value:"Atlantic/Faroe",Text:"(UTC+00:00) Faeroe"},{Value:"Etc/UTC",Text:"(UTC+00:00) UTC (no daylight saving)"},{Value:"Europe/Lisbon",Text:"(UTC+00:00) Lisbon"},{Value:"Europe/London",Text:"(UTC+00:00) London"},{Value:"Africa/Monrovia",Text:"(UTC+00:00) Monrovia"},{Value:"Atlantic/Reykjavik",Text:"(UTC+00:00) Reykjavik"},{Value:"UTC",Text:"UTC"},{Value:"Africa/Algiers",Text:"(UTC+01:00) Algiers"},{Value:"Europe/Amsterdam",Text:"(UTC+01:00) Amsterdam"},{Value:"Europe/Andorra",Text:"(UTC+01:00) Andorra"},{Value:"Europe/Berlin",Text:"(UTC+01:00) Berlin"},{Value:"Europe/Brussels",Text:"(UTC+01:00) Brussels"},{Value:"Europe/Budapest",Text:"(UTC+01:00) Budapest"},{Value:"Europe/Belgrade",Text:"(UTC+01:00) Central European Time - Belgrade"},{Value:"Europe/Prague",Text:"(UTC+01:00) Central European Time - Prague"},{Value:"Africa/Ceuta",Text:"(UTC+01:00) Ceuta"},{Value:"Europe/Copenhagen",Text:"(UTC+01:00) Copenhagen"},{Value:"Europe/Gibraltar",Text:"(UTC+01:00) Gibraltar"},{Value:"Africa/Lagos",Text:"(UTC+01:00) Lagos"},{Value:"Europe/Luxembourg",Text:"(UTC+01:00) Luxembourg"},{Value:"Europe/Madrid",Text:"(UTC+01:00) Madrid"},{Value:"Europe/Malta",Text:"(UTC+01:00) Malta"},{Value:"Europe/Monaco",Text:"(UTC+01:00) Monaco"},{Value:"Africa/Ndjamena",Text:"(UTC+01:00) Ndjamena"},{Value:"Europe/Oslo",Text:"(UTC+01:00) Oslo"},{Value:"Europe/Paris",Text:"(UTC+01:00) Paris"},{Value:"Europe/Rome",Text:"(UTC+01:00) Rome"},{Value:"Europe/Stockholm",Text:"(UTC+01:00) Stockholm"},{Value:"Europe/Tirane",Text:"(UTC+01:00) Tirane"},{Value:"Africa/Tunis",Text:"(UTC+01:00) Tunis"},{Value:"Europe/Vienna",Text:"(UTC+01:00) Vienna"},{Value:"Europe/Warsaw",Text:"(UTC+01:00) Warsaw"},{Value:"Europe/Zurich",Text:"(UTC+01:00) Zurich"},{Value:"Asia/Amman",Text:"(UTC+02:00) Amman"},{Value:"Europe/Athens",Text:"(UTC+02:00) Athens"},{Value:"Asia/Beirut",Text:"(UTC+02:00) Beirut"},{Value:"Europe/Bucharest",Text:"(UTC+02:00) Bucharest"},{Value:"Africa/Cairo",Text:"(UTC+02:00) Cairo"},{Value:"Europe/Chisinau",Text:"(UTC+02:00) Chisinau"},{Value:"Asia/Damascus",Text:"(UTC+02:00) Damascus"},{Value:"Asia/Gaza",Text:"(UTC+02:00) Gaza"},{Value:"Europe/Helsinki",Text:"(UTC+02:00) Helsinki"},{Value:"Asia/Jerusalem",Text:"(UTC+02:00) Jerusalem"},{Value:"Africa/Johannesburg",Text:"(UTC+02:00) Johannesburg"},{Value:"Africa/Khartoum",Text:"(UTC+02:00) Khartoum"},{Value:"Europe/Kiev",Text:"(UTC+02:00) Kiev"},{Value:"Africa/Maputo",Text:"(UTC+02:00) Maputo"},{Value:"Europe/Kaliningrad",Text:"(UTC+02:00) Moscow-01 - Kaliningrad"},{Value:"Asia/Nicosia",Text:"(UTC+02:00) Nicosia"},{Value:"Europe/Riga",Text:"(UTC+02:00) Riga"},{Value:"Europe/Sofia",Text:"(UTC+02:00) Sofia"},{Value:"Europe/Tallinn",Text:"(UTC+02:00) Tallinn"},{Value:"Africa/Tripoli",Text:"(UTC+02:00) Tripoli"},{Value:"Europe/Vilnius",Text:"(UTC+02:00) Vilnius"},{Value:"Africa/Windhoek",Text:"(UTC+02:00) Windhoek"},{Value:"Asia/Baghdad",Text:"(UTC+03:00) Baghdad"},{Value:"Europe/Istanbul",Text:"(UTC+03:00) Istanbul"},{Value:"Europe/Minsk",Text:"(UTC+03:00) Minsk"},{Value:"Europe/Moscow",Text:"(UTC+03:00) Moscow+00 - Moscow"},{Value:"Africa/Nairobi",Text:"(UTC+03:00) Nairobi"},{Value:"Asia/Qatar",Text:"(UTC+03:00) Qatar"},{Value:"Asia/Riyadh",Text:"(UTC+03:00) Riyadh"},{Value:"Antarctica/Syowa",Text:"(UTC+03:00) Syowa"},{Value:"Asia/Tehran",Text:"(UTC+03:30) Tehran"},{Value:"Asia/Baku",Text:"(UTC+04:00) Baku"},{Value:"Asia/Dubai",Text:"(UTC+04:00) Dubai"},{Value:"Indian/Mahe",Text:"(UTC+04:00) Mahe"},{Value:"Indian/Mauritius",Text:"(UTC+04:00) Mauritius"},{Value:"Europe/Samara",Text:"(UTC+04:00) Moscow+01 - Samara"},{Value:"Indian/Reunion",Text:"(UTC+04:00) Reunion"},{Value:"Asia/Tbilisi",Text:"(UTC+04:00) Tbilisi"},{Value:"Asia/Yerevan",Text:"(UTC+04:00) Yerevan"},{Value:"Asia/Kabul",Text:"(UTC+04:30) Kabul"},{Value:"Asia/Aqtau",Text:"(UTC+05:00) Aqtau"},{Value:"Asia/Aqtobe",Text:"(UTC+05:00) Aqtobe"},{Value:"Asia/Ashgabat",Text:"(UTC+05:00) Ashgabat"},{Value:"Asia/Dushanbe",Text:"(UTC+05:00) Dushanbe"},{Value:"Asia/Karachi",Text:"(UTC+05:00) Karachi"},{Value:"Indian/Kerguelen",Text:"(UTC+05:00) Kerguelen"},{Value:"Indian/Maldives",Text:"(UTC+05:00) Maldives"},{Value:"Antarctica/Mawson",Text:"(UTC+05:00) Mawson"},{Value:"Asia/Yekaterinburg",Text:"(UTC+05:00) Moscow+02 - Yekaterinburg"},{Value:"Asia/Tashkent",Text:"(UTC+05:00) Tashkent"},{Value:"Asia/Colombo",Text:"(UTC+05:30) Colombo"},{Value:"Asia/Kolkata",Text:"(UTC+05:30) India Standard Time"},{Value:"Asia/Katmandu",Text:"(UTC+05:45) Katmandu"},{Value:"Asia/Almaty",Text:"(UTC+06:00) Almaty"},{Value:"Asia/Bishkek",Text:"(UTC+06:00) Bishkek"},{Value:"Indian/Chagos",Text:"(UTC+06:00) Chagos"},{Value:"Asia/Dhaka",Text:"(UTC+06:00) Dhaka"},{Value:"Asia/Omsk",Text:"(UTC+06:00) Moscow+03 - Omsk"},{Value:"Asia/Thimphu",Text:"(UTC+06:00) Thimphu"},{Value:"Antarctica/Vostok",Text:"(UTC+06:00) Vostok"},{Value:"Indian/Cocos",Text:"(UTC+06:30) Cocos"},{Value:"Asia/Yangon",Text:"(UTC+06:30) Rangoon"},{Value:"Asia/Bangkok",Text:"(UTC+07:00) Bangkok"},{Value:"Indian/Christmas",Text:"(UTC+07:00) Christmas"},{Value:"Antarctica/Davis",Text:"(UTC+07:00) Davis"},{Value:"Asia/Saigon",Text:"(UTC+07:00) Hanoi"},{Value:"Asia/Hovd",Text:"(UTC+07:00) Hovd"},{Value:"Asia/Jakarta",Text:"(UTC+07:00) Jakarta"},{Value:"Asia/Krasnoyarsk",Text:"(UTC+07:00) Moscow+04 - Krasnoyarsk"},{Value:"Asia/Brunei",Text:"(UTC+08:00) Brunei"},{Value:"Asia/Shanghai",Text:"(UTC+08:00) China Time - Beijing"},{Value:"Asia/Choibalsan",Text:"(UTC+08:00) Choibalsan"},{Value:"Asia/Hong_Kong",Text:"(UTC+08:00) Hong Kong"},{Value:"Asia/Kuala_Lumpur",Text:"(UTC+08:00) Kuala Lumpur"},{Value:"Asia/Macau",Text:"(UTC+08:00) Macau"},{Value:"Asia/Makassar",Text:"(UTC+08:00) Makassar"},{Value:"Asia/Manila",Text:"(UTC+08:00) Manila"},{Value:"Asia/Irkutsk",Text:"(UTC+08:00) Moscow+05 - Irkutsk"},{Value:"Asia/Singapore",Text:"(UTC+08:00) Singapore"},{Value:"Asia/Taipei",Text:"(UTC+08:00) Taipei"},{Value:"Asia/Ulaanbaatar",Text:"(UTC+08:00) Ulaanbaatar"},{Value:"Australia/Perth",Text:"(UTC+08:00) Western Time - Perth"},{Value:"Asia/Pyongyang",Text:"(UTC+08:30) Pyongyang"},{Value:"Asia/Dili",Text:"(UTC+09:00) Dili"},{Value:"Asia/Jayapura",Text:"(UTC+09:00) Jayapura"},{Value:"Asia/Yakutsk",Text:"(UTC+09:00) Moscow+06 - Yakutsk"},{Value:"Pacific/Palau",Text:"(UTC+09:00) Palau"},{Value:"Asia/Seoul",Text:"(UTC+09:00) Seoul"},{Value:"Asia/Tokyo",Text:"(UTC+09:00) Tokyo"},{Value:"Australia/Darwin",Text:"(UTC+09:30) Central Time - Darwin"},{Value:"Antarctica/DumontDUrville",Text:'(UTC+10:00) Dumont D"Urville'},{Value:"Australia/Brisbane",Text:"(UTC+10:00) Eastern Time - Brisbane"},{Value:"Pacific/Guam",Text:"(UTC+10:00) Guam"},{Value:"Asia/Vladivostok",Text:"(UTC+10:00) Moscow+07 - Vladivostok"},{Value:"Pacific/Port_Moresby",Text:"(UTC+10:00) Port Moresby"},{Value:"Pacific / Chuuk",Text:"(UTC+10:00) Truk"},{Value:"Australia/Adelaide",Text:"(UTC+10:30) Central Time - Adelaide"},{Value:"Antarctica/Casey",Text:"(UTC+11:00) Casey"},{Value:"Australia/Hobart",Text:"(UTC+11:00) Eastern Time - Hobart"},{Value:"Australia/Sydney",Text:"(UTC+11:00) Eastern Time - Melbourne, Sydney"},{Value:"Pacific/Efate",Text:"(UTC+11:00) Efate"},{Value:"Pacific/Guadalcanal",Text:"(UTC+11:00) Guadalcanal"},{Value:"Pacific/Kosrae",Text:"(UTC+11:00) Kosrae"},{Value:"Asia/Magadan",Text:"(UTC+11:00) Moscow+08 - Magadan"},{Value:"Pacific / Norfolk",Text:"(UTC+11:00) Norfolk"},{Value:"Pacific/Noumea",Text:"(UTC+11:00) Noumea"},{Value:"Pacific/Pohnpei",Text:"(UTC+11:00) Ponape"},{Value:"Pacific/Funafuti",Text:"(UTC+12:00) Funafuti"},{Value:"Pacific/Kwajalein",Text:"(UTC+12:00) Kwajalein"},{Value:"Pacific/Majuro",Text:"(UTC+12:00) Majuro"},{Value:"Asia/Kamchatka",Text:"(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy"},{Value:"Pacific / Nauru",Text:"(UTC+12:00) Nauru"},{Value:"Pacific/Tarawa",Text:"(UTC+12:00) Tarawa"},{Value:"Pacific/Wake",Text:"(UTC+12:00) Wake"},{Value:"Pacific/Wallis",Text:"(UTC+12:00) Wallis"},{Value:"Pacific/Auckland",Text:"(UTC+13:00) Auckland"},{Value:"Pacific/Enderbury",Text:"(UTC+13:00) Enderbury"},{Value:"Pacific/Fakaofo",Text:"(UTC+13:00) Fakaofo"},{Value:"Pacific/Fiji",Text:"(UTC+13:00) Fiji"},{Value:"Pacific/Tongatapu",Text:"(UTC+13:00) Tongatapu"},{Value:"Pacific/Apia",Text:"(UTC+14:00) Apia"},{Value:"Pacific/Kiritimati",Text:"(UTC+14:00) Kiritimati"}];function eN(n,i,e,t){t===void 0&&(t="Gregorian");var r=vp(n),s=i.getConstant(TN)+" ",a,o,l=t.toLowerCase();if(e==="en"||e==="en-US"){var h="months.stand-alone.abbreviated",c="days.stand-alone.abbreviated";o=V(h,Lt(l)),a=V(c,Lt(l))}else{var h="main."+e+".dates.calendars."+l+".months.stand-alone.abbreviated",c="main."+e+".dates.calendars."+l+".days.stand-alone.abbreviated";o=V(h,Vt),a=V(c,Vt)}switch(r.interval>1&&(s+=r.interval+" "),r.freq){case"DAILY":s+=i.getConstant(AN);break;case"WEEKLY":s+=i.getConstant(xN)+" "+i.getConstant(Jc)+" ",r.day.forEach(function(p,f){s+=Ne(V(Xb[""+p],a),"single"),s+=r.day.length-1===f?"":", "});break;case"MONTHLY":s+=i.getConstant(kN)+" "+i.getConstant(Jc)+" ",s+=ug(r,a,i);break;case"YEARLY":s+=i.getConstant(IN)+" "+i.getConstant(Jc)+" ",s+=Ne(V(r.month[0].toString(),o),"single")+" ",s+=ug(r,a,i);break}if(r.count)s+=", "+r.count+" "+i.getConstant(wN);else if(r.until){var u=r.until;s+=", "+i.getConstant(DN)+" "+u.getDate()+" "+Ne(V((u.getMonth()+1).toString(),o),"single")+" "+u.getFullYear()}return s}function ug(n,i,e){var t="";if(n.monthDay.length)t+=n.monthDay[0];else if(n.day){var r=n.setPosition-1;t+=e.getConstant(dg[r>-1?r:dg.length-1])+" "+Ne(V(Xb[n.day[0]],i),"single")}return t}function cp(n,i,e,t,r,s,a,o){r===void 0&&(r=CN),s===void 0&&(s=null),a===void 0&&(a="Gregorian"),o===void 0&&(o=null);var l=vp(i),h;re=Qu(a);var c=[],u=new Date(n.getTime());bl=[];var p=d(e)?[]:e.split(","),f=new _b;if(p.forEach(function(v){var m=up(v);o&&(m=f.add(new Date(m.getTime()),o)),bl.push(new Date(m.getTime()).setHours(0,0,0,0))}),l.recExceptionCount=d(l.count)?0:bl.length,s&&s>n&&!l.count?Rs=new Date(new Date(s.getTime()).setHours(0,0,0)):Rs=null,!l.until&&Rs&&(h=new Date(Rs.getTime()),h.setDate(Rs.getDate()+r*l.interval),l.until=h),l.until&&n>l.until)return c;switch(Qb=r,t=t||0,EN(ht[parseInt(t.toString(),10)]),l.freq){case"DAILY":tN(u,l.until,c,l);break;case"WEEKLY":iN(u,l.until,c,l,t);break;case"MONTHLY":zb(u,l.until,c,l);break;case"YEARLY":rN(u,l.until,c,l)}return c}function up(n){return new Date(n.substr(0,4)+"-"+n.substr(4,2)+"-"+n.substr(6,5)+":"+n.substr(11,2)+":"+n.substr(13))}function dp(n,i){var e=new Date(i).setHours(0,0,0,0);bl.indexOf(e)===-1&&(!Rs||e>=Rs.getTime())&&n.push(i)}function or(n,i){var e=Qb;return i.count?e=i.count:i.until&&(i.freq==="DAILY"||i.freq==="WEEKLY"?e=Math.floor((i.until.getTime()-n.getTime())/it)+1:(i.freq==="MONTHLY"||i.freq==="YEARLY")&&(e=Math.floor((i.until.getMonth()+12*i.until.getFullYear()-(n.getMonth()+12*n.getFullYear()))/i.interval)+(i.day.length>1?Math.floor((i.until.getTime()-n.getTime())/it)+1:1),i.freq==="YEARLY"&&(e=i.month.length>1?e*i.month.length:e))),e}function tN(n,i,e,t){for(var r=new Date(n.getTime()),s=t.interval,a=or(n,t),o,l=t.day;Ti(r,i)&&(o=!0,o=bh(r,t),!(o&&(l.indexOf(ht[r.getDay()])>-1||l.length===0)&&(dp(e,r.getTime()),a&&e.length+t.recExceptionCount>=a)));)r.setDate(r.getDate()+s),r.getHours()!==n.getHours()&&r.setHours(n.getHours())}function iN(n,i,e,t,r){var s=new Date(n.getTime());t.day.length||t.day.push(ht[n.getDay()]);var a=t.interval,o=t.day,l=or(n,t),h=!0,c,u=[];if(o.length>1)for((d(t.wkst)||t.wkst==="")&&(t.wkst=Cr[0]),c=ht.indexOf(t.wkst);Ti(s,i);){var p=ht.indexOf(ht[s.getDay()])-c;p=p===-1?6:p;var f=Z(s,-p),v=Z(f,6),m=new Date(s.getTime());for(v=W(v),m=W(m);v>=m&&(o.indexOf(ht[s.getDay()])>-1&&u.push([s.getTime()]),!(l&&e.length+t.recExceptionCount>=l));)s.setDate(s.getDate()+1),s.getHours()!==n.getHours()&&s.setHours(n.getHours()),m=new Date(s.getTime()),m=W(m);if(s.setDate(s.getDate()-1),l&&e.length+t.recExceptionCount>=l)break;s.setDate(s.getDate()+1+(a-1)*7),$u(u,h,n,i,e,t),u=[]}else{for(s=dt(n,t.day),a>1&&Cr.indexOf(t.day[0])<n.getDay()-r&&s.setDate(s.getDate()+(a-1)*7);Ti(s,i)&&(h=bh(s,t),h&&o.indexOf(ht[s.getDay()])>-1&&dp(e,s.getTime()),!(l&&e.length+t.recExceptionCount>=l));)s.setDate(s.getDate()+a*7);$u(u,h,n,i,e,t),u=[]}}function zb(n,i,e,t){!t.month.length&&!t.day.length&&!t.monthDay.length?(t.monthDay.push(n.getDate()),t.freq==="YEARLY"&&t.month.push(n.getMonth()+1)):t.month.length>0&&!t.day.length&&!t.monthDay.length&&t.monthDay.push(n.getDate());var r=bN(t);switch(r){case"day":switch(t.freq){case"MONTHLY":Gb(n,i,e,t);break;case"YEARLY":hN(n,i,e,t);break}break;case"both":case"date":switch(t.freq){case"MONTHLY":Ub(n,i,e,t);break;case"YEARLY":oN(n,i,e,t);break}break}}function rN(n,i,e,t){var r=aN(t);switch(r){case"MONTH":zb(n,i,e,t);break;case"WEEKNO":sN(n,i,e,t);break;case"YEARDAY":nN(n,i,e,t);break}}function sN(n,i,e,t){for(var r=re.getYearLastDate(n,0),s,a=or(n,t),o,l,h,c=t.weekNo,u,p,f,v=[],m=t.day;Ti(r,i);){l=Cr.indexOf(ht[r.getDay()]),h=6-l+1;for(var g=0;g<c.length;g++)for(u=c[parseInt(g.toString(),10)],u=u>0?u:53+u+1,p=u===1?h:h+(u-1)*7,f=u===1?h-7:h+(u-2)*7;f<p;)s=new Date(r.getTime()+it*f),(m.length===0||m.indexOf(ht[s.getDay()])>-1)&&(d(t.setPosition)?po(o,n,i,e,t,s.getTime()):v.push([s.getTime()])),f++;if(d(t.setPosition)||as(v,o,n,i,e,t),a&&e.length+t.recExceptionCount>=a)return;r=re.getYearLastDate(s,t.interval),v=[]}}function nN(n,i,e,t){for(var r=re.getYearLastDate(n,0),s,a=or(n,t),o,l=[],h,c=t.day;Ti(r,i);){for(var u=0;u<t.yearDay.length;u++){if(h=t.yearDay[parseInt(u.toString(),10)],s=new Date(r.getTime()),(h===re.getLeapYearDaysCount()||h===-re.getLeapYearDaysCount())&&!re.isLeapYear(re.getFullYear(s),1)){s.setDate(s.getDate()+1);continue}s.setDate(s.getDate()+(h<0?re.getYearDaysCount(s,1)+1+h:h)),(c.length===0||c.indexOf(ht[s.getDay()])>-1)&&(t.setPosition==null?po(o,n,i,e,t,s.getTime()):l.push([s.getTime()]))}if(d(t.setPosition)||as(l,o,n,i,e,t),a&&e.length+t.recExceptionCount>=a)return;r=re.getYearLastDate(s,t.interval),l=[]}}function aN(n){return n.yearDay.length?"YEARDAY":n.weekNo.length?"WEEKNO":"MONTH"}function jb(n,i){var e={monthCollection:[],index:0,tempDate:new Date(n.getTime()),mainDate:new Date(n.getTime()),expectedCount:or(n,i),monthInit:0,dateCollection:[]};return i.month.length&&re.setMonth(e.tempDate,i.month[0],e.tempDate.getDate()),e}function oN(n,i,e,t){if(t.month.length){Ub(n,i,e,t);return}var r=jb(n,t),s;for(r.tempDate=r.mainDate=re.getMonthStartDate(r.tempDate);Ti(r.tempDate,i);){for(s=new Date(r.tempDate.getTime());re.isSameYear(s,r.tempDate)&&r.expectedCount&&e.length+t.recExceptionCount<=r.expectedCount;)if(t.month.length===0||t.month.length>0&&!re.checkMonth(r.tempDate,t.month))Yb(t,r,i,!1),r.beginDate=new Date(r.tempDate.getTime()),r.monthInit=$s(r.tempDate,t,r.monthInit,r.beginDate);else{re.setValidDate(r.tempDate,1,1),r.tempDate=dt(r.tempDate,t.day);break}if(r.tempDate.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),$u(r.dateCollection,r.state,n,i,e,t),re.isLastMonth(r.tempDate)&&(re.setValidDate(r.tempDate,1,1),r.tempDate=dt(r.tempDate,t.day)),r.expectedCount&&e.length+t.recExceptionCount>=r.expectedCount)return;r.tempDate.setFullYear(r.tempDate.getFullYear()+t.interval-1),r.tempDate=dt(r.tempDate,t.day),r.monthInit=$s(r.tempDate,t,r.monthInit,r.beginDate),r.dateCollection=[]}}function Ub(n,i,e,t){var r=jb(n,t);if(r.tempDate=r.mainDate=re.getMonthStartDate(r.tempDate),!((t.freq==="MONTHLY"&&t.interval===12||t.freq==="YEARLY")&&re.getMonthDaysCount(n)<t.monthDay[0]))for(;Ti(r.tempDate,i);){if(r.beginDate=new Date(r.tempDate.getTime()),Yb(t,r,i,!0,n,e),d(t.setPosition)||as(r.dateCollection,r.state,n,i,e,t),r.expectedCount&&e.length+t.recExceptionCount>=r.expectedCount)return;r.monthInit=$s(r.tempDate,t,r.monthInit,r.beginDate),r.dateCollection=[]}}function Yb(n,i,e,t,r,s){for(var a=0;a<n.monthDay.length;a++){i.date=n.monthDay[parseInt(a.toString(),10)],i.tempDate=re.getMonthStartDate(i.tempDate);var o=re.getMonthDaysCount(i.tempDate);if(i.date=i.date>0?i.date:o+i.date+1,fN(i.tempDate,i.date,i.mainDate)&&i.date>0){if(re.setDate(i.tempDate,i.date),e&&i.tempDate>e)return;(n.day.length===0||n.day.indexOf(ht[i.tempDate.getDay()])>-1)&&(t&&d(n.setPosition)&&i.expectedCount&&s.length+n.recExceptionCount<i.expectedCount?po(i.state,r,e,s,n,i.tempDate.getTime()):i.dateCollection.push([i.tempDate.getTime()]))}}}function $s(n,i,e,t,r){t===void 0&&(t=null);var s=t?t.getMonth():0,a=re.getMonthStartDate(n);return r=d(r)?i.interval:r,n.setFullYear(a.getFullYear()),n.setMonth(a.getMonth()),n.setDate(a.getDate()),i.month.length?(e++,e=e%i.month.length,re.setMonth(n,i.month[parseInt(e.toString(),10)],1),e===0&&re.addYears(n,r,i.month[0])):(t&&t.getFullYear()<n.getFullYear()&&(s=n.getMonth()-1),re.setValidDate(n,r,1,s,t)),e}function lN(n,i,e,t){var r=t.day,s=new Date(n.getTime());s=re.getMonthStartDate(s);var a=[],o=[],l=[],h,c,u=or(n,t),p=0,f;for(t.month.length&&re.setMonth(s,t.month[0],1),s=dt(s,t.day);Ti(s,i)&&u&&e.length+t.recExceptionCount<u;){var v=new Date(s.getTime()),m=r.map(function(j){return mp.test(j)});if(m.indexOf(!0)>-1){for(var g=0;g<=r.length-1;g++){var y=r[parseInt(g.toString(),10)].match(Sh),b=parseInt(y[0],10);for(s=new Date(s.getTime()),s=re.getMonthStartDate(s),s=dt(s,r),v.setFullYear(s.getFullYear(),s.getMonth(),s.getDate());re.isSameYear(v,s)&&re.isSameMonth(v,s);)y[y.length-1]===ht[v.getDay()]&&a.push([v.getTime()]),v.setDate(v.getDate()+1);if(v.setDate(v.getDate()-1),y[0].indexOf("-")>-1?h=a.length- -1*b:h=b-1,h=isNaN(h)?0:h,a.length>0&&(d(t.setPosition)?as(a,c,n,i,e,t,h):o=[pp(a,h,l)]),u&&e.length+t.recExceptionCount>=u)return;a=[]}d(t.setPosition)||(fp(o,c,n,i,e,t),l=[]),p=$s(s,t,p,f),s=dt(s,t.day),a=[]}else{var E=[],w=vN(r);v.setFullYear(s.getFullYear(),s.getMonth(),s.getDate());var A=new Date(s.getTime());for(f=new Date(s.getTime());re.isSameMonth(A,s);)E.push(s.getTime()),r.indexOf(ht[s.getDay()])>-1&&(a.push(E),E=[]),s.setDate(s.getDate()+w[ht[s.getDay()]]);if(h=t.setPosition<1?a.length+t.setPosition:t.setPosition-1,d(t.setPosition)){h=0;for(var D=[],N=0;N<a.length;N++)for(var x=0;x<a[parseInt(N.toString(),10)].length;x++)D.push(a[parseInt(N.toString(),10)][parseInt(x.toString(),10)]);a=[D]}if(a.length>0&&as(a,c,n,i,e,t,h),u&&e.length+t.recExceptionCount>=u)return;p=$s(s,t,p,f),s=dt(s,t.day),a=[]}}}function Gb(n,i,e,t){var r=t.day;if(r.length>1){lN(n,i,e,t);return}var s=new Date(n.getTime()),a=or(n,t),o=[],l,h=0;for(s=re.getMonthStartDate(s),t.month.length&&re.setMonth(s,t.month[0],1),s=dt(s,t.day);Ti(s,i)&&a&&e.length+t.recExceptionCount<a;){l=new Date(s.getTime());for(var c=new Date(s.getTime());re.isSameMonth(s,c);)o.push([c.getTime()]),c.setDate(c.getDate()+7);$b(o,n,i,e,t),h=$s(s,t,h,l),s=dt(s,t.day),o=[]}}function hN(n,i,e,t){var r=t.day,s=r.map(function(p){return mp.test(p)});if(r.length>1&&s.indexOf(!0)>-1){cN(n,i,e,t);return}else if(t.month.length&&r.length===1&&s.indexOf(!0)>-1){Gb(n,i,e,t);return}var a=new Date(n.getTime()),o,l=or(n,t),h=t.interval,c=[];for(t.month.length&&re.setMonth(a,t.month[0],a.getDate()),d(t.setPosition)&&t.month.length===0&&t.weekNo.length===0&&a.setFullYear(n.getFullYear(),0,1),a=re.getMonthStartDate(a),a=dt(a,t.day);Ti(a,i);){for(o=new Date(a.getTime());re.isSameYear(o,a)&&l&&e.length+t.recExceptionCount<=l;)for(o=new Date(a.getTime());re.isSameYear(o,a);)if(t.month.length===0||t.month.length>0&&!re.checkMonth(a,t.month))if(r.length>1){if(re.compareMonth(o,a)){re.setValidDate(a,1,1),a=dt(a,t.day);break}r.indexOf(ht[o.getDay()])>-1&&c.push([o.getTime()]),o.setDate(o.getDate()+1)}else{if(o.getFullYear()>a.getFullYear()){re.setValidDate(a,1,1),a=dt(a,t.day);break}var u=Kb(r[0]);ht[o.getDay()]===u&&new Date(o.getFullYear(),o.getMonth(),0)>new Date(n.getFullYear())&&c.push([o.getTime()]),o.setDate(o.getDate()+7)}else{re.setValidDate(a,1,1),a=dt(a,t.day);break}if(a.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()),$b(c,n,i,e,t),re.isLastMonth(a)&&(re.setValidDate(a,1,1),a=dt(a,t.day)),a.setFullYear(a.getFullYear()+h-1),l&&e.length+t.recExceptionCount>=l)return;a=dt(a,t.day),c=[]}}function cN(n,i,e,t){var r=t.day,s=or(n,t),a=new Date(n.getTime()),o=t.interval,l=[],h=[],c,u,p=0,f,v,m;a=re.getMonthStartDate(a);var g=[];for(t.month.length&&re.setMonth(a,t.month[0],1),a=dt(a,t.day);Ti(a,i);){f=new Date(a.getTime());for(var y=0;y<=t.month.length;y++)for(var b=0;b<=r.length-1;b++){for(a=re.getMonthStartDate(a),a=dt(a,t.day),l=[];re.isSameYear(f,a)&&s&&e.length+t.recExceptionCount<=s;)for(;re.isSameYear(f,a);){if(f=new Date(a.getTime()),t.month.length===0||t.month.length>0&&t.month[parseInt(y.toString(),10)]===re.getMonth(f)){var E=r[parseInt(b.toString(),10)].match(Sh),w=parseInt(E[0],10);for(v=new Date(a.getTime());re.isSameYear(v,a)&&re.isSameMonth(v,a);)E[E.length-1]===ht[v.getDay()]&&l.push([v.getTime()]),v.setDate(v.getDate()+1);v.setDate(v.getDate()-1),E[0].indexOf("-")>-1?c=l.length- -1*w:c=w-1,c=isNaN(c)?0:c}p=$s(a,t,p,m,1),a=dt(a,t.day)}if(a=b===0&&v?new Date(v.getTime()):new Date(f.getTime()),l.length>0&&(d(t.setPosition)?as(l,u,n,i,e,t,c):h=[pp(l,c,g)]),s&&e.length+t.recExceptionCount>=s)return}d(t.setPosition)||(fp(h,u,n,i,e,t),g=[]),re.isLastMonth(a)?(re.setValidDate(a,1,1),a.setFullYear(a.getFullYear()+o-1)):a.setFullYear(a.getFullYear()+o),a=dt(a,t.day),t.month.length&&re.setMonth(a,t.month[0],a.getDate())}}function uN(n,i){var e,t={monthCollection:[],index:0};if(i.length===1){var r=i[0].match(Sh),s=void 0;r.length>1?(s=parseInt(r[0],10),e=s<1?n.length+s:s-1):(e=0,n=Ku(n))}else e=0,n=Ku(n);return t.monthCollection=n,t.index=e,t}function $u(n,i,e,t,r,s){var a=s.setPosition<1?n.length+s.setPosition:s.setPosition-1;d(s.setPosition)&&(a=0,n=Ku(n)),n.length>0&&as(n,i,e,t,r,s,a)}function Ku(n){for(var i=[],e=0;e<n.length;e++)for(var t=0;t<n[parseInt(e.toString(),10)].length;t++)i.push(new Date(n[parseInt(e.toString(),10)][parseInt(t.toString(),10)]).getTime());return n=i.length>0?[i]:[],n}function $b(n,i,e,t,r){var s=r.day,a,o=[],l=[],h=uN(n,s);n=h.monthCollection;var c=h.index;r.setPosition!=null?(l=[pp(n,c,o)],fp(l,a,i,e,t,r)):n.length>0&&as(n,a,i,e,t,r,c),o=[]}function pp(n,i,e){for(var t=0;t<n[parseInt(i.toString(),10)].length;t++)e.push(n[parseInt(i.toString(),10)][parseInt(t.toString(),10)]);return e}function po(n,i,e,t,r,s){var a=or(i,r),o=new Date(s);n=bh(o,r),o>=i&&Ti(o,e)&&n&&a&&t.length+r.recExceptionCount<a&&dp(t,s)}function dN(n,i,e,t,r){var s=0,a=new Date(n,r.month[0]-1,1),o=new Date(n,r.month[0],0),l=o.getDate(),h=(a.getDay()-s+7)%7,c=h+l,u=Math.ceil(c/7)-1,p=e[parseInt(t.toString(),10)][parseInt(u.toString(),10)],f=new Date(p),v=bh(f,r);return v?u:u-1}function fp(n,i,e,t,r,s){if(n.length>0)for(var a=0;a<n.length;a++){n[parseInt(a.toString(),10)].sort();var o=s.day,l=o.map(function(p){return mp.test(p)}),h=s.freq==="YEARLY"&&s.validRules.indexOf("BYMONTH")>-1&&!(l.indexOf(!0)>-1)?dN(new Date(n[0][0]).getFullYear(),0,n,a,s):n[parseInt(a.toString(),10)].length+s.setPosition,c=s.setPosition<1?h:s.setPosition-1,u=n[parseInt(a.toString(),10)][parseInt(c.toString(),10)];po(i,e,t,r,s,u)}}function as(n,i,e,t,r,s,a){if(n.length>0){a=d(a)?s.setPosition<1?n.length+s.setPosition:s.setPosition-1:a,n[parseInt(a.toString(),10)].sort();for(var o=0;o<n[parseInt(a.toString(),10)].length;o++){var l=n[parseInt(a.toString(),10)][parseInt(o.toString(),10)];po(i,e,t,r,s,l)}}}function Ti(n,i){return i?n<=i:!0}function Kb(n){var i=n.replace(MN,"");return i}function pN(n,i){var e=[];return i.forEach(function(t){var r=t.match(Sh);r.length===2?e.push(r[1]):e.push(r[0])}),e.indexOf(ht[parseInt(n.toString(),10)])===-1}function dt(n,i){var e=new Date(n.getTime()),t;if(i.length>0){for(var r=[],s=0;s<=i.length-1;s++)t=Kb(i[parseInt(s.toString(),10)]),r.push(t);if(r.indexOf(ht[e.getDay()])===-1)do e.setDate(e.getDate()+1);while(r.indexOf(ht[e.getDay()])===-1)}return e}function vp(n){var i={freq:null,interval:1,count:null,until:null,day:[],wkst:null,month:[],weekNo:[],monthDay:[],yearDay:[],setPosition:null,validRules:[]},e=n.split(";"),t=[],r;if(e.forEach(function(a){switch(t=a.split("="),t[0]){case"UNTIL":r=t[1],i.until=up(r);break;case"BYDAY":i.day=t[1].split(","),i.validRules.push(t[0]);break;case"BYMONTHDAY":i.monthDay=t[1].split(",").map(Number),i.validRules.push(t[0]);break;case"BYMONTH":i.month=t[1].split(",").map(Number),i.validRules.push(t[0]);break;case"BYYEARDAY":i.yearDay=t[1].split(",").map(Number),i.validRules.push(t[0]);break;case"BYWEEKNO":i.weekNo=t[1].split(",").map(Number),i.validRules.push(t[0]);break;case"INTERVAL":i.interval=parseInt(t[1],10);break;case"COUNT":i.count=parseInt(t[1],10);break;case"BYSETPOS":i.setPosition=parseInt(t[1],10)>4?-1:parseInt(t[1],10);break;case"FREQ":i.freq=t[1];break;case"WKST":i.wkst=t[1];break}}),i.freq==="MONTHLY"&&i.monthDay.length===0){var s=i.validRules.indexOf("BYDAY");i.validRules.splice(s,1)}return i}function fN(n,i,e){var t=re.getMonthDaysCount(n);return i<=t&&n>=e}function vN(n){var i={};return n.forEach(function(e,t){if(t===n.length-1){for(var r=Cr.indexOf(e),s=r;s%7!==Cr.indexOf(n[0]);)s++;i[""+e]=s-r}else i[""+e]=Cr.indexOf(n[t+1])-Cr.indexOf(e)}),i}function mN(n,i){var e=i.slice(0),t,r=re.getMonthDaysCount(n);for(t=e.shift();t;){if(t<0&&(t=t+r+1),t===n.getDate())return!1;t=e.shift()}return!0}function gN(n,i){var e=i.slice(0),t,r=yN(n);for(t=e.shift();t;){if(t<0&&(t=t+re.getYearDaysCount(n,0)+1),t===r)return!1;t=e.shift()}return!0}function yN(n){Zc[re.getFullYear(n)]||(Zc[re.getFullYear(n)]=re.getYearLastDate(n,0));var i=Zc[re.getFullYear(n)],e=n.getTime()-i.getTime();return Math.ceil(e/it)}function bN(n){return n.monthDay.length&&!n.day.length?"date":!n.monthDay.length&&n.day.length?"day":"both"}function SN(n){var i=n.shift();n.push(i)}function EN(n){for(;Cr[0]!==n;)SN(Cr)}function bh(n,i){var e=!0,t=i.day,r=i.month,s=re.getExpectedDays(n,i.monthDay),a=i.yearDay;return i.validRules.forEach(function(o){switch(o){case"BYDAY":pN(n.getDay(),t)&&(e=!1);break;case"BYMONTH":re.checkMonth(n,r)&&(e=!1);break;case"BYMONTHDAY":mN(n,s)&&(e=!1);break;case"BYYEARDAY":gN(n,a)&&(e=!1);break}}),e}function Qu(n){return n==="Islamic"?new Wb:new Fb}var Zc={},bl,Cr=["SU","MO","TU","WE","TH","FR","SA"],Qb,Rs,re,ht=["SU","MO","TU","WE","TH","FR","SA"],CN=43,dg=["first","second","third","fourth","last"],wN="summaryTimes",Jc="summaryOn",TN="every",DN="summaryUntil",AN="summaryDay",xN="summaryWeek",kN="summaryMonth",IN="summaryYear",Xb={SU:"sun",MO:"mon",TU:"tue",WE:"wed",TH:"thu",FR:"fri",SA:"sat"},mp=/\d/,MN=/[^A-Z]+/,Sh=/[a-z]+|[^a-z]+/gi;function gn(n){return[n.getUTCFullYear(),Ta(n.getUTCMonth()+1),Ta(n.getUTCDate()),"T",Ta(n.getUTCHours()),Ta(n.getUTCMinutes()),Ta(n.getUTCSeconds()),"Z"].join("")}function Ta(n){return("0"+n).slice(-2)}var gp=function(){function n(i){this.slots=[],this.processedData=[],this.isDoubleTapped=!1,this.parent=i}return n.prototype.processData=function(i,e,t){var r=this,s=this.parent.activeView.startDate(),a=this.parent.activeView.endDate(),o=this.parent.eventFields,l=[],h=1,c=!1,u=this.parent.resourceBase?this.parent.resourceBase.resourceCollection:[];i.length>0&&d(i[0][o.id])&&(c=!0);for(var p=function(U){c&&(U[o.id]=h++),U=f.updateEventDateTime(U),e?f.processTimezoneChange(U,t):!f.parent.isPrinting&&!f.parent.uiStateValues.isPreventTimezone&&(U=f.processTimezone(U));for(var ne=0;ne<u.length;ne++)(U[u[parseInt(ne.toString(),10)].field]===null||U[u[parseInt(ne.toString(),10)].field]===0)&&(U[u[parseInt(ne.toString(),10)].field]=void 0);if(!d(U[o.recurrenceRule])&&U[o.recurrenceRule]===""&&(U[o.recurrenceRule]=null),!d(U[o.recurrenceRule])&&d(U[o.recurrenceID])&&!(f.parent.crudModule&&f.parent.crudModule.crudObj.isCrudAction))l=l.concat(f.generateOccurrence(U,null,!0));else if(f.parent.crudModule&&f.parent.crudModule.crudObj.isCrudAction)if(!d(U[o.recurrenceRule])&&d(U[o.recurrenceID]))for(var Ae=f.generateOccurrence(U,null,!0),ge=function(vt){var Wt=f.parent.eventsProcessed.filter(function(ni){return ni[o.startTime].getTime()-vt[o.startTime].getTime()===0&&ni[o.id]===vt[o.id]});vt.Guid=Wt.length>0?Wt[0].Guid:f.generateGuid(),l.push(vt)},Ve=0,rt=Ae;Ve<rt.length;Ve++){var pt=rt[Ve];ge(pt)}else{var ft=f.parent.eventsProcessed.filter(function(vt){return vt[r.parent.eventFields.id]===U[r.parent.eventFields.id]});U.Guid=ft.length>0?ft[0].Guid:f.generateGuid(),l.push(U)}else U.Guid=f.generateGuid(),l.push(U)},f=this,v=0,m=i;v<m.length;v++){var g=m[v];p(g)}this.parent.eventsProcessed=[];var y=l.filter(function(U){return!U[r.parent.eventFields.isBlock]});if(this.parent.eventsProcessed=this.filterEvents(s,a,y),!this.parent.activeViewOptions.allowOverlap&&this.parent.eventsProcessed.length>0){this.processedData=this.parent.eventsProcessed;for(var b=[],E=this.parent.eventFields,w=0,A=this.parent.eventsProcessed;w<A.length;w++){var D=A[w],N=this.findOverlappingData(D,b);if(!N)b.push(D);else if(!this.parent.eventSettings.sortComparer){var x=new Date(D[E.endTime]).getTime()-new Date(D[E.startTime]).getTime(),j=new Date(N[E.endTime]).getTime()-new Date(N[E.startTime]).getTime();if(x>j&&D[E.startTime]===N[E.startTime]||D[E.isAllDay]===!0){var q=b.indexOf(N);q!==-1&&b.splice(q,1),b.push(D)}}}this.parent.eventsProcessed=b}for(var L=l.filter(function(U){return U[r.parent.eventFields.isBlock]}),O=0,P=L;O<P.length;O++){var F=P[O];if(F[o.isAllDay]){var ie=W(new Date(F[o.startTime].getTime()))<W(new Date(F[o.endTime].getTime()));ie||(F[o.startTime]=W(F[o.startTime]),F[o.endTime]=Z(W(F[o.endTime]),1))}}return this.parent.blockProcessed=L,y},n.prototype.findOverlappingData=function(i,e){for(var t=this.parent.activeViewOptions.group.resources.length>0,r=t?this.parent.resourceBase.resourceCollection:[],s=t?r[r.length-1].field:null,a=this.parent.eventFields,o=new Date(i[a.startTime]),l=new Date(i[a.endTime]),h=0,c=e;h<c.length;h++){var u=c[h];if(o<u[a.endTime]&&l>u[a.startTime]&&u[a.id]!==i[a.id]&&(!t||d(s)||this.compareResourceValues(u[""+s],i[""+s])))return u}},n.prototype.isOverlapRange=function(i,e){var t=this;e===void 0&&(e=null);for(var r=this.parent.activeViewOptions.group.resources.length>0,s=r?this.parent.resourceBase.resourceCollection:[],a=r?s[s.length-1].field:null,o=Array.isArray(i)?i:[i],l=this.parent.eventFields,h=function(w){return t.processedData.filter(function(A){return w[l.startTime]<A[l.endTime]&&w[l.endTime]>A[l.startTime]&&A[l.id]!==w[l.id]&&(!r||d(a)||t.compareResourceValues(A[""+a],w[""+a]))})},c=[],u=!1,p=0,f=o;p<f.length;p++)for(var v=f[p],m=!d(v[l.recurrenceRule])&&(d(v[l.recurrenceID])||v[l.recurrenceID]===v[l.id])&&(d(v[l.recurrenceID])||e==="EditSeries")?this.generateOccurrence(v):[v],g=0,y=m;g<y.length;g++){var b=y[g],E=h(b);E.length>0&&c.push.apply(c,E),this.findOverlappingData(b,this.parent.eventsProcessed)&&(u=!0)}return this.parent.overlapAppointments=c,u},n.prototype.compareResourceValues=function(i,e){var t=function(r){return Array.isArray(r)?r[0]:r};return t(i)===t(e)},n.prototype.checkOverlap=function(i){return!this.parent.activeViewOptions.allowOverlap&&this.isOverlapRange(i)?(this.parent.quickPopup.openValidationError("overlapAlert",i),!0):!1},n.prototype.updateEventDateTime=function(i){return typeof i[this.parent.eventFields.startTime]=="string"&&(i[this.parent.eventFields.startTime]=Cm(i[this.parent.eventFields.startTime])),typeof i[this.parent.eventFields.endTime]=="string"&&(i[this.parent.eventFields.endTime]=Cm(i[this.parent.eventFields.endTime])),i},n.prototype.getProcessedEvents=function(i){i===void 0&&(i=this.parent.eventsData);for(var e=[],t=0,r=i;t<r.length;t++){var s=r[t];!d(s[this.parent.eventFields.recurrenceRule])&&d(s[this.parent.eventFields.recurrenceID])?e=e.concat(this.generateOccurrence(s)):e.push(s)}return e},n.prototype.timezonePropertyChange=function(i){var e=this.parent.eventsData.concat(this.parent.blockData),t=this.processData(e,!0,i);this.parent.notify(Fi,{processedData:t})},n.prototype.timezoneConvert=function(i){var e=this.parent.eventFields;if(i[e.startTimezone]=i[e.startTimezone]||i[e.endTimezone],i[e.endTimezone]=i[e.endTimezone]||i[e.startTimezone],this.parent.timezone){var t=i[e.startTimezone],r=i[e.endTimezone];i[e.startTime]=this.parent.tzModule.convert(i[e.startTime],this.parent.timezone,t),i[e.endTime]=this.parent.tzModule.convert(i[e.endTime],this.parent.timezone,r)}},n.prototype.processTimezoneChange=function(i,e){var t=this.parent.eventFields;i[t.isAllDay]||(e&&this.parent.timezone?(i[t.startTime]=this.parent.tzModule.convert(i[t.startTime],e,this.parent.timezone),i[t.endTime]=this.parent.tzModule.convert(i[t.endTime],e,this.parent.timezone)):!e&&this.parent.timezone?(i[t.startTime]=this.parent.tzModule.add(i[t.startTime],this.parent.timezone),i[t.endTime]=this.parent.tzModule.add(i[t.endTime],this.parent.timezone)):e&&!this.parent.timezone&&(i[t.startTime]=this.parent.tzModule.remove(i[t.startTime],e),i[t.endTime]=this.parent.tzModule.remove(i[t.endTime],e)))},n.prototype.processTimezone=function(i,e){e===void 0&&(e=!1);var t=this.parent.eventFields;if(i[t.isAllDay])return i;if(i[t.startTimezone]||i[t.endTimezone]){var r=i[t.startTimezone]||i[t.endTimezone],s=i[t.endTimezone]||i[t.startTimezone];e?this.parent.timezone?(i[t.startTime]=this.parent.tzModule.convert(i[t.startTime],r,this.parent.timezone),i[t.endTime]=this.parent.tzModule.convert(i[t.endTime],s,this.parent.timezone),i[t.startTime]=this.parent.tzModule.remove(i[t.startTime],this.parent.timezone),i[t.endTime]=this.parent.tzModule.remove(i[t.endTime],this.parent.timezone)):(i[t.startTime]=this.parent.tzModule.remove(i[t.startTime],r),i[t.endTime]=this.parent.tzModule.remove(i[t.endTime],s)):(i[t.startTime]=this.parent.tzModule.add(i[t.startTime],r),i[t.endTime]=this.parent.tzModule.add(i[t.endTime],s),this.parent.timezone&&(i[t.startTime]=this.parent.tzModule.convert(i[t.startTime],r,this.parent.timezone),i[t.endTime]=this.parent.tzModule.convert(i[t.endTime],s,this.parent.timezone)))}else this.parent.timezone&&(e?(i[t.startTime]=this.parent.tzModule.remove(i[t.startTime],this.parent.timezone),i[t.endTime]=this.parent.tzModule.remove(i[t.endTime],this.parent.timezone)):(i[t.startTime]=this.parent.tzModule.add(i[t.startTime],this.parent.timezone),i[t.endTime]=this.parent.tzModule.add(i[t.endTime],this.parent.timezone)));return i},n.prototype.filterBlockEvents=function(i){var e=this.parent.eventFields,t=i[e.startTime],r=i[e.endTime],s;if(this.parent.activeViewOptions.group.resources.length>0){var a=this.getGroupIndexFromEvent(i);s=this.parent.resourceBase.lastResourceLevel[parseInt(a.toString(),10)]}for(var o=$([],this.parent.blockProcessed,null,!0),l=0,h=o;l<h.length;l++){var c=h[l];if(c[e.isAllDay]){var u=c[e.endTime].getTime()>W(new Date(c[e.endTime].getTime())).getTime();u&&(c[e.startTime]=W(c[e.startTime]),c[e.endTime]=Z(W(c[e.endTime]),1))}}return this.filterEvents(t,r,o,s)},n.prototype.filterEvents=function(i,e,t,r){t===void 0&&(t=this.parent.eventsProcessed);var s=this.parent.dataModule.getStartEndQuery(i,e),a=new K({json:t}).executeLocal(new Se().where(s));return r&&(a=this.filterEventsByResource(r,a)),this.sortByTime(a)},n.prototype.filterEventsByRange=function(i,e,t){var r=this,s=[];return e&&t?s=this.filterEvents(e,t,i):e&&!t?s=i.filter(function(a){return a[r.parent.eventFields.startTime]>=e}):!e&&t?s=i.filter(function(a){return a[r.parent.eventFields.endTime]<=t}):s=i,this.sortByTime(s)},n.prototype.filterEventsByResource=function(i,e){e===void 0&&(e=this.parent.eventsProcessed);for(var t={},r=this.parent.resourceBase.resourceCollection,s=0;s<r.length;s++)t[r[parseInt(s.toString(),10)].field]=i.groupOrder[parseInt(s.toString(),10)];var a=Object.keys(t),o=e.filter(function(l){return a.every(function(h){return l[""+h]instanceof Array?l[""+h].indexOf(t[""+h])>-1:l[""+h]===t[""+h]})});return o},n.prototype.sortByTime=function(i){if(this.parent.eventSettings.sortComparer&&(typeof this.parent.eventSettings.sortComparer=="function"||typeof this.parent.eventSettings.sortComparer=="string"))i=this.customSorting(i);else{var e=this.parent.eventFields;i.sort(function(t,r){var s=t[e.startTime],a=r[e.startTime];return s.getTime()-a.getTime()})}return i},n.prototype.sortByDateTime=function(i){if(this.parent.eventSettings.sortComparer&&(typeof this.parent.eventSettings.sortComparer=="function"||typeof this.parent.eventSettings.sortComparer=="string"))i=this.customSorting(i);else{var e=this.parent.eventFields;i.sort(function(t,r){var s=t[e.startTime],a=r[e.startTime],o=t[e.endTime],l=r[e.endTime],h=o.getTime()-s.getTime(),c=l.getTime()-a.getTime();return s.getTime()-a.getTime()||c-h})}return i},n.prototype.customSorting=function(i){if(typeof this.parent.eventSettings.sortComparer=="function")return this.parent.eventSettings.sortComparer.call(this.parent,i);if(typeof this.parent.eventSettings.sortComparer=="string"){var e=this.parent.eventSettings.sortComparer.split("."),t=void 0;if(d(window)||(t=window[e[e.length-1]]),t)return t(i)}return i},n.prototype.getSmallestMissingNumber=function(i){for(var e=Math.max.apply(Math,i),t=0;t<e;t++)if(i.indexOf(t)===-1)return t;return e+1},n.prototype.splitEventByDay=function(i){var e=this.parent.eventFields,t=[],r=i[e.startTime],s=i[e.endTime],a=W(new Date(r.getTime()))<W(new Date(s.getTime()));if(a)for(var o=new Date(r.getTime()),l=Z(W(new Date(r.getTime())),1),h=s.getHours()===0&&s.getMinutes()===0?s:Z(s,1),c=1,u=Pu(r.getTime(),h.getTime());l<=s&&o.getTime()!==l.getTime();){var p=$({},i);p[e.startTime]=o,p[e.endTime]=l,p.data={index:c,count:u},p.Guid=this.generateGuid(),p.isSpanned=!0,t.push(p),o=l,W(new Date(o.getTime())).getTime()===W(new Date(s.getTime())).getTime()&&l.getTime()!==s.getTime()?(l=new Date(o.getTime()),l=new Date(l.setHours(s.getHours(),s.getMinutes(),s.getSeconds()))):l=Z(W(new Date(o.getTime())),1),c++}else t.push(i);return t},n.prototype.splitEvent=function(i,e){var t=this.parent.eventFields,r=W(i[t.startTime]).getTime(),s=W(i[t.endTime]).getTime();if(ts(i[t.endTime])<=0){var a=Z(W(i[t.endTime]),-1).getTime();s=r>a?r:a}var o=r,l=s,h=[];if(r!==s){r<e[0].getTime()&&(r=e[0].getTime()),s>e[e.length-1].getTime()&&(s=e[e.length-1].getTime());for(var c=r,u=0;u<this.slots.length;u++){var p=this.slots[parseInt(u.toString(),10)];if(this.parent.currentView==="WorkWeek"||this.parent.currentView==="TimelineWorkWeek"||this.parent.activeViewOptions.group.byDate||this.parent.activeViewOptions.showWeekend){for(var f=[],v=0,m=p;v<m.length;v++){var g=m[v];f.push(new Date(g))}var y=this.getRenderedDates(f);if(!d(y)&&y.length>0){p=[];for(var b=0,E=y;b<E.length;b++){var w=E[b];p.push(w.getTime())}}}if(typeof p=="number"){var a=p;p=[],p.push(a)}var A=p[0];if(c=c<=A&&s>=A?A:c,c>s||A>s)break;if(!this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.showWeekend&&this.parent.currentView!=="WorkWeek"&&this.parent.currentView!=="TimelineWorkWeek"){var D=p.indexOf(c);if(D!==-1){var N=p.indexOf(s),x=N!==-1;N=x?N:p.length-1;var j=N-D+1,q=p[parseInt(D.toString(),10)]!==o,L=p[parseInt(N.toString(),10)]!==l;if(h.push(this.cloneEventObject(i,p[parseInt(D.toString(),10)],p[parseInt(N.toString(),10)],j,q,L)),x)break}}else if(this.dateInRange(c,p[0],p[p.length-1])){for(var O=[],P=0;P<p.length;P++)this.dateInRange(p[parseInt(P.toString(),10)],o,l)&&O.push(p[parseInt(P.toString(),10)]);if(O.length>0)if(this.parent.activeViewOptions.group.byDate)for(var F=0,ie=O;F<ie.length;F++){var U=ie[F];h.push(this.cloneEventObject(i,U,U,1,U!==o,U!==l))}else{var q=O[0]!==o,L=O[O.length-1]!==l;h.push(this.cloneEventObject(i,O[0],O[O.length-1],O.length,q,L))}}}}else h.push(this.cloneEventObject(i,r,s,1,!1,!1));return h},n.prototype.cloneEventObject=function(i,e,t,r,s,a){var o=this.parent.eventFields,l=$({},i,null,!0),h={count:r,isLeft:s,isRight:a};return h[o.startTime]=i[o.startTime],h[o.endTime]=i[o.endTime],l.data=h,l[o.startTime]=new Date(e),l[o.endTime]=new Date(t),l},n.prototype.dateInRange=function(i,e,t){return e<=i&&i<=t},n.prototype.getSelectedEventElements=function(i){if(this.removeSelectedAppointmentClass(),this.parent.selectedElements.length<=0)this.parent.selectedElements.push(i);else{var e=this.parent.selectedElements.filter(function(h){return h.getAttribute("data-guid")===i.getAttribute("data-guid")});if(e.length<=0)for(var t='div[data-guid="'+i.getAttribute("data-guid")+'"]',r=[].slice.call(this.parent.element.querySelectorAll(t)),s=0,a=r;s<a.length;s++){var o=a[s];this.parent.selectedElements.push(o)}else{var l=this.parent.selectedElements.filter(function(h){return h.getAttribute("data-guid")!==i.getAttribute("data-guid")});this.parent.selectedElements=l}}return i&&this.parent.selectedElements.length>0&&this.addSelectedAppointments(this.parent.selectedElements,!1),this.parent.selectedElements},n.prototype.getSelectedEvents=function(){var i=this,e=[],t=[],r=[].slice.call(this.parent.element.querySelectorAll("."+fn));return r.filter(function(s){var a=e.filter(function(o){return o.Guid===s.getAttribute("data-guid")});a.length===0&&e.push(i.getEventByGuid(s.getAttribute("data-guid"))),t.push(s)}),{event:e.length>1?e:e[0],element:t.length>1?t:t[0]}},n.prototype.removeSelectedAppointmentClass=function(){var i=this.getSelectedAppointments();I(i,fn),(this.parent.currentView==="Agenda"||this.parent.currentView==="MonthAgenda")&&I(i,Xl)},n.prototype.addSelectedAppointments=function(i,e){this.parent.currentView!=="MonthAgenda"&&this.parent.removeSelectedClass(),T(i,fn),i.length>0&&!e&&i[i.length-1].focus()},n.prototype.getSelectedAppointments=function(){return[].slice.call(this.parent.element.querySelectorAll("."+fn+",."+he+":focus"))},n.prototype.focusElement=function(i){if(!(this.parent.eventWindow.dialogObject&&this.parent.eventWindow.dialogObject.visible)){var e=document.activeElement,t=this.parent.getSelectedCells();if(t.length>0&&(e&&(this.parent.element.contains(e)||t.indexOf(e)!==-1)||i)){if(this.parent.keyboardInteractionModule){var r=!d(this.parent.activeCellsData)&&this.parent.activeCellsData.element||t[t.length-1];this.parent.keyboardInteractionModule.selectCells(r instanceof Array,r)}return}var s=this.getSelectedAppointments();if(s.length>0){if(this.parent.activeEventData&&this.parent.activeEventData.element&&s.indexOf(this.parent.activeEventData.element)>-1){this.parent.activeEventData.element.focus();return}s[s.length-1].focus();return}}},n.prototype.selectWorkCellByTime=function(i){var e;if(this.parent.currentView==="Agenda"||this.parent.currentView==="MonthAgenda")return e;if(i.length>0){var t=i[i.length-1],r=t[this.parent.eventFields.startTime],s=void 0,a=this.isAllDayAppointment(t);this.parent.currentView==="Month"||a||!this.parent.activeViewOptions.timeScale.enable?s=new Date(+r).setHours(0,0,0,0):s=this.findNearestSlot(r);var o=void 0;a&&["Day","Week","WorkWeek"].indexOf(this.parent.currentView)!==-1?o=this.parent.getAllDayRow():o=this.parent.getContentTable();var l='[data-date="'+new Date(s).getTime()+'"]';if(!d(this.parent.activeViewOptions.group.resources)&&this.parent.activeViewOptions.group.resources.length>0&&(l+='[data-group-index="'+this.getGroupIndexFromEvent(t)+'"]'),e=o.querySelector(l),e)return this.parent.activeCellsData=this.parent.getCellDetails(e),this.parent.keyboardInteractionModule&&this.parent.keyboardInteractionModule.selectCells(!1,e),e}return e},n.prototype.findNearestSlot=function(i){var e=this.parent.activeViewOptions.timeScale.interval*at,t=e/this.parent.activeViewOptions.timeScale.slotCount,r=Math.round(it/t),s=new Date(i);s.setHours(0,0,0,0);var a=Array.from({length:r},function(l,h){var c=new Date(s.getTime()+h*t);return c}),o=a.reduce(function(l,h){var c=Math.abs(i.getTime()-h.getTime());return!l||c<Math.abs(i.getTime()-l.getTime())?h:l},null);return Math.trunc(o.getTime()/1e3)*1e3},n.prototype.getGroupIndexFromEvent=function(i){for(var e,t,r,s,a=this.parent.resourceBase.resourceCollection.length-1;a>=0;a--){var o=i[this.parent.resourceBase.resourceCollection[parseInt(a.toString(),10)].field];if(!d(o)){t=this.parent.resourceBase.resourceCollection[parseInt(a.toString(),10)],e=a,r=t.name,s=t.field;break}}d(r)&&d(e)&&(r=this.parent.resourceCollection.slice(-1)[0].name,e=this.parent.resourceCollection.length-1,s=this.parent.resourceCollection.slice(-1)[0].field,t=this.parent.resourceCollection.filter(function(c,u){return c.name===r?(e=u,c):null})[0]);var l=i[""+s]instanceof Array?i[""+s][0]:i[""+s];if(e>0){var h=this.parent.resourceCollection[e-1].field;return this.parent.resourceBase.getIndexFromResourceId(l,r,t,i,h)}else return this.parent.resourceBase.getIndexFromResourceId(l,r,t)},n.prototype.isAllDayAppointment=function(i){var e=this.parent.eventFields,t=i[e.isAllDay],r=(Dt(i[e.endTime])-Dt(i[e.startTime]))/it>=1;return!!(t||this.parent.eventSettings.spannedEventPlacement!=="TimeSlot"&&r)},n.prototype.addEventListener=function(){this.parent.on(Or,this.appointmentBorderRemove,this)},n.prototype.removeEventListener=function(){this.parent.off(Or,this.appointmentBorderRemove)},n.prototype.appointmentBorderRemove=function(i){var e=i.event.target;if(M(e,"."+he))this.parent.currentView!=="MonthAgenda"&&this.parent.removeSelectedClass();else if(!M(e,"."+Je)){if(this.parent.uiStateValues.isTapHold&&M(e,"."+se+",."+Me))return;this.parent.uiStateValues.isTapHold=!1,this.removeSelectedAppointmentClass(),this.parent.selectedElements=[]}},n.prototype.wireAppointmentEvents=function(i,e,t){t===void 0&&(t=!1);var r=d(e)?!1:e[this.parent.eventFields.isReadonly];C.add(i,"click",this.eventClick,this),!this.parent.isAdaptive&&!this.parent.activeViewOptions.readonly&&!r&&(C.add(i,"touchend",this.eventTouchClick,this),C.add(i,"dblclick",this.eventDoubleClick,this)),!this.parent.activeViewOptions.readonly&&!r&&!t&&(this.parent.resizeModule&&this.parent.resizeModule.wireResizeEvent(i),this.parent.dragAndDropModule&&this.parent.dragAndDropModule.wireDragEvent(i))},n.prototype.eventTouchClick=function(i){var e=this;if(this.parent.uiStateValues.isTouchScroll||this.parent.uiStateValues.isTapHold||this.parent.uiStateValues.action){this.parent.uiStateValues.isTouchScroll=this.parent.uiStateValues.isTapHold=!1;return}setTimeout(function(){return e.isDoubleTapped=!1},250),i.preventDefault(),this.isDoubleTapped?this.eventDoubleClick(i):this.isDoubleTapped||(this.isDoubleTapped=!0,this.eventClick(i))},n.prototype.renderResizeHandler=function(i,e,t){if(!(!this.parent.resizeModule||!this.parent.allowResizing||this.parent.activeViewOptions.readonly||t))for(var r=0,s=Object.keys(e);r<s.length;r++){var a=s[r],o=R("div",{className:Nb});switch(a){case"isLeft":e.isLeft||(o.appendChild(R("div",{className:"e-left-right-resize"})),T([o],this.parent.enableRtl?Hm:Pm),yt([o],i));break;case"isRight":e.isRight||(o.appendChild(R("div",{className:"e-left-right-resize"})),T([o],this.parent.enableRtl?Pm:Hm),oe([o],i));break;case"isTop":e.isTop||(o.appendChild(R("div",{className:"e-top-bottom-resize"})),T([o],xR),yt([o],i));break;case"isBottom":e.isBottom||(o.appendChild(R("div",{className:"e-top-bottom-resize"})),T([o],kR),oe([o],i));break}}},n.prototype.eventClick=function(i){var e=this,t=i.target;if(!(t.classList.contains(DR)||t.classList.contains(AR)||t.classList.contains(Jt)))if((i.ctrlKey||i.metaKey)&&i.which===1&&this.parent.keyboardInteractionModule){this.parent.quickPopup.quickPopup.hide(),this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll("."+fn));var r=M(i.target,"."+he);this.getSelectedEventElements(r),this.activeEventData(i,!1);var s={data:this.parent.activeEventData.event,element:this.parent.activeEventData.element,event:i,requestType:"eventSelect"};this.parent.trigger(ja,s);var a=$(this.parent.activeEventData,{cancel:!1,originalEvent:i});this.parent.trigger(On,a)}else{this.removeSelectedAppointmentClass(),this.activeEventData(i,!0);var o={data:this.parent.activeEventData.event,element:this.parent.activeEventData.element,event:i,requestType:"eventSelect"};this.parent.trigger(ja,o);var a=$(this.parent.activeEventData,{cancel:!1,originalEvent:i});this.parent.trigger(On,a,function(h){if(h.cancel)e.removeSelectedAppointmentClass(),e.parent.selectedElements=[],e.parent.quickPopup&&e.parent.quickPopup.quickPopupHide();else if((e.parent.currentView==="Agenda"||e.parent.currentView==="MonthAgenda")&&T([e.parent.activeEventData.element],Xl),e.parent.allowInline){var c={data:h.event,element:h.element,type:"Event"};e.parent.notify(Fn,c)}else e.parent.notify(On,h)})}},n.prototype.eventDoubleClick=function(i){var e=this;if(this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(!0),i.type==="touchend"&&this.activeEventData(i,!0),this.removeSelectedAppointmentClass(),this.parent.selectedElements=[],!(this.parent.activeEventData.element.classList.contains(Ka)||this.parent.activeEventData.element.querySelector("."+Jt))){var t=$(this.parent.activeEventData,{cancel:!1,originalEvent:i});this.parent.trigger(WO,t,function(r){!r.cancel&&e.parent.eventSettings.allowEditing&&(!d(e.parent.activeEventData.event)&&d(e.parent.activeEventData.event[e.parent.eventFields.recurrenceID])?e.parent.eventWindow.openEditor(e.parent.activeEventData.event,"Save"):(e.parent.currentAction="EditOccurrence",e.parent.quickPopup.openRecurrenceAlert()))})}},n.prototype.getEventByGuid=function(i){return this.parent.eventsProcessed.filter(function(e){return e.Guid===i})[0]},n.prototype.getEventById=function(i){var e=this;return this.parent.eventsData.filter(function(t){return t[e.parent.eventFields.id]===i})[0]},n.prototype.generateGuid=function(){var i=new Uint8Array(32);window.crypto.getRandomValues(i);var e=0;return"xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx".replace(/[xy]/g,function(t){var r=i[e++]&15,s=t==="x"?r:r&3|8;return s.toString(16)})},n.prototype.getEventIDType=function(){return this.parent.eventsData.length!==0?typeof this.parent.eventsData[0][this.parent.eventFields.id]:this.parent.blockData.length!==0?typeof this.parent.blockData[0][this.parent.eventFields.id]:"string"},n.prototype.getEventMaxID=function(i){var e=this;if(this.parent.eventsData.length<1&&this.parent.blockData.length<1)return 1;var t,r=this.getEventIDType();if(r==="string"&&(t=this.generateGuid()),r==="number"){var s=this.parent.eventsData.concat(this.parent.blockData),a=s.map(function(l){return l[e.parent.eventFields.id]}),o=a.reduce(function(l,h){return Math.max(l,h)});o=d(i)?o:o+i,t=o+1}return t},n.prototype.activeEventData=function(i,e){var t=this,r=M(i.target,"."+he),s=r.getAttribute("data-guid");e&&(this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+s+'"]')),!0),r.focus());var a=this.getEventByGuid(s);a&&a.isSpanned&&(a=this.parent.eventsData.filter(function(o){return o[t.parent.eventFields.id]===a[t.parent.eventFields.id]})[0]),this.parent.activeEventData={event:a,element:r}},n.prototype.generateOccurrence=function(i,e,t){var r=this,s=i[this.parent.eventFields.startTime],a=i[this.parent.eventFields.endTime],o=i[this.parent.eventFields.recurrenceRule],l=a.getTimezoneOffset()-s.getTimezoneOffset(),h=a.getTime()-s.getTime()-l*6e4;e=new Date((e||this.parent.activeView.startDate()).getTime()-h);var c=i[this.parent.eventFields.recurrenceException],u;this.parent.currentView!=="Agenda"&&t&&(u=ZO(e,this.parent.activeView.endDate())+1);var p=this.parent.timezone||this.parent.tzModule.getLocalTimezoneName(),f=this.parent.activeViewOptions.firstDayOfWeek,v=this.parent.calendarMode;i[this.parent.eventFields.recurrenceRule]&&this.isDayBasedRecurrence(i)&&this.parent.timezone&&i[this.parent.eventFields.startTimezone]&&i[this.parent.eventFields.endTimezone]&&(s=this.parent.tzModule.convert(i[this.parent.eventFields.startTime],this.parent.timezone,i[this.parent.eventFields.startTimezone]));var m=cp(s,o,c,f,u,e,v,p);this.parent.currentView==="Agenda"&&o.indexOf("COUNT")===-1&&o.indexOf("UNTIL")===-1&&(d(i.generatedDates)?i.generatedDates={start:new Date(m[0]),end:new Date(m[m.length-1])}:(m[0]<i.generatedDates.start.getTime()&&(i.generatedDates.start=new Date(m[0])),m[m.length-1]>i.generatedDates.end.getTime()&&(i.generatedDates.end=new Date(m[m.length-1]))));var g=!1,y=[];i[this.parent.eventFields.recurrenceRule]&&this.isDayBasedRecurrence(i)&&this.parent.timezone&&i[this.parent.eventFields.startTimezone]&&i[this.parent.eventFields.endTimezone]&&(g=!0,y.push.apply(y,m.map(function(N){return r.parent.tzModule.convert(new Date(N),i[r.parent.eventFields.startTimezone],r.parent.timezone).getTime()}))),y=y.length>0?y:m;for(var b=[],E=0,w=y;E<w.length;E++){var A=w[E],D=$({},i,null,!0);A=g?A:this.getDSTAdjustedTime(A,D),D[this.parent.eventFields.startTime]=new Date(A),D[this.parent.eventFields.endTime]=new Date(new Date(A).setMilliseconds(h)),D[this.parent.eventFields.recurrenceID]=D[this.parent.eventFields.id],delete D[this.parent.eventFields.recurrenceException],delete D[this.parent.eventFields.followingID],D.Guid=this.generateGuid(),b.push(D)}return b},n.prototype.isDayBasedRecurrence=function(i){return i[this.parent.eventFields.recurrenceRule].includes("BYMONTHDAY")||i[this.parent.eventFields.recurrenceRule].includes("BYDAY")},n.prototype.getDSTAdjustedTime=function(i,e){var t=i;if(this.parent.timezone&&(e[this.parent.eventFields.startTimezone]||e[this.parent.eventFields.endTimezone])){var r=this.getDSTDiff(e[this.parent.eventFields.startTime],new Date(i),e[this.parent.eventFields.startTimezone]),s=this.getDSTDiff(e[this.parent.eventFields.startTime],new Date(i),this.parent.timezone);t=new Date(i).getTime()-(r-s)*6e4}return t},n.prototype.getDSTDiff=function(i,e,t){var r=this.parent.tzModule.offset(new Date(i),t),s=this.parent.tzModule.offset(new Date(e),t);return r-s},n.prototype.getParentEvent=function(i,e){e===void 0&&(e=!1);var t;do i=this.getFollowingEvent(i),i&&(t=$({},i,null,!0));while(i&&e);if(e&&t){var r=this.getEventCollections(t),s=r.follow.slice(-1)[0];r.occurrence.length>0&&!t[this.parent.eventFields.recurrenceException]&&(s=r.occurrence.slice(-1)[0]),s&&(t[this.parent.eventFields.recurrenceRule]=s[this.parent.eventFields.recurrenceRule])}return t},n.prototype.getEventCollections=function(i,e){var t=[],r=[],s=i;do s=this.getFollowingEvent(s,!0),s&&t.push(s),r=r.concat(this.getOccurrenceEvent(s||i));while(s);var a={};if(e){var o=this.parent.eventFields;a={follow:t.filter(function(l){return l[o.startTime]>=e[o.startTime]}),occurrence:r.filter(function(l){return l[o.startTime]>=e[o.startTime]})}}else a={follow:t,occurrence:r};return a},n.prototype.getFollowingEvent=function(i,e){var t=this.parent.eventFields,r;e?r=i[t.id]:r=i[t.recurrenceID]||i[t.followingID];var s=this.parent.eventsData.filter(function(a){return a[e?t.followingID:t.id]===r});return s.shift()},n.prototype.isFollowingEvent=function(i,e){var t=i[this.parent.eventFields.startTime],r=e[this.parent.eventFields.startTime];return t.getHours()===r.getHours()&&t.getMinutes()===r.getMinutes()&&t.getSeconds()===r.getSeconds()},n.prototype.getOccurrenceEvent=function(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=e?"Guid":t?this.parent.eventFields.followingID:this.parent.eventFields.recurrenceID,s=e?"Guid":this.parent.eventFields.id,a=e?this.parent.eventsProcessed:this.parent.eventsData;return a.filter(function(o){return o[""+r]===i[""+s]})},n.prototype.getOccurrencesByID=function(i){for(var e=this.parent.eventFields,t=[],r=this.parent.eventsData.filter(function(l){return l[e.id]===i}),s=0,a=r;s<a.length;s++){var o=a[s];d(o[e.recurrenceRule])||(t=t.concat(this.generateOccurrence(o)))}return t},n.prototype.getOccurrencesByRange=function(i,e){for(var t=this.parent.eventFields,r=[],s=0,a=this.parent.eventsData;s<a.length;s++){var o=a[s];d(o[t.recurrenceRule])||(r=r.concat(this.generateOccurrence(o)))}var l=r.filter(function(h){return h[t.startTime]>=i&&h[t.endTime]<=e&&!d(h[t.recurrenceID])});return l},n.prototype.getDeletedOccurrences=function(i){var e=this.parent.eventFields,t,r=[];if(typeof i=="string"||typeof i=="number"?t=this.parent.eventsData.filter(function(c){return c[e.id]===i})[0]:t=$({},i,null,!0),t[e.recurrenceException])for(var s=t[e.recurrenceException].split(","),a=function(c,u){var p=o.parent.eventsData.filter(function(b){return b[e.recurrenceID]===t[e.id]&&b[e.recurrenceException]===s[parseInt(c.toString(),10)]});if(p.length===0){var f=up(s[parseInt(c.toString(),10)]),v=$({},i,null,!0);v[e.recurrenceID]=t[e.id],delete v[e.followingID],v[e.recurrenceException]=s[parseInt(c.toString(),10)];var m=new Date(f.getTime()),g=t[e.endTime].getTime()-t[e.startTime].getTime(),y=new Date(m.getTime());y.setMilliseconds(g),v[e.startTime]=new Date(m.getTime()),v[e.endTime]=new Date(y.getTime()),r.push(v)}},o=this,l=0,h=s.length;l<h;l++)a(l,h);return r},n.prototype.applyResourceColor=function(i,e,t,r,s){if(this.parent.resourceBase){var a=function(l,h){l=l.replace("#","");var c=parseInt(l.substring(0,l.length/3),16),u=parseInt(l.substring(l.length/3,2*l.length/3),16),p=parseInt(l.substring(2*l.length/3,3*l.length/3),16);return"rgba("+c+", "+u+", "+p+", "+h+")"},o=this.parent.resourceBase.getResourceColor(e,r);o&&(i.style[t]=d(s)?o:a(o,s))}},n.prototype.createBlockAppointmentElement=function(i,e,t){var r=i[this.parent.eventFields.subject]||this.parent.eventSettings.fields.subject.default,s=R("div",{className:_n,attrs:{"data-id":"Appointment_"+i[this.parent.eventFields.id],"aria-disabled":"true"}}),a;if(d(this.parent.activeViewOptions.eventTemplate)){var u=R("div",{className:Ke});this.parent.sanitize(r,u),a=[u]}else{var o=this.parent.element.id+"_",l=this.parent.activeViewOptions.eventTemplateName,h=o+l+"eventTemplate",c=t&&this.parent.currentView.indexOf("Year")===-1?this.parent.getEventTemplateName(e):"eventTemplate";a=this.parent.getAppointmentTemplate()(i,this.parent,c,h,!1,void 0,void 0,this.parent.root)}return oe(a,s),this.setWrapperAttributes(s,e),s},n.prototype.setWrapperAttributes=function(i,e){d(this.cssClass)||T([i],this.cssClass),this.parent.activeViewOptions.group.resources.length>0&&i.setAttribute("data-group-index",e.toString())},n.prototype.getReadonlyAttribute=function(i){return(i[this.parent.eventFields.isReadonly]||this.parent.readonly).toString()},n.prototype.isBlockRange=function(i){for(var e=i instanceof Array?i:[i],t=!1,r=this.parent.eventFields,s=0,a=e;s<a.length;s++){var o=a[s],l=[];!d(o[r.recurrenceRule])&&(d(o[r.recurrenceID])||o[r.id]===o[r.recurrenceID])?l=this.generateOccurrence(o):l.push(o);for(var h=0,c=l;h<c.length;h++){var u=c[h],p=this.filterBlockEvents(u);if(p.length>0){t=!0;break}}}return this.parent.uiStateValues.isBlock=t,t},n.prototype.getFilterEventsList=function(i,e){return new K(i).executeLocal(new Se().where(e))},n.prototype.getSeriesEvents=function(i,e){var t=this.parent.eventFields;e=d(e)?i[t.startTime]:e;var r,s,a=[],o=i[t.id],l=i[t.followingID],h,c=this.parent.currentAction==="EditSeries"?"greaterthan":"greaterthanorequal";do h=new ut(t.followingID,"equal",o).and(new ut(t.startTime,c,e)),s=this.getFilterEventsList(this.parent.eventsData,h),r=s.slice(-1)[0],!d(r)&&r[t.id]!==l?(a.push(r),o=r[t.id],l=r[t.followingID]):l=null;while(s.length===1&&!d(r[t.followingID]));return a},n.prototype.getEditedOccurrences=function(i,e){for(var t=this.parent.eventFields,r=[],s,a=0,o=i;a<o.length;a++){var l=o[a],h=new ut(t.recurrenceID,"equal",l[t.id]).or(new ut(t.recurrenceID,"equal",l[t.followingID]).and(new ut(t.recurrenceID,"notequal",void 0)).and(new ut(t.recurrenceID,"notequal",null)));(this.parent.currentAction==="EditFollowingEvents"||this.parent.currentAction==="DeleteFollowingEvents")&&(h=h.and(new ut(t.startTime,"greaterthanorequal",e))),s=this.getFilterEventsList(this.parent.eventsData,h),r=r.concat(s)}return r},n.prototype.getRenderedDates=function(i){var e=0,t=i.length,r,s=d(this.parent.maxDate)?new Date(2099,11,31):this.parent.maxDate,a=d(this.parent.minDate)?new Date(1900,0,1):this.parent.minDate;if(i[0]<a&&i[i.length-1]>s){for(var o=0;o<i.length;o++)W(i[parseInt(o.toString(),10)]).getTime()===W(new Date(a)).getTime()&&(e=o),W(i[parseInt(o.toString(),10)]).getTime()===W(new Date(s)).getTime()&&(t=o);r=i.filter(function(l){return l>=i[parseInt(e.toString(),10)]&&l<=i[parseInt(t.toString(),10)]})}return r},n.prototype.isValidEvent=function(i,e,t,r){var s=t.getTime()>r.startHour.getTime()&&e.getTime()<r.endHour.getTime(),a=r.startHour.getTime()<=e.getTime()&&i[this.parent.eventFields.startTime].getTime()>=r.startHour.getTime()&&i[this.parent.eventFields.endTime].getTime()<r.endHour.getTime()&&e.getTime()===t.getTime();return s||a},n.prototype.allDayExpandScroll=function(i){var e=0,t=[].slice.call(this.parent.element.querySelectorAll("."+hp));t.forEach(function(r){var s=[].slice.call(r.children);s.forEach(function(a){a.style.top=e+"px"}),e+=r.offsetHeight}),e=i.offsetHeight-e,this.parent.element.querySelector("."+Me).style.height=e/12+"em",this.parent.uiStateValues.expand?T([i],oo):I([i],oo)},n.prototype.updateEventMinimumDuration=function(i,e,t){if(e.getTime()<t.getTime()||e.getTime()===t.getTime()&&i.startHour.getTime()<t.getTime()&&i.endHour.getTime()>e.getTime()&&this.parent.currentView.indexOf("Timeline")===-1){var r=(Dt(t)-Dt(e))/at;if(r<this.parent.eventSettings.minimumEventDuration){var s=new Date(e);if(s.setMinutes(s.getMinutes()+this.parent.eventSettings.minimumEventDuration),t=s,t.getTime()>i.endHour.getTime()){var a=new Date(i.endHour.getTime());a.setMinutes(a.getMinutes()-this.parent.eventSettings.minimumEventDuration),e=a,t=i.endHour}}}return{startDate:e,endDate:t}},n.prototype.createEventWrapper=function(i,e){i===void 0&&(i=""),e===void 0&&(e=0);for(var t=R("tr"),r=this.parent.activeView.colLevels.slice(-1)[0],s=this.parent.isReact&&this.parent.activeViewOptions.eventTemplate?" "+Ba:"",a=0,o=r.length;a<o;a++){var l=r[parseInt(a.toString(),10)],h=R("td",{className:i==="allDay"?Tn+s:i==="timeIndicator"?Db:Ab+s,attrs:{"data-date":l.date.getTime().toString()}});if(d(l.groupIndex)||h.setAttribute("data-group-index",l.groupIndex.toString()),i===""){var c=R("div",{id:ir+"-"+e.toString(),className:ir});h.appendChild(c)}t.appendChild(h),e=e+1}return t},n.prototype.getPageCoordinates=function(i){if(d(i))return i;var e=i.event;return e&&e.changedTouches?e.changedTouches[0]:i.changedTouches?i.changedTouches[0]:e||i},n.prototype.renderSpannedIcon=function(i,e){var t=R("div",{className:Zl+" "+qe});if(e.isLeft){var r=t.cloneNode();T([r],Ob),yt([r],i)}if(e.isRight){var s=t.cloneNode();T([s],Rb),oe([s],i)}if(e.isTop){var a=t.cloneNode();T([a],wR),yt([a],i)}if(e.isBottom){var o=t.cloneNode();T([o],TR),oe([o],i)}},n.prototype.addCellHeight=function(i,e,t,r,s,a){if(a===void 0&&(a=!0),this.parent.activeViewOptions.maxEventsPerRow&&!this.parent.rowAutoHeight){for(var o=[].slice.call(this.parent.element.querySelectorAll(i)),l=this.parent.showWeekNumber?[].slice.call(this.parent.element.querySelectorAll("."+$l+" tbody tr")):[],h=0,c=o;h<c.length;h++){var u=c[h],p=this.parent.activeViewOptions.maxEventsPerRow*(e+(this.parent.currentView==="Month"?t:2))+r+s;l.length>0&&de(l[o.indexOf(u)].firstElementChild,{height:p+"px"}),de(u.firstElementChild,{height:p+"px"})}!this.parent.enablePersistence&&!this.parent.activeViewOptions.allowVirtualScrolling&&a&&this.parent.notify(si,{})}},n.prototype.unWireEvents=function(){for(var i=[].slice.call(this.parent.element.querySelectorAll("."+he)),e=0,t=i;e<t.length;e++){var r=t[e];C.clearEvents(r)}},n.prototype.destroy=function(){this.unWireEvents(),this.parent=null},n}(),ON=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Zb=function(n){ON(i,n);function i(e){var t=n.call(this,e)||this;return t.dateRender=[],t.renderedEvents=[],t.renderedAllDayEvents=[],t.overlapEvents=[],t.moreEvents=[],t.overlapList=[],t.allDayEvents=[],t.slotCount=t.parent.activeViewOptions.timeScale.slotCount,t.interval=t.parent.activeViewOptions.timeScale.interval,t.allDayLevel=0,t.startHour=t.getStartEndHours(t.parent.activeViewOptions.startHour),t.endHour=t.getStartEndHours(t.parent.activeViewOptions.endHour),t.element=t.parent.activeView.getPanel(),t.fields=t.parent.eventFields,t.animation=new wi({progress:t.animationUiUpdate.bind(t)}),t.addEventListener(),t}return i.prototype.renderAppointments=function(){var e=this;if(!d(this.parent)){this.parent.dragAndDropModule&&this.parent.dragAndDropModule.setDragArea(),this.isResourceEventTemplate=this.parent.isSpecificResourceEvents();for(var t=[].slice.call(this.parent.element.querySelectorAll("."+_n+",."+he+",."+va)),r=!!(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction),s=function(f){if(e.parent.isReact&&!d(e.parent.activeViewOptions.eventTemplate)){var v=M(f,"."+Ab+",."+Tn);v&&!v.classList.contains(Ba)&&T([v],Ba)}},a=0,o=t;a<o.length;a++){var l=o[a];if(r&&!(l.classList.contains(ju)||l.classList.contains(va)))for(var h=parseInt(l.getAttribute("data-group-index"),10),c=0,u=this.parent.crudModule.crudObj.sourceEvent.length;c<u;c++)(h===this.parent.crudModule.crudObj.sourceEvent[parseInt(c.toString(),10)].groupIndex||h===this.parent.crudModule.crudObj.targetEvent[parseInt(c.toString(),10)].groupIndex)&&(s(l),ve(l));else s(l),ve(l)}if(this.element.querySelector("."+se)&&(this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateFocusedWorkCell(),this.allDayElement=[].slice.call(this.element.querySelectorAll("."+Me)),this.setAllDayRowHeight(0),!(this.parent.eventsProcessed.length===0&&this.parent.blockProcessed.length===0))){var p=this.element.querySelector("."+$a);C.remove(p,"click",this.rowExpandCollapse),C.add(p,"click",this.rowExpandCollapse,this),this.renderedEvents=[],this.renderedAllDayEvents=[],this.initializeValues(),this.processBlockEvents(),this.renderEvents("normalEvents"),this.allDayEvents.length>0&&(this.allDayEvents=this.allDayEvents.filter(function(f,v,m){return v===m.map(function(g){return g.Guid}).indexOf(f.Guid)}),I(this.allDayElement,$c),this.slots.push(this.parent.activeView.renderDates.map(function(f){return+f})),this.renderEvents("allDayEvents"),this.animation.animate(this.allDayElement[0])),this.parent.notify(si,{}),T(this.allDayElement,$c),r&&(this.parent.crudModule.crudObj.isCrudAction=!1),this.parent.renderTemplates(function(){if(e.parent&&e.parent.isReact&&e.parent.activeViewOptions.eventTemplate){var f=[].slice.call(e.parent.element.querySelectorAll("."+Ba));I(f,Ba)}})}}},i.prototype.initializeValues=function(){if(this.resources=this.parent.activeViewOptions.group.resources.length>0?this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.lastResourceLevel:[],this.resources.length>0&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.virtualScrollModule&&(this.resources=this.parent.resourceBase.renderedResources),this.cellHeight=parseFloat(this.parent.getElementHeight(this.parent.element.querySelector(".e-content-wrap tbody tr")).toFixed(2)),this.dateRender[0]=this.parent.activeView.renderDates,this.parent.activeViewOptions.group.resources.length>0)for(var e=0,t=this.resources.length;e<t;e++)this.dateRender[parseInt(e.toString(),10)]=this.resources[parseInt(e.toString(),10)].renderDates},i.prototype.getHeight=function(e,t){var r=(Dt(t)-Dt(e))/at*(this.cellHeight*this.slotCount)/this.interval;return r=r<=0?this.cellHeight:r,r},i.prototype.appendEvent=function(e,t,r,s){var a=this.element.querySelector("."+ir+'[id="'+ir+"-"+r+'"]');this.parent.enableRtl?de(t,{right:s}):de(t,{left:s});var o=t.classList.contains(_n)?"blockEvent":"event",l={data:$({},e,null,!0),element:t,cancel:!1,type:o};this.parent.trigger(to,l,function(h){h.cancel||a.appendChild(t)})},i.prototype.processBlockEvents=function(){for(var e=this.getResourceList(),t=this.getStartCount(),r=0,s=e;r<s.length;r++)for(var a=s[r],o=this.dateRender[parseInt(a.toString(),10)],l=0,h=o.length;l<h;l++){for(var c=new Date(o[parseInt(l.toString(),10)].getTime()),u=W(Z(o[parseInt(l.toString(),10)],1)),p=this.filterEvents(c,u,this.parent.blockProcessed,this.resources[parseInt(a.toString(),10)]),f=0,v=p;f<v.length;f++){var m=v[f];this.parent.resourceBase&&this.setValues(m,a),this.renderBlockEvents(m,l,a,t),this.cssClass=null,this.groupOrder=null}t+=1}},i.prototype.renderBlockEvents=function(e,t,r,s){var a=this.isSpannedEvent(e,t,r),o=a[this.fields.startTime],l=a[this.fields.endTime],h=W(new Date(this.dateRender[parseInt(r.toString(),10)][parseInt(t.toString(),10)].getTime())),c=ei(h,this.startHour,this.endHour);if(o<=l&&this.isValidEvent(e,o,l,c)&&this.isWorkDayAvailable(r,o)){var u=void 0,p=void 0;if(a[this.fields.isAllDay]){var f=this.parent.element.querySelector("."+Te+" table");p=ce(f.offsetHeight),u=ce(0)}else p=ce(this.getHeight(o,l)),u=ce(this.getTopValue(o));e.IsBlock&&(p=ce(parseInt(p,10)-1));var v=this.createBlockAppointmentElement(e,r,this.isResourceEventTemplate),m=e.IsBlock?"99%":"100%";de(v,{width:m,height:p,top:u});var g=this.getDayIndex(t,r,s),y=e.IsBlock?"1px":"0px";this.appendEvent(e,v,g,y)}},i.prototype.renderEvents=function(e){I(this.allDayElement,$c);for(var t=e==="allDayEvents"?this.sortByDateTime(this.allDayEvents):void 0,r=this.getResourceList(),s=this.getStartCount(),a,o=e==="allDayEvents"?this.parent.getElementHeightFromClass(this.element.querySelector("."+Tn),he):0,l=e==="allDayEvents"&&this.allDayElement.length>0?this.allDayElement[0].offsetTop:0,h=function(v){a=!0,c.parent.crudModule&&c.parent.crudModule.crudObj.isCrudAction&&e!=="allDayEvents"&&!c.parent.uiStateValues.isGroupAdaptive&&c.parent.crudModule.crudObj.sourceEvent.filter(function(O){return O.groupIndex===v}).length===0&&c.parent.crudModule.crudObj.targetEvent.filter(function(O){return O.groupIndex===v}).length===0&&(a=!1),c.slots=[];var m=c.dateRender[parseInt(v.toString(),10)],g=c.getRenderedDates(m)||m;c.slots.push(m.map(function(O){return+O}));for(var y=0,b=m.length;y<b&&m[parseInt(y.toString(),10)]<=g[g.length-1];y++){c.renderedEvents=[];var E=new Date(m[parseInt(y.toString(),10)].getTime()),w=W(Z(m[parseInt(y.toString(),10)],1)),A=c.filterEvents(E,w,t,c.resources[parseInt(v.toString(),10)]);if(a)for(var D=0,N=A;D<N.length;D++){var x=N[D];if(c.parent.resourceBase&&c.setValues(x,v),e==="allDayEvents")c.renderAllDayEvents(x,y,v,s,!1,l,o);else if(c.isAllDayAppointment(x))c.allDayEvents.push($({},x,null,!0));else{if(c.parent.eventSettings.enableMaxHeight&&c.getOverlapIndex(x,y,!1,v)>0)continue;c.renderNormalEvents(x,y,v,s)}c.cssClass=null,c.groupOrder=null}else for(var j=0,q=A;j<q.length;j++){var L=q[j];c.isAllDayAppointment(L)&&c.allDayEvents.push($({},L,null,!0))}s+=1}},c=this,u=0,p=r;u<p.length;u++){var f=p[u];h(f)}},i.prototype.getStartCount=function(){return this.parent.virtualScrollModule&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.timeScale.enable?parseInt(this.element.querySelector("."+ir).getAttribute("id").split("-").slice(-1)[0],10):0},i.prototype.getDayIndex=function(e,t,r){var s=this;if(!this.parent.activeViewOptions.group.byDate)return r;if(this.parent.activeViewOptions.group.byDate&&!this.parent.activeViewOptions.group.hideNonWorkingDays){var a=this.parent.resourceBase.lastResourceLevel[0].renderDates.indexOf(this.dateRender[parseInt(t.toString(),10)][parseInt(e.toString(),10)]);return this.resources.length*a+t}for(var o=0,l=this.parent.activeView.colLevels[0],h=this.dateRender[parseInt(t.toString(),10)][parseInt(e.toString(),10)].getTime(),c=[],u=0;u<l.length&&(c=this.parent.resourceBase.resourceDateTree[parseInt(u.toString(),10)],h!==l[parseInt(u.toString(),10)].date.getTime());u++)o=o+l[parseInt(u.toString(),10)].colSpan;var p=c.findIndex(function(f){return f.groupOrder.toString()===s.resources[parseInt(t.toString(),10)].groupOrder.toString()});return p<0?o:o+p},i.prototype.setValues=function(e,t){this.parent.activeViewOptions.group.resources.length>0?(this.cssClass=this.resources[parseInt(t.toString(),10)].cssClass,this.groupOrder=this.resources[parseInt(t.toString(),10)].groupOrder):this.cssClass=this.parent.resourceBase.getCssClass(e)},i.prototype.getResourceList=function(){var e=Array.apply(null,{length:this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.resources.length:1}).map(function(t,r){return r});return e},i.prototype.createAppointmentElement=function(e,t,r,s){var a=this.parent.eventFields,o=e[a.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),l=R("div",{className:he,attrs:{"data-id":"Appointment_"+e[a.id],"data-guid":e.Guid,role:"button",tabindex:"0","aria-disabled":this.parent.eventBase.getReadonlyAttribute(e),"aria-label":this.parent.getAnnouncementString(e)}});e[this.fields.isReadonly]&&T([l],"e-read-only");var h=R("div",{className:ap});if(l.appendChild(h),this.parent.activeViewOptions.group.resources.length>0){var c=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:s;l.setAttribute("data-group-index",c.toString())}var u,p=r;if(d(this.parent.activeViewOptions.eventTemplate)){var b=R("div",{className:Ke});if(this.parent.sanitize(o,b),t)if(e[a.isAllDay])u=[b];else{u=[];var E=R("div",{className:Fs+(this.parent.isAdaptive?" "+Oe:""),innerHTML:this.parent.getTimeString(e[a.startTime])}),w=R("div",{className:Fs+(this.parent.isAdaptive?" "+Oe:""),innerHTML:this.parent.getTimeString(e[a.endTime])});T([b],"e-text-center"),p.isLeft||u.push(E),u.push(b),p.isRight||u.push(w)}else{var A=this.parent.getTimeString(e[a.startTime])+" - "+this.parent.getTimeString(e[a.endTime]),D=R("div",{className:Fs+(this.parent.isAdaptive?" "+Oe:""),innerHTML:A}),N=R("div",{className:zs});this.parent.sanitize(e[a.location]||this.parent.eventSettings.fields.location.default||"",N),u=[b,D,N]}}else{var f=this.parent.element.id+"_",v=this.parent.activeViewOptions.eventTemplateName,m=f+v+"eventTemplate",g=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:s,y=this.isResourceEventTemplate?this.parent.getEventTemplateName(g):"eventTemplate";u=this.parent.getAppointmentTemplate()(e,this.parent,y,m,!1,void 0,void 0,this.parent.root)}if(oe(u,h),!this.parent.isAdaptive&&(!d(e[a.recurrenceRule])||!d(e[a.recurrenceID]))){var x=e[a.id]===e[a.recurrenceID]?no:ao,j=R("div",{className:qe+" "+x});t?h.appendChild(j):l.appendChild(j)}return this.parent.eventBase.renderSpannedIcon(t?h:l,p),d(this.cssClass)||T([l],this.cssClass),this.applyResourceColor(l,e,"backgroundColor",this.groupOrder),this.renderResizeHandler(l,p,e[this.fields.isReadonly]),l},i.prototype.createMoreIndicator=function(e,t,r){var s=r+t,a=e[parseInt(s.toString(),10)];if(a.childElementCount<=0){var o=R("div",{className:va,id:va+"-"+s.toString()}),l=R("div",{className:$t,attrs:{tabindex:"0","data-index":s.toString(),"data-count":"1"},innerHTML:"+1&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))});o.appendChild(l),a.appendChild(o),C.add(l,"click",this.rowExpandCollapse,this)}else{var h=a.querySelector("."+$t),c=parseInt(h.getAttribute("data-count"),10)+1;h.setAttribute("data-count",c.toString()),h.innerHTML="+"+this.parent.globalize.formatNumber(c)+"&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))}},i.prototype.isSpannedEvent=function(e,t,r){var s=W(this.dateRender[parseInt(r.toString(),10)][parseInt(t.toString(),10)]),a=this.getRenderedDates(this.dateRender[parseInt(r.toString(),10)])||[s],o=a.filter(function(p){return p.getDay()===t});o.length===0&&(s=W(a[0]));var l=this.parent.eventFields,h=ei(s,this.startHour,this.endHour),c=$({},e,null,!0);c.isSpanned={isBottom:!1,isTop:!1,isSameDuration:c[l.startTime].getTime()===c[l.endTime].getTime()},e[l.startTime].getTime()<h.startHour.getTime()&&(c[l.startTime]=h.startHour,c.isSpanned.isTop=!0),e[l.endTime].getTime()>h.endHour.getTime()&&(c[l.endTime]=h.endHour,c.isSpanned.isBottom=!0);var u=this.updateEventMinimumDuration(h,c[l.startTime],c[l.endTime]);return c[l.startTime]=u.startDate,c[l.endTime]=u.endDate,c},i.prototype.isWorkDayAvailable=function(e,t){if(this.parent.activeViewOptions.group.hideNonWorkingDays&&this.resources.length>0){var r=this.resources[parseInt(e.toString(),10)].resourceData[this.resources[parseInt(e.toString(),10)].resource.workDaysField]||this.parent.activeViewOptions.workDays;return r&&r.indexOf(t.getDay())>=0}return!0},i.prototype.renderAllDayEvents=function(e,t,r,s,a,o,l){var h=this,c=this.getRenderedDates(this.dateRender[parseInt(r.toString(),10)])||this.dateRender[parseInt(r.toString(),10)];this.parent.activeViewOptions.group.byDate&&(this.slots[0]=[this.dateRender[parseInt(r.toString(),10)][parseInt(t.toString(),10)].getTime()],c=[this.dateRender[parseInt(r.toString(),10)][parseInt(t.toString(),10)]]);var u=this.splitEvent(e,c)[0],p=new Date(u[this.parent.eventFields.startTime].getTime()),f=new Date(u[this.parent.eventFields.endTime].getTime());if(!(p.getTime()<this.parent.minDate.getTime()||f.getTime()>this.parent.maxDate.getTime())){var v=0,m=1,g=c[0].getTime()<=p.getTime()&&Z(c.slice(-1)[0],1).getTime()>=p.getTime();if(p<=f&&g&&this.isWorkDayAvailable(r,p)){var y=[];if(this.renderedAllDayEvents[parseInt(r.toString(),10)]&&(y=this.renderedAllDayEvents[parseInt(r.toString(),10)].filter(function(L){return L.Guid===e.Guid}),this.parent.activeViewOptions.group.byDate&&(y=y.filter(function(L){return L[h.parent.eventFields.startTime]>=c[parseInt(t.toString(),10)]&&L[h.parent.eventFields.endTime]<=Z(new Date(+c[parseInt(t.toString(),10)]),1)}))),y.length===0){var b=u.data.count,E=this.getOverlapIndex(u,t,!0,r);u.Index=E,this.allDayLevel=this.allDayLevel<E?E:this.allDayLevel;var w=u.data.isRight?0:this.parent.currentView==="Day"?4:7;b>=0&&(v=b*100-(this.parent.activeViewOptions.allowOverlap?w:0)),d(this.renderedAllDayEvents[parseInt(r.toString(),10)])&&(this.renderedAllDayEvents[parseInt(r.toString(),10)]=[]),this.renderedAllDayEvents[parseInt(r.toString(),10)].push($({},u,null,!0));var A=[].slice.call(this.element.querySelector("."+Wn).children),D=this.getDayIndex(t,r,s),N=this.element.querySelector("."+Tn+":nth-child("+(D+1)+")"),x;a?x=this.parent.inlineModule.createInlineAppointmentElement(e):x=this.createAppointmentElement(e,!0,u.data,r),T([x],ju);var j=$({},u.data,null,!0);e.data=j;var q={data:e,element:x,cancel:!1};this.parent.trigger(to,q,function(L){if(!L.cancel){if(N.appendChild(x),m+=(E===0?o:o+E*l)+1,de(x,{width:v+"%",top:ce(m)}),E>1){h.moreEvents.push(x);for(var O=0,P=b;O<P;O++)h.createMoreIndicator(A,O,D)}h.allDayElement[0].setAttribute("data-count",h.allDayLevel.toString());var F=(!h.parent.uiStateValues.expand&&h.allDayLevel>2?3*l:(h.allDayLevel+1)*l)+4;h.setAllDayRowHeight(F),h.addOrRemoveClass(),h.wireAppointmentEvents(x,e)}})}}}},i.prototype.renderNormalEvents=function(e,t,r,s,a){var o=this.isSpannedEvent(e,t,r),l=o[this.fields.startTime],h=o[this.fields.endTime],c="0%",u="0%",p=0,f=W(new Date(this.dateRender[parseInt(r.toString(),10)][parseInt(t.toString(),10)].getTime())),v=ei(f,this.startHour,this.endHour),m=this.isValidEvent(e,l,h,v);if(!(l.getTime()<this.parent.minDate.getTime()||h.getTime()>Z(this.parent.maxDate,1).getTime())&&l<=h&&m&&this.isWorkDayAvailable(r,l)){var g=o.isSpanned.isSameDuration?this.cellHeight:this.getHeight(l,h);l.getTime()>=v.startHour.getTime()&&(p=this.getTopValue(l));var y=this.getOverlapIndex(o,t,!1,r);o.Index=y,this.overlapList.push(o),this.overlapList.length>1?(d(this.overlapEvents[parseInt(y.toString(),10)])&&(this.overlapEvents[parseInt(y.toString(),10)]=[]),this.overlapEvents[parseInt(y.toString(),10)].push(o)):(this.overlapEvents=[],this.overlapEvents.push([o])),c=this.getEventWidth();var b={index:y,left:u,width:c,day:s,dayIndex:t,record:o,resource:r},E=this.adjustOverlapElements(b);c=E.appWidth,d(this.renderedEvents[parseInt(r.toString(),10)])&&(this.renderedEvents[parseInt(r.toString(),10)]=[]),this.renderedEvents[parseInt(r.toString(),10)].push($({},o,null,!0));var w=void 0;a?w=this.parent.inlineModule.createInlineAppointmentElement(e):w=this.createAppointmentElement(e,!1,o.isSpanned,r),de(w,{width:this.parent.eventSettings.enableMaxHeight||!this.parent.activeViewOptions.allowOverlap?"100%":E.appWidth,height:g+"px",top:p+"px"});var A=w.querySelectorAll("."+Zl).length*15,D=g-40-A,N=w.querySelector("."+Ke);!this.parent.isAdaptive&&N&&(N.style.maxHeight=ce(D));var x=this.getDayIndex(t,r,s),j={};j[this.fields.startTime]=e[this.fields.startTime],j[this.fields.endTime]=e[this.fields.endTime],o.data=j,this.appendEvent(o,w,x,E.appLeft),this.wireAppointmentEvents(w,e)}},i.prototype.getEventWidth=function(){var e=this.parent.currentView==="Day"?97:94,t=(e-this.overlapEvents.length)/this.overlapEvents.length;return(t<0?0:t)+"%"},i.prototype.getEventLeft=function(e,t){var r=(parseFloat(e)+1)*t;return(r>99?99:r)+"%"},i.prototype.getStartEndHours=function(e){if(!d(e)&&e!==""){var t=new Date(2e3,0,0,0),r=e.split(":");return r.length===2&&t.setHours(parseInt(r[0],10),parseInt(r[1],10),0),t}return null},i.prototype.getTopValue=function(e){var t=this.getStartEndHours(this.parent.activeViewOptions.startHour),r=(e.getHours()-t.getHours())*60+(e.getMinutes()-t.getMinutes());return this.parent.activeViewOptions.timeScale.enable?r*this.cellHeight*this.slotCount/this.interval:0},i.prototype.getOverlapIndex=function(e,t,r,s){var a=this,o=this.parent.eventFields,l=[],h=-1;if(this.overlapEvents=[],r){if(!d(this.renderedAllDayEvents[parseInt(s.toString(),10)])){var c=W(new Date(this.dateRender[parseInt(s.toString(),10)][parseInt(t.toString(),10)].getTime()));l=this.renderedAllDayEvents[parseInt(s.toString(),10)].filter(function(x){return W(x[o.startTime]).getTime()<=c.getTime()&&W(x[o.endTime]).getTime()>=c.getTime()}),this.parent.activeViewOptions.group.resources.length>0&&(l=this.filterEventsByResource(this.resources[parseInt(s.toString(),10)],l))}}else{var u=d(this.renderedEvents[parseInt(s.toString(),10)])?[]:this.renderedEvents[parseInt(s.toString(),10)],p=[],f=e[o.startTime],v=e[o.endTime];this.overlapList=u.filter(function(x){return x[o.endTime]>f&&x[o.startTime]<=v||x[o.startTime]>=v&&x[o.endTime]<=f||x[o.endTime].getTime()===x[o.startTime].getTime()&&x[o.startTime].getTime()===f.getTime()&&x[o.endTime]<v}),this.parent.activeViewOptions.group.resources.length>0&&(this.overlapList=this.filterEventsByResource(this.resources[parseInt(s.toString(),10)],this.overlapList));var m=[];this.overlapList.forEach(function(x){var j=[],q=new Set;for(m.push(x),q.add(x[o.id]),j.push(x);m.length>0;)for(var L=m.shift(),O=L[o.endTime].getTime(),P=L[o.startTime].getTime(),F=0,ie=u;F<ie.length;F++){var U=ie[F],ne=U[o.startTime].getTime(),Ae=U[o.endTime].getTime();if(ne>=O)break;q.has(U[o.id])||Ae>P&&ne<O&&(j.push(U),q.add(U[o.id]),m.push(U))}a.parent.activeViewOptions.group.resources.length>0&&(j=a.filterEventsByResource(a.resources[parseInt(s.toString(),10)],j));var ge=j.filter(function(Ve){return a.overlapList.indexOf(Ve)===-1});ge.length>0&&(p=p.concat(ge))});for(var g=0;g<p.length-1;g++)for(var y=g+1;y<p.length;y++)p[parseInt(g.toString(),10)][o.id]===p[parseInt(y.toString(),10)][o.id]&&(p.splice(y,1),y--);this.overlapList=this.overlapList.concat(p),l=this.overlapList;for(var b=0,E=l;b<E.length;b++){var w=E[b],A=w,D=A.Index;d(this.overlapEvents[parseInt(D.toString(),10)])?this.overlapEvents[parseInt(D.toString(),10)]=[w]:this.overlapEvents[parseInt(D.toString(),10)].push(w)}}if(r||(l=l.filter(function(x){return x[o.startTime]===e[o.startTime]&&x[o.endTime]>e[o.endTime]||x[o.endTime]>e[o.startTime]&&x[o.startTime]<e[o.endTime]||x[o.endTime]===e[o.startTime]&&x[o.startTime]===e[o.endTime]||x[o.startTime].getTime()===e[o.startTime].getTime()&&x[o.endTime].getTime()===e[o.endTime].getTime()||x[o.startTime].getTime()===e[o.startTime].getTime()&&x[o.endTime].getTime()<e[o.endTime].getTime()||x[o.endTime].getTime()>e[o.endTime].getTime()})),l.length>0){var N=l.map(function(x){return x.Index});h=N.length>0?this.getSmallestMissingNumber(N):0}return h===-1?0:h},i.prototype.adjustOverlapElements=function(e){for(var t={appWidth:e.width,appLeft:e.left},r=0,s=this.overlapEvents.length;r<s;r++)if(!d(this.overlapEvents[parseInt(r.toString(),10)]))for(var a=0,o=this.overlapEvents[parseInt(r.toString(),10)].length;a<o;a++){var l=this.getDayIndex(e.dayIndex,e.resource,e.day),h=this.element.querySelector("#e-appointment-wrapper-"+l);if(h&&h.childElementCount>0){var c=this.overlapEvents[parseInt(r.toString(),10)][parseInt(a.toString(),10)].Guid;if(h.querySelectorAll('div[data-guid="'+c+'"]').length>0&&c!==e.record.Guid){var u=h.querySelector('div[data-guid="'+c+'"]');parseFloat(e.width)<=parseFloat(u.style.width)&&(this.parent.enableRtl?u.style.right=this.getEventLeft(e.width,r):u.style.left=this.getEventLeft(e.width,r),u.style.width=parseFloat(e.width)+"%"),t.appWidth=u.style.width}else{var p=e.width;d(this.overlapEvents[r-1])&&(p=this.getEventWidth()),t.appWidth=p,t.appLeft=this.getEventLeft(p,e.index)}}}return t},i.prototype.setAllDayRowHeight=function(e){var t=this.parent.element.querySelector("."+Hi);(this.parent.height==="auto"||!this.parent.enableAllDayScroll)&&T([t],yl);var r=this.parent.element.querySelector("."+Wn);if(r.style.height="",this.parent.uiStateValues.expand&&this.parent.height!=="auto"&&this.parent.enableAllDayScroll)r.style.height=e/12+"em",this.parent.eventBase.allDayExpandScroll(t);else{for(var s=0,a=this.allDayElement;s<a.length;s++){var o=a[s];o.style.height=e/12+"em"}I([t],oo)}},i.prototype.addOrRemoveClass=function(){var e=this;this.moreEvents.filter(function(s){!e.parent.uiStateValues.expand&&e.allDayLevel>2?(T([s],Bm),s.setAttribute("tabindex","-1")):(I([s],Bm),s.setAttribute("tabindex","0"))});var t=this.element.querySelector("."+$a);this.parent.uiStateValues.expand?(I([t],ml),T([t],Fm)):(I([t],Fm),T([t],ml)),this.allDayLevel>2?I([t],Oe):T([t],Oe);var r=[].slice.call(this.element.querySelectorAll("."+va));r.forEach(function(s){!e.parent.uiStateValues.expand&&e.allDayLevel>2?I([s],Oe):T([s],Oe)})},i.prototype.getEventHeight=function(){var e=R("div",{className:he,styles:"visibility:hidden"}),t=this.element.querySelector("."+Tn+":first-child");t.appendChild(e);var r=e.offsetHeight;return ve(e),r},i.prototype.rowExpandCollapse=function(){var e=this.element.querySelector("."+$a);this.parent.uiStateValues.expand=e.classList.contains(ml);var t;this.parent.uiStateValues.expand?(e.setAttribute("title",this.parent.localeObj.getConstant("collapseAllDaySection")),e.setAttribute("aria-label",this.parent.localeObj.getConstant("collapseAllDaySection")),t=(this.allDayLevel+1)*this.getEventHeight()+4):(e.setAttribute("title",this.parent.localeObj.getConstant("expandAllDaySection")),e.setAttribute("aria-label",this.parent.localeObj.getConstant("expandAllDaySection")),t=3*this.getEventHeight()+4,this.parent.element.querySelector("."+Hi).scrollTop=0),this.setAllDayRowHeight(t),this.animation.animate(this.allDayElement[0]),this.addOrRemoveClass(),this.animation.animate(e)},i.prototype.animationUiUpdate=function(){this.parent.notify(si,{})},i.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed||(this.removeEventListener(),this.allDayElement=null,this.renderedAllDayEvents=null,this.renderedEvents=null,this.slotCount=null,this.interval=null,this.startHour=null,this.endHour=null,this.element=null,this.fields=null,this.animation=null,n.prototype.destroy.call(this))},i}(gp),RN=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),eu=0,Eh=function(n){RN(i,n);function i(e){var t=n.call(this,e)||this;return t.renderedEvents=[],t.monthHeaderHeight=0,t.moreIndicatorHeight=19,t.renderType="day",t.element=t.parent.activeView.getPanel(),t.fields=t.parent.eventFields,t.maxHeight=t.parent.eventSettings.enableMaxHeight&&!t.parent.eventSettings.enableIndicator&&!t.parent.rowAutoHeight,t.withIndicator=t.parent.eventSettings.enableMaxHeight&&t.parent.eventSettings.enableIndicator&&!t.parent.rowAutoHeight,t.maxOrIndicator=t.maxHeight||t.withIndicator,t.moreIndicatorHeight=t.parent.rowAutoHeight&&t.parent.eventSettings.ignoreWhitespace?0:t.moreIndicatorHeight,t.addEventListener(),t}return i.prototype.removeEventWrapper=function(e){if(e.length>0){e=this.parent.currentView==="Month"||!this.parent.activeView.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable?e:[e[0]];for(var t=0,r=e;t<r.length;t++){var s=r[t];s.parentElement&&s.parentElement.parentNode&&ve(s.parentElement)}}},i.prototype.renderAppointments=function(){this.parent.dragAndDropModule&&this.parent.dragAndDropModule.setDragArea(),this.isResourceEventTemplate=this.parent.isSpecificResourceEvents();var e=this.parent.element.querySelector("."+Te);this.parent.rowAutoHeight&&(this.parent.uiStateValues.top=e.scrollTop,this.parent.uiStateValues.left=e.scrollLeft);var t=[].slice.call(this.element.querySelectorAll("."+ir));if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction)for(var r=0,s=this.parent.crudModule.crudObj.sourceEvent.length;r<s;r++){var a=[].slice.call(this.element.querySelectorAll('.e-appointment-wrapper [data-group-index="'+this.parent.crudModule.crudObj.sourceEvent[parseInt(r.toString(),10)].groupIndex+'"]'));if(this.removeEventWrapper(a),this.parent.crudModule.crudObj.targetEvent[parseInt(r.toString(),10)]&&this.parent.crudModule.crudObj.sourceEvent[parseInt(r.toString(),10)].groupIndex!==this.parent.crudModule.crudObj.targetEvent[parseInt(r.toString(),10)].groupIndex){var o=[].slice.call(this.element.querySelectorAll('.e-appointment-wrapper [data-group-index="'+this.parent.crudModule.crudObj.targetEvent[parseInt(r.toString(),10)].groupIndex+'"]'));this.removeEventWrapper(o)}}else for(var l=0,h=t;l<h.length;l++){var c=h[l];ve(c)}if(this.removeHeightProperty($e),!!this.element.querySelector("."+se)){if(this.parent.currentView==="Month"){var u=R("div",{className:ir}),p=this.parent.element.querySelector("."+se);p.appendChild(u),this.monthHeaderHeight=u.offsetTop-p.offsetTop,p.removeChild(u)}this.eventHeight=this.parent.getElementHeightFromClass(this.element,he);var f="."+$e+" tbody tr";this.addCellHeight(f,this.eventHeight,this.parent.currentView==="Month"?eu:2,this.monthHeaderHeight,this.moreIndicatorHeight);var v=e.scrollTop;if(this.parent.rowAutoHeight&&this.parent.virtualScrollModule&&!this.parent.virtualScrollModule.isHorizontalScroll&&!d(this.parent.currentAction)&&(e.scrollTop=e.scrollTop-1),this.parent.activeViewOptions.group.resources.length>0?(this.renderResourceEvents(),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateFocusedWorkCell()):this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays),this.parent.rowAutoHeight){this.updateBlockElements();var m={cssProperties:this.parent.getCssProperties(),module:this.parent.getModuleName(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};if(this.parent.virtualScrollModule&&!this.parent.virtualScrollModule.isHorizontalScroll&&(this.parent.currentAction?(e.scrollTop=v,this.parent.currentAction=null):this.parent.virtualScrollModule.updateVirtualScrollHeight()),this.parent.enablePersistence||this.parent.notify(si,{}),this.parent.notify(Wi,m),this.parent.currentView==="Month"&&this.parent.showWeekNumber){var g=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child")),y=[].slice.call(this.parent.element.querySelectorAll("td."+gh));y.forEach(function(E,w){var A=g[parseInt(w.toString(),10)].offsetHeight;de(E,{height:A+"px"})});var b=this.parent.element.querySelector("."+$l);d(b)||(b.scrollTop=this.parent.element.querySelector("."+Te).scrollTop)}}this.parent.renderTemplates()}},i.prototype.renderEventsHandler=function(e,t,r){this.renderedEvents=[];var s,a,o=0;if(r?(o=r.groupIndex,this.cssClass=r.cssClass,this.groupOrder=r.groupOrder,s=this.parent.eventBase.filterEventsByResource(r,this.parent.eventsProcessed),a=this.parent.eventBase.filterEventsByResource(r,this.parent.blockProcessed),this.workCells=[].slice.call(this.element.querySelectorAll("."+se+'[data-group-index="'+o+'"]'))):(s=this.parent.eventsProcessed,a=this.parent.blockProcessed,this.workCells=[].slice.call(this.element.querySelectorAll("."+se))),this.sortByDateTime(s),this.sortByDateTime(a),this.parent.currentView==="Month"&&this.parent.rowAutoHeight&&this.parent.activeViewOptions.group.resources.length===0){var l=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child")),h=this.parent.element.querySelector("."+$e).clientHeight/l.length;l.forEach(function(x){de(x,{height:h+"px"})})}var c=this.workCells[this.parent.activeView.isTimelineView()?0:this.workCells.length-1];this.cellWidth=this.parent.getElementWidth(c),this.cellHeight=this.parent.getElementHeight(c),this.dateRender=e;var u=this.getRenderedDates(e);this.getSlotDates(t||this.parent.activeViewOptions.workDays),this.processBlockEvents(a,o,r);for(var p=[],f=0,v=s;f<v.length;f++){var m=v[f];this.parent.resourceBase&&!r&&(this.cssClass=this.parent.resourceBase.getCssClass(m)),p=p.concat(this.splitEvent(m,u||this.dateRender))}for(var g=0;g<this.slots.length;g++){this.renderedEvents=[];for(var y=this.slots[parseInt(g.toString(),10)],b=Z(new Date(y[y.length-1]),1),E=this.filterEvents(new Date(y[0]),b,p),w=0,A=E;w<A.length;w++){var D=A[w];if(this.maxHeight){var N=this.parent.currentView==="Month"?D[this.fields.startTime]:this.getStartTime(D,D.data);if(this.getIndex(N)>0)continue}this.updateIndicatorIcon(D),this.renderEvents(D,o,s)}}this.cssClass=null,this.groupOrder=null},i.prototype.processBlockEvents=function(e,t,r){for(var s=0,a=e;s<a.length;s++){var o=a[s];this.parent.resourceBase&&!r&&(this.cssClass=this.parent.resourceBase.getCssClass(o));var l=[];if(this.renderType==="day"&&!o[this.fields.isAllDay]){var h=$({},o,null,!0),c=this.isSameDate(h[this.fields.startTime],h[this.fields.endTime]);if(h.isBlockIcon=c,!c&&ts(h[this.fields.startTime])>0){var u=$({},o,null,!0);u[this.fields.endTime]=Z(W(new Date(o[this.fields.startTime]+"")),1),u.isBlockIcon=!0,h[this.fields.startTime]=u[this.fields.endTime],l.push(u)}if(c=this.isSameDate(h[this.fields.startTime],h[this.fields.endTime]),!c&&ts(h[this.fields.endTime])>0){var u=$({},o,null,!0);u[this.fields.startTime]=W(new Date(o[this.fields.endTime]+"")),u.isBlockIcon=!0,l.push(u),h[this.fields.endTime]=u[this.fields.startTime]}l.push(h)}else l.push(o);for(var p=0,f=l;p<f.length;p++)for(var v=f[p],m=this.splitEvent(v,this.dateRender),g=0,y=m;g<y.length;g++){var b=y[g];this.renderBlockEvents(b,t,!!v.isBlockIcon)}}},i.prototype.isSameDate=function(e,t){return new Date(+e).setHours(0,0,0,0)===new Date(+t).setHours(0,0,0,0)},i.prototype.renderBlockEvents=function(e,t,r){var s=e.data,a=this.getStartTime(e,s),o=this.getEndTime(e,s),l=this.parent.getIndexOfDate(this.dateRender,W(new Date(a.getTime())));if(!(l<0||a>o)){var h=this.getCellTd(l),c=this.getPosition(a,o,e[this.fields.isAllDay],l);if(r)this.renderBlockIndicator(h,c,t);else{var u=s.count,p=this.getEventWidth(a,o,e[this.fields.isAllDay],u);p=p<=0?this.cellWidth:p,p=e.IsBlock?p-1:p;var f=this.parent.enableRtl?0:e.IsBlock?c+1:c,v=this.parent.enableRtl?e.IsBlock?c+1:c:0,m=this.cellHeight-this.monthHeaderHeight;m=e.IsBlock?m-1:m;var g=this.getRowTop(t),y=this.createBlockAppointmentElement(e,t,this.isResourceEventTemplate);de(y,{width:p+"px",height:m+"px",left:f+"px",right:v+"px",top:g+"px"}),this.renderEventElement(e,y,h)}}},i.prototype.renderBlockIndicator=function(e,t,r){var s=R("div",{className:"e-icons "+Kl});d(e.querySelector("."+Kl))&&e.appendChild(s)},i.prototype.getStartTime=function(e,t){return e[this.fields.startTime]},i.prototype.getEndTime=function(e,t){return e[this.fields.endTime]},i.prototype.getCellTd=function(e){return this.workCells[parseInt(e.toString(),10)]},i.prototype.getEventWidth=function(e,t,r,s){return s*this.cellWidth-1},i.prototype.getPosition=function(e,t,r,s){return 0},i.prototype.getRowTop=function(e){return 0},i.prototype.updateIndicatorIcon=function(e){if(!(this.parent.currentView.indexOf("Timeline")===-1||this.parent.currentView==="TimelineMonth"||e[this.fields.isAllDay])){var t=e.data,r=this.parent.activeView.getStartHour(),s=this.parent.activeView.getEndHour(),a=ei(e[this.fields.startTime],r,s),o=ei(e[this.fields.endTime],r,s),l=t[this.fields.startTime],h=t[this.fields.endTime];if(t.isLeft=t.isLeft||l.getTime()<a.startHour.getTime(),t.isRight=t.isRight||h.getTime()>o.endHour.getTime(),W(l).getTime()!==W(h).getTime()){var c=a.startHour,u=o.endHour,p=new Date(W(l));if(p.setHours(u.getHours(),u.getMinutes(),u.getSeconds()),t.isLeft=t.isLeft||l.getTime()>=(c.getDate()===a.endHour.getDate()?p.getTime():Z(p,1).getTime()),h.getTime()!==W(h).getTime()){var f=new Date(W(h));t.isRight=t.isRight||h.getTime()<=f.setHours(c.getHours(),c.getMinutes(),c.getSeconds())}}}},i.prototype.renderResourceEvents=function(){var e=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.renderedResources;if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction){for(var t=0,r=this.parent.crudModule.crudObj.sourceEvent.length;t<r;t++){var s=this.parent.crudModule.crudObj.sourceEvent[parseInt(t.toString(),10)];if((!this.parent.uiStateValues.isGroupAdaptive||this.parent.uiStateValues.groupIndex===s.groupIndex&&this.parent.uiStateValues.isGroupAdaptive)&&this.renderEventsHandler(s.renderDates,s.workDays,s),this.parent.crudModule.crudObj.sourceEvent[parseInt(t.toString(),10)].groupIndex!==this.parent.crudModule.crudObj.targetEvent[parseInt(t.toString(),10)].groupIndex){var a=this.parent.crudModule.crudObj.targetEvent[parseInt(t.toString(),10)];this.renderEventsHandler(a.renderDates,a.workDays,a)}}this.parent.crudModule.crudObj.isCrudAction=!1}else for(var o=0,l=e;o<l.length;o++){var h=l[o];this.renderEventsHandler(h.renderDates,h.workDays,h)}},i.prototype.getSlotDates=function(e){this.slots=[];for(var t=this.dateRender.map(function(s){return+s}),r=!this.parent.activeViewOptions.showWeekend||this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.group.hideNonWorkingDays?e.length:Si;t.length>0;)this.slots.push(t.splice(0,r))},i.prototype.createAppointmentElement=function(e,t,r){r===void 0&&(r=!1);var s=e[this.fields.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),a=$({},e,e.data,!0),o={"data-id":"Appointment_"+e[this.fields.id],role:"button",tabindex:"0","aria-disabled":this.parent.eventBase.getReadonlyAttribute(e),"aria-label":this.parent.getAnnouncementString(a,s)};r||(o["data-guid"]=e.Guid),this.parent.activeViewOptions.group.resources.length>0&&(o["data-group-index"]=t.toString());var l=R("div",{className:he,attrs:o});d(this.cssClass)||T([l],this.cssClass),e[this.fields.isReadonly]&&T([l],"e-read-only");var h=R("div",{className:ap});l.appendChild(h);var c,u=e.data,p=this.getEventData(e);if(d(this.parent.activeViewOptions.eventTemplate)){var y=e[this.fields.location]||this.parent.eventSettings.fields.location.default||"",b=R("div",{className:Ke});this.parent.sanitize(s+(y?"; "+y:""),b);var E=R("div",{className:Fs+(this.parent.isAdaptive?" "+Oe:""),innerHTML:this.parent.getTimeString(u[this.fields.startTime])}),w=R("div",{className:Fs+(this.parent.isAdaptive?" "+Oe:""),innerHTML:this.parent.getTimeString(u[this.fields.endTime])});if(this.parent.currentView==="Month")e[this.fields.isAllDay]?(c=[b],T([b],"e-text-center")):u.count<=1&&!u.isLeft&&!u.isRight?c=[E,b]:(c=[],T([b],"e-text-center"),u.isLeft||c.push(E),c.push(b),u.isRight||c.push(w));else{var A=void 0;if(e[this.fields.isAllDay]){var D=R("div",{className:Fs,innerHTML:this.parent.localeObj.getConstant("allDay")});A=[b,D]}else{var N=this.parent.getTimeString(u[this.fields.startTime])+" - "+this.parent.getTimeString(u[this.fields.endTime]),x=R("div",{className:Fs+(this.parent.isAdaptive?" "+Oe:""),innerHTML:N}),j=R("div",{className:zs});this.parent.sanitize(y,j),A=[b,x,j]}var q=R("div",{className:"e-inner-wrap"});oe(A,q),c=[q]}}else{var f=this.parent.element.id+"_",v=this.parent.activeViewOptions.eventTemplateName,m=f+v+"eventTemplate",g=this.isResourceEventTemplate?this.parent.getEventTemplateName(t):"eventTemplate";c=this.parent.getAppointmentTemplate()(p,this.parent,g,m,!1,void 0,void 0,this.parent.root)}return oe(c,h),this.appendEventIcons(e,h),this.renderResizeHandler(l,e.data,e[this.fields.isReadonly]),l},i.prototype.appendEventIcons=function(e,t){var r=e.data;if(!d(e[this.fields.recurrenceRule])||!d(e[this.fields.recurrenceID])){var s=e[this.fields.id]===e[this.fields.recurrenceID]?no:ao;t.appendChild(R("div",{className:qe+" "+s+(this.parent.isAdaptive?" "+Oe:"")}))}if(r.isLeft){var a=R("div",{className:Zl+" "+qe+" "+Ob});yt([a],t)}if(r.isRight){var o=R("div",{className:Zl+" "+qe+" "+Rb});oe([o],t)}},i.prototype.renderEvents=function(e,t,r){var s=e[this.fields.startTime],a=e[this.fields.endTime],o=this.parent.getIndexOfDate(this.dateRender,W(s));if(!(o<0||s.getTime()<this.parent.minDate.getTime()||a.getTime()>this.parent.maxDate.getTime())){var l=this.parent.rowAutoHeight?1:this.parent.activeViewOptions.maxEventsPerRow,h=this.getIndex(s);e.Index=h;var c=e.data.count;if(s.getTime()<=a.getTime()){var u=c*this.cellWidth-5,p=this.workCells[parseInt(o.toString(),10)],f=h*(this.eventHeight+eu),v=this.monthHeaderHeight+(h+1)*(this.eventHeight+eu)+this.moreIndicatorHeight,m=this.parent.activeViewOptions.maxEventsPerRow&&!this.parent.rowAutoHeight&&!this.parent.eventSettings.enableIndicator?h<l:this.maxOrIndicator?h<1:this.cellHeight>v;if(this.parent.rowAutoHeight||m){this.renderedEvents.push($({},e,null,!0));var g=void 0;if(this.inlineValue?g=this.parent.inlineModule.createInlineAppointmentElement():g=this.createAppointmentElement(e,t),this.applyResourceColor(g,e,"backgroundColor",this.groupOrder),this.wireAppointmentEvents(g,e),de(g,{width:u+"px",top:f+"px"}),this.renderEventElement(e,g,p),this.parent.rowAutoHeight){var y=this.parent.element.querySelector("."+Te),b=this.parent.getElementWidth(y),E=y.offsetHeight===y.clientHeight&&y.offsetWidth===y.clientWidth,w=p.parentElement.firstElementChild;this.updateCellHeight(w,v),E&&(y.offsetWidth>y.clientWidth||b!==this.parent.getElementWidth(y))&&this.adjustAppointments(b)}}else for(var A=0;A<c;A++)if(this.workCells[o+A]){var D=this.workCells[o+A].querySelector("."+$t);if(D){var N=parseInt(D.getAttribute("data-count"),10)+1;D.setAttribute("data-count",N.toString()),D.setAttribute("aria-label",N+" "+this.parent.localeObj.getConstant("moreEvents")),D.innerHTML=this.getMoreIndicatorText(N)}else{var x=new Date(this.dateRender[o+A].getTime()),j=Z(this.dateRender[o+A],1),q=this.workCells[o+A].getAttribute("data-group-index"),L=this.getMoreIndicatorElement(1,x,j);d(q)||L.setAttribute("data-group-index",q),L.style.top=this.cellHeight-this.monthHeaderHeight+"px",L.style.width=this.cellWidth-2+"px",L.style.transform="translateY(-100%)",this.renderElement(this.workCells[o+A],L),C.add(L,"click",this.moreIndicatorClick,this)}}}}},i.prototype.adjustAppointments=function(e){var t=this,r=this.parent.element.querySelector("."+$e+" tbody tr"),s=this.parent.getElementWidth(this.workCells[0]);this.cellWidth=s/+(this.workCells[0].getAttribute("colspan")||1);var a=s*r.children.length/(e/100),o=[].slice.call(this.parent.element.querySelectorAll("."+he));o.forEach(function(l){t.parent.enableRtl&&l.style.right!=="0px"?l.style.right=parseFloat(l.style.right)/100*a+"px":l.style.left!=="0px"&&(l.style.left=parseFloat(l.style.left)/100*a+"px"),l.style.width=parseFloat(l.style.width)/100*a+"px"})},i.prototype.updateCellHeight=function(e,t){t>e.offsetHeight&&de(e,{height:t+"px"})},i.prototype.updateBlockElements=function(){for(var e=[].slice.call(this.element.querySelectorAll("."+_n)),t=0,r=e;t<r.length;t++){var s=r[t],a=M(s,"tr");this.monthHeaderHeight=s.offsetParent.offsetTop-a.offsetTop,s.style.height=a.offsetHeight-1-this.monthHeaderHeight+"px";var o=a.firstElementChild,l=Math.round(s.offsetWidth/o.offsetWidth);s.style.width=o.offsetWidth*l+"px"}},i.prototype.getFilteredEvents=function(e,t,r,s){var a;if(d(r))a=this.filterEvents(e,t);else{var o=this.parent.resourceBase.lastResourceLevel[parseInt(r,10)];a=this.filterEvents(e,t,d(s)?void 0:s,o)}return a},i.prototype.getOverlapEvents=function(e,t){for(var r=[],s=W(e).getTime(),a=0,o=t;a<o.length;a++){var l=o[a];W(l[this.fields.startTime]).getTime()<=s&&W(l[this.fields.endTime]).getTime()>=s&&r.push(l)}return r},i.prototype.getIndex=function(e){var t=-1,r=this.renderedEvents;if(r.length>0){var s=this.getOverlapEvents(e,r),a=s.map(function(o){return o.Index});t=a.length>0?this.getSmallestMissingNumber(a):0}return t===-1?0:t},i.prototype.moreIndicatorClick=function(e){var t=this,r=M(e.target,"."+$t),s=new Date(parseInt(r.getAttribute("data-start-date"),10)),a=new Date(parseInt(r.getAttribute("data-end-date"),10)),o=r.getAttribute("data-group-index"),l={cancel:!1,event:e,element:r,isPopupOpen:!0,startTime:s,endTime:a,viewName:this.parent.getNavigateView()};o&&(l.groupIndex=parseInt(o,10)),this.parent.trigger(BO,l,function(h){if(!h.cancel)if(h.isPopupOpen){var c=t.getFilteredEvents(s,a,o),u={date:s,event:c,element:e.target};t.parent.quickPopup.moreEventClick(u,a,o)}else t.parent.setProperties({selectedDate:s},!0),t.parent.changeView(h.viewName,e)})},i.prototype.renderEventElement=function(e,t,r){var s=this,a=t.classList.contains(_n)?"blockEvent":"event",o=t.classList.contains(he),l=this.parent.currentView==="Month"?this.getSpannedTime(e):this.getEventData(e),h={data:l,element:t,cancel:!1,type:a};this.parent.trigger(to,h,function(c){c.cancel?s.renderedEvents.pop():s.renderElement(r,t,o)})},i.prototype.getSpannedTime=function(e){var t=$({},e,null,!0);return t[this.fields.startTime].getDate()===t.data[this.fields.startTime].getDate()&&(t[this.fields.startTime]=t.data[this.fields.startTime]),t[this.fields.endTime].getDate()===t.data[this.fields.endTime].getDate()&&(t[this.fields.endTime]=t.data[this.fields.endTime]),t},i.prototype.getEventData=function(e){var t=$({},e,null,!0);return t[this.fields.startTime]=e.data[this.fields.startTime],t[this.fields.endTime]=e.data[this.fields.endTime],t},i.prototype.renderElement=function(e,t,r){r===void 0&&(r=!1),this.maxOrIndicator&&r&&this.setMaxEventHeight(t,e);var s=e.querySelector("."+ir);if(s)s.appendChild(t);else{var a=R("div",{className:ir});a.appendChild(t),e.appendChild(a)}},i.prototype.getMoreIndicatorElement=function(e,t,r){var s=R("div",{className:$t,innerHTML:this.getMoreIndicatorText(e),attrs:{role:"button",tabindex:"0","aria-label":this.parent.globalize.formatNumber(e)+" "+this.parent.localeObj.getConstant("moreEvents"),"data-count":e.toString(),"data-start-date":t.getTime().toString(),"data-end-date":r.getTime().toString()}});return s},i.prototype.getMoreIndicatorText=function(e){return"+"+this.parent.globalize.formatNumber(e)+"&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))},i.prototype.removeHeightProperty=function(e){for(var t=[].slice.call(this.element.querySelectorAll("."+e+" tbody tr")),r=0,s=t;r<s.length;r++){var a=s[r];a.firstElementChild.style.height=""}},i.prototype.setMaxEventHeight=function(e,t){var r=Hu(t.querySelector("."+qu)),s=t.offsetHeight-r-(this.maxHeight?0:this.moreIndicatorHeight);de(e,{height:s+"px","align-items":"center"})},i.prototype.destroy=function(){this.element=null,this.fields=null,this.maxHeight=null,this.withIndicator=null,this.maxOrIndicator=null,this.moreIndicatorHeight=null,this.removeEventListener(),n.prototype.destroy.call(this)},i}(gp),NN=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Cs=2,LN=22,pg=18,VN=function(n){NN(i,n);function i(e,t){var r=n.call(this,e)||this;r.startHour=r.parent.activeView.getStartHour(),r.endHour=r.parent.activeView.getEndHour(),r.slotCount=r.parent.activeViewOptions.timeScale.slotCount,r.interval=r.parent.activeViewOptions.timeScale.interval,r.day=0,r.rowIndex=0,r.cellTops=[],r.renderType=t,r.eventContainers=[].slice.call(r.element.querySelectorAll("."+yh));var s=[].slice.call(r.element.querySelectorAll("."+$e+" tbody tr"));return r.dayLength=s.length===0?0:s[0].children.length,r.content=r.parent.element.querySelector("."+Cb+"."+$e),r}return i.prototype.getSlotDates=function(){if(this.slots=[],this.slots.push(this.parent.activeView.renderDates.map(function(t){return+t})),this.parent.activeViewOptions.headerRows.length>0&&this.parent.activeViewOptions.headerRows.slice(-1)[0].option!=="Hour"){this.renderType="day";var e=this.content.querySelector("."+se);this.cellWidth=this.parent.getElementWidth(e)/+(e.getAttribute("colspan")||1),this.slotsPerDay=1}else this.slotsPerDay=this.dayLength/this.dateRender.length},i.prototype.getOverlapEvents=function(e,t){var r=[];if(this.renderType==="day")for(var s=0,a=t;s<a.length;s++){var o=a[s];W(o[this.fields.startTime]).getTime()<=W(new Date(e.getTime())).getTime()&&W(o[this.fields.endTime]).getTime()>=W(new Date(e.getTime())).getTime()&&r.push(o)}else for(var l=0,h=t;l<h.length;l++){var o=h[l],c=o.data;(c.trimStartTime.getTime()<=e.getTime()&&c.trimEndTime.getTime()>e.getTime()||c.trimStartTime.getTime()===e.getTime()&&c.trimEndTime.getTime()===e.getTime())&&r.push(o)}return r},i.prototype.getSortComparerIndex=function(e,t){var r=-1,s=this.renderedEvents;if(s.length>0){var a=this.getOverlapSortComparerEvents(e,t,s),o=a.map(function(l){return l.Index});r=o.length>0?this.getSmallestMissingNumber(o):0}return r===-1?0:r},i.prototype.getOverlapSortComparerEvents=function(e,t,r){for(var s=[],a=function(u){if(o.renderType==="day"){var p=W(e).getTime(),f=W(t).getTime(),v=W(u[o.fields.startTime]).getTime(),m=W(u[o.fields.endTime]).getTime(),g=function(){var b=f-(ts(t)<=0?it:0);return b=p>b?p:b,m>=b&&v<=b};(v<=p&&m>=p||g()||v>p&&m<f)&&s.push(u)}else{var y=u.data;(y.trimStartTime.getTime()<=e.getTime()&&e.getTime()<y.trimEndTime.getTime()||e.getTime()<=y.trimStartTime.getTime()&&y.trimStartTime.getTime()<t.getTime())&&s.push(u)}},o=this,l=0,h=r;l<h.length;l++){var c=h[l];a(c)}return s},i.prototype.renderResourceEvents=function(){this.removeHeightProperty(Ga);var e="."+Ga+" tbody tr";this.addCellHeight(e,this.eventHeight,Cs,this.moreIndicatorHeight,0,!1);var t=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.renderedResources;if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction){for(var r=0,s=this.parent.crudModule.crudObj.sourceEvent.length;r<s;r++){var a=this.parent.crudModule.crudObj.sourceEvent[parseInt(r.toString(),10)];if(this.rowIndex=a.groupIndex,(!this.parent.uiStateValues.isGroupAdaptive||this.parent.uiStateValues.groupIndex===a.groupIndex&&this.parent.uiStateValues.isGroupAdaptive)&&this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,a),this.parent.crudModule.crudObj.targetEvent[parseInt(r.toString(),10)]&&this.parent.crudModule.crudObj.sourceEvent[parseInt(r.toString(),10)].groupIndex!==this.parent.crudModule.crudObj.targetEvent[parseInt(r.toString(),10)].groupIndex){var o=this.parent.crudModule.crudObj.targetEvent[parseInt(r.toString(),10)];this.rowIndex=o.groupIndex,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,o)}}this.parent.crudModule.crudObj.isCrudAction=!1}else for(var r=0;r<t.length;r++)this.rowIndex=r,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,t[parseInt(r.toString(),10)])},i.prototype.renderEvents=function(e,t,r){var s=e[this.fields.startTime],a=e[this.fields.endTime];if(!(s.getTime()<this.parent.minDate.getTime()||a.getTime()>this.parent.maxDate.getTime())){var o=e.data;s=this.getStartTime(e,o),a=this.getEndTime(e,o);var l=ei(e[this.fields.startTime],this.startHour,this.endHour),h=this.updateEventMinimumDuration(l,s,a);if(s=h.startDate,a=h.endDate,this.day=this.parent.getIndexOfDate(this.dateRender,W(new Date(s.getTime()))),!(this.day<0)){var c=this.getCellTd(),u=this.parent.rowAutoHeight?1:this.parent.activeViewOptions.maxEventsPerRow,p=d(this.parent.eventSettings.sortComparer)?this.getIndex(s):this.getSortComparerIndex(s,a);e.Index=p;var f=this.eventHeight,v=o.count,m=$({},e,null,!0);m[this.fields.startTime]=o[this.fields.startTime],m[this.fields.endTime]=o[this.fields.endTime];var g=W(new Date(this.dateRender[this.day].getTime())),y=ei(g,this.startHour,this.endHour),b=!0;if(this.isDayProcess()||m[this.fields.isAllDay]?b=!0:b=this.isValidEvent(m,s,a,y),s<=a&&b){var E=this.getEventWidth(s,a,e[this.fields.isAllDay],v);E=this.renderType==="day"?E-2:E;var w=0,A=0,D=this.getPosition(s,a,e[this.fields.isAllDay],this.day);E=E<=0?this.cellWidth:E,this.renderedEvents.push($({},e,null,!0)),d(this.cellTops[parseInt(t.toString(),10)])&&(this.cellTops[parseInt(t.toString(),10)]=this.getRowTop(t));var N=this.cellTops[parseInt(t.toString(),10)],x=N+(this.maxHeight?0:Cs)+p*(f+Cs);w=this.parent.enableRtl?0:D,A=this.parent.enableRtl?D:0;var j=(p+1)*(f+Cs)+this.moreIndicatorHeight,q=this.parent.activeViewOptions.maxEventsPerRow&&!this.parent.rowAutoHeight&&!this.parent.eventSettings.enableIndicator?p<u:this.maxOrIndicator?p<1:this.cellHeight>j;if(this.parent.rowAutoHeight||q){var L=void 0;if(d(this.inlineValue)?L=this.createAppointmentElement(e,t):L=this.parent.inlineModule.createInlineAppointmentElement(),this.applyResourceColor(L,e,"backgroundColor",this.groupOrder),de(L,{width:E+"px",left:w+"px",right:A+"px",top:x+"px"}),this.wireAppointmentEvents(L,e),this.parent.rowAutoHeight){var O=this.parent.element.querySelector("."+Te),P=this.parent.getElementWidth(O),F=O.offsetHeight===O.clientHeight&&O.offsetWidth===O.clientWidth;this.renderEventElement(e,L,c);var ie=this.getFirstChild(t);this.updateCellHeight(ie,j),F&&(O.offsetWidth>O.clientWidth||P!==this.parent.getElementWidth(O))&&this.adjustAppointments(P)}else this.renderEventElement(e,L,c)}else for(var U=0;U<v;U++){var ne=c.querySelector("."+$t),Ae=this.parent.enableRtl?A:w;Ae=Math.floor(Ae/this.cellWidth)*this.cellWidth;var ge=this.interval/this.slotCount,Ve=this.parent.activeViewOptions.option==="TimelineMonth"||this.renderType==="day"||U!==0?new Date(this.dateRender[this.day+U].getTime()):new Date(s),rt=Z(this.dateRender[this.day+U],1);if(this.parent.activeViewOptions.option==="TimelineMonth"||this.renderType==="day"){var pt=this.getPosition(Ve,rt,e[this.fields.isAllDay],this.day+U);this.renderTimelineMoreIndicator(s,Ve,rt,f,ge,t,r,N,w,A,c,ne,Ae,pt)}else for(var ft=(Dt(a)-Dt(s))/at*this.slotCount/this.interval,vt=0;vt<ft&&(Ve=vt===0?new Date(Ve.getTime()):new Date(Ve.getTime()+6e4*ge),ft<1&&(Ve=this.adjustToNearestTimeSlot(Ve,ge)),rt=new Date(Ve.getTime()+6e4*ge),!(ft>=1&&rt.getTime()>a.getTime()));vt++){var Wt=this.getPosition(Ve,rt,!1,this.day+U);if(Ae>Wt)break;Ae=Wt,this.renderTimelineMoreIndicator(s,Ve,rt,f,ge,t,r,N,w,A,c,ne,Ae,Wt)}}}this.parent.renderTemplates()}}},i.prototype.adjustToNearestTimeSlot=function(e,t){var r=new Date(e),s=r.getHours()*60*60*1e3+r.getMinutes()*60*1e3,a=Math.floor(s/(t*60*1e3))*(t*60*1e3),o=new Date(r.getTime());return o.setHours(a/(60*60*1e3)%24),o.setMinutes(a%(60*60*1e3)/(60*1e3)),o},i.prototype.renderTimelineMoreIndicator=function(e,t,r,s,a,o,l,h,c,u,p,f,v,m){if(c=this.parent.enableRtl?u=m:m,v=this.parent.enableRtl?u:c,v=Math.floor(v/this.cellWidth)*this.cellWidth,p&&d(f)||!this.isAlreadyAvail(v,p)){var g=this.parent.activeViewOptions.option==="TimelineMonth"||this.renderType==="day"?new Date(+e):t,y=new Date(g.setMinutes(Math.floor(g.getMinutes()/a)*a)),b=new Date(y.getTime()+6e4*a),E=void 0;this.parent.activeViewOptions.group.resources.length>0&&!d(o)&&(E=o.toString());var w=this.getFilterEvents(t,r,y,b,E,l),A=this.cellHeight-this.moreIndicatorHeight;s=this.withIndicator?A-Cs:s;var D=Math.floor(A/(s+Cs)),N=this.parent.activeViewOptions.maxEventsPerRow&&!this.parent.eventSettings.enableIndicator?w.length-this.parent.activeViewOptions.maxEventsPerRow:w.length-D<=0?1:w.length-D,x=void 0;this.renderType==="day"?x=this.getMoreIndicatorElement(N,t,r):x=this.getMoreIndicatorElement(N,y,b),d(E)||x.setAttribute("data-group-index",E),x.style.top=h+this.cellHeight+"px",x.style.width=this.cellWidth+"px",x.style.left=Math.floor(c/this.cellWidth)*this.cellWidth+"px",x.style.right=Math.floor(u/this.cellWidth)*this.cellWidth+"px",x.style.transform="translateY(-100%)",this.renderElement(p,x),C.add(x,"click",this.moreIndicatorClick,this)}},i.prototype.updateCellHeight=function(e,t){var r=e.style.height===""?this.cellHeight:parseInt(e.style.height,10);if(t>r){if(de(e,{height:t+"px"}),this.parent.activeViewOptions.group.resources.length>0){var s=this.parent.element.querySelector("."+Ga+' tbody td[data-group-index="'+e.getAttribute("data-group-index")+'"]');s&&de(s,{height:t+"px"})}var a=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(e.parentElement.rowIndex+1)+") td");a&&de(a,{height:t+"px"})}},i.prototype.getFirstChild=function(e){var t="."+$e+" tbody td",r="";this.parent.activeViewOptions.group.resources.length>0&&(r='[data-group-index="'+e.toString()+'"]');var s=this.parent.element.querySelector(t+r);return s},i.prototype.updateBlockElements=function(){for(var e=[].slice.call(this.element.querySelectorAll("."+_n)),t=0,r=e;t<r.length;t++){var s=r[t],a=parseInt(s.getAttribute("data-group-index"),10),o=this.getFirstChild(a);s.style.height=o.offsetHeight-1+"px";var l=s.offsetWidth/o.offsetWidth;s.style.width=o.offsetWidth*l+"px"}for(var h=[].slice.call(this.element.querySelectorAll("."+Kl)),c=0,u=h;c<u.length;c++){var s=u[c],a=parseInt(s.getAttribute("data-group-index"),10);s.style.top=this.getRowTop(a)+this.getFirstChild(a).offsetHeight-pg+"px"}},i.prototype.getStartTime=function(e,t){var r=e[this.fields.startTime],s=ei(r,this.startHour,this.endHour);return this.isDayProcess()?r=e[this.fields.startTime]:s.startHour.getTime()>=t[this.fields.startTime]?r=s.startHour:s.endHour.getTime()<=t[this.fields.startTime]?r=this.getNextDay(s.startHour,t):r=t[this.fields.startTime],t.trimStartTime=e[this.fields.isAllDay]?s.startHour:t[this.fields.startTime],r},i.prototype.getNextDay=function(e,t){for(var r,s=1;s<=this.dateRender.length;s++)if(r=Z(e,s),this.parent.getIndexOfDate(this.dateRender,W(new Date(e.getTime())))!==-1)return t.count=t.count-1,r;return r},i.prototype.getEndTime=function(e,t){var r=e[this.fields.endTime],s=ei(r,this.startHour,this.endHour);return this.isDayProcess()?r=t[this.fields.endTime]:(r=t[this.fields.endTime],(s.endHour.getTime()<=t[this.fields.endTime]||e[this.fields.isAllDay])&&(r=s.endHour),s.startHour.getTime()>=t[this.fields.endTime].getTime()&&!e[this.fields.isAllDay]&&(r=this.getPreviousDay(s.startHour,s.endHour,t))),t.trimEndTime=e[this.fields.isAllDay]?s.endHour:t[this.fields.endTime],r},i.prototype.getPreviousDay=function(e,t,r){for(var s=1;s<=this.dateRender.length;s++){var a=Z(t,-s);if(this.parent.getIndexOfDate(this.dateRender,W(new Date(e.getTime())))!==-1){a=W(new Date(a.getTime())),a.setHours(t.getHours(),t.getMinutes(),t.getSeconds());var o=r.count,l=r[this.fields.endTime];return r.count=l.getHours()!==0||l.getMinutes()!==0?o-1:o,a}}return r[this.fields.endTime]},i.prototype.getEventWidth=function(e,t,r,s){return this.renderType==="day"||r?s*this.slotsPerDay*this.cellWidth:this.isSameDay(e,t)?this.getSameDayEventsWidth(e,t):this.getSpannedEventsWidth(e,t,s)},i.prototype.getSameDayEventsWidth=function(e,t){return(Dt(t)-Dt(e))/at*(this.cellWidth*this.slotCount)/this.getIntervalInMinutes(e)},i.prototype.getSpannedEventsWidth=function(e,t,r){var s=r*this.slotsPerDay*this.cellWidth,a,o=ei(W(new Date(e.getTime())),this.startHour,this.endHour),l=this.getSameDayEventsWidth(o.startHour,e);if(this.parent.getIndexOfDate(this.dateRender,W(new Date(t.getTime())))===-1)a=0;else{var h=ei(W(new Date(t.getTime())),this.startHour,this.endHour),c=h.startHour,u=h.endHour,p=this.interval/this.slotCount,f=this.getEndTimeOfLastSlot(c,u,p),v=u<f?u:f;a=this.getSameDayEventsWidth(t,v),a=this.slotsPerDay*this.cellWidth===a?0:a}var m=l+a;return s>m?s-m:s-l},i.prototype.getEndTimeOfLastSlot=function(e,t,r){var s=(t.getTime()-e.getTime())/6e4,a=Math.floor(s/r)*r,o=new Date(e);return o.setMinutes(a),o},i.prototype.isSameDay=function(e,t){var r=this.parent.getIndexOfDate(this.dateRender,W(new Date(e.getTime()))),s=this.parent.getIndexOfDate(this.dateRender,W(new Date(t.getTime())));return r===s},i.prototype.getAppointmentLeft=function(e,t,r){var s=this.isSameDay(t,e.startHour)?(Dt(t)-Dt(e.startHour))/(at*this.getIntervalInMinutes(t))*this.slotCount:0;if(r===0)return s;var a=Math.round((Dt(e.endHour)-Dt(e.startHour))/this.interval/at*this.slotCount);return a*r+s},i.prototype.getPosition=function(e,t,r,s){if(this.renderType==="day"||r)return s*this.slotsPerDay*this.cellWidth;var a=W(new Date(this.dateRender[parseInt(s.toString(),10)].getTime())),o=ei(a,this.startHour,this.endHour),l;return o.endHour.getTime()<=t.getTime()&&o.startHour.getTime()>=e.getTime()?l=this.getAppointmentLeft(o,o.startHour,s):o.endHour.getTime()<=t.getTime()?l=this.getAppointmentLeft(o,e,s):o.startHour.getTime()>=e.getTime()?l=this.getAppointmentLeft(o,o.startHour,s):l=this.getAppointmentLeft(o,e,s),l*this.cellWidth},i.prototype.getFilterEvents=function(e,t,r,s,a,o){return this.renderType==="day"?this.getFilteredEvents(e,t,a,o):this.getFilteredEvents(r,s,a,o)},i.prototype.getIntervalInMinutes=function(e){if(this.slotsPerDay!==1)return this.interval;var t=ei(W(new Date(e.getTime())),this.startHour,this.endHour);return(t.endHour.getTime()-t.startHour.getTime())/at},i.prototype.isAlreadyAvail=function(e,t){for(var r=[].slice.call(t.querySelectorAll("."+$t)),s=0;s<r.length;s++){var a=void 0;if(r&&(a=this.parent.enableRtl?r[parseInt(s.toString(),10)].style.right:r[parseInt(s.toString(),10)].style.left),parseInt(a,10)===Math.floor(e))return!0}return!1},i.prototype.getRowTop=function(e){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.element.querySelector("."+Te+' tbody td[data-group-index="'+e.toString()+'"]').offsetTop:0},i.prototype.getCellTd=function(){var e=this.parent.uiStateValues.isGroupAdaptive?0:this.rowIndex;return this.eventContainers[parseInt(e.toString(),10)]},i.prototype.renderBlockIndicator=function(e,t,r){if(!(this.parent.headerRows.length>0&&(this.parent.headerRows[this.parent.headerRows.length-1].option!=="Hour"||this.parent.headerRows[this.parent.headerRows.length-1].option!=="Date"))&&(t=Math.floor(t/this.cellWidth)*this.cellWidth+this.cellWidth-LN,!this.isAlreadyAvail(t,e))){var s=R("div",{className:"e-icons "+Kl});this.parent.activeViewOptions.group.resources.length>0&&s.setAttribute("data-group-index",r.toString()),this.parent.enableRtl?s.style.right=t+"px":s.style.left=t+"px",s.style.top=this.getRowTop(r)+this.cellHeight-pg+"px",this.renderElement(e,s)}},i.prototype.setMaxEventHeight=function(e,t){de(e,{height:this.cellHeight-(this.maxHeight?0:Cs)-(this.maxHeight?0:this.moreIndicatorHeight)+"px"})},i.prototype.isDayProcess=function(){return this.parent.currentView==="TimelineMonth"||!this.parent.activeViewOptions.timeScale.enable||this.parent.activeViewOptions.headerRows.length>0&&this.parent.activeViewOptions.headerRows.slice(-1)[0].option!=="Hour"},i.prototype.destroy=function(){this.renderType=null,this.eventContainers=null,this.dayLength=null,this.content=null,n.prototype.destroy.call(this),this.parent=null},i}(Eh),PN=function(){function n(i){this.parent=i,this.parent.on(Fn,this.inlineEdit,this)}return n.prototype.inlineEdit=function(i){if(this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(),i.type==="Cell"){var e=this.parent.element.querySelector("."+tr);e&&e.classList.contains(Je)&&this.parent.quickPopup.morePopup.hide(),this.removeInlineAppointmentElement(),this.cellEdit(i)}else this.parent.element.querySelector("."+Jt)!==i.element.querySelector("."+Jt)&&this.removeInlineAppointmentElement(),this.eventEdit(i)},n.prototype.cellEdit=function(i){var e=this.generateEventData(),t=i.element.cellIndex,r=this.getEventDaysCount(e);r>1&&(r=Math.round(r),r--,t=t-r);var s=W(new Date(""+e[this.parent.eventFields.startTime])).getTime(),a=W(new Date(""+e[this.parent.eventFields.endTime])).getTime(),o=i.groupIndex||0,l=this.parent.currentView==="Day"||this.parent.currentView==="Week"||this.parent.currentView==="WorkWeek";if(this.parent.activeViewOptions.timeScale.enable&&l){var h=e[this.parent.eventFields.startTime].getDay();this.createVerticalViewInline(e,h,o,t)}else this.parent.currentView==="Month"||!this.parent.activeViewOptions.timeScale.enable&&l?this.createMonthViewInline(e,o,s,a):this.createTimelineViewInline(e,s,a,o);var c=this.parent.element.querySelector("."+Jt);c&&c.focus()},n.prototype.eventEdit=function(i){var e=i.element.querySelector("."+Jt),t;if(T([i.element],Qc),e)t=e.value;else{var r=i.element.querySelector("."+Ke);if(d(r)||T([r],Oe),t=!d(i.data)&&i.data[this.parent.eventFields.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),e=this.inlineInputEle=R("input",{className:Jt,attrs:{value:t}}),M(i.element,"."+tr))i.element.insertBefore(e,r);else if(["Agenda","MonthAgenda"].indexOf(this.parent.currentView)>-1){var s=i.element.querySelector("."+Ql);d(s)&&(s=R("div",{className:Ql}),i.element.prepend(s)),s.insertBefore(e,s.firstChild)}else{var a=["TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth"].indexOf(this.parent.currentView)>-1?".e-inner-wrap":".e-appointment-details",o=i.element.querySelector(a);d(o)?i.element.querySelector(".e-appointment-details").prepend(e):r&&this.parent.activeViewOptions&&!this.parent.activeViewOptions.eventTemplate?o.insertBefore(e,r):o.prepend(e)}e.focus()}e.setSelectionRange(t.length,t.length)},n.prototype.createVerticalViewInline=function(i,e,t,r){var s,a=this.getEventDaysCount(i),o=new Zb(this.parent);o.initializeValues();var l=o.dateRender[parseInt(t.toString(),10)].map(function(f){return f.getDay()}).indexOf(e);if(a>=1){o.allDayElement=[].slice.call(this.parent.element.querySelectorAll("."+Me)),(s=o.slots).push.apply(s,this.parent.activeView.renderDates.map(function(f){return+f}));var h=[].slice.call(this.parent.element.querySelectorAll("."+ju)),c=0;h.length>0&&(c=Math.floor(this.parent.getElementHeight(this.parent.element.querySelector("."+Wn))/h[0].offsetHeight)-1),o.allDayLevel=c;var u=this.parent.getElementHeightFromClass(this.parent.element.querySelector("."+Tn),he),p=o.allDayElement.length>0?o.allDayElement[0].offsetTop:0;o.renderAllDayEvents(i,l,t,r,this.parent.allowInline,p,u)}else o.renderNormalEvents(i,l,t,r,this.parent.allowInline)},n.prototype.createMonthViewInline=function(i,e,t,r){var s=this.getEventDaysCount(i),a=this.parent.eventBase.cloneEventObject(i,t,r,s,!1,!1),o=new Eh(this.parent);o.dateRender=this.parent.activeView.renderDates,o.inlineValue=this.parent.allowInline;var l=this.parent.activeView.renderDates,h=this.parent.activeViewOptions.workDays,c="."+se;if(this.parent.activeViewOptions.group.resources.length>0){c+='[data-group-index="'+e+'"]';var u=this.parent.resourceBase.lastResourceLevel[parseInt(e.toString(),10)];l=u.renderDates,h=u.workDays}o.dateRender=l,o.workCells=[].slice.call(this.parent.element.querySelectorAll(c)),o.cellWidth=o.workCells[0].offsetWidth,o.cellHeight=o.workCells[0].offsetHeight,o.eventHeight=this.parent.getElementHeightFromClass(this.parent.monthModule.element||o.element,he),o.getSlotDates(h);for(var p=o.getRenderedDates(l),f=o.splitEvent(a,p||l),v=0,m=f;v<m.length;v++){var g=m[v];o.renderEvents(g,e)}var y=this.parent.element.querySelector("."+Jt);y.focus()},n.prototype.createTimelineViewInline=function(i,e,t,r){var s=this.getEventDaysCount(i),a=this.parent.eventBase.cloneEventObject(i,e,t,s,!1,!1),o=new VN(this.parent,this.parent.activeViewOptions.timeScale.enable?"hour":"day");o.dateRender=this.parent.activeView.renderDates,o.eventContainers=[].slice.call(this.parent.element.querySelectorAll("."+yh));var l=this.parent.element.querySelector("."+se);o.inlineValue=this.parent.allowInline,o.cellWidth=l.offsetWidth,o.cellHeight=l.offsetHeight;var h=this.parent.element.querySelectorAll("."+$e+" tbody tr").length===0?0:this.parent.element.querySelectorAll("."+$e+" tbody tr")[0].children.length;o.slotsPerDay=h/o.dateRender.length,o.eventHeight=this.parent.getElementHeightFromClass(o.element,he),o.renderEvents(a,r)},n.prototype.getEventDaysCount=function(i){var e=i[this.parent.eventFields.startTime],t=i[this.parent.eventFields.endTime],r=Math.abs(t.getTime()-e.getTime())/it;return r},n.prototype.generateEventData=function(i){var e=this.parent.element.querySelector("."+Jt),t=e?e.value:i?i.innerHTML:"",r={};return r[this.parent.eventFields.id]=this.parent.eventBase.getEventMaxID(),r[this.parent.eventFields.subject]=t,r[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,r[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,r[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.eventWindow.setDefaultValueToObject(r),this.parent.resourceBase&&this.parent.resourceBase.setResourceValues(r,this.parent.activeCellsData.groupIndex),r},n.prototype.documentClick=function(i){i&&i.value!==""?this.inlineCrudActions(i):this.removeInlineAppointmentElement()},n.prototype.inlineCrudActions=function(i){if(M(i,"."+Ka)){var e=this.generateEventData(i);this.parent.addEvent(e)}else{var t=M(i,"."+he),r=this.parent.getEventDetails(t);r[this.parent.eventFields.subject]=i.value;var s=void 0;r[this.parent.eventFields.id]===r[this.parent.eventFields.recurrenceID]&&(s="EditOccurrence",r[this.parent.eventFields.id]=this.parent.eventBase.getEventMaxID()),this.parent.saveEvent(r,s)}this.removeInlineAppointmentElement()},n.prototype.createInlineAppointmentElement=function(i){var e=R("div",{className:he+" "+Ka+" "+Qc}),t=R("div",{className:ap});e.appendChild(t);var r=this.inlineInputEle=R("input",{className:Jt});return t.appendChild(r),i&&this.parent.eventBase.applyResourceColor(e,i,"backgroundColor"),e},n.prototype.removeInlineAppointmentElement=function(){var i=[].slice.call(this.parent.element.querySelectorAll("."+Ka));i.length>0&&i.forEach(function(s){var a=s.querySelector("."+Jt);d(a)||a.blur(),ve(s)});var e=this.getInlineElement();if(e){var t=M(e,"."+he);I([t],Qc);var r=t.querySelector("."+Ke);d(r)||I([r],Oe),ve(e)}this.inlineInputEle=null},n.prototype.getInlineElement=function(){return this.inlineInputEle},n.prototype.destroy=function(){this.inlineInputEle=null,this.parent.off(Fn,this.inlineEdit)},n}(),Jb=function(){function n(){}return n.prototype.renderFormValidator=function(i,e,t,r){var s=this;this.element=t,this.formObj=new _S(i,{locale:r,customPlacement:function(a,o){s.errorPlacement(a,o)},rules:e,validationComplete:function(a){s.validationComplete(a)},focusout:function(a){s.focusOut(a)}})},n.prototype.focusOut=function(i){var e=i.relatedTarget;e&&(e.classList.contains("e-dlg-closeicon-btn")||e.classList.contains("e-close")||e.classList.contains(Me)||e.classList.contains(bt)||e.classList.contains(eh)||e.classList.contains(se)||e.classList.contains(Lb))?this.ignoreError=!0:this.ignoreError=!1},n.prototype.validationComplete=function(i){var e=this.element.querySelector("#"+i.inputName+"_Error");e&&(e.style.display=i.status==="failure"?"":"none")},n.prototype.errorPlacement=function(i,e){var t=e.getAttribute("for"),r=this.element.querySelector("#"+t+"_Error");!r&&!this.ignoreError&&this.createTooltip(i,e,t,""),d(r)||(r.querySelector(".e-error").innerHTML=e.innerHTML)},n.prototype.createTooltip=function(i,e,t,r){var s,a,o=i.getBoundingClientRect();this.element.classList.contains(Ri)?(s=this.element,a=this.element.getBoundingClientRect()):(s=this.element.querySelector(".e-schedule-dialog .e-dlg-content"),a=s.getBoundingClientRect());var l=R("div",{className:"e-tooltip-wrap e-popup "+eg,id:t+"_Error",styles:"display:"+r+";top:"+(o.bottom-a.top+s.scrollTop+9)+"px;left:"+(o.left-a.left+s.scrollLeft+o.width/2)+"px;"}),h=R("div",{className:"e-tip-content"});h.appendChild(e);var c=R("div",{className:"e-arrow-tip e-tip-top"});c.appendChild(R("div",{className:"e-arrow-tip-outer e-tip-top"})),c.appendChild(R("div",{className:"e-arrow-tip-inner e-tip-top"})),l.appendChild(h),l.appendChild(c),s.appendChild(l),l.style.left=parseInt(l.style.left,10)-l.offsetWidth/2+"px"},n.prototype.destroyToolTip=function(){if(this.element)for(var i=[].slice.call(this.element.querySelectorAll("."+eg)),e=0,t=i;e<t.length;e++){var r=t[e];ve(r)}this.formObj&&this.formObj.element&&this.formObj.reset()},n.prototype.destroy=function(){this.formObj&&this.formObj.element&&!this.formObj.isDestroyed&&this.formObj.destroy(),this.formObj=null,this.element=null},n}(),HN="e-field",fg=function(){function n(i){this.isMultipleEventSelect=!1,this.isCrudAction=!1,this.parent=i,this.l10n=this.parent.localeObj,this.fieldValidator=new Jb,this.render(),this.addEventListener()}return n.prototype.render=function(){this.renderQuickPopup(),this.renderMorePopup(),this.parent.prerenderDialogs&&this.renderQuickDialog()},n.prototype.renderQuickPopup=function(){var i=R("div",{className:Ri+" e-popup-close",attrs:{role:"dialog"}});this.parent.isAdaptive?(document.body.appendChild(i),T([i],Rn)):this.parent.element.appendChild(i),this.quickPopup=new xr(i,{targetType:this.parent.isAdaptive?"container":"relative",enableRtl:this.parent.enableRtl,open:this.quickPopupOpen.bind(this),close:this.quickPopupClose.bind(this),hideAnimation:this.parent.isAdaptive?{name:"ZoomOut"}:{name:"FadeOut",duration:150},showAnimation:this.parent.isAdaptive?{name:"ZoomIn"}:{name:"FadeIn",duration:150},collision:this.parent.isAdaptive?{X:"fit",Y:"fit"}:this.parent.enableRtl?{X:"flip",Y:"fit"}:{X:"none",Y:"fit"},position:this.parent.isAdaptive||this.parent.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"},viewPortElement:this.parent.isAdaptive?document.body:this.parent.element,zIndex:this.parent.isAdaptive?1004:3})},n.prototype.renderMorePopup=function(){var i='<div class="'+_c+'"><div class="'+RR+'">'+('<div class="'+Yu+'" title="'+this.l10n.getConstant("close")+'" tabindex="0" role="button"></div>')+('<div class="'+qc+'"><div class="'+qm+'" id="'+this.parent.element.id+'_more_popup"></div>')+('<div class="'+vn+" "+qn+'" tabindex="0" role="link"></div></div></div></div>'),e=R("div",{className:tr+" e-popup-close",innerHTML:i});this.parent.isAdaptive?(document.body.appendChild(e),T([e],Rn)):this.parent.element.appendChild(e),this.morePopup=new xr(e,{targetType:this.parent.isAdaptive?"container":"relative",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut",duration:300},showAnimation:{name:"ZoomIn",duration:300},open:this.morePopupOpen.bind(this),close:this.morePopupClose.bind(this),collision:this.parent.isAdaptive?{X:"fit",Y:"fit"}:this.parent.enableRtl?{X:"flip",Y:"fit"}:{X:"flip",Y:"flip"},viewPortElement:this.parent.isAdaptive?document.body:this.parent.element,zIndex:this.parent.isAdaptive?1002:2}),this.morePopup.element.setAttribute("role","dialog"),this.morePopup.element.setAttribute("aria-labelledby",this.parent.element.id+"_more_popup");var t=this.morePopup.element.querySelector("."+Yu);this.renderButton("e-round",qe+" "+el,!1,t,this.closeClick),C.add(this.morePopup.element.querySelector("."+vn),"click",this.navigationClick,this)},n.prototype.renderQuickDialog=function(){var i=[{buttonModel:{cssClass:"e-quick-alertok e-flat",isPrimary:!0},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-quick-alertcancel e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-quick-dialog-cancel e-disable e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)}];if(this.parent.eventSettings.editFollowingEvents){var e={buttonModel:{cssClass:"e-quick-alertfollowing e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)};i.splice(1,0,e)}this.quickDialog=new lu({animationSettings:{effect:"Zoom"},buttons:i,cssClass:zm,closeOnEscape:!0,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,beforeClose:this.beforeQuickDialogClose.bind(this),isModal:!0,position:{X:"center",Y:"center"},showCloseIcon:!0,target:document.body,visible:!1,width:"auto"});var t=R("div",{id:this.parent.element.id+"QuickDialog"});this.parent.element.appendChild(t),this.quickDialog.appendTo(t);var r=this.quickDialog.element.querySelector("."+jr);r&&(r.setAttribute("aria-label",this.l10n.getConstant("occurrence")),r.setAttribute("aria-label",r.innerHTML));var s=this.quickDialog.element.querySelector("."+Ui);s&&(s.setAttribute("aria-label",this.l10n.getConstant("series")),s.setAttribute("aria-label",s.innerHTML)),this.quickDialog.element.querySelector(".e-dlg-closeicon-btn")&&this.quickDialog.element.querySelector(".e-dlg-closeicon-btn").setAttribute("title",this.l10n.getConstant("close"))},n.prototype.renderButton=function(i,e,t,r,s){var a=new rh({cssClass:i,disabled:t,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,iconCss:e});a.appendTo(r),C.add(r,"click",s,this),I([r],qe)},n.prototype.quickDialogClass=function(i){var e=[jc,Uc,Yc,ma,Gm,Oe],t=this.quickDialog.element.querySelector("."+jr),r=this.quickDialog.element.querySelector("."+Ui),s=this.quickDialog.element.querySelector("."+Ym);switch(I([t,r],e),T([this.quickDialog.element.querySelector("."+ma)],Oe),this.parent.eventSettings.editFollowingEvents&&(T([s],Oe),I([this.quickDialog.element],Um)),i){case"Recurrence":T([t],jc),T([r],Uc),this.parent.eventSettings.editFollowingEvents&&(I([s],Oe),T([this.quickDialog.element],Um),T([s],jm));break;case"Delete":T([t],Yc),T([r],ma);break;case"Alert":T([t],[jr,Gm]),T([r],[Ui,Oe]);break}},n.prototype.applyFormValidation=function(){var i=this.quickPopup.element.querySelector("."+yr),e={};e[this.parent.eventSettings.fields.subject.name]=this.parent.eventSettings.fields.subject.validation,this.fieldValidator.renderFormValidator(i,e,this.quickPopup.element,this.parent.locale)},n.prototype.openRecurrenceAlert=function(){this.parent.prerenderDialogs||this.renderQuickDialog();var i=this.quickDialog.element.querySelector("."+jr);i&&(i.innerHTML=this.l10n.getConstant(this.parent.currentAction==="Delete"?"deleteEvent":"editEvent"),i.setAttribute("aria-label",i.innerHTML));var e=this.quickDialog.element.querySelector("."+Ym);e&&(e.innerHTML=this.l10n.getConstant("editFollowingEvent"),e.setAttribute("aria-label",e.innerHTML));var t=this.quickDialog.element.querySelector("."+Ui);t&&(t.innerHTML=this.l10n.getConstant(this.parent.currentAction==="Delete"?"deleteSeries":"editSeries"),t.setAttribute("aria-label",t.innerHTML)),this.quickDialog.content=this.l10n.getConstant("editContent"),this.quickDialog.header=this.l10n.getConstant(this.parent.currentAction==="Delete"?"deleteTitle":"editTitle"),this.quickDialogClass("Recurrence"),this.showQuickDialog("RecurrenceAlert")},n.prototype.openRecurrenceValidationAlert=function(i){this.parent.prerenderDialogs||this.renderQuickDialog(),this.quickDialogClass("Alert");var e=this.quickDialog.element.querySelector("."+jr);e.innerHTML=this.l10n.getConstant("ok"),e.setAttribute("aria-label",e.innerHTML);var t=this.quickDialog.element.querySelector("."+Ui);t.innerHTML=this.l10n.getConstant("cancel"),t.setAttribute("aria-label",t.innerHTML),this.quickDialog.header=this.l10n.getConstant("alert");var r;switch(i){case"wrongPattern":T([t],Oe),this.quickDialog.content=this.l10n.getConstant("wrongPattern");break;case"createError":T([t],Oe),this.quickDialog.content=this.l10n.getConstant("createError");break;case"sameDayAlert":T([t],Oe),this.quickDialog.content=this.l10n.getConstant("sameDayAlert");break;case"seriesChangeAlert":r=this.quickDialog.element.querySelector("."+ma),I([t,r],Oe),this.quickDialog.content=this.l10n.getConstant("seriesChangeAlert"),e.innerHTML=this.l10n.getConstant("yes"),t.innerHTML=this.l10n.getConstant("no"),r.innerHTML=this.l10n.getConstant("cancel");break;case"occurrenceAlert":T([t],Oe),this.quickDialog.content=this.l10n.getConstant("occurenceAlert");break}(!this.parent.enableRecurrenceValidation&&i==="wrongPattern"||this.parent.enableRecurrenceValidation)&&this.showQuickDialog("RecurrenceValidationAlert")},n.prototype.openDeleteAlert=function(){if(!this.parent.activeViewOptions.readonly){this.parent.prerenderDialogs||this.renderQuickDialog();var i=this.quickDialog.element.querySelector("."+jr);i&&(i.innerHTML=this.l10n.getConstant("delete"),i.setAttribute("aria-label",i.innerHTML));var e=this.quickDialog.element.querySelector("."+Ui);e&&(e.innerHTML=this.l10n.getConstant("cancel"),e.setAttribute("aria-label",e.innerHTML)),this.quickDialog.content=this.parent.activeEventData.event.length>1?this.l10n.getConstant("deleteMultipleContent"):this.l10n.getConstant("deleteContent"),this.quickDialog.header=this.parent.activeEventData.event.length>1?this.l10n.getConstant("deleteMultipleEvent"):this.l10n.getConstant("deleteEvent"),this.quickDialogClass("Delete"),this.showQuickDialog("DeleteAlert")}},n.prototype.openValidationError=function(i,e){this.parent.prerenderDialogs||this.renderQuickDialog(),this.quickDialog.header=this.l10n.getConstant("alert"),this.quickDialog.content=this.l10n.getConstant(i);var t=this.quickDialog.element.querySelector("."+jr);t&&(t.innerHTML=this.l10n.getConstant("ok"),t.setAttribute("aria-label",t.innerHTML));var r=this.quickDialog.element.querySelector("."+Ui);r&&(r.innerHTML=this.l10n.getConstant("cancel"),t.setAttribute("aria-label",r.innerHTML)),this.quickDialogClass("Alert"),this.showQuickDialog(i==="overlapAlert"?"OverlapAlert":"ValidationAlert",e)},n.prototype.showQuickDialog=function(i,e){var t=this;this.quickDialog.dataBind();var r={type:i,cancel:!1,element:this.quickDialog.element,data:$({},e||this.parent.activeEventData.event,null,!0)};this.parent.activeViewOptions.allowOverlap||(r.overlapEvents=this.parent.overlapAppointments),this.parent.trigger(Ua,r,function(s){s.cancel||t.quickDialog.show(),!t.parent.prerenderDialogs&&s.cancel&&t.destroyQuickDialog()})},n.prototype.createMoreEventList=function(i,e,t){var r=this,s=this.parent.eventFields,a=R("div",{className:Zo}),o=R("div",{className:zc});if(i.length===0)o=R("div",{className:Zo,innerHTML:this.l10n.getConstant("emptyContainer")});else for(var l=function(f){var v=f[s.subject]||h.parent.eventSettings.fields.subject.default||h.parent.localeObj.getConstant("addTitle"),m=R("div",{className:he,attrs:{"data-id":""+f[s.id],"data-guid":f.Guid,role:"button",tabindex:"0","aria-disabled":h.parent.eventBase.getReadonlyAttribute(f),"aria-label":h.parent.getAnnouncementString(f)}});f[s.isReadonly]&&T([m],"e-read-only");var g=void 0;if(d(h.parent.activeViewOptions.eventTemplate))m.appendChild(R("div",{className:Ke})),h.parent.sanitize(v,m.firstElementChild);else{var y=h.parent.element.id+"_"+h.parent.activeViewOptions.eventTemplateName+"eventTemplate";g=h.parent.getAppointmentTemplate()(f,h.parent,"eventTemplate",y,!1,void 0,void 0,h.parent.root),oe(g,m)}if(d(t)||m.setAttribute("data-group-index",t),!d(f[s.recurrenceRule])){var b=f[s.id]===f[s.recurrenceID]?no:ao;m.appendChild(R("div",{className:qe+" "+b}))}var E={data:$({},f,null,!0),element:m,cancel:!1};h.parent.trigger(to,E,function(w){if(!w.cancel){o.appendChild(m);var A=r.parent.isAdaptive||r.parent.currentView==="Year";r.parent.eventBase.wireAppointmentEvents(m,f,A),r.parent.eventBase.applyResourceColor(m,f,"backgroundColor",e)}})},h=this,c=0,u=i;c<u.length;c++){var p=u[c];l(p)}return a.appendChild(o),a},n.prototype.tapHoldEventPopup=function(i){var e=M(i.target,"."+he);this.parent.selectedElements=[],this.isMultipleEventSelect=!0,this.parent.eventBase.getSelectedEventElements(e),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents();var t=e.getAttribute("data-guid"),r=this.parent.eventBase.getEventByGuid(t);if(!d(r)){var s=r[this.parent.eventFields.subject]||this.l10n.getConstant("noTitle"),a='<div class="'+IR+'"><div class="'+Wc+'">'+('<button class="'+Is+'" title="'+this.l10n.getConstant("close")+'"></button>')+('<div class="'+Ke+'">'+s+"</div>")+('<button class="'+$r+'" title="'+this.l10n.getConstant("edit")+'"></button>')+('<button class="'+Fa+'" title="'+this.l10n.getConstant("delete")+'"></button></div></div>');this.quickPopup.element.innerHTML=a;var o=this.quickPopup.element.querySelector("."+Is);this.renderButton("e-flat e-round e-small",qe+" "+el,!1,o,this.closeClick);var l=this.parent.activeViewOptions.readonly||r[this.parent.eventFields.isReadonly],h=!this.parent.eventSettings.allowEditing||l,c=!this.parent.eventSettings.allowDeleting||l,u=this.quickPopup.element.querySelector("."+$r);u&&this.renderButton("e-flat e-round e-small",qe+" "+Ca,h,u,this.editClick);var p=this.quickPopup.element.querySelector("."+Fa);p&&this.renderButton("e-flat e-round e-small",qe+" "+Jm,c,p,this.deleteClick),this.beforeQuickPopupOpen(e,this.parent.eventBase.getPageCoordinates(i))}},n.prototype.isCellBlocked=function(i){var e={};if(e[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,e[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,e[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.activeViewOptions.group.resources.length>0){var t=i.element instanceof Array?i.element[0]:i.element,r=parseInt(t.getAttribute("data-group-index"),10);this.parent.resourceBase.setResourceValues(e,isNaN(r)?null:r)}return this.parent.eventBase.isBlockRange(e)},n.prototype.cellClick=function(i){var e=new Date(i.startTime.getTime());if(!this.parent.showQuickInfo||!this.parent.eventSettings.allowAdding||this.parent.currentView==="MonthAgenda"||this.isCellBlocked(i)||!this.parent.isMinMaxDate(new Date(e.setHours(0,0,0,0)))){this.quickPopupHide();return}var t=d(i.event)?i.element:i.event.target;if(this.parent.isAdaptive){this.quickPopupHide();var r=this.parent.element.querySelector("."+Jl);d(r)&&(r=R("div",{className:Jl,innerHTML:'<div class="e-title">+ '+this.l10n.getConstant("newEvent")+"</div>"}));var s=M(t,"."+se+",."+Me);s&&s.appendChild(r);return}var a=M(t,"."+se+",."+Me+",."+bt);if(!(d(a)||t.classList.contains($t))){var o=this.quickPopup.relateTo===a;if(o&&this.quickPopup.element.classList.contains(Je)){var l=this.quickPopup.element.querySelector("."+Ke);l&&l.focus();return}else this.quickPopup.element&&this.destroyPopupButtons("quickPopup");var h={};h[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,h[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,h[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay;var c=R("div",{className:Bc});c.appendChild(this.getPopupHeader("Cell",h)),c.appendChild(this.getPopupContent("Cell",i,h)),c.appendChild(this.getPopupFooter("Cell",h)),this.quickPopup.element.setAttribute("aria-label",this.l10n.getConstant("newEvent"));var u=c.querySelector("."+Ke);u&&X.createInput({element:u,properties:{placeholder:this.l10n.getConstant("addTitle")}}),d(this.parent.eventSettings.fields.subject.default)||(u.value=this.parent.eventSettings.fields.subject.default);var p=c.querySelector("."+Is);p&&this.renderButton("e-flat e-round e-small",qe+" "+el,!1,p,this.popupClose);var f=c.querySelector("."+eh);f&&this.renderButton("e-flat","",!1,f,this.detailsClick);var v=c.querySelector("."+th);v&&this.renderButton("e-flat e-primary","",this.parent.activeViewOptions.readonly,v,this.saveClick),this.morePopup&&this.morePopup.hide(),this.quickPopup.content=c,this.quickPopup.relateTo=a,this.quickPopup.dataBind(),this.beforeQuickPopupOpen(a,this.parent.eventBase.getPageCoordinates(i.event))}},n.prototype.isSameEventClick=function(i){var e=this.quickPopup.relateTo===M(i.element,"."+he);if(e&&this.quickPopup.element.classList.contains(Je)){var t=this.quickPopup.element.querySelector("."+$r);if(t&&t.focus(),!this.parent.isAdaptive){var r=this.quickPopup.element.querySelector("."+Os);r&&r.focus()}return!0}return!1},n.prototype.isQuickTemplate=function(i){return this.parent.quickInfoTemplates.templateType==="Both"||this.parent.quickInfoTemplates.templateType===i},n.prototype.eventClick=function(i){if(this.parent.eventTooltip&&this.parent.eventTooltip.close(),!!this.parent.showQuickInfo)if(this.parent.isAdaptive&&this.isMultipleEventSelect)this.updateTapHoldEventPopup(M(i.element,"."+he));else{var e=this.isSameEventClick(i);if(this.parent.selectedElements=[],e)return;this.quickPopup.element&&this.destroyPopupButtons("quickPopup");var t=i.event,r=R("div",{className:Fc});r.appendChild(this.getPopupHeader("Event",t)),r.appendChild(this.getPopupContent("Event",i,t)),r.appendChild(this.getPopupFooter("Event",t)),this.quickPopup.element.setAttribute("aria-label",this.l10n.getConstant("editEvent"));var s=this.parent.activeViewOptions.readonly||t[this.parent.eventFields.isReadonly],a=!this.parent.eventSettings.allowEditing||s,o=!this.parent.eventSettings.allowDeleting||s,l=r.querySelector("."+$r),h="e-flat e-round e-small";l&&this.renderButton(h,qe+" "+Ca,a,l,this.editClick);var c=r.querySelector("."+Fa);c&&this.renderButton(h,qe+" "+Jm,o,c,this.deleteClick);var u=r.querySelector("."+Is);u&&this.renderButton(h,qe+" "+el,!1,u,this.popupClose);var p=r.querySelector("."+Os);p&&this.renderButton("e-flat e-primary","",a,p,this.editClick);var f=r.querySelector("."+br);f&&this.renderButton("e-flat","",o,f,this.deleteClick),this.morePopup&&!M(i.element,"."+zc)&&this.morePopup.hide(),this.quickPopup.content=r,this.quickPopup.relateTo=this.parent.isAdaptive?document.body:M(i.element,"."+he),this.quickPopup.dataBind(),this.beforeQuickPopupOpen(i.element,this.parent.eventBase.getPageCoordinates(i.originalEvent))}},n.prototype.getPopupHeader=function(i,e){var t=R("div",{className:Wc});if(this.isQuickTemplate(i)&&this.parent.quickInfoTemplates.header){var r=$({},e,{elementType:i.toLowerCase()},!0),s=this.parent.element.id,a=[].slice.call(this.parent.getQuickInfoTemplatesHeader()(r,this.parent,"header",s+"_headerTemplate",!1));oe([].slice.call(a),t)}else{var o=void 0,l=void 0;switch(i){case"Cell":o='<div class="'+Wm+'"><button class="'+Is+'" title='+('"'+this.l10n.getConstant("close")+'"></button></div>');break;case"Event":l=this.getFormattedString(e),o='<div class="'+Wm+'">'+('<button class="'+($r+" "+qe)+'" title="'+this.l10n.getConstant("edit")+'"></button>')+('<button class="'+(Fa+" "+qe)+'" title="'+this.l10n.getConstant("delete")+'"></button>')+('<button class="'+Is+'" title="'+this.l10n.getConstant("close")+'"></button></div>')+('<div class="'+Ql+'"><div class="'+Ke+" "+Ot+'" ')+('title="'+(l.eventSubject?l.eventSubject.replaceAll('"',"'"):l.eventSubject)+'"></div></div >');break}var h=R("div",{innerHTML:o});if(i==="Event"){var c=h.querySelector("."+Ke);this.parent.sanitize(l.eventSubject,c)}oe([].slice.call(h.childNodes),t)}return t},n.prototype.getPopupContent=function(i,e,t){var r=R("div",{className:MR});if(this.isQuickTemplate(i)&&this.parent.quickInfoTemplates.content){var s=$({},t,{elementType:i.toLowerCase()},!0),a=this.parent.element.id,o=[].slice.call(this.parent.getQuickInfoTemplatesContent()(s,this.parent,"content",a+"_contentTemplate",!1));oe([].slice.call(o),r)}else{var l=void 0,h=void 0,c=void 0,u=this.getResourceText(e,i.toLowerCase()),p=this.parent.isResourceCollectionEmpty();switch(i){case"Cell":h=this.getFormattedString(t),l='<table class="'+$R+'"><tbody><tr><td><form class="'+yr+`">
                    <input class="`+Ke+" "+HN+'" type="text" name='+('"'+this.parent.eventFields.subject+'" /></form></td></tr><tr><td><div class="'+zu+'">')+('<div class="'+og+" "+qe+'"></div><div class="'+_m+" ")+(Ot+'">'+h.details+"</div></div>")+((this.parent.activeViewOptions.group.resources.length>0?'<div class="'+ng+'">'+('<div class="'+ag+" "+qe+' "></div><div class="'+Kc+" ")+(Ot+'"></div></div>'):"")+"</td></tr></tbody></table>");break;case"Event":c=this.getFormattedString(t),l='<div class="'+zu+'"><div class="'+og+" "+qe+'"></div><div class="'+ER+" "+Ot+'"><div class="'+_m+" "+Ot+'">'+c.details+"</div>",t[this.parent.eventFields.recurrenceRule]&&(l+='<div class="'+OR+" "+Ot+'">'+this.getRecurrenceSummary(t)+"</div>"),l+="</div></div>",t[this.parent.eventFields.location]&&(l+='<div class="'+zs+'"><div class="'+FR+" "+qe+'"></div><div class="'+$m+" "+Ot+'"></div></div>'),(t[this.parent.eventFields.startTimezone]||t[this.parent.eventFields.endTimezone])&&(l+='<div class="'+Gr+'"><div class="'+VR+" "+qe+'"></div><div class="'+PR+" "+Ot+'">'+this.getTimezone(t)+"</div></div>"),t[this.parent.eventFields.description]&&(l+='<div class="'+mn+'"><div class="'+qR+" "+qe+'"></div><div class="'+Km+" "+Ot+'"></div></div>'),this.parent.resourceCollection.length>0&&!p&&(l+='<div class="'+ng+'"><div class="'+ag+" "+qe+'"></div><div class="'+Kc+" "+Ot+'"></div></div>');break}var f=R("div",{innerHTML:l}),v=f.querySelector("form");if(v&&(v.onsubmit=function(){return!1}),t[this.parent.eventFields.location]){var m=f.querySelector("."+$m);d(m)||this.parent.sanitize(t[this.parent.eventFields.location],m)}if(t[this.parent.eventFields.description]){var g=f.querySelector("."+Km);d(g)||this.parent.sanitize(t[this.parent.eventFields.description],g)}if(u){var y=f.querySelector("."+Kc);d(y)||this.parent.sanitize(u,y)}oe([].slice.call(f.childNodes),r)}return r},n.prototype.getPopupFooter=function(i,e){var t=R("div",{className:Uu});if(this.isQuickTemplate(i)&&this.parent.quickInfoTemplates.footer){var r=$({},e,{elementType:i.toLowerCase()},!0),s=this.parent.element.id,a=[].slice.call(this.parent.getQuickInfoTemplatesFooter()(r,this.parent,"footer",s+"_footerTemplate",!1));oe([].slice.call(a),t)}else{var o=void 0;switch(i){case"Cell":o='<button class="'+(eh+" "+Ot)+'" title='+('"'+this.l10n.getConstant("moreDetails")+'">'+this.l10n.getConstant("moreDetails")+"</button>")+('<button class="'+th+" "+Ot+'" title="'+this.l10n.getConstant("save")+'">')+(this.l10n.getConstant("save")+"</button>");break;case"Event":o=this.parent.isAdaptive?"":'<button class="'+Os+" "+(Ot+'" title="'+this.l10n.getConstant("edit")+'">'+this.l10n.getConstant("edit")+"</button>")+('<button class="'+br+" "+Ot+'" title="'+this.l10n.getConstant("delete")+'">')+(this.l10n.getConstant("delete")+"</button>");break}var l=R("div",{innerHTML:o});oe([].slice.call(l.childNodes),t)}return t},n.prototype.getResourceText=function(i,e){var t=this.parent.isResourceCollectionEmpty();if(this.parent.resourceCollection.length===0||t)return null;var r="";if(this.parent.activeViewOptions.group.resources.length===0){var s=this.parent.resourceBase.resourceCollection.slice(-1)[0],a=s.dataSource;if(e==="event")for(var o=i.event,l=function(E){var w=o[s.field];if(w instanceof Array){if(w.indexOf(E[s.idField])>-1){var A=w[w.indexOf(E[s.idField])],D=a.filter(function(N){return N[s.idField]===A})[0];r+=r===""?D[s.textField]:", "+D[s.textField]}}else E[s.idField]===w&&(r=E[s.textField].toString())},h=0,c=a;h<c.length;h++){var u=c[h];l(u)}else r=a[0][s.textField].toString()}else if(e==="event"){for(var o=i.event,a=void 0,p,f=this.parent.resourceBase.resourceCollection.length-1;f>=0;f--)if(a=o[this.parent.resourceBase.resourceCollection[parseInt(f.toString(),10)].field],!d(a)){p=this.parent.resourceBase.resourceCollection[parseInt(f.toString(),10)];break}Array.isArray(a)||(a=[a]);var v=[],m=p.dataSource;a.forEach(function(A){var D,N=io(m,p.idField,A);N>-1&&(D=m[parseInt(N.toString(),10)][p.textField]),D&&v.push(D)}),r=v.join(", ")}else{var g=i,y=d(g.groupIndex)?0:g.groupIndex,b=this.parent.resourceBase.lastResourceLevel[parseInt(y.toString(),10)];r=b.resourceData[b.resource.textField]}return r},n.prototype.getFormattedString=function(i){var e=this.parent.eventFields,t=i[e.subject]||this.l10n.getConstant("noTitle"),r=i[e.startTime],s=i[e.endTime],a=this.getDateFormat(r,"long"),o=i[e.isAllDay]&&s.getHours()===0&&s.getMinutes()===0?this.getDateFormat(Z(new Date(s.getTime()),-1),"long"):this.getDateFormat(s,"long"),l=this.parent.getTimeString(r),h=this.parent.getTimeString(s),c="",u=s.getDate()!==r.getDate()&&(s.getTime()-r.getTime())/(60*60*1e3)<24?1:0;return i[e.isAllDay]?(c=a+" ("+this.l10n.getConstant("allDay")+")",(Dt(s)-Dt(r))/it>1&&(c+="&nbsp;-&nbsp;"+o+" ("+this.l10n.getConstant("allDay")+")")):(Dt(s)-Dt(r))/it>=1||u>0?c=a+" ("+l+")&nbsp;-&nbsp;"+o+" ("+h+")":c=a+" ("+(l+"&nbsp;-&nbsp;"+h)+")",{eventSubject:t,details:c}},n.prototype.moreEventClick=function(i,e,t){var r=this;this.quickPopupHide(!0);var s=this.morePopup.element.querySelector("."+Zo);s&&ve(s);var a=i.date.getTime().toString(),o=M(i.element,"."+$t+",."+se),l=this.parent.globalize.formatDate(i.date,{format:"E",calendar:this.parent.getCalendarMode()});this.morePopup.element.querySelector("."+qm).innerHTML=Ne(l,"single");var h=this.morePopup.element.querySelector("."+vn);h.innerHTML=this.getDateFormat(i.date,"d"),h.setAttribute("data-date",a),h.setAttribute("data-end-date",e.getTime().toString());var c;d(t)||(h.setAttribute("data-group-index",t),c=this.parent.resourceBase.lastResourceLevel[parseInt(t,10)].groupOrder);var u=this.createMoreEventList(i.event,c,t);if(this.morePopup.element.querySelector("."+_c).appendChild(u),I(this.morePopup.element.querySelector("."+qc).childNodes,Fu),W(i.date).getTime()===W(this.parent.getCurrentTime()).getTime()&&T(this.morePopup.element.querySelector("."+qc).childNodes,Fu),!this.parent.isAdaptive)if(this.parent.currentView.indexOf("Timeline")!==-1){var p=o.getAttribute("data-group-index"),f=new Date(parseInt(o.getAttribute("data-start-date"),10));f.setHours(f.getHours(),f.getMinutes(),0);var v=f.getTime().toString();if(d(p))this.morePopup.relateTo=this.parent.element.querySelector("."+Te+' tbody tr td[data-date="'+v+'"]');else if(this.morePopup.relateTo=this.parent.element.querySelector("."+Te+' tbody tr td[data-group-index="'+p+'"][data-date="'+v+'"]'),d(this.morePopup.relateTo))for(var m=[].slice.call(this.parent.element.querySelectorAll("."+Te+' tbody tr td[data-group-index="'+p+'"]')),g=0;g<m.length;g++){var y=m[parseInt(g.toString(),10)].getAttribute("data-date");y<v&&(this.morePopup.relateTo=m[parseInt(g.toString(),10)])}}else this.morePopup.relateTo=M(o,"."+se);this.parent.renderTemplates(function(){var b={type:"EventContainer",cancel:!1,element:r.morePopup.element,data:i};r.parent.trigger(Ua,b,function(E){E.cancel||r.morePopup.show()})})},n.prototype.saveClick=function(i){this.applyFormValidation(),this.dialogEvent=i,this.isCrudAction=!0,this.quickPopupHide()},n.prototype.detailsClick=function(i){var e=this.quickPopup.element.querySelector("."+Ke);e&&e.value!==""&&$(this.parent.activeCellsData,{subject:e.value}),this.dialogEvent=i,this.isCrudAction=!1,this.fieldValidator.destroyToolTip(),this.quickPopupHide(),this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add")},n.prototype.editClick=function(i){this.dialogEvent=i,this.quickPopupHide(!0);var e=this.parent.activeEventData.event;this.parent.currentAction="EditSeries",d(e[this.parent.eventFields.recurrenceRule])?this.parent.eventWindow.openEditor(e,this.parent.currentAction):(this.parent.currentAction="EditOccurrence",this.openRecurrenceAlert())},n.prototype.deleteClick=function(i){this.dialogEvent=i,this.quickPopupHide(!0),this.parent.currentAction="Delete",this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]?this.openRecurrenceAlert():this.openDeleteAlert()},n.prototype.updateMoreEventContent=function(){if(!this.morePopup.element.classList.contains("e-popup-close")){var i=this.morePopup.element.querySelector("."+Zo);i&&ve(i);var e=this.morePopup.element.querySelector("."+vn),t=new Date(parseInt(e.getAttribute("data-date"),10)),r=new Date(parseInt(e.getAttribute("data-end-date"),10)),s=e.getAttribute("data-group-index"),a,o;d(s)||(a=this.parent.resourceBase.lastResourceLevel[parseInt(s,10)],o=a.groupOrder);var l=this.parent.eventBase.filterEvents(t,r,this.parent.eventsProcessed,a),h=this.createMoreEventList(l,o,s);this.morePopup.element.querySelector("."+_c).appendChild(h)}},n.prototype.closeClick=function(i){this.dialogEvent=i,this.parent.currentView==="Year"&&this.parent.activeCellsData&&this.parent.activeCellsData.element&&this.parent.selectCell(this.parent.activeCellsData.element),this.quickPopupHide(),this.morePopup.hide()},n.prototype.dialogButtonClick=function(i){this.dialogEvent=i;var e=i.target,t=this.quickDialog.element.querySelector("."+Ui),r=this.parent.activeEventData.event;if(e.classList.contains(jc))switch(this.parent.currentAction=this.parent.currentAction==="Delete"?"DeleteOccurrence":"EditOccurrence",this.parent.currentAction){case"EditOccurrence":this.parent.eventWindow.openEditor(r,this.parent.currentAction);break;case"DeleteOccurrence":this.parent.crudModule.deleteEvent(r,this.parent.currentAction);break}else if(e.classList.contains(jm))switch(this.parent.currentAction=this.parent.currentAction==="Delete"?"DeleteFollowingEvents":"EditFollowingEvents",this.parent.currentAction){case"EditFollowingEvents":this.parent.eventWindow.openEditor(r,this.parent.currentAction);break;case"DeleteFollowingEvents":this.parent.crudModule.deleteEvent(r,this.parent.currentAction);break}else if(e.classList.contains(Uc))switch(this.parent.currentAction=this.parent.currentAction==="Delete"?"DeleteSeries":"EditSeries",this.parent.currentAction){case"EditSeries":this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(r,!0),this.parent.currentAction);break;case"DeleteSeries":this.parent.crudModule.deleteEvent(r,this.parent.currentAction);break}else e.classList.contains(Yc)?this.parent.crudModule.deleteEvent(r,this.parent.currentAction):!t.classList.contains(Oe)&&(e.classList.contains(jr)||e.classList.contains(Ui)&&!t.classList.contains(ma))&&(this.parent.uiStateValues.isIgnoreOccurrence=e.classList.contains(Ui),this.parent.eventWindow.eventSave(i,this.l10n.getConstant("ok")));d(this.quickDialog)||this.quickDialog.hide()},n.prototype.updateTapHoldEventPopup=function(i){var e=this.parent.eventBase.getSelectedEventElements(i);if(this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),e.length>0){var t=this.parent.eventBase.getEventByGuid(e[0].getAttribute("data-guid")),r=e.length===1?t[this.parent.eventFields.subject]||this.l10n.getConstant("noTitle"):"("+e.length+")&nbsp;"+this.l10n.getConstant("selectedItems");this.quickPopup.element.querySelector("."+Ke).innerHTML=r,e.length>1?T([this.quickPopup.element.querySelector("."+Ca)],Rt):I([this.quickPopup.element.querySelector("."+Ca)],Rt)}else this.parent.selectedElements=[],this.quickPopupHide()},n.prototype.getTimezone=function(i){var e="";return e+=i[this.parent.eventFields.startTimezone]||"",e+=e===""?"":" - ",e+=i[this.parent.eventFields.endTimezone]||"",e},n.prototype.getRecurrenceSummary=function(i){var e=this.parent.eventWindow.getRecurrenceEditorInstance();if(e){var t=e.getRuleSummary(i[this.parent.eventFields.recurrenceRule]);return t.charAt(0).toUpperCase()+t.slice(1)}return""},n.prototype.getDateFormat=function(i,e){return Ne(this.parent.globalize.formatDate(i,{skeleton:e,calendar:this.parent.getCalendarMode()}),"single")},n.prototype.getDataFromTarget=function(i){if(i.classList.contains(he))return this.parent.activeEventData.event;var e={startTime:this.parent.activeCellsData.startTime,endTime:this.parent.activeCellsData.endTime,isAllDay:this.parent.activeCellsData.isAllDay,groupIndex:this.parent.activeCellsData.groupIndex},t=this.parent.activeCellsData;return this.parent.eventWindow.convertToEventData(t,e),e},n.prototype.beforeQuickDialogClose=function(i){var e=this,t={event:i.event||this.dialogEvent,type:d(this.parent.activeEventData.event)?"ValidationAlert":d(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])?"DeleteAlert":"RecurrenceAlert",cancel:!1,data:this.parent.activeEventData.event,element:this.quickDialog.element};this.parent.trigger(jl,t,function(r){r.cancel||(e.parent.eventBase.focusElement(!0),e.parent.prerenderDialogs||e.destroyQuickDialog())})},n.prototype.beforeQuickPopupOpen=function(i,e){var t=this;this.parent.renderTemplates(function(){var r=t.quickPopup.element.querySelector("."+Fc),s=t.parent.isAdaptive?r?"ViewEventInfo":"EditEventInfo":"QuickInfo",a={type:s,cancel:!1,data:$({},t.getDataFromTarget(i),null,!0),target:i,element:t.quickPopup.element};t.parent.trigger(Ua,a,function(o){if(o.cancel)t.quickPopupHide(),t.destroyPopupButtons("quickPopup"),o.element.classList.contains(Je)&&t.quickPopupClose(),rr(t.quickPopup.element),t.isMultipleEventSelect=!1;else{var l=t.quickPopup.element.style.display;if(t.quickPopup.element.style.display="block",t.parent.isAdaptive)t.quickPopup.element.removeAttribute("style"),t.quickPopup.element.style.display="block",t.quickPopup.element.style.height=ce(s==="EditEventInfo"?65:window.innerHeight);else{var h=t.parent.virtualScrollModule&&t.parent.virtualScrollModule.isHorizontalScroll&&!d(M(i,"."+$e)),c=t.parent.element.querySelector("."+Te+" table");t.quickPopup.offsetX=h&&!t.parent.enableRtl?Sm(c)+10:10,t.quickPopup.offsetY=t.parent.virtualScrollModule&&!t.parent.virtualScrollModule.isHorizontalScroll?t.quickPopup.offsetY:0,t.quickPopup.collision={X:t.parent.enableRtl?"flip":"none",Y:"fit"},t.quickPopup.position={X:t.parent.enableRtl?"left":"right",Y:t.parent.enableRtl?"bottom":"top"},t.quickPopup.dataBind(),t.quickPopup.refreshPosition(null,!0);var u=dn(t.quickPopup.element,t.parent.element);if(u.indexOf(t.parent.enableRtl?"left":"right")>-1){t.quickPopup.offsetX=-i.offsetWidth-10-t.quickPopup.element.offsetWidth,h&&!t.parent.enableRtl&&(t.quickPopup.offsetX=Sm(c)+t.quickPopup.offsetX),t.quickPopup.dataBind(),t.quickPopup.refreshPosition(null,!0);var p=dn(t.quickPopup.element,t.parent.element);p.indexOf("left")>-1&&(t.quickPopup.position={X:"center",Y:"center"},t.quickPopup.collision={X:"fit",Y:"fit"},t.quickPopup.offsetX=-(t.quickPopup.element.offsetWidth/2),t.quickPopup.dataBind())}if(t.parent.virtualScrollModule&&!t.parent.virtualScrollModule.isHorizontalScroll&&(u.indexOf("top")>-1||u.indexOf("bottom")>-1)){var f=KO(c);t.quickPopup.offsetY=f,t.quickPopup.dataBind(),t.quickPopup.refreshPosition(null,!0)}if(t.quickPopup.position.X==="center"&&t.quickPopup.position.Y==="center"&&!d(e)&&e.clientX&&e.clientY){var v=e.clientX,m=e.clientY,g=i.getBoundingClientRect(),y=e.offsetY||Math.ceil(m-g.y),b=t.quickPopup.offsetY,E=dn(t.quickPopup.element,i),w=t.quickPopup.element.getBoundingClientRect(),A=document.elementFromPoint(v,m);(E.indexOf("top")>-1||E.indexOf("bottom")>-1||M(A,"."+Ri))&&(w.top<=m&&m<=w.top+w.height?(t.quickPopup.offsetY=b-w.height-10,t.quickPopup.dataBind(),E=dn(t.quickPopup.element,t.parent.element),E.indexOf("top")>-1&&(t.quickPopup.offsetY=b+y+10,t.quickPopup.dataBind())):dn(t.quickPopup.element,t.parent.element).indexOf("bottom")>-1&&(t.quickPopup.offsetY=b-y-Math.ceil(w.height)-10,t.quickPopup.dataBind()))}}r&&t.applyEventColor(),t.quickPopup.element.style.display=l,t.quickPopup.dataBind(),t.quickPopup.show()}})})},n.prototype.applyEventColor=function(){var i="";this.parent.currentView==="Agenda"||this.parent.currentView==="MonthAgenda"?i=this.parent.enableRtl?"border-right-color":"border-left-color":i="background-color";var e=this.parent.activeEventData.element.style[i];if(e!==""){var t=this.quickPopup.element.querySelector("."+Wc),r=this.quickPopup.element.querySelector("."+Uu);r&&r.offsetParent&&(t=this.quickPopup.element.querySelector("."+Ke),t&&(t.style.borderLeftColor=e,e="rgba("+e.match(/\d+/g).join()+",0.3)")),t&&(t.style.backgroundColor=e)}},n.prototype.quickPopupOpen=function(){if(this.parent.isAdaptive){this.quickPopup.element.style.top="0px";return}if(this.quickPopup.element.querySelector("."+Bc)){var i=this.quickPopup.element.querySelector("."+Ke);i&&i.focus()}else{var e=this.quickPopup.element.querySelector("."+Os);e&&e.focus();var t=this.quickPopup.element.querySelector("."+$r);t&&t.focus()}},n.prototype.quickPopupClose=function(){this.parent.eventBase.focusElement(),this.quickPopup.relateTo="."+se,this.fieldValidator.destroyToolTip(),this.quickPopup.element.querySelectorAll(".e-formvalidator").length&&this.fieldValidator.destroy(),this.destroyPopupButtons("quickPopup"),rr(this.quickPopup.element)},n.prototype.morePopupOpen=function(){if(this.parent.isAdaptive){this.morePopup.element.style.top="0px",this.morePopup.element.style.left="0px",this.morePopup.element.style.height=ce(window.innerHeight);return}this.morePopup.element.querySelector("."+vn).focus(),this.morePopup.refreshPosition()},n.prototype.morePopupClose=function(){var i=this.parent.element.querySelector("."+zc);i&&ve(i)},n.prototype.popupClose=function(i){this.dialogEvent=i,this.isCrudAction=!1,this.quickPopupHide(!0)},n.prototype.quickPopupHide=function(i){var e=this;if(this.quickPopup.element.classList.contains(Je)){var t=this.quickPopup.element.querySelector("."+Bc),r;if(t){var s=this.quickPopup.element.querySelector(".e-formvalidator");if(this.isCrudAction&&s&&!s.ej2_instances[0].validate())return;var a=this.parent.eventFields,o=this.parent.eventWindow.getObjectFromFormData(Ri);this.parent.eventWindow.setDefaultValueToObject(o),o[a.id]=this.parent.eventBase.getEventMaxID(),o[a.startTime]=this.parent.activeCellsData.startTime,o[a.endTime]=this.parent.activeCellsData.endTime,o[a.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.resourceBase&&this.parent.resourceBase.setResourceValues(o),r=o}else r=this.parent.activeEventData.event;var l=this.quickPopup.element.querySelector("."+Fc),h={event:this.dialogEvent,type:this.parent.isAdaptive?l?"ViewEventInfo":"EditEventInfo":"QuickInfo",cancel:!1,data:r,element:this.quickPopup.element,target:t?this.parent.activeCellsData.element:this.parent.activeEventData.element};this.parent.trigger(jl,h,function(c){if(!c.cancel&&e.quickPopup.element.classList.contains("e-popup-open")){if(t&&e.isCrudAction&&(e.parent.currentAction="Add",e.parent.crudModule.addEvent(c.data)),i){var u=e.quickPopup.hideAnimation;e.quickPopup.hideAnimation=null,e.quickPopup.hide(),e.quickPopup.hideAnimation=u}else e.quickPopup.hide();e.isMultipleEventSelect=!1,e.isCrudAction=!1}})}},n.prototype.navigationClick=function(i){var e=M(i.target,"."+qn);if(!d(e)){var t=this.parent.getDateFromElement(i.currentTarget);d(t)||(this.closeClick(i),this.parent.setProperties({selectedDate:t},!0),this.parent.changeView(this.parent.getNavigateView(),i))}},n.prototype.documentClick=function(i){var e=i.event.target,t=!!M(e,".e-dialog"),r="."+Ri+",."+bt+",."+Me+",."+se+",."+he;t||(r+=",.e-popup");var s=this.parent.element.querySelector("."+Ri);(s&&s.childElementCount>0&&!M(e,r)||!M(e,r))&&(this.quickPopupHide(),this.parent.removeNewEventElement());var a=this.parent.allowInline?this.parent.inlineModule.getInlineElement():null;a&&a!==e&&this.parent.inlineModule.documentClick(a),M(e,"."+he+",."+bt)&&this.parent.removeNewEventElement();var o=M(e,"."+Ri)||M(e,"."+zm),l=e.classList.contains(Os)||e.classList.contains($r)||e.classList.contains(Ca);(l||!o&&!M(e,"."+tr)&&e.classList&&!e.classList.contains($t)&&!M(e,"."+tr+"."+Je)&&!M(e,"."+se))&&this.morePopup.hide()},n.prototype.onClosePopup=function(i){d(i)||(this.dialogEvent=i),this.quickPopupHide(),(d(i)||!d(i)&&i.action!=="escape"||this.parent.inlineModule&&this.parent.element.querySelector("."+Ka))&&this.parent.eventBase.focusElement()},n.prototype.addEventListener=function(){this.parent.on(Ir,this.cellClick,this),this.parent.on(On,this.eventClick,this),this.parent.on(Or,this.documentClick,this),this.parent.on(Fi,this.updateMoreEventContent,this)},n.prototype.removeEventListener=function(){this.parent.off(Ir,this.cellClick),this.parent.off(On,this.eventClick),this.parent.off(Or,this.documentClick),this.parent.off(Fi,this.updateMoreEventContent)},n.prototype.destroyPopupButtons=function(i){for(var e=i==="quickPopup"?this.quickPopup:this.morePopup,t=[].slice.call(e.element.querySelectorAll(".e-control.e-btn")),r=0,s=t;r<s.length;r++){var a=s[r],o=a.ej2_instances?a.ej2_instances[0]:null;o&&o.destroy()}if(i==="quickPopup"){var l=e.element.querySelector("input."+Ke);l&&l.remove();var h=this.quickPopup.element.querySelector("form."+yr);h&&(rr(h),h.remove()),this.parent.resetTemplates(["content","header","footer"])}},n.prototype.refreshQuickDialog=function(){this.destroyQuickDialog(),this.parent.prerenderDialogs&&this.renderQuickDialog()},n.prototype.refreshQuickPopup=function(){this.destroyQuickPopup(),this.renderQuickPopup()},n.prototype.refreshMorePopup=function(){this.destroyMorePopup(),this.renderMorePopup()},n.prototype.destroyQuickDialog=function(){this.quickDialog&&this.quickDialog.element&&(this.quickDialog.destroy(),ve(this.quickDialog.element),this.quickDialog=null)},n.prototype.destroyQuickPopup=function(){this.quickPopup.element&&(this.destroyPopupButtons("quickPopup"),this.quickPopup.destroy(),ve(this.quickPopup.element),this.quickPopup=null)},n.prototype.destroyMorePopup=function(){this.morePopup.element&&(this.destroyPopupButtons("morePopup"),this.morePopup.destroy(),ve(this.morePopup.element),this.morePopup=null)},n.prototype.destroy=function(){this.quickPopup.element.querySelectorAll(".e-formvalidator").length&&this.fieldValidator.destroy(),this.removeEventListener(),this.destroyQuickPopup(),this.destroyMorePopup(),this.destroyQuickDialog(),this.dialogEvent=null,this.parent=null,this.l10n=null,this.isCrudAction=null,this.fieldValidator=null,this.isMultipleEventSelect=null},n}(),Xu=function(){function n(i){this.parent=i,this.tooltipObj=new wS({animation:{close:{effect:"FadeOut"}},content:"No title",position:"BottomRight",offsetY:10,mouseTrail:!this.parent.isAdaptive,showTipPointer:!1,cssClass:this.parent.cssClass+" "+UR,target:this.getTargets(),beforeRender:this.onBeforeRender.bind(this),beforeClose:this.onTooltipClose.bind(this),beforeOpen:this.onTooltipOpen.bind(this),enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer}),this.tooltipObj.appendTo(this.parent.element)}return n.prototype.getTargets=function(){var i=[];return this.parent.activeViewOptions.group.headerTooltipTemplate&&i.push("."+ti),this.parent.eventSettings.enableTooltip&&i.push("."+he),i.join(",")},n.prototype.onBeforeRender=function(i){var e=this;if(this.parent.uiStateValues.isSwipeScroll){i.cancel=!0;return}if(d(i.target.getAttribute("data-tooltip-id"))){if(i.target.classList.contains(ti)&&this.parent.activeViewOptions.group.resources.length>0){if(i.target.closest("."+Tb)){i.cancel=!0;return}var t=void 0;if(this.parent.activeView.isTimelineView()){var r=parseInt(i.target.getAttribute("data-group-index"),10);t=this.parent.resourceBase.lastResourceLevel[parseInt(r.toString(),10)]}else{var s=i.target.parentNode.sectionRowIndex,a=i.target.cellIndex;t=this.parent.activeView.getColumnLevels()[parseInt(s.toString(),10)][parseInt(a.toString(),10)]}var o={resource:t.resource,resourceData:t.resourceData},l=R("div"),h=this.parent.element.id+"_headerTooltipTemplate",c=[].slice.call(this.parent.getHeaderTooltipTemplate()(o,this.parent,"headerTooltipTemplate",h,!1));oe(c,l),this.setContent(l),this.parent.renderTemplates();return}var u=this.parent.eventBase.getEventByGuid(i.target.getAttribute("data-guid"));if(d(u)){this.setContent("No Title");return}if(d(this.parent.eventSettings.tooltipTemplate)){var p=this.parent.globalize,f=this.parent.eventFields,v=new Date(""+u[f.startTime]),m=new Date(""+u[f.endTime]);m=m.getTime()-v.getTime()!==0&&m.getHours()===0&&m.getMinutes()===0?new Date(m.setMilliseconds(-1e3)):m;var g=W(new Date(""+v)),y=W(new Date(""+m)),b=u[f.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),E=d(u[f.location])?"":u[f.location],w="",A="",D="";w=p.formatDate(v,{type:"date",skeleton:"MMMd",calendar:this.parent.getCalendarMode()}),A=p.formatDate(v,{type:"date",skeleton:"medium",calendar:this.parent.getCalendarMode()}),D=p.formatDate(m,{type:"date",skeleton:"medium",calendar:this.parent.getCalendarMode()}),w=Ne(w,"single"),A=Ne(A,"single"),D=Ne(D,"single");var N=this.parent.getTimeString(v),x=this.parent.getTimeString(m),j=void 0;g.getTime()===y.getTime()?(j=p.formatDate(v,{type:"date",skeleton:"long",calendar:this.parent.getCalendarMode()}),j=Ne(j,"single")):j=g.getFullYear()===y.getFullYear()?w+" - "+D:A+" - "+D;var q=u[f.isAllDay]?this.parent.localeObj.getConstant("allDay"):N+" - "+x,L='<div><div class="e-subject">'+b+'</div><div class="e-location">'+E+'</div><div class="e-details">'+j+'</div><div class="e-all-day">'+q+"</div></div>",O=function(){return L};this.setContent(fd(O))}else{var l=R("div"),h=this.parent.element.id+"_tooltipTemplate",c=[].slice.call(this.parent.getEventTooltipTemplate()(u,this.parent,"tooltipTemplate",h,!1));oe(c,l),this.setContent(l)}this.parent.renderTemplates(function(){if(e.parent&&e.parent.isReact&&!d(e.parent.eventSettings.tooltipTemplate)){var P=document.querySelector("."+Gc);P&&I([P],Gc)}})}},n.prototype.onTooltipOpen=function(i){i.element&&this.parent.isReact&&!d(this.parent.eventSettings.tooltipTemplate)&&T([i.element],Gc);var e=this.parent.eventBase.getEventByGuid(i.target.getAttribute("data-guid"));if(!d(e)){var t={cancel:!1,data:e,content:i.element,target:i.target};this.parent.trigger(UO,t,function(r){if(r.cancel){i.cancel=!0;return}i.element=r.content})}},n.prototype.onTooltipClose=function(i){i.element&&(I([i.element],Je),T([i.element],aR)),this.parent.isReact&&this.parent.eventWindow.dialogObject&&this.parent.eventWindow.dialogObject.visible||this.parent.resetTemplates(["tooltipTemplate","headerTooltipTemplate"])},n.prototype.setContent=function(i){this.tooltipObj.setProperties({content:i,windowCollision:!0},!0)},n.prototype.close=function(){this.tooltipObj.close()},n.prototype.destroy=function(){this.tooltipObj.destroy(),T([this.parent.element],"e-control"),this.tooltipObj=null,this.parent=null},n}(),BN=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),zt=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},FN="e-editor",Yi="e-input-wrapper",tu="e-input-wrapper-side",iu="e-repeat-element",Da="e-repeat-interval",eS="e-interval",Ji="e-days",Ch="e-non-week",WN="e-week-position",_N="e-day-position",wh="e-year-expander",vg="e-year-expander-element",yp="e-month-expander",qN="e-month-expand-wrapper",mg="e-month-expander-element",gg="e-month-expander-checkbox-wrapper",zN="e-repeat-on-week-selector",Aa="e-form-left",tl="e-form-right",ru="e-month-day",yg="e-month-expander-wrapper",bg="e-month-pos",Sg="e-month-week",Zu="e-end-on",jN="e-month-expander-label",UN="e-week-expander-label",YN="e-end-on-left",GN="e-monthday-element",Eg="e-end-on-element",bp="e-end-on-date",Cg="e-until-date",Sp="e-end-on-count",xa="e-recurrence-count",Gi="e-hide-recurrence-element",wg="e-rtl",ws="e-primary",Tg="e-active",Dg="e-recurrence-table",Ag="e-repeat-content",$N="e-repeat-content-wrapper",ka="none",Ia="daily",Ma="weekly",Oa="monthly",Ra="yearly",su="never",Na="until",La="count",il="text",rl="value",KN="last",xg="repeat",QN="repeatEvery",kg="on",Ig="end",XN="onDay",ZN="UNTIL",Mg="BYDAY",JN="BYMONTHDAY",eL="BYMONTH",tL="INTERVAL",iL="COUNT",rL="BYSETPOS",sL="FREQ",Og="DAILY",Rg="WEEKLY",Ng="MONTHLY",Lg="YEARLY",Ju="SU",ed="MO",td="TU",id="WE",rd="TH",sd="FR",nd="SA",Vg="sun",Pg="mon",Hg="tue",Bg="wed",Fg="thu",Wg="fri",_g="sat",vr="=",yi=";",nL=",",aL="first",oL="second",lL="third",hL="fourth",cL={none:"",daily:"days",weekly:"weeks",monthly:"months",yearly:"years"},sl={sun:Ju,mon:ed,tue:td,wed:id,thu:rd,fri:sd,sat:nd},qg=[Ji,Ch,Zu,eS,wh,yp],uL=[Ch],dL=[Ji,wh],pL=[Ji],fL=[Ji,Ch,wh,yp],zg=[bp,Sp],vL=[bp],mL=[Sp],gL=function(n){BN(i,n);function i(e,t){var r=n.call(this,e,t)||this;return r.defaultLocale={none:"None",daily:"Daily",weekly:"Weekly",monthly:"Monthly",month:"Month",yearly:"Yearly",never:"Never",until:"Until",count:"Count",first:"First",second:"Second",third:"Third",fourth:"Fourth",last:"Last",repeat:"Repeat",repeatEvery:"Repeat every",on:"Repeat On",end:"End",onDay:"Day",days:"Day(s)",weeks:"Week(s)",months:"Month(s)",years:"Year(s)",every:"every",summaryTimes:"time(s)",summaryOn:"on",summaryUntil:"until",summaryRepeat:"Repeats",summaryDay:"day(s)",summaryWeek:"week(s)",summaryMonth:"month(s)",summaryYear:"year(s)",monthWeek:"Month Week",monthPosition:"Month Position",monthExpander:"Month Expander",yearExpander:"Year Expander",repeatInterval:"Repeat Interval"},r.renderStatus=!1,r.dayButtons=[],r.monthButtons=[],r}return i.prototype.startState=function(e,t,r){this.showFormElement(),this.updateForm(e),this.freshOnEndForm(),this.updateEndOnForm(t),this.selectMonthDay(r),this.updateUntilDate(r),this.onMonthDay.setProperties({checked:!0})},i.prototype.preRender=function(){this.localeObj=new hi(this.getModuleName(),this.defaultLocale,this.locale),this.calendarUtil=Qu(this.calendarMode)},i.prototype.applyCustomClass=function(e){e&&T([this.element],e.split(" "))},i.prototype.initialize=function(){T([this.element],"e-"+this.getModuleName()),this.renderComponent(),typeof this.startDate=="string"&&this.setProperties({startDate:new Date(this.startDate)},!1),!d(this.value)&&this.value!==""?this.setRecurrenceRule(this.value):(d(this.repeatType.value)||(this.startState(this.repeatType.value.toString().toUpperCase(),this.endTypes[0],this.startDate),this.updateForm(this.repeatType.value.toString())),this.selectedType>0&&this.setProperties({value:this.getRecurrenceRule()},!1)),this.applyCustomClass(this.cssClass)},i.prototype.triggerChangeEvent=function(){var e=this;if(this.renderStatus){var t=this.getRecurrenceRule();this.trigger("change",{value:t},function(r){return e.setProperties({value:r.value},!1)})}},i.prototype.resetDayButton=function(){var e=[].slice.call(this.element.querySelectorAll("."+Ji+" button"));e.forEach(function(t){return I([t],[Tg,ws])})},i.prototype.daySelection=function(e){this.resetDayButton();var t=[0,1,2,3,4,5,6];this.rotateArray(t,this.firstDayOfWeek);var r=this.element.querySelector("."+Ji+' button[data-index="'+t.indexOf(e)+'"]');r&&T([r],[Tg,ws])},i.prototype.rtlClass=function(e){e?T([this.element],wg):I([this.element],wg)},i.prototype.updateUntilDate=function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+60),this.untilDateObj.setProperties({value:t})},i.prototype.selectMonthDay=function(e){var t=[Vg,Pg,Hg,Bg,Fg,Wg,_g];this.monthDate.setProperties({value:this.calendarUtil.getDate(e)}),this.monthWeekDays.setProperties({value:sl[t[e.getDay()]]}),this.monthValue.setProperties({value:""+this.calendarUtil.getMonth(e)}),this.monthWeekPos.setProperties({value:this.getDayPosition(e)}),this.daySelection(e.getDay())},i.prototype.updateForm=function(e){var t=this;this.repeatType.setProperties({value:e});var r=this.element.querySelector("."+Zu);switch(e===Ia?ii(r,[Aa],[tl]):ii(r,[tl],[Aa]),e){case ka:qg.forEach(function(s){return T([t.element.querySelector("."+s)],Gi)});break;case Ma:uL.forEach(function(s){return T([t.element.querySelector("."+s)],Gi)});break;case Oa:dL.forEach(function(s){return T([t.element.querySelector("."+s)],Gi)});break;case Ra:pL.forEach(function(s){return T([t.element.querySelector("."+s)],Gi)});break;case Ia:fL.forEach(function(s){return T([t.element.querySelector("."+s)],Gi)});break}},i.prototype.updateEndOnForm=function(e){var t=this;switch(this.endType.setProperties({value:e}),e){case su:zg.forEach(function(r){return T([t.element.querySelector("."+r)],Gi)});break;case Na:mL.forEach(function(r){return T([t.element.querySelector("."+r)],Gi)});break;case La:vL.forEach(function(r){return T([t.element.querySelector("."+r)],Gi)});break}},i.prototype.freshOnEndForm=function(){var e=this;zg.forEach(function(t){var r=e.element.querySelector("."+t);r&&I([r],Gi)})},i.prototype.showFormElement=function(){var e=this;qg.forEach(function(t){var r=e.element.querySelector("."+t);r&&I([r],Gi)})},i.prototype.renderDropdowns=function(){var e=this,t=this;this.repeatType=new bn({dataSource:this.getRepeatData(),floatLabelType:"Always",enableRtl:this.enableRtl,index:this.selectedType,fields:{text:il,value:rl},placeholder:this.localeObj.getConstant(xg),htmlAttributes:{title:this.localeObj.getConstant(xg)},change:function(s){t.setProperties({selectedType:e.frequencies.indexOf(s.value)},!1),t.element.querySelector("."+Ag).innerHTML=t.localeObj.getConstant(cL[s.value]),t.showFormElement(),t.updateForm(s.value),t.resetFormValues(),t.triggerChangeEvent()}}),this.repeatType.appendTo(this.element.querySelector("."+iu)),this.endType=new bn({dataSource:this.getEndData(),popupWidth:this.getPopupWidth(),floatLabelType:"Always",placeholder:this.localeObj.getConstant(Ig),enableRtl:this.enableRtl,index:1,fields:{text:il,value:rl},change:function(s){t.freshOnEndForm(),t.updateEndOnForm(s.value),t.resetFormValues(),t.triggerChangeEvent()}}),this.endType.appendTo(this.element.querySelector("."+Eg));var r=function(s){return new bn({dataSource:s,popupWidth:e.getPopupWidth(),enableRtl:e.enableRtl,fields:{text:il,value:rl},index:1,change:function(a){t.onWeekDay.setProperties({checked:!0}),t.resetFormValues(),t.triggerChangeEvent()}})};this.monthWeekPos=r(this.getMonthPosData()),this.monthWeekPos.appendTo(this.element.querySelector("."+bg)),this.monthWeekDays=r(this.getDayData("wide")),this.monthWeekDays.appendTo(this.element.querySelector("."+Sg)),this.monthValue=new bn({dataSource:this.getMonthData(),fields:{text:il,value:rl},enableRtl:this.enableRtl,index:7,change:function(s){t.resetFormValues(),t.triggerChangeEvent()}}),this.monthValue.appendTo(this.element.querySelector("."+vg))},i.prototype.setDefaultValue=function(){for(var e=[].slice.call(this.element.querySelectorAll(".e-control .e-numerictextbox")),t=0,r=e;t<r.length;t++){var s=r[t],a=s.ej2_instances[0];a.element.classList.contains(Da)?(a.value=1,a.dataBind()):a.element.classList.contains(xa)&&(a.value=10,a.dataBind())}},i.prototype.resetFormValues=function(){for(var e=[].slice.call(this.element.querySelectorAll('.e-control [type="text"]')),t=0,r=e;t<r.length;t++){var s=r[t],a=void 0;if(s.classList.contains("e-datepicker"))a=s.ej2_instances[0],a.value?(a.value=a.value,a.dataBind()):this.updateUntilDate(this.startDate);else if(s.classList.contains("e-dropdownlist"))a=s.ej2_instances[0],a.index=a.index||0,a.dataBind();else if(s.classList.contains("e-numerictextbox")){a=s.ej2_instances[0];var o=void 0;a.element.classList.contains(Da)?o=1:a.element.classList.contains(xa)?o=10:o=this.startDate.getDate(),a.value=a.value||o,a.dataBind()}}},i.prototype.getPopupWidth=function(){return H.isDevice?"100%":"auto"},i.prototype.renderDatePickers=function(){var e=this;this.untilDateObj=new ry({firstDayOfWeek:this.firstDayOfWeek,enableRtl:this.enableRtl,locale:this.locale,min:this.minDate,max:this.maxDate,format:d(this.dateFormat)?this.getFormat("dateFormats"):this.dateFormat,change:function(t){t.value&&e.triggerChangeEvent()}}),this.untilDateObj.appendTo(this.element.querySelector("."+Cg))},i.prototype.getFormat=function(e){var t;return this.locale==="en"||this.locale==="en-US"?t=V(e+".short",Lt(this.getCalendarMode())):t=V("main."+this.locale+".dates.calendars."+this.getCalendarMode()+"."+e+".short",Vt),t},i.prototype.dayButtonRender=function(){for(var e=this,t=[].slice.call(this.element.querySelectorAll("."+Ji+" button")),r=this,s=0,a=t;s<a.length;s++){var o=a[s],l=new rh({isToggle:!0,enableRtl:this.enableRtl},o);this.dayButtons.push(l),C.add(o,"click",function(h){var c=[].slice.call(e.element.querySelectorAll("."+Ji+" button."+ws)),u=h.target;u.classList.contains(ws)?c.length>1&&(I([u],ws),r.triggerChangeEvent()):(T([u],ws),r.triggerChangeEvent())})}},i.prototype.radioButtonRender=function(){var e=this;this.onMonthDay=new Rp({label:this.localeObj.getConstant(XN),enableRtl:this.enableRtl,name:"monthType",value:"day",change:function(){e.resetFormValues(),e.triggerChangeEvent()}}),this.onMonthDay.appendTo(this.element.querySelector("."+mg)),this.monthButtons.push(this.onMonthDay),this.onWeekDay=new Rp({label:this.localeObj.getConstant("monthExpander"),cssClass:"e-month-type",name:"monthType",enableRtl:this.enableRtl,value:"daypos",change:function(){e.resetFormValues(),e.triggerChangeEvent()}}),this.onWeekDay.appendTo(this.element.querySelector("."+yg)),this.monthButtons.push(this.onWeekDay)},i.prototype.numericTextboxRender=function(){var e=this;this.recurrenceCount=new _h({value:10,format:"#",enableRtl:this.enableRtl,min:1,max:999,change:function(){e.triggerChangeEvent()}}),this.recurrenceCount.appendTo(this.element.querySelector("."+xa)),this.monthDate=new _h({value:1,format:"#",enableRtl:this.enableRtl,min:1,max:31,change:function(){e.onMonthDay.setProperties({checked:!0}),e.triggerChangeEvent()}}),this.monthDate.appendTo(this.element.querySelector("."+ru)),this.repeatInterval=new _h({value:1,format:"#",min:1,max:999,enableRtl:this.enableRtl,floatLabelType:"Always",placeholder:this.localeObj.getConstant(QN),change:function(){e.triggerChangeEvent()}}),this.repeatInterval.appendTo(this.element.querySelector("."+Da))},i.prototype.renderComponent=function(){this.setTemplate(),this.renderDropdowns(),this.renderDatePickers(),this.dayButtonRender(),this.radioButtonRender(),this.numericTextboxRender()},i.prototype.rotateArray=function(e,t){for(var r,s=0;s<t;s++)r=e.shift(),e.push(r)},i.prototype.getEndData=function(){var e=this,t=[];return this.endTypes.forEach(function(r){t.push({text:e.localeObj.getConstant(r),value:r})}),t},i.prototype.getDayPosition=function(e){var t=new Date(e.getTime()),r=new Date(e.getTime()),s=e.getDay(),a=[];for(t=this.calendarUtil.getMonthStartDate(t),r=this.calendarUtil.getMonthEndDate(r);t<r;)t.getDay()===s&&a.push(t.getTime()),t.setDate(t.getDate()+1);return a.indexOf(e.getTime())===a.length-1?-1:a.indexOf(e.getTime())+1},i.prototype.getRepeatData=function(){var e=[],t=this;return this.frequencies.forEach(function(r){var s=r===ka?su:r;e.push({text:t.localeObj.getConstant(s),value:r})}),e},i.prototype.getMonthPosData=function(){var e=[aL,oL,lL,hL,KN],t={first:1,second:2,third:3,fourth:4,last:-1},r=this,s=[];return e.forEach(function(a){s.push({text:r.localeObj.getConstant(a),value:t[""+a]})}),s},i.prototype.getDayData=function(e){var t=[Vg,Pg,Hg,Bg,Fg,Wg,_g],r=[],s;if(this.rotateArray(t,this.firstDayOfWeek),this.locale==="en"||this.locale==="en-US"){var a="days.stand-alone.";s=V(a+e,Lt(this.getCalendarMode()))}else{var a="main."+this.locale+".dates.calendars."+this.getCalendarMode()+".days.stand-alone."+e;s=V(a,Vt)}for(var o=0,l=t;o<l.length;o++){var h=l[o],c=V(h,s);r.push({text:e==="narrow"?c:Ne(c,"single"),value:sl[""+h]})}return r},i.prototype.getMonthData=function(){var e=[],t;if(this.locale==="en"||this.locale==="en-US"){var r="months.stand-alone.wide";t=V(r,Lt(this.getCalendarMode()))}else{var r="main."+this.locale+".dates.calendars."+this.getCalendarMode()+".months.stand-alone.wide";t=V(r,Vt)}for(var s=0,a=Object.keys(t);s<a.length;s++){var o=a[s];e.push({text:Ne(V(o,t),"single"),value:o})}return e},i.prototype.setTemplate=function(){var e=this.getDayData("narrow"),t=this.getDayData("wide");this.element.innerHTML='<div class="'+FN+'"><div class="'+Yi+" "+Aa+'"><input type="text" tabindex="0" class="'+iu+'"label="'+iu.substr(2)+'" /></div><div class="'+Yi+" "+eS+" "+tl+'"><table  class="'+Dg+" "+$N+'"  role="none"><tr><td><input type="text" tabindex="0" id="'+this.element.id+"_"+Da+'" class="'+Da+'"title="'+this.localeObj.getConstant("repeatEvery")+'" /></td><td><span class="'+Ag+'"></span></td></tr></table></div><div class="'+tu+" "+Ji+" "+Aa+'"><div class='+UN+">"+this.localeObj.getConstant(kg)+'</div><button type="button" class="e-round" data-index="0" title="'+t[0].text+'">'+e[0].text+'</button><button type="button" class="e-round" data-index="1" title="'+t[1].text+'">'+e[1].text+'</button><button type="button" class="e-round" data-index="2" title="'+t[2].text+'">'+e[2].text+'</button><button type="button" class="e-round" data-index="3" title="'+t[3].text+'">'+e[3].text+'</button><button type="button" class="e-round" data-index="4" title="'+t[4].text+'">'+e[4].text+'</button><button type="button" class="e-round" data-index="5" title="'+t[5].text+'">'+e[5].text+'</button><button type="button" class="e-round" data-index="6" title="'+t[6].text+'">'+e[6].text+'</button></div><div class="'+tu+" "+Ch+" "+Aa+'"><div class='+jN+">"+this.localeObj.getConstant(kg)+'</div><div class="'+wh+'"><input class="'+vg+'" type="text" tabindex="0" title="'+this.localeObj.getConstant("yearExpander")+'"/></div><div class="'+yp+'"><table class="'+Dg+" "+qN+'" role="none"><tr><td><div class="'+Yi+" "+gg+'"><input class="'+mg+'"title="'+this.localeObj.getConstant("monthExpander")+'" type="radio"></div></td><td colspan="2"><div class="'+Yi+" "+GN+'"><input type="text" tabindex="0" id="'+this.element.id+"_"+ru+'" class="'+ru+'"title="'+this.localeObj.getConstant("on")+'" /></div></td></tr><tr><td><div class="'+Yi+" "+gg+" "+zN+'"><input class="'+yg+'"title="'+this.localeObj.getConstant("monthExpander")+'" type="radio"></div></td><td><div class="'+Yi+" "+WN+'" ><input type="text" tabindex="0" class="'+bg+'"title="'+this.localeObj.getConstant("monthPosition")+'" /></div></td><td><div class="'+Yi+" "+_N+'"><input type="text" tabindex="0" class="'+Sg+'"title="'+this.localeObj.getConstant("monthWeek")+'" /></div></td></tr></table></div></div><div class="'+tu+" "+Zu+" "+tl+'"><div class="'+Yi+" "+YN+'"><input type="text" tabindex="0" class="'+Eg+'"title="'+this.localeObj.getConstant(Ig)+'" /></div><div class="'+Yi+" "+bp+'" ><input type="text" tabindex="0" class="'+Cg+'"title="'+this.localeObj.getConstant(Na)+'" /></div><div class="'+Yi+" "+Sp+'"><input type="text" tabindex="0" id="'+this.element.id+"_"+xa+'" class="'+xa+'"title="'+this.localeObj.getConstant(La)+'" /></div></div></div></div>'},i.prototype.getSelectedDaysData=function(){var e=Mg+vr,t=[].slice.call(this.element.querySelectorAll("."+Ji+" button."+ws)),r=[Ju,ed,td,id,rd,sd,nd];this.rotateArray(r,this.firstDayOfWeek);for(var s=0;s<t.length;s++)e+=r[parseInt(t[parseInt(s.toString(),10)].getAttribute("data-index"),10)]+(s===t.length-1?"":nL);return e+yi},i.prototype.getSelectedMonthData=function(){var e;return this.onWeekDay.checked?e=Mg+vr+this.monthWeekDays.value+yi+rL+vr+this.monthWeekPos.value+yi:e=JN+vr+this.monthDate.value+yi,e},i.prototype.getIntervalData=function(){return tL+vr+this.repeatInterval.value+yi},i.prototype.getEndOnCount=function(){return iL+vr+this.recurrenceCount.value+yi},i.prototype.getYearMonthRuleData=function(){return eL+vr+this.monthValue.value+yi},i.prototype.updateWeekButton=function(e){var t=[Ju,ed,td,id,rd,sd,nd];this.rotateArray(t,this.firstDayOfWeek);for(var r=0,s=this.dayButtons;r<s.length;r++){var a=s[r],o=parseInt(a.element.getAttribute("data-index"),10);e.indexOf(t[parseInt(o.toString(),10)])!==-1?a.setProperties({isPrimary:!0}):a.setProperties({isPrimary:!1})}},i.prototype.updateMonthUI=function(){if(this.ruleObject.monthDay.length)this.monthDate.setProperties({value:this.ruleObject.monthDay[0]}),this.onMonthDay.setProperties({checked:!0});else{this.onWeekDay.setProperties({checked:!0}),this.monthWeekPos.setProperties({value:this.ruleObject.setPosition});for(var e=0,t=Object.keys(sl);e<t.length;e++){var r=t[e];if(sl[""+r]===this.ruleObject.day[0]){this.monthWeekDays.setProperties({value:this.ruleObject.day[0]});break}}}},i.prototype.updateUI=function(e,t){switch(this.repeatInterval.setProperties({value:this.ruleObject.interval}),t){case Na:this.untilDateObj.setProperties({value:this.ruleObject.until});break;case La:this.recurrenceCount.setProperties({value:this.ruleObject.count});break}switch(e){case Ma:this.updateWeekButton(this.ruleObject.day);break;case Ra:this.monthValue.setProperties({index:this.ruleObject.month[0]-1}),this.updateMonthUI();break;case Oa:this.updateMonthUI();break}},i.prototype.getUntilData=function(){if(!this.untilDateObj.value)return"";var e=gn(this.untilDateObj.value);return ZN+vr+e+yi},i.prototype.destroyComponents=function(){this.recurrenceCount.isDestroyed||(this.recurrenceCount.destroy(),this.recurrenceCount=null),this.monthDate.isDestroyed||(this.monthDate.destroy(),this.monthDate=null),this.repeatInterval.isDestroyed||(this.repeatInterval.destroy(),this.repeatInterval=null),this.untilDateObj.isDestroyed||(this.untilDateObj.destroy(),this.untilDateObj=null),this.repeatType.isDestroyed||(this.repeatType.destroy(),this.repeatType=null),this.endType.isDestroyed||(this.endType.destroy(),this.endType=null),this.monthWeekPos.isDestroyed||(this.monthWeekPos.destroy(),this.monthWeekPos=null),this.monthWeekDays.isDestroyed||(this.monthWeekDays.destroy(),this.monthWeekDays=null),this.monthValue.isDestroyed||(this.monthValue.destroy(),this.monthValue=null),this.onMonthDay.isDestroyed||(this.onMonthDay.destroy(),this.onMonthDay=null),this.onWeekDay.isDestroyed||(this.onWeekDay.destroy(),this.onWeekDay=null),this.dayButtons.forEach(function(e){e.isDestroyed||e.destroy()}),this.dayButtons=[],this.monthButtons.forEach(function(e){e.isDestroyed||e.destroy()}),this.monthButtons=[]},i.prototype.resetFields=function(){this.startState(ka,this.endTypes[0],this.startDate),this.setDefaultValue()},i.prototype.updateRuleUntilDate=function(e){if(this.untilDateObj.value&&e){var t=this.untilDateObj.value,r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes(),e.getMilliseconds());this.untilDateObj.setProperties({value:r})}},i.prototype.getCalendarMode=function(){return d(this.calendarMode)?"gregorian":this.calendarMode.toLowerCase()},i.prototype.getRuleSummary=function(e){return e===void 0&&(e=this.getRecurrenceRule()),eN(e,this.localeObj,this.locale,this.calendarMode)},i.prototype.getRecurrenceDates=function(e,t,r,s,a){return a=d(a)?this.startDate:a,cp(e,t,r,this.firstDayOfWeek,s,a,this.calendarMode)},i.prototype.getRecurrenceRule=function(){var e=sL+vr;switch(this.repeatType.value){case Ia:e+=Og+yi;break;case Ma:e+=Rg+yi+this.getSelectedDaysData();break;case Oa:e+=Ng+yi+this.getSelectedMonthData();break;case Ra:e+=Lg+yi+this.getSelectedMonthData()+this.getYearMonthRuleData();break;case ka:return""}switch(e+=this.getIntervalData(),this.endType.value){case Na:e+=this.getUntilData();break;case La:e+=this.getEndOnCount();break}return e},i.prototype.setRecurrenceRule=function(e,t){if(t===void 0&&(t=this.startDate),!e){this.repeatType.setProperties({value:ka});return}this.renderStatus=!1,this.ruleObject=vp(e);var r=this.ruleObject.count?La:this.ruleObject.until?Na:su;switch(this.ruleObject.freq){case Og:this.startState(Ia,r,t),this.updateUI(Ia,r);break;case Rg:this.startState(Ma,r,t),this.updateUI(Ma,r);break;case Ng:this.startState(Oa,r,t),this.updateUI(Oa,r);break;case Lg:this.startState(Ra,r,t),this.updateUI(Ra,r);break}this.renderStatus=!0,this.triggerChangeEvent()},i.prototype.detachInputs=function(){for(var e=[].slice.call(this.element.querySelectorAll("input")),t=0,r=e;t<r.length;t++){var s=r[t];Q(s)}},i.prototype.destroy=function(){if(!this.isDestroyed){this.destroyComponents(),n.prototype.destroy.call(this);var e=["e-"+this.getModuleName()];for(this.cssClass&&(e=e.concat(this.cssClass.split(" "))),I([this.element],e),this.detachInputs();this.element.firstElementChild;)this.element.removeChild(this.element.firstElementChild)}},i.prototype.getModuleName=function(){return"recurrenceeditor"},i.prototype.getPersistData=function(){return this.addOnPersist([])},i.prototype.render=function(){this.initialize(),this.rtlClass(this.enableRtl),this.renderStatus=!0,this.renderComplete()},i.prototype.onPropertyChanged=function(e,t){for(var r=0,s=Object.keys(e);r<s.length;r++){var a=s[r];switch(a){case"startDate":this.selectMonthDay(e.startDate),this.updateUntilDate(e.startDate),this.endType.setProperties({index:0});break;case"enableRtl":this.rtlClass(e.enableRtl);break;case"cssClass":t.cssClass&&I([this.element],t.cssClass.split(" ")),e.cssClass&&T([this.element],e.cssClass.split(" "));break;case"selectedType":this.repeatType.setProperties({index:this.selectedType});break;case"minDate":this.untilDateObj.setProperties({min:this.minDate});break;case"maxDate":this.untilDateObj.setProperties({max:this.maxDate});break;case"value":this.getRecurrenceRule()!==this.value&&this.setRecurrenceRule(this.value);break;case"calendarMode":this.calendarMode=e.calendarMode,this.calendarUtil=Qu(e.calendarMode);break;case"locale":case"frequencies":case"firstDayOfWeek":case"endTypes":this.refresh();break;case"dateFormat":this.untilDateObj.setProperties({format:e.dateFormat});break}}},zt([S(["none","daily","weekly","monthly","yearly"])],i.prototype,"frequencies",void 0),zt([S(["never","until","count"])],i.prototype,"endTypes",void 0),zt([S(0)],i.prototype,"firstDayOfWeek",void 0),zt([S(new Date)],i.prototype,"startDate",void 0),zt([S()],i.prototype,"dateFormat",void 0),zt([S("Gregorian")],i.prototype,"calendarMode",void 0),zt([S()],i.prototype,"cssClass",void 0),zt([S()],i.prototype,"value",void 0),zt([S(new Date(1900,0,1))],i.prototype,"minDate",void 0),zt([S(new Date(2099,11,31))],i.prototype,"maxDate",void 0),zt([S(0)],i.prototype,"selectedType",void 0),zt([_()],i.prototype,"change",void 0),zt([_()],i.prototype,"created",void 0),zt([_()],i.prototype,"destroyed",void 0),i=zt([Ft],i),i}(_i),mr="e-field",Va="e-recurrence-container",yL="e-recurrence-edit",bL="e-recurrence-edit-button",SL="e-recurrence-dialog",Ts="e-hide",jg=function(){function n(i){this.parent=i,this.l10n=this.parent.localeObj,this.fields=this.parent.eventFields,this.eventWindowTime={startTime:new Date,endTime:new Date},this.parent.prerenderDialogs&&this.renderEventWindow()}return n.prototype.renderEventWindow=function(){this.element=R("div",{id:this.parent.element.id+"_dialog_wrapper"}),this.parent.element.appendChild(this.element);var i={animationSettings:{effect:"Zoom"},content:this.getEventWindowContent(),cssClass:fr,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,height:this.parent.isAdaptive?"100%":"auto",minHeight:"300px",isModal:!0,showCloseIcon:!this.parent.isAdaptive,target:document.body,visible:!1,width:"500px",beforeOpen:this.onBeforeOpen.bind(this),beforeClose:this.onBeforeClose.bind(this)};this.parent.isAdaptive?(i.cssClass=fr+" "+Rn,this.parent.editorHeaderTemplate||(i.header='<div class="e-title-header"><div class="e-back-icon e-icons"></div><div class="e-title-text">'+this.l10n.getConstant("newEvent")+'</div><div class="e-save-icon e-icons"></div></div>')):(this.parent.editorFooterTemplate||this.renderDialogButtons(i),this.parent.editorHeaderTemplate||(i.header='<div class="e-title-text">'+this.l10n.getConstant("newEvent")+"</div>")),this.dialogObject=new lu(i,this.element),this.dialogObject.element.querySelector(".e-dlg-closeicon-btn")&&this.dialogObject.element.querySelector(".e-dlg-closeicon-btn").setAttribute("title",this.l10n.getConstant("close")),this.addEventHandlers(),T([this.element.parentElement],fr+"-container"),C.add(this.dialogObject.element,"keydown",this.preventEventSave,this),this.applyFormValidation()},n.prototype.renderDialogButtons=function(i){i.buttons=[{buttonModel:{content:this.l10n.getConstant("deleteButton"),cssClass:br,disabled:!this.parent.eventSettings.allowDeleting||this.parent.readonly},click:this.eventDelete.bind(this)},{buttonModel:{content:this.l10n.getConstant("saveButton"),cssClass:"e-primary "+Jo,isPrimary:!0,disabled:!this.parent.eventSettings.allowAdding||this.parent.readonly},click:this.eventSave.bind(this)},{buttonModel:{cssClass:Lb,content:this.l10n.getConstant("cancelButton")},click:this.dialogClose.bind(this)}]},n.prototype.addEventHandlers=function(){var i=this.element.querySelector("."+zR),e=this.element.querySelector("."+Qm);this.parent.isAdaptive&&!d(i)&&!d(e)&&(C.add(i,"click",this.dialogClose,this),C.add(e,"click",this.eventSave,this))},n.prototype.refresh=function(){this.destroy(!0),this.renderEventWindow()},n.prototype.refreshRecurrenceEditor=function(){if(this.recurrenceEditor){var i=this.recurrenceEditor.element;this.recurrenceEditor.destroy(),this.createRecurrenceEditor(i)}},n.prototype.setRecurrenceEditor=function(i){this.parent.editorTemplate&&(this.recurrenceEditor=i)},n.prototype.openEditor=function(i,e,t,r){if(this.parent.prerenderDialogs||this.renderEventWindow(),this.parent.currentAction=e,this.parent.removeNewEventElement(),this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(!0),this.parent.inlineModule.removeInlineAppointmentElement(),e==="Add"){var s={};this.cellClickAction=!t,this.parent.activeCellsData=i;var a=i;this.cellClickAction?this.convertToEventData(a,s):(this.parent.activeCellsData={startTime:a.startTime||a[this.fields.startTime],endTime:a.endTime||a[this.fields.endTime],isAllDay:a.isAllDay||a[this.fields.isAllDay],element:a.element,groupIndex:a.groupIndex},s=a),i=s}d(this.parent.editorHeaderTemplate)||(this.parent.resetTemplates(["editorHeaderTemplate"]),this.parent.isAdaptive&&!this.parent.editorFooterTemplate?this.dialogObject.header=this.createAdaptiveHeaderElement(i):this.dialogObject.header=this.getDialogHeader(i)),d(this.parent.editorFooterTemplate)||(this.parent.resetTemplates(["editorFooterTemplate"]),this.dialogObject.footerTemplate=this.getDialogFooter(i)),(!d(this.parent.editorHeaderTemplate)||!d(this.parent.editorFooterTemplate))&&(this.dialogObject.dataBind(),this.addEventHandlers()),d(this.parent.editorTemplate)?this.setEditorContent(i,e,r):this.renderFormElements(this.element.querySelector(".e-schedule-form"),i,e,r)},n.prototype.setEditorContent=function(i,e,t){switch(!this.parent.isAdaptive&&d(this.parent.editorTemplate)&&I([this.dialogObject.element.querySelector(".e-recurrenceeditor")],Oe),this.recurrenceEditor&&(this.recurrenceEditor.firstDayOfWeek=this.parent.activeViewOptions.firstDayOfWeek),e){case"Add":this.onCellDetailsUpdate(i,t);break;case"Save":case"EditOccurrence":case"EditSeries":case"EditFollowingEvents":e==="EditOccurrence"&&!this.parent.isAdaptive&&d(this.parent.editorTemplate)&&T([this.dialogObject.element.querySelector(".e-recurrenceeditor")],Oe),this.cellClickAction=!1,this.onEventDetailsUpdate(i);break}},n.prototype.setDialogContent=function(){this.dialogObject.content=this.getEventWindowContent(),this.dialogObject.dataBind(),this.applyFormValidation()},n.prototype.setDialogHeader=function(){d(this.parent.editorHeaderTemplate)?this.parent.isAdaptive?this.dialogObject.header='<div class="e-title-header"><div class="e-back-icon e-icons"></div><div class="e-title-text">'+this.l10n.getConstant("newEvent")+'</div><div class="e-save-icon e-icons"></div></div>':this.dialogObject.header='<div class="e-title-text">'+this.l10n.getConstant("newEvent")+"</div>":(this.parent.resetTemplates(["editorHeaderTemplate"]),this.parent.isAdaptive&&!this.parent.editorFooterTemplate?this.dialogObject.header=this.createAdaptiveHeaderElement():this.dialogObject.header=this.getDialogHeader()),this.dialogObject.dataBind(),this.addEventHandlers()},n.prototype.setDialogFooter=function(){d(this.parent.editorFooterTemplate)?!this.parent.isAdaptive&&d(this.parent.editorFooterTemplate)?this.renderDialogButtons(this.dialogObject):this.parent.isAdaptive&&d(this.parent.editorFooterTemplate)&&(this.dialogObject.footerTemplate=null):(this.parent.resetTemplates(["editorFooterTemplate"]),this.dialogObject.footerTemplate=this.getDialogFooter()),this.dialogObject.dataBind()},n.prototype.createAdaptiveHeaderElement=function(i){var e=R("div",{className:"e-title-header"}),t=R("div",{className:"e-back-icon e-icons"});e.appendChild(t);var r=this.getDialogHeader(i);e.appendChild(r);var s=R("div",{className:"e-save-icon e-icons"});return e.appendChild(s),e},n.prototype.getDialogHeader=function(i){var e=[],t=this.parent.element.id+"_editorHeaderTemplate",r=document.createElement("div");return e=[].slice.call(this.parent.getEditorHeaderTemplate()(i||{},this.parent,"editorHeaderTemplate",t,!1)),oe(e,r),r},n.prototype.getDialogFooter=function(i){var e=[],t=this.parent.element.id+"_editorFooterTemplate",r=document.createElement("div");return e=[].slice.call(this.parent.getEditorFooterTemplate()(i||{},this.parent,"editorFooterTemplate",t,!1)),oe(e,r),r},n.prototype.preventEventSave=function(i){this.parent&&!this.parent.allowKeyboardInteraction&&i.code==="Enter"&&(this.isEnterKey=!0)},n.prototype.onBeforeOpen=function(i){var e=this,t=this.eventData[this.fields.endTime].getTime(),r={type:"Editor",data:this.eventData,cancel:!1,element:this.element,target:this.cellClickAction?this.parent.activeCellsData.element:this.parent.activeEventData.element};this.cellClickAction&&(r.duration=this.getSlotDuration());var s=this.getInstance(Jo);s&&(s.disabled=!(this.cellClickAction?this.parent.eventSettings.allowAdding:this.parent.eventSettings.allowEditing),s.dataBind());var a=this.getInstance(br);a&&(a.disabled=!this.parent.eventSettings.allowDeleting,a.dataBind());var o=new Mp;return this.parent.trigger(Ua,r,function(l){if(i.cancel=l.cancel,i.maxHeight=e.parent.isAdaptive?"max-content":i.maxHeight,e.duration=e.cellClickAction?l.duration:null,e.eventData[e.fields.endTime].getTime()===t&&!e.cellClickAction&&e.eventData[e.fields.endTime].getHours()===0&&e.eventData[e.fields.endTime].getMinutes()===0&&(e.eventData=$({},e.eventData,null,!0),e.trimAllDay(e.eventData)),e.refreshDateTimePicker(e.duration),e.cellClickAction&&l.duration!==e.getSlotDuration()&&d(e.parent.editorTemplate)){var h=e.getInstance(Ur),c=e.getInstance(Es);c.value=new Date(h.value.getTime()+at*l.duration),c.dataBind()}e.parent.editorTemplate&&e.element.querySelector(".e-recurrenceeditor")&&!e.recurrenceEditor&&(e.recurrenceEditor=e.getInstance("e-recurrenceeditor")),o.resolve(i)}),!this.parent.prerenderDialogs&&i.cancel&&this.destroy(!0),o},n.prototype.onBeforeClose=function(i){var e=this;i.isInteracted&&(this.isCrudAction=!1);var t={type:"Editor",event:i.event||this.dialogEvent,data:this.eventCrudData,cancel:!1,element:this.element,target:this.cellClickAction?this.parent.activeCellsData.element:this.parent.activeEventData.element},r=new Mp;return this.parent.trigger(jl,t,function(s){i.cancel=s.cancel,s.cancel||(e.isCrudAction&&(i.cancel=e.processCrudActions(s.data),e.isCrudAction=i.cancel),e.isCrudAction||(e.resetForm(),e.parent.eventBase.focusElement(!0),e.eventCrudData=null,e.parent.prerenderDialogs||e.destroy(!0))),r.resolve(i)}),r},n.prototype.getEventWindowContent=function(){var i=R("div",{className:NR}),e=R("form",{id:this.parent.element.id+"EditForm",className:yr});return e.onsubmit=function(){return!1},this.renderFormElements(e),i.appendChild(e),i},n.prototype.renderFormElements=function(i,e,t,r){var s=this;if(d(this.parent.editorTemplate))i.appendChild(this.getDefaultEventWindowContent()),e&&this.setEditorContent(e,t,r);else{if(e&&(this.fieldValidator&&(this.fieldValidator.destroy(),this.fieldValidator=null),this.recurrenceEditor&&(this.recurrenceEditor.destroy(),this.recurrenceEditor=null),this.destroyComponents(),this.parent.resetTemplates(["editorTemplate"]),C.clearEvents(i),!this.parent.isReact))for(var a=[].slice.call(i.children),o=0,l=a;o<l.length;o++){var h=l[o];ve(h)}var c=this.parent.element.id+"_editorTemplate",u=[].slice.call(this.parent.getEditorTemplate()(e||{},this.parent,"editorTemplate",c,!1));oe(u,i),this.parent.renderTemplates(function(){s.element&&(s.applyFormValidation(),e&&s.setEditorContent(e,t,r))})}},n.prototype.getDefaultEventWindowContent=function(){var i=this.createDivElement(jR),e=this.createDivElement(BR);i.appendChild(e),e.appendChild(this.renderTextBox(Ke)),e.appendChild(this.renderTextBox(zs));var t=this.createDivElement(WR);i.appendChild(t),t.appendChild(this.renderDateTimePicker(Ur,this.onTimeChange.bind(this))),t.appendChild(this.renderDateTimePicker(Es));var r=this.createDivElement(LR);i.appendChild(r),r.appendChild(this.renderCheckBox(ga)),r.appendChild(this.renderCheckBox(Gr));var s=this.createDivElement(ba);i.appendChild(s),s.appendChild(this.renderDropDown(Sa)),s.appendChild(this.renderDropDown(Ea));var a=this.createDivElement(HR);i.appendChild(a);var o=this.renderCheckBox(ya),l=R("span",{className:Va}),h=R("button",{className:bL,attrs:{type:"button",title:this.l10n.getConstant("editRecurrence")}});this.buttonObj=new rh({iconCss:yL+" e-icons",cssClass:"e-medium "+this.parent.cssClass}),l.appendChild(h),this.buttonObj.appendTo(h),o.appendChild(l),a.appendChild(o),this.parent.isAdaptive?C.add(h,"click",this.loadRecurrenceEditor,this):this.createRecurrenceEditor(i);var c=this.parent.isResourceCollectionEmpty();if(this.parent.resourceCollection.length>0&&!c){for(var u=this.createDivElement(_R),p=0,f=this.parent.resourceBase.resourceCollection;p<f.length;p++){var v=f[p];u.appendChild(this.renderResourceDetails(v))}i.appendChild(u)}var m=this.createDivElement(mn+"-row");m.appendChild(this.renderTextBox(mn)),i.appendChild(m);var g=R("button",{attrs:{type:"hidden",title:"submit"}});return g.style.display="none",i.appendChild(g),i},n.prototype.createRecurrenceEditor=function(i){var e=R("div",{id:this.parent.element.id+"_recurrence_editor"});i.appendChild(e),this.recurrenceEditor=this.renderRecurrenceEditor(),this.recurrenceEditor.appendTo(e),this.updateMinMaxDateToEditor()},n.prototype.createDivElement=function(i){return R("div",{className:i})},n.prototype.createInputElement=function(i,e,t){return R(t||"input",{className:i,attrs:{type:"text",name:e,value:"",id:e}})},n.prototype.getSlotDuration=function(){return this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount},n.prototype.renderDateTimePicker=function(i,e){var t=this.createDivElement(i+"-container"),r=this.getFieldName(i),s=this.createInputElement(i+" "+mr,r);t.appendChild(s);var a=new jC({change:e,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,calendarMode:this.parent.calendarMode,min:this.parent.minDate,max:new Date(new Date(+this.parent.maxDate).setHours(23,59,59)),cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,locale:this.parent.locale,floatLabelType:"Always",strictMode:!0,timeFormat:this.parent.activeViewOptions.timeFormat,format:(d(this.parent.dateFormat)?this.getFormat("dateFormats"):this.parent.dateFormat)+" "+this.parent.activeViewOptions.timeFormat,placeholder:this.getFieldLabel(i),step:this.getSlotDuration(),width:"100%"});return a.appendTo(s),t},n.prototype.refreshDateTimePicker=function(i){for(var e="."+Ur+",."+Es,t=[].slice.call(this.element.querySelectorAll(e)),r=0,s=t;r<s.length;r++){var a=s[r],o=a.ej2_instances[0];o.firstDayOfWeek=this.parent.activeViewOptions.firstDayOfWeek,o.timeFormat=this.parent.activeViewOptions.timeFormat,o.step=i||this.getSlotDuration(),o.dataBind()}},n.prototype.onTimeChange=function(){var i=this.getInstance(Ur);if(i.element.parentElement.classList.contains("e-input-focus")){var e=this.getInstance(Es),t=0;this.cellClickAction?(t=at*this.duration,this.eventWindowTime.startTime=i.value):t=this.eventData[this.fields.endTime].getTime()-this.eventData[this.fields.startTime].getTime();var r=d(i.value)?null:new Date(i.value.getTime()+t);this.cellClickAction&&(this.eventWindowTime.endTime=r),e.value=r,e.dataBind()}this.recurrenceEditor&&this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime)},n.prototype.renderResourceDetails=function(i){var e=this,t=i.field,r="e-"+t,s=i.title,a=this.createDivElement(r+"-container e-resources"),o=this.createInputElement(r+" "+mr,t);a.appendChild(o);var l=function(u){return Ar.sanitize(`<div class="e-resource-template">
                <div class="e-resource-color" data-resource-color="`+u[i.colorField]+`"></div>
                <div class="e-resource-text">`+u[i.textField]+"</div></div>")};if(fd(l,i),i.allowMultiple){var h=new zE({enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,cssClass:this.parent.cssClass||"",dataSource:i.dataSource,change:this.onMultiselectResourceChange.bind(this),itemTemplate:l,fields:{text:i.textField,value:i.idField},htmlAttributes:{name:t},floatLabelType:"Always",placeholder:s,popupHeight:"230px",popupWidth:"447px",mode:"Box",open:function(u){Promise.resolve().then(function(){e.applyStylesAfterRender(u)})}});h.appendTo(o)}else{var c=new bn({cssClass:this.parent.cssClass||"",change:this.onDropdownResourceChange.bind(this),dataSource:i.dataSource,enableRtl:this.parent.enableRtl,fields:{text:i.textField,value:i.idField},htmlAttributes:{name:t},floatLabelType:"Always",placeholder:s,popupHeight:"230px",popupWidth:"447px",itemTemplate:l,open:function(u){Promise.resolve().then(function(){e.applyStylesAfterRender(u)})}});c.appendTo(o)}return a},n.prototype.applyStylesAfterRender=function(i){if(!(!i.popup||!i.popup.element)){var e=i.popup.element.querySelectorAll(".e-resource-color[data-resource-color]");e.forEach(function(t){var r=t.getAttribute("data-resource-color");r&&(t.style.backgroundColor=r)})}},n.prototype.renderDropDown=function(i){var e=this,t=this.getFieldName(i),r=this.createDivElement(i+"-container"),s=this.createInputElement(i+" "+mr,t);r.appendChild(s);var a=new bn({allowFiltering:!0,change:this.onTimezoneChange.bind(this),cssClass:this.parent.cssClass||"",dataSource:this.parent.timezoneDataSource,enableRtl:this.parent.enableRtl,fields:{text:"Text",value:"Value"},filterBarPlaceholder:this.parent.localeObj.getConstant("searchTimezone"),noRecordsTemplate:this.parent.localeObj.getConstant("noRecords"),filtering:function(o){var l=new Se;l=o.text!==""?l.where("Text","contains",o.text,!0):l,o.updateData(e.parent.timezoneDataSource,l)},htmlAttributes:{title:this.getFieldLabel(i),name:t},floatLabelType:"Always",placeholder:this.getFieldLabel(i),popupHeight:"230px"});return a.appendTo(s),r},n.prototype.onMultiselectResourceChange=function(i){if(!(!i.value||!this.parent.activeViewOptions.group.byGroupID||this.parent.resourceCollection.length<=1)){for(var e=this.parent.resourceBase.resourceCollection,t=i.element.getAttribute("name")||this.getColumnName(i.element),r=0;r<e.length;r++)if(e[parseInt(r.toString(),10)].field===t&&r<e.length-1){for(var s=this.createInstance(r),a=[],o=function(c){var u=e[r+1],p=u.dataSource.filter(function(m){return m[u.groupIDField]===i.value[parseInt(c.toString(),10)]})[0],f=d(p)?null:p[e[r+1].groupIDField],v=l.filterDatasource(r,f);a=a.concat(v)},l=this,h=0;h<i.value.length;h++)o(h);s.dataSource=a,s.dataBind()}}},n.prototype.createInstance=function(i){var e=this.parent.resourceBase.resourceCollection[i+1],t=this.element.querySelector(".e-"+e.field).ej2_instances[0];return t.clear(),t},n.prototype.onDropdownResourceChange=function(i){if(!(!i.value||this.parent.resourceCollection.length<=1||!this.parent.activeViewOptions.group.byGroupID)){for(var e=i.element.getAttribute("name")||this.getColumnName(i.element),t=this.parent.resourceBase.resourceCollection,r=0;r<t.length;r++)if(r<t.length-1&&t[parseInt(r.toString(),10)].field===e){var s=this.createInstance(r),a=i.itemData[t[parseInt(r.toString(),10)].idField];s.dataSource=this.filterDatasource(r,a),s.dataBind();var o=s.dataSource.length>0?s.dataSource[0][t[r+1].idField]:null;s.value=t[r+1].allowMultiple?[o]:o,s.dataBind()}}},n.prototype.filterDatasource=function(i,e){var t=this.parent.resourceBase.resourceCollection[i+1];return t.dataSource.filter(function(r){return r[t.groupIDField]===e})},n.prototype.onTimezoneChange=function(i){var e=i.element.getAttribute("name")||this.getColumnName(i.element);if(e===this.parent.eventFields.startTimezone){var t=this.getInstance(Sa),r=this.getInstance(Ea);r.value=t.value,r.dataBind()}},n.prototype.renderCheckBox=function(i){var e=this.createDivElement(i+"-container"),t=this.getFieldName(i),r=this.createInputElement(i+" "+mr,t);e.appendChild(r);var s=new IS({change:this.onChange.bind(this),cssClass:i+" "+this.parent.cssClass,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,label:this.getFieldLabel(i)});return s.appendTo(r),r.setAttribute("name",t),t==="Repeat"&&(this.repeatStatus=s),e},n.prototype.renderTextBox=function(i){var e=this.createDivElement(i+"-container"),t=this.getFieldName(i),r=i===mn?"textarea":"input",s=this.createInputElement(i+" "+mr,t,r);return e.appendChild(s),X.createInput({element:s,floatLabelType:"Always",properties:{enableRtl:this.parent.enableRtl,placeholder:this.getFieldLabel(i)}}),e},n.prototype.getFieldName=function(i){var e="";switch(i){case Ke:e=this.fields.subject;break;case zs:e=this.fields.location;break;case Ur:e=this.fields.startTime;break;case Es:e=this.fields.endTime;break;case mn:e=this.fields.description;break;case ga:e=this.fields.isAllDay;break;case Sa:e=this.fields.startTimezone;break;case Ea:e=this.fields.endTimezone;break;case Gr:e="Timezone";break;case ya:e="Repeat";break}return e},n.prototype.getFieldLabel=function(i){var e="";switch(i){case Ke:e=this.parent.editorTitles.subject;break;case zs:e=this.parent.editorTitles.location;break;case mn:e=this.parent.editorTitles.description;break;case Ur:e=this.parent.editorTitles.startTime;break;case Es:e=this.parent.editorTitles.endTime;break;case Sa:e=this.parent.editorTitles.startTimezone;break;case Ea:e=this.parent.editorTitles.endTimezone;break;case ya:e=this.parent.editorTitles.recurrenceRule;break;case ga:e=this.parent.editorTitles.isAllDay;break;case Gr:e=this.l10n.getConstant("timezone");break}return e},n.prototype.onChange=function(i){if(i.event&&i.event.target){var e="."+ga+",."+Gr+",."+ya,t=M(i.event.target,e);t.classList.contains(ga)?this.onAllDayChange(i.checked):t.classList.contains(Gr)?this.timezoneChangeStyle(i.checked):t.classList.contains(ya)&&this.onRepeatChange(i.checked)}},n.prototype.renderRepeatDialog=function(){var i=R("div");this.repeatDialogObject=new lu({header:this.l10n.getConstant("recurrence"),visible:!1,content:'<div class="e-rec-editor"></div>',closeOnEscape:!0,width:"90%",buttons:[{click:this.repeatSaveDialog.bind(this),buttonModel:{content:this.l10n.getConstant("save"),cssClass:"e-save",isPrimary:!0}},{click:this.repeatCancelDialog.bind(this),buttonModel:{cssClass:"e-cancel",content:this.l10n.getConstant("cancel")}}],target:this.element,animationSettings:{effect:"Zoom"},enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,isModal:!0,cssClass:SL,open:this.repeatOpenDialog.bind(this)}),this.element.appendChild(i),this.repeatDialogObject.appendTo(i),this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector(".e-rec-editor"))},n.prototype.loadRecurrenceEditor=function(){this.repeatDialogObject.show(),this.recurrenceEditor&&this.repeatRule&&this.recurrenceEditor.setRecurrenceRule(this.repeatRule)},n.prototype.onRepeatChange=function(i){if(i)this.repeatDialogObject||this.renderRepeatDialog(),this.recurrenceEditor.setProperties({startDate:this.repeatStartDate,selectedType:0}),this.loadRecurrenceEditor();else{this.repeatDialogObject&&this.repeatDialogObject.hide(),this.repeatRule="",this.recurrenceEditor&&(this.recurrenceEditor.setRecurrenceRule(this.repeatRule),this.updateRepeatLabel(this.repeatRule));var e=this.element.querySelector("."+Va);T([e],Ts)}},n.prototype.repeatSaveDialog=function(){this.repeatRule=this.recurrenceEditor.getRecurrenceRule();var i=this.element.querySelector("."+Va);this.recurrenceEditor.getRecurrenceRule()?I([i],Ts):(T([i],Ts),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule),this.closeRepeatDialog()},n.prototype.closeRepeatDialog=function(){this.repeatDialogObject.hide()},n.prototype.repeatCancelDialog=function(){this.closeRepeatDialog(),this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule),this.repeatTempRule||this.repeatStatus.setProperties({checked:!1})},n.prototype.repeatOpenDialog=function(){this.repeatTempRule=this.recurrenceEditor.getRecurrenceRule()},n.prototype.onCellDetailsUpdate=function(i,e){if(this.parent.eventSettings.allowAdding){this.parent.isAdaptive&&e&&!this.repeatDialogObject&&this.renderRepeatDialog(),this.element.querySelector("."+yr).removeAttribute("data-id"),d(this.parent.editorHeaderTemplate)&&(this.element.querySelector("."+Xm).innerHTML=this.l10n.getConstant("newEvent")),i.Timezone=!1,this.repeatStartDate=i[this.fields.startTime],this.repeatRule="",d(this.parent.eventSettings.fields.subject.default)||(i[this.fields.subject]=this.parent.eventSettings.fields.subject.default),d(this.parent.eventSettings.fields.location.default)||(i[this.fields.location]=this.parent.eventSettings.fields.location.default),d(this.parent.eventSettings.fields.description.default)||(i[this.fields.description]=this.parent.eventSettings.fields.description.default),this.showDetails(i),i[this.fields.recurrenceRule]&&this.recurrenceEditor&&(this.recurrenceEditor.setRecurrenceRule(i[this.fields.recurrenceRule],i[this.fields.startTime]),this.repeatRule=i[this.fields.recurrenceRule]);var t=this.element.querySelector("."+br);if(t&&T([t],Oe),this.recurrenceEditor&&(this.recurrenceEditor.setProperties({startDate:i[this.fields.startTime],selectedType:d(e)?d(i[this.fields.recurrenceRule])?0:this.recurrenceEditor.selectedType:e}),this.repeatRule=this.recurrenceEditor.value),this.parent.isAdaptive&&d(this.parent.editorTemplate)){var r=this.element.querySelector("."+Va);i[this.fields.recurrenceRule]||e?(I([r],Ts),this.repeatStatus.setProperties({checked:!0})):(T([r],Ts),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule)}else{var s=this.element.querySelector("."+Jo);this.disableButton(s,!1)}this.dialogObject.show()}},n.prototype.convertToEventData=function(i,e){if(i){i.subject&&(e[this.fields.subject]=i.subject),e[this.fields.startTime]=i.startTime,e[this.fields.endTime]=i.endTime,e[this.fields.isAllDay]=i.isAllDay,i.RecurrenceRule&&(e[this.fields.recurrenceRule]=i.RecurrenceRule);var t=this.parent.isResourceCollectionEmpty();(this.parent.resourceCollection.length>0&&!t||this.parent.activeViewOptions.group.resources.length>0)&&this.parent.resourceBase.setResourceValues(e)}},n.prototype.applyFormValidation=function(){var i=this.element.querySelector("."+yr);if(i){var e=function(h){return h&&Object.keys(h).length>0?h:void 0},t={},r=e(this.parent.eventSettings.fields.subject.validation);d(r)||(t[this.parent.eventSettings.fields.subject.name]=r);var s=e(this.parent.eventSettings.fields.location.validation);d(s)||(t[this.parent.eventSettings.fields.location.name]=s);var a=e(this.parent.eventSettings.fields.startTime.validation);d(a)||(t[this.parent.eventSettings.fields.startTime.name]=a);var o=e(this.parent.eventSettings.fields.endTime.validation);d(o)||(t[this.parent.eventSettings.fields.endTime.name]=o);var l=e(this.parent.eventSettings.fields.description.validation);d(l)||(t[this.parent.eventSettings.fields.description.name]=l),this.fieldValidator&&(this.fieldValidator.destroy(),this.fieldValidator=null),this.fieldValidator=new Jb,this.fieldValidator.renderFormValidator(i,t,this.element,this.parent.locale)}},n.prototype.showDetails=function(i){this.eventData=i;var e=$({},i,null,!0),t=this.getFormElements(fr);(!this.cellClickAction||this.cellClickAction&&!d(this.parent.editorTemplate))&&e[this.fields.endTime].getHours()===0&&e[this.fields.endTime].getMinutes()===0&&this.trimAllDay(e);for(var r=Object.keys(e),s=0,a=t;s<a.length;s++){var o=a[s],l=o.name||this.getColumnName(o);!d(l)&&l!==""&&(r.indexOf(l)!==-1?this.setValueToElement(o,e[""+l]):this.setDefaultValueToElement(o))}if(d(this.parent.editorTemplate)){this.onAllDayChange(e[this.fields.isAllDay]);var h=this.getInstance(Gr+"."+mr);d(e[this.fields.startTimezone])&&d(e[this.fields.endTimezone])||(h.checked=!0,h.dataBind()),this.timezoneChangeStyle(h.checked),delete e.Timezone}},n.prototype.getColumnName=function(i){var e=i.getAttribute("data-name")||"";if(e===""){var t=!1,r="";i.classList.contains("e-dropdownlist")?(r="e-ddl",t=!0):i.classList.contains("e-multiselect")?(r="e-multiselect",t=!0):i.classList.contains("e-datetimepicker")?r="e-datetimepicker":i.classList.contains("e-datepicker")?r="e-datepicker":i.classList.contains("e-checkbox")?r="e-checkbox":i.classList.contains("e-numerictextbox")&&(r="e-numerictextbox");var s=t?"."+r+":not(.e-control)":"."+r,a=M(i,s)||i.querySelector("."+r);if(a){var o=a.querySelector("[name]");o&&(e=o.name)}}return e},n.prototype.onAllDayChange=function(i){var e=this.getInstance(Ur),t=this.getInstance(Es),r=this.element.querySelector(".e-time-zone-container"),s;i?(s=d(this.parent.dateFormat)?this.getFormat("dateFormats"):this.parent.dateFormat,T(this.element.querySelectorAll(".e-time-icon"),Zm),T([r],Oe),this.element.querySelector("."+ba)&&I([this.element.querySelector("."+ba)],is),e.format=t.format=s):(s=d(this.parent.dateFormat)?this.getFormat("dateFormats")+" "+this.parent.activeViewOptions.timeFormat:this.parent.dateFormat+" "+this.parent.activeViewOptions.timeFormat,I(this.element.querySelectorAll(".e-time-icon"),Zm),I([r],Oe),this.element.querySelector(".e-checkbox-wrapper .e-time-zone").checked&&T([this.element.querySelector("."+ba)],is),e.format=t.format=s),this.cellClickAction&&this.updateDateTime(i,e,t),e.dataBind(),t.dataBind(),d(this.recurrenceEditor)||this.recurrenceEditor.updateRuleUntilDate(e.value)},n.prototype.updateDateTime=function(i,e,t){var r,s;if(!(d(this.eventWindowTime.startTime)&&d(this.eventWindowTime.endTime))){if(i)if(r=W(new Date(this.eventWindowTime.startTime.getTime())),this.parent.activeCellsData.isAllDay){var a=Z(new Date(this.eventWindowTime.endTime.getTime()),-1).getTime();s=+this.eventWindowTime.startTime>a?this.eventWindowTime.endTime:new Date(a)}else s=W(new Date(this.eventWindowTime.endTime.getTime()));else{var o=this.parent.activeCellsData.startTime;if(r=new Date(this.eventWindowTime.startTime.getTime()),r.setHours(o.getHours(),o.getMinutes(),o.getSeconds()),this.parent.activeCellsData.isAllDay){var l=this.parent.getStartEndTime(this.parent.workHours.start);r.setHours(l.getHours(),l.getMinutes(),l.getSeconds()),s=new Date(r.getTime()),s.setMilliseconds(at*this.getSlotDuration())}else s=new Date(r.getTime()),s.setMilliseconds(this.parent.activeCellsData.endTime.getTime()-this.parent.activeCellsData.startTime.getTime())}this.eventWindowTime={startTime:new Date(r.getTime()),endTime:new Date(s.getTime())},e.value=r,t.value=s,e.dataBind(),t.dataBind()}},n.prototype.getFormat=function(i){var e;return d(this.parent.locale)||this.parent.locale==="en"||this.parent.locale==="en-US"?e=V(i+".short",Lt(this.parent.getCalendarMode())):e=V("main."+this.parent.locale+".dates.calendars."+this.parent.getCalendarMode()+"."+i+".short",Vt),e},n.prototype.onEventDetailsUpdate=function(i){if(this.parent.eventSettings.allowEditing){if(!this.parent.isAdaptive&&d(this.parent.editorFooterTemplate)&&I([this.element.querySelector("."+br)],Oe),d(this.parent.editorHeaderTemplate)&&(this.element.querySelector("."+Xm).innerHTML=this.l10n.getConstant("editEvent")),this.element.querySelector("."+yr).setAttribute("data-id",i[this.fields.id].toString()),d(this.parent.editorTemplate)){i=$({},i,null,!0);var e=this.getInstance(Gr+"."+mr),t=void 0;i[this.fields.startTimezone]||i[this.fields.endTimezone]?(t=!0,this.parent.eventBase.timezoneConvert(i)):t=!1,i.Timezone=t,e.checked=t,e.dataBind()}if(this.showDetails(i),i[this.fields.recurrenceRule]&&this.recurrenceEditor?this.recurrenceEditor.setRecurrenceRule(i[this.fields.recurrenceRule],i[this.fields.startTime]):!this.parent.isAdaptive&&this.recurrenceEditor&&(this.recurrenceEditor.setProperties({startDate:i[this.fields.startTime]}),this.recurrenceEditor.setRecurrenceRule("")),this.repeatStartDate=i[this.fields.startTime],this.repeatRule="",i[this.fields.recurrenceRule]&&(this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(i[this.fields.recurrenceRule],i[this.fields.startTime]),this.repeatRule=i[this.fields.recurrenceRule]),this.parent.isAdaptive&&d(this.parent.editorTemplate)){var r=this.element.querySelector("."+Va);i[this.fields.recurrenceRule]?(I([r],Ts),this.repeatStatus.setProperties({checked:!0})):(T([r],Ts),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule)}var s=this.parent.readonly||i[this.fields.isReadonly];if(this.parent.isAdaptive){var l=this.element.querySelector("."+Qm);l&&(s?T([l],lg):I([l],lg))}else{var a=this.element.querySelector("."+Jo),o=this.element.querySelector("."+br);this.disableButton(a,s),this.disableButton(o,s)}this.dialogObject.show()}},n.prototype.disableButton=function(i,e){i&&(i.ej2_instances[0].disabled=e)},n.prototype.renderRecurrenceEditor=function(){return new gL({calendarMode:this.parent.calendarMode,cssClass:this.parent.cssClass,dateFormat:this.parent.dateFormat,enableRtl:this.parent.enableRtl,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,locale:this.parent.locale})},n.prototype.updateMinMaxDateToEditor=function(){var i=this.element.querySelector(".e-start"),e=this.element.querySelector(".e-end");if(i&&e){var t=i.ej2_instances[0],r=e.ej2_instances[0];t.min=this.parent.minDate,t.max=new Date(new Date(+this.parent.maxDate).setHours(23,59,59)),r.min=this.parent.minDate,r.max=new Date(new Date(+this.parent.maxDate).setHours(23,59,59)),t.dataBind(),r.dataBind()}if(this.recurrenceEditor){var s=this.recurrenceEditor.element.querySelector(".e-until-date");if(s){var a=s.ej2_instances[0];a.min=this.parent.minDate,a.max=this.parent.maxDate,a.dataBind()}}},n.prototype.updateRepeatLabel=function(i){this.parent.isAdaptive&&!this.repeatDialogObject&&this.renderRepeatDialog();var e=i?this.l10n.getConstant("repeats")+" "+this.recurrenceEditor.getRuleSummary(i):this.l10n.getConstant("repeat");this.repeatStatus.setProperties({label:e})},n.prototype.dialogClose=function(i){if(this.isEnterKey){this.isEnterKey=!1;return}this.dialogEvent=i,this.isCrudAction=!1,this.parent.activeEventData={event:void 0,element:void 0},this.parent.currentAction=null,this.dialogObject.hide()},n.prototype.resetForm=function(){this.fieldValidator.destroyToolTip(),this.resetFormFields(),!this.parent.isAdaptive&&this.recurrenceEditor&&!this.recurrenceEditor.isDestroyed&&this.recurrenceEditor.resetFields()},n.prototype.timezoneChangeStyle=function(i){var e=this.element.querySelector("."+ba),t=this.parent.tzModule.getLocalTimezoneName();if(i){T([e],is);var r=this.getInstance(Sa),s=this.getInstance(Ea),a=r.dataSource;if(!r.value||!this.parent.timezone){var o=a.some(function(l){return l.Value===t});o||(a.push({Value:t,Text:t}),r.dataSource=a,s.dataSource=a,r.dataBind(),s.dataBind())}r.value=r.value||this.parent.timezone||t,s.value=s.value||this.parent.timezone||t,r.dataBind(),s.dataBind()}else I([e],is)},n.prototype.resetFormFields=function(){for(var i=this.getFormElements(fr),e=0,t=i;e<t.length;e++){var r=t[e],s=r.name||this.getColumnName(r);!d(s)&&s!==""&&this.setDefaultValueToElement(r)}},n.prototype.eventSave=function(i,e){if(this.isEnterKey){this.isEnterKey=!1;return}var t=this.element.querySelector("."+yr);if(!(t&&t.classList.contains("e-formvalidator")&&!t.ej2_instances[0].validate())){var r=this.getEventDataFromEditor();this.processEventValidation(r.tempData,e)||(this.eventCrudData=r.eventData,this.dialogEvent=i,this.isCrudAction=!0,this.dialogObject.hide())}},n.prototype.getEventDataFromEditor=function(){var i=$({},this.getObjectFromFormData(fr));i.Timezone||(i[this.fields.startTimezone]=null,i[this.fields.endTimezone]=null),delete i.Timezone,delete i.Repeat,this.setDefaultValueToObject(i),i[this.fields.recurrenceRule]=this.recurrenceEditor?this.recurrenceEditor.getRecurrenceRule()||null:void 0;var e=$({},i,null,!0);return i[this.fields.isAllDay]&&(i[this.fields.startTime]=d(i[this.fields.startTime])?null:W(new Date(i[this.fields.startTime].getTime())),i[this.fields.endTime]=d(i[this.fields.endTime])?null:Z(W(new Date(i[this.fields.endTime].getTime())),1)),{eventData:i,tempData:e}},n.prototype.processEventValidation=function(i,e){var t;if(d(this.parent.editorTemplate)){if(!i[this.fields.startTime]||!i[this.fields.endTime])return this.parent.quickPopup.openValidationError("invalidDateError"),!0;if(i[this.fields.startTime]>i[this.fields.endTime])return this.parent.quickPopup.openValidationError("startEndError"),!0}if(this.recurrenceEditor&&this.recurrenceEditor.value&&this.recurrenceEditor.value!==""){this.parent.currentAction!=="EditOccurrence"&&(t=this.recurrenceValidation(i[this.fields.startTime],i[this.fields.endTime],e));var r=!0;if(t==="seriesChangeAlert"&&this.parent.uiStateValues.isIgnoreOccurrence&&(r=!1),!d(t)&&r&&(!this.parent.enableRecurrenceValidation&&t==="wrongPattern"||this.parent.enableRecurrenceValidation))return this.parent.quickPopup.openRecurrenceValidationAlert(t),!0}return!1},n.prototype.processCrudActions=function(i){var e=this;this.parent.uiStateValues.isBlock=!1;var t=this.getResourceData(i),r=(this.parent.activeViewOptions.group.resources.length>0||this.parent.resourceCollection.length>0)&&!this.parent.activeViewOptions.group.allowGroupEdit&&!d(t),s=this.getEventIdFromForm();if(d(s)){if(this.parent.currentAction="Add",this.parent.eventBase.checkOverlap(i))return!0;r?this.resourceSaveEvent(i,this.parent.currentAction):(i[this.fields.id]=this.parent.eventBase.getEventMaxID(),this.parent.addEvent(i))}else{var a=this.parent.eventBase.getEventIDType()==="string"?s:parseInt(s,10),o=this.parent.eventsData.filter(function(h){return h[e.fields.id]===a})[0];if(d(o)&&(o=this.parent.blockData.filter(function(h){return h[e.fields.id]===a})[0]),i=$({},o,i),i[this.fields.isReadonly])return!1;if(this.parent.eventBase.checkOverlap(i))return!0;var l=void 0;if(!d(o[this.fields.recurrenceRule])){if(l=this.parent.currentAction,i.Guid=this.parent.activeEventData.event.Guid,this.parent.currentAction==="EditOccurrence"&&(i[this.fields.recurrenceID]?(a=i[this.fields.recurrenceID],l=null):(i[this.fields.id]=this.parent.eventBase.getEventMaxID(),i.Guid=this.parent.activeEventData.event.Guid),this.parent.enableRecurrenceValidation&&this.editOccurrenceValidation(a,i)))return!0;this.parent.currentAction==="EditSeries"||i[this.fields.id]!==o[this.fields.id]?i[this.fields.recurrenceID]=o[this.fields.id]:this.parent.currentAction==="EditFollowingEvents"&&(i[this.fields.id]=this.parent.eventBase.getEventMaxID(),i[this.fields.followingID]=o[this.fields.id])}r?this.resourceSaveEvent(i,"Save",l):this.parent.saveEvent(i,l)}return this.parent.uiStateValues.isBlock},n.prototype.getResourceData=function(i){var e=null;if(!d(this.parent.resourceBase)&&!d(this.parent.resourceBase.resourceCollection)&&this.parent.resourceBase.resourceCollection.length>0){var t=this.parent.resourceBase.resourceCollection.slice(-1)[0];e=i[t.field]}return e},n.prototype.getObjectFromFormData=function(i){for(var e=this.getFormElements(i),t={},r=0,s=e;r<s.length;r++){var a=s[r],o=a.name||this.getColumnName(a);!d(o)&&o!==""&&(t[""+o]=this.getValueFromElement(a))}return t},n.prototype.setDefaultValueToObject=function(i){d(i[this.fields.subject])||(i[this.fields.subject]=i[this.fields.subject]||this.parent.eventSettings.fields.subject.default||this.l10n.getConstant("addTitle")),d(i[this.fields.location])||(i[this.fields.location]=i[this.fields.location]||this.parent.eventSettings.fields.location.default),d(i[this.fields.description])||(i[this.fields.description]=i[this.fields.description]||this.parent.eventSettings.fields.description.default)},n.prototype.recurrenceValidation=function(i,e,t){var r,s=this.recurrenceEditor,a=this.getInstance("e-repeat-interval.e-numerictextbox").value;if(t!==this.l10n.getConstant("ok")){var o=this.parent.activeEventData.event,l=[];if((this.parent.currentAction==="EditSeries"||this.parent.currentAction==="EditFollowingEvents")&&!d(o)){var h=o[this.parent.eventFields.startTime],c=this.parent.eventBase.getSeriesEvents(this.eventData,h);if(c.length>0)l=this.parent.eventBase.getEditedOccurrences(c,h);else{var u=this.parent.eventBase.getEventById(o[this.parent.eventFields.id]);l=this.parent.eventBase.getEditedOccurrences([u],h)}this.parent.currentAction==="EditSeries"&&!d(this.eventData[this.parent.eventFields.recurrenceException])&&l.push(this.eventData)}if(l.length>0&&(r="seriesChangeAlert"),this.getInstance("e-end-on-left .e-ddl .e-dropdownlist").value==="until"&&this.getInstance("e-end-on-date .e-datepicker").value<i&&(r="wrongPattern"),d(r)){var p=s.value.split(";")[1].split("=")[1].split(","),f={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},v=[],m=[],g=void 0;switch(s.value.split(";")[0].split("=")[1]){case"DAILY":(e.getTime()-i.getTime())/(1e3*3600)>a*24&&(r="createError");break;case"WEEKLY":p=s.value.split(";")[1].split("=")[1].split(",");for(var y=0;y<p.length*(a+1);y++)v[parseInt(y.toString(),10)]=p.length>y?f[p[parseInt(y.toString(),10)]]:v[y-p.length]+7*a;g=v.sort(function(b,E){return b-E});for(var y=1;y<g.length;y++)m.push(g[parseInt(y.toString(),10)]-g[y-1]);((e.getTime()-i.getTime())/(1e3*3600)>=Math.min.apply(Math,m)*24||d(a))&&(r="createError");break;case"MONTHLY":e.getTime()>=new Date(+i).setMonth(i.getMonth()+a)&&(r="createError");break;case"YEARLY":e.getTime()>=new Date(+i).setFullYear(i.getFullYear()+a)&&(r="createError");break}}}else e.getTime()>=new Date(+i).setMonth(i.getMonth()+a)&&(r="createError"),d(r)&&!d(this.parent.quickPopup.quickDialog)&&this.parent.quickPopup.quickDialog.hide();return d(a)&&(r="createError"),r},n.prototype.getRecurrenceIndex=function(i,e){for(var t,r=0;r<i.length;r++)if(e[this.fields.startTime].valueOf()===i[parseInt(r.toString(),10)][this.fields.startTime].valueOf()){t=r;break}return t},n.prototype.trimAllDay=function(i){if(i[this.fields.isAllDay]){var e=Z(new Date(+i[this.fields.endTime]),-1).getTime();i[this.fields.endTime]=+i[this.fields.startTime]>e?i[this.fields.endTime]:new Date(e)}},n.prototype.editOccurrenceValidation=function(i,e,t){var r=this;t===void 0&&(t=this.eventData);var s=this.parent.getOccurrencesByID(i),a=this.parent.eventsData.filter(function(b){return b[r.fields.recurrenceID]===i});a.map(function(b){return s.push($({},b))}),e=$({},e),this.trimAllDay(e);for(var o=0,l=s;o<l.length;o++){var h=l[o];this.trimAllDay(h)}this.parent.eventBase.sortByTime(s);var c=this.getRecurrenceIndex(s,t);if(d(c))return!1;var u=new Date(+e[this.fields.startTime]),p=new Date(+e[this.fields.endTime]),f,v;c!==s.length-1&&(f=new Date(+s[c+1][this.fields.startTime]),v=new Date(+s[c+1][this.fields.endTime]));var m=new Date(+s[s.length-1][this.fields.endTime]);if(c===0){if(!d(s[c+1])){if(!(f.getTime()>=p.getTime())&&W(m).getTime()>=W(u).getTime()||W(m).getTime()<W(u).getTime())return this.parent.quickPopup.openRecurrenceValidationAlert("occurrenceAlert"),!0;if(!(W(u).getTime()<W(f).getTime()))return this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert"),!0}return!1}else{var g=new Date(+s[c-1][this.fields.startTime]),y=new Date(+s[c-1][this.fields.endTime]);if(c===s.length-1){if(W(new Date(+s[s.length-1-c][this.fields.startTime])).getTime()>W(u).getTime())return this.parent.quickPopup.openRecurrenceValidationAlert("occurrenceAlert"),!0;if(!(y.getTime()<=u.getTime()&&W(u).getTime()>W(g).getTime()))return this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert"),!0}else if((W(g).getTime()<W(u).getTime()||W(new Date(+s[0][this.fields.startTime])).getTime()>W(u).getTime())&&(W(f).getTime()>W(u).getTime()||m.getTime()<u.getTime())){if(!(y.getTime()<=u.getTime()&&f.getTime()>=p.getTime())||W(v).getTime()<W(u).getTime()||W(g).getTime()>W(p).getTime()||!(W(u).getTime()<W(f).getTime()))return this.parent.quickPopup.openRecurrenceValidationAlert("occurrenceAlert"),!0}else return this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert"),!0}return!1},n.prototype.resourceSaveEvent=function(i,e,t){var r=this,s=this.parent.resourceBase.resourceCollection.slice(-1)[0],a=i[s.field];a=a instanceof Array?a.reverse():[a].reverse();for(var o=this.parent.resourceBase.lastResourceLevel,l=[],h=function(g){var y=$({},i,null,!0);y[c.fields.id]=c.parent.eventBase.getEventMaxID();var b=[],E=function(){if(e==="Save"&&g===a.length-1)if(b.length>0){b[0][r.fields.id]=i[r.fields.id];for(var ie=1;ie<b.length;ie++)b[parseInt(ie.toString(),10)][r.fields.id]=r.parent.eventBase.getEventMaxID(g),l.push(b[parseInt(ie.toString(),10)]),r.parent.saveEvent(b[0],t)}else y[r.fields.id]=i[r.fields.id],r.parent.saveEvent(y,t);else if(b.length>0)for(var U=0;U<b.length;U++)b[parseInt(U.toString(),10)][r.fields.id]=r.parent.eventBase.getEventMaxID(U),l.push(b[parseInt(U.toString(),10)]);else y[r.fields.id]=r.parent.eventBase.getEventMaxID(g),l.push(y)};if(c.parent.activeViewOptions.group.byGroupID&&!d(o)){var w=s.dataSource,A=c.parent.resourceCollection,D=void 0;if(A.length>1?D=io(w,s.idField,a[parseInt(g.toString(),10)],y,A):D=io(w,s.idField,a[parseInt(g.toString(),10)]),D<0)return{value:void 0};for(var N=w[parseInt(D.toString(),10)][s.groupIDField],x=o.filter(function(ie){return ie.resourceData[s.idField]===a[parseInt(g.toString(),10)]}).filter(function(ie){return ie.resourceData[s.groupIDField]===N})[0],j=x.groupOrder,q=0;q<c.parent.resourceBase.resourceCollection.length;q++){var L=c.parent.resourceBase.resourceCollection[parseInt(q.toString(),10)].field;y[""+L]=j[parseInt(q.toString(),10)]instanceof Array?j[parseInt(q.toString(),10)][0]:j[parseInt(q.toString(),10)]}E()}else{for(var D=0;D<c.parent.resourceBase.resourceCollection.length-1;D++){var L=c.parent.resourceBase.resourceCollection[parseInt(D.toString(),10)].field;if(y[""+L]instanceof Array&&y[""+L].length>1)for(var O=0;O<y[""+L].length;O++){var P=$({},y,null,!0);P[""+L]=i[""+L][parseInt(O.toString(),10)],P[s.field]=a[parseInt(g.toString(),10)],b.push(P)}else if(b.length===0)y[""+L]=i[""+L]instanceof Array?i[""+L][0]:i[""+L],y[s.field]=a[parseInt(g.toString(),10)];else for(var F=0;F<b.length;F++)b[parseInt(F.toString(),10)][""+L]=i[""+L]instanceof Array?i[""+L][0]:i[""+L]}y[s.field]=a[parseInt(g.toString(),10)],E()}},c=this,u=0;u<a.length;u++){var p=h(u);if(typeof p=="object")return p.value}if(l.length>0){for(var f=0,v=l;f<v.length;f++){var m=v[f];m[this.fields.recurrenceException]=null,m[this.fields.recurrenceID]=null}this.parent.addEvent(l)}},n.prototype.getEventIdFromForm=function(){return this.element.querySelector("."+yr).getAttribute("data-id")},n.prototype.getFormElements=function(i){var e=[];return i===fr?e=[].slice.call(this.element.querySelectorAll("."+mr)):e=[].slice.call(this.parent.element.querySelectorAll("."+i+" ."+mr)),e},n.prototype.getValueFromElement=function(i){var e;return i.classList.contains("e-datepicker")||i.classList.contains("e-datetimepicker")||i.classList.contains("e-dropdownlist")||i.classList.contains("e-multiselect")?e=i.ej2_instances[0].value:i.classList.contains("e-checkbox")?e=i.ej2_instances[0].checked:i.classList.contains("e-numerictextbox")?e=i.ej2_instances[0].value:i.type==="checkbox"?e=i.checked:e=this.parent.enableHtmlSanitizer?Ar.sanitize(i.value):i.value,e},n.prototype.setValueToElement=function(i,e){if(i.classList.contains("e-datepicker")){var t=i.ej2_instances[0];t.value=e,t.dataBind()}else if(i.classList.contains("e-datetimepicker")){var t=i.ej2_instances[0];t.element.classList.contains(Ur)?this.eventWindowTime.startTime=new Date(""+e):this.eventWindowTime.endTime=new Date(""+e),t.value=e,t.dataBind()}else if(i.classList.contains("e-dropdownlist")){var t=i.ej2_instances[0];t.value=e,t.dataBind()}else if(i.classList.contains("e-multiselect")){var t=i.ej2_instances[0];t.value=[],t.value=e instanceof Array?e:[e],t.dataBind()}else if(i.classList.contains("e-checkbox")){var t=i.ej2_instances[0];t.checked=e,t.dataBind()}else if(i.classList.contains("e-numerictextbox")){var t=i.ej2_instances[0];t.value=e,t.dataBind()}else i.type!=="checkbox"?i.value=e||"":i.checked=e},n.prototype.setDefaultValueToElement=function(i){if(i.classList.contains("e-datepicker")){var e=i.ej2_instances[0];e.value=this.parent.getCurrentTime(),e.dataBind()}else if(i.classList.contains("e-datetimepicker")){var e=i.ej2_instances[0],t=this.parent.getCurrentTime();this.eventWindowTime={startTime:t,endTime:t},e.value=t,e.dataBind()}else if(i.classList.contains("e-dropdownlist")){var e=i.ej2_instances[0];e.value=null,e.dataBind()}else if(i.classList.contains("e-multiselect")){var e=i.ej2_instances[0];e.value=[],e.dataBind()}else if(i.classList.contains("e-checkbox")){var e=i.ej2_instances[0];e.checked=!1,e.dataBind()}else if(i.classList.contains("e-numerictextbox")){var e=i.ej2_instances[0];e.value=null,e.dataBind()}else i.type==="checkbox"?i.checked=!1:i.value=""},n.prototype.getInstance=function(i){var e=this.element.querySelector("."+i);return e?e.ej2_instances[0]:null},n.prototype.eventDelete=function(i){if(this.isEnterKey){this.isEnterKey=!1;return}switch(this.parent.currentAction){case"EditOccurrence":d(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])?this.parent.currentAction="Delete":this.parent.currentAction="DeleteOccurrence";break;case"EditSeries":this.parent.currentAction="DeleteSeries";break;case"Save":this.parent.currentAction="Delete";break;case"EditFollowingEvents":d(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])||(this.parent.currentAction="DeleteFollowingEvents");break}this.dialogEvent=i,this.isCrudAction=!1,this.dialogObject.hide(),this.parent.quickPopup.openDeleteAlert()},n.prototype.getRecurrenceEditorInstance=function(){return this.parent.isAdaptive&&!this.repeatDialogObject&&this.renderRepeatDialog(),this.recurrenceEditor},n.prototype.destroyComponents=function(){for(var i=this.getFormElements(fr),e=0,t=i;e<t.length;e++){var r=t[e],s=void 0;(r.classList.contains("e-datetimepicker")||r.classList.contains("e-datepicker")||r.classList.contains("e-checkbox")||r.classList.contains("e-dropdownlist")||r.classList.contains("e-multiselect")||r.classList.contains("e-numerictextbox"))&&(s=r.ej2_instances),s&&s[0]&&s[0].destroy()}this.buttonObj&&this.buttonObj.destroy()},n.prototype.detachComponents=function(){for(var i=this.getFormElements(fr),e=0,t=i;e<t.length;e++){var r=t[e];Q(r)}},n.prototype.destroy=function(i){if(this.parent&&!this.parent.isDestroyed&&this.parent.resetTemplates(["editorTemplate","editorHeaderTemplate","editorFooterTemplate"]),this.destroyComponents(),this.recurrenceEditor&&(this.recurrenceEditor.destroy(),Q(this.recurrenceEditor.element),this.recurrenceEditor=null),this.fieldValidator&&(this.fieldValidator.destroy(),this.fieldValidator=null),this.repeatDialogObject&&(this.repeatDialogObject.destroy(),this.repeatDialogObject=null),this.detachComponents(),this.dialogObject){if(this.dialogObject.element){var e=this.dialogObject.element.querySelector("form");rr(e),Q(e),C.remove(this.dialogObject.element,"keydown",this.preventEventSave)}this.dialogObject.destroy(),this.dialogObject=null}this.element&&(ve(this.element),this.element=null),i||(this.l10n=null,this.parent=null,this.fields=null,this.buttonObj=null,this.repeatStatus=null,this.eventWindowTime=null,this.dialogEvent=null)},n}(),EL=function(){function n(i){this.translateY=0,this.itemSize=60,this.renderedLength=0,this.averageRowHeight=0,this.startIndex=0,this.existingDataCollection=[],this.enableTransition=!0,this.parent=i,this.bufferCount=i.activeViewOptions.overscanCount<3?3:i.activeViewOptions.overscanCount,this.addEventListener()}return n.prototype.addEventListener=function(){!this.parent||this.parent&&this.parent.isDestroyed||this.parent.on(Ul,this.virtualScrolling,this)},n.prototype.removeEventListener=function(){!this.parent||this.parent&&this.parent.isDestroyed||this.parent.off(Ul,this.virtualScrolling)},n.prototype.getRenderedCount=function(){this.setItemSize();var i=this.isHorizontalScroll?this.parent.element.clientWidth:this.parent.element.clientHeight;return this.renderedLength=Math.ceil(i/this.itemSize)+this.bufferCount,this.renderedLength},n.prototype.renderVirtualTrack=function(i){var e=R("div",{className:so});if(this.isHorizontalScroll){var t=this.parent.activeView.colLevels[this.parent.activeView.colLevels.length-1].length;e.style.width=t*this.itemSize+"px"}else e.style.height=this.parent.resourceBase.expandedResources.length*this.itemSize+"px";i.appendChild(e)},n.prototype.updateVirtualScrollHeight=function(){var i=this.parent.element.querySelector("."+so),e=this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex,t=this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length-1].groupIndex;if(t!==e){var r=this.parent.element.querySelector("."+$e);this.renderedLength=r.querySelector("tbody").children.length,i.style.height=r.offsetHeight+(this.parent.resourceBase.expandedResources.length-this.renderedLength)*r.offsetHeight/this.renderedLength+"px";var s=this.parent.element.querySelector("."+Te);this.bufferCount===3&&s.scrollHeight-s.scrollTop<s.offsetHeight*this.bufferCount&&(i.style.height=parseInt(i.style.height,10)+s.offsetHeight*this.bufferCount+"px")}else i.style.height="";this.averageRowHeight=i.offsetHeight/this.parent.resourceBase.expandedResources.length},n.prototype.updateVirtualTrackHeight=function(i){var e=this.parent.resourceBase.renderedResources.length;if(e!==this.getRenderedCount()){i.style.height=this.parent.element.querySelector(".e-content-wrap").clientHeight+"px";var t=this.parent.element.querySelector("."+Pi),r=this.parent.element.querySelector("."+Te),s=this.parent.element.querySelector("."+Nn);this.translateY=0,this.setTranslate(t,r,s)}else{var a=this.parent.resourceBase.renderedResources[e-1].groupIndex,o=this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex,l=e+(o-a);l=l>this.parent.resourceBase.expandedResources.length?this.parent.resourceBase.expandedResources.length:l,i.style.height=l*this.itemSize+"px"}},n.prototype.setItemSize=function(){if(this.isHorizontalScroll)if(this.parent.group.byDate){var i=this.parent.element.querySelector("."+Hi+" table col");this.itemSize=i?sp(i,this.parent.uiStateValues.isTransformed):this.itemSize}else this.itemSize=$O(this.parent.activeView.element,se,this.parent.uiStateValues.isTransformed)||this.itemSize;else this.itemSize=this.parent.getElementHeightFromClass(this.parent.activeView.element,se)||this.itemSize},n.prototype.refreshLayout=function(){var i=this.parent.uiStateValues.scheduleHeight;this.parent.uiStateValues.scheduleHeight=this.parent.element.offsetHeight;var e=this.renderedLength;if(this.parent.uiStateValues.scheduleHeight!==i){e<this.getRenderedCount()&&(this.isRemoteRefresh=!0);var t=this.parent.element.querySelector("."+Pi),r=this.parent.element.querySelector("."+Te),s=this.parent.element.querySelector("."+Nn);this.parent.rowAutoHeight||(this.enableTransition=!1,I([r,t],"e-transition"));var a=parseInt(t.querySelector("tbody td").getAttribute("data-group-index"),10),o=a+this.renderedLength;a=o>this.parent.resourceBase.expandedResources.length?this.parent.resourceBase.expandedResources.length-this.renderedLength:a,a=a<0?0:a,this.existingDataCollection=this.parent.resourceBase.renderedResources,this.parent.resourceBase.renderedResources=this.parent.resourceBase.expandedResources.slice(a,o),this.parent.resourceBase.renderedResources.length>0&&this.updateContent(t,r,s,this.parent.resourceBase.renderedResources)}},n.prototype.renderEvents=function(){this.setTabIndex();var i=this.triggerScrollEvent(gm);if(this.parent.activeViewOptions&&this.parent.activeViewOptions.enableLazyLoading&&this.parent.crudModule){if(i.length>0){this.parent.crudModule.refreshProcessedData(!0,i),this.parent.hideSpinner();return}this.parent.crudModule.refreshDataManager();return}this.parent.crudModule&&this.parent.crudModule.refreshProcessedData(!0),this.parent.currentView!=="Month"&&this.parent.notify(si,{}),this.parent.hideSpinner()},n.prototype.virtualScrolling=function(){var i=this;this.parent.quickPopup&&(this.parent.quickPopup.quickPopupHide(),this.parent.quickPopup.morePopup.hide());var e=this.parent.element.querySelector("."+Te);if(this.isHorizontalScroll)this.horizontalScrolling(e);else{var t=this.parent.element.querySelector("."+Pi),r=this.parent.element.querySelector("."+Nn),s=this.parent.element.querySelector("."+Gl),a=this.parent.element.querySelector("."+$e);this.parent.rowAutoHeight||T([e,t],"e-transition"),this.renderedLength=t.querySelector("tbody").children.length;var o=parseInt(t.querySelector("tbody td").getAttribute("data-group-index"),10),l=this.parent.rowAutoHeight?a.offsetHeight-e.offsetHeight:this.bufferCount*this.itemSize,h=[];if(this.existingDataCollection=this.parent.resourceBase.renderedResources,e.scrollTop-this.translateY<0?h=this.upScroll(e,o):(e.scrollTop+e.clientHeight>=e.scrollHeight-this.itemSize||e.scrollTop>this.translateY+l)&&(h=this.downScroll(e,o)),!d(h)&&h.length>0){this.triggerScrollEvent(Rc);var c=this.parent.getSelectedCells();this.focusedEle=c[c.length-1]||this.focusedEle,this.updateContent(t,e,r,h),this.setTranslate(t,e,r,s),this.parent.dragAndDropModule&&this.parent.dragAndDropModule.actionObj.action==="drag"&&this.parent.dragAndDropModule.navigationWrapper(),window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout(function(){i.renderEvents()},250)}}},n.prototype.horizontalScrolling=function(i){var e=this,t=[],r=this.bufferCount*this.itemSize;if(Math.abs(i.scrollLeft)-Math.abs(this.translateY)<0?t=this.leftScroll(i):Math.abs(i.scrollLeft)-Math.abs(this.translateY)>r&&(t=this.rightScroll(i)),!d(t)&&t.length>0){if(this.parent.resourceBase.expandedResources.length!==t.length||this.parent.resourceBase.expandedResources[0]!==t[0]||this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1]!==t[t.length-1]){this.triggerScrollEvent(Rc);var s=this.parent.activeView.colLevels.slice(0);this.updateHorizontalContent(i,t),de(i.querySelector("table"),{transform:"translateX("+this.translateY+"px)"}),this.parent.activeView.colLevels=s,this.parent.dragAndDropModule&&this.parent.dragAndDropModule.actionObj.action==="drag"&&this.parent.dragAndDropModule.navigationWrapper()}window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout(function(){e.renderEvents()},250)}},n.prototype.triggerScrollEvent=function(i){var e=this,t=[];if(!this.parent.activeView)return t;var r={startDate:this.parent.activeView.startDate(),endDate:this.parent.activeView.endDate(),startIndex:this.parent.resourceBase.renderedResources[0].groupIndex,endIndex:this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length-1].groupIndex,resourceData:this.parent.resourceBase.renderedResources.map(function(s){return s.resourceData}),name:i};return this.parent.trigger(i,r,function(s){i===Rc?e.parent.showSpinner():i===gm&&!d(s.eventData)&&s.eventData.length>0&&(t=s.eventData)}),t},n.prototype.upScroll=function(i,e){var t=0;t=~~(i.scrollTop/this.itemSize)+Math.ceil(i.clientHeight/this.itemSize)-this.renderedLength,this.parent.rowAutoHeight&&(t=t>e?e-this.bufferCount:t),t=t>0?t:0;var r=this.getBufferCollection(t,t+this.renderedLength);if(this.parent.resourceBase.renderedResources=r,e===0)this.translateY=i.scrollTop;else{var s=this.parent.rowAutoHeight?this.averageRowHeight:this.itemSize;s=s>0?s:this.itemSize,this.translateY=i.scrollTop-this.bufferCount*s>0?i.scrollTop-this.bufferCount*s:0,this.parent.rowAutoHeight&&this.translateY===0&&t!==0&&(r=this.getBufferCollection(0,this.renderedLength),this.parent.resourceBase.renderedResources=r)}return r},n.prototype.downScroll=function(i,e){var t=this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length-1].groupIndex,r=this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex;if(t===r)return null;var s=0;s=~~(i.scrollTop/this.itemSize),this.parent.rowAutoHeight&&(s=~~((i.scrollTop-this.translateY)/this.averageRowHeight)+e,s=s>e+this.bufferCount?s:e+this.bufferCount);var a=s+this.renderedLength;a=a>this.parent.resourceBase.expandedResources.length?s+(this.parent.resourceBase.expandedResources.length-s):a;var o=this.getBufferCollection(a-this.renderedLength,a);return this.translateY=i.scrollTop,o},n.prototype.leftScroll=function(i){var e=0;return e=~~(Math.abs(i.scrollLeft)/this.itemSize)+Math.ceil(i.clientWidth/this.itemSize)-this.renderedLength,e=e>0?e:0,this.getCollection(e,e+this.renderedLength)},n.prototype.rightScroll=function(i){var e=this.parent.activeView.colLevels[this.parent.activeView.colLevels.length-1],t=0;t=~~(Math.abs(i.scrollLeft)/this.itemSize);var r=t+this.renderedLength;return r=r>e.length-1?e.length-1:r,this.getCollection(r-this.renderedLength,r)},n.prototype.getCollection=function(i,e){this.translateY=i*this.itemSize,i=i<0?0:i;var t=this.getResCollection(i,e);return this.parent.enableRtl&&(this.translateY=-this.translateY),t},n.prototype.getResCollection=function(i,e){var t=this.parent.activeView.colLevels[this.parent.activeView.colLevels.length-1];e=e>t.length?t.length-1:e;var r=[],s={startIndex:0,endIndex:0};if(this.parent.activeViewOptions.group.byDate){if(t[parseInt(i.toString(),10)].date.getTime()===this.parent.resourceBase.expandedResources[0].date.getTime()&&t[parseInt(e.toString(),10)].date.getTime()===this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].date.getTime())return this.parent.resourceBase.expandedResources;r=this.getByDateCollection(t[parseInt(i.toString(),10)],t[parseInt(e.toString(),10)],s),this.setRenderedDates(r)}else{if(t[parseInt(i.toString(),10)].groupIndex===this.parent.resourceBase.expandedResources[0].groupIndex&&t[parseInt(e.toString(),10)].groupIndex===this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex)return this.parent.resourceBase.expandedResources;r=this.getByIdCollection(t[parseInt(i.toString(),10)],t[parseInt(e.toString(),10)],s)}return this.parent.currentView!=="Month"&&(this.startIndex=s.startIndex,r=t.slice(s.startIndex,s.endIndex)),this.translateY=s.startIndex*this.itemSize,r},n.prototype.getByDateCollection=function(i,e,t){var r=this.parent.activeView.colLevels[0].filter(function(s){return i.date.getTime()<=s.date.getTime()&&s.date.getTime()<=e.date.getTime()});return this.setStartEndIndex(this.parent.activeView.colLevels[0],r[0],r[r.length-1],t),r},n.prototype.getByIdCollection=function(i,e,t){var r=this.parent.resourceBase.lastResourceLevel.filter(function(s){return i.groupIndex<=s.groupIndex&&s.groupIndex<=e.groupIndex});return this.parent.resourceBase.renderedResources=r,this.setStartEndIndex(this.parent.resourceBase.lastResourceLevel,r[0],r[r.length-1],t),r},n.prototype.setStartEndIndex=function(i,e,t,r){var s=0;i.filter(function(a){e===a?r.startIndex=s:t===a&&(r.endIndex=s+a.colSpan),s+=a.colSpan}),e===t&&(r.endIndex=r.startIndex+t.colSpan)},n.prototype.updateContent=function(i,e,t,r){var s=i.querySelector("tbody").children.length;document.activeElement&&document.activeElement.classList.contains(ti)&&(this.isResourceCell=!0,this.parent.element.focus());for(var a=0;a<s;a++)ve(t.querySelector("div"));this.parent.resourceBase.renderedResources=r;var o=this.parent.activeView.getGroupIndices(r),l=this.parent.activeView.getGroupIndices(this.existingDataCollection),h=o.filter(function(b){return l.indexOf(b)<0}),c=Array.from(i.querySelectorAll("tbody tr")),u=Array.from(e.querySelectorAll("tbody tr")),p=i.querySelector("tbody"),f=e.querySelector("tbody");this.removeObsoleteRows(c,o),this.removeObsoleteRows(u,o);var v=this.parent.resourceBase.getContentRows(r,!0);this.parent.isReact&&this.parent.renderTemplates();for(var m=this.parent.activeView.getContentRows(),g=this.parent.activeView.getEventRows(r.length),a=0;a<h.length;a++){var y=o.indexOf(h[parseInt(a.toString(),10)]);y===0?(yt([v[parseInt(a.toString(),10)]],p),yt([m[parseInt(a.toString(),10)]],f)):p&&f&&p.children[parseInt(y.toString(),10)]&&f.children[parseInt(y.toString(),10)]?(p.insertBefore(v[parseInt(a.toString(),10)],p.children[parseInt(y.toString(),10)]),f.insertBefore(m[parseInt(a.toString(),10)],f.children[parseInt(y.toString(),10)])):(oe([v[parseInt(a.toString(),10)]],p),oe([m[parseInt(a.toString(),10)]],f))}oe(g,t)},n.prototype.removeObsoleteRows=function(i,e){i.forEach(function(t){var r=parseInt(t.firstElementChild.getAttribute("data-group-index"),10);e.indexOf(r)<0&&ve(t)})},n.prototype.updateHorizontalContent=function(i,e){this.existingDataCollection=this.parent.resourceBase.expandedResources,this.parent.resourceBase.expandedResources=e;var t=this.parent.getSelectedCells();this.focusedEle=t[t.length-1]||this.focusedEle;var r=i.querySelector("tbody"),s=Array.from(r.querySelectorAll("tr"));this.parent.currentView==="Month"?this.updateMonthViewContent(i,e):this.updateOtherViewContent(i,e,s)},n.prototype.updateMonthViewContent=function(i,e){for(var t=i.querySelectorAll(" tr").length,r=0;r<t;r++)ve(i.querySelector("tbody tr"));this.parent.activeViewOptions.group.byDate?this.parent.activeView.colLevels[0]=e:this.parent.activeView.colLevels[this.parent.activeView.colLevels.length-2]=e;var s=this.parent.activeView.getContentRows();oe(s,i.querySelector("tbody"))},n.prototype.updateOtherViewContent=function(i,e,t){var r=this,s=i.querySelector("tbody"),a=i.querySelector("colgroup"),o=i.querySelector("thead"),l=i.querySelector("table");this.parent.activeView.colLevels[this.parent.activeView.colLevels.length-1]=e;var h=this.parent.activeViewOptions.group.byDate?new Set(e.map(function(v){return v.date.getTime()})):new Set(e.map(function(v){return v.groupIndex}));t.forEach(function(v){var m=Array.from(v.querySelectorAll("td"));m.forEach(function(g){h.has(r.getIdentifier(g))||g.remove()})});for(var c=[].slice.call(i.querySelector("colgroup").children),u=0;u<c.length;u++)ve(c[parseInt(u.toString(),10)]);e.forEach(function(){return a.appendChild(R("col"))});for(var p=[].slice.call(i.querySelector("thead").children),u=0;u<p.length;u++)ve(p[parseInt(u.toString(),10)]);o.appendChild(this.parent.eventBase.createEventWrapper("",this.startIndex>0?this.startIndex:0)),this.parent.activeViewOptions.timeScale.enable&&o.appendChild(this.parent.eventBase.createEventWrapper("timeIndicator")),yt([o],l);var f=this.parent.activeView.getContentRows();this.mergeNewTdData(s,f)},n.prototype.getIdentifier=function(i){if(this.parent.activeViewOptions.group.byDate){var e=new Date(parseInt(i.getAttribute("data-date"),10));return W(e).getTime()}return parseInt(i.getAttribute("data-group-index"),10)},n.prototype.mergeNewTdData=function(i,e){var t=this,r=Array.from(i.querySelectorAll("tr"));r.forEach(function(s,a){if(a<e.length){var o=e[parseInt(a.toString(),10)],l=Array.from(s.querySelectorAll("td")),h=Array.from(o.querySelectorAll("td"));h.forEach(function(c){for(var u=!1,p=0,f=l;p<f.length;p++){var v=f[p];if(t.getIdentifier(c)<t.getIdentifier(v)){s.insertBefore(c,v),u=!0;break}}u||s.appendChild(c)})}})},n.prototype.getBufferCollection=function(i,e){return this.parent.resourceBase.expandedResources.slice(i,e)},n.prototype.setTranslate=function(i,e,t,r){de(i.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),de(e.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),de(t,{transform:"translateY("+this.translateY+"px)"}),d(r)||de(r,{transform:"translateY("+this.translateY+"px)"})},n.prototype.updateFocusedWorkCell=function(){if(this.focusedEle){var i=parseInt(this.focusedEle.getAttribute("data-date"),10),e=parseInt(this.focusedEle.getAttribute("data-group-index"),10),t=this.parent.element.querySelector("."+se+'[data-date="'+i+'"][data-group-index="'+e+'"]');t&&this.parent.addSelectedClass([t],t,!0),this.focusedEle=null}},n.prototype.setRenderedDates=function(i){if(this.parent.currentView!=="Month"){var e=i.map(function(s){return s.date});this.parent.resourceBase.renderedResources.forEach(function(s){return s.renderDates=e})}else{var t=i.map(function(s){return s.date.getDay()}),r=this.parent.activeView.renderDates.filter(function(s){return t.indexOf(s.getDay())>=0});this.parent.resourceBase.renderedResources.forEach(function(s){return s.renderDates=r})}},n.prototype.setTabIndex=function(){var i=this.parent.element.querySelector("."+Pi),e=[].slice.call(this.parent.element.querySelectorAll("."+ti));e&&i&&e.forEach(function(r){r.getBoundingClientRect().top>=i.getBoundingClientRect().top&&r.setAttribute("tabindex","0")});var t=this.parent.element.querySelector("."+ti+'[tabindex="0"]');this.isResourceCell&&t&&(t.focus(),this.isResourceCell=!1)},n.prototype.destroy=function(){this.removeEventListener(),this.focusedEle=null},n}(),CL=function(){function n(i){this.parent=i}return n.prototype.render=function(i,e){e===void 0&&(e=!0),this.initializeLayout(i),this.parent.activeView&&e&&this.parent.crudModule.refreshDataManager()},n.prototype.initializeLayout=function(i){if(this.parent.activeView){var e=["cellTemplate","tooltipTemplate","majorSlotTemplate","minorSlotTemplate","headerTooltipTemplate","dateHeaderTemplate","dayHeaderTemplate","monthHeaderTemplate","headerIndentTemplate","resourceHeaderTemplate","cellHeaderTemplate","dateRangeTemplate"];this.parent.activeEventTemplates.length>0?(e=e.concat(this.parent.activeEventTemplates),this.parent.activeEventTemplates=[]):e.push("eventTemplate"),this.parent.resetTemplates(e),this.parent.activeView.removeEventListener(),this.parent.activeView.destroy()}switch(i){case"Day":this.parent.activeView=this.parent.dayModule;break;case"Week":this.parent.activeView=this.parent.weekModule;break;case"WorkWeek":this.parent.activeView=this.parent.workWeekModule;break;case"Month":this.parent.activeView=this.parent.monthModule;break;case"Year":this.parent.activeView=this.parent.yearModule;break;case"Agenda":this.parent.activeView=this.parent.agendaModule;break;case"MonthAgenda":this.parent.activeView=this.parent.monthAgendaModule;break;case"TimelineDay":this.parent.activeView=this.parent.timelineViewsModule,d(this.parent.activeView)||(this.parent.activeView.viewClass="e-timeline-day-view");break;case"TimelineWorkWeek":this.parent.activeView=this.parent.timelineViewsModule,d(this.parent.activeView)||(this.parent.activeView.viewClass="e-timeline-work-week-view");break;case"TimelineWeek":this.parent.activeView=this.parent.timelineViewsModule,d(this.parent.activeView)||(this.parent.activeView.viewClass="e-timeline-week-view");break;case"TimelineMonth":this.parent.activeView=this.parent.timelineMonthModule;break;case"TimelineYear":this.parent.activeView=this.parent.timelineYearModule;break}if(d(this.parent.activeView)){var t=this.parent.viewCollections[0].option;if(t)return this.parent.setProperties({currentView:t},!0),this.parent.headerModule&&(this.parent.headerModule.updateActiveView(),this.parent.headerModule.setCalendarView()),console.warn('[WARNING] :: Module "'+i+'" is not available in Schedule component! You either misspelled the module name or forgot to load it.'),this.initializeLayout(t);throw Error("Inject required modules")}this.parent.uiStateValues.scheduleHeight=this.parent.element.offsetHeight,this.parent.activeView.viewIndex=this.parent.viewIndex,this.updateLabelText(i),this.parent.activeView.addEventListener(),this.parent.activeView.getRenderDates(),this.parent.uiStateValues.isGroupAdaptive=this.parent.activeViewOptions.group.resources.length>0&&(this.parent.enableAdaptiveUI&&!this.parent.isAdaptive||this.parent.isAdaptive&&this.parent.activeViewOptions.group.enableCompactView),this.parent.virtualScrollModule&&(this.parent.virtualScrollModule.destroy(),this.parent.virtualScrollModule=null),(["Agenda","MonthAgenda","Year","TimelineYear"].indexOf(this.parent.currentView)===-1||this.parent.currentView==="TimelineYear"&&this.parent.activeViewOptions.orientation==="Vertical")&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.parent.virtualScrollModule=new EL(this.parent),this.parent.activeView.isTimelineView()?this.parent.uiStateValues.top=0:(this.parent.virtualScrollModule.isHorizontalScroll=!0,this.parent.uiStateValues.left=0)),this.updateHeader(),this.parent.currentTimezoneDate=this.parent.getCurrentTime(),this.parent.activeView.renderLayout(Wu),this.parent.renderTemplates(),this.parent.eventTooltip&&(this.parent.eventTooltip.destroy(),this.parent.eventTooltip=null),(this.parent.eventSettings.enableTooltip||this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.headerTooltipTemplate)&&(this.parent.eventTooltip=new Xu(this.parent))},n.prototype.updateHeader=function(){this.parent.headerModule&&(this.parent.headerModule.setDayOfWeek(this.parent.activeViewOptions.firstDayOfWeek),this.parent.activeViewOptions.readonly?T([this.parent.element],gl):this.parent.element.classList.contains(gl)&&I([this.parent.element],gl),this.parent.headerModule.updateDateRange(),this.parent.headerModule.updateHeaderItems("remove"))},n.prototype.updateLabelText=function(i){this.parent.element.setAttribute("role","application"),this.parent.element.removeAttribute("aria-labelledby"),this.parent.element.removeAttribute("aria-label"),i==="Year"?this.parent.element.setAttribute("aria-label",this.parent.activeView.getLabelText(i)):this.parent.element.setAttribute("aria-labelledby",this.parent.element.id+"_table")},n}(),wL=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),nu=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},TL=function(n){wL(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return nu([S(!0)],i.prototype,"highlight",void 0),nu([S("09:00")],i.prototype,"start",void 0),nu([S("18:00")],i.prototype,"end",void 0),i}(Kt),DL=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Pa=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},AL=function(n){DL(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return Pa([S(!0)],i.prototype,"enable",void 0),Pa([S(60)],i.prototype,"interval",void 0),Pa([S(2)],i.prototype,"slotCount",void 0),Pa([S()],i.prototype,"minorSlotTemplate",void 0),Pa([S()],i.prototype,"majorSlotTemplate",void 0),i}(Kt),xL=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),nl=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},kL=function(n){xL(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return nl([S("Both")],i.prototype,"templateType",void 0),nl([S()],i.prototype,"header",void 0),nl([S()],i.prototype,"content",void 0),nl([S()],i.prototype,"footer",void 0),i}(Kt),IL=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ug=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},ML=function(n){IL(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return Ug([S()],i.prototype,"option",void 0),Ug([S()],i.prototype,"template",void 0),i}(Kt),OL=function(){function n(i){this.parent=i,this.crudObj={sourceEvent:null,targetEvent:null,isCrudAction:!1}}return n.prototype.getQuery=function(){var i=this.parent.activeView.startDate(),e=this.parent.activeView.endDate();return this.parent.dataModule.generateQuery(i,e)},n.prototype.getTable=function(){if(this.parent.eventSettings.query){var i=this.parent.eventSettings.query.clone();return i.fromTable}return null},n.prototype.refreshDataManager=function(){var i=this;if(this.parent.activeView){if(this.parent.uiStateValues&&this.parent.uiStateValues.isPreventEventRefresh){this.parent.uiStateValues.isPreventEventRefresh=!1,this.parent.refreshEvents(!1),this.parent.hideSpinner();return}var e=this.parent.activeView.startDate(),t=this.parent.activeView.endDate(),r=this.parent.dataModule.getData(this.parent.dataModule.generateQuery(e,t));r.then(function(s){return i.dataManagerSuccess(s)}).catch(function(s){return i.dataManagerFailure(s)})}},n.prototype.dataManagerSuccess=function(i){var e=this;!this.parent||this.parent&&this.parent.isDestroyed||this.parent.trigger(_O,i,function(t){if(!t.cancel){var r=$([],t.result,null,!0);e.parent.eventsData=r.filter(function(s){return!s[e.parent.eventFields.isBlock]}),e.parent.blockData=r.filter(function(s){return s[e.parent.eventFields.isBlock]}),e.refreshProcessedData(),e.parent.dragAndDropModule&&e.parent.dragAndDropModule.actionObj.action==="drag"&&e.parent.dragAndDropModule.navigationWrapper(),e.parent.trigger(qO,null,function(){e.parent.hideSpinner(),e.parent.isPrinting&&setTimeout(function(){e.parent.notify(YO,{})},100)})}})},n.prototype.dataManagerFailure=function(i){var e=this;!this.parent||this.parent&&this.parent.isDestroyed||this.parent.trigger(fa,{error:i},function(){return e.parent.hideSpinner()})},n.prototype.refreshProcessedData=function(i,e){if(i===void 0&&(i=!1),this.parent.dragAndDropModule&&(this.parent.dragAndDropModule.actionObj.action="",I([this.parent.element],"e-event-action")),this.parent.activeViewOptions&&this.parent.activeViewOptions.eventTemplate){var t=["eventTemplate"];if(this.crudObj.isCrudAction&&["Agenda","MonthAgenda","Year","TimelineYear"].indexOf(this.parent.currentView)===-1){t=[];for(var r=0,s=this.crudObj.sourceEvent.length;r<s;r++)t.push("eventTemplate_"+this.crudObj.sourceEvent[parseInt(r.toString(),10)].groupIndex),this.crudObj.targetEvent[parseInt(r.toString(),10)]&&this.crudObj.sourceEvent[parseInt(r.toString(),10)].groupIndex!==this.crudObj.targetEvent[parseInt(r.toString(),10)].groupIndex&&t.push("eventTemplate_"+this.crudObj.targetEvent[parseInt(r.toString(),10)].groupIndex)}t.length>0&&this.parent.resetTemplates(t)}if(i){this.parent.notify(Fi,{processedData:e?this.parent.eventBase.processData(e):this.parent.eventsProcessed});return}var a=this.parent.eventsData||[],o=this.parent.blockData||[],l=a.concat(o);this.parent.notify(Fi,{processedData:this.parent.eventBase?this.parent.eventBase.processData(l):[]})},n.prototype.refreshData=function(i){var e=this,t={requestType:i.requestType,cancel:!1,data:i.data,addedRecords:i.editParams.addedRecords,changedRecords:i.editParams.changedRecords,deletedRecords:i.editParams.deletedRecords};if(this.parent.dragAndDropModule&&this.parent.dragAndDropModule.actionObj&&this.parent.dragAndDropModule.actionObj.element&&this.parent.dragAndDropModule.actionObj.action&&(this.parent.dragAndDropModule.actionObj.element.style.display="none"),this.parent.resizeModule&&this.parent.resizeModule.actionObj&&this.parent.resizeModule.actionObj.element&&this.parent.resizeModule.actionObj.action&&(this.parent.resizeModule.actionObj.element.style.display="none"),this.parent.isSpecificResourceEvents()&&(i.requestType==="eventCreated"||i.requestType==="eventRemoved")){this.crudObj.isCrudAction=!0,this.crudObj.sourceEvent=[];for(var r=i.data instanceof Array?i.data.length===0&&i.requestType==="eventRemoved"?i.editParams.deletedRecords:i.data:(typeof i.data=="string"||typeof i.data=="number")&&i.requestType==="eventRemoved"?i.editParams.deletedRecords:[i.data],s=function(c){a.crudObj.isCrudAction=!(i.requestType==="eventRemoved"&&!d(c.parent));var u=a.parent.eventBase.getGroupIndexFromEvent(c);u>-1&&a.parent.crudModule.crudObj.sourceEvent.filter(function(p){return p.groupIndex===u}).length===0&&a.crudObj.isCrudAction&&a.crudObj.sourceEvent.push(a.parent.resourceBase.lastResourceLevel[parseInt(u.toString(),10)])},a=this,o=0,l=r;o<l.length;o++){var h=l[o];s(h)}this.crudObj.targetEvent=this.crudObj.sourceEvent}this.parent.dataModule.dataManager.dataSource.offline?this.parent.trigger(Mr,t,function(c){c.cancel||e.refreshDataManager()}):i.promise.then(function(){!e.parent||e.parent&&e.parent.isDestroyed||e.parent.trigger(Mr,t,function(c){c.cancel||e.refreshDataManager()})}).catch(function(c){!e.parent||e.parent&&e.parent.isDestroyed||e.parent.trigger(fa,{error:c})})},n.prototype.processAddEvent=function(i){var e=this.parent.eventFields,t={addedRecords:[],changedRecords:[],deletedRecords:[]},r;if(i.addedRecords instanceof Array){for(var s=0,a=i.addedRecords;s<a.length;s++){var o=a[s];o=this.parent.eventBase.updateEventDateTime(o);var l=$({},this.parent.eventBase.processTimezone(o,!0),null,!0);t.addedRecords.push(l)}r=this.parent.dataModule.dataManager.saveChanges(t,e.id,this.getTable(),this.getQuery())}else{var h=this.parent.eventBase.processTimezone(i.addedRecords,!0);t.addedRecords.push(h),r=this.parent.dataModule.dataManager.insert(h,this.getTable(),this.getQuery())}var c={requestType:"eventCreated",cancel:!1,data:i.addedRecords,promise:r,editParams:t};this.refreshData(c)},n.prototype.processSaveEvent=function(i){var e,t=this.parent.eventFields,r={addedRecords:[],changedRecords:[],deletedRecords:[]};if(i.changedRecords instanceof Array){for(var s=0,a=i.changedRecords;s<a.length;s++){var o=a[s];o=this.parent.eventBase.updateEventDateTime(o);var l=$({},this.parent.eventBase.processTimezone(o,!0),null,!0);r.changedRecords.push(l)}e=this.parent.dataModule.dataManager.saveChanges(r,t.id,this.getTable(),this.getQuery())}else{var h=this.parent.eventBase.processTimezone(i.changedRecords,!0);r.changedRecords.push(h),e=this.parent.dataModule.dataManager.update(t.id,h,this.getTable(),this.getQuery())}var c=$({},i.changedRecords[i.changedRecords.length-1],null,!0);this.parent.eventBase.selectWorkCellByTime([this.parent.eventBase.processTimezone(c)]);var u={requestType:"eventChanged",cancel:!1,data:i.changedRecords,promise:e,editParams:r};this.refreshData(u)},n.prototype.processDeleteEvent=function(i){var e,t=this.parent.eventFields,r={addedRecords:[],changedRecords:[],deletedRecords:[]};i.deletedRecords.length>1?(r.deletedRecords=r.deletedRecords.concat(i.deletedRecords),e=this.parent.dataModule.dataManager.saveChanges(r,t.id,this.getTable(),this.getQuery())):(r.deletedRecords.push(i.deletedRecords[0]),e=this.parent.dataModule.dataManager.remove(t.id,i.deletedRecords[0],this.getTable(),this.getQuery())),this.parent.eventBase.selectWorkCellByTime(i.deletedRecords);var s={requestType:"eventRemoved",cancel:!1,data:i.deletedRecords,promise:e,editParams:r};this.refreshData(s)},n.prototype.addEvent=function(i){var e=this;if(this.parent.eventSettings.allowAdding&&!this.parent.activeViewOptions.readonly){if(!this.isBlockEvent(i)&&this.parent.eventBase.isBlockRange(i)){this.parent.quickPopup.openValidationError("blockAlert",i);return}if(this.parent.eventBase.checkOverlap(i))return;var t=i instanceof Array?i:[i];if(t.length===0)return;var r={requestType:"eventCreate",cancel:!1,data:t,addedRecords:t,changedRecords:[],deletedRecords:[]};this.parent.trigger(Yt,r,function(s){s.cancel||(s.promise?s.promise.then(function(a){!e.parent||e.parent&&e.parent.isDestroyed||a&&e.processAddEvent(s)}).catch(function(a){!e.parent||e.parent&&e.parent.isDestroyed||e.parent.trigger(fa,{error:a})}):e.processAddEvent(s))})}},n.prototype.saveEvent=function(i,e){var t=this;if(this.parent.eventSettings.allowEditing&&!this.parent.activeViewOptions.readonly){if(this.parent.currentAction!=="EditFollowingEvents"&&!this.isBlockEvent(i)&&this.parent.eventBase.isBlockRange(i)){this.parent.quickPopup.openValidationError("blockAlert",i),this.parent.crudModule.crudObj.isCrudAction=!1;return}var r=i instanceof Array?i:[i];if(r.length===0)return;if(this.parent.currentAction=e,e)switch(e){case"Save":this.processSave(i);break;case"EditOccurrence":this.processOccurrences(i,e);break;case"EditFollowingEvents":this.processFollowSeries(i,e);break;case"EditSeries":this.processEntireSeries(i,e);break}else{if(this.parent.eventBase.checkOverlap(i))return;var s={requestType:"eventChange",cancel:!1,data:i,addedRecords:[],changedRecords:r,deletedRecords:[]};this.parent.trigger(Yt,s,function(a){a.cancel||(a.promise?a.promise.then(function(o){!t.parent||t.parent&&t.parent.isDestroyed||o&&t.processSaveEvent(a)}).catch(function(o){!t.parent||t.parent&&t.parent.isDestroyed||t.parent.trigger(fa,{error:o})}):t.processSaveEvent(a))})}}},n.prototype.deleteEvent=function(i,e){var t=this;if(this.parent.eventSettings.allowDeleting&&!this.parent.activeViewOptions.readonly){this.parent.currentAction=e;var r=[];if(typeof i=="string"||typeof i=="number"?r=this.parent.eventsData.filter(function(a){return a[t.parent.eventFields.id]===i}):r=i instanceof Array?i:[i],r.length===0)return;if(e)switch(e){case"Delete":this.processDelete(r);break;case"DeleteOccurrence":this.processOccurrences(r,e);break;case"DeleteFollowingEvents":this.processFollowSeries(r,e);break;case"DeleteSeries":this.processEntireSeries(r,e);break}else{var s={requestType:"eventRemove",cancel:!1,data:i,addedRecords:[],changedRecords:[],deletedRecords:r};this.parent.trigger(Yt,s,function(a){a.cancel||(a.promise?a.promise.then(function(o){!t.parent||t.parent&&t.parent.isDestroyed||o&&t.processDeleteEvent(a)}).catch(function(o){!t.parent||t.parent&&t.parent.isDestroyed||t.parent.trigger(fa,{error:o})}):t.processDeleteEvent(a))})}}},n.prototype.processOccurrences=function(i,e){var t=this,r=[],s=!1;if(i instanceof Array)for(var a=0,o=i;a<o.length;a++){var l=o[a];r.push({occurrence:l,parent:this.getParentEvent(l)})}else r={occurrence:i,parent:this.getParentEvent(i)};var h=i instanceof Array?i:[i],c={requestType:e==="EditOccurrence"?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:h,deletedRecords:[]};c.data=r,this.parent.trigger(Yt,c,function(u){if(!u.cancel){for(var p=t.parent.eventFields,f={addedRecords:[],changedRecords:[],deletedRecords:[]},v=r instanceof Array?r:[r],m=function(A,D){var N=u.changedRecords[parseInt(A.toString(),10)],x=v[parseInt(A.toString(),10)].parent,j=x[p.recurrenceException],q=void 0,L=void 0;switch(e){case"EditOccurrence":q=t.parent.eventsProcessed.filter(function(O){return O.Guid===N.Guid})[0],L=t.excludeDateCheck(q[p.startTime],j),L!==x[p.recurrenceException]?(x[p.recurrenceException]=L,N[p.recurrenceException]=gn(q[p.startTime]),N[p.recurrenceID]=x[p.id],N[p.followingID]=null,f.changedRecords.push(t.parent.eventBase.processTimezone(x,!0)),f.addedRecords.push(t.parent.eventBase.processTimezone(N,!0))):f.changedRecords.push(t.parent.eventBase.processTimezone(N,!0));break;case"DeleteOccurrence":N[p.recurrenceException]||(x[p.recurrenceException]=t.excludeDateCheck(N[p.startTime],j),f.changedRecords.push(t.parent.eventBase.processTimezone(x,!0))),N[p.id]!==x[p.id]&&(f.deletedRecords.push(t.parent.eventBase.processTimezone(N,!0)),s=!0);break}},g=0,y=u.changedRecords.length;g<y;g++)m(g,y);var b=t.parent.dataModule.dataManager.saveChanges(f,p.id,t.getTable(),t.getQuery()),E=$({},u.changedRecords[u.changedRecords.length-1],null,!0);t.parent.eventBase.selectWorkCellByTime(e==="EditOccurrence"?[t.parent.eventBase.processTimezone(E)]:[E]);var w={requestType:e==="EditOccurrence"?"eventChanged":"eventRemoved",cancel:!1,data:s?u.deletedRecords:u.changedRecords,promise:b,editParams:f};t.refreshData(w)}})},n.prototype.processFollowSeries=function(i,e){var t=this,r=[];if(i instanceof Array)for(var s=0,a=i;s<a.length;s++){var o=a[s];r.push({occurrence:o,parent:this.getParentEvent(o)})}else r={occurrence:i,parent:this.getParentEvent(i)};var l=i instanceof Array?i:[i],h={requestType:e==="EditFollowingEvents"?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:l,deletedRecords:[]};h.data=r,this.parent.trigger(Yt,h,function(c){if(!c.cancel){for(var u=t.parent.eventFields,p={addedRecords:[],changedRecords:[],deletedRecords:[]},f=r instanceof Array?r:[r],v=function(w,A){var D=c.changedRecords[parseInt(w.toString(),10)],N=f[parseInt(w.toString(),10)].parent,x=t.parent.eventBase.getEventCollections(N,D),j=void 0;switch(e){case"EditFollowingEvents":if(t.processRecurrenceRule(N,D),j=!t.parent.eventBase.isFollowingEvent(N,D),D[u.followingID]=j?null:N[u.id],D[u.recurrenceID]=null,p.addedRecords.push(t.parent.eventBase.processTimezone(D,!0)),p.changedRecords.push(t.parent.eventBase.processTimezone(N,!0)),!t.parent.uiStateValues.isIgnoreOccurrence){if(D[u.recurrenceException]=null,x.occurrence.length>0){var q=x.occurrence.slice(-1)[0][u.recurrenceRule];q.indexOf("COUNT")===-1&&(D[u.recurrenceRule]=q)}x.follow.length>0&&(D[u.recurrenceRule]=x.follow.slice(-1)[0][u.recurrenceRule],p.deletedRecords=p.deletedRecords.concat(x.follow)),j&&(x.occurrence=x.occurrence.filter(function(L){return L[u.recurrenceID]===N[u.id]})),p.deletedRecords=p.deletedRecords.concat(x.occurrence)}break;case"DeleteFollowingEvents":t.processRecurrenceRule(N,D[u.startTime]),p.changedRecords.push(t.parent.eventBase.processTimezone(N,!0)),p.deletedRecords=p.deletedRecords.concat(x.occurrence).concat(x.follow);break}},m=0,g=c.changedRecords.length;m<g;m++)v(m,g);var y=t.parent.dataModule.dataManager.saveChanges(p,u.id,t.getTable(),t.getQuery()),b=$({},c.changedRecords[c.changedRecords.length-1],null,!0);t.parent.eventBase.selectWorkCellByTime(e==="EditFollowingEvents"?[t.parent.eventBase.processTimezone(b)]:[b]);var E={requestType:e==="EditFollowingEvents"?"eventChanged":"eventRemoved",cancel:!1,data:c.changedRecords,promise:y,editParams:p};t.refreshData(E)}})},n.prototype.processEntireSeries=function(i,e){var t=this,r=[],s=!1;if(i instanceof Array)for(var a=0,o=i;a<o.length;a++){var l=o[a];r.push(this.getParentEvent(l,!0))}else r=this.getParentEvent(i,!0);var h=i instanceof Array?i:[i],c={requestType:e==="EditSeries"?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:[]};if(c.data=r,e==="EditSeries"?c.changedRecords=h:c.deletedRecords=h,e==="EditSeries"&&!this.parent.uiStateValues.isIgnoreOccurrence)for(var u=r instanceof Array?r:[r],p=0,f=c.changedRecords.length;p<f;p++){var v=u[parseInt(p.toString(),10)],m=this.parent.eventBase.getEventCollections(v),g=m.follow.concat(m.occurrence);c.deletedRecords=c.deletedRecords.concat(g)}this.parent.trigger(Yt,c,function(y){if(!y.cancel){for(var b=t.parent.eventFields,E={addedRecords:[],changedRecords:[],deletedRecords:[]},w=r instanceof Array?r:[r],A=e==="EditSeries"?y.changedRecords:y.deletedRecords,D=function(O,P){var F=A[parseInt(O.toString(),10)],ie=w[parseInt(O.toString(),10)],U=t.parent.eventBase.getEventCollections(ie),ne=U.follow.concat(U.occurrence);switch(e){case"EditSeries":if(F[b.id]=ie[b.id],F[b.recurrenceID]=null,F[b.followingID]=null,t.parent.uiStateValues.isIgnoreOccurrence&&F[b.recurrenceException]){var Ae=t.parent.eventsData.filter(function(ge){return ge[b.id]===F[b.id]});Ae.length>0&&(F[b.recurrenceRule]=Ae[0][b.recurrenceRule])}else F[b.recurrenceException]=null,E.deletedRecords=E.deletedRecords.concat(ne);E.changedRecords.push(t.parent.eventBase.processTimezone(F,!0)),t.parent.uiStateValues.isIgnoreOccurrence=!1;break;case"DeleteSeries":E.deletedRecords=E.deletedRecords.concat(ne.concat(t.parent.eventBase.processTimezone(ie,!0))),s=!0;break}},N=0,x=A.length;N<x;N++)D(N,x);var j=t.parent.dataModule.dataManager.saveChanges(E,b.id,t.getTable(),t.getQuery()),q=$({},A[A.length-1],null,!0);t.parent.eventBase.selectWorkCellByTime(e==="EditSeries"?[t.parent.eventBase.processTimezone(q)]:[q]);var L={requestType:e==="EditSeries"?"eventChanged":"eventRemoved",cancel:!1,data:s?y.deletedRecords:y.changedRecords,promise:j,editParams:E};t.refreshData(L)}})},n.prototype.processDelete=function(i){for(var e=this,t=[],r=0,s=i;r<s.length;r++){var a=s[r];a[this.parent.eventFields.recurrenceRule]?t.push({occurrence:a,parent:this.getParentEvent(a)}):t.push(a)}var o={requestType:"eventRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:i};o.data=t,this.parent.trigger(Yt,o,function(l){if(!l.cancel){for(var h=e.parent.eventFields,c={addedRecords:[],changedRecords:[],deletedRecords:[]},u=$([],l.deletedRecords,null,!0),p=function(y,b){var E=d(l.deletedRecords[parseInt(y.toString(),10)][e.parent.eventFields.recurrenceRule]);if(!E){var w=t[parseInt(y.toString(),10)].parent,A=c.changedRecords.filter(function(L){return L[h.id]===w[h.id]}),D=l.deletedRecords[parseInt(y.toString(),10)][h.startTime];if(A.length>0){var N=A[0];N[h.recurrenceException]=e.excludeDateCheck(D,N[h.recurrenceException])}else w[h.recurrenceException]=e.excludeDateCheck(D,w[h.recurrenceException]);A.length===0&&c.changedRecords.push(e.parent.eventBase.processTimezone(w,!0)),E=l.deletedRecords[parseInt(y.toString(),10)][h.id]!==w[h.id]}if(E){if(l.deletedRecords instanceof Array)for(var x=0,j=l.deletedRecords;x<j.length;x++){var q=j[x];e.parent.eventBase.processTimezone(q,!0)}c.deletedRecords.push(l.deletedRecords[parseInt(y.toString(),10)])}},f=0,v=l.deletedRecords.length;f<v;f++)p(f,v);var m=e.parent.dataModule.dataManager.saveChanges(c,h.id,e.getTable(),e.getQuery());e.parent.eventBase.selectWorkCellByTime(u);var g={requestType:"eventRemoved",cancel:!1,data:l.deletedRecords,promise:m,editParams:c};e.refreshData(g)}})},n.prototype.processSave=function(i){for(var e=this,t=i instanceof Array?i:[i],r=[],s=0,a=t;s<a.length;s++){var o=a[s];o[this.parent.eventFields.recurrenceRule]?r.push({occurrence:o,parent:this.getParentEvent(o)}):r.push(o)}var l={requestType:"eventChange",cancel:!1,addedRecords:[],changedRecords:t,deletedRecords:[]};l.data=r,this.parent.trigger(Yt,l,function(h){if(!h.cancel){for(var c=e.parent.eventFields,u={addedRecords:[],changedRecords:[],deletedRecords:[]},p=0,f=h.changedRecords;p<f.length;p++){var v=f[p];if(!d(v[c.recurrenceRule])&&d(v[c.recurrenceException])){var m=gn(v[c.startTime]),g=e.getParentEvent(v);g[c.recurrenceException]=d(g[c.recurrenceException])?m:g[c.recurrenceException].concat(","+m),v[c.id]=e.parent.getEventMaxID(),v[c.recurrenceException]=m,u.addedRecords.push(e.parent.eventBase.processTimezone(v,!0)),u.changedRecords.push(e.parent.eventBase.processTimezone(g,!0))}else u.changedRecords.push(e.parent.eventBase.processTimezone(v,!0))}var y=e.parent.dataModule.dataManager.saveChanges(u,c.id,e.getTable(),e.getQuery()),b=$({},h.changedRecords[h.changedRecords.length-1],null,!0);e.parent.eventBase.selectWorkCellByTime([e.parent.eventBase.processTimezone(b)]);var E={requestType:"eventChanged",cancel:!1,data:h.changedRecords,promise:y,editParams:u};e.refreshData(E)}})},n.prototype.getParentEvent=function(i,e){e===void 0&&(e=!1);var t=this.parent.eventBase.getParentEvent(i,e)||i;return(t[this.parent.eventFields.startTimezone]||t[this.parent.eventFields.endTimezone])&&this.parent.eventBase.timezoneConvert(t),t},n.prototype.excludeDateCheck=function(i,e){var t=this.parent.timezone||this.parent.tzModule.getLocalTimezoneName();t&&(i=this.parent.tzModule.remove(new Date(+i.getTime()),t));var r=gn(i);return d(e)?e=r:e.indexOf(r)===-1&&(e=d(e)?r:e+","+r),e},n.prototype.processRecurrenceRule=function(i,e){var t=this.parent.eventFields,r=i[t.recurrenceRule],s;if(e instanceof Date)s=new Date(+e);else{s=new Date(+e[t.startTime]);var a=e[t.recurrenceRule];if(a){var o=i[t.startTime],l=this.parent.currentAction==="DeleteFollowingEvents"?e[t.recurrenceException]:null,h=cp(o,a,l,this.parent.activeViewOptions.firstDayOfWeek),c=new Date(h.slice(-1)[0]);c.setHours(s.getHours(),s.getMinutes(),s.getSeconds()),s.setHours(o.getHours(),o.getMinutes(),o.getSeconds()),e[t.recurrenceRule]=this.getUpdatedRecurrenceRule(a,new Date(+c),!1)}}i[t.recurrenceRule]=this.getUpdatedRecurrenceRule(r,Z(new Date(s.getTime()),-1),!0)},n.prototype.getUpdatedRecurrenceRule=function(i,e,t){for(var r=i.split(";"),s="",a=0,o=r;a<o.length;a++){var l=o[a];if(l!==""){var h=l.split("=")[0],c=l.split("=")[1];(h==="COUNT"||h==="UNTIL")&&(c=gn(e),l=l.replace(l,"UNTIL="+c)),s+=l+";"}}return t&&s.indexOf("UNTIL")===-1&&(s+="UNTIL="+gn(e)),s},n.prototype.isBlockEvent=function(i){for(var e=i instanceof Array?i:[i],t=!1,r=0,s=e;r<s.length;r++){var a=s[r];t=a[this.parent.eventFields.isBlock]||!1}return t},n.prototype.destroy=function(){this.crudObj=null,this.parent=null},n}(),RL=function(){function n(i){this.parent=i,C.add(this.parent.element,"mouseover",this.onHover,this)}return n.prototype.cellMouseDown=function(i){this.isPreventAction(i)||this.parent.notify(Lu,{event:i})},n.prototype.cellClick=function(i){var e=this;if(!this.isPreventAction(i)){var t="."+se+",."+Me+",."+bt,r=M(i.target,t);if(!d(r)){if(!d(M(i.target,"."+Jl))){this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add");return}var s=r.classList.contains(se)||r.classList.contains(Me);this.parent.uiStateValues.isTapHold&&!this.parent.uiStateValues.action&&s&&(this.parent.uiStateValues.isTapHold=!1,this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.selectedElements=[]);var a=M(i.target,"."+qn),o=this.parent.getNavigateView(),l=this.parent.currentView===o;if(d(a)||l||d(this.parent.viewOptions[o.charAt(0).toLowerCase()+o.slice(1)])){if(this.parent.activeViewOptions.readonly&&this.parent.currentView!=="MonthAgenda"){this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide();return}if(this.parent.isAdaptive&&(i.target.classList.contains($t)||M(i.target,"."+$t)))return;if(s&&i.shiftKey&&i.which===1&&this.parent.keyboardInteractionModule){this.parent.keyboardInteractionModule.onMouseSelection(i);return}this.parent.activeCellsData=this.parent.getCellDetails(r);var h=$(this.parent.activeCellsData,{cancel:!1,event:i,name:"cellClick"});this.parent.trigger(Ir,h,function(u){if(u.cancel)e.parent.quickPopup&&e.parent.quickPopup.quickPopupHide();else if(s&&e.parent.selectCell(r),e.parent.allowInline){var p={element:u.element,groupIndex:u.groupIndex,type:"Cell"};e.parent.notify(Fn,p)}else e.parent.notify(Ir,u)})}else{var c=this.parent.getDateFromElement(r);!d(c)&&this.parent.isMinMaxDate(c)&&(this.parent.setProperties({selectedDate:c},!0),this.parent.changeView(this.parent.getNavigateView(),i))}}}},n.prototype.cellDblClick=function(i){var e=this,t="."+se+",."+Me+",."+bt,r=M(i.target,t);if(!(this.parent.activeViewOptions.readonly||this.isPreventAction(i)||d(r))){var s=$(this.parent.activeCellsData,{cancel:!1,event:i,name:"cellDoubleClick"});this.parent.trigger(HO,s,function(a){if(a.startTime){var o=new Date(a.startTime.getTime());e.parent.isMinMaxDate(new Date(o.setHours(0,0,0,0)))&&(a.cancel||e.parent.eventWindow.openEditor(e.parent.activeCellsData,"Add"))}})}},n.prototype.onHover=function(i){var e="."+se+",."+Yl+",."+Me+",."+bt+",."+ti+",."+he+",."+gh+",."+Mb,t=M(i.target,e);if(t){var r={element:t,event:i};this.parent.trigger(FO,r)}},n.prototype.isPreventAction=function(i){if(M(i.target,"."+qn))return!1;if(M(i.target,"."+ir)&&!M(i.target,"."+$t))return!0;var e=M(i.target,"."+he+",."+Ln);return!!(!d(e)||(e=M(i.target,"."+bt),this.parent.activeView&&this.parent.activeView.isTimelineView()&&!d(e)))},n.prototype.destroy=function(){C.remove(this.parent.element,"mouseover",this.onHover)},n}(),NL=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),al=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},Ii=function(n){NL(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return al([S()],i.prototype,"name",void 0),al([S()],i.prototype,"default",void 0),al([S()],i.prototype,"title",void 0),al([S({})],i.prototype,"validation",void 0),i}(Kt),LL=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),jt=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},VL=function(n){LL(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return jt([S("Id")],i.prototype,"id",void 0),jt([S("IsBlock")],i.prototype,"isBlock",void 0),jt([st({name:"Subject"},Ii)],i.prototype,"subject",void 0),jt([st({name:"StartTime"},Ii)],i.prototype,"startTime",void 0),jt([st({name:"EndTime"},Ii)],i.prototype,"endTime",void 0),jt([st({name:"StartTimezone"},Ii)],i.prototype,"startTimezone",void 0),jt([st({name:"EndTimezone"},Ii)],i.prototype,"endTimezone",void 0),jt([st({name:"Location"},Ii)],i.prototype,"location",void 0),jt([st({name:"Description"},Ii)],i.prototype,"description",void 0),jt([st({name:"IsAllDay"},Ii)],i.prototype,"isAllDay",void 0),jt([st({name:"RecurrenceID"},Ii)],i.prototype,"recurrenceID",void 0),jt([st({name:"RecurrenceRule"},Ii)],i.prototype,"recurrenceRule",void 0),jt([st({name:"RecurrenceException"},Ii)],i.prototype,"recurrenceException",void 0),jt([S("IsReadonly")],i.prototype,"isReadonly",void 0),jt([S("FollowingID")],i.prototype,"followingID",void 0),i}(Kt),PL=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),wt=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},HL=function(n){PL(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return wt([S()],i.prototype,"template",void 0),wt([S([])],i.prototype,"dataSource",void 0),wt([S()],i.prototype,"query",void 0),wt([st({},VL)],i.prototype,"fields",void 0),wt([S(!1)],i.prototype,"enableTooltip",void 0),wt([S("AllDayRow")],i.prototype,"spannedEventPlacement",void 0),wt([S(1)],i.prototype,"minimumEventDuration",void 0),wt([S()],i.prototype,"tooltipTemplate",void 0),wt([S()],i.prototype,"resourceColorField",void 0),wt([S(!1)],i.prototype,"editFollowingEvents",void 0),wt([S(!0)],i.prototype,"allowAdding",void 0),wt([S(!0)],i.prototype,"allowEditing",void 0),wt([S(!0)],i.prototype,"allowDeleting",void 0),wt([S(!1)],i.prototype,"enableMaxHeight",void 0),wt([S(!1)],i.prototype,"enableIndicator",void 0),wt([S(!1)],i.prototype,"ignoreWhitespace",void 0),wt([S()],i.prototype,"sortComparer",void 0),wt([S()],i.prototype,"includeFiltersInQuery",void 0),i}(Kt),BL=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ds=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},FL=function(n){BL(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return Ds([S(!1)],i.prototype,"byDate",void 0),Ds([S(!0)],i.prototype,"byGroupID",void 0),Ds([S(!1)],i.prototype,"allowGroupEdit",void 0),Ds([S([])],i.prototype,"resources",void 0),Ds([S(!0)],i.prototype,"enableCompactView",void 0),Ds([S()],i.prototype,"headerTooltipTemplate",void 0),Ds([S(!1)],i.prototype,"hideNonWorkingDays",void 0),i}(Kt),WL=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ut=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},_L=function(n){WL(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return Ut([S()],i.prototype,"field",void 0),Ut([S()],i.prototype,"title",void 0),Ut([S()],i.prototype,"name",void 0),Ut([S(!1)],i.prototype,"allowMultiple",void 0),Ut([S([])],i.prototype,"dataSource",void 0),Ut([S()],i.prototype,"query",void 0),Ut([S("Id")],i.prototype,"idField",void 0),Ut([S("Text")],i.prototype,"textField",void 0),Ut([S("Expanded")],i.prototype,"expandedField",void 0),Ut([S("GroupID")],i.prototype,"groupIDField",void 0),Ut([S("Color")],i.prototype,"colorField",void 0),Ut([S("StartHour")],i.prototype,"startHourField",void 0),Ut([S("EndHour")],i.prototype,"endHourField",void 0),Ut([S("WorkDays")],i.prototype,"workDaysField",void 0),Ut([S("CssClass")],i.prototype,"cssClassField",void 0),i}(Kt),qL=function(){function n(i){this.resourceCollection=[],this.leftPixel=25,this.resourceDateTree=[],this.parent=i}return n.prototype.renderResourceHeaderIndent=function(i){var e=R("td",{className:fR}),t=R("div",{className:vl});if(this.parent.activeViewOptions.headerIndentTemplate){var r={className:[e.className],type:"emptyCells"};this.parent.renderHeaderIndentTemplate(r,e)}else e.appendChild(t);var s={elementType:"emptyCells",element:e};this.parent.trigger(di,s),i.appendChild(e)},n.prototype.hideResourceRows=function(i){if(!(this.resourceCollection.length<=1||this.parent.virtualScrollModule))for(var e=this.lastResourceLevel.length,t=0;t<e;t++){var r=this.lastResourceLevel[parseInt(t.toString(),10)].resourceData,s=this.lastResourceLevel[parseInt(t.toString(),10)].resource;if(r.ClassName===gr&&!r[s.expandedField]&&!d(r[s.expandedField])){var a=[].slice.call(i.children),o=a.slice(t+1,t+(parseInt(r.Count,10)+1));T(o,Rt)}}},n.prototype.createResourceColumn=function(){var i=this.resourceCollection,e=R("div",{className:Pi}),t=this.parent.activeView.createTableLayout(Ga);!this.parent.uiStateValues.isGroupAdaptive&&this.parent.rowAutoHeight&&this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&T([t],Pb);var r=t.querySelector("tbody"),s=this.generateTreeData(!0);if(this.countCalculation(i.slice(0,-2),i.slice(0,-1)),this.renderedResources=this.lastResourceLevel,this.parent.virtualScrollModule){var a=this.parent.virtualScrollModule.getRenderedCount();this.setExpandedResources(),s=this.expandedResources.slice(0,a),this.renderedResources=s}return oe(this.getContentRows(s),r),this.hideResourceRows(r),t.appendChild(r),e.appendChild(t),e},n.prototype.setRenderedResources=function(){var i=this.resourceCollection;this.generateTreeData(!0),this.countCalculation(i.slice(0,-2),i.slice(0,-1)),this.renderedResources=this.lastResourceLevel},n.prototype.setExpandedResources=function(){for(var i=[],e=0;e<this.lastResourceLevel.length;e++){var t=this.lastResourceLevel[parseInt(e.toString(),10)].resourceData,r=t.Count;i.push(this.lastResourceLevel[parseInt(e.toString(),10)]);var s=t[this.lastResourceLevel[parseInt(e.toString(),10)].resource.expandedField];!d(s)&&!s&&r>0&&(e=e+r)}this.expandedResources=i},n.prototype.getContentRows=function(i,e){for(var t=[],r,s,a=this.resourceCollection,o=R("tr"),l=R("td",{attrs:{tabindex:e?"-1":"0"}}),h=this.parent.activeView.getGroupIndices(),c=0;c<i.length;c++)if(!(h.length>0&&h.indexOf(i[parseInt(c.toString(),10)].groupIndex)>-1)){var u=l.cloneNode();if(s=io(a,"name",i[parseInt(c.toString(),10)].resource.name),s===a.length-1?($(i[parseInt(c.toString(),10)].resourceData,{ClassName:Dm}),this.renderedResources[parseInt(c.toString(),10)].className=[Dm]):($(i[parseInt(c.toString(),10)].resourceData,{ClassName:gr}),this.renderedResources[parseInt(c.toString(),10)].className=[gr]),r=s*this.leftPixel+"px",i[parseInt(c.toString(),10)].resourceData.ClassName===gr&&!d(i[parseInt(c.toString(),10)].resourceData.Count)&&i[parseInt(c.toString(),10)].resourceData.Count>0){var p=void 0;i[parseInt(c.toString(),10)].resourceData[a[parseInt(s.toString(),10)].expandedField]||d(i[parseInt(c.toString(),10)].resourceData[a[parseInt(s.toString(),10)].expandedField])?p=$i:p=ks;var f=R("div");T([f],[wn,p]),this.setMargin(f,r),u.appendChild(f),this.resourceCollection.length>1&&C.add(f,"click",this.onTreeIconClick,this)}this.parent.activeView.setResourceHeaderContent(u,i[parseInt(c.toString(),10)],vl),u.setAttribute("data-group-index",i[parseInt(c.toString(),10)].groupIndex.toString()),u.setAttribute("aria-label",i[parseInt(c.toString(),10)].resourceData[i[parseInt(c.toString(),10)].resource.textField]+" resource"),this.parent.activeViewOptions.resourceHeaderTemplate||this.setMargin(u.querySelector("."+vl),r);var v=[ti,i[parseInt(c.toString(),10)].resourceData.ClassName];T([u],v);var m={elementType:"resourceHeader",element:u,groupIndex:i[parseInt(c.toString(),10)].groupIndex};this.parent.trigger(di,m);var g=o.cloneNode();g.appendChild(u),t.push(g)}return t},n.prototype.setMargin=function(i,e){this.parent.enableRtl?i.style.marginRight=e:i.style.marginLeft=e},n.prototype.countCalculation=function(i,e){for(var t,r=0;r<i.length;r++){for(var s=i[i.length-(r+1)].dataSource,a=0;a<s.length;a++){var o=0;if(this.parent.activeViewOptions.group.byGroupID){var l=new Se().where(e[e.length-1].groupIDField,"equal",s[parseInt(a.toString(),10)][i[i.length-(r+1)].idField]);t=new K(e[e.length-1].dataSource).executeLocal(l)}else t=e[e.length-1].dataSource;for(var h=0;h<t.length;h++)o=o+parseInt(t[parseInt(h.toString(),10)].Count,10);o=o+parseInt(s[parseInt(a.toString(),10)].Count,10),$(s[parseInt(a.toString(),10)],{Count:o})}e=e.slice(0,-1)}},n.prototype.onTreeIconClick=function(i){var e=this;this.parent.eventTooltip&&this.parent.eventTooltip.close();var t=i.target,r,s=M(t,"."+gr).parentElement,a=parseInt(s.children[0].getAttribute("data-group-index"),10),o={cancel:!1,event:i,groupIndex:a,requestType:t.classList.contains($i)?"resourceCollapse":"resourceExpand"};this.parent.trigger(Yt,o,function(l){if(!l.cancel){t.classList.contains($i)?(ii(t,[ks],[$i]),r=!0):(ii(t,[$i],[ks]),r=!1);for(var h=[].slice.call(e.parent.element.querySelectorAll("."+he+",."+$t)),c=0,u=h;c<u.length;c++){var p=u[c];ve(p)}e.parent.virtualScrollModule?e.updateVirtualContent(a,r,i,t):e.updateContent(a,r);var f={cssProperties:e.parent.getCssProperties(),module:"scroll"};e.parent.notify(Wi,f),o={cancel:!1,event:i,groupIndex:a,requestType:t.classList.contains($i)?"resourceExpanded":"resourceCollapsed"},e.parent.refreshEvents(!1),e.parent.trigger(Mr,o)}})},n.prototype.updateContent=function(i,e){for(var t=[],r=[],s=[],a,o=this.lastResourceLevel[parseInt(i.toString(),10)].resourceData,l=[].slice.call(this.parent.element.querySelectorAll("."+Pi+" tr")),h=[].slice.call(this.parent.element.querySelectorAll("."+Te+" tbody tr")),c=[].slice.call(this.parent.element.querySelectorAll("."+Te+" ."+yh)),u=0;u<o.Count;u++)t.push(l[i+u+1]),r.push(h[i+u+1]),s.push(c[i+u+1]);for(var p=this.lastResourceLevel,f=0;f<t.length;f++){var v=!0;if(a=t[parseInt(f.toString(),10)].children[0].classList.contains(gr),p[parseInt(i.toString(),10)].resourceData[p[parseInt(i.toString(),10)].resource.expandedField]=!e,e){if(a){var m=t[parseInt(f.toString(),10)].querySelector("."+wn);m&&ii(m,[ks],[$i])}t[parseInt(f.toString(),10)].classList.contains(Rt)||T([t[parseInt(f.toString(),10)],r[parseInt(f.toString(),10)],s[parseInt(f.toString(),10)]],Rt)}else{if(a){var g=t[parseInt(f.toString(),10)].rowIndex;if(!p[parseInt(g.toString(),10)].resourceData[p[parseInt(g.toString(),10)].resource.expandedField]&&!d(p[parseInt(g.toString(),10)].resourceData[p[parseInt(g.toString(),10)].resource.expandedField])&&(t.splice(f+1,parseInt(p[parseInt(g.toString(),10)].resourceData.Count,10)),r.splice(f+1,parseInt(p[parseInt(g.toString(),10)].resourceData.Count,10)),s.splice(f+1,parseInt(p[parseInt(g.toString(),10)].resourceData.Count,10)),v=!1),v){var m=t[parseInt(f.toString(),10)].querySelector("."+wn);m&&ii(m,[$i],[ks])}}t[parseInt(f.toString(),10)].classList.contains(Rt)&&I([t[parseInt(f.toString(),10)],r[parseInt(f.toString(),10)],s[parseInt(f.toString(),10)]],Rt)}}},n.prototype.updateVirtualContent=function(i,e,t,r){this.lastResourceLevel[parseInt(i.toString(),10)].resourceData[this.lastResourceLevel[parseInt(i.toString(),10)].resource.expandedField]=!e,this.setExpandedResources();var s=this.parent.virtualScrollModule.getRenderedCount(),a=this.expandedResources.indexOf(this.renderedResources[0]);if(this.parent.virtualScrollModule.existingDataCollection=this.renderedResources,this.renderedResources=this.expandedResources.slice(a,a+s),this.renderedResources.length<s){var o=this.expandedResources.length-s;o=o>0?o:0,this.renderedResources=this.expandedResources.slice(o,this.expandedResources.length)}var l=this.parent.element.querySelector("."+so);this.parent.virtualScrollModule.updateVirtualTrackHeight(l);var h=this.parent.element.querySelector("."+Pi+" table"),c=this.parent.element.querySelector("."+Te+" table"),u=this.parent.element.querySelector("."+Nn);this.parent.virtualScrollModule.updateContent(h,c,u,this.renderedResources);var p=this.parent.element.querySelector("."+Gl);d(p)||(p.style.height=this.parent.element.querySelector("."+$e).offsetHeight+"px")},n.prototype.renderResourceHeader=function(){var i=R("div",{className:ro});if(i.innerHTML='<div class="'+xb+'"><div class="'+tg+'"><div class="e-icons '+ig+'"></div></div><div class="'+rg+'"></div></div>',this.parent.currentView==="MonthAgenda"){var e=this.parent.activeView.getPanel().querySelector("."+Te);e.insertBefore(i,e.querySelector("."+Hc))}else this.parent.element.insertBefore(i,this.parent.element.querySelector("."+Ei));this.renderResourceHeaderText(),C.add(i.querySelector("."+ig),"click",this.menuClick,this)},n.prototype.renderResourceTree=function(){this.popupOverlay=R("div",{className:sg});var i=R("div",{className:wa+" e-popup-close"});if(this.parent.currentView==="MonthAgenda"){var e=this.parent.activeView.getPanel().querySelector("."+Hc);e.insertBefore(i,e.children[0]),e.appendChild(this.popupOverlay)}else this.parent.element.querySelector("."+Ei).appendChild(i),this.parent.element.querySelector("."+Ei).appendChild(this.popupOverlay);var t=R("div",{className:KR});i.appendChild(t),this.treeViewObj=new SE({cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,fields:{dataSource:[].slice.call(this.generateTreeData()),id:"resourceId",text:"resourceName",child:"resourceChild"},nodeTemplate:this.parent.resourceHeaderTemplate,nodeClicked:this.resourceClick.bind(this),created:this.resourceTreeCreated.bind(this)}),this.treeViewObj.root=this.parent.root?this.parent.root:this.parent,this.treeViewObj.appendTo(t),this.treeViewObj.expandAll(),this.treePopup=new xr(i,{targetType:"relative",actionOnScroll:"none",content:this.treeViewObj.element,relateTo:this.parent.element.querySelector("."+Ei),enableRtl:this.parent.enableRtl,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.parent.element.querySelector("."+(this.parent.currentView==="MonthAgenda"?Hc:Ei))}),this.parent.on(Or,this.documentClick,this)},n.prototype.resourceTreeCreated=function(){this.parent.activeViewOptions.resourceHeaderTemplate&&this.parent.portals&&this.treeViewObj.portals&&(this.parent.portals=this.parent.portals.concat(this.treeViewObj.portals),this.parent.renderTemplates())},n.prototype.generateTreeData=function(i){for(var e=this,t=[],r=[],s=0,a=function(c,u){var p=function(f,v,m){var g=e.resourceCollection[parseInt(v.toString(),10)],y,b;i?(b={type:"resourceHeader",resource:f.resource,resourceData:f.resourceData,groupIndex:s,groupOrder:f.groupOrder,date:e.parent.selectedDate},r.push(b),s++):y={resourceId:m,resourceName:f.resourceData[g.textField],resource:f.resource,resourceData:f.resourceData,date:e.parent.selectedDate},f.child.length>0&&!i&&(y.resourceChild=[]);for(var E=1,w=0,A=f.child;w<A.length;w++){var D=A[w];i?p(D,v+1,m+"-"+E):y.resourceChild.push(p(D,v+1,m+"-"+E)),E+=1}return i&&$(b.resourceData,{Count:E-1}),y};i?p(o.resourceTreeLevel[parseInt(c.toString(),10)],0,(c+1).toString()):t.push(p(o.resourceTreeLevel[parseInt(c.toString(),10)],0,(c+1).toString()))},o=this,l=0,h=this.resourceTreeLevel.length;l<h;l++)a(l);return i?(this.lastResourceLevel=r,r):t},n.prototype.renderResourceHeaderText=function(){for(var i=this.lastResourceLevel[this.parent.uiStateValues.groupIndex],e=[],t=function(p,f){var v=r.resourceCollection[parseInt(p.toString(),10)],m=v.dataSource.filter(function(b){return b[v.idField]===i.groupOrder[parseInt(p.toString(),10)]}),g=R("div",{className:kb});r.parent.sanitize(m[0][v.textField],g),e.push(g);var y=R("div",{className:"e-icons e-icon-next"});e.push(y)},r=this,s=0,a=i.groupOrder.length;s<a;s++)t(s);e.pop();var o=this.parent.currentView==="MonthAgenda"?this.parent.activeView.getPanel():this.parent.element,l=o.querySelector("."+rg);rr(l);for(var h=0,c=e;h<c.length;h++){var u=c[h];l.appendChild(u)}this.lastResourceLevel.length===1&&T([this.parent.element.querySelector("."+tg)],Oe)},n.prototype.menuClick=function(i){if(this.parent.element.querySelector("."+wa).classList.contains(Je))this.treePopup.hide(),I([this.popupOverlay],is);else{var e=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)"));I(e,"e-active"),T([e[this.parent.uiStateValues.groupIndex]],"e-active"),this.treePopup.show(),T([this.popupOverlay],is)}},n.prototype.selectResourceByIndex=function(i){this.lastResourceLevel&&i>-1&&i<this.lastResourceLevel.length&&this.triggerEvents(i)},n.prototype.resourceClick=function(i){if(!i.node.classList.contains("e-has-child")){this.treePopup.hide(),I([this.popupOverlay],is);var e=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)")),t=e.indexOf(i.node);this.triggerEvents(t,i),i.event.preventDefault()}},n.prototype.triggerEvents=function(i,e){var t=this,r={cancel:!1,event:e?e.event:null,groupIndex:i,requestType:"resourceChange"};this.parent.trigger(Yt,r,function(s){s.cancel||(t.parent.uiStateValues.groupIndex=s.groupIndex,t.parent.renderModule.render(t.parent.currentView),r={cancel:!1,event:e?e.event:null,groupIndex:t.parent.uiStateValues.groupIndex,requestType:"resourceChanged"},t.parent.adaptiveGroupIndex=t.parent.uiStateValues.groupIndex,t.parent.trigger(Mr,r))})},n.prototype.documentClick=function(i){if(!M(i.event.target,"."+wa)){var e=this.parent.element.querySelector("."+wa);e&&e.classList.contains(Je)&&(this.treePopup.hide(),I([this.popupOverlay],is))}},n.prototype.bindResourcesData=function(i){var e=this;this.parent.showSpinner();for(var t=[],r=0,s=this.parent.resources;r<s.length;r++){var a=s[r],o=new Bb(this.parent,a.dataSource,a.query);t.push(o.getData(o.generateQuery()))}Promise.all(t).then(function(l){return e.dataManagerSuccess(l,i)}).catch(function(l){return e.parent.crudModule.dataManagerFailure(l)})},n.prototype.dataManagerSuccess=function(i,e){if(!(!this.parent||this.parent&&this.parent.isDestroyed)){this.parent.resourceCollection=[];for(var t=0,r=i.length;t<r;t++){var s=this.parent.resources[parseInt(t.toString(),10)],a=this.getResourceModel(s,i[parseInt(t.toString(),10)].result);this.parent.resourceCollection.push(a)}this.refreshLayout(e)}},n.prototype.getResourceModel=function(i,e){var t={field:i.field,title:i.title,name:i.name,allowMultiple:i.allowMultiple,dataSource:e||i.dataSource,idField:i.idField,textField:i.textField,groupIDField:i.groupIDField,colorField:i.colorField,startHourField:i.startHourField,endHourField:i.endHourField,workDaysField:i.workDaysField,expandedField:i.expandedField,cssClassField:i.cssClassField};return t},n.prototype.refreshLayout=function(i){(d(this.parent.uiStateValues.groupIndex)||!this.parent.enablePersistence)&&(this.parent.uiStateValues.groupIndex=0),this.parent.renderElements(i)},n.prototype.setResourceCollection=function(){var i=[];if(this.resourceCollection=[],this.colorIndex=null,this.parent.activeViewOptions.group.resources.length>0)for(var e=0,t=this.parent.activeViewOptions.group.resources;e<t.length;e++){var r=t[e],s=io(this.parent.resourceCollection,"name",r);s>=0&&i.push(this.parent.resourceCollection[parseInt(s.toString(),10)])}else this.parent.resourceCollection.length>0&&(i=this.parent.resourceCollection);for(var a=0,o=0,l=i;o<l.length;o++){var r=l[o],h=this.getResourceModel(r);r.name===this.parent.eventSettings.resourceColorField&&(this.colorIndex=a),a++,this.resourceCollection.push(h)}d(this.colorIndex)&&(this.colorIndex=this.resourceCollection.length-1)},n.prototype.generateResourceLevels=function(i,e){var t=this,r=this.resourceCollection,s=[],a=[],o=function(l,h,c,u,p){var f=[],v=l[0];if(v){var m=void 0;if(u&&t.parent.activeViewOptions.group.byGroupID){var g=u[c.idField];m=v.dataSource.filter(function(P){return P[v.groupIDField]===g})}else m=v.dataSource;for(var y=0;y<m.length;y++){var b=[];p&&p.length>0&&(b=b.concat(p)),b.push(m[parseInt(y.toString(),10)][v.idField]);var E=o(l.slice(1),h+1,v,m[parseInt(y.toString(),10)],b);if(!(h===0&&E.length===0&&t.resourceCollection.length>1)){var w=[],A=t.parent.activeView.renderDates,D=void 0;if(!t.parent.activeViewOptions.group.byDate&&h+1===t.resourceCollection.length){var N=m[parseInt(y.toString(),10)][v.workDaysField],x=m[parseInt(y.toString(),10)][v.startHourField],j=m[parseInt(y.toString(),10)][v.endHourField];N&&N.length>0?(A=t.parent.activeView.getRenderDates(N),D=N,w=t.parent.activeView.getDateSlots(A,N)):(D=t.parent.activeViewOptions.workDays,w=i);var q=t.generateCustomHours(w,x,j,b);a=a.concat(q)}var L=m[parseInt(y.toString(),10)][v.cssClassField],O={type:"resourceHeader",className:["e-resource-cells"],resourceLevelIndex:h,groupOrder:b,resource:v,resourceData:m[parseInt(y.toString(),10)],colSpan:t.parent.activeViewOptions.group.byDate?1:w.length,renderDates:A,workDays:D,cssClass:L,child:E};f.push(O)}}return s[parseInt(h.toString(),10)]||(s[parseInt(h.toString(),10)]=[]),f.length>0&&s[parseInt(h.toString(),10)].push(f),f}return[]};return this.resourceTreeLevel=o(r,0),e?[]:this.generateHeaderLevels(s,a,i)},n.prototype.generateCustomHours=function(i,e,t,r){for(var s=$([],i,null,!0),a=0,o=s;a<o.length;a++){var l=o[a];e&&(l.startHour=this.parent.getStartEndTime(e)),t&&(l.endHour=this.parent.getStartEndTime(t)),r&&(l.groupOrder=r)}return s},n.prototype.generateHeaderLevels=function(i,e,t){for(var r=[],s=i.length-1;s>=0;s--)for(var a=0,o=0,l=i[parseInt(s.toString(),10)];o<l.length;o++)for(var h=l[o],c=0,u=h;c<u.length;c++){var p=u[c];if(i[s+1]&&i[s+1].length>0){var f=i[parseInt((s+1).toString(),10)][parseInt(a.toString(),10)];if(!f)continue;for(var v=0,m=0,g=f;m<g.length;m++){var y=g[m];(!this.parent.activeViewOptions.group.byGroupID||this.parent.activeViewOptions.group.byGroupID&&y.resourceData[y.resource.groupIDField]===p.resourceData[p.resource.idField])&&(v+=y.colSpan)}p.colSpan=v}p.groupIndex=a,a++,r[p.resourceLevelIndex]=r[p.resourceLevelIndex]||[],r[p.resourceLevelIndex].push(p)}if(this.lastResourceLevel=r.slice(-1)[0]||[],!this.parent.activeViewOptions.group.byDate){for(var b=0;b<r.length;b++)for(var E=0,w=r[parseInt(b.toString(),10)];E<w.length;E++){var A=w[E];A.date=this.parent.selectedDate}for(var D=0,N=0,x=this.lastResourceLevel;N<x.length;N++)for(var j=x[N],s=0;s<j.colSpan;s++)e[parseInt(D.toString(),10)].groupIndex=j.groupIndex,D++;return r.push(e),r}var q=[],L=$([],r,null,!0),O=[];if(this.parent.activeViewOptions.group.hideNonWorkingDays){for(var P=[],F=0,ie=function(Qt){U.resourceDateTree[parseInt(F.toString(),10)]=[];for(var qt=[],tn=function(ke){var cs=U.lastResourceLevel[parseInt(ke.toString(),10)].resourceData[U.lastResourceLevel[parseInt(ke.toString(),10)].resource.workDaysField];if(cs||(cs=U.parent.activeViewOptions.workDays),cs.indexOf(Qt.date.getDay())!==-1){var kt=$({},U.lastResourceLevel[parseInt(ke.toString(),10)],null,!0);kt.date=Qt.date,U.lastResourceLevel[parseInt(ke.toString(),10)].workDays=cs,kt.startHour=U.parent.getStartEndTime(kt.resourceData[kt.resource.startHourField])||Qt.startHour,kt.endHour=U.parent.getStartEndTime(kt.resourceData[kt.resource.endHourField])||Qt.endHour,U.resourceDateTree[parseInt(F.toString(),10)].push(kt);for(var Tp=function(lr){if(qt[parseInt(lr.toString(),10)]||(qt[parseInt(lr.toString(),10)]=[]),lr===kt.groupOrder.length-1){P[parseInt(ke.toString(),10)]||(P[parseInt(ke.toString(),10)]=[]);var nS=kt.renderDates.filter(function(us){return us.getDay()===Qt.date.getDay()});return P[parseInt(ke.toString(),10)]=P[parseInt(ke.toString(),10)].concat(nS),qt[parseInt(lr.toString(),10)].push(kt),"continue"}var aS=L[parseInt(lr.toString(),10)],Dh=aS.filter(function(us){return us.resourceData[us.resource.idField]===kt.groupOrder[parseInt(lr.toString(),10)]});if(Dh&&Dh.length>0){var Ah=qt[parseInt(lr.toString(),10)].filter(function(us){return us.resourceData[us.resource.idField]===kt.groupOrder[parseInt(lr.toString(),10)]});if(Ah&&Ah.length>0)Ah[0].colSpan+=1;else{var Dp=$({},Dh[0],null,!0);Dp.colSpan=1,qt[parseInt(lr.toString(),10)].push(Dp)}}},Th=0;Th<kt.groupOrder.length;Th++)Tp(Th)}},Lr=0;Lr<U.lastResourceLevel.length;Lr++)tn(Lr);if(qt.length>0){for(var qi=0;qi<L.length;qi++)q[parseInt(qi.toString(),10)]||(q[parseInt(qi.toString(),10)]=[]),q[parseInt(qi.toString(),10)]=q[parseInt(qi.toString(),10)].concat(qt[parseInt(qi.toString(),10)]);Qt.colSpan=qt[qt.length-1].length,O.push(Qt)}F++},U=this,ne=0,Ae=t;ne<Ae.length;ne++){var ge=Ae[ne];ie(ge)}return this.resourceDateTree=this.resourceDateTree.filter(function(Qt){return Qt.length>0}),this.lastResourceLevel.forEach(function(Qt,qt){P[parseInt(qt.toString(),10)]&&(Qt.renderDates=P[parseInt(qt.toString(),10)].sort(function(tn,Lr){return tn.getTime()-Lr.getTime()}))}),q.unshift(O),q}for(var Ve=0,rt=0,pt=L[0];rt<pt.length;rt++){var ft=pt[rt];Ve+=ft.colSpan}for(var vt=0,Wt=t;vt<Wt.length;vt++){var ge=Wt[vt];ge.colSpan=Ve,O.push(ge);for(var ni=$([],L,null,!0),_t=0,fo=ni.length;_t<fo;_t++){for(var Js=0,Yn=ni[parseInt(_t.toString(),10)];Js<Yn.length;Js++){var ai=Yn[Js];ai.date=ge.date}if(_t===ni.length-1)for(var en=0,Gn=ni[parseInt(_t.toString(),10)];en<Gn.length;en++){var ai=Gn[en];ai.date=ge.date,ai.workDays=ge.workDays,ai.startHour=this.parent.getStartEndTime(ai.resourceData[ai.resource.startHourField])||ge.startHour,ai.endHour=this.parent.getStartEndTime(ai.resourceData[ai.resource.endHourField])||ge.endHour}q[parseInt(_t.toString(),10)]||(q[parseInt(_t.toString(),10)]=[]),q[parseInt(_t.toString(),10)]=q[parseInt(_t.toString(),10)].concat(ni[parseInt(_t.toString(),10)])}}return q.unshift(O),q},n.prototype.setResourceValues=function(i,e){var t=this,r=function(l,h,c){t.resourceCollection[parseInt(l.toString(),10)].allowMultiple&&t.parent.activeViewOptions.group.allowGroupEdit?i[""+h]=[c]:i[""+h]=c};if(e===void 0&&(e=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:this.parent.activeCellsData.groupIndex),this.parent.activeViewOptions.group.resources.length>0&&!d(e))for(var s=this.lastResourceLevel[parseInt(e.toString(),10)].groupOrder,a=0;a<this.resourceCollection.length;a++)r(a,this.resourceCollection[parseInt(a.toString(),10)].field,s[parseInt(a.toString(),10)]);else if(this.parent.resourceCollection.length>0)for(var a=0;a<this.resourceCollection.length;a++){var o=this.resourceCollection[parseInt(a.toString(),10)].dataSource[0];o&&r(a,this.resourceCollection[parseInt(a.toString(),10)].field,o[this.resourceCollection[parseInt(a.toString(),10)].idField])}},n.prototype.getResourceColor=function(i,e){var t=!d(e)&&this.colorIndex>e.length-1?e.length-1:this.colorIndex,r=this.resourceCollection[parseInt(t.toString(),10)];if(!(d(e)&&this.parent.activeViewOptions.group.allowGroupEdit&&r.allowMultiple)){var s=this.parent.isResourceCollectionEmpty();if(!s){var a=d(e)?i[r.field]:e[parseInt(t.toString(),10)],o=this.filterData(r.dataSource,r.idField,a);if(o.length>0)return o[0][r.colorField]}}},n.prototype.getCssClass=function(i){var e=this.resourceCollection.slice(-1)[0];if(!(this.parent.activeViewOptions.group.allowGroupEdit&&e.allowMultiple)){var t=this.filterData(e.dataSource,e.idField,i[e.field]);if(t.length>0)return t[0][e.cssClassField]}},n.prototype.getResourceRenderDates=function(){var i=[].concat.apply([],this.lastResourceLevel.map(function(s){return s.renderDates})),e=i.map(function(s){return s.getTime()}),t=function(s){return s.filter(function(a,o){return e.indexOf(a.getTime())===o})},r=t(i);return r.sort(function(s,a){return s.getTime()-a.getTime()}),r},n.prototype.filterData=function(i,e,t){return i.filter(function(r){return r[""+e]===t})},n.prototype.getResourceData=function(i,e,t){if(this.parent.activeViewOptions.group.allowGroupEdit){for(var r={},s=0,a=t;s<a.length;s++)for(var o=a[s],l=this.lastResourceLevel[parseInt(o.toString(),10)].groupOrder,h=0,c=l.length;h<c;h++){var u=this.resourceCollection[parseInt(h.toString(),10)].field;d(r[""+u])&&(r[""+u]=[]),r[""+u].push(l[parseInt(h.toString(),10)])}i=$(i,r)}else for(var h=0,p=this.resourceCollection.length;h<p;h++)this.lastResourceLevel[parseInt(e.toString(),10)]&&(i[this.resourceCollection[parseInt(h.toString(),10)].field]=this.lastResourceLevel[parseInt(e.toString(),10)].groupOrder[parseInt(h.toString(),10)])},n.prototype.addResource=function(i,e,t){for(var r=i instanceof Array?i:[i],s=function(c){if(c.name===e)return r.forEach(function(u,p){return new K({json:c.dataSource}).insert(u,null,null,t+p)}),"break"},a=0,o=this.parent.resourceCollection;a<o.length;a++){var l=o[a],h=s(l);if(h==="break")break}this.refreshLayout(!0)},n.prototype.removeResource=function(i,e){for(var t=i instanceof Array?i:[i],r=function(h){if(h.name===e)return t.forEach(function(c){return new K({json:h.dataSource}).remove(h.idField,c)}),"break"},s=0,a=this.parent.resourceCollection;s<a.length;s++){var o=a[s],l=r(o);if(l==="break")break}this.refreshLayout(!0)},n.prototype.getIndexFromResourceId=function(i,e,t,r,s){if(e=e||this.parent.resourceCollection.slice(-1)[0].name,d(t)&&(t=this.resourceCollection.filter(function(o){return o.name===e})[0],d(t)))return null;var a=t.dataSource.filter(function(o){return r&&o[t.idField]===i?o[t.groupIDField]===r[""+s]?o[t.idField]===i:null:o[t.idField]===i})[0];return this.lastResourceLevel.map(function(o){return o.resourceData}).indexOf(a)},n.prototype.resourceExpand=function(i,e,t){var r=this.parent.resourceCollection.filter(function(l){return l.name===e?l:null})[0],s=0,a=r.dataSource.filter(function(l){return l[r.idField]===i})[0];this.parent.activeViewOptions.group.byGroupID?s=this.lastResourceLevel.map(function(l){return l.resourceData}).indexOf(a):s=this.getIndexFromResourceId(i,e,r);var o=this.parent.element.querySelector("."+Pi+" "+('[data-group-index="'+s+'"]')+" ."+wn);o&&(o.classList.contains(ks)&&!t||o.classList.contains($i)&&t)&&o.click()},n.prototype.resourceScroll=function(i,e){if(!(this.parent.isAdaptive||["Agenda","MonthAgenda"].indexOf(this.parent.currentView)>-1)){var t=e||this.parent.resourceCollection.slice(-1)[0].name,r=this.parent.resourceCollection.length-1,s=this.parent.resourceCollection.filter(function(v,m){return v.name===t?(r=m,v):null})[0],a=this.parent.element.querySelector("."+Te),o=0;if(this.parent.activeView.isTimelineView()){if(!this.parent.activeViewOptions.group.byGroupID)o=this.getIndexFromResourceId(i,t,s);else{var l=s.dataSource.filter(function(v){return v[s.idField]===i})[0];o=this.lastResourceLevel.map(function(v){return v.resourceData}).indexOf(l)}if(this.parent.virtualScrollModule){var h=this.parent.element.querySelector("."+so),c=Math.round(h.offsetHeight/this.expandedResources.length);if(this.parent.rowAutoHeight&&(a.scrollTop=0,this.parent.virtualScrollModule.virtualScrolling()),a.scrollTop=o*c-(this.parent.virtualScrollModule.bufferCount-1)*c,this.parent.virtualScrollModule.virtualScrolling(),this.parent.rowAutoHeight){var u=this.parent.element.querySelector("."+se+'[data-group-index="'+o+'"]');u&&!u.parentElement.classList.contains(Rt)&&(a.scrollTop=a.scrollTop<u.offsetTop?u.offsetTop:a.scrollTop+u.offsetTop)}else a.scrollTop=o*c}else{var u=this.parent.element.querySelector("."+se+'[data-group-index="'+o+'"]');u&&!u.parentElement.classList.contains(Rt)&&(a.scrollTop=u.offsetTop)}}else{this.parent.activeViewOptions.group.byGroupID?t===this.parent.resourceCollection.slice(-1)[0].name?o=this.lastResourceLevel.map(function(v){return v.resourceData[s.idField]}).indexOf(i):o=s.dataSource.map(function(v){return v[s.idField]}).indexOf(i):o=this.getIndexFromResourceId(i,t,s);var p=this.parent.currentView==="Month"?this.parent.element.querySelector("."+Hi+" tbody tr:nth-child("+(r+1)+")"):this.parent.element.querySelector("."+hp+":nth-child("+(r+1)+")"),f=[].slice.call(p.children).map(function(v){return v.offsetLeft});a.scrollLeft=f[parseInt(o.toString(),10)]}}},n.prototype.destroy=function(){if(this.parent.off(Or,this.documentClick),this.treeViewObj){if(this.treeViewObj.portals&&this.treeViewObj.portals.length>0){var i=this.treeViewObj.portals.map(function(t){return t.propName});i.length>0&&this.parent.resetTemplates(i)}this.treeViewObj.destroy(),this.treeViewObj=null}this.treePopup&&(this.treePopup.destroy(),this.treePopup=null,ve(this.parent.element.querySelector("."+wa)),ve(this.parent.element.querySelector("."+sg)));var e=this.parent.element.querySelector("."+ro);e&&ve(e)},n}(),zL=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),mt=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},jL=function(n){zL(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return mt([S("")],i.prototype,"id",void 0),mt([S("")],i.prototype,"text",void 0),mt([S("auto")],i.prototype,"width",void 0),mt([S("")],i.prototype,"cssClass",void 0),mt([S(!1)],i.prototype,"showAlwaysInPopup",void 0),mt([S(!1)],i.prototype,"disabled",void 0),mt([S("")],i.prototype,"prefixIcon",void 0),mt([S("")],i.prototype,"suffixIcon",void 0),mt([S(!0)],i.prototype,"visible",void 0),mt([S("None")],i.prototype,"overflow",void 0),mt([S("")],i.prototype,"template",void 0),mt([S("Button")],i.prototype,"type",void 0),mt([S("Both")],i.prototype,"showTextOn",void 0),mt([S(null)],i.prototype,"htmlAttributes",void 0),mt([S("")],i.prototype,"tooltipText",void 0),mt([S("Left")],i.prototype,"align",void 0),mt([S(-1)],i.prototype,"tabIndex",void 0),mt([S("Custom")],i.prototype,"name",void 0),mt([_()],i.prototype,"click",void 0),i}(Kt),UL=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),G=function(n,i,e,t){var r=arguments.length,s=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,i,e,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(i,e,s):a(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s},YL=function(n){UL(i,n);function i(e,t){var r=n.call(this,e,t)||this;return r.adaptiveGroupIndex=0,r}return i.prototype.render=function(){var e=[],t=[];if(e.push(Bu),this.enableRtl?e.push(Lc):t.push(Lc),this.isAdaptive?e.push(Rn):t.push(Rn),this.enableAdaptiveUI?e.push(wm):t.push(wm),this.allowMultiDrag?e.push(Vc):t.push(Vc),this.cssClass)for(var r=this.cssClass.split(" "),s=0,a=r;s<a.length;s++){var o=a[s];e.push(o)}ii(this.element,e,t),this.validateDate(),ad({target:this.element}),this.scrollModule=new ZR(this),this.scrollModule.setWidth(),this.scrollModule.setHeight(),this.renderModule=new CL(this),this.eventBase=new gp(this),this.workCellAction=new RL(this),this.allowKeyboardInteraction&&(this.keyboardInteractionModule=new cg(this)),this.inlineModule=new PN(this),this.initializeDataModule(),this.renderTableContainer(),this.activeViewOptions=this.getActiveViewOptions(),this.initializeResources(),this.wireEvents()},i.prototype.renderTableContainer=function(){this.element.querySelector("."+Ei)||this.element.appendChild(this.createElement("div",{className:Ei}))},i.prototype.getEventTemplateName=function(e){var t="eventTemplate_"+e;return this.activeEventTemplates.indexOf(t)<0&&this.activeEventTemplates.push(t),t},i.prototype.getElementWidth=function(e){return sp(e,this.uiStateValues.isTransformed)},i.prototype.getElementHeight=function(e){return Eb(e,this.uiStateValues.isTransformed)},i.prototype.getElementHeightFromClass=function(e,t){return GO(e,t,this.uiStateValues.isTransformed)},i.prototype.renderTemplates=function(e){this.isReact?this.renderReactTemplates(e):e&&e()},i.prototype.resetTemplates=function(e){(this.isAngular||this.isReact)&&this.clearTemplate(e)},i.prototype.sanitize=function(e,t){this.enableHtmlSanitizer?t.innerText=Ar.sanitize(e):t.innerHTML=e},i.prototype.initializeResources=function(e){e===void 0&&(e=!1),this.resources.length>0?(this.resourceBase=new qL(this),this.resourceBase.bindResourcesData(e)):(this.resourceBase=null,this.resourceCollection=[],this.renderElements(e))},i.prototype.destroyEditorWindow=function(){this.eventWindow&&(this.eventWindow.destroy(),this.eventWindow=null),this.eventWindow=new jg(this)},i.prototype.renderElements=function(e){if(e){this.initializeView(this.currentView),this.eventWindow.refresh();return}this.destroyHeaderModule(),this.showHeaderBar&&(this.headerModule=new Xc(this)),this.renderTableContainer(),this.uiStateValues.isTransformed=Math.round(this.element.getBoundingClientRect().width)!==this.element.offsetWidth,(H.isDevice||H.isTouch)&&(this.scheduleTouchModule=new JR(this)),this.initializeView(this.currentView),this.destroyPopups(),this.isPrinting||this.initializePopups()},i.prototype.validateDate=function(e){e===void 0&&(e=this.selectedDate);var t=e instanceof Date?new Date(e.getTime()):new Date(e),r=d(this.minDate)?new Date(1900,0,1):this.minDate instanceof Date?new Date(this.minDate.getTime()):new Date(this.minDate),s=d(this.maxDate)?new Date(2099,11,31):this.maxDate instanceof Date?new Date(this.maxDate.getTime()):new Date(this.maxDate);if(r<=s)t<r&&(t=r),t>s&&(t=s),this.setProperties({selectedDate:new Date(""+t),minDate:new Date(""+r),maxDate:new Date(""+s)},!0),this.eventWindow&&this.eventWindow.updateMinMaxDateToEditor();else throw Error("minDate should be equal or less than maxDate")},i.prototype.getViewIndex=function(e){for(var t=0;t<this.viewCollections.length;t++){var r=this.viewCollections[parseInt(t.toString(),10)].option;if(r===e)return t}return-1},i.prototype.setViewOptions=function(e){if(e===void 0&&(e=!1),!(d(this.views)||this.views.length===0)){this.viewOptions={},this.viewCollections=[];var t,r,s=this.viewIndex,a=0;this.viewIndex=-1;for(var o=0,l=this.views;o<l.length;o++){var h=l[o],c=typeof h!="string";typeof h=="string"?(t=h,this.currentView===t&&(r=t,this.viewIndex=a)):(t=h.option,h.isSelected&&(r=t,this.viewIndex=a));var u=$({option:t},c?h:{}),p=t.charAt(0).toLowerCase()+t.slice(1);u.cellHeaderTemplateName=u.cellHeaderTemplate?u.option:"",u.dateHeaderTemplateName=u.dateHeaderTemplate?u.option:"",u.dateRangeTemplateName=u.dateRangeTemplate?u.option:"",u.cellTemplateName=u.cellTemplate?u.option:"",u.dayHeaderTemplateName=u.dayHeaderTemplate?u.option:"",u.monthHeaderTemplateName=u.monthHeaderTemplate?u.option:"",u.resourceHeaderTemplateName=u.resourceHeaderTemplate?u.option:"",u.headerIndentTemplateName=u.headerIndentTemplate?u.option:"",u.eventTemplateName=u.eventTemplate?u.option:"",!d(u.firstDayOfWeek)&&u.firstDayOfWeek===0&&delete u.firstDayOfWeek,!d(u.interval)&&u.interval===1&&delete u.interval,this.viewCollections.push(u),d(this.viewOptions[""+p])?this.viewOptions[""+p]=[u]:this.viewOptions[""+p].push(u),a++}if(!e&&r&&this.setProperties({currentView:r},!0),this.viewIndex===-1){var f=this.getViewIndex(this.currentView);this.viewIndex=typeof this.views[0]!="string"&&!d(s)&&s!==-1?s:f===-1?0:f}}},i.prototype.isResourceCollectionEmpty=function(){return this.resourceCollection.length>0&&this.resourceCollection.some(function(e){var t=e&&e.dataSource;return Array.isArray(t)?t.length===0:!t})},i.prototype.getActiveViewOptions=function(){var e={enable:this.timeScale.enable,interval:this.timeScale.interval,slotCount:this.timeScale.slotCount,majorSlotTemplate:this.timeScale.majorSlotTemplate,minorSlotTemplate:this.timeScale.minorSlotTemplate},t=this.isResourceCollectionEmpty(),r=this.viewCollections[this.viewIndex].option.indexOf("Year")>-1,s=[];!d(this.group.resources)&&this.group.resources.length>0&&!t?s=this.group.resources:this.resources.length>0&&!t&&(s=[]);var a={byDate:r||t?!1:this.group.byDate,byGroupID:this.group.byGroupID,allowGroupEdit:this.group.allowGroupEdit,resources:s,headerTooltipTemplate:this.group.headerTooltipTemplate,enableCompactView:this.group.enableCompactView,hideNonWorkingDays:["Day","Week","WorkWeek","Month"].indexOf(this.currentView)>-1?this.group.hideNonWorkingDays:!1},o=this.viewCollections[this.viewIndex].workDays?[]:this.workDays,l={dateFormat:this.dateFormat,endHour:this.endHour,isSelected:!1,option:null,readonly:this.readonly,startHour:this.startHour,allowVirtualScrolling:!1,allowOverlap:this.allowOverlap,overscanCount:this.overscanCount,cellHeaderTemplate:this.cellHeaderTemplate,dayHeaderTemplate:this.dayHeaderTemplate,monthHeaderTemplate:this.monthHeaderTemplate,cellTemplate:this.cellTemplate,eventTemplate:this.eventSettings.template,dateHeaderTemplate:this.dateHeaderTemplate,dateRangeTemplate:this.dateRangeTemplate,resourceHeaderTemplate:this.resourceHeaderTemplate,headerIndentTemplate:this.headerIndentTemplate,firstMonthOfYear:this.firstMonthOfYear,firstDayOfWeek:this.firstDayOfWeek,workDays:o,monthsCount:this.monthsCount,showWeekend:this.showWeekend,showWeekNumber:this.showWeekNumber,displayName:null,interval:1,timeScale:e,timeFormat:this.internalTimeFormat,group:a,headerRows:this.headerRows,orientation:"Horizontal",numberOfWeeks:0,displayDate:null,enableLazyLoading:!1},h=this.viewCollections[this.viewIndex],c=$(l,h,void 0,!0);return this.firstDayOfWeek!==0&&h.firstDayOfWeek&&this.firstDayOfWeek!==h.firstDayOfWeek&&(c.firstDayOfWeek=this.firstDayOfWeek),c.displayDate&&(c.displayDate=c.displayDate instanceof Date?new Date(c.displayDate.getTime()):new Date(c.displayDate)),c.enableLazyLoading&&!d(c.group.resources)&&c.group.resources.length>0&&(["Agenda","MonthAgenda","Year","TimelineYear"].indexOf(c.option)===-1||c.option==="TimelineYear"&&c.orientation==="Vertical")&&(c.allowVirtualScrolling=!0),c},i.prototype.initializeDataModule=function(){this.eventFields={id:this.eventSettings.fields.id,isBlock:this.eventSettings.fields.isBlock,subject:this.eventSettings.fields.subject.name,startTime:this.eventSettings.fields.startTime.name,endTime:this.eventSettings.fields.endTime.name,startTimezone:this.eventSettings.fields.startTimezone.name,endTimezone:this.eventSettings.fields.endTimezone.name,location:this.eventSettings.fields.location.name,description:this.eventSettings.fields.description.name,isAllDay:this.eventSettings.fields.isAllDay.name,recurrenceID:this.eventSettings.fields.recurrenceID.name,recurrenceRule:this.eventSettings.fields.recurrenceRule.name,recurrenceException:this.eventSettings.fields.recurrenceException.name,isReadonly:this.eventSettings.fields.isReadonly,followingID:this.eventSettings.fields.followingID},this.setEditorTitles(),this.dataModule=new Bb(this,this.eventSettings.dataSource,this.eventSettings.query),this.crudModule=new OL(this)},i.prototype.setEditorTitles=function(){this.editorTitles={subject:this.eventSettings.fields.subject.title||this.localeObj.getConstant("title"),startTime:this.eventSettings.fields.startTime.title||this.localeObj.getConstant("start"),endTime:this.eventSettings.fields.endTime.title||this.localeObj.getConstant("end"),isAllDay:this.eventSettings.fields.isAllDay.title||this.localeObj.getConstant("allDay"),startTimezone:this.eventSettings.fields.startTimezone.title||this.localeObj.getConstant("startTimezone"),endTimezone:this.eventSettings.fields.endTimezone.title||this.localeObj.getConstant("endTimezone"),location:this.eventSettings.fields.location.title||this.localeObj.getConstant("location"),description:this.eventSettings.fields.description.title||this.localeObj.getConstant("description"),recurrenceRule:this.eventSettings.fields.recurrenceRule.title||this.localeObj.getConstant("repeat")}},i.prototype.initializeView=function(e){this.showSpinner(),this.activeViewOptions=this.getActiveViewOptions(),this.resourceBase&&this.resourceBase.setResourceCollection(),this.initializeTemplates(),this.renderModule.render(e)},i.prototype.initializeTemplates=function(){this.cellHeaderTemplateFn=this.templateParser(this.activeViewOptions.cellHeaderTemplate),this.dayHeaderTemplateFn=this.templateParser(this.activeViewOptions.dayHeaderTemplate),this.monthHeaderTemplateFn=this.templateParser(this.activeViewOptions.monthHeaderTemplate),this.cellTemplateFn=this.templateParser(this.activeViewOptions.cellTemplate),this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),this.dateRangeTemplateFn=this.templateParser(this.activeViewOptions.dateRangeTemplate),this.majorSlotTemplateFn=this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate),this.minorSlotTemplateFn=this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate),this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),this.headerIndentTemplateFn=this.templateParser(this.activeViewOptions.headerIndentTemplate),this.headerTooltipTemplateFn=this.templateParser(this.activeViewOptions.group.headerTooltipTemplate),this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate),this.editorTemplateFn=this.templateParser(this.editorTemplate),this.editorHeaderTemplateFn=this.templateParser(this.editorHeaderTemplate),this.editorFooterTemplateFn=this.templateParser(this.editorFooterTemplate),this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header),this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content),this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer)},i.prototype.initializePopups=function(){this.eventWindow=new jg(this),this.quickPopup=new fg(this)},i.prototype.getDayNames=function(e){var t=[],r,s="";d(this.locale)||this.locale==="en"||this.locale==="en-US"?(s="days.stand-alone.",r=V(s+e,Lt(this.getCalendarMode()))):(s="main."+this.locale+".dates.calendars."+this.getCalendarMode()+".days.format."+e,r=V(s,Vt));for(var a=0,o=Object.keys(r);a<o.length;a++){var l=o[a];t.push(V(l,r))}return t},i.prototype.setCldrTimeFormat=function(){if(!d(this.timeFormat)){this.internalTimeFormat=this.timeFormat;return}d(this.locale)||this.locale==="en"||this.locale==="en-US"?this.internalTimeFormat=V("timeFormats.short",Lt(this.getCalendarMode())):this.internalTimeFormat=V("main."+this.locale+".dates.calendars."+this.getCalendarMode()+".timeFormats.short",Vt)},i.prototype.getCalendarMode=function(){return d(this.calendarMode)?"gregorian":this.calendarMode.toLowerCase()},i.prototype.getTimeString=function(e){var t=this.globalize.formatDate(e,{format:this.activeViewOptions.timeFormat,type:"time",calendar:this.getCalendarMode()});return t.toLocaleUpperCase()},i.prototype.getDateTime=function(e){return e instanceof Date?new Date(e.getTime()):new Date(e)},i.prototype.setCalendarMode=function(){this.calendarMode==="Islamic"?this.calendarUtil=new Wb:this.calendarUtil=new Fb},i.prototype.changeView=function(e,t,r,s){var a=this;if(d(s)&&(s=this.getViewIndex(e)),!(!r&&s===this.viewIndex&&this.currentView===e||s<0)){var o=this.activeViewOptions?this.activeViewOptions.option:this.currentView,l={requestType:"viewNavigate",cancel:!1,event:t};this.trigger(Yt,l,function(h){if(h.cancel)a.currentView=o;else{var c={action:"view",cancel:!1,currentDate:a.selectedDate,previousView:o,currentView:e,viewIndex:s};a.trigger(Mu,c,function(u){if(u.cancel)a.currentView=o;else{var p=["Day","Week","WorkWeek"].indexOf(e)>-1&&["Day","Week","WorkWeek"].indexOf(o)<0;a.uiStateValues.isInitial=p||e.indexOf("Timeline")>-1||e.indexOf("Year")>-1,a.uiStateValues.top=e.indexOf("Timeline")>-1&&o.indexOf("Timeline")<0?0:a.uiStateValues.top,a.viewIndex=u.viewIndex,a.setProperties({currentView:e},!0),a.headerModule&&(a.headerModule.updateActiveView(),a.headerModule.setCalendarDate(a.selectedDate),a.headerModule.setCalendarView()),a.initializeView(a.currentView),a.animateLayout(),l={requestType:"viewNavigate",cancel:!1,event:t},a.trigger(Mr,l)}})}})}},i.prototype.changeDate=function(e,t){var r=this,s={requestType:"dateNavigate",cancel:!1,event:t};this.trigger(Yt,s,function(a){if(!a.cancel){var o={action:"date",cancel:!1,previousDate:r.selectedDate,currentDate:e};r.trigger(Mu,o,function(l){l.cancel||(r.uiStateValues.isInitial=r.activeView.isTimelineView()&&r.currentView!=="TimelineYear",r.validateDate(l.currentDate),r.headerModule&&r.headerModule.setCalendarDate(l.currentDate),r.currentView==="MonthAgenda"&&r.monthAgendaModule&&(r.monthAgendaModule.monthAgendaDate=new Date(""+r.selectedDate)),r.initializeView(r.currentView),r.animateLayout(),s={requestType:"dateNavigate",cancel:!1,event:t},r.trigger(Mr,s))})}})},i.prototype.isMinMaxDate=function(e){e===void 0&&(e=this.selectedDate);var t=d(this.maxDate)?new Date(2099,11,31):this.maxDate,r=d(this.minDate)?new Date(1900,0,1):this.minDate;return e.getTime()>=r.getTime()&&e.getTime()<=t.getTime()},i.prototype.isSelectedDate=function(e){return e.setHours(0,0,0,0)===new Date(""+this.selectedDate).setHours(0,0,0,0)},i.prototype.getCurrentTime=function(e){return e===void 0&&(e=new Date),this.timezone?this.tzModule.convert(e,this.tzModule.getLocalTimezoneName(),this.timezone):e},i.prototype.getNavigateView=function(){return this.activeView.isTimelineView()?this.currentView==="TimelineMonth"||this.currentView==="TimelineYear"?"TimelineDay":"Agenda":"Day"},i.prototype.animateLayout=function(){this.activeView.element&&new wi({duration:600,name:"FadeIn",timingFunction:"easeIn"}).animate(this.activeView.element)},i.prototype.requiredModules=function(){var e=[];this.setViewOptions(!0);for(var t=0,r=Object.keys(this.viewOptions);t<r.length;t++){var s=r[t];s=s==="timelineDay"||s==="timelineWeek"||s==="timelineWorkWeek"?"timelineViews":s,e.push({member:s,args:[this]})}return this.allowDragAndDrop&&e.push({member:"dragAndDrop",args:[this]}),this.allowResizing&&e.push({member:"resize",args:[this]}),e.push({member:"excelExport",args:[this]}),e.push({member:"iCalendarExport",args:[this]}),e.push({member:"iCalendarImport",args:[this]}),e.push({member:"print",args:[this]}),e},i.prototype.preRender=function(){this.isAdaptive=H.isDevice||rR(),this.globalize=new je(this.locale),this.tzModule=new _b,(this&&d(this.uiStateValues)||!this.enablePersistence)&&(this.uiStateValues={expand:!1,isInitial:!0,left:0,top:0,isGroupAdaptive:!1,isIgnoreOccurrence:!1,groupIndex:this.adaptiveGroupIndex,action:!1,isBlock:!1,isCustomMonth:!0,isPreventTimezone:!1,isTransformed:!1}),this.currentTimezoneDate=this.getCurrentTime(),this.activeCellsData={startTime:new Date(this.currentTimezoneDate),endTime:new Date(this.currentTimezoneDate),isAllDay:!1},this.activeEventData={event:void 0,element:void 0},this.getDefaultLocale(),this.localeObj=new hi(this.getModuleName(),this.defaultLocale,this.locale),this.setCldrTimeFormat(),this.setCalendarMode(),this.eventsData=[],this.eventsProcessed=[],this.blockData=[],this.blockProcessed=[],this.resourceCollection=[],this.currentAction=null,this.selectedElements=[],this.activeEventTemplates=[],this.setViewOptions()},i.prototype.getDefaultLocale=function(){this.defaultLocale={day:"Day",week:"Week",workWeek:"Work Week",month:"Month",year:"Year",agenda:"Agenda",weekAgenda:"Week Agenda",workWeekAgenda:"Work Week Agenda",monthAgenda:"Month Agenda",today:"Today",noEvents:"No events",emptyContainer:"There are no events scheduled on this day.",allDay:"All day",start:"Start",end:"End",more:"more",close:"Close",cancel:"Cancel",noTitle:"(No Title)",delete:"Delete",deleteEvent:"Delete Event",deleteMultipleEvent:"Delete Multiple Events",selectedItems:"Items selected",deleteSeries:"Entire Series",edit:"Edit",editSeries:"Entire Series",editEvent:"Edit Event",createEvent:"Create",subject:"Subject",addTitle:"Add title",moreDetails:"More Details",moreEvents:"More Events",save:"Save",editContent:"How would you like to change the appointment in the series?",deleteContent:"Are you sure you want to delete this event?",deleteMultipleContent:"Are you sure you want to delete the selected events?",newEvent:"New Event",title:"Title",location:"Location",description:"Description",timezone:"Timezone",startTimezone:"Start Timezone",endTimezone:"End Timezone",repeat:"Repeat",saveButton:"Save",cancelButton:"Cancel",deleteButton:"Delete",recurrence:"Recurrence",wrongPattern:"The recurrence pattern is not valid.",seriesChangeAlert:"Do you want to cancel the changes made to specific instances of this series and match it to the whole series again?",createError:"The duration of the event must be shorter than how frequently it occurs. Shorten the duration, or change the recurrence pattern in the recurrence event editor.",sameDayAlert:"Two occurrences of the same event cannot occur on the same day.",occurenceAlert:"Cannot reschedule an occurrence of the recurring appointment if it skips over a later occurrence of the same appointment.",editRecurrence:"Edit Recurrence",recurringEvent:"Recurring Event",repeats:"Repeats",alert:"Alert",startEndError:"The selected end date occurs before the start date.",invalidDateError:"The entered date value is invalid.",blockAlert:"Events cannot be scheduled within the blocked time range.",overlapAlert:"Events cannot be scheduled during the chosen time as it overlaps with another event.",ok:"Ok",yes:"Yes",no:"No",of:"of",occurrence:"Occurrence",series:"Series",previous:"Previous",next:"Next",timelineDay:"Timeline Day",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month",timelineYear:"Timeline Year",editFollowingEvent:"Following Events",deleteTitle:"Delete Event",editTitle:"Edit Event",beginFrom:"Begin From",endAt:"Ends At",expandAllDaySection:"Expand-all-day-section",collapseAllDaySection:"Collapse-all-day-section",searchTimezone:"Search Timezone",noRecords:"No records found"}},i.prototype.wireEvents=function(){C.add(window,"resize",this.onScheduleResize,this),C.add(window,"orientationchange",this.onScheduleResize,this),C.add(document,H.touchStartEvent,this.onDocumentClick,this),this.allowClipboard&&C.add(document,"paste",this.onDocumentPaste,this)},i.prototype.removeSelectedClass=function(){for(var e=[].slice.call(this.element.querySelectorAll("."+Bs)),t=0,r=e;t<r.length;t++){var s=r[t];s.removeAttribute("tabindex")}I(e,Bs),this.keyboardInteractionModule&&this.keyboardInteractionModule.selectedCells.length>0&&(this.keyboardInteractionModule.selectedCells=[])},i.prototype.addSelectedClass=function(e,t,r){T(e,Bs),t&&(t.setAttribute("tabindex","0"),t.focus({preventScroll:r||t.classList.contains("e-all-day-cells")&&this.enableAllDayScroll}))},i.prototype.selectCell=function(e){this.removeSelectedClass(),this.addSelectedClass([e],e)},i.prototype.getAllDayRow=function(){return this.element.querySelector("."+Wn)},i.prototype.getContentTable=function(){return this.activeView.element.querySelector("."+$e+" tbody")},i.prototype.getTableRows=function(){return[].slice.call(this.element.querySelectorAll("."+$e+" tbody tr:not(."+Rt+")"))},i.prototype.getWorkCellElements=function(){return[].slice.call(this.element.querySelectorAll("."+se))},i.prototype.getIndexOfDate=function(e,t){return e.map(Number).indexOf(+t)},i.prototype.isAllDayCell=function(e){return!!(["Month","TimelineMonth","TimelineYear","MonthAgenda"].indexOf(this.currentView)>-1||e.classList.contains(Me)||e.classList.contains(bt)||!this.activeViewOptions.timeScale.enable||this.activeView.isTimelineView()&&this.activeViewOptions.headerRows.length>0&&this.activeViewOptions.headerRows.slice(-1)[0].option!=="Hour")},i.prototype.getDateFromElement=function(e){var t;if(d(e)||(t=e.getAttribute("data-date")),!d(t)){var r=parseInt(t,10),s=new Date(r);return s}},i.prototype.getTargetElement=function(e,t,r){var s=document.elementFromPoint(t,r),a;return s&&(a=s.closest(e)),a?[a]:null},i.prototype.getCellHeaderTemplate=function(){return this.cellHeaderTemplateFn},i.prototype.getDayHeaderTemplate=function(){return this.dayHeaderTemplateFn},i.prototype.getMonthHeaderTemplate=function(){return this.monthHeaderTemplateFn},i.prototype.getCellTemplate=function(){return this.cellTemplateFn},i.prototype.getDateHeaderTemplate=function(){return this.dateHeaderTemplateFn},i.prototype.getDateRangeTemplate=function(){return this.dateRangeTemplateFn},i.prototype.getMajorSlotTemplate=function(){return this.majorSlotTemplateFn},i.prototype.getMinorSlotTemplate=function(){return this.minorSlotTemplateFn},i.prototype.getAppointmentTemplate=function(){return this.appointmentTemplateFn},i.prototype.getEventTooltipTemplate=function(){return this.eventTooltipTemplateFn},i.prototype.getHeaderTooltipTemplate=function(){return this.headerTooltipTemplateFn},i.prototype.getEditorTemplate=function(){return this.editorTemplateFn},i.prototype.getEditorHeaderTemplate=function(){return this.editorHeaderTemplateFn},i.prototype.getEditorFooterTemplate=function(){return this.editorFooterTemplateFn},i.prototype.getQuickInfoTemplatesHeader=function(){return this.quickInfoTemplatesHeaderFn},i.prototype.getQuickInfoTemplatesContent=function(){return this.quickInfoTemplatesContentFn},i.prototype.getQuickInfoTemplatesFooter=function(){return this.quickInfoTemplatesFooterFn},i.prototype.getResourceHeaderTemplate=function(){return this.resourceHeaderTemplateFn},i.prototype.getHeaderIndentTemplate=function(){return this.headerIndentTemplateFn},i.prototype.getCssProperties=function(){var e={border:this.enableRtl?"borderLeftWidth":"borderRightWidth",padding:this.enableRtl?"paddingLeft":"paddingRight",rtlBorder:this.enableRtl?"borderRightWidth":"borderLeftWidth",rtlPadding:this.enableRtl?"paddingRight":"paddingLeft"};return e},i.prototype.removeNewEventElement=function(){var e=this.element.querySelector("."+Jl);d(e)||ve(e)},i.prototype.getStartEndTime=function(e){if(!d(e)&&e!==""){var t=W(new Date(this.currentTimezoneDate)||this.getCurrentTime()),r=e.split(":");return r.length===2&&t.setHours(parseInt(r[0],10),parseInt(r[1],10),0),t}return null},i.prototype.onDocumentClick=function(e){this.notify(Or,{event:e})},i.prototype.onDocumentPaste=function(e){this.notify(Nu,{event:e})},i.prototype.onScheduleResize=function(){if(!(d(this.activeView)||(this.isAdaptive||iR())&&document.activeElement&&(document.activeElement.classList.contains(Ke)||document.activeElement.classList.contains(Jt))||this.uiStateValues.isTapHold))if(this.virtualScrollModule&&this.activeView.isTimelineView()&&this.virtualScrollModule.refreshLayout(),this.activeViewOptions.timeScale.enable&&this.activeView&&this.activeView.highlightCurrentTime(),this.quickPopup&&this.quickPopup.onClosePopup(),eR(),this.currentView==="Month"||this.currentView!=="Agenda"&&this.currentView!=="MonthAgenda"&&!this.activeViewOptions.timeScale.enable||this.activeView.isTimelineView()){this.activeView.resetColWidth(),this.notify(Wi,{cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0});var e=!1;if(this.activeViewOptions.enableLazyLoading&&this.virtualScrollModule&&this.virtualScrollModule.isRemoteRefresh&&(e=this.virtualScrollModule.isRemoteRefresh,this.virtualScrollModule.isRemoteRefresh=!1),this.refreshEvents(e),this.virtualScrollModule&&!this.virtualScrollModule.enableTransition){var t=this.element.querySelector("."+Pi),r=this.element.querySelector("."+Te);this.virtualScrollModule.enableTransition=!0,T([r,t],"e-transition")}}else this.notify(si,{})},i.prototype.templateParser=function(e){if(e)try{return typeof e=="function"?At(e):document.querySelectorAll(e).length?At(document.querySelector(e).innerHTML.trim()):At(e)}catch{return At(e)}},i.prototype.getSelectedCells=function(){var e=[].slice.call(this.element.querySelectorAll("."+Bs));if(!e||e.length===0)return[];if(e.length===1)return e;if(e&&e.length>1){var t=e.some(function(s){return s.classList.contains(se)}),r=t?e.filter(function(s){return!s.classList.contains(Me)}):e;return!r||r.length===0?[]:r.slice().sort(function(s,a){return(+s.dataset.date||0)-(+a.dataset.date||0)})}return e},i.prototype.getAnnouncementString=function(e,t){var r;if(this.quickPopup&&this.activeViewOptions.group.resources.length>0){var s='"s event - ';r=this.quickPopup.getResourceText({event:e},"event")+s}var a=t||e[this.eventFields.subject]||this.eventSettings.fields.subject.default,o=e[this.eventFields.location]||this.eventSettings.fields.location.default,l="full",h=this.globalize.formatDate(e[this.eventFields.startTime],{type:"dateTime",skeleton:l,calendar:this.getCalendarMode()}),c=this.globalize.formatDate(e[this.eventFields.endTime],{type:"dateTime",skeleton:l,calendar:this.getCalendarMode()}),u=a+" "+this.localeObj.getConstant("beginFrom")+" "+h+" "+this.localeObj.getConstant("endAt")+" "+c;return r&&(u=r+" "+u),o&&o!==""&&(u=u+" "+this.localeObj.getConstant("location")+" "+o),e[this.eventFields.recurrenceRule]&&e[this.eventFields.recurrenceRule]!==""&&e[this.eventFields.id]===e[this.eventFields.recurrenceID]&&(u=u+" "+this.localeObj.getConstant("recurringEvent")),u},i.prototype.boundaryValidation=function(e,t){var r=30,s={left:!1,right:!1,top:!1,bottom:!1},a=this.element.querySelector("."+Te).getBoundingClientRect();return e<a.top+r+window.pageYOffset&&e>a.top+window.pageYOffset&&(s.top=!0),e>a.bottom-r+window.pageYOffset&&e<a.bottom+window.pageYOffset&&(s.bottom=!0),t<a.left+r+window.pageXOffset&&t>a.left+window.pageXOffset&&(s.left=!0),t>a.right-r+window.pageXOffset&&t<a.right+window.pageXOffset&&(s.right=!0),s},i.prototype.getWeekNumberContent=function(e){var t;if(this.weekRule==="FirstDay"){var r=Em(e.slice(-1)[0],this.firstDayOfWeek);t=this.globalize.formatNumber(Nc(r))}else if(this.weekRule==="FirstFourDayWeek"){var s=Ni(e.slice(-1)[0],this.firstDayOfWeek),a=Em(e.slice(-1)[0],this.firstDayOfWeek),o=QO(s,a);t=this.globalize.formatNumber(Nc(o))}else if(this.weekRule==="FirstFullWeek"){var s=Ni(e.slice(-1)[0],this.firstDayOfWeek);t=this.globalize.formatNumber(Nc(s))}return t},i.prototype.renderHeaderIndentTemplate=function(e,t){if(this.activeViewOptions.headerIndentTemplate){var r=this.element.id+"_",s=this.activeViewOptions.headerIndentTemplateName,a=r+s+"headerIndentTemplate",o=[].slice.call(this.getHeaderIndentTemplate()(e,this,"headerIndentTemplate",a,!1,void 0,void 0,this.root));oe(o,t)}},i.prototype.isSpecificResourceEvents=function(){return this.activeViewOptions.group.resources.length>0&&!this.activeViewOptions.group.allowGroupEdit&&!this.rowAutoHeight&&!this.virtualScrollModule&&this.activeViewOptions.group.byGroupID},i.prototype.unWireEvents=function(){C.remove(window,"resize",this.onScheduleResize),C.remove(window,"orientationchange",this.onScheduleResize),C.remove(document,H.touchStartEvent,this.onDocumentClick),C.remove(document,"paste",this.onDocumentPaste)},i.prototype.getModuleName=function(){return"schedule"},i.prototype.getPersistData=function(){return this.addOnPersist(["currentView","selectedDate","scrollTop","scrollLeft","adaptiveGroupIndex"])},i.prototype.onPropertyChanged=function(e,t){if(!(this.isReact&&d(this.activeView))){for(var r={isRefresh:!1,isResource:!1,isDate:!1,isView:!1,isLayout:!1,isDataManager:!1},s=0,a=Object.keys(e);s<a.length;s++){var o=a[s];switch(o){case"views":this.setViewOptions(),this.headerModule&&this.headerModule.updateItems(),r.isView=!0;break;case"currentView":r.isView=!0;break;case"minDate":case"maxDate":case"selectedDate":r.isDate=!0;break;case"dateFormat":this.activeViewOptions=this.getActiveViewOptions(),this.headerModule&&this.headerModule.updateDateRange();break;case"showHeaderBar":case"toolbarItems":this.destroyHeaderModule(),e.showHeaderBar&&(this.headerModule=new Xc(this),this.headerModule.updateDateRange()),this.notify(Wi,{cssProperties:this.getCssProperties()}),this.activeView.isTimelineView()&&this.refreshEvents(!1);break;case"workDays":JSON.stringify(t.workDays)!==JSON.stringify(e.workDays)&&(r.isLayout=!0);break;case"prerenderDialogs":{e.prerenderDialogs?(this.eventWindow.renderEventWindow(),this.quickPopup.renderQuickDialog()):(this.eventWindow.destroy(!0),this.quickPopup.destroyQuickDialog());break}case"showWeekend":case"startHour":case"endHour":case"workHours":case"readonly":case"headerRows":case"showWeekNumber":case"rowAutoHeight":r.isLayout=!0;break;case"locale":case"calendarMode":this.globalize=new je(this.locale),this.localeObj=new hi(this.getModuleName(),this.defaultLocale,this.locale),this.setCldrTimeFormat(),this.setCalendarMode(),r.isRefresh=!0;break;case"firstDayOfWeek":this.activeViewOptions.firstDayOfWeek=e.firstDayOfWeek,this.eventWindow&&this.eventWindow.refreshRecurrenceEditor(),r.isLayout=!0;break;case"showTimeIndicator":this.activeViewOptions.timeScale.enable&&this.activeView&&this.activeView.highlightCurrentTime();break;case"cellHeaderTemplate":this.activeViewOptions.cellHeaderTemplate=e.cellHeaderTemplate,this.cellHeaderTemplateFn=this.templateParser(this.activeViewOptions.cellHeaderTemplate),r.isLayout=!0;break;case"cellTemplate":this.activeViewOptions.cellTemplate=e.cellTemplate,this.cellTemplateFn=this.templateParser(this.activeViewOptions.cellTemplate),r.isLayout=!0;break;case"dateHeaderTemplate":this.activeViewOptions.dateHeaderTemplate=e.dateHeaderTemplate,this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),r.isLayout=!0;break;case"dateRangeTemplate":this.activeViewOptions.dateRangeTemplate=e.dateRangeTemplate,this.dateRangeTemplateFn=this.templateParser(this.activeViewOptions.dateRangeTemplate),this.headerModule&&this.headerModule.updateDateRange();break;case"dayHeaderTemplate":this.activeViewOptions.dayHeaderTemplate=e.dayHeaderTemplate,this.dayHeaderTemplateFn=this.templateParser(this.activeViewOptions.dayHeaderTemplate),r.isLayout=!0;break;case"monthHeaderTemplate":this.activeViewOptions.monthHeaderTemplate=e.monthHeaderTemplate,this.monthHeaderTemplateFn=this.templateParser(this.activeViewOptions.monthHeaderTemplate),r.isLayout=!0;break;case"resourceHeaderTemplate":this.activeViewOptions.resourceHeaderTemplate=e.resourceHeaderTemplate,this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),r.isLayout=!0;break;case"timezone":this.eventBase.timezonePropertyChange(t.timezone),this.headerModule&&this.headerModule.setCalendarTimezone();break;case"enableRtl":this.setRtlClass(),r.isRefresh=!0;break;default:this.extendedPropertyChange(o,e,t,r);break}}this.propertyChangeAction(r)}},i.prototype.propertyChangeAction=function(e){e.isRefresh?this.refresh():e.isResource?this.initializeResources(!0):e.isView?this.changeView(this.currentView,null,!0):e.isDate?(d(this.selectedDate)&&this.setProperties({selectedDate:this.getCurrentTime()},!0),this.changeDate(this.selectedDate)):e.isLayout?(this.activeCellsData=null,this.initializeView(this.currentView)):e.isDataManager&&this.crudModule&&(this.dragAndDropModule&&(this.dragAndDropModule.actionObj.action="",I([this.element],Vm)),this.crudModule.refreshDataManager())},i.prototype.allDayRowScrollUpdate=function(){var e=this.element.querySelector("."+Hi),t=this.element.querySelector("."+Wn);if(this.height==="auto"||!this.enableAllDayScroll){if(T([e],yl),e.classList.contains(oo)&&I([e],oo),this.uiStateValues.expand){var r=[].slice.call(this.element.querySelectorAll("."+Me));r[0].style.height=t.style.height?t.style.height:r[1].style.height}}else e.classList.contains(yl)&&I([e],yl),this.eventBase.allDayExpandScroll(e);this.uiStateValues.expand||(t.style.height="")},i.prototype.extendedPropertyChange=function(e,t,r,s){switch(e){case"width":case"height":case"enableAllDayScroll":["Day","Week","WorkWeek"].indexOf(this.currentView)>-1&&this.allDayRowScrollUpdate(),this.notify(Ru,{module:"scroll",properties:{width:t.width,height:t.height}});break;case"cssClass":r.cssClass&&I([this.element],r.cssClass.split(" ")),t.cssClass&&T([this.element],t.cssClass.split(" "));break;case"hideEmptyAgendaDays":case"agendaDaysCount":this.activeViewOptions=this.getActiveViewOptions(),s.isView=!0;break;case"eventSettings":this.onEventSettingsPropertyChanged(t.eventSettings,r.eventSettings,s);break;case"allowKeyboardInteraction":case"allowClipboard":this.keyboardInteractionModule&&(this.keyboardInteractionModule.destroy(),this.keyboardInteractionModule=null),(t.allowKeyboardInteraction||t.allowClipboard)&&(this.keyboardInteractionModule=new cg(this)),e==="allowClipboard"&&(t.allowClipboard?C.add(document,"paste",this.onDocumentPaste,this):C.remove(document,"paste",this.onDocumentPaste));break;case"timezoneDataSource":this.eventWindow&&this.eventWindow.refresh();break;case"editorTemplate":d(this.editorTemplate)||(this.editorTemplateFn=this.templateParser(this.editorTemplate)),this.eventWindow&&this.eventWindow.setDialogContent();break;case"editorHeaderTemplate":d(this.editorHeaderTemplate)||(this.editorHeaderTemplateFn=this.templateParser(this.editorHeaderTemplate)),this.eventWindow&&this.eventWindow.setDialogHeader();break;case"editorFooterTemplate":d(this.editorFooterTemplate)||(this.editorFooterTemplateFn=this.templateParser(this.editorFooterTemplate)),this.eventWindow&&this.eventWindow.setDialogFooter();break;case"quickInfoTemplates":this.quickInfoTemplates.header&&(this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header)),this.quickInfoTemplates.content&&(this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content)),this.quickInfoTemplates.footer&&(this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer));break;case"group":this.onGroupSettingsPropertyChanged(t.group,r.group,s);break;case"resources":s.isResource=!0;break;case"timeScale":this.activeViewOptions.timeScale.interval=t.timeScale.interval||this.activeViewOptions.timeScale.interval,this.activeViewOptions.timeScale.slotCount=t.timeScale.slotCount||this.activeViewOptions.timeScale.slotCount,this.eventWindow&&this.eventWindow.refreshDateTimePicker(),s.isLayout=!0;break;case"allowDragAndDrop":case"allowResizing":case"eventDragArea":case"allowOverlap":this.refreshEvents(!1);break;case"weekRule":s.isLayout=!0;break;case"firstMonthOfYear":this.activeViewOptions.firstMonthOfYear=t.firstMonthOfYear,this.viewIndex=this.activeView.viewIndex,s.isLayout=!0;break;case"monthsCount":this.activeViewOptions.monthsCount=t.monthsCount,this.viewIndex=this.activeView.viewIndex,s.isLayout=!0;break;case"timeFormat":this.internalTimeFormat=t.timeFormat||this.activeViewOptions.timeFormat,this.eventWindow&&this.eventWindow.refreshDateTimePicker(),s.isLayout=!0;break;case"enableAdaptiveUI":this.showHeaderBar&&this.headerModule&&(this.destroyHeaderModule(),this.headerModule=new Xc(this),this.headerModule.updateDateRange()),s.isLayout=!0;break;case"headerIndentTemplate":this.activeViewOptions.headerIndentTemplate=t.headerIndentTemplate,this.headerIndentTemplateFn=this.templateParser(this.activeViewOptions.headerIndentTemplate),s.isLayout=!0;break}},i.prototype.setRtlClass=function(){this.enableRtl?T([this.element],"e-rtl"):I([this.element],"e-rtl")},i.prototype.onGroupSettingsPropertyChanged=function(e,t,r){for(var s=0,a=Object.keys(e);s<a.length;s++){var o=a[s];o==="headerTooltipTemplate"?this.headerTooltipTemplateFn=this.templateParser(e.headerTooltipTemplate):(r.isLayout=!0,this.eventWindow&&this.eventWindow.refresh())}},i.prototype.onEventSettingsPropertyChanged=function(e,t,r){for(var s=0,a=Object.keys(e);s<a.length;s++){var o=a[s];switch(o){case"dataSource":case"query":case"fields":case"includeFiltersInQuery":this.initializeDataModule(),r.isDataManager=!0;break;case"template":this.activeViewOptions.eventTemplate=e.template,this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),r.isDataManager=!0;break;case"enableTooltip":this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),e.enableTooltip&&(this.eventTooltip=new Xu(this));break;case"tooltipTemplate":this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate);break;case"resourceColorField":this.resourceBase&&this.resourceBase.setResourceCollection(),r.isDataManager=!0;break;case"editFollowingEvents":this.quickPopup&&this.quickPopup.refreshQuickDialog();break;case"allowAdding":case"allowEditing":case"allowDeleting":this.showHeaderBar&&this.headerModule&&this.headerModule.updateAddIcon(),this.eventWindow&&this.eventWindow.refresh();break;case"spannedEventPlacement":case"minimumEventDuration":case"enableMaxHeight":case"enableIndicator":this.refreshEvents(!1);break;case"ignoreWhitespace":r.isLayout=!0;break}}},i.prototype.destroyHeaderModule=function(){this.headerModule&&(this.headerModule.destroy(),this.headerModule=null)},i.prototype.destroyPopups=function(){this.quickPopup&&(this.quickPopup.destroy(),this.quickPopup=null),this.eventWindow&&(this.eventWindow.destroy(),this.eventWindow=null)},i.prototype.showSpinner=function(){od(this.element)},i.prototype.hideSpinner=function(){ld(this.element)},i.prototype.setWorkHours=function(e,t,r,s){var a=[];a=this.getWorkHourCells(e,t,r,s),T(a,Cn)},i.prototype.resetWorkHours=function(e,t,r,s){if(e===void 0&&(e=this.activeView.renderDates),e&&t&&r){var a=this.getWorkHourCells(e,t,r,s);I(a,Cn)}else{var o=[].slice.call(this.element.querySelectorAll("."+Cn));I(o,Cn)}},i.prototype.getWorkHourCells=function(e,t,r,s){if(["Agenda","MonthAgenda","Month","TimelineMonth"].indexOf(this.currentView)>-1)return[];var a=this.getStartEndTime(t),o=this.getStartEndTime(r),l=this.getContentTable();if(d(a)||d(o)||!l)return[];a.setMilliseconds(0),o.setMilliseconds(0);var h=this.activeView.getStartHour();a<h&&(a=h);var c=this.activeView.getEndHour();o>c&&(o=c);for(var u=this.activeViewOptions.timeScale.interval*at,p=u/this.activeViewOptions.timeScale.slotCount,f=(h.getTimezoneOffset()-a.getTimezoneOffset())*at,v=Math.abs((h.getTimezoneOffset()-o.getTimezoneOffset())*at),m=Math.round((a.getTime()-h.getTime()+f)/p),g=Math.ceil((o.getTime()-h.getTime()-v)/p),y=m,b=g,E=[],w=0,A=e;w<A.length;w++){var D=A[w];D=this.getDateTime(D),W(D);var N=this.activeView.renderDates;!d(s)&&this.resourceBase&&!this.activeView.isTimelineView()&&(N=this.resourceBase.lastResourceLevel[parseInt(s.toString(),10)].renderDates);var x=this.getIndexOfDate(N,D);if(x>=0){if(this.activeView.isTimelineView()){var j=Math.round((c.getTime()-h.getTime())/p);m=y+x*j,g=b+x*j}for(var q=m;q<g;q++)if(this.activeView.isTimelineView()){var L=d(s)?0:s;E.push(l.rows[parseInt(L.toString(),10)].cells[parseInt(q.toString(),10)])}else if(d(s))E.push(l.rows[parseInt(q.toString(),10)].cells[parseInt(x.toString(),10)]);else{var O="."+se+'[data-group-index="'+s+'"]',P=[].slice.call(l.rows[parseInt(q.toString(),10)].querySelectorAll(O));E.push(P[parseInt(x.toString(),10)])}}}return E},i.prototype.getCellDetails=function(e){var t=e instanceof Array?e:[e],r=yn(t[0]),s=yn(t.slice(-1)[0]),a=this.getDateFromElement(r),o=this.getDateFromElement(s);if(!(d(a)||d(o))){var l=this.activeView.isTimelineView()&&!d(s.getAttribute("colSpan"))&&this.headerRows.length>0,h=l?parseInt(s.getAttribute("colSpan"),10):1;!this.activeViewOptions.timeScale.enable||l||s.classList.contains(Me)||s.classList.contains(bt)?o=Z(new Date(o.getTime()),h):o=this.activeView.getEndDateFromStartDate(o);var c={startTime:a,endTime:o,isAllDay:this.isAllDayCell(r),element:e},u=r.getAttribute("data-group-index");return d(u)||(c.groupIndex=parseInt(u,10)),c}},i.prototype.getSelectedElements=function(){return this.keyboardInteractionModule&&this.keyboardInteractionModule.selectedCells.length>0?this.keyboardInteractionModule.selectedCells:this.getSelectedCells()},i.prototype.getResourceCollections=function(){return this.resourceCollection},i.prototype.setResourceCollections=function(e,t){t===void 0&&(t=!0),!t&&this.uiStateValues&&(this.uiStateValues.isPreventEventRefresh=!0),this.setProperties({resources:e},!1)},i.prototype.changeCurrentView=function(e,t){var r=this.getViewIndex(e),s=e.charAt(0).toLowerCase()+e.slice(1),a=this.viewOptions[""+s];a&&(r=this.viewCollections.indexOf(a[t||0])),!(r===-1||r===this.viewIndex)&&this.changeView(e,null,null,r)},i.prototype.getCurrentViewIndex=function(){return this.viewIndex},i.prototype.getResourcesByIndex=function(e){if(this.resourceBase&&this.resourceBase.lastResourceLevel){if(e<0||e>=this.resourceBase.lastResourceLevel.length)return;var t=this.resourceBase.lastResourceLevel[parseInt(e.toString(),10)],r={};return this.resourceBase.setResourceValues(r,e),{resource:t.resource,resourceData:t.resourceData,groupData:r}}},i.prototype.expandResource=function(e,t){this.activeView.isTimelineView()&&this.resourceBase&&this.resourceCollection.length>1&&this.resourceBase.resourceExpand(e,t,!1)},i.prototype.collapseResource=function(e,t){this.activeView.isTimelineView()&&this.resourceBase&&this.resourceCollection.length>1&&this.resourceBase.resourceExpand(e,t,!0)},i.prototype.scrollTo=function(e,t){this.currentView.indexOf("Agenda")<0&&d(this.element.querySelector(".e-work-cells"))||(this.activeView.scrollToDate&&d(e)&&t?this.activeView.scrollToDate(t):this.activeView.scrollToHour&&this.activeView.scrollToHour(e,t))},i.prototype.scrollToResource=function(e,t){this.resourceBase&&this.resourceBase.lastResourceLevel&&this.resourceBase.resourceScroll(e,t)},i.prototype.exportToICalendar=function(e,t){if(this.iCalendarExportModule)this.iCalendarExportModule.initializeCalendarExport(e,t);else throw console.warn('[WARNING] :: Module "ICalendarExport" is not available in Schedule component! You either misspelled the module name or forgot to load it.'),Error("Inject ICalendarExport module")},i.prototype.importICalendar=function(e){if(this.iCalendarImportModule)this.iCalendarImportModule.initializeCalendarImport(e);else throw console.warn('[WARNING] :: Module "ICalendarImport" is not available in Schedule component! You either misspelled the module name or forgot to load it.'),Error("Inject ICalendarImport module")},i.prototype.addEvent=function(e){this.crudModule.addEvent(e)},i.prototype.generateEventOccurrences=function(e,t){return this.eventBase?this.eventBase.generateOccurrence(e,t):[]},i.prototype.exportToExcel=function(e){if(this.excelExportModule)this.excelExportModule.initializeExcelExport(e);else throw console.warn('[WARNING] :: Module "ExcelExport" is not available in Schedule component! You either misspelled the module name or forgot to load it.'),Error("Inject ExcelExport module")},i.prototype.print=function(e){if(this.printModule)this.printModule.print(e);else throw console.warn('[WARNING] :: Module "Print" is not available in Schedule component! You either misspelled the module name or forgot to load it.'),Error("Inject Print module")},i.prototype.saveEvent=function(e,t){this.crudModule.saveEvent(e,t)},i.prototype.deleteEvent=function(e,t){this.crudModule.deleteEvent(e,t)},i.prototype.getEvents=function(e,t,r){var s=[];return r?s=this.eventBase.getProcessedEvents():s=this.eventsData,e&&(e=this.getDateTime(e)),t&&(t=this.getDateTime(t)),s=this.eventBase.filterEventsByRange(s,e,t),s},i.prototype.getBlockEvents=function(e,t,r){var s=[];return r?s=this.eventBase.getProcessedEvents(this.blockData):s=this.blockData,e&&(e=this.getDateTime(e)),t&&(t=this.getDateTime(t)),s=this.eventBase.filterEventsByRange(s,e,t),s},i.prototype.getOccurrencesByID=function(e){return this.eventBase.getOccurrencesByID(e)},i.prototype.getOccurrencesByRange=function(e,t){return e=this.getDateTime(e),t=this.getDateTime(t),this.eventBase.getOccurrencesByRange(e,t)},i.prototype.getCurrentViewDates=function(){return this.activeView?this.activeView.renderDates:[]},i.prototype.setRecurrenceEditor=function(e){this.eventWindow.setRecurrenceEditor(e)},i.prototype.getEventMaxID=function(){return this.eventBase.getEventMaxID()},i.prototype.getDeletedOccurrences=function(e){return this.eventBase.getDeletedOccurrences(e)},i.prototype.getCurrentViewEvents=function(){return this.eventsProcessed},i.prototype.refreshEvents=function(e){e===void 0&&(e=!0),e?(this.dragAndDropModule&&(this.dragAndDropModule.actionObj.action="",I([this.element],Vm)),this.crudModule.refreshDataManager()):(this.uiStateValues&&(this.uiStateValues.isPreventTimezone=!0),this.crudModule&&this.crudModule.refreshProcessedData(),this.uiStateValues&&(this.uiStateValues.isPreventTimezone=!1))},i.prototype.refreshTemplates=function(e){switch(e?this.resetTemplates([e]):this.resetTemplates(),e){case"eventTemplate":this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),this.refreshEvents(!1);break;case"dateHeaderTemplate":this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),this.activeView.refreshHeader();break;case"dateRangeTemplate":this.dateRangeTemplateFn=this.templateParser(this.activeViewOptions.dateRangeTemplate),this.headerModule&&this.headerModule.refresh();break;case"resourceHeaderTemplate":this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),this.activeView.isTimelineView()?this.activeView.refreshResourceHeader():this.activeView.refreshHeader();break;case"quickInfoTemplates":this.quickPopup&&(this.quickPopup.destroy(),this.quickPopup=null),this.quickPopup=new fg(this),this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header),this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content),this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer);break;case"editorTemplate":this.destroyEditorWindow(),this.editorTemplateFn=this.templateParser(this.editorTemplate);break;case"editorHeaderTemplate":this.destroyEditorWindow(),this.editorHeaderTemplateFn=this.templateParser(this.editorHeaderTemplate);break;case"editorFooterTemplate":this.destroyEditorWindow(),this.editorFooterTemplateFn=this.templateParser(this.editorFooterTemplate);break;case"tooltipTemplate":case"headerTooltipTemplate":this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),this.eventTooltip=new Xu(this),this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate),this.headerTooltipTemplateFn=this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);break;default:this.initializeView(this.currentView);break}},i.prototype.refreshLayout=function(){this.onScheduleResize(),this.headerModule&&this.headerModule.refresh(),this.eventWindow&&this.eventWindow.refresh()},i.prototype.getEventDetails=function(e){e=yn(e);var t=e.getAttribute("data-guid");return t?this.eventBase.getEventByGuid(t):{}},i.prototype.isSlotAvailable=function(e,t,r){var s=this,a,o,l=this.activeEventData.event;if(e instanceof Date||typeof e=="string"?(a=e,o=t):(l=e,a=e[this.eventFields.startTime],o=e[this.eventFields.endTime],this.resourceBase&&(r=this.eventBase.getGroupIndexFromEvent(e))),d(a)||d(o))return!0;a=this.getDateTime(a),o=this.getDateTime(o);var h=this.eventBase.filterEvents(a,o);return!d(r)&&this.resourceBase&&this.resourceBase.lastResourceLevel.length>0&&(h=this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[parseInt(r.toString(),10)],h)),l&&(l.Guid?h=h.filter(function(c){return c.Guid!==l.Guid}):h=h.filter(function(c){return c[s.eventFields.id]!==l[s.eventFields.id]})),!(h.length>0)},i.prototype.copy=function(e){this.processCutCopyActions(e,!1)},i.prototype.cut=function(e){this.processCutCopyActions(e,!0)},i.prototype.paste=function(e){var t=this;if(!(!this.allowClipboard||!this.allowKeyboardInteraction||!e)&&!(!e.classList.contains("e-work-cells")&&!e.classList.contains("e-all-day-cells"))){if(!this.activeCellsData){var r=this.getCellDetails([e]);r&&(this.activeCellsData=r)}var s=new DataTransfer;d(navigator.clipboard)||navigator.clipboard.readText().then(function(a){s.setData("text/plain",a);var o=new ClipboardEvent("paste",{bubbles:!0,cancelable:!0});Object.defineProperty(o,"clipboardData",{value:s}),t.keyboardInteractionModule.pasteHandler(o,e)}).catch(function(a){throw a})}},i.prototype.processCutCopyActions=function(e,t){var r=this;if(!(!e||!this.allowClipboard||!this.allowKeyboardInteraction)){var s=e,a=[];s.forEach(function(o){if(o.classList.contains(he)){var l=r.getEventDetails(o);l&&a.push(l)}}),a.length>0&&this.keyboardInteractionModule.processClipboardAction(t,a)}},i.prototype.openEditor=function(e,t,r,s){t==="Add"&&!r?(e.startTime=this.getDateTime(e.startTime),e.endTime=this.getDateTime(e.endTime),d(e.element)||(e.element=yn(e.element))):(e[this.eventFields.startTime]=this.getDateTime(e[this.eventFields.startTime]),e[this.eventFields.endTime]=this.getDateTime(e[this.eventFields.endTime])),this.currentAction=t,t!=="Add"&&(this.activeEventData.event=e),this.eventWindow.openEditor(e,t,r,s)},i.prototype.closeEditor=function(){this.eventWindow&&this.eventWindow.dialogClose()},i.prototype.openQuickInfoPopup=function(e){var t=this;if(!(this.currentView==="Year"||d(e)))if(d(e[this.eventFields.id])){if(this.currentView==="Agenda"||this.currentView==="MonthAgenda"||d(this.activeView))return;var r={startTime:this.activeCellsData.startTime=this.getDateTime(e[this.eventFields.startTime]),endTime:this.activeCellsData.endTime=this.getDateTime(e[this.eventFields.endTime]),isAllDay:this.activeCellsData.isAllDay=d(e[this.eventFields.isAllDay])?!1:e[this.eventFields.isAllDay]},s=this.activeView.getAdjustedDate(new Date(r.startTime));if(s){var a="."+se+'[data-date="'+s.getTime()+'"]';this.activeViewOptions.group.resources.length>0&&!this.uiStateValues.isGroupAdaptive&&this.resourceBase&&this.eventBase&&(r.groupIndex=this.eventBase.getGroupIndexFromEvent(e),a="."+se+'[data-date="'+s.getTime()+'"][data-group-index="'+r.groupIndex+'"]');var o=this.element.querySelector(a);o&&(o.focus(),r.element=o,this.notify(Ir,r))}}else{var l=this.getCurrentViewEvents().filter(function(p){return e[t.eventFields.id]===p[t.eventFields.id]});if(l.length<=0)return;var h=l[0];if(e[this.eventFields.recurrenceRule]){var c=l.filter(function(p){return p[t.eventFields.startTime].getTime()===e[t.eventFields.startTime].getTime()});c.length>0&&(h=c[0])}var u=this.element.querySelector('div[data-guid="'+h.Guid+'"]');u&&(this.eventBase.removeSelectedAppointmentClass(),this.eventBase.addSelectedAppointments([u],!1),this.activeEventData={event:h,element:u},(this.currentView==="Agenda"||this.currentView==="MonthAgenda")&&T([this.activeEventData.element],Xl),this.notify(On,this.activeEventData))}},i.prototype.closeQuickInfoPopup=function(){this.quickPopup&&this.quickPopup.quickPopupHide(!0)},i.prototype.openOverlapAlert=function(e){var t=this;if(this.prerenderDialogs&&this.quickPopup){var r={type:"OverlapAlert",cancel:!1,element:this.quickPopup.quickDialog.element,data:e.data,overlapEvents:e.overlapEvents};this.trigger(Ua,r,function(s){s.cancel||t.quickPopup.openValidationError("overlapAlert",e.data)})}},i.prototype.closeOverlapAlert=function(){var e=this;if(this.prerenderDialogs&&this.quickPopup){var t={type:"OverlapAlert",cancel:!1,data:this.activeEventData.event,element:this.quickPopup.quickDialog.element};this.trigger(jl,t,function(r){r.cancel||e.quickPopup.quickDialog.hide()})}},i.prototype.closeTooltip=function(){this.eventTooltip&&this.eventTooltip.close()},i.prototype.getDateRangeText=function(e){return d(e)&&e.length===0||!this.activeView?"":this.activeView.getDateRangeText(e[0],e)},i.prototype.getViewDates=function(e){if(e===void 0&&(e="Current"),!this.activeView)return[];switch(e){case"Previous":case"Next":return this.activeView.getRenderDates(void 0,this.activeView.getNextPreviousDate(e));case"Current":return this.getCurrentViewDates()}},i.prototype.selectResourceByIndex=function(e){this.resourceBase&&this.uiStateValues.isGroupAdaptive&&this.resourceBase.selectResourceByIndex(e)},i.prototype.getIndexFromResourceId=function(e,t){return this.resourceBase?this.resourceBase.getIndexFromResourceId(e,t):null},i.prototype.addResource=function(e,t,r){this.resourceBase.addResource(e,t,r)},i.prototype.removeResource=function(e,t){this.resourceBase.removeResource(e,t)},i.prototype.destroy=function(){this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),this.destroyPopups(),this.hideSpinner(),this.unWireEvents(),this.destroyHeaderModule(),this.eventBase&&(this.eventBase.destroy(),this.eventBase=null),this.workCellAction&&(this.workCellAction.destroy(),this.workCellAction=null),this.inlineModule&&(this.inlineModule.destroy(),this.inlineModule=null),this.keyboardInteractionModule&&(this.keyboardInteractionModule.destroy(),this.keyboardInteractionModule=null),this.scrollModule&&(this.scrollModule.destroy(),this.scrollModule=null),this.printModule&&this.printModule.destroy(),this.activeView&&(this.resetTemplates(),this.activeView.removeEventListener(),this.activeView.destroy(),this.activeView=null),this.scheduleTouchModule&&(this.scheduleTouchModule.destroy(),this.scheduleTouchModule=null),this.crudModule&&(this.crudModule.destroy(),this.crudModule=null),this.dataModule&&(this.dataModule.destroy(),this.dataModule=null),n.prototype.destroy.call(this);for(var e=["dayModule","weekModule","workWeekModule","monthModule","monthAgendaModule","yearModule","agendaModule","timelineViewsModule","timelineMonthModule","timelineYearModule","resizeModule","dragAndDropModule","excelExportModule","printModule","iCalendarExportModule","iCalendarImportModule","tzModule","eventsData","eventsProcessed","blockData","blockProcessed","uiStateValues","viewCollections","viewOptions","defaultLocale","localeObj","selectedElements","resourceCollection","editorTitles","eventFields","activeViewOptions","activeEventData","activeCellsData","renderModule"],t=0,r=e;t<r.length;t++){var s=r[t];this[""+s]=null}rr(this.element);var a=[Bu,Lc,Rn,Vc];this.cssClass&&(a=a.concat(this.cssClass.split(" "))),I([this.element],a)},G([S("auto")],i.prototype,"width",void 0),G([S("auto")],i.prototype,"height",void 0),G([S(!0)],i.prototype,"showHeaderBar",void 0),G([S(!0)],i.prototype,"showTimeIndicator",void 0),G([S(!0)],i.prototype,"allowSwiping",void 0),G([S(!0)],i.prototype,"allowOverlap",void 0),G([S(3)],i.prototype,"overscanCount",void 0),G([ol([],jL)],i.prototype,"toolbarItems",void 0),G([S("Week")],i.prototype,"currentView",void 0),G([S(["Day","Week","WorkWeek","Month","Agenda"])],i.prototype,"views",void 0),G([S(new Date)],i.prototype,"selectedDate",void 0),G([S(new Date(1900,0,1))],i.prototype,"minDate",void 0),G([S(new Date(2099,11,31))],i.prototype,"maxDate",void 0),G([S()],i.prototype,"dateFormat",void 0),G([S("Gregorian")],i.prototype,"calendarMode",void 0),G([S(!0)],i.prototype,"showWeekend",void 0),G([S(0)],i.prototype,"firstDayOfWeek",void 0),G([S("FirstDay")],i.prototype,"weekRule",void 0),G([S([1,2,3,4,5])],i.prototype,"workDays",void 0),G([S(12)],i.prototype,"monthsCount",void 0),G([S("00:00")],i.prototype,"startHour",void 0),G([S("24:00")],i.prototype,"endHour",void 0),G([S(null)],i.prototype,"timeFormat",void 0),G([S(!0)],i.prototype,"enableHtmlSanitizer",void 0),G([S(!1)],i.prototype,"enableAllDayScroll",void 0),G([S(!1)],i.prototype,"enableAdaptiveUI",void 0),G([S(!0)],i.prototype,"allowResizing",void 0),G([st({},TL)],i.prototype,"workHours",void 0),G([st({},AL)],i.prototype,"timeScale",void 0),G([S(!0)],i.prototype,"allowKeyboardInteraction",void 0),G([S(!0)],i.prototype,"allowDragAndDrop",void 0),G([S()],i.prototype,"dateHeaderTemplate",void 0),G([S()],i.prototype,"dateRangeTemplate",void 0),G([S()],i.prototype,"cellHeaderTemplate",void 0),G([S()],i.prototype,"dayHeaderTemplate",void 0),G([S()],i.prototype,"monthHeaderTemplate",void 0),G([S()],i.prototype,"cellTemplate",void 0),G([S(!1)],i.prototype,"readonly",void 0),G([S(!0)],i.prototype,"showQuickInfo",void 0),G([S(!0)],i.prototype,"prerenderDialogs",void 0),G([S(!1)],i.prototype,"allowInline",void 0),G([S(!0)],i.prototype,"allowMultiCellSelection",void 0),G([S(!0)],i.prototype,"allowMultiRowSelection",void 0),G([S(!1)],i.prototype,"quickInfoOnSelectionEnd",void 0),G([S(!1)],i.prototype,"showWeekNumber",void 0),G([S(!1)],i.prototype,"rowAutoHeight",void 0),G([S(!1)],i.prototype,"allowMultiDrag",void 0),G([S(0)],i.prototype,"firstMonthOfYear",void 0),G([S()],i.prototype,"editorTemplate",void 0),G([S()],i.prototype,"editorHeaderTemplate",void 0),G([S()],i.prototype,"editorFooterTemplate",void 0),G([st({},kL)],i.prototype,"quickInfoTemplates",void 0),G([S(7)],i.prototype,"agendaDaysCount",void 0),G([S(!0)],i.prototype,"hideEmptyAgendaDays",void 0),G([S(!0)],i.prototype,"enableRecurrenceValidation",void 0),G([S()],i.prototype,"timezone",void 0),G([st({},HL)],i.prototype,"eventSettings",void 0),G([S(qb)],i.prototype,"timezoneDataSource",void 0),G([S()],i.prototype,"resourceHeaderTemplate",void 0),G([S()],i.prototype,"headerIndentTemplate",void 0),G([st({},FL)],i.prototype,"group",void 0),G([ol([],_L)],i.prototype,"resources",void 0),G([ol([],ML)],i.prototype,"headerRows",void 0),G([S()],i.prototype,"cssClass",void 0),G([S(!1)],i.prototype,"allowClipboard",void 0),G([S()],i.prototype,"eventDragArea",void 0),G([_()],i.prototype,"created",void 0),G([_()],i.prototype,"destroyed",void 0),G([_()],i.prototype,"cellClick",void 0),G([_()],i.prototype,"cellDoubleClick",void 0),G([_()],i.prototype,"moreEventsClick",void 0),G([_()],i.prototype,"hover",void 0),G([_()],i.prototype,"select",void 0),G([_()],i.prototype,"actionBegin",void 0),G([_()],i.prototype,"actionComplete",void 0),G([_()],i.prototype,"actionFailure",void 0),G([_()],i.prototype,"navigating",void 0),G([_()],i.prototype,"renderCell",void 0),G([_()],i.prototype,"eventClick",void 0),G([_()],i.prototype,"eventDoubleClick",void 0),G([_()],i.prototype,"eventRendered",void 0),G([_()],i.prototype,"dataBinding",void 0),G([_()],i.prototype,"popupOpen",void 0),G([_()],i.prototype,"popupClose",void 0),G([_()],i.prototype,"dragStart",void 0),G([_()],i.prototype,"drag",void 0),G([_()],i.prototype,"dragStop",void 0),G([_()],i.prototype,"resizeStart",void 0),G([_()],i.prototype,"resizing",void 0),G([_()],i.prototype,"resizeStop",void 0),G([_()],i.prototype,"virtualScrollStart",void 0),G([_()],i.prototype,"virtualScrollStop",void 0),G([_()],i.prototype,"dataBound",void 0),G([_()],i.prototype,"beforePaste",void 0),G([_()],i.prototype,"beforePrint",void 0),G([_()],i.prototype,"excelExport",void 0),G([_()],i.prototype,"tooltipOpen",void 0),i=G([Ft],i),i}(_i),Ep=function(){function n(i){this.previousNextAction="Next",this.skipPersistenceSave=!1,this.isScrolledBottom=!1,this.parent=i}return n.prototype.isTimelineView=function(){return this.parent.currentView.indexOf("Timeline")!==-1},n.prototype.getContentRows=function(){return[]},n.prototype.refreshHeader=function(){},n.prototype.refreshResourceHeader=function(){var i=this.element.querySelector("."+Ga),e=Array.from(i.querySelectorAll("."+ti));e.forEach(function(l){var h=Array.from(l.children);h.forEach(function(c){!c.classList.contains(ks)&&!c.classList.contains($i)&&ve(c)})});var t=this.parent.resourceBase.renderedResources;if(!d(t)&&t.length>0)for(var r=0;r<e.length;r++){var s=e[parseInt(r.toString(),10)],a=t[parseInt(r.toString(),10)];if(this.parent.activeView&&!d(s)&&!d(a)&&parseInt(s.getAttribute("data-group-index"),10)===a.groupIndex){this.parent.activeView.setResourceHeaderContent(s,a,vl);var o={element:s,elementType:"resourceHeader",groupIndex:a.groupIndex};this.parent.trigger(di,o)}}this.parent.renderTemplates(),this.parent.notify(si,{})},n.prototype.getDayName=function(i){return this.parent.getDayNames("abbreviated")[i.getDay()]},n.prototype.getDate=function(i){return this.parent.globalize.formatDate(i,{format:"d",calendar:this.parent.getCalendarMode()})},n.prototype.getTime=function(i){return this.parent.isAdaptive?this.parent.activeViewOptions.timeFormat==="HH:mm"||this.parent.activeViewOptions.timeFormat==="HH.mm"?this.parent.globalize.formatDate(i,{format:"H",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(i,{skeleton:"h",calendar:this.parent.getCalendarMode()}):this.parent.getTimeString(i)},n.prototype.getTimelineDate=function(i){var e=this.parent.globalize.formatDate(i,{skeleton:"MMMd",calendar:this.parent.getCalendarMode()})+", "+this.parent.getDayNames("wide")[i.getDay()];return Ne(e,"multiple")},n.prototype.createEventTable=function(i){var e=R("div",{className:Nn});return oe(this.getEventRows(i),e),e},n.prototype.getEventRows=function(i){for(var e=[],t,r=0;r<i;r++)t=R("div",{className:yh}),this.parent.resourceBase&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderedResources&&t.setAttribute("data-group-index",this.parent.resourceBase.renderedResources[parseInt(r.toString(),10)].groupIndex.toString()),e.push(t);return e},n.prototype.collapseRows=function(i){this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.parent.resourceBase.hideResourceRows(i.querySelector("tbody")),this.parent.resourceBase.hideResourceRows(i.querySelector("."+Nn)))},n.prototype.createTableLayout=function(i){var e=i||"",t=R("table",{className:Cb+" "+e}),r=R("tbody");return t.appendChild(r),t},n.prototype.setAriaAttributes=function(i){i.setAttribute("role","grid"),this.parent.currentView!=="Year"&&i.setAttribute("id",this.parent.element.id+"_table"),i.setAttribute("aria-label",this.getLabelText(this.parent.currentView))},n.prototype.createColGroup=function(i,e){if(!d(e)){var t=e.length;e[0]&&e[0].colSpan&&(t=e.map(function(a){return a.colSpan}).reduce(function(a,o){return a+o}));for(var r=R("colgroup"),s=0;s<t;s++)r.appendChild(R("col"));yt([r],i)}},n.prototype.getScrollXIndent=function(i){return i.offsetHeight-i.clientHeight>0?rp():0},n.prototype.scrollTopPanel=function(i){this.getDatesHeaderElement().firstElementChild.scrollLeft=i.scrollLeft},n.prototype.scrollHeaderLabels=function(i){for(var e=this.element.querySelector(".e-date-header-wrap table"),t=e.offsetWidth/e.querySelectorAll("colgroup col").length,r=function(f,v){for(var m,g=0,y=0,b=v?-i.scrollLeft:i.scrollLeft,E=0,w=f;E<w.length;E++){var A=w[E];if(y+=parseInt(A.getAttribute("colSpan"),10),y>Math.floor(b/t)){m=A;break}g+=A.offsetWidth}d(m)||(m.children[0].style[v?"right":"left"]=b-g+"px")},s=[".e-header-year-cell",".e-header-month-cell",".e-header-week-cell",".e-header-cells"],a=0,o=s;a<o.length;a++){var l=o[a],h=[].slice.call(this.element.querySelectorAll(l));if(h.length>0){for(var c=0,u=h;c<u.length;c++){var p=u[c];p.children[0].style[this.parent.enableRtl?"right":"left"]=""}r(h,this.parent.enableRtl)}}},n.prototype.addAttributes=function(i,e){i.template&&oe(i.template,e),i.colSpan&&e.setAttribute("colspan",i.colSpan.toString()),i.className&&T([e],i.className)},n.prototype.getHeaderBarHeight=function(){var i=getComputedStyle(this.parent.element),e=parseFloat(i.borderTopWidth)||1,t=parseFloat(i.borderBottomWidth)||1,r=Math.round(e+t),s=r;if(this.parent.headerModule&&(s+=Hu(this.parent.headerModule.getHeaderElement())),this.parent.uiStateValues.isGroupAdaptive){var a=this.parent.element.querySelector("."+xb);a&&(s+=Hu(a))}return s},n.prototype.renderPanel=function(i){i===_u?yt([this.element],this.parent.element.querySelector("."+Ei)):this.parent.element.querySelector("."+Ei).appendChild(this.element)},n.prototype.setPanel=function(i){this.element=i},n.prototype.getPanel=function(){return this.element},n.prototype.getDatesHeaderElement=function(){return this.element.querySelector("."+np)},n.prototype.getDateSlots=function(i,e){return[]},n.prototype.generateColumnLevels=function(){return[]},n.prototype.getColumnLevels=function(){return this.colLevels},n.prototype.highlightCurrentTime=function(){},n.prototype.getStartDate=function(){return this.renderDates[0]},n.prototype.getEndDate=function(){return this.renderDates[this.renderDates.length-1]},n.prototype.startDate=function(){return this.renderDates[0]},n.prototype.endDate=function(){return Z(this.renderDates[this.renderDates.length-1],1)},n.prototype.getStartHour=function(){var i=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);return d(i)&&(i=new Date(2e3,0,0,0)),i},n.prototype.getEndHour=function(){var i=this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);return d(i)&&(i=new Date(2e3,0,0,0)),i},n.prototype.isCurrentDate=function(i){return i.setHours(0,0,0,0)===new Date(this.parent.currentTimezoneDate).setHours(0,0,0,0)},n.prototype.isCurrentMonth=function(i){return this.parent.activeViewOptions.displayDate||this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeView.getStartDate().getTime()<=this.parent.getCurrentTime().getTime()&&this.parent.activeView.getEndDate().getTime()>=this.parent.getCurrentTime().getTime():i.getFullYear()===this.parent.getCurrentTime().getFullYear()&&i.getMonth()===this.parent.getCurrentTime().getMonth()},n.prototype.isWorkDay=function(i,e){return e===void 0&&(e=this.parent.activeViewOptions.workDays),!d(e)&&e.indexOf(i.getDay())>=0},n.prototype.isWorkHour=function(i,e,t,r){return d(e)||d(t)?!1:(e.setMilliseconds(0),t.setMilliseconds(0),W(i).getTime()!==W(e).getTime()&&(e=new Date(2e3,0,0,e.getHours(),e.getMinutes(),e.getMilliseconds()),t=new Date(2e3,0,0,t.getHours(),t.getMinutes(),t.getMilliseconds())),!(ts(i)<ts(e)||ts(i)>=ts(t)||!this.isWorkDay(i,r)))},n.prototype.getRenderDates=function(i,e){e===void 0&&(e=this.parent.selectedDate);var t=[];if(this.parent.currentView==="Week"||this.parent.currentView==="TimelineWeek")for(var r=W(e),s=Ni(r,this.parent.activeViewOptions.firstDayOfWeek),a=0,o=Si*this.parent.activeViewOptions.interval;a<o;a++)(this.parent.activeViewOptions.showWeekend||this.isWorkDay(s,i))&&t.push(s),s=Z(s,1);else if(this.parent.currentView==="WorkWeek"||this.parent.currentView==="TimelineWorkWeek")for(var s=Ni(W(e),this.parent.activeViewOptions.firstDayOfWeek),a=0,l=Si*this.parent.activeViewOptions.interval;a<l;a++)this.isWorkDay(s,i)&&t.push(s),s=Z(s,1);else{var h=this.parent.currentView==="Agenda"?this.parent.agendaDaysCount:this.parent.activeViewOptions.interval,s=W(e);do(this.parent.activeViewOptions.showWeekend||this.isWorkDay(s,i))&&t.push(s),s=Z(s,1);while(h!==t.length)}return i||(this.renderDates=t),this.parent.headerModule&&this.parent.headerModule.previousNextIconHandler(),t},n.prototype.getNextPreviousDate=function(i){if(this.previousNextAction=i,this.parent.currentView==="Day"||this.parent.currentView==="TimelineDay")if(this.parent.activeViewOptions.showWeekend){var e=this.parent.activeViewOptions.interval;return Z(this.parent.selectedDate,i==="Next"?e:-e)}else{var t=void 0;if(i==="Next")for(t=Z(this.renderDates.slice(-1)[0],1);!this.isWorkDay(t);)t=Z(t,1);else{t=Z(this.renderDates[0],-1);var r=0;do this.isWorkDay(t)&&(r+=1),this.parent.activeViewOptions.interval!==r&&(t=Z(t,-1));while(this.parent.activeViewOptions.interval!==r)}return t}var s=i==="Next"?Si:-7;return Z(this.parent.selectedDate,s*this.parent.activeViewOptions.interval)},n.prototype.formatViewLabel=function(i,e,t){var r={type:"date",skeleton:"full",calendar:this.parent.getCalendarMode()};return this.parent.localeObj.getConstant(i)+" "+this.parent.localeObj.getConstant("start")+" "+this.parent.globalize.formatDate(e,r)+" "+this.parent.localeObj.getConstant("endAt")+" "+this.parent.globalize.formatDate(t,r)},n.prototype.getLabelText=function(i){var e=i.charAt(0).toLowerCase()+i.substring(1);return i==="Year"||i==="TimelineYear"?this.formatViewLabel(e,this.parent.activeView.getStartDate(),this.parent.activeView.getEndDate()):this.renderDates.length>0?this.parent.currentView==="Day"||this.parent.currentView==="TimelineDay"?this.parent.localeObj.getConstant(e)+" of "+Ne(this.parent.globalize.formatDate(this.parent.selectedDate,{type:"date",skeleton:"full",calendar:this.parent.getCalendarMode()}),"single"):this.formatViewLabel(e,this.renderDates[0],this.renderDates[this.renderDates.length-1]):""},n.prototype.getDateRangeText=function(i,e){if(i===void 0&&(i=this.renderDates[0]),e===void 0&&(e=this.renderDates),this.parent.isAdaptive){var t=this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y";return Ne(this.parent.globalize.formatDate(this.parent.selectedDate,{format:t,calendar:this.parent.getCalendarMode()}),"single")}return this.formatDateRange(i,e[e.length-1])},n.prototype.formatDateRange=function(i,e){var t=this.parent.globalize,r=this.parent.getCalendarMode();if(i===e&&(e=null),!d(this.parent.activeViewOptions.dateFormat)){var s="";return e?(s=t.formatDate(i,{format:this.parent.activeViewOptions.dateFormat,calendar:r})+" - "+t.formatDate(e,{format:this.parent.activeViewOptions.dateFormat,calendar:r}),Ne(s,"multiple")):(s=t.formatDate(i,{format:this.parent.activeViewOptions.dateFormat,calendar:r}),Ne(s,"multiple"))}var a,o;if(d(this.parent.locale)||this.parent.locale==="en"||this.parent.locale==="en-US"?o=V("dateFormats.long",Lt(r)):o=V("main."+this.parent.locale+".dates.calendars."+r+".dateFormats.long",Vt),!e)return Ne(t.formatDate(i,{format:o,calendar:r}),"single");var l=o.trim().toLocaleLowerCase();return l.substr(0,1)==="d"?i.getFullYear()===e.getFullYear()?i.getMonth()===e.getMonth()?a=t.formatDate(i,{format:"dd",calendar:r})+" - "+t.formatDate(e,{format:"dd MMMM yyyy",calendar:r}):a=t.formatDate(i,{format:"dd MMM",calendar:r})+" - "+t.formatDate(e,{format:"dd MMM yyyy",calendar:r}):a=t.formatDate(i,{format:"dd MMM yyyy",calendar:r})+" - "+t.formatDate(e,{format:"dd MMM yyyy",calendar:r}):l.substr(0,1)==="m"?i.getFullYear()===e.getFullYear()?i.getMonth()===e.getMonth()?a=t.formatDate(i,{format:"MMMM dd",calendar:r})+" - "+t.formatDate(e,{format:"dd, yyyy",calendar:r}):a=t.formatDate(i,{format:"MMM dd",calendar:r})+" - "+t.formatDate(e,{format:"MMM dd, yyyy",calendar:r}):a=t.formatDate(i,{format:"MMM dd, yyyy",calendar:r})+" - "+t.formatDate(e,{format:"MMM dd, yyyy",calendar:r}):a=t.formatDate(i,{format:o,calendar:r})+" - "+t.formatDate(e,{format:o,calendar:r}),Ne(a,"multiple")},n.prototype.getMobileDateElement=function(i,e){var t=R("div",{className:e,innerHTML:'<div class="e-m-date">'+this.parent.globalize.formatDate(i,{format:"d",calendar:this.parent.getCalendarMode()})+'</div><div class="e-m-day">'+Ne(this.parent.globalize.formatDate(i,{format:"E",calendar:this.parent.getCalendarMode()}),"single")+"</div>"});return t},n.prototype.setResourceHeaderContent=function(i,e,t){if(t===void 0&&(t=Ot),this.parent.activeViewOptions.resourceHeaderTemplate){var r={resource:e.resource,resourceData:e.resourceData,date:e.date},s=this.parent.element.id+"_",a=this.parent.activeViewOptions.resourceHeaderTemplateName,o=s+a+"resourceHeaderTemplate",l=[].slice.call(this.parent.getResourceHeaderTemplate()(r,this.parent,"resourceHeaderTemplate",o,!1,void 0,void 0,this.parent.root));oe(l,i)}else{var h=R("div",{className:t});this.parent.sanitize(e.resourceData[e.resource.textField],h),i.appendChild(h)}},n.prototype.renderResourceMobileLayout=function(){this.parent.resourceBase.lastResourceLevel&&this.parent.resourceBase.lastResourceLevel.length<=0||(this.parent.resourceBase.renderResourceHeader(),this.parent.resourceBase.renderResourceTree())},n.prototype.addAutoHeightClass=function(i){!this.parent.uiStateValues.isGroupAdaptive&&this.parent.rowAutoHeight&&this.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&T([i],Pb)},n.prototype.getColElements=function(){return[].slice.call(this.element.querySelectorAll("."+Te+" col, ."+Hi+" col"))},n.prototype.setColWidth=function(i){if(this.isTimelineView()){var e=this.getColElements(),t=this.element.querySelector("."+$e+" tbody"),r=this.parent.getElementWidth(t)/(e.length/2);if(i.offsetHeight!==i.clientHeight){var s=this.parent.element.querySelector("."+Pi);!d(s)&&s.offsetHeight!==i.clientHeight&&de(s,{height:ce(i.clientHeight)})}var a="."+bt+",."+Yl+",."+oR+",."+lR+",."+hR,o=[].slice.call(this.element.querySelectorAll(a));o.forEach(function(l){var h=d(l.getAttribute("colspan"))?"1":l.getAttribute("colspan"),c=parseInt(h,10);de(l,{width:ce(r*c)})})}},n.prototype.resetColWidth=function(){for(var i=this.getColElements(),e=0,t=i;e<t.length;e++){var r=t[e];r.style.width=""}},n.prototype.getContentAreaElement=function(){return this.element.querySelector("."+Te)},n.prototype.wireExpandCollapseIconEvents=function(){if(this.parent.resourceBase&&this.parent.resourceBase.resourceCollection.length>1)for(var i=[].slice.call(this.element.querySelectorAll("."+wn)),e=0,t=i;e<t.length;e++){var r=t[e];C.clearEvents(r),C.add(r,"click",this.parent.resourceBase.onTreeIconClick,this.parent.resourceBase)}},n.prototype.scrollToDate=function(i){if(!(["Month","TimelineMonth"].indexOf(this.parent.currentView)===-1||d(i))){var e=this.getContentAreaElement(),t=new Date(W(new Date(+i)).getTime()).getTime(),r=e.querySelector("."+se+'[data-date="'+t+'"]');this.parent.currentView==="Month"&&r&&(e.scrollWidth>e.clientWidth&&(this.parent.enableRtl?e.scrollLeft=-(this.parent.getContentTable().offsetWidth-r.offsetLeft-r.offsetWidth):e.scrollLeft=r.offsetLeft),e.scrollTop=r.offsetTop),this.parent.currentView==="TimelineMonth"&&r&&(this.parent.enableRtl?e.scrollLeft=-(this.parent.getContentTable().offsetWidth-r.offsetLeft-r.offsetWidth):e.scrollLeft=r.offsetLeft)}},n.prototype.setPersistence=function(){if(this.parent.enablePersistence){var i=this.element.querySelector(".e-content-wrap");this.parent.virtualScrollModule&&this.isScrolledBottom&&(this.isScrolledBottom=!1,this.skipPersistenceSave=!0,i.scrollTop=this.parent.scrollTop,this.skipPersistenceSave=!1),d(i)||(this.parent.scrollLeft=i.scrollLeft,this.parent.scrollTop=i.scrollTop)}},n.prototype.retainScrollPosition=function(){if(this.parent.enablePersistence){var i=this.parent.element.querySelector(".e-content-wrap");!d(i)&&!d(this.parent.scrollLeft)&&!d(this.parent.scrollTop)&&(this.isScrolledBottom=i.scrollHeight-i.clientHeight<this.parent.scrollTop,i.scrollTop=this.parent.scrollTop,i.scrollLeft=this.parent.scrollLeft)}},n.prototype.getViewStartDate=function(){var i=this.renderDates[0];return this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.lastResourceLevel.length>0&&(i=this.parent.resourceBase.getResourceRenderDates()[0]),i},n.prototype.getViewEndDate=function(){var i=Z(this.renderDates[this.renderDates.length-1],1);return this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.lastResourceLevel.length>0&&(i=Z(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0],1)),i},n.prototype.getAdjustedDate=function(i){return!this.parent.activeViewOptions.timeScale.enable||this.parent.currentView==="Month"||this.parent.currentView==="TimelineYear"&&this.parent.activeViewOptions.group.resources.length===0?new Date(i.setHours(0,0,0,0)):this.parent.currentView==="TimelineYear"&&this.parent.activeViewOptions.group.resources.length>0?(i.setHours(0,0,0,0),new Date(i.setDate(1))):null},n.prototype.resetColLevels=function(){this.parent.resourceBase.expandedResources=[];for(var i=this.parent.virtualScrollModule.getRenderedCount(),e=this.parent.activeViewOptions.group.byDate?this.colLevels[0]:this.parent.resourceBase.renderedResources,t=0,r=0;r<e.length&&!(t>=i);r++)t+=e[parseInt(r.toString(),10)].colSpan,this.parent.resourceBase.expandedResources.push(e[parseInt(r.toString(),10)]);this.parent.activeViewOptions.group.byDate?(this.colLevels[0]=this.parent.resourceBase.expandedResources,this.parent.virtualScrollModule.setRenderedDates(this.parent.resourceBase.expandedResources)):(this.colLevels[this.colLevels.length-2]=this.parent.resourceBase.expandedResources,this.parent.resourceBase.renderedResources=this.parent.resourceBase.expandedResources),this.parent.currentView!=="Month"&&(this.colLevels[this.colLevels.length-1]=this.colLevels[this.colLevels.length-1].slice(0,t),this.parent.resourceBase.expandedResources=this.colLevels[this.colLevels.length-1])},n.prototype.getCollection=function(i){return this.parent.virtualScrollModule&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(i||this.parent.virtualScrollModule.existingDataCollection.length>0)?d(i)?this.parent.virtualScrollModule.existingDataCollection:i:[]},n.prototype.getGroupIndices=function(i){return this.getCollection(i).map(function(e){return e.groupIndex})},n.prototype.getRenderedDate=function(i){var e=[];return this.getCollection(i).forEach(function(t){var r=t.date.getTime();e.indexOf(r)===-1&&e.push(r)}),e},n.prototype.destroy=function(){this.element&&this.element.parentNode&&ve(this.element),this.element=null,this.renderDates=null,this.colLevels=null},n}(),GL=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Cp=function(n){GL(i,n);function i(e){var t=n.call(this,e)||this;return t.viewClass="e-day-view",t.isInverseTableSelect=!0,t.baseCssClass="e-vertical-view",t.appointment=null,t}return i.prototype.getModuleName=function(){return"verticalView"},i.prototype.addEventListener=function(){this.parent.on(Wi,this.scrollUiUpdate,this),this.parent.on(Fi,this.renderEvents,this)},i.prototype.removeEventListener=function(){this.parent&&(this.parent.off(Wi,this.scrollUiUpdate),this.parent.off(Fi,this.renderEvents))},i.prototype.renderEvents=function(){this.appointment=this.parent.activeViewOptions.timeScale.enable?new Zb(this.parent):new Eh(this.parent),this.appointment.renderAppointments(),this.parent.notify(ip,{})},i.prototype.onContentScroll=function(e){this.parent.removeNewEventElement();var t=e.target;this.parent.notify(Ul,e),this.scrollLeftPanel(t),this.scrollTopPanel(t),this.parent.isAdaptive||(this.parent.uiStateValues.top=t.scrollTop),this.parent.uiStateValues.left=t.scrollLeft,!d(this.parent.quickPopup)&&!this.parent.uiStateValues.isTapHold&&this.parent.quickPopup.quickPopupHide(),this.setPersistence()},i.prototype.onAdaptiveMove=function(e){this.parent.uiStateValues.action&&e.preventDefault()},i.prototype.onAdaptiveScroll=function(e){this.parent&&!this.parent.isDestroyed&&(this.parent.removeNewEventElement(),this.parent.uiStateValues.top=e.target.scrollTop)},i.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();d(t)||(t.scrollTop=e.scrollTop)},i.prototype.scrollUiUpdate=function(e){if(this.parent){var t=this.parent.element.querySelector("."+Hi),r=this.getHeaderBarHeight(),s=this.getLeftPanelElement(),a=this.getScrollableElement(),o=this.getDatesHeaderElement(),l=this.parent.element.offsetHeight-r-o.offsetHeight;this.setContentHeight(a,s,l),this.setColWidth(a);var h=rp();o.firstElementChild.style[e.cssProperties.rtlBorder]="",o.style[e.cssProperties.rtlPadding]="";var c=this.parent.enableAllDayScroll?!(a.offsetWidth-a.clientWidth<=t.offsetWidth-t.clientWidth&&t.classList.contains("e-all-day-scroll")):!0;a.offsetWidth-a.clientWidth>0&&c?(o.firstElementChild.style[e.cssProperties.border]=h>0?"1px":"0px",o.style[e.cssProperties.padding]=h>0?h-1+"px":"0px"):(o.firstElementChild.style[e.cssProperties.border]="",o.style[e.cssProperties.padding]=""),e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.parent.currentView.indexOf("Timeline")>-1&&(a.scrollTop=this.parent.uiStateValues.top),this.scrollToWorkHour(),this.parent.uiStateValues.isInitial=!1):(s&&(s.scrollTop=this.parent.uiStateValues.top),a.scrollTop=this.parent.uiStateValues.top,a.scrollLeft=this.parent.uiStateValues.left)),this.parent.activeViewOptions.timeScale.enable&&this.highlightCurrentTime(),this.retainScrollPosition(),!d(s)&&!d(a)&&s.scrollTop!==a.scrollTop&&(s.scrollTop=a.scrollTop)}},i.prototype.setContentHeight=function(e,t,r){this.parent.isAdaptive&&!this.isTimelineView()?e.style.height=this.parent.height==="auto"?"auto":ce(r):(d(t)||(t.style.height=this.parent.height==="auto"?"auto":ce(r-this.getScrollXIndent(e))),e.style.height=this.parent.height==="auto"?"auto":ce(r))},i.prototype.scrollToWorkHour=function(){if(this.parent.workHours.highlight){var e=this.element.querySelector("."+Cn);e&&(this.getScrollableElement().scrollTop=e.offsetTop,this.parent.uiStateValues.top=e.offsetTop,this.parent.uiStateValues.left=0)}},i.prototype.scrollToHour=function(e,t){var r=this.parent.getStartEndTime(e);if(!d(t)){var s=this.element.querySelector("."+bt+'[data-date="'+new Date(W(t)).getTime()+'"]');if(s)if(this.parent.enableRtl){var a=this.element.querySelector("."+$e);this.getScrollableElement().scrollLeft=-(a.offsetWidth-s.offsetLeft-s.offsetWidth)}else this.getScrollableElement().scrollLeft=s.offsetLeft}d(r)||(this.getScrollableElement().scrollTop=this.getTopFromDateTime(r))},i.prototype.scrollToDate=function(e){this.scrollToHour(null,e)},i.prototype.generateColumnLevels=function(){var e=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays),t=[];if(this.parent.activeViewOptions.group.resources.length>0){if(t=this.parent.resourceBase.generateResourceLevels(e),this.parent.activeViewOptions.group.hideNonWorkingDays)for(;t[0].length===0;)this.parent.setProperties({selectedDate:this.parent.activeView.getNextPreviousDate(this.previousNextAction)},!0),this.parent.activeView.getRenderDates(),this.parent.headerModule&&(this.parent.headerModule.setCalendarDate(this.parent.selectedDate),this.parent.headerModule.updateDateRange()),e=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays),t=this.parent.resourceBase.generateResourceLevels(e);if(this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0){var r=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex],s=r.resourceData[r.resource.startHourField],a=r.resourceData[r.resource.endHourField],o=this.getDateSlots(r.renderDates,r.workDays,s,a);t=[o]}}else t.push(e);return this.colLevels=t,t},i.prototype.getDateSlots=function(e,t,r,s){r===void 0&&(r=this.parent.workHours.start),s===void 0&&(s=this.parent.workHours.end);for(var a=[],o=this.parent.getStartEndTime(r),l=this.parent.getStartEndTime(s),h=0,c=e;h<c.length;h++){var u=c[h],p=[bt];this.isCurrentDate(u)&&p.push(wb),a.push({date:u,type:"dateHeader",className:p,colSpan:1,workDays:t,startHour:new Date(+o),endHour:new Date(+l)})}return a},i.prototype.isWorkHourRange=function(e){return this.getStartHour().getTime()<=e.getTime()&&this.getEndHour().getTime()>=e.getTime()},i.prototype.highlightCurrentTime=function(){var e=this;if(!(this.parent.activeViewOptions.headerRows.length>0&&this.parent.activeViewOptions.headerRows.slice(-1)[0].option!=="Hour")){var t=this.parent.getCurrentTime();if(this.parent.showTimeIndicator&&this.isWorkHourRange(t)){var r=this.getCurrentTimeIndicatorIndex();if(r.length>0&&!d(this.element.querySelector("."+se))){if(this.changeCurrentTimePosition(),d(this.currentTimeIndicatorTimer)){var s=at-(t.getSeconds()*1e3+t.getMilliseconds());s<=at-1e3&&window.setTimeout(function(){d(e.currentTimeIndicatorTimer)||(e.clearCurrentTimeIndicatorTimer(),e.changeCurrentTimePosition(),e.updateCurrentTimeIndicatorTimer())},s),this.updateCurrentTimeIndicatorTimer()}}else this.clearCurrentTimeIndicatorTimer()}else this.clearCurrentTimeIndicatorTimer()}},i.prototype.getCurrentTimeIndicatorIndex=function(){var e=[];if(!d(this.parent.resourceBase)&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var t=0,r=W(this.parent.getCurrentTime());if(this.parent.virtualScrollModule&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.activeViewOptions.group.byDate)for(var s=0,a=this.parent.resourceBase.expandedResources;s<a.length;s++){var o=a[s];W(o.date).getTime()===r.getTime()&&e.push(t),t+=1}else for(var l=0,h=this.parent.resourceBase.renderedResources;l<h.length;l++){var o=h[l],c=this.parent.getIndexOfDate(o.renderDates,r);if(c>=0){var u=this.parent.activeViewOptions.group.byDate?this.parent.resourceBase.lastResourceLevel.length*c+t:t+c;e.push(u)}t+=this.parent.activeViewOptions.group.byDate?1:o.renderDates.length}}else{var p=this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0?this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates:this.renderDates,c=this.parent.getIndexOfDate(p,W(this.parent.getCurrentTime()));c>=0&&e.push(c)}return e},i.prototype.clearCurrentTimeIndicatorTimer=function(){d(this.currentTimeIndicatorTimer)||(window.clearInterval(this.currentTimeIndicatorTimer),this.currentTimeIndicatorTimer=null,this.removeCurrentTimeIndicatorElements())},i.prototype.updateCurrentTimeIndicatorTimer=function(){var e=this;this.currentTimeIndicatorTimer=window.setInterval(function(){e.changeCurrentTimePosition()},at)},i.prototype.removeCurrentTimeIndicatorElements=function(){for(var e="."+km+",."+Gl+",."+xm,t=[].slice.call(this.element.querySelectorAll(e)),r=0,s=t;r<s.length;r++){var a=s[r];ve(a)}},i.prototype.changeCurrentTimePosition=function(){if(!this.parent||this.parent&&this.parent.isDestroyed){this.parent=null;return}this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.parent.getContentTable().rows[0],r=this.getTopFromDateTime(this.parent.getCurrentTime()),s=ce(r),a=Math.floor(r/t.cells[0].offsetHeight),o=this.getLeftPanelElement(),l=[].slice.call(o.querySelectorAll("tr"));if(!(d(a)||isNaN(a)||a===l.length)){for(var h=[].slice.call(this.element.querySelectorAll("."+Db)),c=0,u=e[0];c<u;c++)h[parseInt(c.toString(),10)].appendChild(R("div",{className:km,styles:"top:"+s}));for(var p=0,f=e;p<f.length;p++){var v=f[p];h.length>v&&h[parseInt(v.toString(),10)].appendChild(R("div",{className:Gl,styles:"top:"+s}))}var m=R("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:xm,styles:"top:"+s});a<=l.length&&(I(o.querySelectorAll("."+Pc),Pc),l[parseInt(a.toString(),10)]&&T([l[parseInt(a.toString(),10)].lastElementChild],Pc),yt([m],o),m.style.top=ce(m.offsetTop-m.offsetHeight/2))}},i.prototype.getTopFromDateTime=function(e){var t=this.getStartEndHours(this.parent.activeViewOptions.startHour),r=this.getStartEndHours(this.parent.activeViewOptions.endHour),s=(e.getHours()-t.getHours())*60+(e.getMinutes()-t.getMinutes()),a=ei(W(new Date(e.getTime())),t,r),o=(a.endHour.getTime()-a.startHour.getTime())/at,l=this.parent.activeViewOptions.timeScale.interval,h=0;return t.getHours()===0&&t.getMinutes()===0&&r.getHours()===0&&r.getMinutes()===0?h=l:h=this.parent.activeViewOptions.timeScale.slotCount!==1?l:l>o?o:l,s*this.getWorkCellHeight()*this.parent.activeViewOptions.timeScale.slotCount/h},i.prototype.getWorkCellHeight=function(){return parseFloat(this.parent.getElementHeight(this.element.querySelector("."+se)).toFixed(2))},i.prototype.getTdContent=function(e,t,r){var s,a=R("div"),o="",l=this.parent.element.id+"_";switch(t){case"dateHeader":if(this.parent.activeViewOptions.dateHeaderTemplate){o="dateHeaderTemplate";var h={date:e,type:t,groupIndex:r},c=this.parent.activeViewOptions.dateHeaderTemplateName;s=[].slice.call(this.parent.getDateHeaderTemplate()(h,this.parent,o,l+c+o,!1,void 0,void 0,this.parent.root))}else a.innerHTML=this.parent.activeView.isTimelineView()?'<span class="e-header-date e-navigate">'+this.getTimelineDate(e)+"</span>":'<div class="e-header-day">'+Ne(this.getDayName(e),"single")+"</div>"+('<div class="e-header-date e-navigate" role="link">'+this.getDate(e)+"</div>"),s=[].slice.call(a.childNodes);break;case"majorSlot":if(this.parent.activeViewOptions.timeScale.majorSlotTemplate){o="majorSlotTemplate";var h={date:e,type:t};s=[].slice.call(this.parent.getMajorSlotTemplate()(h,this.parent,o,l+o,!1,void 0,void 0,this.parent.root))}else a.innerHTML="<span>"+this.getTime(e)+"</span>",s=[].slice.call(a.childNodes);break;case"minorSlot":if(this.parent.activeViewOptions.timeScale.minorSlotTemplate){o="minorSlotTemplate";var h={date:e,type:t};s=[].slice.call(this.parent.getMinorSlotTemplate()(h,this.parent,o,l+o,!1,void 0,void 0,this.parent.root))}else s=[].slice.call(a.childNodes);break;case"alldayCells":if(this.parent.activeViewOptions.cellTemplate){var c=this.parent.activeViewOptions.cellTemplateName;o="cellTemplate";var h={date:e,type:t,groupIndex:r};s=[].slice.call(this.parent.getCellTemplate()(h,this.parent,o,l+c+o,!1,void 0,void 0,this.parent.root))}break}return s},i.prototype.refreshHeader=function(){ve(this.element.querySelector("tbody tr")),this.renderHeader(),this.parent.notify(si,{});var e=this.element.querySelector("."+Hi);e&&(e.scrollLeft=this.parent.uiStateValues.left)},i.prototype.renderLayout=function(e){this.setPanel(R("div",{className:op}));var t=[this.baseCssClass,this.viewClass];t.push(e),this.parent.activeViewOptions.group.byDate&&t.push("e-by-date"),this.parent.activeViewOptions.timeScale.enable||T([this.element],[YR,this.viewClass]),this.parent.activeViewOptions.allowVirtualScrolling&&!this.parent.uiStateValues.isGroupAdaptive&&t.push(Vb),this.parent.rowAutoHeight&&this.parent.eventSettings.ignoreWhitespace&&t.push(Hb),this.renderPanel(e),T([this.element],t),this.element.appendChild(this.createTableLayout(lp)),this.element.querySelector("table").setAttribute("role","presentation"),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent(),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+ro)&&this.renderResourceMobileLayout(),this.parent.notify(si,{})},i.prototype.renderHeader=function(){var e=R("tr"),t=R("td");if(t.appendChild(this.renderDatesHeader()),this.parent.activeViewOptions.timeScale.enable){var r=R("td",{className:pR});r.appendChild(this.renderLeftIndent()),e.appendChild(r)}e.appendChild(t),yt([e],this.element.querySelector("tbody"))},i.prototype.renderContent=function(){this.parent.activeViewOptions.group.resources.length>0&&(this.parent.resourceBase.renderedResources=$([],this.parent.resourceBase.lastResourceLevel,null,!0));var e=R("tr"),t=R("td");if(this.parent.isAdaptive){t.setAttribute("colspan",this.parent.activeViewOptions.timeScale.enable?"2":"1");var r=R("div",{className:Im});this.parent.activeViewOptions.timeScale.enable&&r.appendChild(this.renderTimeCells()),r.appendChild(this.renderContentArea()),t.appendChild(r),C.add(r,"scroll",this.onAdaptiveScroll,this),C.add(r,H.touchMoveEvent,this.onAdaptiveMove,this),e.appendChild(t)}else{var s=this.colLevels.slice(0);this.parent.virtualScrollModule&&this.resetColLevels();var a=this.renderContentArea();if(t.appendChild(a),this.parent.activeViewOptions.timeScale.enable){var o=R("td");o.appendChild(this.renderTimeCells()),e.appendChild(o)}e.appendChild(t),this.parent.virtualScrollModule&&(this.colLevels=s,this.parent.virtualScrollModule.renderVirtualTrack(a))}this.element.querySelector("tbody").appendChild(e)},i.prototype.renderLeftIndent=function(){for(var e=R("div",{className:Tb}),t=this.createTableLayout(),r=R("tr"),s=this.colLevels.length,a,o=0;o<s;o++){var l=r.cloneNode(),h={className:[this.colLevels[parseInt(o.toString(),10)][0]&&this.colLevels[parseInt(o.toString(),10)][0].className[0]],type:"emptyCells"};if(this.parent.activeViewOptions.showWeekNumber&&h.className.indexOf(bt)!==-1){h.className.push(gh);var c=this.parent.getWeekNumberContent(this.renderDates);h.template=[R("span",{innerHTML:""+c,attrs:{title:this.parent.localeObj.getConstant("week")+" "+c}})]}a=this.createTd(h),this.parent.renderHeaderIndentTemplate(h,a),l.appendChild(a),t.querySelector("tbody").appendChild(l)}var u=r.cloneNode(),p=R("div",{attrs:{tabindex:"0",role:"button",title:this.parent.localeObj.getConstant("expandAllDaySection"),"aria-disabled":"false","aria-label":this.parent.localeObj.getConstant("expandAllDaySection")},className:$a+" "+ml+" "+qe+" "+Oe}),f={className:[Me],type:"emptyCells"};return a=this.createTd(f),a.appendChild(p),this.parent.renderHeaderIndentTemplate(f,a),u.appendChild(a),t.querySelector("tbody").appendChild(u),e.appendChild(t),e},i.prototype.renderDatesHeader=function(){var e=R("div",{className:np}),t=R("div",{className:Hi});e.appendChild(t);for(var r=this.createTableLayout(),s=R("tr",{className:hp}),a=this.colLevels.length,o=this.colLevels[a-1],l=0;l<a;l++){for(var h=s.cloneNode(),c=this.colLevels[parseInt(l.toString(),10)],u=0;u<c.length;u++)h.appendChild(this.createTd(c[parseInt(u.toString(),10)]));r.querySelector("tbody").appendChild(h)}return this.createAllDayRow(r,o),this.createColGroup(r,o),t.appendChild(r),e},i.prototype.createAllDayRow=function(e,t){for(var r=R("tr",{className:Wn}),s=0;s<t.length;s++){var a=$({},t[parseInt(s.toString(),10)]);a.className=[Me],a.type="alldayCells";var o=this.createTd(a);o.setAttribute("data-date",a.date.getTime().toString()),d(a.groupIndex)?this.parent.uiStateValues.isGroupAdaptive&&o.setAttribute("data-group-index",""+this.parent.uiStateValues.groupIndex):o.setAttribute("data-group-index",""+a.groupIndex),this.wireCellEvents(o),r.appendChild(o)}e.querySelector("tbody").appendChild(r);var l=R("thead");l.appendChild(this.parent.eventBase.createEventWrapper("allDay")),yt([l],e)},i.prototype.createTd=function(e){var t=R("td");if(this.addAttributes(e,t),e.date&&e.type){var r=this.getTdContent(e.date,e.type,e.groupIndex);r&&r.length&&oe(r,t)}this.parent.isMinMaxDate(W(new Date(""+e.date)))||T([t],Gu),e.type==="resourceHeader"&&this.setResourceHeaderContent(t,e),e.type==="dateHeader"&&e.className.indexOf(bt)>=0&&(t.setAttribute("data-date",e.date.getTime().toString()),d(e.groupIndex)||t.setAttribute("data-group-index",""+e.groupIndex),this.wireMouseEvents(t));var s={elementType:e.type,element:t,date:e.date,groupIndex:e.groupIndex};return this.parent.trigger(di,s),t},i.prototype.wireCellEvents=function(e){C.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),this.wireMouseEvents(e)},i.prototype.wireMouseEvents=function(e){C.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||C.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)},i.prototype.renderTimeCells=function(){var e=this,t=R("div",{className:Am}),r=this.createTableLayout(),s=R("tr"),a=function(o){o.type=o.first?"majorSlot":"minorSlot",o.className=o.last?[vR,Yl]:[Yl];var l=s.cloneNode(),h={date:o.date,type:o.type,className:o.className};return l.appendChild(e.createTd(h)),r.querySelector("tbody").appendChild(l),o};return this.getTimeSlotRows(a),t.appendChild(r),t},i.prototype.renderContentArea=function(){var e=R("div",{className:Te}),t=this.createTableLayout($e);return this.setAriaAttributes(t),this.addAutoHeightClass(t),this.renderContentTable(t),this.createColGroup(t,this.colLevels.slice(-1)[0]),e.appendChild(t),this.wireCellEvents(t.querySelector("tbody")),C.add(e,"scroll",this.onContentScroll,this),C.add(e,H.touchMoveEvent,this.onAdaptiveMove,this),e},i.prototype.renderContentTable=function(e){var t=e.querySelector("tbody");oe(this.getContentRows(),t),this.renderContentTableHeader(e)},i.prototype.getContentRows=function(){var e=this,t=[],r=R("tr"),s=R("td"),a=[];this.parent.virtualScrollModule&&this.parent.activeViewOptions.group.resources.length>0&&(a=this.parent.activeViewOptions.group.byDate?this.getRenderedDate():this.getGroupIndices());var o=function(l){for(var h=r.cloneNode(),c=0,u=e.colLevels[e.colLevels.length-1];c<u.length;c++){var p=u[c],f=!0;if(e.parent.virtualScrollModule&&e.parent.activeViewOptions.group.resources.length>0){var v=e.parent.activeViewOptions.group.byDate?p.date.getTime():p.groupIndex;f=a.indexOf(v)<0}if(f){var m=e.createContentTd(p,l,s);h.appendChild(m)}}return t.push(h),l};return this.getTimeSlotRows(o),t},i.prototype.createContentTd=function(e,t,r){var s=r.cloneNode();e.colSpan&&s.setAttribute("colspan",e.colSpan.toString());var a=this.getContentTdClass(t),o=W(e.date);this.parent.isMinMaxDate(o)||a.push(Gu),o=new Date(o.setHours(t.date.getHours(),t.date.getMinutes(),t.date.getSeconds(),t.date.getMilliseconds()));var l="workCells";if(e.className.indexOf(gr)!==-1&&(a.push(Ln),l="resourceGroupCells"),this.parent.workHours.highlight&&(this.parent.activeViewOptions.timeScale.enable&&this.isWorkHour(o,e.startHour,e.endHour,e.workDays)||!this.parent.activeViewOptions.timeScale.enable&&this.isWorkDay(o,e.workDays))&&a.push(Cn),T([s],a),this.parent.activeViewOptions.cellTemplate){var h={date:o,type:l,groupIndex:e.groupIndex},c=this.parent.element.id+"_",u=this.parent.activeViewOptions.cellTemplateName,p=c+u+"cellTemplate",f=[].slice.call(this.parent.getCellTemplate()(h,this.parent,"cellTemplate",p,!1,void 0,void 0,this.parent.root));oe(f,s)}s.setAttribute("data-date",o.getTime().toString());var v="full";if(this.parent.activeViewOptions.timeScale.enable){var g=this.parent.globalize.formatDate(o,{type:"dateTime",skeleton:v,calendar:this.parent.getCalendarMode()}),y=this.parent.globalize.formatDate(this.getEndDateFromStartDate(o),{type:"dateTime",skeleton:v,calendar:this.parent.getCalendarMode()});s.setAttribute("aria-label",g+" "+this.parent.localeObj.getConstant("endAt")+" "+y)}else{var m=this.parent.globalize.formatDate(e.date,{skeleton:v,calendar:this.parent.getCalendarMode()});s.setAttribute("aria-label",m)}if(!d(e.groupIndex)||this.parent.uiStateValues.isGroupAdaptive){var b=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:e.groupIndex;s.setAttribute("data-group-index",""+b)}var E={elementType:l,element:s,date:o,groupIndex:e.groupIndex};return this.parent.trigger(di,E),s},i.prototype.getContentTdClass=function(e){return e.last?[se]:[se,mR]},i.prototype.renderContentTableHeader=function(e){var t=R("thead");t.appendChild(this.parent.eventBase.createEventWrapper()),this.parent.activeViewOptions.timeScale.enable&&t.appendChild(this.parent.eventBase.createEventWrapper("timeIndicator")),yt([t],e)},i.prototype.getScrollableElement=function(){return this.parent.isAdaptive&&!this.isTimelineView()?this.element.querySelector("."+Im):this.getContentAreaElement()},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+Am)},i.prototype.getEndDateFromStartDate=function(e){var t=this.parent.activeViewOptions.timeScale.interval*at,r=t/this.parent.activeViewOptions.timeScale.slotCount,s=new Date(e.getTime());return s.setMilliseconds(s.getMilliseconds()+r),s},i.prototype.getStartEndHours=function(e){if(!d(e)&&e!==""){var t=new Date(2e3,0,0,0),r=e.split(":");return r.length===2&&t.setHours(parseInt(r[0],10),parseInt(r[1],10),0),t}return new Date(2e3,0,0,0)},i.prototype.getTimeSlotRows=function(e){var t=[],r=this.getStartEndHours(this.parent.activeViewOptions.startHour),s=this.getStartEndHours(this.parent.activeViewOptions.endHour),a=this.parent.activeViewOptions.timeScale.interval*at,o=a/this.parent.activeViewOptions.timeScale.slotCount,l=Math.round(it/o),h=r.getTime(),c=s.getTime();if(h!==c){var u=r.getTimezoneOffset()!==s.getTimezoneOffset()?c-h-36e5:c-h;l=Math.round(u/o)}this.parent.activeViewOptions.timeScale.enable||(l=1);for(var p=this.parent.getStartEndTime(this.parent.workHours.start),f=this.parent.getStartEndTime(this.parent.workHours.end),v=0;v<l;v++){var m=new Date(h+o*v);if(tR(m)||new Date(h).getTimezoneOffset()!==m.getTimezoneOffset()){var g=new Date(h).getTimezoneOffset()-m.getTimezoneOffset();m=new Date(m.getTime()-1e3*60*g)}var y=v%(a/o),b={date:new Date(""+m),startHour:p,endHour:f,first:y===0,middle:y<this.parent.activeViewOptions.timeScale.slotCount-1,last:y===this.parent.activeViewOptions.timeScale.slotCount-1,type:""};e&&e(b),t.push(b)}return t},i.prototype.getAdjustedDate=function(e){if(this.parent.activeViewOptions.timeScale.enable){for(var t=this.getTimeSlotRows(),r=new Date(new Date(t[0].date.getTime()).setHours(e.getHours(),e.getMinutes(),e.getMilliseconds())),s=0;s<t.length;s++)if(t[parseInt(s.toString(),10)].date.getTime()>r.getTime())return e.setHours(t[s-1].date.getHours(),t[s-1].date.getMinutes(),t[s-1].date.getMilliseconds()),new Date(e)}else return new Date(e.setHours(0,0,0,0));return null},i.prototype.destroy=function(){if(!this.parent||this.parent&&this.parent.isDestroyed){this.parent=null;return}if(this.clearCurrentTimeIndicatorTimer(),this.element){this.appointment&&(this.appointment.destroy(),this.appointment=null);var e=this.getContentAreaElement();e&&(C.remove(e,"scroll",this.onContentScroll),C.remove(e,H.touchMoveEvent,this.onAdaptiveMove)),this.parent.resourceBase&&this.parent.resourceBase.destroy(),this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues(),n.prototype.destroy.call(this)}},i}(Ep),$L=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),KL=function(n){$L(i,n);function i(e){var t=n.call(this,e)||this;return t.viewClass="e-day-view",t}return i.prototype.getModuleName=function(){return"day"},i}(Cp),QL=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),XL=function(n){QL(i,n);function i(e){var t=n.call(this,e)||this;return t.viewClass="e-week-view",t}return i.prototype.startDate=function(){return this.getViewStartDate()},i.prototype.endDate=function(){return this.getViewEndDate()},i.prototype.getModuleName=function(){return"week"},i}(Cp),ZL=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),JL=function(n){ZL(i,n);function i(e){var t=n.call(this,e)||this;return t.viewClass="e-work-week-view",t}return i.prototype.startDate=function(){return this.getViewStartDate()},i.prototype.endDate=function(){return this.getViewEndDate()},i.prototype.getModuleName=function(){return"workWeek"},i}(Cp),eV=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),tV=function(n){eV(i,n);function i(e){var t=n.call(this,e)||this;return t.dayNameFormat="wide",t.viewClass="e-month-view",t.isInverseTableSelect=!1,t.monthEvent=null,t.monthDates={},t}return i.prototype.addEventListener=function(){this.parent.on(Wi,this.onScrollUIUpdate,this),this.parent.on(Fi,this.onDataReady,this),this.parent.on(Ir,this.onCellClick,this)},i.prototype.removeEventListener=function(){this.parent&&(this.parent.off(Wi,this.onScrollUIUpdate),this.parent.off(Fi,this.onDataReady),this.parent.off(Ir,this.onCellClick))},i.prototype.onDataReady=function(e){this.monthEvent=new Eh(this.parent),this.monthEvent.renderAppointments(),this.parent.notify(ip,{})},i.prototype.onCellClick=function(e){},i.prototype.onContentScroll=function(e){this.skipPersistenceSave||(this.parent.removeNewEventElement(),this.parent.notify(Ul,e),this.scrollTopPanel(e.target),this.scrollLeftPanel(e.target),this.parent.uiStateValues.top=e.target.scrollTop,this.parent.uiStateValues.left=e.target.scrollLeft,this.setPersistence())},i.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();t&&(t.scrollTop=e.scrollTop)},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+$l)},i.prototype.onScrollUIUpdate=function(e){var t=this.getHeaderBarHeight(),r=this.getDatesHeaderElement(),s=this.getContentAreaElement(),a=this.parent.element.offsetHeight-t-r.offsetHeight,o=this.getLeftPanelElement();this.parent.height!=="auto"&&this.setContentHeight(s,o,a);var l=rp();if(r.firstElementChild.style[e.cssProperties.rtlBorder]="",r.style[e.cssProperties.rtlPadding]="",s.offsetWidth-s.clientWidth>0?(r.firstElementChild.style[e.cssProperties.border]=l>0?"1px":"0px",r.style[e.cssProperties.padding]=l>0?l-1+"px":"0px"):(r.firstElementChild.style[e.cssProperties.border]="",r.style[e.cssProperties.padding]=""),this.setColWidth(s),e.scrollPosition||!e.isPreventScrollUpdate&&this.parent.currentView==="TimelineMonth"){var h=this.parent.currentView==="TimelineMonth"?this.parent.uiStateValues.top:e.scrollPosition.top;o&&(o.scrollTop=h),s.scrollTop=h,this.parent.uiStateValues.isInitial?(this.scrollToSelectedDate(),this.parent.uiStateValues.isInitial=!1):s.scrollLeft=this.parent.currentView==="TimelineMonth"?this.parent.uiStateValues.left:e.scrollPosition.left}this.retainScrollPosition()},i.prototype.scrollToSelectedDate=function(){var e=new Date(this.parent.selectedDate);e.setHours(0,0,0,0);var t=this.element.querySelector("."+bt+'[data-date="'+e.getTime().toString()+'"]'),r=this.getContentAreaElement();d(t)?r.scrollLeft=0:r.scrollLeft=this.parent.enableRtl?-(this.parent.getContentTable().offsetWidth-t.offsetLeft-t.offsetWidth):t.offsetLeft,r.scrollLeft===0&&this.parent.uiStateValues.isInitial&&(this.parent.uiStateValues.left=0)},i.prototype.setContentHeight=function(e,t,r){e.style.height="auto",this.parent.currentView==="Month"&&(e.style.height=ce(r)),t&&(this.parent.currentView==="MonthAgenda"&&(r=this.parent.activeViewOptions.interval>1?this.getContentAreaElement().firstElementChild.offsetHeight:this.element.querySelector("."+$e).offsetHeight),t.style.height="auto",t.style.height=ce(r-this.getScrollXIndent(e)))},i.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);if(this.parent.activeViewOptions.group.resources.length>0){if(e=this.parent.resourceBase.generateResourceLevels(t),this.parent.currentView==="MonthAgenda"&&(e=[t]),this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0){var r=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex],s=this.getDateSlots(r.renderDates,r.workDays);if(this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.group.hideNonWorkingDays){var a=s.findIndex(function(o,l){return l!==0&&o.date.getDay()===s[0].date.getDay()});s=a>-1?s.slice(0,a):s}e=[s]}}else e.push(t);return this.colLevels=e,e},i.prototype.getDateSlots=function(e,t){for(var r=this.parent.activeViewOptions.showWeekend?Si:t.length,s=[],a=this.isCurrentMonth(this.parent.selectedDate),o=0;o<r;o++){var l=[bt],h=e.slice(0,r).map(function(c){return c.getDay()});a&&h.indexOf(this.parent.currentTimezoneDate.getDay())===o&&l.push(wb),s.push({date:e[parseInt(o.toString(),10)],type:"monthDay",className:l,colSpan:1,workDays:t})}return s},i.prototype.getDayNameFormat=function(){return this.parent.isAdaptive||this.parent.activeViewOptions.group.resources.length>0?"abbreviated":"wide"},i.prototype.renderLayout=function(e){this.dayNameFormat=this.getDayNameFormat(),this.setPanel(R("div",{className:op}));var t=[this.viewClass];t.push(e),this.parent.activeViewOptions.group.byDate&&(t.push("e-by-date"),this.parent.currentView!=="Month"&&(this.parent.activeViewOptions.group.hideNonWorkingDays=!1)),this.parent.activeViewOptions.allowVirtualScrolling&&!this.parent.uiStateValues.isGroupAdaptive&&t.push(Vb),this.parent.rowAutoHeight&&this.parent.eventSettings.ignoreWhitespace&&t.push(Hb),T([this.element],t),this.renderPanel(e),this.element.appendChild(this.createTableLayout(lp)),this.element.querySelector("table").setAttribute("role","presentation"),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent();var r=this.parent.currentView==="MonthAgenda"?this.parent.activeView.getPanel():this.parent.element;this.parent.uiStateValues.isGroupAdaptive&&!r.querySelector("."+ro)&&this.renderResourceMobileLayout(),this.parent.notify(si,{}),this.parent.uiStateValues.isCustomMonth&&(this.parent.uiStateValues.isCustomMonth=!1)},i.prototype.refreshHeader=function(){ve(this.element.querySelector("tbody tr")),this.renderHeader(),this.parent.notify(si,{});var e=this.element.querySelector("."+Hi),t=this.element.querySelector("."+Te);e&&(e.scrollLeft=this.parent.uiStateValues.left),t&&(t.scrollLeft=this.parent.uiStateValues.left)},i.prototype.wireCellEvents=function(e){C.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),C.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||C.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)},i.prototype.renderHeader=function(){var e=R("tr");this.renderLeftIndent(e);var t=R("td");t.appendChild(this.renderDatesHeader()),e.appendChild(t),yt([e],this.element.querySelector("tbody"))},i.prototype.renderLeftIndent=function(e){this.parent.activeViewOptions.showWeekNumber&&e.appendChild(R("td",{className:"e-left-indent"}))},i.prototype.renderContent=function(){this.parent.activeViewOptions.group.resources.length>0&&(this.parent.resourceBase.renderedResources=$([],this.parent.resourceBase.lastResourceLevel,null,!0));var e=R("tr");this.parent.activeViewOptions.showWeekNumber&&e.appendChild(this.renderWeekNumberContent());var t=R("td"),r=this.colLevels.slice(0);this.parent.virtualScrollModule&&this.resetColLevels();var s=R("div",{className:Te}),a=this.renderContentArea();if(this.parent.currentView==="Month")s.appendChild(a);else{var o=R("div",{className:Ei});o.appendChild(a),s.appendChild(o)}C.add(s,"scroll",this.onContentScroll,this),t.appendChild(s),e.appendChild(t),this.parent.virtualScrollModule&&(this.colLevels=r,this.parent.virtualScrollModule.renderVirtualTrack(s)),this.element.querySelector("tbody").appendChild(e),this.renderAppointmentContainer()},i.prototype.renderWeekNumberContent=function(){var e=this.renderDates.map(function(u){return new Date(+u)}),t=R("td"),r=R("div",{className:$l});t.appendChild(r);var s=this.createTableLayout();r.appendChild(s);for(var a=this.parent.activeViewOptions.showWeekend?Si:this.parent.activeViewOptions.workDays.length,o=0,l=this.renderDates.length/a;o<l;o++){var h=e.splice(0,a),c=this.parent.getWeekNumberContent(h);s.querySelector("tbody").appendChild(this.createWeekNumberElement(c))}return t},i.prototype.renderAppointmentContainer=function(){},i.prototype.renderDatesHeader=function(){var e=R("div",{className:np}),t=R("div",{className:Hi});e.appendChild(t);var r=this.createTableLayout();if(this.parent.currentView==="Month"){var s=R("thead");s.appendChild(R("tr")),yt([s],r)}this.createColGroup(r,this.colLevels[this.colLevels.length-1]);for(var a=R("tr"),o=0;o<this.colLevels.length;o++){for(var l=this.colLevels[parseInt(o.toString(),10)],h=a.cloneNode(),c=0;c<l.length;c++){var u=l[parseInt(c.toString(),10)];h.appendChild(this.createHeaderCell(u))}r.querySelector("tbody").appendChild(h)}return t.appendChild(r),e},i.prototype.createHeaderCell=function(e){var t=R("td");if(this.addAttributes(e,t),e.type==="monthDay"){var r=R("span",{innerHTML:Ne(this.parent.getDayNames(this.dayNameFormat)[e.date.getDay()],"single")});t.appendChild(r)}if(e.type==="resourceHeader"&&this.setResourceHeaderContent(t,e),e.type==="dateHeader"){if(T([t],qu),t.setAttribute("data-date",e.date.getTime().toString()),this.parent.activeViewOptions.dateHeaderTemplate){var s={date:e.date,type:e.type},a=this.parent.element.id+"_",o=this.parent.activeViewOptions.dateHeaderTemplateName,l=a+o+"dateHeaderTemplate",h=[].slice.call(this.parent.getDateHeaderTemplate()(s,this.parent,"dateHeaderTemplate",l,!1,void 0,void 0,this.parent.root));h&&h.length&&oe(h,t)}else{var r=R("span",{className:qn}),c="full",u=this.parent.globalize.formatDate(e.date,{skeleton:c,calendar:this.parent.getCalendarMode()});r.setAttribute("title",Ne(u,"multiple"));var p=this.parent.calendarUtil.isMonthStart(e.date)&&!this.isCurrentDate(e.date)&&!this.parent.isAdaptive?this.parent.globalize.formatDate(e.date,{format:"MMM d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e.date,{skeleton:"d",calendar:this.parent.getCalendarMode()});r.innerHTML=Ne(p,"single"),t.appendChild(r)}this.wireCellEvents(t)}var f={elementType:e.type,element:t,date:e.date,groupIndex:e.groupIndex};return this.parent.trigger(di,f),t},i.prototype.getContentSlots=function(){if(!(this.colLevels[this.colLevels.length-1]&&this.colLevels[this.colLevels.length-1][0]))return[];var e=[],t=function(D,N,x,j){var q={date:new Date(+N),groupIndex:x.groupIndex,workDays:x.workDays,type:"monthCells",className:j||[se]};e[parseInt(D.toString(),10)]||(e[parseInt(D.toString(),10)]=[]),e[parseInt(D.toString(),10)].push(q)},r=this.parent.currentView!=="MonthAgenda"&&this.parent.activeViewOptions.group.resources.length>0;if(r&&!this.parent.uiStateValues.isGroupAdaptive&&!this.parent.activeViewOptions.group.byDate)for(var s=0,a=this.colLevels[this.colLevels.length-2];s<a.length;s++)for(var o=a[s],l=o.renderDates.map(function(D){return new Date(+D)}),h=this.parent.activeViewOptions.showWeekend?Si:o.workDays.length,c=0;c<o.renderDates.length/h;c++)for(var u=l.splice(0,h),p=0,f=u;p<f.length;p++){var v=f[p];t(c,v,o)}else for(var l=this.renderDates.map(function(x){return new Date(+x)}),h=this.parent.activeViewOptions.showWeekend?Si:this.parent.activeViewOptions.workDays.length,m=this.colLevels.slice(0,1)[0],g=this.renderDates.map(Number).indexOf(+m[0].date),c=0;c<this.renderDates.length/h;c++)for(var u=l.splice(0,h),y=g,b=function(q){var L=u[parseInt(y.toString(),10)];if(y++,r){var O=E.colLevels[E.colLevels.length-1],P=O.length/h,F=O.slice(0,P);if(E.parent.activeViewOptions.group.hideNonWorkingDays&&(F=O.filter(function(ne){return ne.date.getDay()===L.getDay()}),F.length===0))return q=q-1,w=q,"continue";for(var ie=0;ie<F.length;ie++){var U=void 0;ie!==0&&(U=[se,GR]),t(c,L,F[parseInt(ie.toString(),10)],U)}}else t(c,L,E.colLevels[E.colLevels.length-1][0]);w=q},E=this,w,A=g;A<this.colLevels[0].length+g&&A<u.length;A++)b(A),A=w;return e},i.prototype.updateClassList=function(e){!this.isCustomMonth()&&this.isOtherMonth(e.date)&&e.className.push(Xe),this.parent.isMinMaxDate(e.date)||e.className.push(Gu),this.updateSelectedCellClass(e)},i.prototype.updateSelectedCellClass=function(e){},i.prototype.isOtherMonth=function(e){return e.getTime()<this.monthDates.start.getTime()||e.getTime()>this.monthDates.end.getTime()},i.prototype.renderContentArea=function(){var e=this.createTableLayout($e);this.setAriaAttributes(e),this.addAutoHeightClass(e),this.parent.currentView==="TimelineMonth"&&this.createColGroup(e,this.colLevels[this.colLevels.length-1]);var t=new Date(this.parent.selectedDate.getTime());this.monthDates={start:this.parent.calendarUtil.firstDateOfMonth(t),end:this.parent.calendarUtil.lastDateOfMonth(Hs(t,this.parent.activeViewOptions.interval-1))};var r=e.querySelector("tbody");return oe(this.getContentRows(),r),this.wireCellEvents(r),e},i.prototype.getContentRows=function(){for(var e=[],t=R("tr"),r=R("td"),s=this.getContentSlots(),a=this.parent.currentView==="TimelineMonth",o=a?this.getGroupIndices():[],l=0;l<s.length;l++)if(!(o.length>0&&o.indexOf(s[parseInt(l.toString(),10)][0].groupIndex)>-1)){for(var h=t.cloneNode(),c=0;c<s[parseInt(l.toString(),10)].length;c++){var u=this.createContentTd(s[parseInt(l.toString(),10)][parseInt(c.toString(),10)],r);h.appendChild(u)}e.push(h)}return e},i.prototype.createContentTd=function(e,t){var r=t.cloneNode();e.colSpan&&r.setAttribute("colspan",e.colSpan.toString()),this.updateClassList(e);var s=e.type;if(e.className.indexOf(gr)!==-1&&(e.className.push(Ln),s="resourceGroupCells"),this.parent.workHours.highlight&&this.isWorkDay(e.date,e.workDays)&&e.className.push(cR),this.isCurrentDate(e.date)&&e.className.push(Fu),T([r],e.className),r.setAttribute("data-date",e.date.getTime().toString()),!d(e.groupIndex)||this.parent.uiStateValues.isGroupAdaptive){var a=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:e.groupIndex;r.setAttribute("data-group-index",""+a)}if(this.renderDateHeaderElement(e,r),this.parent.activeViewOptions.cellTemplate){var o={date:e.date,type:s,groupIndex:e.groupIndex},l=this.parent.element.id+"_",h=this.parent.activeViewOptions.cellTemplateName,c=l+h+"cellTemplate",u=[].slice.call(this.parent.getCellTemplate()(o,this.parent,"cellTemplate",c,!1,void 0,void 0,this.parent.root));oe(u,r)}var p={elementType:s,element:r,date:e.date,groupIndex:e.groupIndex};return this.parent.trigger(di,p),r},i.prototype.renderDateHeaderElement=function(e,t){if(this.parent.currentView!=="TimelineMonth"){var r=R("div",{className:qu});if(this.parent.activeViewOptions.cellHeaderTemplate){var s={date:e.date,type:e.type,groupIndex:e.groupIndex},a=this.parent.element.id+"_",o=this.parent.activeViewOptions.cellHeaderTemplateName,l=a+o+"cellHeaderTemplate",h=[].slice.call(this.parent.getCellHeaderTemplate()(s,this.parent,"cellHeaderTemplate",l,!1,void 0,void 0,this.parent.root));oe(h,r)}else{var c=this.parent.calendarUtil.isMonthStart(e.date)&&!this.isCurrentDate(e.date)&&!this.parent.isAdaptive?this.parent.globalize.formatDate(e.date,{format:"MMM d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e.date,{skeleton:"d",calendar:this.parent.getCalendarMode()});r.innerHTML=Ne(c,"single")}if(t.appendChild(r),this.getModuleName()==="month"){T([r],qn);var u="full",p=this.parent.globalize.formatDate(e.date,{skeleton:u,calendar:this.parent.getCalendarMode()});t.setAttribute("aria-label",p)}}},i.prototype.getMonthStart=function(e){var t=this.parent.currentView==="Month"&&!d(this.parent.activeViewOptions.displayDate)&&!this.parent.uiStateValues.isSwipeScroll&&(this.parent.uiStateValues.isCustomMonth||this.isCustomRange()),r=t?this.parent.activeViewOptions.displayDate:!(this.parent.uiStateValues.isCustomMonth||!this.parent.uiStateValues.isSwipeScroll&&this.isCustomRange())&&this.isCustomMonth()?e:this.parent.calendarUtil.firstDateOfMonth(e),s=Ni(r,this.parent.activeViewOptions.firstDayOfWeek);return new Date(s.getFullYear(),s.getMonth(),s.getDate())},i.prototype.getMonthEnd=function(e){if(this.isCustomMonth()){var t=this.getMonthStart(e),r=Si*(this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeViewOptions.numberOfWeeks:bm);return Z(t,r-1)}else{var s=Hs(e,this.parent.activeViewOptions.interval-1),a=Ni(this.parent.calendarUtil.lastDateOfMonth(s),this.parent.activeViewOptions.firstDayOfWeek);return Z(a,Si-1)}},i.prototype.isCustomRange=function(){var e=this.parent.getCurrentViewDates();if(e&&e.length>0){var t=W(this.parent.selectedDate).getTime(),r=Ni(e[e.length-1],this.parent.activeViewOptions.firstDayOfWeek);return!(t>=Ni(e[0],this.parent.activeViewOptions.firstDayOfWeek).getTime()&&t<=Z(r,6).getTime())}return!1},i.prototype.getRenderDates=function(e,t){t===void 0&&(t=this.parent.selectedDate);var r=[],s=W(t),a=this.getMonthStart(s),o=this.getMonthEnd(s);do(this.parent.activeViewOptions.showWeekend||this.isWorkDay(a,e))&&r.push(a),a=Z(a,1),a.getHours()>0&&(a=W(a));while(a.getTime()<=o.getTime());return e||(this.renderDates=r),this.parent.headerModule&&this.parent.headerModule.previousNextIconHandler(),r},i.prototype.getNextPreviousDate=function(e){if(this.isCustomMonth()){var t=this.parent.getCurrentViewDates(),r=Ni(e==="Next"?t[t.length-1]:t[0],this.parent.activeViewOptions.firstDayOfWeek);return Z(r,e==="Next"?Si:-(this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeViewOptions.numberOfWeeks:bm)*Si)}else return Hs(this.parent.selectedDate,(e==="Next"?1:-1)*this.parent.activeViewOptions.interval)},i.prototype.getStartDate=function(){return this.getMonthStart(this.parent.selectedDate)},i.prototype.getEndDate=function(){return this.getMonthEnd(this.parent.selectedDate)},i.prototype.getEndDateFromStartDate=function(e){return Z(new Date(e.getTime()),1)},i.prototype.getDateRangeText=function(e,t){if(e===void 0&&(e=this.parent.selectedDate),t===void 0&&(t=null),this.parent.isAdaptive||d(this.parent.activeViewOptions.dateFormat)){var r=7;e=!d(t)&&t.length>r-1?t[r-1]:e;var s=void 0,a=!1;if(this.isCustomMonth()){var o=!d(t)&&t.length>0?t:this.parent.getCurrentViewDates();a=o[0].getMonth()!==o[o.length-1].getMonth()||o[0].getFullYear()!==o[o.length-1].getFullYear(),a&&(e=o[0],s=o[o.length-1])}var l=this.parent.currentView!=="Month"||!this.isCustomMonth();if(this.parent.activeViewOptions.interval>1&&l||a){if(s=s||Hs(mh(e),this.parent.activeViewOptions.interval-1),e.getFullYear()===s.getFullYear()){var h=this.parent.globalize.formatDate(e,{format:"MMMM",calendar:this.parent.getCalendarMode()})+" - "+this.parent.globalize.formatDate(s,{format:"MMMM ",calendar:this.parent.getCalendarMode()})+this.parent.globalize.formatDate(s,{skeleton:"y",calendar:this.parent.getCalendarMode()});return Ne(h,"single")}var c=this.parent.globalize.formatDate(e,{format:"MMMM",calendar:this.parent.getCalendarMode()})+" "+e.getFullYear()+" - "+this.parent.globalize.formatDate(s,{format:"MMMM ",calendar:this.parent.getCalendarMode()})+this.parent.globalize.formatDate(s,{skeleton:"y",calendar:this.parent.getCalendarMode()});return Ne(c,"single")}var u=this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y";return Ne(this.parent.globalize.formatDate(e,{format:u,calendar:this.parent.getCalendarMode()}),"single")}return this.formatDateRange(!d(t)&&t.length>0?t[0]:this.parent.selectedDate)},i.prototype.getLabelText=function(e){var t=e.charAt(0).toLowerCase()+e.substring(1);return this.formatViewLabel(t,this.getStartDate(),this.getEndDate())},i.prototype.createWeekNumberElement=function(e){var t=R("tr"),r=R("td",{className:gh,attrs:{title:e?this.parent.localeObj.getConstant("week")+" "+e:""},innerHTML:e||""});t.appendChild(r);var s={elementType:"weekNumberCell",element:r};return this.parent.trigger(di,s),t},i.prototype.unWireEvents=function(){var e=this.element.querySelector("."+Te);e&&C.remove(e,"scroll",this.onContentScroll)},i.prototype.isCustomMonth=function(){return this.parent.currentView==="Month"&&(!d(this.parent.activeViewOptions.displayDate)||this.parent.activeViewOptions.numberOfWeeks>0)},i.prototype.getModuleName=function(){return"month"},i.prototype.destroy=function(){if(!this.parent||this.parent&&this.parent.isDestroyed){this.parent=null;return}this.element&&(this.monthEvent&&(this.monthEvent.destroy(),this.monthEvent=null),this.unWireEvents(),this.parent.resourceBase&&this.parent.resourceBase.destroy(),this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues(),n.prototype.destroy.call(this))},i}(Ep),iV=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),rV=function(n){iV(i,n);function i(e){return n.call(this,e)||this}return i.prototype.createAgendaContentElement=function(e,t,r,s,a){var o=this,l,h=this.parent.eventFields;if(e==="noEvents"){var c=[{subject:this.parent.localeObj.getConstant("noEvents")}];l=gt.createList(this.parent.createElement,c,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass,template:fd(function(){return'<div class="'+Lm+'">'+o.parent.localeObj.getConstant("noEvents")+"</div>"})}),l.querySelector(".e-agenda-item").children.length===0&&l.firstElementChild.appendChild(R("div",{className:Lm,innerHTML:this.parent.localeObj.getConstant("noEvents")}))}else{l=gt.createList(this.parent.createElement,t,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass});var u=[].slice.call(l.children);u.forEach(function(p,f){var v=R("div",{className:he,attrs:{"data-id":"Appointment_"+t[parseInt(f.toString(),10)][""+o.parent.eventFields.id],"data-guid":t[parseInt(f.toString(),10)].Guid,role:"button",tabindex:"0","aria-disabled":o.parent.eventBase.getReadonlyAttribute(t[parseInt(f.toString(),10)]),"aria-label":o.parent.getAnnouncementString(t[parseInt(f.toString(),10)])}});d(a)||v.setAttribute("data-group-index",a.toString()),o.parent.eventBase.applyResourceColor(v,t[parseInt(f.toString(),10)],"borderColor",s);var m;if(d(o.parent.activeViewOptions.eventTemplate))m=o.createAppointment(t[parseInt(f.toString(),10)]);else{T([v],QR);var g=o.parent.element.id+"_",y=o.parent.activeViewOptions.eventTemplateName,b=g+y+"eventTemplate";if(m=o.parent.getAppointmentTemplate()(t[parseInt(f.toString(),10)],o.parent,"eventTemplate",b,!1,void 0,void 0,o.parent.root),!d(t[parseInt(f.toString(),10)][h.recurrenceRule])){var E=t[parseInt(f.toString(),10)][h.id]===t[parseInt(f.toString(),10)][h.recurrenceID]?no:ao;v.appendChild(R("div",{className:qe+" "+E}))}}oe([].slice.call(m),v),rr(p),p.appendChild(v);var w={data:$({},t[parseInt(f.toString(),10)],null,!0),element:p,cancel:!1};o.parent.trigger(to,w,function(A){A.cancel&&ve(p)})})}return r.appendChild(l),(this.parent.currentView==="MonthAgenda"&&this.parent.activeViewOptions.group.resources.length>0||this.parent.currentView==="Agenda")&&T([r],Nm),this.parent.renderTemplates(),r},i.prototype.createAppointment=function(e){var t=this.parent.eventFields,r=e[t.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),s=e[t.location]||this.parent.eventSettings.fields.location.default,a=R("div",{className:Ql});!d(s)&&s!==""&&(r+=",");var o=R("div",{className:Ke});if(this.parent.sanitize(r,o),a.appendChild(o),!d(s)&&s!==""){var l=R("div",{className:zs});this.parent.sanitize(s,l),a.appendChild(l)}if(!d(e[t.recurrenceRule])){var h=e[t.id]===e[t.recurrenceID]?no:ao;a.appendChild(R("div",{className:qe+" "+h}))}var c=e[t.startTime],u=e[t.endTime],p=e[t.isAllDay],f=this.parent.localeObj.getConstant("allDay"),v=this.parent.getTimeString(c)+" - "+this.parent.getTimeString(u);if(!d(e.data)){var m=u.getTimezoneOffset()!==c.getTimezoneOffset()?u.getTime()-c.getTime()+36e5:u.getTime()-c.getTime(),g=m/it>=1?f:v;f=g+" ("+this.parent.localeObj.getConstant("day")+" "+e.data.index+"/"+e.data.count+")"}var y=!d(e.data)||p?f:v,b=R("div",{className:zu,innerHTML:y});return[a,b]},i.prototype.processAgendaEvents=function(e){var t=[];if(d(e))return t;for(var r=0,s=e;r<s.length;r++){var a=s[r],o=this.parent.eventBase.splitEventByDay(a);t=t.concat(o.length>1?o:a)}return t},i.prototype.wireEventActions=function(){for(var e=[].slice.call(this.parent.element.querySelectorAll("."+he)),t=0,r=e;t<r.length;t++){var s=r[t];this.parent.eventBase.wireAppointmentEvents(s,this.parent.getEventDetails(s),!0)}for(var a=[].slice.call(this.parent.element.querySelectorAll(".e-m-date")),o=0,l=a;o<l.length;o++){var s=l[o];C.add(s,"click",this.parent.agendaModule.dayNavigationClick,this)}},i.prototype.calculateResourceTableElement=function(e,t,r,s){if(s===void 0&&(s=null),d(this.parent.resourceBase.lastResourceLevel)){var a=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);this.parent.resourceBase.generateResourceLevels(a)}for(var o=Z(new Date(r.getTime()),t),l=this.parent.activeViewOptions.group.byDate||this.parent.currentView==="MonthAgenda"?t:1,h=this.parent.resourceBase.resourceCollection,c=this.parent.resourceBase.lastResourceLevel,u=r,p=r,f=this.parent.activeViewOptions.showWeekend,v=0;v<l;v++){var m=[],g=[],y=0,b=void 0,E=void 0,w=Z(p,v);if(this.parent.currentView==="Agenda"&&this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.allowVirtualScrolling&&!f&&!this.isWorkDay(w)){do if(w=Z(w,1),w>=s)break;while(!this.isWorkDay(w)||this.parent.eventBase.filterEvents(w,Z(w,1)).length<1);if(w>=s)break;p=Z(w,-v),o=Z(w,1)}var A=this.parent.activeViewOptions.group.byDate||this.parent.currentView==="MonthAgenda"?Z(w,1):o,D=this.parent.eventBase.filterEvents(w,A);if(D.length>0||!this.parent.hideEmptyAgendaDays||this.parent.currentView==="MonthAgenda"){for(var N=0;N<c.length;N++){t=!this.parent.activeViewOptions.group.byDate||this.parent.currentView==="MonthAgenda"?t:1;var x=[];r=w;var j=this.parent.eventBase.filterEvents(r,o,D,c[parseInt(N.toString(),10)]);if(j.length>0||!this.parent.hideEmptyAgendaDays||this.parent.currentView==="MonthAgenda")for(var q=0;q<t;q++){var L=this.parent.eventBase.filterEvents(r,Z(r,1),j,void 0);if(((f||!f&&(this.parent.group.byDate?this.isWorkDay(r):this.isWorkDay(r,c[parseInt(N.toString(),10)].workDays)))&&(L.length>0||!this.parent.hideEmptyAgendaDays)||this.parent.currentView==="MonthAgenda")&&(x.push(L[0]),b={rowSpan:1,type:"eventColumn",resource:h[h.length-1],groupIndex:c[parseInt(N.toString(),10)].groupIndex,groupOrder:c[parseInt(N.toString(),10)].groupOrder,resourceData:c[parseInt(N.toString(),10)].resourceData,eventData:L,date:r},E={rowSpan:1,type:"dateColumn",resource:h[parseInt((h.length-1).toString(),10)],groupOrder:c[parseInt(N.toString(),10)].groupOrder,resourceData:c[parseInt(N.toString(),10)].resourceData,date:r,groupIndex:c[parseInt(N.toString(),10)].groupIndex},m[parseInt(y.toString(),10)]||(m[parseInt(y.toString(),10)]=[]),m[parseInt(y.toString(),10)].push(b),m[parseInt(y.toString(),10)].push(E),y++),r=Z(r,1),r.getTime()>=o.getTime()||this.parent.activeViewOptions.group.byDate||this.parent.currentView==="MonthAgenda"){if(x.length>0){m[m.length-1][1].cssClass=Nm;var O={rowSpan:x.length,type:"resourceColumn",resource:h[parseInt((h.length-1).toString(),10)],groupOrder:c[parseInt(N.toString(),10)].groupOrder.slice(0,-1),resourceData:c[parseInt(N.toString(),10)].resourceData,groupIndex:m.length-x.length,className:[kb],date:this.parent.activeViewOptions.group.byDate?w:r};m[parseInt((m.length-x.length).toString(),10)].push(O),g.push($({},O,null,!0))}break}}}for(var P=h.slice(0,-1),F=[],ie=0,U=0;U<P.length;U++)for(var x=P[P.length-(U+1)].dataSource,ne=0;ne<x.length;ne++)for(var Ae=0,ge=0;ge<g.length;ge++)g[parseInt(ge.toString(),10)].groupOrder[P.length-(U+1)]===x[parseInt(ne.toString(),10)][P[P.length-(U+1)].idField]&&(ie=ie+g[parseInt(ge.toString(),10)].rowSpan,F.push($({},g[parseInt(ge.toString(),10)],null,!0))),++Ae===g.length&&F.length>0&&(F[0].rowSpan=ie,F[0].type="parentColumnLevel_"+(U+1),F[0].resource=P[P.length-(U+1)],F[0].resourceData=x[parseInt(ne.toString(),10)],F[0].date=this.parent.activeViewOptions.group.byDate?g[parseInt(ge.toString(),10)].date:r,m[F[0].groupIndex].push(F[0]),F=[],ie=0);this.createResourceTableRow(m,e)}}var Ve=this.parent.eventBase.filterEvents(u,o);Ve.length===0&&!this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&this.renderEmptyContent(e,u)},i.prototype.createResourceTableRow=function(e,t){var r=R("tr"),s,a=R("td"),o,l=0,h;if(this.parent.activeViewOptions.group.byDate||this.parent.currentView==="MonthAgenda"){for(var c=[],u=this.parent.resourceBase.resourceCollection.slice(0,-1),p=0;p<e.length;p++)c=c.concat(e[parseInt(p.toString(),10)]);h=u.length>0?"parentColumnLevel_"+u.length:"resourceColumn";for(var f=c.filter(function(q){return q.type===h}),v=0;v<f.length;v++)l=l+f[parseInt(v.toString(),10)].rowSpan}for(var m=0;m<e.length;m++){s=r.cloneNode();for(var g=e[parseInt(m.toString(),10)].length-1;g>=0;g--){var y=e[parseInt(m.toString(),10)][parseInt(g.toString(),10)],b=a.cloneNode();if(y.type==="dateColumn"){if(this.parent.activeViewOptions.group.byDate||this.parent.currentView==="MonthAgenda"){o=e[parseInt(m.toString(),10)][parseInt(g.toString(),10)];continue}b.setAttribute("data-date",y.date.getTime().toString()),b.appendChild(this.createDateHeaderElement(y.date,y.groupIndex));var E=[er,Rm];y.cssClass&&E.push(y.cssClass),T([b],E),this.isCurrentDate(new Date(y.date.getTime()))&&T(b.childNodes,Ib),s.appendChild(b)}else if(y.type==="eventColumn"){for(var w=y.eventData.length===0?"noEvents":"data",A=0;A<s.childNodes.length;A++){var D=s.childNodes.item(A),N=D.classList.contains("e-resource-column")?zO:Sb;this.parent.trigger(di,{elementType:N,element:D,date:y.date,groupIndex:y.groupIndex})}b=this.createAgendaContentElement(w,y.eventData,b,y.groupOrder,y.groupIndex),b.setAttribute("data-date",y.date.getTime().toString()),(this.parent.activeViewOptions.group.byDate||this.parent.currentView==="MonthAgenda")&&T([b],[er,SR]),s.appendChild(b);var x=y.eventData.length===0?Ou:bb;this.parent.trigger(di,{elementType:x,element:b,date:y.date,groupIndex:y.groupIndex})}else b.setAttribute("rowspan",y.rowSpan.toString()),T([b],yR),this.setResourceHeaderContent(b,y,y.className[0]),s.appendChild(b)}if(this.parent.activeViewOptions.group.byDate&&m===0&&this.parent.currentView!=="MonthAgenda"){var b=a.cloneNode();b.setAttribute("data-date",o.date.getTime().toString()),b.setAttribute("rowspan",l.toString()),b.appendChild(this.createDateHeaderElement(o.date)),T([b],[er,Rm,bR]);var j=Pu(this.parent.selectedDate.getTime(),o.date.getTime());if(s.setAttribute("data-row-index",j.toString()),this.parent.element.querySelector('.e-agenda-view tr[data-row-index="'+j+'"]'))break;s.insertBefore(b,s.childNodes[0])}t.appendChild(s)}},i.prototype.createDateHeaderElement=function(e,t){var r;if(this.parent.activeViewOptions.dateHeaderTemplate){r=R("div",{className:Om});var s={date:e,type:"dateHeader",groupIndex:t},a=this.parent.element.id+"_",o=this.parent.activeViewOptions.dateHeaderTemplateName,l=a+o+"dateHeaderTemplate",h=[].slice.call(this.parent.getDateHeaderTemplate()(s,this.parent,"dateHeaderTemplate",l,!1,void 0,void 0,this.parent.root));oe(h,r)}else r=this.getMobileDateElement(e,Om);return r},i.prototype.renderEmptyContent=function(e,t,r){var s=this.createTableRowElement(t,"noEvents"),a=s.children[0],o=R("div",{className:CR,innerHTML:this.parent.localeObj.getConstant("noEvents")});a.appendChild(o),e.appendChild(s),r&&this.parent.trigger(di,{elementType:Ou,element:a,date:t})},i.prototype.createTableRowElement=function(e,t){var r=Pu(this.parent.selectedDate.getTime(),e.getTime()),s=R("tr",{attrs:{"data-row-index":r.toString()}}),a=R("td",{attrs:{class:t==="monthHeader"?Mb:er,"aria-selected":"false","data-column-index":r.toString(),"data-date":e.getTime().toString()}}),o=a.cloneNode(),l=a.cloneNode();return s.appendChild(o),t!=="noEvents"&&s.appendChild(l),s},i.prototype.destroy=function(){n.prototype.destroy.call(this)},i}(Ep),sV=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])},n(i,e)};return function(i,e){n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),nV=function(n){sV(i,n);function i(e){var t=n.call(this,e)||this;return t.viewClass="e-agenda-view",t.isInverseTableSelect=!1,t.agendaDates={},t.virtualScrollTop=1,t}return i.prototype.getModuleName=function(){return"agenda"},i.prototype.renderLayout=function(){this.agendaDates={},this.element=R("div",{className:op}),T([this.element],this.viewClass),this.element.appendChild(this.createTableLayout(lp)),this.element.querySelector("table").setAttribute("role","presentation"),this.parent.element.querySelector("."+Ei).appendChild(this.element);var e=R("tr");this.element.querySelector("tbody").appendChild(e);var t=R("td");e.appendChild(t);var r=R("div",{className:Te});t.appendChild(r);var s=this.createTableLayout($e);this.setAriaAttributes(s),r.appendChild(s);var a=s.querySelector("tbody"),o=W(this.parent.selectedDate);this.renderEmptyContent(a,o),this.wireEvents(),this.parent.resourceBase&&this.parent.resourceBase.generateResourceLevels([{renderDates:this.parent.activeView.renderDates}]),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+ro)&&this.renderResourceMobileLayout(),this.parent.notify(si,{})},i.prototype.eventLoad=function(e){this.dataSource=$([],this.parent.eventsData,null,!0);for(var t=0,r=this.parent.eventsData;t<r.length;t++){var s=r[t];delete s.generatedDates}var a=this.parent.activeViewOptions.allowVirtualScrolling?e.processedData:this.parent.eventsProcessed;if(this.parent.uiStateValues.isGroupAdaptive){var o=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];this.dataSource=this.parent.eventBase.filterEventsByResource(o,this.dataSource),a=this.parent.eventBase.filterEventsByResource(o,a)}this.parent.eventsProcessed=this.processAgendaEvents(a);var l=W(this.parent.selectedDate),h=this.element.querySelector("."+$e+" tbody"),c=M(h,"."+Te),u=c.scrollTop;rr(h),this.renderInitialContent(h,l),this.wireEventActions(),c.scrollTop=u,this.parent.notify(ip,{}),this.parent.activeViewOptions.allowVirtualScrolling||this.retainScrollPosition()},i.prototype.refreshEvent=function(e){for(var t=[],r=this.parent.eventFields,s=0,a=this.dataSource;s<a.length;s++){var o=a[s];d(o[r.recurrenceID])&&!d(o[r.recurrenceRule])&&!d(o.generatedDates)&&e>=o.generatedDates.end&&(t=t.concat(this.parent.eventBase.generateOccurrence(o,e)))}this.parent.eventsProcessed=this.parent.eventsProcessed.concat(this.processAgendaEvents(t))},i.prototype.refreshHeader=function(){var e=this.element.querySelector("."+$e+" tbody");this.parent.activeViewOptions.group.byDate?rr(e):ve(e.firstElementChild);var t=W(this.parent.selectedDate),r=R("tbody"),s=new Date(t.getTime()),a=this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays?this.getEndDateFromStartDate(s):Z(s,this.parent.agendaDaysCount);this.renderContent(r,s,a),oe([].slice.call(r.childNodes),e)},i.prototype.renderInitialContent=function(e,t){var r=R("tbody"),s=new Date(t.getTime()),a=this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays?this.getEndDateFromStartDate(s):Z(s,this.parent.agendaDaysCount);if(this.renderContent(r,s,a),oe([].slice.call(r.childNodes),e),this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&this.parent.eventsData.length>0)for(var o=this.getContentAreaElement(),l=o.querySelector(".e-content-table");o.offsetWidth<=o.clientWidth&&!(this.parent.isAdaptive&&l.offsetHeight>=o.clientHeight);){var h=R("tbody");if(a=s,s=Z(a,-this.parent.agendaDaysCount),this.renderContent(h,s,a),yt([].slice.call(h.childNodes),e),s<=this.parent.minDate)break}e.childNodes.length<=0&&this.renderEmptyContent(e,t,!0)},i.prototype.renderContent=function(e,t,r){var s=this.parent.eventFields,a=new Date(t.getTime()),o=this.appointmentFiltering(a,r);if(o.length>0&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays)if(!this.parent.activeViewOptions.showWeekend&&!this.isAgendaWorkDay(o[0][s.startTime]))for(var l=0,h=o;l<h.length;l++){var c=h[l];if(this.isAgendaWorkDay(c[s.startTime])){t=new Date(new Date(c[s.startTime].getTime()).setHours(0,0,0,0)),this.updateHeaderText(c[s.startTime]);break}}else t=new Date(new Date(o[0][s.startTime].getTime()).setHours(0,0,0,0)),this.updateHeaderText(o[0][s.startTime]);var u;if(!this.parent.hideEmptyAgendaDays||this.parent.agendaDaysCount>0&&o.length>0){if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var p=t;this.parent.activeViewOptions.group.byDate||(this.parent.activeViewOptions.allowVirtualScrolling=!1,p=a,this.parent.headerModule&&(this.parent.headerModule.updateDateRange(),this.parent.headerModule.updateHeaderItems("remove"))),this.calculateResourceTableElement(e,this.parent.agendaDaysCount,p,r)}else for(var f=0;f<this.parent.agendaDaysCount;f++){var v=this.createTableRowElement(t,"data"),m=this.element.querySelector('tr[data-row-index="'+ +v.dataset.rowIndex+'"]');if(m||!this.parent.activeViewOptions.showWeekend&&!this.isAgendaWorkDay(t)){if(t=Z(t,1),!m&&this.parent.activeViewOptions.allowVirtualScrolling&&f--,t.getTime()>r.getTime())break;continue}var g=v.children[0],y=v.children[1],b=this.appointmentFiltering(t);if(b.length>0||!this.parent.hideEmptyAgendaDays&&b.length===0){var E=!this.parent.hideEmptyAgendaDays&&b.length===0?"noEvents":"data";g.appendChild(this.createDateHeaderElement(t)),v.appendChild(g),this.parent.trigger(di,{elementType:Sb,element:g,date:t});var w=this.createAgendaContentElement(E,b,y);v.appendChild(w),w.querySelectorAll("li").length>0&&e.appendChild(v);var A=!this.parent.hideEmptyAgendaDays&&b.length===0?Ou:bb;this.parent.trigger(di,{elementType:A,element:w,date:t})}else this.parent.activeViewOptions.allowVirtualScrolling&&f--;if(this.isCurrentDate(new Date(t.getTime()))&&T(g.childNodes,Ib),t=Z(t,1),t.getTime()>r.getTime())break}u=new Date(t.getTime()-it)}this.agendaDates={start:a,end:u}},i.prototype.isAgendaWorkDay=function(e){return this.parent.uiStateValues.isGroupAdaptive&&!this.parent.group.byDate?this.isWorkDay(e,this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].workDays):this.isWorkDay(e)},i.prototype.agendaScrolling=function(e){this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(),this.parent.activeViewOptions.allowVirtualScrolling&&this.virtualScrolling(e),this.parent.activeViewOptions.allowVirtualScrolling||this.setPersistence()},i.prototype.virtualScrolling=function(e){var t=e.target,r=t.scrollTop,s=t.scrollHeight,a=t.clientHeight,o=r+a,l=this.virtualScrollTop<r?"next":"previous",h=t.querySelector("tbody"),c=R("tbody"),u=this.getElementFromScrollerPosition(e);if(u){var p=this.parent.getDateFromElement(u),f,v;if(r===0){if(f=this.getPreviousNextDate(Z(p,-1),l),v=this.appointmentFiltering(f.start,f.end),v.length>0||!this.parent.hideEmptyAgendaDays){this.renderContent(c,f.start,f.end),yt([].slice.call(c.childNodes),h),this.wireEventActions();for(var m=0,g=h.children;m<g.length;m++)if(g[parseInt(m.toString(),10)].getAttribute("data-row-index")===u.getAttribute("data-column-index")){var y=g[parseInt(m.toString(),10)].offsetTop-this.element.querySelector(".e-agenda-item").offsetHeight;t.scrollTop=y;break}this.updateHeaderText(p)}}else o>=s-5?(f=this.getPreviousNextDate(Z(p,1),l),v=this.appointmentFiltering(f.start,f.end),(v.length>0||!this.parent.hideEmptyAgendaDays)&&(this.renderContent(c,f.start,f.end),oe([].slice.call(c.childNodes),h),this.wireEventActions(),this.updateHeaderText(p))):this.updateHeaderText(p);this.virtualScrollTop=r;var b=this.parent.eventBase.getSelectedAppointments();b.length>0&&b[b.length-1].focus()}},i.prototype.getElementFromScrollerPosition=function(e){var t,r=e.target,s=r.scrollTop,a=r.scrollHeight,o=r.clientHeight,l=s+o,h=[].slice.call(r.querySelectorAll(".e-agenda-item")),c,u;if(h.length>0)if(s===0)c=h[0],t=M(c,"."+er);else if(l===a)c=h[h.length-1],t=M(c,"."+er);else for(var p=0,f=h.length;p<f;p++){var v=r.getBoundingClientRect();if(c=h[parseInt(p.toString(),10)],u=c.getBoundingClientRect(),v.top<u.top){t=M(c,"."+er);break}}return t},i.prototype.updateHeaderText=function(e){this.parent.showHeaderBar&&this.parent.headerModule.updateDateRange(e)},i.prototype.getPreviousNextDate=function(e,t){var r=new Date(e.getTime()),s=this.getStartDateFromEndDate(e),a=this.getEndDateFromStartDate(e),o=0;do{if(this.parent.activeViewOptions.showWeekend||!this.parent.activeViewOptions.showWeekend&&this.isAgendaWorkDay(r)){var l=this.appointmentFiltering(r);(l.length>0||!this.parent.hideEmptyAgendaDays)&&o++}if(r=Z(r,t==="next"?1:-1),r<s||r>a)break}while(o!==this.parent.agendaDaysCount);var h=Z(r,t==="next"?-1:1);return t==="next"?{start:e,end:Z(h,1)}:{start:h,end:Z(e,1)}},i.prototype.appointmentFiltering=function(e,t){var r=this,s,a;!d(e)&&d(t)?(s=W(new Date(e.getTime())),a=XO(new Date(s.getTime()),it)):(s=new Date(e.getTime()),a=new Date(t.getTime()));var o=this.parent.eventBase.filterEvents(s,a);if(o.length===0&&(this.refreshEvent(e),o=this.parent.eventBase.filterEvents(s,a)),!d(this.parent.minDate)||!d(this.parent.maxDate)){var l=this.parent.eventFields;o=o.filter(function(h){var c=h[l.startTime],u=h[l.endTime];return!(c.getTime()<r.parent.minDate.getTime()||u.getTime()>Z(r.parent.maxDate,1).getTime())})}return o},i.prototype.getStartDateFromEndDate=function(e){var t,r=this.parent.eventFields;if(this.parent.eventsProcessed.length>0){var s=Math.min.apply(Math,this.parent.eventsProcessed.map(function(a){return a[r.startTime].getTime()}));t=this.parent.hideEmptyAgendaDays?new Date(s):this.parent.minDate}else t=this.parent.hideEmptyAgendaDays?Hs(e,-1):this.parent.minDate;return W(t)},i.prototype.getEndDateFromStartDate=function(e){var t,r=this.parent.eventFields;if(this.parent.eventsProcessed.length>0){var s=Math.max.apply(Math,this.parent.eventsProcessed.map(function(a){return a[r.endTime].getTime()}));t=this.parent.hideEmptyAgendaDays?new Date(s):this.parent.maxDate}else t=this.parent.hideEmptyAgendaDays?Hs(e,1):this.parent.maxDate;return W(Z(t,1))},i.prototype.getNextPreviousDate=function(e){var t=e==="Next"?1:-1;return Z(this.parent.selectedDate,t)},i.prototype.startDate=function(){return W(this.parent.selectedDate)},i.prototype.endDate=function(){return this.parent.activeViewOptions.allowVirtualScrolling?this.getEndDateFromStartDate(this.startDate()):Z(this.startDate(),this.parent.agendaDaysCount)},i.prototype.getDateRangeText=function(e){var t=this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y";if(this.parent.activeViewOptions.allowVirtualScrolling||this.parent.isAdaptive){var r=d(e)?this.parent.selectedDate:e;return Ne(this.parent.globalize.formatDate(r,{format:t,calendar:this.parent.getCalendarMode()}),"multiple")}else{var s=this.parent.selectedDate,a=Z(s,this.parent.agendaDaysCount-1);return this.formatDateRange(s,a)}},i.prototype.dayNavigationClick=function(e){var t=M(e.currentTarget,"."+er),r=this.parent.getDateFromElement(t);!d(r)&&!this.parent.isAdaptive&&this.parent.isMinMaxDate(r)&&(this.parent.setProperties({selectedDate:r},!0),this.parent.changeView("Day",e))},i.prototype.wireEvents=function(){C.add(this.element.querySelector("."+Te),ym,this.agendaScrolling,this)},i.prototype.unWireEvents=function(){C.remove(this.element.querySelector("."+Te),ym,this.agendaScrolling);for(var e=[].slice.call(this.element.querySelectorAll(".e-m-date")),t=0,r=e;t<r.length;t++){var s=r[t];C.remove(s,"click",this.dayNavigationClick)}},i.prototype.addEventListener=function(){this.parent.on(Wi,this.onAgendaScrollUiUpdate,this),this.parent.on(Fi,this.eventLoad,this)},i.prototype.removeEventListener=function(){this.parent&&(this.parent.off(Wi,this.onAgendaScrollUiUpdate),this.parent.off(Fi,this.eventLoad))},i.prototype.onAgendaScrollUiUpdate=function(){var e=this.getHeaderBarHeight();this.parent.headerModule&&(this.parent.activeViewOptions.allowVirtualScrolling?this.parent.headerModule.updateHeaderItems("add"):this.parent.headerModule.updateHeaderItems("remove"));var t=this.element.querySelector("."+Te);this.parent.height!=="auto"&&(t.style.height=ce(this.parent.element.offsetHeight-e))},i.prototype.scrollToDate=function(e){var t=new Date(+W(e));if(this.parent.activeViewOptions.allowVirtualScrolling)(!this.parent.hideEmptyAgendaDays||this.parent.getEvents(t,Z(t,1),!0).length>0)&&this.parent.changeDate(t);else{var r=this.element.querySelector("."+er+'[data-date="'+t.getTime()+'"]');r&&(this.getContentAreaElement().scrollTop=r.offsetTop)}},i.prototype.destroy=function(){if(!this.parent||this.parent&&this.parent.isDestroyed){this.parent=null;return}this.element&&(this.unWireEvents(),this.parent.resourceBase&&this.parent.resourceBase.destroy(),this.parent.headerModule&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.headerModule.updateHeaderItems("remove"),n.prototype.destroy.call(this))},i}(rV),aV=vd({inject:{custom:{default:null}},render:function(n){if(!Xi){var i=Xi?n:Jg,e=null;return d(this.$slots.default)||(e=Xi?this.$slots.default:this.$slots.default()),i("div",{class:"e-directive"},e)}},updated:function(){!Xi&&this.custom&&this.custom()},methods:{getTag:function(){return"e-resources"}}}),oV=vd({render:function(){},methods:{getTag:function(){return"e-resource"}}}),tS=["isLazyUpdate","plugins","agendaDaysCount","allowClipboard","allowDragAndDrop","allowInline","allowKeyboardInteraction","allowMultiCellSelection","allowMultiDrag","allowMultiRowSelection","allowOverlap","allowResizing","allowSwiping","calendarMode","cellHeaderTemplate","cellTemplate","cssClass","currentView","dateFormat","dateHeaderTemplate","dateRangeTemplate","dayHeaderTemplate","editorFooterTemplate","editorHeaderTemplate","editorTemplate","enableAdaptiveUI","enableAllDayScroll","enableHtmlSanitizer","enablePersistence","enableRecurrenceValidation","enableRtl","endHour","eventDragArea","eventSettings","firstDayOfWeek","firstMonthOfYear","group","headerIndentTemplate","headerRows","height","hideEmptyAgendaDays","locale","maxDate","minDate","monthHeaderTemplate","monthsCount","overscanCount","prerenderDialogs","quickInfoOnSelectionEnd","quickInfoTemplates","readonly","resourceHeaderTemplate","resources","rowAutoHeight","selectedDate","showHeaderBar","showQuickInfo","showTimeIndicator","showWeekNumber","showWeekend","startHour","timeFormat","timeScale","timezone","timezoneDataSource","toolbarItems","views","weekRule","width","workDays","workHours","actionBegin","actionComplete","actionFailure","beforePaste","beforePrint","cellClick","cellDoubleClick","created","dataBinding","dataBound","destroyed","drag","dragStart","dragStop","eventClick","eventDoubleClick","eventRendered","excelExport","hover","moreEventsClick","navigating","popupClose","popupOpen","renderCell","resizeStart","resizeStop","resizing","select","tooltipOpen","virtualScrollStart","virtualScrollStop"],iS=["currentView","selectedDate"],rS=TS({props:tS}),lV=rS[0],sS=rS[1],wp=Object.keys(sS);wp.push("modelchanged","update:modelValue");for(var au=0,Yg=iS;au<Yg.length;au++){var hV=Yg[au];wp.push("update:"+hV)}var cV=vd({name:"ScheduleComponent",mixins:[DS],props:lV,watch:sS,emits:wp,model:{event:"modelchanged"},provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new YL({}),propKeys:tS,models:iS,hasChildDirective:!0,hasInjectedModules:!0,tagMapper:{"e-views":"e-view","e-resources":"e-resource","e-header-rows":"e-header-row","e-toolbaritems":"e-toolbaritem"},tagNameMapper:{"e-header-rows":"e-headerRows","e-toolbaritems":"e-toolbarItems"},isVue3:!Xi,templateCollection:{}}},created:function(){this.ej2Instances._trigger=this.ej2Instances.trigger,this.ej2Instances.trigger=this.trigger,this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(n){var i=Xi?n:Jg,e=null;return d(this.$slots.default)||(e=Xi?this.$slots.default:this.$slots.default()),i("div",e)},methods:{clearTemplate:function(n){if(n||(n=Object.keys(this.templateCollection||{})),n.length&&this.templateCollection)for(var i=0,e=n;i<e.length;i++){var t=e[i],r=this.templateCollection[t];if(r&&r.length){for(var s=0,a=r;s<a.length;s++){var o=a[s];this.destroyPortals(o)}delete this.templateCollection[t]}}},setProperties:function(n,i){var e=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(n,i),n&&this.models&&this.models.length&&Object.keys(n).map(function(t){e.models.map(function(r){t===r&&!/datasource/i.test(t)&&(e.isVue3?e.ej2Instances.vueInstance.$emit("update:"+t,n[t]):(e.$emit("update:"+t,n[t]),e.$emit("modelchanged",n[t])))})})},trigger:function(n,i,e){if(Xi||(this.models=this.models?this.models:this.ej2Instances.referModels),(n==="change"||n==="input")&&this.models&&this.models.length!==0){var t=this.models.toString().match(/checked|value/)||[],r=t[0];i&&t&&!Ns(i[r])&&(Xi?(n==="change"||this.$props&&!this.$props.isLazyUpdate)&&(this.$emit("update:"+r,i[r]),this.$emit("modelchanged",i[r])):(this.ej2Instances.vueInstance.$emit("update:"+r,i[r]),this.ej2Instances.vueInstance.$emit("modelchanged",i[r]),this.ej2Instances.vueInstance.$emit("update:modelValue",i[r])))}else if(n==="actionBegin"&&i.requestType==="dateNavigate"&&this.models&&this.models.length!==0){var t=this.models.toString().match(/currentView|selectedDate/)||[],r=t[0];i&&t&&!Ns(i[r])&&(Xi?(this.$emit("update:"+r,i[r]),this.$emit("modelchanged",i[r])):(this.ej2Instances.vueInstance.$emit("update:"+r,i[r]),this.ej2Instances.vueInstance.$emit("modelchanged",i[r])))}this.ej2Instances&&this.ej2Instances._trigger&&this.ej2Instances._trigger(n,i,e)},custom:function(){this.updated()},addEvent:function(n){return this.ej2Instances.addEvent(n)},addResource:function(n,i,e){return this.ej2Instances.addResource(n,i,e)},changeCurrentView:function(n,i){return this.ej2Instances.changeCurrentView(n,i)},closeEditor:function(){return this.ej2Instances.closeEditor()},closeOverlapAlert:function(){return this.ej2Instances.closeOverlapAlert()},closeQuickInfoPopup:function(){return this.ej2Instances.closeQuickInfoPopup()},closeTooltip:function(){return this.ej2Instances.closeTooltip()},collapseResource:function(n,i){return this.ej2Instances.collapseResource(n,i)},copy:function(n){return this.ej2Instances.copy(n)},cut:function(n){return this.ej2Instances.cut(n)},deleteEvent:function(n,i){return this.ej2Instances.deleteEvent(n,i)},destroy:function(){return this.ej2Instances.destroy()},expandResource:function(n,i){return this.ej2Instances.expandResource(n,i)},exportToExcel:function(n){return this.ej2Instances.exportToExcel(n)},exportToICalendar:function(n,i){return this.ej2Instances.exportToICalendar(n,i)},generateEventOccurrences:function(n,i){return this.ej2Instances.generateEventOccurrences(n,i)},getBlockEvents:function(n,i,e){return this.ej2Instances.getBlockEvents(n,i,e)},getCellDetails:function(n){return this.ej2Instances.getCellDetails(n)},getCurrentViewDates:function(){return this.ej2Instances.getCurrentViewDates()},getCurrentViewEvents:function(){return this.ej2Instances.getCurrentViewEvents()},getCurrentViewIndex:function(){return this.ej2Instances.getCurrentViewIndex()},getDateRangeText:function(n){return this.ej2Instances.getDateRangeText(n)},getDeletedOccurrences:function(n){return this.ej2Instances.getDeletedOccurrences(n)},getEventDetails:function(n){return this.ej2Instances.getEventDetails(n)},getEventMaxID:function(){return this.ej2Instances.getEventMaxID()},getEventTemplateName:function(n){return this.ej2Instances.getEventTemplateName(n)},getEvents:function(n,i,e){return this.ej2Instances.getEvents(n,i,e)},getIndexFromResourceId:function(n,i){return this.ej2Instances.getIndexFromResourceId(n,i)},getOccurrencesByID:function(n){return this.ej2Instances.getOccurrencesByID(n)},getOccurrencesByRange:function(n,i){return this.ej2Instances.getOccurrencesByRange(n,i)},getResourceCollections:function(){return this.ej2Instances.getResourceCollections()},getResourcesByIndex:function(n){return this.ej2Instances.getResourcesByIndex(n)},getSelectedElements:function(){return this.ej2Instances.getSelectedElements()},getViewDates:function(n){return this.ej2Instances.getViewDates(n)},hideSpinner:function(){return this.ej2Instances.hideSpinner()},importICalendar:function(n){return this.ej2Instances.importICalendar(n)},isSlotAvailable:function(n,i,e){return this.ej2Instances.isSlotAvailable(n,i,e)},openEditor:function(n,i,e,t){return this.ej2Instances.openEditor(n,i,e,t)},openOverlapAlert:function(n){return this.ej2Instances.openOverlapAlert(n)},openQuickInfoPopup:function(n){return this.ej2Instances.openQuickInfoPopup(n)},paste:function(n){return this.ej2Instances.paste(n)},print:function(n){return this.ej2Instances.print(n)},refreshEvents:function(n){return this.ej2Instances.refreshEvents(n)},refreshLayout:function(){return this.ej2Instances.refreshLayout()},refreshTemplates:function(n){return this.ej2Instances.refreshTemplates(n)},removeResource:function(n,i){return this.ej2Instances.removeResource(n,i)},resetWorkHours:function(n,i,e,t){return this.ej2Instances.resetWorkHours(n,i,e,t)},saveEvent:function(n,i){return this.ej2Instances.saveEvent(n,i)},scrollTo:function(n,i){return this.ej2Instances.scrollTo(n,i)},scrollToResource:function(n,i){return this.ej2Instances.scrollToResource(n,i)},selectResourceByIndex:function(n){return this.ej2Instances.selectResourceByIndex(n)},setRecurrenceEditor:function(n){return this.ej2Instances.setRecurrenceEditor(n)},setResourceCollections:function(n,i){return this.ej2Instances.setResourceCollections(n,i)},setWorkHours:function(n,i,e,t){return this.ej2Instances.setWorkHours(n,i,e,t)},showSpinner:function(){return this.ej2Instances.showSpinner()}}});const uV={class:"schedule-container"},dV={__name:"TimelineView",props:{data:{type:Array,default:()=>[]}},setup(n){AS("schedule",[KL,XL,JL,tV,nV]);const i=nt(null),e=["Day","Week","WorkWeek","Month","Agenda"],t=n,r=new Date,s=l=>{const h=["#ffaa00","#f8a398","#7499e1","#a4d65e","#f57f7f","#6ec6ff","#ff80ab","#ffd54f","#b39ddb","#81c784"];let c=0;for(let u=0;u<l.length;u++)c=l.charCodeAt(u)+((c<<5)-c);return h[Math.abs(c)%h.length]},a=Bt(()=>{if(!t.data||t.data.length===0)return[{Id:"unassigned",OwnerText:"Unassigned",OwnerColor:"#9e9e9e"}];const l=new Map;return l.set("unassigned",{Id:"unassigned",OwnerText:"Unassigned",OwnerColor:"#9e9e9e"}),t.data.forEach(h=>{h.seat&&h.seat._id&&(l.has(h.seat._id)||l.set(h.seat._id,{Id:h.seat._id,OwnerText:h.seat.title||h.seat.name||"Unnamed Seat",OwnerColor:s(h.seat._id)}))}),Array.from(l.values())}),o=Bt(()=>!t.data||t.data.length===0?{dataSource:[]}:{dataSource:t.data.filter(h=>h["start-date"]&&h["end-date"]).map(h=>{var p;const c=new Date(h["start-date"]),u=new Date(h["end-date"]);return u.getHours()===0&&u.getMinutes()===0&&u.setHours(23,59,59),c.getHours()===0&&c.getMinutes()===0&&c.setHours(9,0,0),{Id:h._id,Subject:h["card-title"]||"Untitled Card",StartTime:c,EndTime:u,OwnerId:((p=h.seat)==null?void 0:p._id)||"unassigned",Description:h["card-description"]||"",Status:h["card-status"]||"",Type:h["card-type"]||""}})});return(l,h)=>(fe(),me("div",uV,[Qi(Sr(cV),{ref_key:"scheduleObj",ref:i,height:"550px",width:"100%",selectedDate:Sr(r),eventSettings:o.value,views:e},{default:Cl(()=>[Qi(Sr(aV),null,{default:Cl(()=>[Qi(Sr(oV),{field:"OwnerId",title:"Owner",name:"Owners",dataSource:a.value,textField:"OwnerText",idField:"Id",colorField:"OwnerColor"},null,8,["dataSource"])]),_:1})]),_:1},8,["selectedDate","eventSettings"])]))}},bV=Zg(dV,[["__scopeId","data-v-ee5ec68a"]]);export{gV as C,bV as T,vV as _,mV as a,fV as b,yV as c,nr as k};
