import{d as M,c as g,r as u,x as j,e as A,o,w as c,f as t,j as r,k as _,E as q,P as L,ai as N,h as F,F as K,z as P,A as D,ah as T,q as x,ad as U,t as n,Q as $,g as m,i as y,B as h,Y as I}from"./index-SgxqeUdj.js";const O={class:"px-6 pb-2"},Q={class:"relative mb-4"},Y=["onKeydown"],G={key:0,class:"mt-3"},H={class:"divide-y divide-border rounded-xl border border-border bg-bg-card"},J=["onClick"],R={class:"flex items-center gap-3 min-w-0"},W=["src"],X={class:"min-w-0"},Z={class:"truncate font-medium leading-tight capitalize"},ee={class:"truncate text-xs text-text-secondary leading-tight"},te={key:1,class:"mt-3 flex items-center gap-2"},se={class:"inline-flex items-center gap-2 rounded-full px-3 py-2 bg-bg-muted text-text-secondary"},ae={class:"flex items-center justify-between gap-3 p-6 mt-3 pb-2 border-t border-border bg-bg-body"},le={class:"flex gap-2 justify-between w-full"},re=M({__name:"AssignmentModal",props:{modelValue:{type:Boolean,default:!1},members:{default:()=>[]},directory:{default:()=>[]},placeholder:{default:"Search people by name or email"},isSubmitting:{}},emits:["update:modelValue","submit","copy-link"],setup(w,{emit:k}){const b=w,p=k,d=g({get:()=>b.modelValue,set:s=>p("update:modelValue",s)}),i=u(""),l=u(""),C=u(""),v=g(()=>{const s=i.value.trim().toLowerCase();return b.directory.filter(a=>{var e;return((e=a.name)==null?void 0:e.toLowerCase().includes(s))||a.email.toLowerCase().includes(s)})}),V=s=>{l.value=s.email,i.value=""},f=()=>{l.value=""},S=()=>{i.value&&(l.value=i.value.trim(),i.value="")},B=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),z=()=>{if(!l.value||!B(l.value)){C.value="Please select a valid email.";return}p("submit",{invite:{email:l.value}})},E=()=>{f(),i.value="",d.value=!1};return j(()=>{d.value&&(i.value="")}),(s,a)=>(o(),A(I,{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=e=>d.value=e),size:"md"},{default:c(()=>[a[3]||(a[3]=t("div",{class:"sticky top-0 z-10 flex items-start gap-2 px-6 pb-4 mb-4 border-b border-border bg-bg-body"},[t("h2",{class:"text-xl font-semibold"},"Add team member")],-1)),t("div",O,[t("div",Q,[q(t("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e),type:"text",placeholder:"Search or add email",class:"w-full h-11 rounded-xl border border-border bg-bg-input px-3 text-sm outline-none focus:ring-2 focus:ring-primary/40",onKeydown:N(F(S,["prevent"]),["enter"])},null,40,Y),[[L,i.value]])]),v.value.length?(o(),r("div",G,[t("ul",H,[(o(!0),r(K,null,P(v.value,e=>(o(),r("li",{key:e.id||e.email,class:D(["flex items-center justify-between gap-3 px-3 py-3 cursor-pointer hover:bg-bg-muted",{"bg-bg-muted":l.value===e.email}]),onClick:ie=>V(e)},[t("div",R,[e!=null&&e.profile_image?(o(),r("img",{key:0,class:"h-9 w-9 rounded-full aspect-square",src:e==null?void 0:e.profile_image,alt:"avatar"},null,8,W)):(o(),r("div",{key:1,class:"h-9 w-9 bg-white capitalize rounded-full flex items-center justify-center text-xs font-semibold",style:T({backgroundColor:x(U)({email:e.email})})},n(x($)(e.name||e.email)),5)),t("div",X,[t("div",Z,n(e.name||e.email),1),t("div",ee,n(e.email),1)])])],10,J))),128))])])):_("",!0),l.value?(o(),r("div",te,[t("span",se,[m(n(l.value)+" ",1),t("button",{onClick:f,class:"ml-2 text-sm text-red-500"},"✕")])])):_("",!0)]),t("div",ae,[t("div",le,[y(h,{variant:"secondary",onClick:E},{default:c(()=>a[2]||(a[2]=[m("Cancel")])),_:1,__:[2]}),y(h,{variant:"primary",disabled:!!(!l.value||s.isSubmitting),onClick:z},{default:c(()=>[m(n(s.isSubmitting?"Assigning…":"Assign"),1)]),_:1},8,["disabled"])])])]),_:1,__:[3]},8,["modelValue"]))}});export{re as default};
