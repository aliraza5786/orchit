import{d as O,r as u,c as g,ar as Y,h as p,b as a,t as i,i as _,F as C,v as X,J as L,y as S,f as G,aN as K,U as Q,g as y,a4 as R,w as N,e as V,B as $,o as f,_ as Z}from"./index-rFytiIBb.js";import{_ as ee}from"./whitePlus-Cs_P7rE9.js";import{_ as te}from"./BaseTextField.vue_vue_type_script_setup_true_lang-BUI_Kz_I.js";import{_ as ae}from"./BaseTextAreaField.vue_vue_type_script_setup_true_lang-CIvv4thi.js";import{u as le}from"./workspace-C0mwNU9d.js";import"./info-DjaLHeD_.js";const se={class:"w-full"},re={class:"text-xl md:text-4xl font-semibold text-text-primary text-left"},oe={class:"text-sm md:text-lg text-text-secondary text-left mt-2 mb-6"},ne={class:"flex flex-col pb-4 items-start gap-4 w-full"},ie=["for"],de={class:"flex gap-3"},ce={class:"flex flex-col gap-1"},ue={class:"font-medium capitalize text-sm text-text-primary"},pe={class:"text-[11px] text-text-secondary text-start line-clamp-1"},fe={class:"flex gap-2"},ve=["onClick"],me=["name","id","value"],be={key:1,class:"bg-bg-surface border border-border w-full px-4 pt-4 rounded-lg"},xe={class:"text-lg text-text-primary mb-3 font-semibold"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},ye={class:""},_e={key:0,class:"text-red-500 text-sm -mt-2 mb-2"},he={class:"flex items-center gap-3"},we={class:"relative block w-10 h-10 rounded-full border border-border cursor-pointer"},ke={class:"flex flex-col"},Ce={class:"text-xs text-text-secondary"},Le={class:"flex gap-2 mt-4 justify-end border-t border-border bg-bg-surface py-4"},Se=O({__name:"StepTwo",props:{ai:{type:Boolean}},emits:["next"],setup(Ne,{expose:A,emit:B}){const v=le(),U=v.workspace||{},o=u({lanes:U.lanes||[]}),s=u({id:"","lane-title":"","lane-description":"","lane-color":"#4169E1"}),j=u([]),E=g(()=>{try{const l=v.workspace;if(!l)return[];const e=l;return!e.lanes||!Array.isArray(e.lanes)?[]:e.lanes.map(t=>{var r;return(r=t.variables)==null?void 0:r.id}).filter(Boolean)}catch(l){return console.warn("Failed to parse workspace from localStorage:",l),[]}}),m=u(E.value??[]),d=u(!1),c=u(!1),n=Y({title:!1,description:!1,color:!1}),b=g(()=>{if(!n.title)return"";const l=(s.value["lane-title"]||"").trim();return l?l.length<3?"Lane Name must be at least 3 characters":"":"Lane Name is required"}),x=g(()=>n.description?(s.value["lane-description"]||"").trim()?"":"Description is required":""),h=g(()=>n.color?/^#([0-9A-Fa-f]{6})$/.test(s.value["lane-color"]||"")?"":"Pick a valid 6-digit HEX color":"");function z(){d.value=!0,c.value=!1}function F(){d.value=!1,c.value=!1,w()}function T(){!b.value&&!x.value&&(o.value.lanes.push({variables:{...s.value,id:`lane${o.value.lanes.length+1}`}}),d.value=!1,w())}function I(){if(!b.value&&!x.value){const l=o.value.lanes.findIndex(e=>e.variables.id===s.value.id);l!==-1&&(o.value.lanes[l]={variables:{...s.value}}),d.value=!1,c.value=!1}}function w(){j.value=[],s.value={id:"","lane-title":"","lane-description":"","lane-color":"#4169E1"},n.title=!1,n.description=!1}function D(l){s.value={...l.variables},d.value=!0,c.value=!0}function M(l,e){if(!l)return e;try{return JSON.parse(l)}catch{return e}}function k(){return M(v.workspace,null)}function W(l){const e=k();if(!e)return;const t=l(e);v.setWorkspace(t)}function q(l,e){const t={_id:l.variables.id,variables:{}};return{...t,variables:{...t.variables||{},...l.variables}}}function J(){if(!k())return;const e=new Set(m.value.length?m.value:o.value.lanes.map(r=>r.variables.id)),t=o.value.lanes.filter(r=>e.has(r.variables.id)).map(r=>q(r));W(r=>({...r,lanes:t}))}function P(){o.value.lanes.length>0&&(J(),H("next"))}A({continueHandler:P});const H=B;return(l,e)=>(f(),p(C,null,[a("div",se,[a("h2",re,i(l.ai?" Choose Your Lanes":"Create Your Lanes"),1),a("p",oe,i(l.ai?" Select the components you want to include in your project":" Create the components you want to include in your project"),1)]),a("div",ne,[(f(!0),p(C,null,X(o.value.lanes,t=>(f(),p("label",{key:t.variables.id,for:`lane-${t.variables.id}`,class:"rounded-lg relative flex justify-between items-center w-full p-4 cursor-pointer transition-all bg-bg-surface border border-border"},[a("div",de,[a("div",{class:"w-9 h-9 text-text-primary rounded-lg",style:L({background:t.variables["lane-color"]})},null,4),a("div",ce,[a("h3",ue,i(t.variables["lane-title"]),1),a("p",pe,i(t.variables["lane-description"]),1)])]),a("div",fe,[a("button",{class:"w-5 h-5 text-base aspect-square flex justify-center items-center rounded cursor-pointer text-accent",onClick:G(r=>D(t),["stop"])},e[8]||(e[8]=[a("i",{class:"fa-solid fa-edit text-text-primary"},null,-1)]),8,ve),S(a("input",{type:"checkbox",class:"sr-only peer",name:`lane-${t.variables.id}`,id:`lane-${t.variables.id}`,"onUpdate:modelValue":e[0]||(e[0]=r=>m.value=r),value:t.variables.id},null,8,me),[[K,m.value]]),e[9]||(e[9]=a("div",{class:"w-5 h-5 flex justify-center items-center border border-border bg-bg-card p-0.5 rounded cursor-pointer peer-checked:bg-accent peer-checked:border-none transition-all"},[a("i",{class:"w-4 text-bg-card fa-solid fa-check peer-checked:text-white"})],-1))])],8,ie))),128)),d.value?_("",!0):(f(),p("label",{key:0,class:"rounded-lg w-full relative p-4 cursor-pointer transition-all bg-bg-surface border border-border",onClick:z},e[10]||(e[10]=[Q('<div class="flex gap-2 items-center justify-center" data-v-fcf3a599><div class="p-2.5 bg-accent rounded-full" data-v-fcf3a599><img class="w-3" src="'+ee+'" alt="" data-v-fcf3a599></div><div class="flex flex-col justify-center" data-v-fcf3a599><h3 class="font-medium capitalize text-sm text-text-primary" data-v-fcf3a599>Add Custom Lane</h3><p class="text-[11px] text-text-secondary mt-1 line-clamp-1" data-v-fcf3a599>Create your own component</p></div></div>',1)]))),d.value?(f(),p("div",be,[a("h1",xe,i(c.value?"Update Lane":"Add Custom Lane"),1),a("div",ge,[y(te,{label:"Lane Name",placeholder:"Lane Name",size:"lg",modelValue:s.value["lane-title"],"onUpdate:modelValue":e[1]||(e[1]=t=>s.value["lane-title"]=t),error:!!b.value,message:b.value,onBlur:e[2]||(e[2]=t=>n.title=!0)},null,8,["modelValue","error","message"]),a("div",ye,[e[12]||(e[12]=a("label",{class:"block text-base font-medium text-text-primary mb-2"},"Set Lane Color",-1)),h.value?(f(),p("p",_e,"("+i(h.value)+")",1)):_("",!0),a("div",he,[a("label",we,[S(a("input",{type:"color","onUpdate:modelValue":e[3]||(e[3]=t=>s.value["lane-color"]=t),class:"absolute inset-0 opacity-0 cursor-pointer",onInput:e[4]||(e[4]=t=>n.color=!0)},null,544),[[R,s.value["lane-color"]]]),a("div",{class:"w-full h-full rounded-full",style:L({backgroundColor:s.value["lane-color"]})},null,4)]),a("div",ke,[e[11]||(e[11]=a("span",{class:"text-sm text-text-primary"},"Set Color",-1)),a("span",Ce,i(s.value["lane-color"]),1)])])]),y(ae,{class:"col-span-full",modelValue:s.value["lane-description"],"onUpdate:modelValue":e[5]||(e[5]=t=>s.value["lane-description"]=t),label:"Description",placeholder:"This lane will track support tickets.",error:!!x.value,message:x.value,onBlur:e[6]||(e[6]=t=>n.description=!0)},null,8,["modelValue","error","message"])]),a("div",Le,[y($,{size:"md",variant:"primary",onClick:e[7]||(e[7]=t=>c.value?I():T())},{default:N(()=>[V(i(c.value?"Update Lane":"Add Lane"),1)]),_:1}),y($,{size:"md",variant:"secondary",onClick:F},{default:N(()=>e[13]||(e[13]=[V("Cancel")])),_:1,__:[13]})])])):_("",!0)])],64))}}),Ee=Z(Se,[["__scopeId","data-v-fcf3a599"]]);export{Ee as default};
