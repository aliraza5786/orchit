const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/KanbanBoard-6d92uia1.js","assets/index-By-MWQyp.js","assets/index-DBWkHu_f.css","assets/DatePicker-CLYad3t_.js","assets/DatePicker-CaK9YdY3.css","assets/KanbanSkeleton-CIY4vcrv.js","assets/index-DdjqC5kt.js","assets/KanbanSkeleton-D86JubvK.css","assets/DropMenu.vue_vue_type_script_setup_true_lang-CIk7r7kV.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-DYgGTIOu.js","assets/BaseModal-DlLGLIbU.js","assets/cross-DvraoB0R.js","assets/BaseModal-FRlOKCB_.css","assets/AssigmentDropdown.vue_vue_type_script_setup_true_lang-CZiXTcXg.js","assets/useQueryParams-Cj5obHVe.js","assets/workspace-jQGMSF7j.js","assets/KanbanBoard-DJX1cgam.css","assets/KanbanCard-CAYXmyx0.js","assets/index-BBhniCjd.js","assets/BaseTextField.vue_vue_type_script_setup_true_lang-D0tVbb66.js","assets/info-DjaLHeD_.js","assets/BaseEmailChip.vue_vue_type_script_setup_true_lang-DfxGUOM4.js","assets/ProgressBar.vue_vue_type_script_setup_true_lang-C8E5q2Wf.js","assets/TypeChanger-Cbwzck-4.js","assets/TypeChanger-lqprU80G.css","assets/SwitchTab-Cq4rvBiP.js","assets/SwitchTab-xAML-a-k.css"])))=>i.map(i=>d[i]);
import{E as V,G as _,J as le,n as v,d as me,r as p,m as G,c as _e,a as ve,i as u,y as be,e as s,h as m,j as P,t as g,z as ae,O as he,U as se,g as A,F as H,x as te,f as Y,b as fe,V as Ce,o as r,_ as ke,q as we,aB as Te,k as De,A as re,w as Z,B as ue,Q as ce,R as pe}from"./index-By-MWQyp.js";import{d as Pe,D as Ve,K as $e}from"./KanbanSkeleton-CIY4vcrv.js";import{_ as Ae}from"./BaseTextField.vue_vue_type_script_setup_true_lang-D0tVbb66.js";import{a as Se}from"./useQueryParams-Cj5obHVe.js";import{_ as Ue}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-DYgGTIOu.js";import{_ as Ee}from"./BaseEmailChip.vue_vue_type_script_setup_true_lang-DfxGUOM4.js";import{_ as Le}from"./ProgressBar.vue_vue_type_script_setup_true_lang-C8E5q2Wf.js";import{T as qe}from"./TypeChanger-Cbwzck-4.js";import{S as Oe}from"./SwitchTab-Cq4rvBiP.js";const Be=(l,o,f={})=>le({queryKey:["people-lists",o],queryFn:({signal:C})=>_({url:`workspace/teams/${l}/people-grouped?groupBy=${v(o)}`,method:"GET",signal:C}),...f}),Ke=(l={})=>V({key:["add-team"]},{mutationFn:o=>_({url:"/workspace/roles",method:"POST",data:o.payload}),...l}),Fe=(l={})=>V({key:["delete-team"]},{mutationFn:o=>_({url:`/workspace/roles/${o.id}`,method:"DELETE"}),...l}),Pt=(l={})=>V({key:["delete-seat"]},{mutationFn:o=>_({url:`common/team/${o.id}`,method:"DELETE"}),...l}),Vt=(l,o,f={})=>le({queryKey:["people",o],queryFn:({signal:C})=>_({url:`workspace/people?workspace_id=${l}&company_id=${v(o)._id}`,method:"GET",signal:C}),...f}),$t=(l={})=>V({key:["assign-team"]},{mutationFn:o=>_({url:`/common/seats/${o.id}/reassign`,method:"PUT",data:o.payload}),...l}),At=(l={})=>V({key:["unassign-team"]},{mutationFn:o=>_({url:`/common/seats/${o.id}/unassign`,method:"PUT",data:o.payload}),...l}),Ie=(l={})=>V({key:["add-team-member"]},{mutationFn:o=>_({url:`common/workspace-roles/${o.id}/seats/add`,method:"POST",data:o.payload}),...l}),Me=(l={})=>le({queryKey:["people-var"],queryFn:({signal:o})=>_({url:"/common/module-variables/filter?module=people",method:"GET",signal:o}),...l}),Ne=(l={})=>V({key:["update-var"]},{mutationFn:o=>_({url:`common/seats/${o.id}/variables`,method:"PUT",data:o.payload}),...l}),je="data:image/svg+xml,%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_82_2990)'%3e%3crect%20width='48'%20height='48'%20rx='24'%20fill='%23798A99'/%3e%3cg%20opacity='0.08'%3e%3crect%20x='0.6'%20y='0.6'%20width='46.8'%20height='46.8'%20rx='23.4'%20stroke='black'%20stroke-width='1.2'/%3e%3c/g%3e%3cpath%20d='M24%2027.0596C26.5526%2027.0596%2029.0007%2026.0556%2030.8057%2024.2684C32.6107%2022.4812%2033.6247%2020.0573%2033.6247%2017.5298C33.6247%2015.0023%2032.6107%2012.5784%2030.8057%2010.7912C29.0007%209.00403%2026.5526%208%2024%208C21.4474%208%2018.9993%209.00403%2017.1943%2010.7912C15.3893%2012.5784%2014.3753%2015.0023%2014.3753%2017.5298C14.3753%2020.0573%2015.3893%2022.4812%2017.1943%2024.2684C18.9993%2026.0556%2021.4474%2027.0596%2024%2027.0596ZM24%2031.2465C11.2034%2031.2465%203%2038.2387%203%2041.643V48H45V41.643C45%2037.526%2037.2338%2031.2465%2024%2031.2465Z'%20fill='white'%20fill-opacity='0.6'/%3e%3cpath%20d='M24%2014C22.8971%2014%2022%2014.9158%2022%2016.0417C22%2016.3642%2022.2554%2016.625%2022.5714%2016.625C22.8874%2016.625%2023.1429%2016.3642%2023.1429%2016.0417C23.1429%2015.5592%2023.5274%2015.1667%2024%2015.1667C24.4726%2015.1667%2024.8571%2015.5592%2024.8571%2016.0417C24.8571%2016.5241%2024.4726%2016.9167%2024%2016.9167C23.684%2016.9167%2023.4286%2017.1774%2023.4286%2017.5V18.6667C23.4286%2018.9892%2023.684%2019.25%2024%2019.25C24.316%2019.25%2024.5714%2018.9892%2024.5714%2018.6667V17.9882C25.3943%2017.7351%2026%2016.9633%2026%2016.0417C26%2014.9158%2025.1029%2014%2024%2014Z'%20fill='white'%20fill-opacity='0.7'/%3e%3cpath%20d='M24%2019.8333C23.684%2019.8333%2023.4286%2020.0941%2023.4286%2020.4167C23.4286%2020.7392%2023.684%2021%2024%2021C24.316%2021%2024.5714%2020.7392%2024.5714%2020.4167C24.5714%2020.0941%2024.316%2019.8333%2024%2019.8333Z'%20fill='white'%20fill-opacity='0.7'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_82_2990'%3e%3crect%20width='48'%20height='48'%20rx='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",ze={class:"py-4 flex justify-between items-center border-b border-border px-5 sticky top-0 bg-bg-card z-1"},Qe={class:"py-4 px-5"},Re={class:"bg-bg-surface/50 p-2 rounded-lg flex gap-2"},We={class:"text-base font-medium text-text-primary cursor-pointer"},Ze={class:"flex flex-col mt-2"},Ge={class:"text-sm text-text-secondary mt-2"},He={key:0},Ye={class:"mb-2 capitalize"},Je=["onKeydown"],Xe={key:1,class:"mt-3"},et={key:0,class:"border border-border space-y-1 p-2.5 mt-1 rounded-lg"},tt={class:"text-sm text-text-primary"},at={key:2,class:"mt-3"},st={key:0,class:"border border-border space-y-1 p-2.5 mt-1 rounded-lg"},lt={class:"text-sm text-text-primary"},ot=me({__name:"DetailPanel",props:{showPanel:{type:Boolean,default:!0},details:{type:Object,default:()=>({})}},emits:["close","update:details","comment:post","priority:change"],setup(l,{emit:o}){const f=p("details"),C=[{label:"Details",value:"details"},{label:"Tasks",value:"tasks"},{label:"History",value:"history"}],{data:S}=Me(),{mutate:k}=Ne(),i=l,b=p(!1),y=p(i.details["card-title"]??""),J=p(i.details.workspace_lane_id??"");G(()=>i.details["card-title"],c=>{y.value=c,J.value=i.details.workspace_lane_id});const x=p(i.details["card-description"]);G(()=>i.details,()=>{x.value=i.details["card-description"]});const $=p(null);function I(){b.value=!0,Ce(()=>{var c,a;(c=$.value)==null||c.focus(),(a=$.value)==null||a.select()})}function U(){y.value.trim()||(y.value=i.details["card-title"]??""),ee.mutate({card_id:i.details._id,variables:{"card-title":y.value.trim()}}),b.value=!1}function X(){y.value=i.details["card-title"]??"",b.value=!1}const w=p({startDate:i.details["start-date"],endDate:i.details["end-date"]}),M=_e(()=>i.details["start-date"]);G(M,c=>{w.value={...w.value,startDate:c}});const E=ve(),ee=Pe({onSuccess:()=>{E.invalidateQueries({queryKey:["get-sheets"]}),E.invalidateQueries({queryKey:["sheet-list"]}),E.invalidateQueries({queryKey:["roles"]})}}),T=(c,a)=>{console.log(a,"slug",c),k({id:i.details._id,payload:{variable_values:[{module_variable_id:a,value:c}]}})};return(c,a)=>{var L,q,O,B,N,j,z,Q;return r(),u("div",{class:be(`max-w-[358px] bg-bg-card  rounded-lg overflow-y-auto overflow-x-hidden relative ${l.showPanel?"!translate-x-0 w-full h-full min-w-[350px] overflow-y-auto":"!translate-x-100 w-0 h-0"} transition-all`)},[s("div",ze,[a[4]||(a[4]=s("h5",{class:"text-[16px] font-medium"},"Profile",-1)),s("i",{class:"cursor-pointer text-text-primary fa-solid fa-close",onClick:a[0]||(a[0]=()=>{c.$emit("close")})})]),s("div",Qe,[s("div",Re,[a[5]||(a[5]=s("img",{src:je,alt:"",class:"w-12 h-12 rounded-full"},null,-1)),s("div",null,[s("h1",We,g(i.details.name??i.details.title),1)])]),m(Oe,{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=n=>f.value=n),options:C},null,8,["modelValue"]),s("div",Ze,[a[6]||(a[6]=s("h1",{class:"text-base font-medium text-text-primary cursor-pointer"}," Task Progress ",-1)),m(Le,{class:"mt-2",progress:(L=i==null?void 0:i.details)==null?void 0:L.assigned_cards_count,fillColor:"bg-accent ",indeterminate:!0},null,8,["progress"]),s("span",Ge,"Completed 10 tasks out of "+g((q=i==null?void 0:i.details)==null?void 0:q.assigned_cards_count),1)]),f.value=="details"?(r(),u("section",He,[s("div",Ye,[b.value?ae((r(),u("input",{key:0,ref_key:"titleInput",ref:$,"onUpdate:modelValue":a[2]||(a[2]=n=>y.value=n),onBlur:U,onKeydown:[se(A(U,["prevent"]),["enter"]),se(A(X,["prevent"]),["esc"])],class:"border border-border rounded px-2 py-1 w-full text-xl font-medium",type:"text"},null,40,Je)),[[he,y.value]]):(r(),u("h1",{key:1,class:"text-xl font-medium text-text-primary cursor-pointer",onClick:I},g(y.value),1))]),s("div",null,[(r(!0),u(H,null,te(v(S),(n,h)=>{var R;return r(),u("div",{key:h,class:"grid grid-cols-2 capitalize items-center gap-2 text-sm mt-4"},[Y(g(n.title)+" ",1),(r(),fe(qe,{key:h,placeholder:`select ${n.title}`,onClick:a[3]||(a[3]=A(()=>{},["stop"])),default:(n==null?void 0:n.value)??`select ${n.title}`,data:n==null?void 0:n.data,cardId:(R=l.details)==null?void 0:R._id,onOnselect:W=>T(W,n._id)},null,8,["placeholder","default","data","cardId","onOnselect"]))])}),128))])])):P("",!0),f.value=="tasks"?(r(),u("section",Xe,[a[8]||(a[8]=s("span",{class:"text-base text-text-primary"},"Worked On",-1)),((B=(O=l.details)==null?void 0:O.assigned_cards)==null?void 0:B.length)>0?(r(),u("ul",et,[(r(!0),u(H,null,te((N=l.details)==null?void 0:N.assigned_cards,(n,h)=>(r(),u("li",{class:"p-2",key:h},[s("h1",tt,g(n==null?void 0:n.title),1),a[7]||(a[7]=s("p",{class:"text-xs text-text-secondary"},"Design Project . Olivia Updated on April 9, 2025",-1))]))),128))])):P("",!0)])):P("",!0),f.value=="history"?(r(),u("section",at,[a[10]||(a[10]=s("span",{class:"text-base text-text-primary"},"history",-1)),((z=(j=l.details)==null?void 0:j.assignment_history)==null?void 0:z.length)>0?(r(),u("ul",st,[(r(!0),u(H,null,te((Q=l.details)==null?void 0:Q.assignment_history,(n,h)=>(r(),u("li",{class:"p-2",key:h},[s("h1",lt,g(n==null?void 0:n.title),1),a[9]||(a[9]=s("p",{class:"text-xs text-text-secondary"},"Design Project . Olivia Updated on April 9, 2025",-1))]))),128))])):P("",!0)])):P("",!0)])],2)}}}),it=ke(ot,[["__scopeId","data-v-a156ffdc"]]),nt={class:"flex-auto flex-grow h-full bg-bg-card rounded-lg border border-border overflow-x-auto flex-col flex"},dt={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1"},rt={class:"flex gap-3 items-center"},ut={class:"flex p-4 overflow-x-auto gap-3"},ct=["onClick"],pt={key:1,class:"p-4 space-y-2 bg-bg-surface m-4 rounded-md"},mt={class:"text-sm text-text-primary"},vt=["onClick"],ft={key:0,class:"bg-bg-body rounded-lg p-4"},yt={class:"flex items-center mt-3 gap-3"},xt=me({__name:"People",setup(l){const o=ce(()=>pe(()=>import("./KanbanBoard-6d92uia1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))),f=ce(()=>pe(()=>import("./KanbanCard-CAYXmyx0.js"),__vite__mapDeps([17,1,2,8,6,9,10,11,12,14,18,5,7,19,20,21,22,23,24,25,26]))),C=[{title:"Role",_id:"role"},{title:"Team",_id:"team"},{title:"Status",_id:"status"}],S=p("role"),k=p(!1),i=p(),{workspaceId:b}=Se(),{mutate:y,isPending:J}=Ke({onSuccess:e=>{x.value=[...x.value||[],e],c.value="",T.value=!1}}),x=p([]),{data:$,isPending:I,isFetching:U}=Be(b.value,S);G($,e=>{x.value=e}),we(()=>{x.value=$.value});const X=p("kanban"),w=p(),M=e=>{w.value=e};function E(e){e.type==="column"||B.mutate({id:e.meta.moved._id,payload:{roleId:e.meta.toColumnId}})}const ee=e=>{},T=p(!1),c=p("");function a(){T.value=!T.value}function L(){const e=c.value.trim();e&&q(e)}const q=e=>{const t={workspace_id:b.value,title:e,max_num_people:1};y({payload:t})},O=ve(),B=Te({onSuccess:()=>{O.invalidateQueries({queryKey:["people-lists"]})}}),N=e=>{const t={workspace_id:b.value,title:e==null?void 0:e.title,max_num_people:1};B.mutate({id:e._id,payload:t})},{mutate:j,isPending:z}=Fe({onSuccess:e=>{k.value=!1,x.value=x.value.filter(t=>{var D;return t._id!==((D=e.deletedRole)==null?void 0:D._id)})}}),Q=()=>{var e;j({id:(e=i.value)==null?void 0:e.columnId})},n=e=>{k.value=!0,i.value=e},{mutate:h,isPending:R}=Ie({onSuccess:()=>{c.value="",T.value=!1,O.invalidateQueries({queryKey:["people-lists"]})}}),W=e=>{i.value=e;const t={name:ye(e.email[0]),email:e.email[0],role_id:e._id,workspace_id:b.value,additional_seats:1};h({id:e._id,payload:t})};function ye(e){const D=(e.split("@")[0]||"").split("+")[0].split(/[^a-zA-Z]+/).filter(Boolean);return D.length?D.map(K=>K.charAt(0).toUpperCase()+K.slice(1).toLowerCase()).join(" "):e}const oe=e=>{e.showADDNEW=!e.showADDNEW},xe=e=>{W(e)},ge=e=>{w.value=e};return(e,t)=>{var K,ie,ne,de;const D=De("Searchbar");return r(),u(H,null,[s("div",nt,[s("div",dt,[m(Ve,{prefix:"View By",modelValue:S.value,"onUpdate:modelValue":t[0]||(t[0]=d=>S.value=d),options:C,variant:"secondary"},null,8,["modelValue"]),s("div",rt,[m(D,{placeholder:"Search in Orchit AI space"})])]),ae(m($e,null,null,512),[[re,v(I)||v(U)]]),ae(s("div",ut,[((K=x.value)==null?void 0:K.length)>0?(r(),fe(v(o),{key:0,onOnPlus:t[1]||(t[1]=d=>W(d)),"onDelete:column":t[2]||(t[2]=d=>n(d)),"onUpdate:column":t[3]||(t[3]=d=>N(d)),onReorder:E,onAddColumn:q,"onSelect:ticket":M,board:x.value,onOnBoardUpdate:ee,variable_id:"",sheet_id:"selected_sheet_id"},{ticket:Z(({ticket:d})=>[m(v(f),{onClick:F=>ge(d),ticket:d},null,8,["onClick","ticket"])]),"column-footer":Z(({column:d})=>[d.showADDNEW?d.showADDNEW?(r(),u("div",pt,[s("p",mt,g(d.title)+" "+g(d.cards.length+1),1),m(Ee,{placeholder:"team member email",modelValue:d.email,"onUpdate:modelValue":F=>d.email=F},null,8,["modelValue","onUpdate:modelValue"]),t[11]||(t[11]=s("p",{class:"text-sm text-text-secondary"},"You can assign user later",-1)),m(ue,{size:"md",onClick:F=>xe(d)},{default:Z(()=>[Y(g(v(R)?"Adding...":"Add Seat"),1)]),_:2},1032,["onClick"]),s("i",{class:"fa-solid fa-close cursor-pointer ml-2",onClick:F=>oe(d)},null,8,vt)])):P("",!0):(r(),u("div",{key:0,onClick:F=>oe(d),class:"flex py-3 px-3 justify-center text-sm text-text-primary items-center gap-3 border border-text-primary cursor-pointer border-dashed mb-4 mx-4 rounded-md"},t[10]||(t[10]=[s("i",{class:"fa-solid fa-plus"},null,-1),Y(" Add Seat ")]),8,ct))]),_:1},8,["board"])):P("",!0),s("div",{class:"min-w-[328px]",onClick:t[5]||(t[5]=A(()=>{},["stop"]))},[T.value?(r(),u("div",ft,[m(Ae,{autofocus:!0,modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=d=>c.value=d),placeholder:"Add New list",onKeyup:se(L,["enter"])},null,8,["modelValue"]),t[12]||(t[12]=s("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),s("div",yt,[m(ue,{onClick:L,variant:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:Z(()=>[Y(g(v(J)?"Adding...":"Add Team"),1)]),_:1}),s("i",{class:"fa-solid fa-close cursor-pointer",onClick:a})])])):(r(),u("button",{key:1,class:"text-sm text-text-primary py-2.5 cursor-pointer font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",onClick:A(a,["stop"])}," + Add Team "))])],512),[[re,X.value=="kanban"&&!v(I)&&!v(U)]])]),m(Ue,{onClick:t[6]||(t[6]=A(()=>{},["stop"])),modelValue:k.value,"onUpdate:modelValue":t[7]||(t[7]=d=>k.value=d),title:"Delete List",itemLabel:"list",itemName:(ie=i.value)==null?void 0:ie.title,requireMatchText:(ne=i.value)==null?void 0:ne.title,confirmText:"Delete workspace",cancelText:"Cancel",size:"md",loading:v(z),onConfirm:Q,onCancel:t[8]||(t[8]=()=>{k.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),m(it,{details:w.value,onClose:t[9]||(t[9]=()=>{M({variables:{}})}),showPanel:!!((de=w.value)!=null&&de.title)},null,8,["details","showPanel"])],64)}}}),St=Object.freeze(Object.defineProperty({__proto__:null,default:xt},Symbol.toStringTag,{value:"Module"}));export{St as P,Pt as a,$t as b,At as c,Vt as u};
