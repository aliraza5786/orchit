const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-KZdkD__w.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-BvRuR356.js","assets/index-DBsPnkqF.js","assets/index-CdXuIZij.css","assets/ConfirmDeleteModal-DeWj1lAD.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-Dyr6U2pl.js","assets/SidePanel-mBPl-KFT.js","assets/SidePanel-U7OOMI6M.css","assets/KanbanBoard-BJpd9g_O.js","assets/vuedraggable.umd-DGmzp8Hr.js","assets/_commonjsHelpers-_d1bhYXs.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-CecyGwfr.js","assets/KanbanBoard-Dffh696C.css"])))=>i.map(i=>d[i]);
import{R as _t,S as Ot,p as f,T as Te,c as D,r as b,n as R,K as yt,U as wt,d as ht,V as ul,W as Ul,j as g,f as t,h as De,z as H,i as U,F as me,y as xe,o as c,t as L,Q as cl,J as Xt,g as ae,e as ce,w as de,X as pl,_ as fl,I as Jt,B as We,k as I,Y as Nt,D as nt,P as vl,N as ml,M as ql,Z as Pl,$ as zl,a0 as jl,a1 as Rl,a2 as Hl,E as Zt,a3 as Gl,a4 as Jl,a5 as Zl,u as Xl,a6 as Yl,a7 as ea,a8 as ta,a9 as la,aa,ab as sa,ac as na,ad as ue,ae as Gt,q as ra,af as oa,l as Vl,ag as Ht,A as Wt,ah as be,ai as ia,aj as Ll,ak as da,al as ua,v as El,am as ca,an as Ml,ao as pa}from"./index-DBsPnkqF.js";import{u as gl}from"./useTheme-PYv0dD4d.js";import{L as fa}from"./Loader-BCrLqXj0.js";import{_ as va}from"./BaseTextAreaField.vue_vue_type_script_setup_true_lang-C6hHn0CG.js";import{_ as ma}from"./SearchBar.vue_vue_type_script_setup_true_lang-CfAB7RHv.js";import{o as Kt,_ as ga}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-Dyr6U2pl.js";import{_ as ba,C as xa,a as ya,T as _a,b as Al,c as ha,k as ka}from"./TimelineView-CFvOYtEx.js";import{K as Wl}from"./KanbanSkeleton-_3iySgPp.js";import{K as wa}from"./KanbanTicket-Cd0wLL3v.js";import{F as Bl}from"./fuse-Ch1WBRTM.js";import{l as Ca}from"./lodash-CQYOKM_D.js";import"./favicon-BAFXWHLW.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-CecyGwfr.js";import"./_commonjsHelpers-_d1bhYXs.js";const Sa="data:image/svg+xml,%3csvg%20width='60'%20height='46'%20viewBox='0%200%2060%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M59.7443%2034.8967L50.5682%2025.7206C50.4457%2025.5984%2050.2897%2025.5152%2050.1199%2025.4816C49.9501%2025.4479%2049.7742%2025.4653%2049.6143%2025.5315C49.4544%2025.5976%2049.3176%2025.7097%2049.2213%2025.8535C49.125%2025.9973%2049.0734%2026.1664%2049.073%2026.3394V30.517H25.9775V40.5114H49.0755V44.689C49.0759%2044.8621%2049.1275%2045.0312%2049.2238%2045.175C49.3201%2045.3187%2049.4569%2045.4308%2049.6168%2045.497C49.7767%2045.5632%2049.9527%2045.5805%2050.1224%2045.5468C50.2922%2045.5132%2050.4482%2045.43%2050.5708%2045.3078L59.7468%2036.1318C59.9095%2035.9672%2060.0005%2035.7451%2060.0001%2035.5137C59.9996%2035.2823%2059.9076%2035.0605%2059.7443%2034.8967Z'%20fill='%23C6DBA9'/%3e%3cpath%20d='M32.3149%2030.5293C30.664%2031.5967%2028.7394%2032.1633%2026.7734%2032.1609V40.5237H34.7295C39.2829%2038.5638%2042.9649%2035.0102%2045.0851%2030.5293H32.3149Z'%20fill='url(%23paint0_linear_250_16424)'/%3e%3cpath%20d='M46.2209%2020.2832C46.2317%2015.0884%2044.2448%2010.0884%2040.6714%206.3179C37.0981%202.54738%2032.2119%200.295026%2027.024%200.0269855C21.8362%20-0.241055%2016.7439%201.49574%2012.801%204.87791C8.85809%208.26009%206.36647%2013.0287%205.84178%2018.1969L2.46233%2017.8913C2.31055%2017.8782%202.15829%2017.9103%202.02467%2017.9835C1.89106%2018.0566%201.78205%2018.1677%201.71134%2018.3026C1.64063%2018.4376%201.61138%2018.5904%201.62726%2018.7419C1.64313%2018.8934%201.70343%2019.0368%201.80058%2019.1542L9.51927%2028.406C9.79205%2028.7344%2010.277%2028.7773%2010.378%2028.5045L19.6298%2020.7833C20.3876%2020.3413%2020.1173%2019.4825%2019.4328%2019.4194L15.8008%2019.091C16.0297%2017.1283%2016.8213%2015.2735%2018.0802%2013.7503C19.3391%2012.2271%2021.0115%2011.1004%2022.8961%2010.5059C24.7806%209.9114%2026.7969%209.8745%2028.7019%2010.3996C30.6069%2010.9248%2032.3195%2011.9896%2033.6332%2013.4657C34.947%2014.9419%2035.8059%2016.7664%2036.1065%2018.7195C36.4071%2020.6726%2036.1365%2022.6709%2035.3274%2024.4738C34.5183%2026.2766%2033.2051%2027.8071%2031.5462%2028.8807C29.8872%2029.9544%2027.9531%2030.5254%2025.977%2030.5251H25.9283V40.5094C31.2249%2040.4031%2036.7093%2038.2263%2040.4202%2034.4455C44.1311%2030.6648%2046.2134%2025.5808%2046.2209%2020.2832Z'%20fill='%23D7A39E'/%3e%3cpath%20d='M25.9773%2030.5293H0V40.5237H25.9773V30.5293Z'%20fill='url(%23paint1_linear_250_16424)'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_250_16424'%20x1='6.53714'%20y1='35.5252'%20x2='47.0198'%20y2='35.5252'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%236C798F'/%3e%3cstop%20offset='1'%20stop-color='%236C798F'%20stop-opacity='0.1'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_250_16424'%20x1='0'%20y1='36'%20x2='26'%20y2='36'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23E8D4D3'%20stop-opacity='0'/%3e%3cstop%20offset='1'%20stop-color='%23E2A39F'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",$a=(k,x,N={})=>Ot({queryKey:D(()=>["sprint-list",f(k),f(x)]),queryFn:({signal:T})=>Te({url:`sprints/${f(k)}`,method:"GET",signal:T,params:{sprintType:f(x)}}),...N}),Da=(k,x={})=>{const N=D(()=>!!f(k));return Ot({queryKey:["sprint-cards",k],queryFn:({signal:T})=>Te({url:`sprints/${f(k)}/backlog`,method:"GET",signal:T}),enabled:N,...x})},Ta=(k,x,N={})=>Ot({queryKey:["sprint-kanban",k,x],queryFn:({signal:T})=>Te({url:"workspace/cards/sprintgrouped",method:"GET",signal:T,params:{sprint_id:f(k),variable_id:"68b6c96e0a95eef7d14e6981",sheet_id:f(x)}}),...N}),Va=(k,x={})=>_t({key:["sprint-complete"]},{mutationFn:N=>Te({url:`sprints/${f(k)}/complete`,method:"POST",data:N.payload}),...x}),La=(k,x={})=>{const N=D(()=>!!f(k));return Ot({queryKey:["sprint-detail",k],queryFn:({signal:T})=>Te({url:`sprints/detail/${f(k)}?include_cards=true`,method:"GET",signal:T}),enabled:N,...x})},dl=(k,x,N=null,T={})=>Ot({queryKey:["backlog-list",k,f(x),f(N)],queryFn:({signal:Q})=>Te({url:`sprints/workspace/${f(k)}/cards`,method:"GET",signal:Q,params:{include_sprint_cards:!1,sprintType:f(x),module_id:f(N)}}),...T}),Ea=(k={})=>_t({key:["add-sprint"]},{mutationFn:x=>Te({url:"/sprints",method:"POST",data:x.payload}),...k}),Kl=(k={})=>_t({key:["move-card-to-sprint"]},{mutationFn:x=>Te({url:`/sprints/${x.id}/cards`,method:"POST",data:x.payload}),...k}),Il=(k={})=>_t({key:["add-sprint"]},{mutationFn:x=>Te({url:`/sprints/${x.id}`,method:"PUT",data:x.payload}),...k}),Ma=(k={})=>_t({key:["start-sprint"]},{mutationFn:x=>Te({url:`/sprints/${x.id}/start`,method:"POST",data:x.payload}),...k}),Aa=(k={})=>_t({key:["delete-sprint"]},{mutationFn:x=>Te({url:`/sprints/${x}`,method:"DELETE"}),...k}),Ba=(k={})=>_t({key:["remove-card-from-sprint"]},{mutationFn:x=>Te({url:`sprints/${f(x.sprintId)}/cards/remove `,method:"POST",data:{card_ids:[x.cardId]}}),...k}),Ql="jira-like:";function Fl(k="id"){return`${k}_${Math.random().toString(36).slice(2,9)}`}function Nl(k,x){try{localStorage.setItem(Ql+k,JSON.stringify(x))}catch{}}function Ol(k,x){try{const N=localStorage.getItem(Ql+k);return N?JSON.parse(N):x}catch{return x}}function Ia(k){switch(k){case"Highest":return"rounded-md bg-red-50 px-2 py-0.5 text-xs text-red-700";case"High":return"rounded-md bg-orange-50 px-2 py-0.5 text-xs text-orange-700";case"Medium":return"rounded-md bg-amber-50 px-2 py-0.5 text-xs text-amber-700";case"Low":return"rounded-md bg-gray-100 px-2 py-0.5 text-xs text-gray-600"}}function Fa(){const k=b(Ol("backlog",[])),x=b(Ol("sprints",[]));if(x.value.length===0)x.value.push({id:Fl("sprint"),name:"Sprint 1",goal:"",start:"",end:"",started:!1,tickets:[]});else if(x.value.length>1){for(let d=1;d<x.value.length;d++)k.value.push(...x.value[d].tickets);x.value=[x.value[0]]}const N=b(x.value[0].id);R([k,x],()=>{Nl("backlog",k.value),Nl("sprints",x.value)},{deep:!0});const T=b([]),Q=yt({}),O=D(()=>k.value.length>0&&T.value.length===k.value.length),u=d=>{var r;const s=x.value.find(n=>n.id===d);return!!s&&s.tickets.length>0&&(((r=Q[d])==null?void 0:r.length)||0)===s.tickets.length};function M(d,s,r){const n=s.target.checked;if(d==="backlog")T.value=n?k.value.map(v=>v.id):[];else if(r){const v=x.value.find(y=>y.id===r);Q[r]=n&&v?v.tickets.map(y=>y.id):[]}}function P(d,s,r,n){const v=r.target.checked,y=d==="backlog"?T.value:Q[n]||(Q[n]=[]);if(v&&!y.includes(s)&&y.push(s),!v){const ee=y.indexOf(s);ee>=0&&y.splice(ee,1)}}function W(){return x.value.find(d=>d.id===N.value)||x.value[0]}function q(){const s=[...k.value,...x.value.flatMap(n=>n.tickets)].map(n=>Number(String(n.key).replace(/[^0-9]/g,""))).filter(n=>!Number.isNaN(n));return`PRJ-${s.length?Math.max(...s)+1:1}`}const{mutate:F}=Kl({onSuccess:()=>{wt.success("Cards moved to sprint successfully")},onError:d=>{wt.error("Failed to move cards: "+(d.message||"Unknown error"))}});function Z(){var n,v;const d=W();if(!d||!T.value.length)return;const s=[],r=[];for(const y of k.value)(T.value.includes(y.id)?r:s).push(y);k.value=s,d.tickets.push(...r),T.value=[],r.length>0&&F({id:d.id,payload:{card_ids:r.map(y=>y.id),priority:((v=(n=r[0])==null?void 0:n.priority)==null?void 0:v.toLowerCase())||"medium",story_points:r.reduce((y,ee)=>y+(ee.storyPoints||0),0)}})}function K(d){const s=x.value.find(y=>y.id===d);if(!s)return;const r=Q[d]||[],n=[],v=[];for(const y of s.tickets)(r.includes(y.id)?v:n).push(y);s.tickets=n,k.value.push(...v),Q[d]=[]}function Y(d,s){if(d==="backlog")k.value=k.value.filter(r=>!T.value.includes(r.id)),T.value=[];else if(s){const r=Q[s]||[],n=x.value.find(v=>v.id===s);if(!n)return;n.tickets=n.tickets.filter(v=>!r.includes(v.id)),Q[s]=[]}}function E(d,s){const r={id:Fl("T"),key:q(),createdAt:new Date().toISOString(),...s};if(d==="backlog")k.value.push(r);else{const n=W();n==null||n.tickets.push(r)}}function z(d){const s=W();s&&(s.name=d.name??s.name,s.goal=d.goal??s.goal,s.start=d.start??s.start,s.end=d.end??s.end)}function re(){const d=W();d&&(d.started=!d.started)}function B(d){return d.tickets.reduce((s,r)=>s+(r.storyPoints||0),0)}return{backlog:k,sprints:x,activeSprintId:N,selectedBacklogIds:T,selectedSprintIds:Q,allBacklogChecked:O,allSprintChecked:u,toggleAll:M,toggleOne:P,getActiveSprint:W,createTicket:E,saveSprintMeta:z,toggleStartSprint:re,sprintPoints:B,moveSelectedToSprint:Z,moveSelectedToBacklog:K,deleteSelected:Y,priorityClass:Ia}}const Na={class:"h-full min-h-0"},Oa={key:0,class:"empty-state flex flex-col justify-center items-center h-full"},Ua=["disabled"],qa={key:1,class:"overflow-y-auto h-[calc(100%-50px)] tickets-scroll"},Pa={class:"flex flex-col flex-1 gap-[4px] min-w-0 me-1"},za={key:0,class:"flex items-center justify-center py-10"},ja=["onDragstart","onClick"],Ra=["checked","onChange"],Ha={class:"flex items-center text-[14px] font-sans font-medium capitalize text-text-secondary flex-1 min-w-0"},Wa={class:"truncate"},Ka={class:"flex-shrink-0"},Qa={key:0,class:"flex justify-center text-gray-500 items-center text-[11px] aspect-square w-[24px] h-[24px] bg-bg-body rounded-full border-border-input border-2"},Ga={key:1,class:"w-6 h-6 rounded-full"},Ja=["src"],Za={key:2,class:"text-[11px] aspect-square w-[24px] h-[24px] flex justify-center items-center bg-accent/30 text-accent border-accent border rounded-full"},Xa=ht({__name:"BacklogTable",props:{searchQuery:{type:String,default:""},sprintType:{type:String,default:""},checkedAll:{type:Boolean,default:!1},moduleId:{type:String,default:""}},emits:["ticket-dragged-to-sprint","open-ticket","ticket-moved-to-backlog","open-create-ticket"],setup(k,{emit:x}){const{theme:N}=gl(),{canCreateCard:T}=ul(),Q=x,O=k,{workspaceId:u}=Ul(),M=b(O.moduleId??null),{data:P,isPending:W}=dl(u,O.sprintType,M),q=b([]),F=b(!1),Z=b([]),K=b([]);R(P,r=>{r!=null&&r.cards&&(q.value=r.cards.map(n=>{var V,ye,ge,Ke;const v=((V=n.card)==null?void 0:V.variables)??{},y=((ye=n.card)==null?void 0:ye._id)??n.card_id,ee=String(v["card-status"]??"").trim(),_=String(v.priority??"").trim();return{id:y,key:v["card-code"]||(y==null?void 0:y.slice(-6))||"PRJ-?",summary:v["card-title"]||"(untitled)",type:"Story",status:ee,assignee:((ge=n.card)==null?void 0:ge.assigned_to)??"Unassigned",storyPoints:Number(n.story_points??0)||0,priority:E(_),createdAt:((Ke=n.card)==null?void 0:Ke.created_at)??new Date().toISOString(),description:v["card-description"]||""}}))},{immediate:!0}),R(q,r=>{const n=new Set(r.map(v=>v.id));K.value=K.value.filter(v=>n.has(v))});const Y=D(()=>{if(console.log(O.searchQuery,"this is query"),!O.searchQuery)return q.value;const r=O.searchQuery.toLowerCase();return q.value.filter(n=>{var y;const v=typeof n.assignee=="string"?n.assignee:((y=n.assignee)==null?void 0:y.u_full_name)||"";return n.key.toLowerCase().includes(r)||n.summary.toLowerCase().includes(r)||v.toLowerCase().includes(r)})});function E(r){const n=String(r??"").toLowerCase();return["highest","blocker","critical"].includes(n)?"Highest":["high","major"].includes(n)?"High":["medium","normal"].includes(n)?"Medium":"Low"}function z(r,n,v){var V;const y=K.value.includes(n.id)?[...K.value]:[n.id],ee=y.map(ye=>q.value.find(ge=>ge.id===ye)).filter(Boolean);Z.value=y;const _=JSON.stringify({id:n.id,ids:y,from:v,tickets:ee});(V=r.dataTransfer)==null||V.setData("text/plain",_),r.dataTransfer&&(r.dataTransfer.effectAllowed="move")}function re(r){var n;F.value=!1,((n=r.dataTransfer)==null?void 0:n.dropEffect)!=="none"&&Z.value.length&&(q.value=q.value.filter(v=>!Z.value.includes(v.id)),K.value=K.value.filter(v=>!Z.value.includes(v))),Z.value=[]}function B(r){var n;r.preventDefault(),F.value=!1;try{const v=(n=r.dataTransfer)==null?void 0:n.getData("text/plain");if(!v)return;const y=JSON.parse(v);if(y.from!=="sprint")return;const _=(y.tickets&&y.tickets.length?y.tickets:y.ticket?[y.ticket]:[]).filter(Boolean).filter(ye=>!q.value.some(ge=>ge.id===ye.id));_.length&&q.value.push(..._);const V=y.ids&&y.ids.length?y.ids:y.id?[y.id]:[];V.length&&Q("ticket-moved-to-backlog",V,y.sprintId),console.log(y.sprintId,"sprintId ....")}catch(v){console.error("Drop error:",v)}}function d(r,n){n?K.value.includes(r)||K.value.push(r):K.value=K.value.filter(v=>v!==r)}function s(r,n){const v=n.target.checked;d(r,v)}return R(()=>O.checkedAll,r=>{r?(K.value=q.value.map(n=>n.id),console.log(K.value)):K.value=[]}),(r,n)=>(c(),g("section",Na,[t("div",{class:H(["rounded-lg flex flex-col h-full",F.value?"ring-2 ring-blue-400":""]),onDragover:n[3]||(n[3]=De(()=>{},["prevent"])),onDragenter:n[4]||(n[4]=v=>F.value=!0),onDragleave:n[5]||(n[5]=v=>F.value=!1),onDrop:n[6]||(n[6]=v=>B(v))},[!f(W)&&Y.value.length===0?(c(),g("div",Oa,[n[7]||(n[7]=t("img",{src:Sa,class:"mb-4",alt:"backlog-plan"},null,-1)),n[8]||(n[8]=t("h6",{class:"text-sm text-text-primary font-semibold mb-1"}," Get started in the backlog ",-1)),n[9]||(n[9]=t("p",{class:"text-sm text-text-primary/90 mb-4"}," Plan and start a sprint to see issues here. ",-1)),t("button",{disabled:!f(T),onClick:n[0]||(n[0]=v=>r.$emit("open-create-ticket")),class:H(["relative inline-flex items-center justify-center font-medium py-1.5 px-3 text-sm rounded-md focus:outline-none transition h-[34px] bg-accent text-white hover:bg-accent-hover border-border-input border",f(T)?"cursor-pointer":"cursor-not-allowed"])}," Create Ticket ",10,Ua)])):(c(),g("div",qa,[t("div",Pa,[f(W)?(c(),g("div",za,[U(fa)])):(c(!0),g(me,{key:1},xe(Y.value,v=>{var y,ee;return c(),g("div",{key:v.id,draggable:"true",class:H(["flex items-center gap-3 p-[8px] cursor-pointer transition-colors rounded-[8px]",K.value.includes(v.id)?"border-2 border-[#5a2d7f]":"border border-border-input",f(N)==="dark"?"bg-bg-body hover:bg-bg-surface":"bg-bg-charcoal hover:bg-bg-body"]),onDragstart:_=>z(_,v,"backlog"),onDragend:n[2]||(n[2]=_=>re(_)),onClick:_=>r.$emit("open-ticket",v)},[t("input",{type:"checkbox",class:"custom-checkbox bg-bg-body border border-border-input flex-shrink-0",checked:K.value.includes(v.id),onClick:n[1]||(n[1]=De(()=>{},["stop"])),onChange:_=>s(v.id,_)},null,40,Ra),t("div",Ha,[t("span",Wa,L(v.summary),1)]),t("div",Ka,[(v==null?void 0:v.assignee)==="Unassigned"?(c(),g("span",Qa," UA ")):(y=v==null?void 0:v.assignee)!=null&&y.u_profile_image?(c(),g("div",Ga,[t("img",{src:v.assignee.u_profile_image,alt:""},null,8,Ja)])):(c(),g("span",Za,L(f(cl)((ee=v==null?void 0:v.assignee)==null?void 0:ee.u_full_name)),1))])],42,ja)}),128))])]))],34)]))}}),Ya=Xt(Xa,[["__scopeId","data-v-a588dea0"]]),es="data:image/svg+xml,%3csvg%20width='60'%20height='60'%20viewBox='0%200%2060%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M9.375%2030C11.6402%2030%2013.4766%2028.1637%2013.4766%2025.8984C13.4766%2023.6332%2011.6402%2021.7969%209.375%2021.7969C7.10977%2021.7969%205.27344%2023.6332%205.27344%2025.8984C5.27344%2028.1637%207.10977%2030%209.375%2030Z'%20fill='%23AE2A19'/%3e%3cpath%20d='M26.25%2024.375C28.5152%2024.375%2030.3516%2022.5387%2030.3516%2020.2734C30.3516%2018.0082%2028.5152%2016.1719%2026.25%2016.1719C23.9848%2016.1719%2022.1484%2018.0082%2022.1484%2020.2734C22.1484%2022.5387%2023.9848%2024.375%2026.25%2024.375Z'%20fill='%23BF63F3'/%3e%3cpath%20d='M15.3931%2035.8594H11.0159V33.0938C9.93587%2033.3387%208.81469%2033.3387%207.73465%2033.0938V35.8594H1.87528C1.55115%2035.8601%201.2345%2035.9568%200.965283%2036.1373C0.696064%2036.3178%200.486343%2036.574%200.362583%2036.8736C0.238824%2037.1731%200.206573%2037.5027%200.269899%2037.8205C0.333226%2038.1384%200.489292%2038.4304%200.718404%2038.6597L7.05872%2045L0.718404%2051.3403C0.489292%2051.5696%200.333226%2051.8616%200.269899%2052.1795C0.206573%2052.4973%200.238824%2052.8269%200.362583%2053.1264C0.486343%2053.426%200.696064%2053.6822%200.965283%2053.8627C1.2345%2054.0432%201.55115%2054.1399%201.87528%2054.1406H15.3931L21.7503%2045L15.3931%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M34.4562%2035.8594H27.8937V27.4688C26.8137%2027.7138%2025.6925%2027.7138%2024.6125%2027.4688V35.8594H19.3896L25.7487%2045L19.3896%2054.1406H34.4562L40.8143%2045L34.4562%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M43.8281%2019.6875H55.3125C55.7475%2019.6873%2056.1647%2019.5143%2056.4723%2019.2067C56.7799%2018.8991%2056.9529%2018.4819%2056.9531%2018.0469V9.375C56.9529%208.93996%2056.7799%208.5228%2056.4723%208.21518C56.1647%207.90755%2055.7475%207.73462%2055.3125%207.73438H43.8281V7.5C43.8281%207.06488%2043.6553%206.64758%2043.3476%206.3399C43.0399%206.03223%2042.6226%205.85938%2042.1875%205.85938C41.7524%205.85938%2041.3351%206.03223%2041.0274%206.3399C40.7197%206.64758%2040.5469%207.06488%2040.5469%207.5V32.5781H43.8281V19.6875Z'%20fill='%23FCA700'/%3e%3cpath%20d='M59.2843%2043.8403L51.7843%2036.3403C51.6322%2036.1878%2051.4514%2036.0668%2051.2524%2035.9842C51.0534%2035.9017%2050.8401%2035.8593%2050.6246%2035.8594H38.4521L44.8121%2045L38.4531%2054.1406H50.6246C50.8401%2054.1407%2051.0534%2054.0983%2051.2524%2054.0158C51.4514%2053.9332%2051.6322%2053.8122%2051.7843%2053.6597L59.2843%2046.1597C59.4368%2046.0075%2059.5577%2045.8267%2059.6402%2045.6277C59.7228%2045.4287%2059.7652%2045.2154%2059.7652%2045C59.7652%2044.7846%2059.7228%2044.5713%2059.6402%2044.3723C59.5577%2044.1733%2059.4368%2043.9925%2059.2843%2043.8403Z'%20fill='%2382B536'/%3e%3c/g%3e%3c/svg%3e",ts={key:0,class:"overflow-y-auto h-[calc(100%-50px)] tickets-scroll pt-4"},ls={class:"flex flex-col flex-1 gap-[4px] min-w-0 me-1"},as=["onDragstart","onClick"],ss=["checked","onChange"],ns={class:"flex items-center text-[14px] font-sans font-medium capitalize text-text-secondary flex-1 min-w-0"},rs={class:"truncate"},os={class:"flex-shrink-0"},is={key:0,class:"flex justify-center text-gray-500 items-center text-[11px] aspect-square w-[24px] h-[24px] bg-bg-body rounded-full border-border-input border-2"},ds={key:1,class:"w-6 h-6 rounded-full"},us=["src"],cs={key:2,class:"text-[11px] aspect-square w-[24px] flex justify-center items-center h-[24px] bg-accent/30 text-accent border-accent border rounded-full"},ps={key:1,class:"empty-state flex flex-col justify-center items-center border-dashed border-3 p-2 border-border h-[calc(100%-50px)] min-h-0"},fs={class:"text-sm text-text-primary font-semibold mb-1 text-center"},vs={class:"text-sm text-text-primary/90 mb-3 max-w-120 text-center"},ms={class:"font-bold"},gs=ht({__name:"SprintCard",props:{sprint:{},sprintId:{},searchQuery:{},checkedSprintAll:{type:Boolean},searchedData:{},label:{}},emits:["edit-sprint","toggle-start","open-ticket","move-selected-to-backlog","delete-selected-sprint","refresh"],setup(k,{emit:x}){const{theme:N}=gl(),T=k,Q=x,O=b([]),u=b([]);R(()=>T.sprint&&T.sprint.tickets,B=>{O.value=[...B||[]];const d=new Set(O.value.map(s=>s.id));u.value=u.value.filter(s=>d.has(s))},{immediate:!0,deep:!0});const M=D(()=>{var d,s;if((d=T.searchedData)!=null&&d.length)return O.value.filter(r=>T.searchedData.some(n=>n.card_id===r.id));const B=((s=T.searchQuery)==null?void 0:s.toLowerCase())||"";return B?O.value.filter(r=>{var v;const n=((v=r.assignee)==null?void 0:v.u_full_name)??"";return r.key.toLowerCase().includes(B)||r.summary.toLowerCase().includes(B)||n.toLowerCase().includes(B)}):O.value}),P=b(!1),W=b([]),{mutate:q}=Kl({onSuccess:()=>{wt.success("Card moved to sprint successfully"),Q("refresh")},onError:B=>{wt.error("Failed to move card: "+(B.message||"Unknown error"))}});function F(B,d,s,r){var ee;const n=u.value.includes(d.id)?[...u.value]:[d.id],v=n.map(_=>O.value.find(V=>V.id===_)).filter(Boolean);W.value=n;const y=JSON.stringify({id:d.id,ids:n,from:s,sprintId:r,ticket:d,tickets:v});(ee=B.dataTransfer)==null||ee.setData("text/plain",y),B.dataTransfer&&(B.dataTransfer.effectAllowed="move")}function Z(B){var d;P.value=!1,((d=B.dataTransfer)==null?void 0:d.dropEffect)!=="none"&&W.value.length&&(O.value=O.value.filter(s=>!W.value.includes(s.id)),u.value=u.value.filter(s=>!W.value.includes(s))),W.value=[]}function K(){P.value=!0}function Y(){P.value=!1}function E(B){var d;B.preventDefault(),P.value=!1;try{const s=(d=B.dataTransfer)==null?void 0:d.getData("text/plain");if(!s)return;const r=JSON.parse(s);if(r.from!=="backlog")return;const v=(r.tickets&&r.tickets.length?r.tickets:r.ticket?[r.ticket]:[]).filter(Boolean).filter(y=>!O.value.some(ee=>ee.id===y.id));if(!v.length)return;O.value.push(...v),v.forEach(y=>{q({id:T.sprintId,payload:{card_ids:[y.id],priority:(y.priority||"Medium").toLowerCase(),story_points:y.storyPoints||0}})})}catch(s){console.error("Drop error:",s)}}function z(B,d){d?u.value.includes(B)||u.value.push(B):u.value=u.value.filter(s=>s!==B)}function re(B,d){const s=d.target.checked;z(B,s)}return R(()=>T.checkedSprintAll,B=>{B?(u.value=M.value.map(d=>d.id),console.log(M.value)):u.value=[]}),(B,d)=>(c(),g("div",{class:H(["h-full min-h-0 px-2",f(N)==="dark"?"bg-bg-surface":"bg-bg-surface/30"])},[t("div",{class:H([P.value?"ring-2 ring-blue-400 rounded-lg":"","h-full box-border mt-3"]),onDragover:d[2]||(d[2]=De(()=>{},["prevent"])),onDragenter:K,onDragleave:Y,onDrop:E},[M.value.length>0&&B.sprint?(c(),g("div",ts,[t("div",ls,[(c(!0),g(me,null,xe(M.value,s=>{var r,n;return c(),g("div",{key:s.id,draggable:"true",class:H(["flex items-center  gap-3 p-[8px] cursor-pointer transition-colors rounded-[8px]",u.value.includes(s.id)?"border-2 border-[#5a2d7f]":"border border-border-input",f(N)==="dark"?"bg-bg-body hover:bg-bg-surface":"bg-bg-charcoal hover:bg-bg-body"]),onDragstart:v=>F(v,s,"sprint",B.sprint.id),onDragend:d[1]||(d[1]=v=>Z(v)),onClick:v=>B.$emit("open-ticket",s)},[t("input",{type:"checkbox",class:H(["custom-checkbox border border-border-input flex-shrink-0",f(N)==="dark"?"bg-bg-charcoal":"bg-bg-body "]),checked:u.value.includes(s.id),onClick:d[0]||(d[0]=De(()=>{},["stop"])),onChange:v=>re(s.id,v)},null,42,ss),t("div",ns,[t("span",rs,L(s.summary),1)]),t("div",os,[(s==null?void 0:s.assignee)=="Unassigned"?(c(),g("span",is,"UA")):(r=s.assignee)!=null&&r.u_profile_image?(c(),g("div",ds,[t("img",{src:s.assignee.u_profile_image,alt:""},null,8,us)])):(c(),g("span",cs,L(f(cl)(((n=s.assignee)==null?void 0:n.u_full_name)??"")),1))])],42,as)}),128))])])):(c(),g("div",ps,[d[6]||(d[6]=t("img",{src:es,class:"mb-4",alt:"backlog-plan"},null,-1)),t("h6",fs," Plan your "+L(B.label),1),t("p",vs,[d[3]||(d[3]=ae(" Drag work items from the ")),d[4]||(d[4]=t("span",{class:"font-bold"},"Backlog",-1)),ae(" section or create new ones to plan the work for this "+L(B.label)+". Select ",1),t("span",ms,"Start "+L(B.label),1),d[5]||(d[5]=ae(" when you're ready. "))])]))],34)],2))}}),bs=Xt(gs,[["__scopeId","data-v-6936b4cc"]]),xs={class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-input pb-4"},ys={class:"text-xl font-semibold"},_s={class:"px-6 gap-4 bg-bg-input pt-5 pb-8"},hs={class:"mt-3"},ks={class:"flex justify-end gap-2 p-6 sticky bottom-0 bg-bg-input border-t border-border"},ws=ht({__name:"SprintModal",props:{modelValue:{type:Boolean,default:!1},lable:{},sprint:{},creatingSprint:{type:Boolean}},emits:["update:modelValue","save","close"],setup(k,{emit:x}){const N=x,T=k,Q=D(()=>T.lable?T.lable.charAt(0).toUpperCase()+T.lable.slice(1):""),O=D({get:()=>T.modelValue,set:Y=>N("update:modelValue",Y)}),u=yt({name:"",sprintType:"",description:""}),M=yt({name:!1,sprintType:!1,description:!1}),P=D(()=>M.name&&!String(u.name||"").trim()?"Name is required":""),W=D(()=>!!String(u.name||"").trim()&&!P.value);function q(){O.value=!1,N("close")}function F(){M.name=!0,W.value&&N("save",{name:String(u.name||"").trim(),value:String(u.sprintType||"").trim(),description:String(u.description||"").trim()})}function Z(){M.name=!1,M.sprintType=!1,M.description=!1}R(()=>T.sprint,Y=>{if(!Y){u.name="";return}u.name=Y.name??(Y==null?void 0:Y.title)??"",u.sprintType="",u.description="",Z()},{immediate:!0});const K=[{title:"Milestone",_id:"milestone",dot:"#2e9bda"},{title:"Sprint",_id:"sprint",dot:"#7d68c8"},{title:"Huddle",_id:"huddle",dot:"#eea832"}];return(Y,E)=>(c(),ce(pl,{modelValue:O.value,"onUpdate:modelValue":E[5]||(E[5]=z=>O.value=z),modalClass:"!py-0",size:"md"},{default:de(()=>[t("div",xs,[t("h2",ys,"Add New "+L(Y.lable),1)]),t("div",_s,[U(fl,{class:"rounded-1",modelValue:u.name,"onUpdate:modelValue":E[0]||(E[0]=z=>u.name=z),label:"Name",placeholder:Y.lable,error:!!P.value,message:P.value,onBlur:E[1]||(E[1]=z=>M.name=!0)},null,8,["modelValue","placeholder","error","message"]),U(Jt,{class:"rounded-1 mt-3",modelValue:u.sprintType,"onUpdate:modelValue":E[2]||(E[2]=z=>u.sprintType=z),label:Q.value,options:K,error:!!P.value,message:P.value,onBlur:E[3]||(E[3]=z=>M.name=!0)},null,8,["modelValue","label","error","message"]),t("div",hs,[U(va,{modelValue:u.description,"onUpdate:modelValue":E[4]||(E[4]=z=>u.description=z),label:"Description",placeholder:`${Q.value} description...`,type:"textarea",rows:4},null,8,["modelValue","placeholder"])]),E[6]||(E[6]=t("div",null,null,-1))]),t("div",ks,[U(We,{variant:"secondary",onClick:q},{default:de(()=>E[7]||(E[7]=[ae("Cancel")])),_:1,__:[7]}),U(We,{variant:"primary",disabled:!W.value,onClick:F},{default:de(()=>[ae(L(Y.creatingSprint?"Saving...":"Save"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue"]))}}),Cs="/assets/filter-JX25xO5j.svg",Ss={class:"px-6 grid grid-cols-2 gap-4 bg-bg-input pt-5"},$s={class:"flex flex-col col-span-2"},Ds={class:"flex flex-col col-span-2"},Ts={class:"flex gap-1 flex-col col-span-2 sm:col-span-1"},Vs={key:0,class:"text-xs text-red-500"},Ls={class:"flex gap-1 flex-col col-span-2 sm:col-span-1"},Es={key:0,class:"text-xs text-red-500"},Ms={class:"flex flex-col col-span-2"},As={class:"flex flex-col col-span-2"},Bs={class:"bg-bg-body wfull px-4 py-3 rounded-lg text-xs text-text-secondary"},Is={class:"flex justify-end gap-2 p-6 sticky bottom-0 bg-bg-input"},Fs=ht({__name:"StartSprintModal",props:{modelValue:{type:Boolean,default:!1},sprint:{},creatingSprint:{type:Boolean}},emits:["update:modelValue","save","close"],setup(k,{emit:x}){const N=x,T=k,Q=[{_id:1,title:"1 Week"},{_id:2,title:"2 Weeks"},{_id:3,title:"3 Weeks"},{_id:4,title:"4 Weeks"},{_id:5,title:"Custom"}],O=D({get:()=>T.modelValue,set:s=>N("update:modelValue",s)}),u=yt({goal:"",start:new Date().toISOString().slice(0,10),end:"",sprint_name:"",duration:null}),M=yt({start:!1,end:!1}),P=D(()=>!u.start&&M.start?"Start date is required":""),W=D(()=>{if(!u.end&&M.end)return"End date is required";if(u.start&&u.end){const s=z(u.start),r=z(u.end);if(Number.isFinite(s)&&Number.isFinite(r)&&r<s)return"End date cannot be before start date"}return""}),q=D(()=>!P.value&&!W.value);function F(s){u.start=s||"",M.start=!0}function Z(s){u.end=s||"",M.end=!0}function K(){O.value=!1,u.duration=null,N("close")}function Y(){M.start=!0,M.end=!0,q.value&&(N("save",{title:u.sprint_name||"new sprint",duration:String(d.value)||null,start:u.start||"",end:u.end||"",goal:u.goal??""}),O.value=!1,N("close"))}function E(){M.start=!1,M.end=!1}function z(s){return s?new Date(`${s}T00:00:00`).getTime():NaN}const re=D(()=>u.duration===5);R(()=>u.duration,s=>{if(!s)return;const r=typeof s=="object"?s._id:s;if(r!==5&&u.start){const n=B(u.start,r*7);u.end=n}}),R(()=>u.start,s=>{s&&(u.duration&&u.duration!==5&&(u.end=B(u.start,u.duration*7)),u.end&&z(u.end)<z(u.start)&&(u.end=u.start))});function B(s,r){const n=new Date(s);return n.setDate(n.getDate()+r),n.toISOString().slice(0,10)}const d=D(()=>!u.start||!u.end?0:u.duration!==5?u.duration*7:(z(u.end)-z(u.start))/864e5);return R(()=>T.sprint,s=>{if(!s){u.start=new Date().toISOString().slice(0,10),u.end="",u.sprint_name="",u.goal="",E();return}u.goal=s.goal??"",u.start=s.start??new Date().toISOString().slice(0,10),u.end=s.end??"",u.sprint_name=s.title??"",E()},{immediate:!0}),(s,r)=>(c(),ce(pl,{modelValue:O.value,"onUpdate:modelValue":r[3]||(r[3]=n=>O.value=n),modalClass:"!py-0",size:"md"},{default:de(()=>[t("div",{class:"sticky top-0 z-10 flex justify-between items-center py-6 px-6 border-b border-border bg-bg-input"},[r[5]||(r[5]=t("h2",{class:"text-xl font-semibold"},"Start Sprint",-1)),t("span",{onClick:K,class:"text-sm text-text-secondary cursor-pointer"},r[4]||(r[4]=[t("i",{class:"fa-solid fa-xmark text-text-primary text-[19px]"},null,-1)]))]),t("div",Ss,[t("div",$s,[U(fl,{modelValue:u.sprint_name,"onUpdate:modelValue":r[0]||(r[0]=n=>u.sprint_name=n),label:"Sprint Name",placeholder:"Enter sprint name",size:"md",class:"rounded-1"},null,8,["modelValue"])]),t("div",Ds,[U(Jt,{modelValue:u.duration,"onUpdate:modelValue":r[1]||(r[1]=n=>u.duration=n),options:Q,label:"Duration",placeholder:"Select duration"},null,8,["modelValue"])]),t("div",Ts,[r[7]||(r[7]=t("label",{class:"text-sm font-medium"},"Start date",-1)),t("div",{class:H(["border relative flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",P.value?"border-red-500":""])},[U(Nt,{placeholder:"Set start date",class:"w-full z-1","model-value":u.start,"emit-as":"ymd","onUpdate:modelValue":F},null,8,["model-value"]),r[6]||(r[6]=t("i",{class:"fa-regular fa-calendar absolute right-2 top-3 z-0"},null,-1))],2),P.value?(c(),g("p",Vs,L(P.value),1)):I("",!0)]),t("div",Ls,[r[8]||(r[8]=t("label",{class:"text-sm font-medium"},"End date",-1)),t("div",{class:H(["border relative flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",W.value?"border-red-500":""])},[U(Nt,{placeholder:"Set end date",class:"w-full","model-value":u.end,"emit-as":"ymd",disabled:!re.value,"onUpdate:modelValue":Z,"min-date":u.start},null,8,["model-value","disabled","min-date"]),t("i",{class:H(["fa-regular fa-calendar absolute right-2 top-3 z-0",{"text-text-secondary/30 pointer-events-none":!re.value,"text-text-primary":re.value}])},null,2)],2),W.value?(c(),g("p",Es,L(W.value),1)):I("",!0)]),t("div",Ms,[r[9]||(r[9]=t("label",{class:"text-sm font-medium pb-1"},"Goal (optional)",-1)),nt(t("textarea",{"onUpdate:modelValue":r[2]||(r[2]=n=>u.goal=n),class:"w-full text-sm rounded-md border border-border px-3 py-2 bg-bg-input",rows:"2",placeholder:"Ship onboarding flow"},null,512),[[vl,u.goal]])]),t("div",As,[t("p",Bs," Duration: "+L(u.start?d.value+" days":""),1)])]),t("div",Is,[U(We,{variant:"secondary",onClick:K},{default:de(()=>r[10]||(r[10]=[ae("Cancel")])),_:1,__:[10]}),U(We,{variant:"primary",disabled:!q.value,onClick:Y},{default:de(()=>[ae(L(s.creatingSprint?"Starting...":"Start"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue"]))}}),Ns={class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-body pb-4 mb-4"},Os={class:"text-sm text-text-secondary mt-1"},Us={class:"flex items-center gap-2 mt-4 w-full"},qs={class:"flex items-center gap-2 flex-1"},Ps={class:"px-6 min-h-[400px]"},zs={key:0},js={key:0,class:"flex items-center justify-center py-12"},Rs={key:1,class:"text-center py-12 text-text-secondary"},Hs={key:2,class:"grid grid-cols-2 gap-3"},Ws=["onClick"],Ks={class:"flex items-center gap-3"},Qs={class:"w-10 h-10 rounded-lg bg-bg-input flex items-center justify-center group-hover:bg-primary/10 transition-colors"},Gs={class:"font-medium"},Js={key:1},Zs={key:0,class:"flex items-center justify-center py-12"},Xs={key:1,class:"text-center py-12 text-text-secondary"},Ys={key:2,class:"grid grid-cols-2 gap-3"},en=["onClick"],tn={class:"flex items-center gap-3"},ln={class:"w-10 h-10 rounded-lg bg-bg-input flex items-center justify-center group-hover:bg-primary/10 transition-colors"},an={class:"font-medium"},sn={key:2},nn={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},rn={key:0,class:"flex flex-col"},on={class:"flex gap-1 flex-col"},dn={key:0,class:"text-xs text-red-500"},un={class:"flex gap-1 flex-col"},cn={key:0,class:"text-xs text-red-500"},pn={class:"flex flex-col gap-1"},fn={class:"mt-2"},vn={class:"mt-4"},mn={key:0,class:"text-xs text-red-500 mt-1 px-1"},gn={class:"flex justify-between gap-2 p-6 mt-8 sticky bottom-0 bg-bg-body border-t border-border"},bn={key:1},xn={class:"flex gap-2"},yn=ht({__name:"CreateBacklogTicketWithModuleSelection",props:{modelValue:{type:Boolean,default:!1},listId:{},selectedVariable:{}},emits:["update:modelValue","created"],setup(k,{emit:x}){const N=x,T=k,Q=ml(),{workspaceId:O}=ql(),u=b(1),M=b(null),P=b(null),{data:W,isLoading:q}=Pl(O.value),F=D(()=>{var h;return((h=W.value)==null?void 0:h.modules)||[]}),{data:Z,isFetching:K,refetch:Y}=zl({workspace_module_id:M,workspace_id:O},{enabled:D(()=>!!M.value)});R(()=>M.value,()=>{Y()});const E=D(()=>Z.value||[]),{data:z}=jl(O.value),{data:re}=Rl(O.value,M,{enabled:D(()=>!!M.value)}),{mutate:B,isPending:d}=Hl({onSuccess:()=>{it(),Q.invalidateQueries({queryKey:["sheet-list"]}),Q.invalidateQueries({queryKey:["backlog-list"]}),s.value=!1}}),s=D({get:()=>T.modelValue,set:h=>N("update:modelValue",h)}),r=D(()=>{switch(u.value){case 1:return"Select a module to create the ticket in";case 2:return"Select a sheet within the module";case 3:return"Provide the ticket details below and click Add Ticket";default:return""}}),n=D(()=>((re==null?void 0:re.value)??[]).filter(h=>{var C;return((C=h==null?void 0:h.type)==null?void 0:C.title)==="Select"})),v=h=>h.map(C=>({_id:C,title:C})),y=D(()=>((z==null?void 0:z.value)??[]).map(h=>{var C;return{_id:h._id,title:((C=h==null?void 0:h.variables)==null?void 0:C["lane-title"])??String(h._id)}})),ee=h=>h.slug,_=yt({title:"",description:"",startDate:null,endDate:null,lane_id:null,assignee:null,variables:{}});R(n,h=>{for(const C of h){const S=ee(C);S in _.variables||(_.variables[S]=null)}},{immediate:!0});const V=yt({title:!1,description:!1,startDate:!1,endDate:!1,lane:!1}),ye=D(()=>!!_.title.trim()&&!!_.lane_id&&!!_.startDate&&!!_.endDate&&!se.value&&!Ge.value&&!fe.value&&!Fe.value&&!dt.value);function ge(h){_.startDate=h,V.startDate=!0}function Ke(h){_.endDate=h,V.endDate=!0}function Ct(h){_.lane_id=h,V.lane=!0}function we(h){_.assignee=h}function Qe(h){M.value=h._id,u.value=2}function rt(h){P.value=h._id,u.value=3}function ot(){u.value>1&&u.value--}function Me(){s.value=!1,it()}function it(){u.value=1,M.value=null,P.value=null,_.title="",_.description="",_.startDate=null,_.endDate=null,_.lane_id=null,_.assignee=null,_.variables={},V.title=!1,V.description=!1,V.startDate=!1,V.endDate=!1,V.lane=!1}const pe=D(()=>{var h;return(h=re==null?void 0:re.value)==null?void 0:h.find(C=>(C==null?void 0:C._id)==T.selectedVariable)}),se=D(()=>V.title&&!_.title.trim()?"Title is required":""),Ge=D(()=>V.startDate?_.startDate?"":"Start date is required":""),fe=D(()=>V.endDate?_.endDate?_.startDate&&_.endDate&&_.endDate<_.startDate?"End date cannot be before start date":"":"End date is required":""),Fe=D(()=>V.lane?_.lane_id?"":"Lane is required":""),dt=D(()=>V.description&&!_.description.trim()?"Description is required":""),te=new Date().toISOString().split("T")[0];function ut(){var C,S;if(V.title=!0,V.lane=!0,V.description=!0,V.startDate=!0,V.endDate=!0,!ye.value||d.value)return;const h={sheet_list_id:T.listId,workspace_id:O.value,sheet_id:P.value,workspace_lane_id:_.lane_id,variables:{..._.variables,[`${(C=pe.value)==null?void 0:C.slug}`]:T.listId,"card-title":_.title.trim(),"card-description":_.description.trim(),"start-date":_.startDate,"end-date":_.endDate},seat_id:((S=_.assignee)==null?void 0:S._id)??null,createdAt:new Date().toISOString()};B(h)}return R(()=>_.title,h=>{h!=null&&h.trim()&&V.title&&(V.title=!1)}),R(()=>_.lane_id,h=>{h&&V.lane&&(V.lane=!1)}),R(()=>_.startDate,h=>{h&&V.startDate&&(V.startDate=!1)}),R(()=>_.endDate,h=>{h&&V.endDate&&(V.endDate=!1)}),R(()=>_.description,h=>{h!=null&&h.trim()&&V.description&&(V.description=!1)}),(h,C)=>(c(),ce(pl,{modelValue:s.value,"onUpdate:modelValue":C[5]||(C[5]=S=>s.value=S),modalClass:"!py-0",size:"lg"},{default:de(()=>[t("div",Ns,[C[6]||(C[6]=t("h2",{class:"text-xl font-semibold"},"Create Backlog Ticket",-1)),t("p",Os,L(r.value),1),t("div",Us,[(c(),g(me,null,xe(3,S=>t("div",{key:S,class:"flex items-center flex-1"},[t("div",qs,[t("div",{class:H(["h-1 flex-1 rounded-full transition-colors",u.value>=S?"bg-primary":"bg-border"])},null,2)])])),64))])]),t("div",Ps,[u.value===1?(c(),g("div",zs,[C[8]||(C[8]=t("h3",{class:"text-lg font-medium mb-4"},"Select Module",-1)),f(q)?(c(),g("div",js,C[7]||(C[7]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):!F.value||F.value.length===0?(c(),g("div",Rs," No modules available ")):(c(),g("div",Hs,[(c(!0),g(me,null,xe(F.value,S=>{var Ve,Ne,Je,G,oe;return c(),g("button",{key:S._id,onClick:Ze=>Qe(S),class:H(["p-4 border rounded-lg hover:border-primary transition-all text-left group",M.value===S._id?"border-primary bg-primary/5":"border-border"])},[t("div",Ks,[t("div",Qs,[t("i",{class:H([`${(Ne=(Ve=S==null?void 0:S.variables)==null?void 0:Ve["module-icon"])==null?void 0:Ne.prefix} ${(G=(Je=S==null?void 0:S.variables)==null?void 0:Je["module-icon"])==null?void 0:G.iconName}`,"text-lg"])},null,2)]),t("div",null,[t("p",Gs,L(((oe=S.variables)==null?void 0:oe["module-title"])||"Untitled"),1)])])],10,Ws)}),128))]))])):u.value===2?(c(),g("div",Js,[C[10]||(C[10]=t("h3",{class:"text-lg font-medium mb-4"},"Select Sheet",-1)),f(K)?(c(),g("div",Zs,C[9]||(C[9]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):!E.value||E.value.length===0?(c(),g("div",Xs," No sheets available for this module ")):(c(),g("div",Ys,[(c(!0),g(me,null,xe(E.value,S=>{var Ve,Ne;return c(),g("button",{key:S._id,onClick:Je=>rt(S),class:H(["p-4 border rounded-lg hover:border-primary transition-all text-left group",P.value===S._id?"border-primary bg-primary/5":"border-border"])},[t("div",tn,[t("div",ln,[t("i",{class:H(`${(Ve=S==null?void 0:S.variables["sheet-icon"])==null?void 0:Ve.prefix} ${(Ne=S==null?void 0:S.variables["sheet-icon"])==null?void 0:Ne.iconName} text-lg`)},null,2)]),t("div",null,[t("p",an,L((S==null?void 0:S.variables["sheet-title"])||"Untitled Sheet"),1)])])],10,en)}),128))]))])):u.value===3?(c(),g("div",sn,[C[14]||(C[14]=t("h3",{class:"text-lg font-medium mb-4"},"Ticket Details",-1)),t("div",nn,[U(fl,{modelValue:_.title,"onUpdate:modelValue":C[0]||(C[0]=S=>_.title=S),label:"Ticket Title",placeholder:"e.g., Implement real-time notifications",error:!!se.value,message:se.value,onBlur:C[1]||(C[1]=S=>V.title=!0)},null,8,["modelValue","error","message"]),y.value.length>0?(c(),g("div",rn,[U(Jt,{size:"md",label:"Lane",options:y.value,placeholder:"Select lane",allowCustom:!1,"model-value":_.lane_id,"onUpdate:modelValue":Ct,error:!!Fe.value,message:Fe.value},null,8,["options","model-value","error","message"])])):I("",!0),(c(!0),g(me,null,xe(n.value,S=>nt((c(),ce(Jt,{size:"md",key:ee(S),modelValue:_.variables[S.slug],"onUpdate:modelValue":Ve=>_.variables[S.slug]=Ve,options:v(S.data),label:S.title,placeholder:"Select value",allowCustom:!0},null,8,["modelValue","onUpdate:modelValue","options","label"])),[[Zt,(S==null?void 0:S._id)!=h.selectedVariable]])),128)),t("div",on,[C[11]||(C[11]=t("label",{class:"text-sm"},"Start date",-1)),t("div",{class:H(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",Ge.value?"border-red-500":""])},[U(Nt,{placeholder:"Set start date",class:"w-full","model-value":_.startDate,"emit-as":"ymd","onUpdate:modelValue":ge,"min-date":f(te)},null,8,["model-value","min-date"])],2),Ge.value?(c(),g("p",dn,L(Ge.value),1)):I("",!0)]),t("div",un,[C[12]||(C[12]=t("label",{class:"text-sm"},"End date",-1)),t("div",{class:H(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",fe.value?"border-red-500":""])},[U(Nt,{placeholder:"Set end date",class:"w-full","model-value":_.endDate,"emit-as":"ymd","onUpdate:modelValue":Ke,"min-date":_.startDate||f(te)},null,8,["model-value","min-date"])],2),fe.value?(c(),g("p",cn,L(fe.value),1)):I("",!0)]),t("div",pn,[C[13]||(C[13]=t("label",{class:"text-sm"},"Assignee",-1)),t("div",fn,[U(Gl,{name:!0,workspaceId:f(O),onAssign:we,onUnassign:C[2]||(C[2]=S=>we(null)),assigneeId:_.assignee,seat:null,disabled:!1,skipPermissionCheck:!0,class:"w-full"},null,8,["workspaceId","assigneeId"])])])]),t("div",vn,[U(Jl,{label:"Description",placeholder:"What needs to be done, acceptance criteria, linksâ€¦",modelValue:_.description,"onUpdate:modelValue":C[3]||(C[3]=S=>_.description=S),onBlur:C[4]||(C[4]=S=>V.description=!0)},null,8,["modelValue"]),dt.value?(c(),g("p",mn,L(dt.value),1)):I("",!0)])])):I("",!0)]),t("div",gn,[u.value>1?(c(),ce(We,{key:0,variant:"secondary",onClick:ot},{default:de(()=>C[15]||(C[15]=[ae("Back")])),_:1,__:[15]})):(c(),g("div",bn)),t("div",xn,[U(We,{variant:"secondary",onClick:Me},{default:de(()=>C[16]||(C[16]=[ae("Cancel")])),_:1,__:[16]}),u.value===3?(c(),ce(We,{key:0,variant:"primary",disabled:!ye.value||f(d),onClick:ut},{default:de(()=>[ae(L(f(d)?"Addingâ€¦":"Add Ticket"),1)]),_:1},8,["disabled"])):I("",!0)])])]),_:1},8,["modelValue"]))}}),_n={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-[6px] shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full border border-border flex flex-col overflow-x-auto overflow-y-auto scrollbar-visible pb-4"},hn={class:"header px-4 py-3 flex items-center justify-between gap-1 w-[100%]"},kn={class:"flex gap-4"},wn={class:"flex gap-3 items-center"},Cn={class:"flex items-center gap-3 bg-bg-surface/50 h-[32px] px-2 rounded-md"},Sn={class:"overflow-x-auto"},$n={key:0,class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex scrollbar-visible"},Dn={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible"},Tn={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},Vn={class:"relative w-full h-full flex overflow-hidden"},Ln={key:0,class:"format-sidebar h-full py-4 px-4 w-[320px] border-l bg-bg-card overflow-hidden flex flex-col"},En={class:"flex items-center justify-between pb-3 mb-4 border-b"},Mn={class:"format-content space-y-6"},An={class:"format-group relative mb-3"},Bn={class:"text-xs text-secondary"},In={key:0,class:"absolute z-50 mt-2 p-3 bg-bg-card rounded-lg shadow-lg border w-[240px]"},Fn={class:"grid grid-cols-10 gap-1 mb-3"},Nn=["onClick"],On={class:"flex items-center gap-2"},Un=["value"],qn=["value"],Pn={class:"format-group relative mb-3"},zn={class:"text-xs text-secondary"},jn={key:0,class:"absolute z-50 mt-2 p-3 bg-bg-card rounded-lg shadow-lg border w-[240px]"},Rn={class:"grid grid-cols-10 gap-1 mb-3"},Hn=["onClick"],Wn={class:"flex items-center gap-2"},Kn=["value"],Qn=["value"],Gn={class:"grid grid-cols-1 gap-3"},Jn=["value"],Zn={class:"mt-6 pt-4"},Xn=["disabled"],Yn={key:0,class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},er={key:0,class:"fixed inset-0 bg-black/30 flex items-center justify-center"},tr={class:"bg-white p-6 rounded-xl w-80"},lr={class:"flex justify-end gap-2 mt-4"},ar=["disabled"],sr={class:"flex items-center mt-3 gap-3"},nr=ht({__name:"ActiveSprint",props:{sptint_id:{},searchQuery:{}},setup(k){const x=k,N=Ht(()=>Wt(()=>import("./CreateTaskModal-KZdkD__w.js"),__vite__mapDeps([0,1,2,3]))),T=Ht(()=>Wt(()=>import("./ConfirmDeleteModal-DeWj1lAD.js"),__vite__mapDeps([4,5,2,3]))),Q=Ht(()=>Wt(()=>import("./SidePanel-mBPl-KFT.js"),__vite__mapDeps([6,2,3,7]))),O=Ht(()=>Wt(()=>import("./KanbanBoard-BJpd9g_O.js"),__vite__mapDeps([8,9,10,2,3,11,5,12]))),u=b(!1),M=b(""),P=b(null),W=b(null),q=b(null),F=b("");function Z(l){M.value="",u.value=!0,P.value=l}function K(){P.value&&P.value(M.value),u.value=!1}function Y(){u.value=!1}const{mutate:E}=Hl({onSuccess:()=>{}});function z(){const l=ct.value.trim();l&&ot(l)}function re(){Oe.value=!Oe.value}const B=ra(),d=b("kanban"),{workspaceId:s,moduleId:r}=ql(),n=b(""),v=b(!1),y=b(!0),{canCreateVariable:ee,canCreateCard:_,canEditCard:V,canAssignCard:ye}=ul(),{data:ge}=Pl(s.value),Ke=b(ge.value.modules||[]),Ct=D(()=>(Ke.value||[]).map(l=>{var e,o;return{_id:l._id,title:((e=l.variables)==null?void 0:e["module-title"])??"Untitled module",description:((o=l.variables)==null?void 0:o["module-description"])??"",icon:l.icon??null,status:l.status??null}})),we=ml(),{mutate:Qe,isPending:rt}=Zl({onSuccess:()=>{we.invalidateQueries({queryKey:["sheet-list"]}),ct.value="",Ue.value=!1,Oe.value=!1,Ue.value=!1}}),ot=l=>{Qe({workspace_id:s.value,module_id:r.value,variable_id:fe.value,value:l})};R(Ct,l=>{if(l.length&&!n.value){const e=l.find(o=>o.title==="Tasks")||l[0];n.value=e._id}},{immediate:!0});const{data:Me,refetch:it}=zl({workspace_id:s.value,workspace_module_id:D(()=>n.value)});R(n,l=>{l&&it()});const pe=D(()=>{var l;return Me.value?(l=Me.value[0])==null?void 0:l._id:""}),se=b(pe),Ge=D(()=>{var l;return Ce.value?(l=Ce.value[0])==null?void 0:l._id:""}),fe=b(Ge),Fe=Xl(),dt=D(()=>x.sptint_id),{data:te,isPending:ut}=Ta(dt,se),h=b(!1),C=b(),S=l=>{C.value=l},Ve=Yl(),Ne=ea();function Je(l){l.type=="column"?Ve.mutate({payload:{workspace_id:s.value,workspace_module_id:r.value,variable_id:fe.value,moved_value:l.meta.id,new_index:l.meta.newIndex}}):Ne.mutate({payload:{workspace_id:s.value,card_id:l.meta.moved._id,group_value:l.meta.fromColumnId,group_variable_id:fe.value,new_index:l.meta.newIndex,sheet_id:se.value}})}const G=l=>{},{mutate:oe}=ta({onSuccess:()=>{it(),sl.value=!1}}),Ze=D(()=>!Me.value||!Me.value.length?[]:Me.value.map(l=>{var e,o;return{_id:l._id,title:((e=l.variables)==null?void 0:e["sheet-title"])||"Untitled Sheet",description:((o=l.variables)==null?void 0:o["sheet-description"])||"",icon:l.icon||null,status:l.generation_status||null}}));R(Ze,l=>{l.length>0&&!se.value&&(se.value=l[0]._id)},{immediate:!0}),R(Ze,l=>{l.length>0?F.value=l[0].title:F.value=""},{immediate:!0}),R(Me,l=>{var e;(l==null?void 0:l.length)>0&&(se.value=(e=l[0])==null?void 0:e._id)});const Oe=b(!1),ct=b(""),Yt=l=>{Qe({workspace_id:B.params.id,module_id:B.params.module_id,new_value:l.title,value:l.oldTitle,variable_id:fe.value})},Ue=b(!1),_e=b(),el=()=>{Qe({value:_e.value.title,workspace_id:s.value,module_id:r.value,newValue:_e.value.title,variable_id:fe.value,is_trash:!0})},qe=l=>{Ue.value=!0,_e.value=l},St=l=>{h.value=!0,_e.value=l},Ae=D(()=>x.searchQuery),tl=b("");R(Ae,Ca.debounce(l=>{tl.value=l},200));const ll=D(()=>{var e;const l=(e=te.value)==null?void 0:e.flatMap(o=>o.cards.map(p=>({...p,columnId:o.title})));return new Bl(l,{keys:["card-title","card-description"],threshold:.3})}),pt=D(()=>{var l,e;if(d.value==="kanban"){if(!Ae.value)return te.value;const o=ll.value.search(Ae.value).map(p=>p.item);return te.value.map(p=>({...p,cards:o.filter(m=>m.columnId===p.title)}))}else{const o=(l=Ae.value)==null?void 0:l.trim();if(!o){let m=[];return(e=te.value??[])==null||e.forEach(X=>{m=[...m,...X==null?void 0:X.cards]}),m}return new Bl(al.value,{keys:["card-title","card-description"],threshold:.3}).search(o).map(m=>m.item)}}),al=D(()=>{let l=[];return(te.value??[]).forEach(e=>{l=[...l,...e==null?void 0:e.cards]}),l}),sl=b(!1),{data:Ce,isPending:Ut}=Rl(s.value,n,se),{mutate:nl}=la(),rl=(l,e)=>{nl({payload:{sheet_id:se.value,workspace_id:s.value,variable_slug:l,is_visible:e}})},{data:$t}=jl(s),Dt=D(()=>(($t==null?void 0:$t.value)??[]).map(l=>{var e;return{_id:l._id,title:((e=l==null?void 0:l.variables)==null?void 0:e["lane-title"])??String(l._id)}})),ol=l=>l.map(e=>({_id:e.value??e,title:e.value??e})),ft=aa({onSuccess:()=>{we.invalidateQueries({queryKey:["get-sheets"]}),we.invalidateQueries({queryKey:["sheet-list"]}),we.invalidateQueries({queryKey:["roles"]})}}),vt=(l,e)=>{if(!te.value)return;const o=te.value.findIndex(p=>p.cards.some(m=>m._id===l));if(o!==-1){const p=te.value[o].cards.findIndex(m=>m._id===l);if(p!==-1){const m={...te.value[o].cards[p]};e(m),te.value[o].cards[p]=m,Ll(te)}}};function qt(l,e){vt(l,o=>{const p=Dt.value.find(m=>m._id===e);p&&(o.lane=p)}),Ll(te),ft.mutate({card_id:l,workspace_lane_id:e})}const Pt=(l,e)=>{vt(l,o=>{o.seat=e}),ft.mutate({card_id:l,seat_id:e==null?void 0:e._id})},Xe=D(()=>{var l;return[{key:"card-title",label:"Title",render:({row:e,value:o})=>be("div",{class:"flex items-center gap-1 w-full"},[be("a",{onClick:()=>C.value=e,class:"text-[12px] underline text-blue-500 shrink-0 overflow-ellipsis cursor-pointer"},e["card-code"]),be("div",{class:"flex-1 min-w-0"},[be("input",{onFocusout:p=>{var m;zt(e==null?void 0:e._id,"card-title",(m=p==null?void 0:p.target)==null?void 0:m.value)},class:"text-[12px] w-full overflow-ellipsis capitalize p-1 w-full p-1 focus:border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-transparent focus:bg-bg-body text-[12px] h-8",defaultValue:o,disabled:!V.value})])])},{key:"end-date",label:"Due Date",render:({row:e,value:o})=>{const p=b(o);return be(Nt,{class:" capitalize flex items-center gap-2 text-[12px]",placeholder:"Set start date",tableInputClass:!0,modelValue:p.value,disabled:!V.value,"onUpdate:modelValue":m=>il(e==null?void 0:e._id,m),emptyText:"Date"})}},{key:"lane",label:"Lane",render:({row:e})=>{var o;return be(Al,{options:Dt.value??[],placeholder:"Select lane",modelValue:((o=e.lane)==null?void 0:o._id)||null,disabled:!V.value,"onUpdate:modelValue":p=>qt(e==null?void 0:e._id,p),displayField:"title",emptyText:"Lane"})}},{key:"created_by",label:"Owner",render:({value:e})=>be("div",{class:"capitalize flex items-center gap-2  px-3"},[be("div",{class:" rounded-full  "},[e!=null&&e.u_profile_image?be("img",{class:"w-6 h-6 rounded-full",src:e==null?void 0:e.u_profile_image}):be("div",{class:"w-5 h-5 rounded-full flex justify-center items-center text-[11px] ",style:`background:${e!=null&&e.u_full_name?ia({name:e.u_full_name,email:e.u_email}):""}`},cl(e==null?void 0:e.u_full_name))]),be("span",{class:"text-[12px]"},e?e==null?void 0:e.u_full_name:"")])},{key:"seat",label:"Assignee",render:({row:e,value:o})=>be(ha,{class:"capitalize flex items-center gap-2 ",onAssign:p=>Pt(e==null?void 0:e._id,p),assigneeId:o,seat:o,name:!0,disabled:!ye.value,emptyText:"Assignee"})},...((l=Ce.value)==null?void 0:l.filter(e=>{var o;return((o=e==null?void 0:e.type)==null?void 0:o.title)==="Select"}).map(e=>({key:e==null?void 0:e.slug,label:e==null?void 0:e.slug,render:({row:o,value:p})=>{var X;let m=p;if(Array.isArray(o==null?void 0:o.variables)){const A=o.variables.find(j=>j.slug===e.slug);A&&(m=A.value)}else m=((X=o==null?void 0:o.variables)==null?void 0:X[e.slug])??(o==null?void 0:o[e.slug])??p;return be("div",{class:"capitalize flex items-center gap-2"},[be(Al,{options:ol(e.data??[]),modelValue:m,disabled:!V.value,emptyText:e.slug,"onUpdate:modelValue":A=>{zt(o==null?void 0:o._id,e.slug,A)},columnName:e.slug})])},visible:e==null?void 0:e.is_visible})))??[]]});function zt(l,e,o){vt(l,p=>{if(e==="card-title"&&(p[e]=o),Array.isArray(p.variables)){const m=p.variables.find(X=>X.slug===e);m?m.value=o:p.variables.push({slug:e,value:o,type:"Select"})}else p.variables&&typeof p.variables=="object"?p.variables[e]=o:p[e]=o}),ft.mutate({card_id:l,variables:{[e]:o.trim()}})}function Tt(l){if(l["card-title"]){const e={sheet_list_id:"To Do",workspace_id:s.value,sheet_id:se.value,variables:{"card-title":l["card-title"].trim()},createdAt:new Date().toISOString()};E(e)}}const il=(l,e)=>{const o=te.value.findIndex(p=>p.cards.some(m=>m._id===l));if(o!==-1){const p=te.value[o].cards.findIndex(m=>m._id===l);p!==-1&&(te.value[o].cards[p]["end-date"]=e)}ft.mutate({card_id:l,variables:{"start-date":e}})},Pe=b(null),ze=b(!1),jt=["#FFFFFF","#F2F2F2","#D9D9D9","#BFBFBF","#A6A6A6","#808080","#404040","#000000","#FFE066","#FF9AA2","#8EE4AF","#00EAD3","#90DBF4","#4D96FF","#6C63FF","#C77DFF","#F7A1C4","#FFC300","#FF5733","#2ECC71","#00B894","#17A2B8","#0984E3","#3F51B5","#9C27B0","#E84393","#FF8C00","#E74C3C","#1E8449","#006D6F","#004C6D","#0057A8","#1A237E","#4A148C","#7D3C98"],Be=b(!1);R(ze,l=>{l&&(Be.value=!1)}),R(Be,l=>{l&&(ze.value=!1)});const Se=D(()=>{var l,e;return(e=(l=Pe.value)==null?void 0:l.nodeObj)!=null&&e.style?Pe.value.nodeObj.style:Lt(he)});function $e(l,e,o){return l!==void 0?l:e!==void 0?e:o}function mt(l,e){var A;if(!((A=Pe.value)!=null&&A.nodeObj))return;const o=Pe.value.nodeObj;o.style||(o.style={});const p=e.target,m=p.type==="number"?Number(p.value):p.value;switch(l){case"bg_color":o.style.background=m;break;case"color":o.style.color=m;break;case"font_size":o.style.fontSize=`${m}px`;break;case"font_weight":o.style.fontWeight=m;break;case"font_style":o.style.fontStyle=m;break;case"font_family":o.style.fontFamily=m;break;case"border_color":o.style.borderColor=m;break;case"border_width":o.style.borderWidth=`${m}px`;break;case"border_radius":o.style.borderRadius=`${m}px`;break;case"padding":o.style.padding=`${m}px`;break}const X=document.getElementById(o.id);X&&kt(o,X)}const he={bg_color:"#ffffff",color:"#000000",font_size:14,font_weight:"normal",font_style:"normal",font_family:"Inter",border_color:"#cccccc",border_width:0,border_radius:0,padding:0},Ye=b(!1);async function Vt(){var e;const l=(e=Pe.value)==null?void 0:e.nodeObj;if(!(!l||Ye.value)){Ye.value=!0;try{const o=oa(l);o._originalStyle||(o._originalStyle={});const p=o.style||{},m=o._originalStyle,X={bg_color:$e(p.background,m.bg_color,he.bg_color),color:$e(p.color,m.color,he.color),font_size:$e(p.fontSize?parseInt(p.fontSize):void 0,m.font_size,he.font_size),font_weight:$e(p.fontWeight,m.font_weight,he.font_weight),font_style:$e(p.fontStyle,m.font_style,he.font_style),font_family:$e(p.fontFamily,m.font_family,he.font_family),border_color:$e(p.borderColor,m.border_color,he.border_color),border_width:$e(p.borderWidth?parseInt(p.borderWidth):void 0,m.border_width,he.border_width),border_radius:$e(p.borderRadius?parseInt(p.borderRadius):void 0,m.border_radius,he.border_radius),padding:$e(p.padding?parseInt(p.padding):void 0,m.padding,he.padding),hyperLink:M.value||o.hyperLink||""};o._originalStyle={...X};const A=o.unique_name==="sheet"?{sheet_id:o.id,workspace_id:s.value,workspace_module_id:r.value,style:X}:{card_id:o.id,seat_id:o.seat_id,style:X};o.unique_name==="sheet"?await oe(A):await ft.mutateAsync(A)}finally{Ye.value=!1}}}const Rt=b([]);function gt(l){const e={id:"root",topic:localStorage.getItem("currentName")??"",isRoot:!0,children:[],style:{},_originalStyle:{},unique_name:"root"};if(!Array.isArray(l))return e;const o={};return l.forEach(p=>{var j;const m=F.value,X=((j=p.style)==null?void 0:j.hyperLink)||"";o[m]||(o[m]={id:p._id,topic:m,variables:p==null?void 0:p.variables,children:[],style:p==null?void 0:p.style,_originalStyle:(p==null?void 0:p.style)||{},unique_name:"sheet",hyperLink:X||""},e.children.push(o[m]));const A={id:p==null?void 0:p._id,topic:p.title,children:[],style:Lt(p==null?void 0:p.style),_originalStyle:p.style||{},unique_name:"List",hyperLink:X||""};(p.cards||[]).forEach((le,$)=>{var Le;const ve=((Le=le.style)==null?void 0:Le.hyperLink)||"",ne={id:le._id||`card-${$}`,seat_id:le.seat_id,topic:le["card-title"],style:Lt(le.style),_originalStyle:le.style||{},children:[],unique_name:"card",hyperLink:ve||""};A.children.push(ne),Rt.value=ne}),o[m].children.push(A)}),e}const{mutateAsync:bt}=sa({onSuccess:()=>{we.invalidateQueries({queryKey:["sheets"]}),we.invalidateQueries({queryKey:["sheet-list"]}),close()}});na(()=>{d.value!=="mindmap"||!W.value||!te.value||da(()=>{var m,X;const l=gt(te.value);q.value&&((X=(m=q.value).destroy)==null||X.call(m),q.value=null);const e=new ka({el:W.value,theme:void 0,draggable:!0,contextMenu:!0,contextMenuOption:{Update:!0,extend:[{name:"Update Node",onclick:()=>{var j;y.value&&(y.value=!1);const A=(j=Pe.value)==null?void 0:j.nodeObj;A&&S(A)}},{name:"Add Hyperlink",onclick:()=>{Z(async()=>{await Vt()})}}]}});q.value=e,e.init({nodeData:l}),e.bus.addListener("selectNode",A=>{A&&(Pe.value={nodeObj:A},y.value=!0)}),e.bus.addListener("renderNode",A=>{!(A!=null&&A.nodeObj)||!(A!=null&&A.element)||kt(A.nodeObj,A.element)});const o=new Set;e.bus.addListener("operation",async A=>{var $,ve,ne;if(!A||A.name!=="insertSibling"&&A.name!=="addChild")return;const j=A.obj;if(!j||!j.id||o.has(j.id))return;o.add(j.id);let le;if(A.name==="addChild"?le=($=e.currentNode)==null?void 0:$.nodeObj:le=(ne=(ve=e.currentNode)==null?void 0:ve.nodeObj)==null?void 0:ne.parent,!(!le||!("unique_name"in le))&&le.unique_name==="List")try{const Le=Et({topic:j.topic??"New Card",id:j.id},le);await E(Le)}catch(Le){console.error("Error creating card or refetching sheets:",Le)}});const p=new Set;e.bus.addListener("operation",async A=>{var $,ve;if(!A)return;const j=A.obj;if(!(j!=null&&j.id))return;const le=j.parent??((ve=($=e.currentNode)==null?void 0:$.nodeObj)==null?void 0:ve.parent);if(!(!le||!("unique_name"in le))){if(A.name==="addChild"&&le.unique_name==="root"&&!p.has(j.id)){p.add(j.id);try{await bt({variables:{"sheet-title":j.topic??"New Sheet","sheet-description":"This is custom description"},is_ai_generated:!1,workspace_id:s.value,workspace_module_id:r.value})}catch(ne){console.error("Error creating workspace sheet:",ne)}return}if(le.unique_name==="List")try{const ne=Et({topic:j.topic??"New Card",id:j.id},le);await E(ne)}catch(ne){console.error("Error creating card or refetching sheets:",ne)}}})})});function kt(l,e){if(!l||!e||!l.style)return;const o=e.querySelector(".topic"),p=e.querySelector(".node")??e,m=l.style;m.background&&(p.style.background=m.background),m.color&&o&&(o.style.color=m.color),o&&(m.fontSize&&(o.style.fontSize=m.fontSize),m.fontFamily&&(o.style.fontFamily=m.fontFamily),m.fontWeight&&(o.style.fontWeight=m.fontWeight),m.fontStyle&&(o.style.fontStyle=m.fontStyle)),m.borderColor&&(p.style.borderColor=m.borderColor),m.borderWidth&&(p.style.borderWidth=m.borderWidth),m.borderRadius&&(p.style.borderRadius=m.borderRadius),m.padding&&(p.style.padding=m.padding)}function Lt(l={}){return{background:l.bg_color,color:l.color,fontSize:l.font_size!=null?`${l.font_size}px`:void 0,fontWeight:l.font_weight,fontStyle:l.font_style,fontFamily:l.font_family,borderColor:l.border_color,borderWidth:l.border_width!=null?`${l.border_width}px`:void 0,borderRadius:l.border_radius!=null?`${l.border_radius}px`:void 0,padding:l.padding!=null?`${l.padding}px`:void 0,hyperLink:l.hyperLink||void 0}}function Et(l,e){const o=new Date,p=o.toISOString().split("T")[0],m=new Date(o.getTime()+3*24*60*60*1e3).toISOString().split("T")[0];return{sheet_list_id:(e==null?void 0:e.topic)||"In Progress",workspace_id:s.value,sheet_id:se.value,workspace_lane_id:(l==null?void 0:l.workspace_lane_id)||null,variables:{"card-status":(e==null?void 0:e.topic)||"In Progress","card-type":null,priority:null,process:null,"card-title":l.topic||"New Card","card-description":"","start-date":p,"end-date":m},createdAt:new Date().toISOString()}}return(l,e)=>{var m,X,A,j,le;const o=Vl("Button"),p=Vl("BaseTextField");return c(),g("div",_n,[t("div",hn,[t("div",kn,[U(o,{class:"lg:flex hidden cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white items-center justify-center gap-1 px-2 py-1.5 rounded-md text-xs font-medium",onClick:e[0]||(e[0]=$=>l.$emit("go-back"))},{default:de(()=>e[27]||(e[27]=[t("i",{class:"fa-solid fa-chevron-left text-xs"},null,-1),ae(" Go Back")])),_:1,__:[27]}),U(o,{class:"flex sm:hidden cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white items-center justify-center px-2 py-2 rounded-md text-xs font-medium",onClick:e[1]||(e[1]=$=>l.$emit("go-back"))},{default:de(()=>e[28]||(e[28]=[t("i",{class:"fa-solid fa-chevron-left text-xs"},null,-1)])),_:1,__:[28]})]),t("div",wn,[d.value==="mindmap"?(c(),g("button",{key:0,class:"cursor-pointer w-8 h-8 rounded-full bg-bg-surface",title:"Show formatting sidebar",onClick:e[2]||(e[2]=$=>y.value=!y.value)},e[29]||(e[29]=[t("i",{class:"fa-solid fa-sidebar"},null,-1)]))):I("",!0),t("div",Cn,[t("button",{class:H(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",d.value==="kanban"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"List view",onClick:e[3]||(e[3]=$=>d.value="kanban")},e[30]||(e[30]=[t("i",{class:"fa-solid fa-chart-kanban"},null,-1)]),2),t("button",{onClick:e[4]||(e[4]=$=>d.value="table"),class:H(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",d.value==="table"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gallery view"},e[31]||(e[31]=[t("i",{class:"fa-solid fa-align-left"},null,-1)]),2),t("button",{onClick:e[5]||(e[5]=$=>d.value="mindmap"),class:H(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",d.value==="mindmap"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"MindMap view"},e[32]||(e[32]=[t("i",{class:"fa-solid fa-chart-diagram"},null,-1)]),2),t("button",{onClick:e[6]||(e[6]=$=>d.value="calendar"),class:H(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",d.value==="calendar"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Calendar view"},e[33]||(e[33]=[t("i",{class:"fa-regular fa-calendar"},null,-1)]),2),t("button",{onClick:e[7]||(e[7]=$=>d.value="gantt"),class:H(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",d.value==="gantt"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gantt Chart view"},e[34]||(e[34]=[t("i",{class:"fa-solid fa-chart-gantt"},null,-1)]),2),t("button",{onClick:e[8]||(e[8]=$=>d.value="timeline"),class:H(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",d.value==="timeline"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Timeline view"},e[35]||(e[35]=[t("i",{class:"fa-solid fa-timeline"},null,-1)]),2)])])]),t("div",Sn,[d.value=="kanban"?(c(),g("div",$n,[nt(U(Wl,null,null,512),[[Zt,f(ut)]]),nt(t("div",Dn,[U(f(O),{onOnPlus:St,"onDelete:column":e[9]||(e[9]=$=>qe($)),"onUpdate:column":e[10]||(e[10]=$=>Yt($)),onReorder:Je,onAddColumn:ot,"onSelect:ticket":S,board:pt.value,onOnBoardUpdate:G,variable_id:fe.value,sheet_id:se.value},{"column-footer":de($=>{var ve,ne,Le,i,a;return[(ne=(ve=f(Fe))==null?void 0:ve.transitions)!=null&&ne.all_allowed&&!((a=(i=(Le=f(Fe))==null?void 0:Le.transitions)==null?void 0:i.all_allowed)!=null&&a.includes($.column.title))&&f(Fe).transitions.currentColumn!=$.column.title?(c(),g("div",Tn," Disbale ( you can't drop here ) ")):I("",!0)]}),ticket:de(({ticket:$})=>[U(wa,{selectedVar:fe.value,onSelect:()=>{S($)},ticket:$},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"])],512),[[Zt,!f(ut)]])])):I("",!0),d.value=="table"?(c(),ce(ba,{key:1,onToggleVisibility:rl,onAddVar:e[11]||(e[11]=()=>{v.value=!0}),isPending:f(ut)||f(Ut),columns:Xe.value,rows:pt.value,canCreate:f(_),canCreateVariable:f(ee),onCreate:Tt},null,8,["isPending","columns","rows","canCreate","canCreateVariable"])):I("",!0),d.value==="mindmap"?(c(),g(me,{key:2},[t("div",Vn,[t("div",{ref_key:"mindMapRef",ref:W,class:"flex-1 h-full overflow-y-hidden rounded-md relative"},null,512),y.value?(c(),g("div",Ln,[t("div",En,[e[37]||(e[37]=t("h3",{class:"text-sm font-semibold text-secondary"},"Format Node",-1)),t("button",{onClick:e[12]||(e[12]=$=>y.value=!1),class:"text-gray-400 hover:text-gray-700"},e[36]||(e[36]=[t("i",{class:"fa-solid fa-times"},null,-1)]))]),t("div",Mn,[t("div",null,[e[40]||(e[40]=t("h4",{class:"text-xs font-semibold text-secondary uppercase mb-3"}," Colors ",-1)),t("div",An,[e[38]||(e[38]=t("label",{class:"block text-xs text-secondary mb-1"},"Background",-1)),t("div",{class:"flex items-center gap-2 cursor-pointer",onClick:e[13]||(e[13]=$=>ze.value=!ze.value)},[t("div",{class:"w-full h-7 rounded border",style:ue({background:Se.value.background})},null,4),t("span",Bn,L(Se.value.background),1)]),ze.value?(c(),g("div",In,[t("div",Fn,[(c(),g(me,null,xe(jt,$=>t("button",{key:$,class:"w-5 h-5 rounded border",style:ue({background:$}),onClick:ve=>{mt("bg_color",{target:{value:$}}),ze.value=!1}},null,12,Nn)),64))]),t("div",On,[t("input",{type:"color",value:Se.value.background,class:"w-8 h-8 cursor-pointer",onInput:e[14]||(e[14]=$=>mt("bg_color",$))},null,40,Un),t("input",{type:"text",class:"flex-1 text-xs border rounded px-2 py-1",value:Se.value.background,readonly:""},null,8,qn)])])):I("",!0)]),t("div",Pn,[e[39]||(e[39]=t("label",{class:"block text-xs text-secondary mb-1"},"Text",-1)),t("div",{class:"flex items-center gap-2 cursor-pointer",onClick:e[15]||(e[15]=$=>Be.value=!Be.value)},[t("div",{class:"w-full h-7 rounded border",style:ue({background:Se.value.color})},null,4),t("span",zn,L(Se.value.color),1)]),Be.value?(c(),g("div",jn,[t("div",Rn,[(c(),g(me,null,xe(jt,$=>t("button",{key:$,class:"w-5 h-5 rounded border",style:ue({background:$}),onClick:ve=>{mt("color",{target:{value:$}}),Be.value=!1}},null,12,Hn)),64))]),t("div",Wn,[t("input",{type:"color",value:Se.value.color,class:"w-8 h-8 cursor-pointer",onInput:e[16]||(e[16]=$=>mt("color",$))},null,40,Kn),t("input",{type:"text",class:"flex-1 text-xs border rounded px-2 py-1",value:Se.value.color,readonly:""},null,8,Qn)])])):I("",!0)])]),t("div",null,[t("div",Gn,[t("div",null,[e[42]||(e[42]=t("label",{class:"block text-xs text-secondary mb-1"},"Weight",-1)),t("select",{class:"w-full h-8 border rounded px-2 text-sm",value:Se.value.fontWeight,onChange:e[17]||(e[17]=$=>mt("font_weight",$))},e[41]||(e[41]=[t("option",{value:"lighter"},"Light",-1),t("option",{value:"normal"},"Normal",-1),t("option",{value:"bold"},"Bold",-1),t("option",{value:"bolder"},"Extra Bold",-1)]),40,Jn)])])])]),t("div",Zn,[t("button",{class:"w-full cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium hover:shadow-md disabled:opacity-60",disabled:Ye.value,onClick:Vt},[Ye.value?(c(),g("span",Yn)):I("",!0),t("span",null,L(Ye.value?"Updating...":"Update"),1)],8,Xn)])])):I("",!0)]),u.value?(c(),g("div",er,[t("div",tr,[e[43]||(e[43]=t("h3",{class:"text-lg font-semibold mb-4"},"Insert Web Link",-1)),nt(t("input",{"onUpdate:modelValue":e[18]||(e[18]=$=>M.value=$),type:"text",placeholder:"Enter or paste a URL",class:"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[vl,M.value]]),t("div",lr,[t("button",{onClick:Y,class:"px-4 py-2 rounded-md bg-gray-200 hover:bg-gray-300"}," Cancel "),t("button",{disabled:!M.value,onClick:K,class:H(["px-4 py-2 rounded-md text-white",M.value?"bg-blue-500 hover:bg-blue-600":"bg-blue-300 cursor-not-allowed"])}," Insert ",10,ar)])])])):I("",!0),Oe.value?(c(),g("div",{key:1,class:"absolute top-40 left-70 bg-bg-body rounded-lg p-4 shadow-lg z-100 min-w-[328px] border",onClick:e[20]||(e[20]=De(()=>{},["stop"]))},[U(p,{autofocus:!0,modelValue:ct.value,"onUpdate:modelValue":e[19]||(e[19]=$=>ct.value=$),placeholder:"Add New list",onKeyup:Gt(z,["enter"])},null,8,["modelValue"]),e[44]||(e[44]=t("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),t("div",sr,[U(o,{onClick:z,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:de(()=>[ae(L(f(rt)?"Adding...":"Add list"),1)]),_:1}),t("i",{class:"fa-solid fa-close cursor-pointer",onClick:re})])])):I("",!0)],64)):I("",!0),d.value==="calendar"?(c(),ce(xa,{key:3,data:pt.value,"onSelect:ticket":S,class:"min-h-[600px]"},null,8,["data"])):I("",!0),d.value==="gantt"?(c(),ce(ya,{key:4,data:pt.value,"onSelect:ticket":S},null,8,["data"])):I("",!0),d.value==="timeline"?(c(),ce(_a,{key:5,data:pt.value,"onSelect:ticket":S},null,8,["data"])):I("",!0),U(f(T),{onClick:e[21]||(e[21]=De(()=>{},["stop"])),modelValue:Ue.value,"onUpdate:modelValue":e[22]||(e[22]=$=>Ue.value=$),title:"Delete List",itemLabel:"list",itemName:(m=_e.value)==null?void 0:m.title,requireMatchText:(X=_e.value)==null?void 0:X.title,confirmText:"Delete workspace",cancelText:"Cancel",size:"md",loading:f(rt),onConfirm:el,onCancel:e[23]||(e[23]=()=>{Ue.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),h.value?(c(),ce(f(N),{selectedVariable:fe.value,listId:(A=_e.value)==null?void 0:A.title,sheet_id:se.value,key:"createTaskModalKey",modelValue:h.value,"onUpdate:modelValue":e[24]||(e[24]=$=>h.value=$),onSubmit:e[25]||(e[25]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):I("",!0),(j=C.value)!=null&&j._id?(c(),ce(f(Q),{key:7,details:C.value,onClose:e[26]||(e[26]=()=>{S({variables:{}})}),showPanel:!!((le=C.value)!=null&&le._id)},null,8,["details","showPanel"])):I("",!0)])])}}}),rr=Xt(nr,[["__scopeId","data-v-d69aab63"]]),or={class:"flex-auto flex-grow h-full min-h-0 bg-bg-card rounded-[6px] border border-border overflow-x-auto flex-col flex"},ir={key:1},dr={key:1,class:"p-4 w-full min-w-0 box-border h-full min-h-0"},ur={class:"flex items-center justify-between"},cr={class:"text-sm font-semibold flex gap-2 items-center"},pr={class:"flex items-center gap-2 relative",ref:"filterDropdownRef"},fr={key:0,class:"flex items-center gap-2 overflow-x-auto no-scrollbar py-1"},vr=["onClick"],mr={key:1,class:"relative flex items-center gap-3"},gr={class:"relative flex-shrink-0"},br={class:"flex items-center gap-2 truncate"},xr=["src"],yr={class:"truncate"},_r={key:0,class:"absolute left-0 top-full mt-1 w-44 bg-bg-card border border-gray-200 rounded-lg shadow-lg z-[9999]"},hr={class:"flex flex-col"},kr=["onClick"],wr={class:"flex gap-2 overflow-x-auto no-scrollbar flex-1"},Cr=["onClick"],Sr={key:0,class:"w-full h-full min-h-[250px] flex justify-center items-center"},$r={class:"flex justify-between gap-4 px-3 pb-2 border-b border-border-input"},Dr={class:"flex items-center gap-2 bg-bg-card min-w-0"},Tr=["onClick"],Vr={class:"flex items-center lg:gap-2 max-w-full"},Lr={class:"flex items-center lg:gap-2 max-w-full"},Er={class:"truncate max-w-[160px]"},Mr={key:1,class:"absolute left-0 mt-2 w-60 bg-bg-card border-accent-hover rounded-xl shadow-lg z-50 max-h-64 overflow-y-auto overflow-x-hidden"},Ar={class:"relative flex-1"},Br=["onClick"],Ir=["onBlur","onKeyup"],Fr={class:"relative ml-2 flex gap-2"},Nr=["onClick"],Or=["onClick"],Ur={class:"ms-2 flex gap-2 items-center"},qr={class:"flex"},Pr={class:"gap-2 hidden lg:flex"},zr={key:0,class:"flex gap-2"},jr={key:0,class:"gap-2"},Rr={class:"hidden lg:fxex bg-[#E6E1F5] text-accent px-3 py-1 rounded-2xl justify-center items-center"},Hr={key:0,class:"flex lg:hidden"},Wr=["title"],Kr=["disabled"],Qr={class:"absolute z-50 top-10 mb-2 -translate-x-2/3 bg-card border border-accent text-accent text-xs px-2 py-1 rounded whitespace-nowrap"},Gr={key:0,class:"fixed inset-0 z-50 flex items-center justify-center w-full"},Jr={class:"relative bg-bg-card rounded-lg p-4 mx-3 w-full max-w-md lg:max-w-2xl xl:max-w-3xl"},Zr={class:"flex flex-col gap-2 mt-4"},Xr={class:"text-sm text-muted mb-2"},Yr={class:"flex gap-2 w-full"},eo={key:0,class:"mt-1 w-full bg-bg-card rounded-md max-h-64 overflow-y-auto"},to=["onClick"],lo={class:"flex items-center justify-between"},ao={class:"font-medium"},so={class:"text-muted text-xs ml-2"},no={class:"flex gap-2 text-xs"},ro={class:"text-muted border border-border-input rounded-md px-3 py-1"},oo={key:1,class:"absolute top-full left-0 mt-1 w-full bg-bg-card border border-border-input rounded-md shadow-md p-4 z-50 text-center text-muted"},io={key:0,class:"w-full h-full min-h-[250px] flex justify-center items-center"},uo={class:"flex-1 min-h-0"},co={key:1,class:"bg-bg-card w-full p-6 flex flex-col items-center justify-center text-center gap-4 h-[100%] mt-3"},po={class:"text-lg font-semibold text-accent"},fo={class:"text-sm text-muted max-w-md"},vo={key:2,class:"w-full h-full min-h-[250px] flex flex-col items-center justify-center text-center gap-4 p-6"},mo={class:"text-xl font-semibold text-accent"},go={class:"text-sm text-muted max-w-md"},Qt=400,bo=ht({__name:"Plan",setup(k){const{theme:x}=gl(),N=b(!1),T=b(""),Q=b(!1),O=b(!1),{canCreateCard:u}=ul(),M=b(!1),P=b(null),W=b(!1),q=b(!1),F=D(()=>E.value.value),Z=b(""),K=[{label:"Milestone",value:"milestone",dot:"#2e9bda"},{label:"Sprint",value:"sprint",dot:"#7d68c8"},{label:"Huddle",value:"huddle",dot:"#eea832"}],Y=D(()=>F.value?F.value.charAt(0).toUpperCase()+F.value.slice(1):""),E=b(K[0]),z=b(null),re=b(!1);Kt(z,()=>{re.value=!1});const B=()=>{N.value=!1},d=()=>{M.value=!0},s=b(!1),r=()=>{s.value=!s.value},{workspaceId:n}=Ul(),v=b(!1),{moveSelectedToSprint:y,moveSelectedToBacklog:ee,deleteSelected:_,saveSprintMeta:V,toggleStartSprint:ye}=Fa();function ge(i){Z.value=i,ne.value=!1}function Ke(i){Z.value=i,ne.value=!1}function Ct(i){Z.value=i,ne.value=!1}const{data:we,refetch:Qe}=dl(n,F,Z);R(Z,()=>{Qe()});const{data:rt}=ua(n),ot=D(()=>{var i;return((i=rt.value)==null?void 0:i.modules.filter(a=>{var J;return((J=a==null?void 0:a.variables)==null?void 0:J["module-title"])!=="Pin"}))||[]});R(()=>F.value,(i,a)=>{i!==a&&Qe()});const{mutate:Me,isPending:it}=Aa({onSuccess:()=>{Tt.invalidateQueries({queryKey:["sprint-list"]}),se.value=!1}}),pe=b(null),se=b(!1),Ge=()=>{var i;Me((i=pe.value)==null?void 0:i._id)},{mutate:fe,isPending:Fe}=Il({onSuccess:i=>{V({name:i.title}),dt({id:G.value,payload:{title:i.title,start_date:i.start_date,end_date:i.end_date,goal:i.goal,duration:Number(i.duration_days)}}),Oe.value=!1}}),{mutate:dt,isPending:te}=Ma({onSuccess:()=>{Ze()}}),ut=i=>{fe({id:G.value,payload:{title:i.title,duration:i.duration,start_date:i.start,end_date:i.end,goal:i.goal}})},{data:h,refetch:C,isLoading:S}=$a(n.value,F);R(()=>F.value,(i,a)=>{i!==a&&C()});const{refetch:Ve,isPending:Ne}=dl(n,F),Je=D(()=>{var i,a;return(a=(i=h==null?void 0:h.value)==null?void 0:i.sprints[0])==null?void 0:a._id}),G=b(Je.value);R(()=>Je.value,i=>{G.value=i}),R(()=>G.value,i=>{var a;pe.value=((a=h.value)==null?void 0:a.sprints.find(J=>J._id===i))||null});const{data:oe,refetch:Ze}=La(G,{enabled:D(()=>!!G.value)}),Oe=b(!1),ct=()=>{localStorage.setItem("asFirstTime",JSON.stringify(!0)),Oe.value=!0},Yt=()=>JSON.parse(localStorage.getItem("asFirstTime")||"false"),Ue=()=>{var i;((i=oe.value)==null?void 0:i.status)==="active"&&Yt()&&(M.value=!0,localStorage.setItem("asFirstTime",JSON.stringify(!1)))};El(()=>{Ue()}),R(()=>{var i;return(i=oe.value)==null?void 0:i.status},()=>{Ue()});const{data:_e,refetch:el}=Da(G);R(()=>G.value,()=>{G.value&&Ze()});const qe=b(""),St=b(null),Ae=D(()=>{const i=_e.value;if(!qe.value||!(i!=null&&i.backlog_items))return[];const a=qe.value.toLowerCase().trim();return i.backlog_items.filter(J=>{var et,tt,lt,at,st,Mt,At,Bt,It,Ft;const ke=((lt=(tt=(et=J.card)==null?void 0:et.variables)==null?void 0:tt["card-title"])==null?void 0:lt.toLowerCase())||"",Ee=((Mt=(st=(at=J.card)==null?void 0:at.variables)==null?void 0:st["card-code"])==null?void 0:Mt.toLowerCase())||"",xt=((It=(Bt=(At=J.card)==null?void 0:At.variables)==null?void 0:Bt["card-status"])==null?void 0:It.toLowerCase())||"",ie=((Ft=J.priority)==null?void 0:Ft.toLowerCase())||"",Ie=String(J._id||"").toLowerCase(),je=String(J.card_id||"").toLowerCase();return ke.includes(a)||Ee.includes(a)||xt.includes(a)||ie.includes(a)||Ie.includes(a)||je.includes(a)})});function tl(i){qe.value=i}function ll(){Ae.value.length===1&&Ut(Ae.value[0])}const pt={high:"bg-red-500/20 text-red-500",medium:"bg-yellow-500/20 text-yellow-500",low:"bg-green-500/20 text-green-500"};function al(i){const a=i==null?void 0:i.toLowerCase();return pt[a]??"bg-gray-500/20 text-gray-500"}function sl(i){St.value=i,j.value=!1}const Ce=D(()=>{var J,ke,Ee,xt;const i=(J=_e.value)==null?void 0:J.backlog_items;if(!i)return null;const a=(i||[]).map(ie=>{var et,tt,lt,at,st;const Ie=((et=ie==null?void 0:ie.card)==null?void 0:et.variables)||{},je=((tt=ie==null?void 0:ie.card)==null?void 0:tt._id)||ie.card_id;return{id:je,key:Ie["card-code"]||(je==null?void 0:je.slice(-6))||"PRJ-?",summary:Ie["card-title"]||"(untitled)",type:"Story",status:nl(String(Ie["card-status"]||"").trim()),assignee:((at=(lt=ie==null?void 0:ie.card)==null?void 0:lt.assigned_to)==null?void 0:at.name)||"Unassigned",storyPoints:Number(ie.story_points||0),priority:rl(String(Ie.priority||"").trim()),createdAt:((st=ie==null?void 0:ie.card)==null?void 0:st.created_at)||new Date().toISOString(),description:Ie["card-description"]||""}});return{id:(ke=_e.value)==null?void 0:ke._id,name:((Ee=_e.value)==null?void 0:Ee.title)||"Sprint 1",title:(xt=_e.value)==null?void 0:xt.title,goal:"",start:"",end:"",started:!1,tickets:a}});function Ut(i){console.log("selected sprint id",i),G.value=i._id,A.value=!1}function nl(i){const a=i.toLowerCase();return a.includes("progress")?"In Progress":a.includes("done")||a.includes("complete")?"Done":"Todo"}function rl(i){const a=i.toLowerCase();return a==="highest"||a==="blocker"||a==="critical"?"Highest":a==="high"||a==="major"?"High":a==="medium"||a==="normal"?"Medium":"Low"}const{mutate:$t}=Ba({onSuccess:()=>{wt.success("Card removed from sprint successfully"),Dt()},onError:i=>{wt.error("Failed to remove card from sprint",i)}});function Dt(){el(),C(),Ve(),Ze()}function ol(i,a){const J=Array.isArray(i)?i:[i],ke=a||G.value;!ke||!J.length||J.forEach(Ee=>{$t({sprintId:ke,cardId:Ee})})}const ft=b(!1),vt=b(null);function qt(){v.value=!0,vt.value=null}function Pt(i){vt.value=i,N.value=!0,ft.value=!0}const Xe=b(!1);function zt(){Xe.value=!0}const Tt=ml(),{mutate:il,isPending:Pe}=Ea({onSuccess:i=>{V({name:i.title}),Tt.invalidateQueries({queryKey:["sprint-list"]}),Xe.value=!1}}),{mutate:ze,isPending:jt}=Il({onSuccess:i=>{V({name:i.title}),Tt.invalidateQueries({queryKey:["sprint-list"]}),Xe.value=!1}}),Be=b("");function Se(i){const a=Be.value.trim();if(!a||a===i.title){p();return}ze({id:i._id,payload:{workspace_id:n.value,title:a}}),e.value=null}function $e(i){var a;pe.value?ze({id:(a=pe.value)==null?void 0:a._id,payload:{workspace_id:n.value,title:i.name,sprintType:i.value,description:i.description}}):il({payload:{workspace_id:n.value,title:i.name,sprintType:i.value,description:i.description}})}function mt(){pe.value=null,Xe.value=!0}function he(i){pe.value=i,se.value=!0}const{mutate:Ye,isPending:Vt}=Va(G,{onSuccess:()=>{Ze()}}),Rt=()=>{Ye({})},gt=b(null),bt=b(0);let kt=!1;El(()=>{if(!gt.value)return;const i=gt.value.offsetWidth;bt.value=i/3});function Lt(){kt=!0,document.addEventListener("mousemove",Et),document.addEventListener("mouseup",l)}function Et(i){if(!kt||!gt.value)return;const a=gt.value.getBoundingClientRect(),J=i.clientX-a.left;J<Qt?bt.value=Qt:J>a.width-Qt?bt.value=a.width-Qt:bt.value=J}function l(){kt=!1,document.removeEventListener("mousemove",Et),document.removeEventListener("mouseup",l)}const e=b(null);function o(i){e.value=i._id,i.tempTitle=i.title}function p(){var a;const i=(a=h.value)==null?void 0:a.sprints.find(J=>J._id===e.value);i&&(i.tempTitle=i.title),e.value=null}Kt(P,()=>{q.value=!1});const m=i=>{console.log("selected type",i),E.value=i,W.value=!1};Kt(z,()=>{W.value=!1});const X=b(null),A=b(!1);Kt(X,()=>{A.value=!1});const j=b(!1),le=()=>{j.value=!0},$=()=>{j.value=!1,qe.value=""},ve=b("all"),ne=b(!1),Le=D(()=>{var a,J,ke;if(ve.value==="all")return"All Milestones";const i=(J=(a=rt.value)==null?void 0:a.modules)==null?void 0:J.find(Ee=>Ee._id===ve.value);return((ke=i==null?void 0:i.variables)==null?void 0:ke["module-title"])||"Select Module"});return(i,a)=>{var J,ke,Ee,xt,ie,Ie,je,et,tt,lt,at,st,Mt,At,Bt,It,Ft,bl,xl,yl,_l,hl,kl,wl,Cl;return c(),g("div",or,[M.value?(c(),ce(rr,{key:0,sptint_id:G.value,searchQuery:T.value,onGoBack:a[0]||(a[0]=w=>M.value=!1)},null,8,["sptint_id","searchQuery"])):I("",!0),M.value?I("",!0):(c(),g("div",ir,[f(te)?(c(),ce(Wl,{key:0})):I("",!0),f(te)?I("",!0):(c(),g("div",dr,[t("div",{class:"flex gap-2 h-full max-h-screen min-h-0 box-border overflow-x-auto group",ref_key:"containerRef",ref:gt},[t("section",{class:H(["space-y-4 p-4 rounded-md relative group box-border h-full min-h-0 min-w-[400px]",f(x)==="dark"?"bg-bg-surface":"bg-bg-surface/30"]),style:ue({width:bt.value+"px"})},[t("div",ur,[t("h2",cr,[nt(t("input",{type:"checkbox",class:"custom-checkbox bg-bg-body border border-border-input flex-shrink-0","onUpdate:modelValue":a[1]||(a[1]=w=>Q.value=w)},null,512),[[ca,Q.value]]),ae(" Tickets ("+L((ke=(J=f(we))==null?void 0:J.cards)==null?void 0:ke.length)+" "+L(((xt=(Ee=f(we))==null?void 0:Ee.cards)==null?void 0:xt.length)>1?"Tasks":"Task")+") ",1)]),t("div",pr,[f(u)?(c(),g("button",{key:0,class:"w-8 h-8 rounded cursor-pointer text-sm hover:bg-bg-body flex items-center justify-center",onClick:qt},a[22]||(a[22]=[t("i",{class:"text-text-primary fa-regular fa-plus"},null,-1)]))):I("",!0)],512)]),t("div",null,[F.value==="milestone"?(c(),g("div",fr,[t("button",{onClick:a[2]||(a[2]=w=>ge("")),class:H(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium transition-colors whitespace-nowrap",Z.value===""?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])}," All Modules ",2),(c(!0),g(me,null,xe(ot.value,w=>(c(),g("button",{key:w._id,onClick:Re=>ge(w._id),class:H(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium transition-colors whitespace-nowrap cursor-pointer",Z.value===w._id?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])},L(w.variables["module-title"]),11,vr))),128))])):F.value==="huddle"||F.value==="sprint"?(c(),g("div",mr,[t("div",gr,[t("button",{class:"h-8 min-w-[160px] flex items-center justify-between px-2 rounded-md border text-sm border-border hover:bg-bg-body",onClick:a[3]||(a[3]=w=>ne.value=!ne.value)},[t("span",br,[t("img",{src:f(Cs),alt:"filter",class:"w-4 h-4"},null,8,xr),t("span",yr,L(Le.value||"All Milestones"),1)]),a[23]||(a[23]=t("i",{class:"fas fa-chevron-down text-xs ml-2"},null,-1))]),ne.value?(c(),g("div",_r,[t("ul",hr,[t("li",{class:"px-3 py-2 cursor-pointer hover:bg-gray-100",onClick:a[4]||(a[4]=w=>ge(""))}," All Milestones "),(c(!0),g(me,null,xe(ot.value,w=>(c(),g("li",{key:w._id,class:"px-3 py-2 cursor-pointer hover:bg-gray-100",onClick:Re=>Ke(w._id)},L(w.variables["module-title"]),9,kr))),128))])])):I("",!0)]),t("div",wr,[(c(!0),g(me,null,xe((ie=f(h))==null?void 0:ie.sprints,w=>(c(),g("button",{key:w._id,onClick:Re=>Ct(w._id),class:H(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium whitespace-nowrap transition-colors",Z.value===w._id?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])},L(w.title),11,Cr))),128))])])):I("",!0)]),f(Ne)?(c(),g("div",Sr,a[24]||(a[24]=[t("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):(c(),ce(Ya,{key:1,checkedAll:Q.value,"sprint-type":F.value,searchQuery:T.value,"module-id":Z.value,onMoveSelectedToSprint:f(y),onDeleteSelectedBacklog:a[5]||(a[5]=w=>f(_)("backlog")),onOpenTicket:Pt,onTicketMovedToBacklog:ol,onOpenCreateTicket:qt},null,8,["checkedAll","sprint-type","searchQuery","module-id","onMoveSelectedToSprint"]))],6),t("div",{class:"h-full w-[3px] relative z-10 opacity-0 group-hover:opacity-100 bg-red hover:bg-accent cursor-col-resize transition",onMousedown:Lt},null,32),t("section",{class:H(["rounded-md relative group pt-2 flex flex-col flex-1 h-full min-h-0 box-border min-w-[400px] border border-border-input overflow-x-hidden",(f(x)==="dark","bg-bg-card")])},[t("div",$r,[t("div",Dr,[t("div",{ref_key:"elipseWrapperSprint",ref:P,class:"relative inline-block"},[t("button",{onClick:a[6]||(a[6]=De(w=>q.value=!q.value,["stop"])),class:"flex items-center gap-2 lg:px-3 px-2 py-1.5 text-sm font-medium bg-transparent rounded-lg",style:ue({border:"1px solid "+E.value.dot})},[t("span",{class:"w-2 h-2 rounded-full hidden lg:flex",style:ue({backgroundColor:E.value.dot})},null,4),ae(" "+L(E.value.label)+" ",1),a[25]||(a[25]=t("i",{class:"fas fa-chevron-down text-xs"},null,-1))],4),U(Ml,{name:"fade"},{default:de(()=>[q.value?(c(),g("ul",{key:0,onClick:a[7]||(a[7]=De(()=>{},["stop"])),class:"absolute left-0 mt-2 w-44 bg-bg-dropdown border border-border rounded-xl shadow-lg z-50"},[(c(),g(me,null,xe(K,w=>t("li",{key:w.value,onClick:Re=>(m(w),q.value=!q.value),class:"flex items-center gap-3 px-4 py-2 text-sm cursor-pointer"},[t("span",{class:"w-2 h-2 rounded-full",style:ue({backgroundColor:w.dot})},null,4),ae(" "+L(w.label),1)],8,Tr)),64))])):I("",!0)]),_:1})],512),t("div",Vr,[t("div",Lr,[t("div",{ref_key:"sprintDropdownWrapperRef",ref:X,class:"relative min-w-0"},[(Ie=f(h))!=null&&Ie.sprints.length?(c(),g("button",{key:0,onClick:a[8]||(a[8]=w=>A.value=!A.value),class:H(["flex items-center gap-3 lg:px-6 px-1 py-1.5 rounded-lg text-sm font-medium transition-all",G.value?"text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"]),style:ue(G.value?{backgroundColor:E.value.dot}:{})},[t("span",Er,L((tt=(et=(je=f(h))==null?void 0:je.sprints)==null?void 0:et.find(w=>w._id===G.value))==null?void 0:tt.title),1),a[26]||(a[26]=t("i",{class:"fas fa-chevron-down text-xs"},null,-1))],6)):I("",!0),A.value?(c(),g("div",Mr,[(c(!0),g(me,null,xe((lt=f(h))==null?void 0:lt.sprints,w=>{var Re;return c(),g("div",{key:w._id,class:"relative px-4 py-2 flex items-center justify-between text-sm cursor-pointer transition-color"},[t("div",Ar,[e.value!==w._id?(c(),g("button",{key:0,class:"text-left truncate w-full",onClick:He=>Ut(w)},L(w.title),9,Br)):nt((c(),g("input",{key:1,ref_for:!0,ref:"editingInputRef","onUpdate:modelValue":a[9]||(a[9]=He=>Be.value=He),class:"w-full px-1 py-1 text-sm rounded outline-none bg-bg-card border border-[#7d68c8]",placeholder:"Enter new name",onClick:a[10]||(a[10]=De(()=>{},["stop"])),onBlur:He=>Se(w),onKeyup:[Gt(He=>Se(w),["enter"]),Gt(p,["esc"])]},null,40,Ir)),[[vl,Be.value]])]),t("div",Fr,[t("button",{class:"ml-2 text-xs text-gray-400 hover:text-accent",onClick:De(He=>o(w),["stop"])},a[27]||(a[27]=[t("i",{class:"fas fa-pen"},null,-1)]),8,Nr),(Re=f(h))!=null&&Re.sprints.length&&e.value!==w._id?(c(),g("button",{key:0,onClick:De(He=>he(w),["stop"]),class:"w-4 h-4 rounded-full flex items-center justify-center text-red-500"},a[28]||(a[28]=[t("i",{class:"fas fa-times text-xs"},null,-1)]),8,Or)):I("",!0)])])}),128))])):I("",!0)],512)])]),t("button",{onClick:a[11]||(a[11]=w=>mt()),class:H(["w-8 h-8 lg:flex sm:hidden items-center justify-center rounded-full border text-white transition-colors shrink-0"]),style:ue({backgroundColor:G.value?E.value.dot:"#7d68c8"})},a[29]||(a[29]=[t("i",{class:"fa-solid fa-plus"},null,-1)]),4)]),t("div",Ur,[t("div",qr,[(st=(at=f(oe))==null?void 0:at.cards)!=null&&st.length?(c(),g("button",{key:0,class:"flex items-center justify-center w-8 h-8 rounded-full bg-accent",onClick:le,style:ue(G.value?{backgroundColor:E.value.dot}:{})},a[30]||(a[30]=[t("i",{class:"fa-solid fa-magnifying-glass text-white"},null,-1)]),4)):I("",!0),((Mt=f(oe))==null?void 0:Mt.status)==="active"?(c(),g("button",{key:1,class:"flex lg:hidden cursor-pointer text-white items-center justify-center rounded-full ms-2 w-7 h-7 text-sm font-medium",onClick:d,style:ue(G.value?{backgroundColor:E.value.dot}:{})},a[31]||(a[31]=[t("i",{class:"fa-regular fa-eye text-sm"},null,-1)]),4)):I("",!0)]),t("div",Pr,[((At=f(oe))==null?void 0:At.status)==="active"?(c(),g("div",zr,[U(We,{size:"sm",onClick:Rt,variant:(f(x)==="dark","primary"),class:"border-border-input border",style:ue(G.value?{backgroundColor:E.value.dot}:{})},{default:de(()=>[ae(L(f(Vt)?"Ending...":"End"),1)]),_:1},8,["variant","style"]),t("button",{class:"cursor-pointer text-white flex items-center justify-center gap-1 px-2 py-1 rounded-md text-sm font-medium",onClick:d,style:ue(G.value?{backgroundColor:E.value.dot}:{})},a[32]||(a[32]=[t("i",{class:"fa-regular fa-eye text-sm"},null,-1),ae(" Preview ")]),4)])):(c(),ce(We,{key:1,size:"sm",variant:(f(x)==="dark","primary"),class:"border-border-input border",onClick:ct,disabled:!Ce.value||Ce.value.tickets.length===0||f(oe).status==="completed",style:ue(G.value?{backgroundColor:E.value.dot}:{})},{default:de(()=>[ae(" Start "+L(E.value.label),1)]),_:1},8,["variant","disabled","style"]))]),Ce.value&&Ce.value.tickets.length?(c(),g("div",jr,[t("span",Rr,L((Bt=f(oe))==null?void 0:Bt.status),1),((It=f(oe))==null?void 0:It.status)==="active"?(c(),g("div",Hr,[t("button",{onClick:Rt,class:"w-7 h-7 flex items-center justify-center rounded-full bg-accent",title:f(Vt)?"Ending...":"End Sprint",style:ue(G.value?{backgroundColor:E.value.dot}:{})},a[33]||(a[33]=[t("i",{class:"fa-solid fa-flag-checkered text-white"},null,-1)]),12,Wr)])):(c(),g("button",{key:1,onClick:ct,disabled:!Ce.value||Ce.value.tickets.length===0||f(oe).status==="completed",class:"w-7 h-7 flex items-center justify-center rounded-full text-white bg-accent disabled:opacity-50 disabled:cursor-not-allowed lg:hidden",title:"Start Sprint",style:ue(G.value?{backgroundColor:E.value.dot}:{})},a[34]||(a[34]=[t("i",{class:"fa-solid fa-play text-sm"},null,-1)]),12,Kr))])):I("",!0),((Ft=f(oe))==null?void 0:Ft.status)==="active"?(c(),g("div",{key:1,class:"relative inline-flex",onMouseenter:a[12]||(a[12]=w=>s.value=!0),onMouseleave:a[13]||(a[13]=w=>s.value=!1),onClick:r},[a[35]||(a[35]=t("span",{class:"flex lg:hidden bg-emerald-500 text-white w-7 h-7 rounded-full justify-center items-center cursor-pointer"},[t("i",{class:"fa-solid fa-check"})],-1)),nt(t("div",Qr," Sprint is active ",512),[[Zt,s.value]])],32)):I("",!0)]),U(Ml,{name:"fade"},{default:de(()=>[j.value?(c(),g("div",Gr,[t("div",{class:"absolute inset-0 bg-black/10 backdrop-blur-sm",onClick:$}),t("div",Jr,[t("div",{class:"flex justify-end"},[t("button",{onClick:$,class:"px-2 py-1 rounded bg-bg-input border border-border-input text-accent"},a[36]||(a[36]=[t("i",{class:"fa-solid fa-xmark"},null,-1)]))]),t("div",Zr,[t("p",Xr," Search for "+L(F.value)+" by name, status, or priority. Start typing to filter results. ",1),t("div",Yr,[U(ma,{placeholder:`Search in ${F.value}`,onOnChange:tl,onKeyup:Gt(ll,["enter"]),class:"flex-1"},null,8,["placeholder"])]),Ae.value.length&&qe.value?(c(),g("div",eo,[t("ul",null,[(c(!0),g(me,null,xe(Ae.value,w=>{var Re,He,Sl,$l,Dl,Tl;return c(),g("li",{key:w._id,onClick:xo=>sl(w),class:"px-4 py-2 cursor-pointer hover:bg-bg-hover text-text-primary border-b border-border-input"},[t("div",lo,[t("div",null,[t("span",ao,L((He=(Re=w.card)==null?void 0:Re.variables)==null?void 0:He["card-title"]),1),t("span",so," ("+L(($l=(Sl=w.card)==null?void 0:Sl.variables)==null?void 0:$l["card-code"])+") ",1)]),t("div",no,[t("span",{class:H(["px-3 py-1 rounded text-md",al(w.priority)])},L(w.priority),3),t("span",ro,L((Tl=(Dl=w.card)==null?void 0:Dl.variables)==null?void 0:Tl["card-status"]),1)])])],8,to)}),128))])])):qe.value&&!Ae.value.length?(c(),g("div",oo," No "+L(F.value)+' found matching "'+L(qe.value)+'" ',1)):I("",!0)])])])):I("",!0)]),_:1})]),f(S)?(c(),g("div",io,a[37]||(a[37]=[t("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):I("",!0),t("div",uo,[Ce.value&&f(oe)&&((bl=f(oe))==null?void 0:bl.status)==="planning"||((xl=f(oe))==null?void 0:xl.status)==="active"?(c(),ce(bs,{key:0,searchQuery:T.value,sprintId:G.value,searchedData:St.value?[St.value]:[],label:F.value,checkedSprintAll:O.value,sprint:Ce.value,onOpenTicket:Pt,onEditSprint:zt,onToggleStart:f(ye),onMoveSelectedToBacklog:f(ee),onDeleteSelectedSprint:a[14]||(a[14]=w=>f(_)("sprint",w)),onRefresh:Dt},null,8,["searchQuery","sprintId","searchedData","label","checkedSprintAll","sprint","onToggleStart","onMoveSelectedToBacklog"])):I("",!0),((yl=f(oe))==null?void 0:yl.status)==="completed"?(c(),g("div",co,[a[40]||(a[40]=t("div",{class:"w-20 h-20 flex justify-center items-center text-white rounded-full text-3xl"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 117.72 117.72","aria-hidden":"true"},[t("path",{fill:"#42ba96",d:`M58.86,0c9.13,0,17.77,2.08,25.49,5.79c-3.16,2.5-6.09,4.9-8.82,7.21c-5.2-1.89-10.81-2.92-16.66-2.92\r
                  c-13.47,0-25.67,5.46-34.49,14.29c-8.83,8.83-14.29,21.02-14.29,34.49c0,13.47,5.46,25.66,14.29,34.49\r
                  c8.83,8.83,21.02,14.29,34.49,14.29s25.67-5.46,34.49-14.29c8.83-8.83,14.29-21.02,14.29-34.49\r
                  c0-3.2-0.31-6.34-0.9-9.37c2.53-3.3,5.12-6.59,7.77-9.85c2.08,6.02,3.21,12.49,3.21,19.22\r
                  c0,16.25-6.59,30.97-17.24,41.62c-10.65,10.65-25.37,17.24-41.62,17.24c-16.25,0-30.97-6.59-41.62-17.24\r
                  C6.59,89.83,0,75.11,0,58.86c0-16.25,6.59-30.97,17.24-41.62S42.61,0,58.86,0z\r
                  M31.44,49.19L45.8,49l1.07,0.28c2.9,1.67,5.63,3.58,8.18,5.74c1.84,1.56,3.6,3.26,5.27,5.1\r
                  c5.15-8.29,10.64-15.9,16.44-22.9c6.35-7.67,13.09-14.63,20.17-20.98l1.4-0.54H114l-3.16,3.51\r
                  C101.13,30,92.32,41.15,84.36,52.65C76.4,64.16,69.28,76.04,62.95,88.27l-1.97,3.8l-1.81-3.87\r
                  c-3.34-7.17-7.34-13.75-12.11-19.63c-4.77-5.88-10.32-11.1-16.79-15.54L31.44,49.19z`})])],-1)),t("h4",po,L(Y.value)+" Completed ",1),t("p",fo,[ae(" This "+L(F.value)+" has been successfully completed. To continue planning work, create a new "+L(F.value)+" by clicking the ",1),a[38]||(a[38]=t("strong",null,"plus (+)",-1)),a[39]||(a[39]=ae(" button and start organizing upcoming tasks. "))])])):I("",!0),((_l=f(oe))==null?void 0:_l.length)<1||((hl=f(h))==null?void 0:hl.sprints.length)<1?(c(),g("div",vo,[a[43]||(a[43]=t("div",{class:"w-20 h-20 flex items-center justify-center rounded-full bg-muted/10 text-accent"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-20 h-20",fill:"none",viewBox:"0 0 24 24",stroke:"#ff3333","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("h4",mo," No "+L(F.value)+"s available ",1),t("p",go,[ae(" You donâ€™t have any "+L(F.value)+"s yet. Create a new "+L(F.value)+" to start planning and organizing your work. Click the ",1),a[41]||(a[41]=t("strong",null,"plus (+)",-1)),a[42]||(a[42]=ae(" button to get started. "))])])):I("",!0)])],2)],512)]))])),U(ga,{onClick:a[15]||(a[15]=De(()=>{},["stop"])),modelValue:se.value,"onUpdate:modelValue":a[16]||(a[16]=w=>se.value=w),title:"Delete Sprint",itemLabel:"Sprint",itemName:(kl=pe.value)==null?void 0:kl.title,requireMatchText:(wl=pe.value)==null?void 0:wl.title,confirmText:"Delete Sprint",cancelText:"Cancel",size:"md",loading:f(it),onConfirm:Ge,onCancel:a[17]||(a[17]=()=>{pe.value=null,se.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),U(ws,{modelValue:Xe.value,"onUpdate:modelValue":a[18]||(a[18]=w=>Xe.value=w),onSave:$e,sprint:pe.value,lable:F.value,creatingSprint:pe.value?f(jt):f(Pe)},null,8,["modelValue","sprint","lable","creatingSprint"]),U(Fs,{sprint:pe.value,modelValue:Oe.value,"onUpdate:modelValue":a[19]||(a[19]=w=>Oe.value=w),onSave:ut,creatingSprint:f(te)||f(Fe)},null,8,["sprint","modelValue","creatingSprint"]),U(pa,{modelValue:N.value,"onUpdate:modelValue":a[20]||(a[20]=w=>N.value=w),cardId:(Cl=vt.value)==null?void 0:Cl.id,onClose:B},null,8,["modelValue","cardId"]),U(yn,{modelValue:v.value,"onUpdate:modelValue":a[21]||(a[21]=w=>v.value=w)},null,8,["modelValue"])])}}}),Ao=Xt(bo,[["__scopeId","data-v-5f8a3dc1"]]);export{Ao as default};
