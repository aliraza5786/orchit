const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-BVlvtfv7.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-BK1pwJm6.js","assets/index-DPI-BQvI.js","assets/index-Db3QeTzS.css","assets/CreateSheetModal-D18h4ivx.js","assets/IconPicker-B92EkhBW.js","assets/IconPicker-CIMr_3tu.css","assets/AudioRecorder.vue_vue_type_script_setup_true_lang-BXmW2J-z.js","assets/CreateSheetModal--7RYCgy-.css","assets/CreateVariableModal-CLAq1N6y.js","assets/ConfirmDeleteModal-BMXtnf2h.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-Ckar-tRs.js","assets/SidePanel-D3WfNYCN.js","assets/SidePanel-U7OOMI6M.css","assets/KanbanBoard-DYBHuyy-.js","assets/lodash-B3d4OLnQ.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-Btsqne5P.js","assets/KanbanBoard-Dffh696C.css"])))=>i.map(i=>d[i]);
import{d as At,J as Ut,n as ye,r as D,c as G,l as j,h as u,F as se,y as Ne,m as X,j as xe,i as Te,o as T,a8 as ce,t as oe,C as et,K as Kt,O as Dt,e as Le,aU as Ro,ai as It,at as le,v as Bn,an as Rn,z as Ve,ac as ot,aV as Fn,U as Yn,L as qn,aK as Fo,p as V,b2 as Xt,P as Zt,M as Yo,Z as qo,a0 as Wo,a3 as Uo,u as Ko,af as Xo,a4 as Zo,a5 as Qo,ag as Go,$ as Jo,ad as ei,a1 as ti,bg as ni,bh as oi,bi as ii,k as ae,w as Ke,D as gn,_ as yn,B as xn,N as ri,q as li,bj as si,a6 as Xe,a7 as Ze,S as ai,T as wn,bk as di,X as ci,bl as _n,I as ui}from"./index-DPI-BQvI.js";import{D as Cn,K as pi}from"./Dropdown-HJKOA4Ay.js";import{_ as mi}from"./SearchBar.vue_vue_type_script_setup_true_lang-B5ldfQWf.js";import{K as hi}from"./KanbanTicket-BnCoRNZV.js";import{F as kn}from"./fuse-Ch1WBRTM.js";import{l as fi}from"./lodash-B3d4OLnQ.js";import"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-Ckar-tRs.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-Btsqne5P.js";const vi={class:"px-4"},bi={class:"kanban-table space-y-4 h-[85vh] mt-4 overflow-y-auto overflow-x-auto"},gi={class:"w-full table-fixed border-collapse rounded-[6px] shadow-sm bg-bg-body/20 text-sm border border-border/60"},yi={class:"bg-bg-surface border-b border-border sticky top-[-1px] z-10"},xi={class:"text-text-secondary"},wi=["onMousedown"],_i={class:"w-10 p-2 text-center relative"},Ci={class:"relative inline-block"},ki={key:0,class:"column-menu absolute w-[200px] -right-1 bg-bg-dropdown border border-border rounded shadow z-50"},Ni=["checked","onChange"],Mi={class:"bg-bg-surface/20"},Ei=["colspan"],Si=["onClick"],Li=["colspan"],Ti=["onMouseenter"],zi=["colspan"],ji=["onUpdate:modelValue","onBlur"],Ai=["colspan"],Di=At({__name:"TableView",props:{columns:{},rows:{},isPending:{type:Boolean},canCreate:{type:Boolean,default:!0},canCreateVariable:{type:Boolean,default:!0}},emits:["update:rows","create","toggleVisibility","addVar"],setup(e,{emit:t}){const n=e,o=t,i=Ut(n.rows||[]);ye(()=>n.rows,b=>{b&&i.splice(0,i.length,...b)});const l=Ut({id:null,field:""}),a=D(null),s=D(null),c=G(()=>i.some(b=>l.id===b.id&&!b[l.field])),p=(b,x)=>{l.id=b.id,l.field=x,It(()=>{var E;return(E=s.value)==null?void 0:E.focus()})},m=()=>{l.id=null,l.field=""},y=b=>{var x;if(!((x=b[l.field])!=null&&x.trim())){const E=i.findIndex(Q=>Q.id===b.id);E!==-1&&i.splice(E,1)}m(),o("update:rows",i.slice()),o("create",b)},h=b=>{var E;const x={id:Date.now()};n.columns.forEach(Q=>x[Q.key]=""),i.splice(b,0,x),p(x,((E=n.columns[0])==null?void 0:E.key)||""),a.value=null,o("update:rows",i.slice())};function _(b,x){if(!(!b||!x))return x.includes(".")?x.split(".").reduce((E,Q)=>E==null?E:E[Q],b):b[x]}function N(b,x){return x!=null&&x.accessor?x.accessor(b):_(b,x.key)}const C=b=>{var E;const x=N(b.row,b.column);return(E=b.column)!=null&&E.render?b.column.render({row:b==null?void 0:b.row,column:b==null?void 0:b.column,value:x,index:b==null?void 0:b.index}):le("span",String(x??""))},f=Ut({});ye(()=>n.columns,b=>{b.forEach((x,E)=>{E==0?f[x.key]=250:f[x.key]||(f[x.key]=150)})},{immediate:!0});let M=null,z=0,L=0;const A=(b,x)=>{M=x,z=b.clientX,L=f[x],document.addEventListener("mousemove",P),document.addEventListener("mouseup",H)},P=b=>{if(!M)return;const x=b.clientX-z,E=Math.max(80,L+x);f[M]=E},H=()=>{M=null,document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",H)};document.addEventListener("click",b=>{b.target.closest(".column-menu")||(I.value=!1)});const Y=D(n.columns.filter(b=>b.visible??!0).map(b=>b.key)),$=G(()=>n.columns.filter(b=>Y.value.includes(b.key))),I=D(!1);document.addEventListener("click",b=>{b.target.closest(".column-menu")||(I.value=!1)});const R=b=>{const x=Y.value.indexOf(b);x===-1?(o("toggleVisibility",b,!0),Y.value.push(b)):(o("toggleVisibility",b,!1),Y.value.splice(x,1))},S=G(()=>1+$.value.length+1);return(b,x)=>(T(),j("div",vi,[u("div",bi,[u("table",gi,[u("thead",yi,[u("tr",xi,[x[8]||(x[8]=u("th",{class:"w-2 p-0"},null,-1)),(T(!0),j(se,null,Ne($.value,E=>(T(),j("th",{key:E==null?void 0:E.key,class:"relative font-bold p-2 uppercase text-left text-[11px] tracking-wide border-r border-border/40 select-none whitespace-nowrap min-w-[200px]",style:ce({width:f[E.key]?f[E.key]+"px":"100%"})},[u("span",null,oe(E==null?void 0:E.label),1),u("div",{class:"absolute right-0 top-0 h-full w-2 cursor-col-resize z-30 hover:bg-accent/20 active:bg-accent/40 transition",onMousedown:Q=>A(Q,E.key)},null,40,wi)],4))),128)),u("th",_i,[u("div",Ci,[u("button",{onClick:x[0]||(x[0]=xe(E=>I.value=!I.value,["stop"])),class:"p-1 rounded hover:bg-bg-surface/50 cursor-pointer"},x[6]||(x[6]=[u("i",{class:"fa-regular fa-columns-3"},null,-1)])),I.value?(T(),j("div",ki,[(T(!0),j(se,null,Ne(n.columns,E=>(T(),j("div",{key:"toggle-"+E.key,class:"flex items-center space-x-2 px-3 py-1.5 capitalize font-medium cursor-pointer hover:bg-bg-dropdown-menu-hover text-[12px] text-text-primary gap-2"},[u("input",{type:"checkbox",checked:Y.value.includes(E.key),onChange:Q=>R(E.key),class:"h-4 w-4 mt-0.5 rounded border-border accent-accent cursor-pointer flex-shrink-0"},null,40,Ni),u("span",null,oe(E.label),1)]))),128)),b.canCreateVariable?(T(),j("div",{key:0,onClick:x[1]||(x[1]=E=>o("addVar")),class:"sticky bottom-0 bg-bg-dropdown shadow-md mt-2 shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},x[7]||(x[7]=[u("i",{class:"fa-solid fa-plus"},null,-1),Te(" Add new ")]))):X("",!0)])):X("",!0)])])])]),u("tbody",Mi,[b.isPending?(T(),j(se,{key:0},Ne(5,E=>u("tr",{key:"sk-"+E,class:"border-b border-border animate-pulse"},[x[10]||(x[10]=u("td",null,[u("div",{class:"w-4 h-4 bg-bg-surface rounded"})],-1)),(T(!0),j(se,null,Ne(b.columns,(Q,pe)=>(T(),j("td",{key:Q.key,class:"border-r border-border h-8",style:ce({width:f[Q.key]+"px"}),colspan:pe===$.value.length-1?2:1},x[9]||(x[9]=[u("div",{class:"w-full h-4 bg-bg-surface rounded"},null,-1)]),12,Ei))),128))])),64)):(T(!0),j(se,{key:1},Ne(i,(E,Q)=>{var pe;return T(),j(se,{key:E==null?void 0:E.id},[a.value===Q&&!c.value?(T(),j("tr",{key:0,class:"relative bg-bg-surface/20 transition-all cursor-pointer border border-accent",onMouseleave:x[2]||(x[2]=B=>a.value=null)},[u("td",{class:"!p-0 w-8",onClick:B=>h(Q)},x[11]||(x[11]=[u("span",{class:"absolute left-[-6px] top-[-14px] bg-bg-surface border border-border w-6 h-6 text-sm rounded-md flex justify-center items-center shadow-sm hover:bg-bg-surface/70"},"+",-1)]),8,Si),u("td",{class:"!p-0",colspan:(pe=b.columns)==null?void 0:pe.length},null,8,Li)],32)):X("",!0),u("tr",{onMouseenter:B=>a.value=Q,class:"border-b border-border hover:bg-bg-surface/40 transition-colors"},[x[12]||(x[12]=u("td",null,null,-1)),(T(!0),j(se,null,Ne($.value,(B,Ae)=>(T(),j("td",{key:B==null?void 0:B.key,class:"border-r border-border overflow-visible relative h-8",style:ce({width:f[B.key]+"px"}),colspan:Ae===$.value.length-1?2:1},[(l==null?void 0:l.id)===(E==null?void 0:E.id)&&(l==null?void 0:l.field)===(B==null?void 0:B.key)?et((T(),j("input",{key:0,"onUpdate:modelValue":ie=>E[B==null?void 0:B.key]=ie,onBlur:ie=>y(E),class:"min-w-[200px] w-full p-1 border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-bg-body text-[12px] h-8",ref_for:!0,ref:ie=>ie&&(l==null?void 0:l.id)===(E==null?void 0:E.id)&&(l==null?void 0:l.field)===(B==null?void 0:B.key)&&(s.value=ie)},null,40,ji)),[[Dt,E[B==null?void 0:B.key]]]):Kt(b.$slots,B.key,{key:2,row:E,column:B,index:`r-${E._id}`},()=>[(T(),Le(Ro(C),{row:E,column:B,index:E._id},null,8,["row","column","index"]))])],12,zi))),128))],40,Ti)],64)}),128)),!c.value&&b.canCreate?(T(),j("tr",{key:2,onClick:x[3]||(x[3]=E=>h(i==null?void 0:i.length)),class:"sticky bottom-0 bg-bg-surface border-t border-border cursor-pointer transition hover:bg-bg-body",onMouseenter:x[4]||(x[4]=E=>a.value=i==null?void 0:i.length),onMouseleave:x[5]||(x[5]=E=>a.value=null)},[u("td",{colspan:S.value,class:"text-text-secondary h-8 px-3"},x[13]||(x[13]=[u("span",{class:"inline-flex w-5 h-5 border border-border-input rounded-full justify-center items-center text-secondary hover:bg-bg-surface/50 transition pb-0.5"},"+",-1),Te(" Add New Row ")]),8,Ai)],32)):X("",!0)])])])]))}});(function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".mind-elixir{--gap: 30px;--root-radius: 30px;--main-radius: 20px;--root-color: #ffffff;--root-bgcolor: #4c4f69;--main-color: #444446;--main-bgcolor: #ffffff;--topic-padding: 3px;--color: #777777;--bgcolor: #f6f6f6;--selected: #4dc4ff;--panel-color: #444446;--panel-bgcolor: #ffffff;--panel-border-color: #eaeaea;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif}.mind-elixir .hyper-link{text-decoration:none;margin-left:.3em}.map-container{-webkit-user-select:none;user-select:none;height:100%;width:100%;overflow:scroll;font-size:15px}.map-container *{box-sizing:border-box}.map-container::-webkit-scrollbar{width:0px;height:0px}.map-container .selected{box-shadow:0 0 0 2px var(--selected)}.map-container .lhs{direction:rtl}.map-container .lhs me-tpc{direction:ltr}.map-container .map-canvas{height:20000px;width:20000px;position:relative;-webkit-user-select:none;user-select:none;transition:transform .3s;transform:scale(1);background-color:var(--bgcolor)}.map-container .map-canvas me-nodes{position:absolute;display:flex;justify-content:center;align-items:center;height:fit-content;width:fit-content}.map-container .map-canvas me-root{position:relative}.map-container .map-canvas me-root me-tpc{display:block;font-size:25px;color:var(--root-color);padding:10px var(--gap);border-radius:var(--root-radius);white-space:pre-wrap;background-color:var(--root-bgcolor)}.map-container .map-canvas me-root me-tpc #input-box{padding:10px var(--gap)}.map-container me-main>me-wrapper{position:relative;margin:45px 65px}.map-container me-main>me-wrapper>me-parent{margin:10px;padding:0}.map-container me-main>me-wrapper>me-parent>me-tpc{border-radius:var(--main-radius);background-color:var(--main-bgcolor);border:2px solid var(--main-color);color:var(--main-color);padding:8px 25px}.map-container me-main>me-wrapper>me-parent>me-tpc #input-box{padding:8px 25px}.map-container me-wrapper{display:block;pointer-events:none;width:fit-content}.map-container me-children,.map-container me-parent{display:inline-block;vertical-align:middle}.map-container me-parent{position:relative;cursor:pointer;padding:6px var(--gap);margin-top:10px}.map-container me-parent me-tpc{position:relative;display:block;border-radius:3px;color:var(--color);pointer-events:all;max-width:35em;white-space:pre-wrap;padding:var(--topic-padding)}.map-container me-parent me-tpc .insert-preview{position:absolute;width:100%;left:0;z-index:9}.map-container me-parent me-tpc .show{background:#7ad5ff;pointer-events:none;opacity:.7}.map-container me-parent me-tpc .before{height:14px;top:-14px}.map-container me-parent me-tpc .in{height:100%;top:0}.map-container me-parent me-tpc .after{height:14px;bottom:-14px}.map-container me-parent me-epd{position:absolute;height:18px;width:18px;opacity:.8;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NDcxNzI0MiIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNDgwaC0xMzguNjY2NjY3VjM0MS4zMzMzMzNjMC0xNy4wNjY2NjctMTQuOTMzMzMzLTMyLTMyLTMycy0zMiAxNC45MzMzMzMtMzIgMzJ2MTM4LjY2NjY2N0gzNDEuMzMzMzMzYy0xNy4wNjY2NjcgMC0zMiAxNC45MzMzMzMtMzIgMzJzMTQuOTMzMzMzIDMyIDMyIDMyaDEzOC42NjY2NjdWNjgyLjY2NjY2N2MwIDE3LjA2NjY2NyAxNC45MzMzMzMgMzIgMzIgMzJzMzItMTQuOTMzMzMzIDMyLTMydi0xMzguNjY2NjY3SDY4Mi42NjY2NjdjMTcuMDY2NjY3IDAgMzItMTQuOTMzMzMzIDMyLTMycy0xNC45MzMzMzMtMzItMzItMzJ6Ij48L3BhdGg+Cjwvc3ZnPg==);background-repeat:no-repeat;background-size:contain;background-position:center;pointer-events:all;z-index:9}.map-container me-parent me-epd.minus{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NTU2NDk4NSIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNTQ0SDM0MS4zMzMzMzNjLTE3LjA2NjY2NyAwLTMyLTE0LjkzMzMzMy0zMi0zMnMxNC45MzMzMzMtMzIgMzItMzJoMzQxLjMzMzMzNGMxNy4wNjY2NjcgMCAzMiAxNC45MzMzMzMgMzIgMzJzLTE0LjkzMzMzMyAzMi0zMiAzMnoiPjwvcGF0aD4KPC9zdmc+)!important;transition:opacity .3s;opacity:0}.map-container me-parent me-epd.minus:hover{opacity:.8}.map-container .icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}.map-container .lines,.map-container .summary,.map-container .subLines,.map-container .topiclinks,.map-container .linkcontroller{position:absolute;height:102%;width:100%;top:0;left:0}.map-container .topiclinks,.map-container .linkcontroller,.map-container .summary{pointer-events:none}.map-container .topiclinks text,.map-container .linkcontroller text,.map-container .summary text{pointer-events:all}.map-container .topiclinks .selected,.map-container .linkcontroller .selected,.map-container .summary .selected{pointer-events:none}.map-container .lines,.map-container .subLines{pointer-events:none;z-index:-1}.map-container .topiclinks *,.map-container .linkcontroller *{z-index:100}.map-container .topiclinks g{cursor:pointer}.map-container #input-box{position:absolute;top:0;left:0;padding:var(--topic-padding);color:var(--color);background-color:var(--bgcolor);width:max-content;max-width:35em;z-index:11;direction:ltr;-webkit-user-select:auto;user-select:auto;pointer-events:all}.map-container me-tpc>*{pointer-events:none}.map-container me-tpc>img{display:block;margin-bottom:8px;object-fit:cover}.map-container me-tpc>.text{display:inline-block}.map-container .circle{position:absolute;height:10px;width:10px;margin-top:-5px;margin-left:-5px;border-radius:100%;background:#757575;border:2px solid #ffffff;cursor:pointer}.map-container .tags{direction:ltr}.map-container .tags span{display:inline-block;border-radius:3px;padding:2px 4px;background:#d6f0f8;color:#276f86;margin:2px 3px 0 0;font-size:12px;line-height:1.3em}.map-container .icons{display:inline-block;direction:ltr;margin-right:10px}.map-container .icons span{display:inline-block;line-height:1.3em}.map-container .mind-elixir-ghost{position:fixed;top:-100%;left:-100%;box-sizing:content-box;opacity:.5;background-color:#f6f6f6;max-width:200px;width:fit-content;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:8px 16px;border-radius:6px;border:#666666 2px solid}.map-container .selection-area{background:#4f90f22d;border:1px solid #4f90f2}.mind-elixir .context-menu{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99}.mind-elixir .context-menu .menu-list{position:fixed;list-style:none;margin:0;padding:0;font:300 15px Roboto,sans-serif;color:var(--panel-color);box-shadow:0 12px 15px #0003}.mind-elixir .context-menu .menu-list li{min-width:200px;overflow:hidden;white-space:nowrap;padding:10px 14px;background:var(--panel-bgcolor);border-bottom:1px solid var(--panel-border-color)}.mind-elixir .context-menu .menu-list li a{color:#333;text-decoration:none}.mind-elixir .context-menu .menu-list li.disabled{display:none;color:#5e5e5e;background-color:#f7f7f7}.mind-elixir .context-menu .menu-list li.disabled:hover{cursor:default;background-color:#f7f7f7}.mind-elixir .context-menu .menu-list li:hover{cursor:pointer;filter:brightness(.9)}.mind-elixir .context-menu .menu-list li:first-child{border-radius:5px 5px 0 0}.mind-elixir .context-menu .menu-list li:last-child{border-bottom:0;border-radius:0 0 5px 5px}.mind-elixir .context-menu .menu-list li span:last-child{float:right}.mind-elixir .tips{position:absolute;bottom:20px;left:50%;transform:translate(-50%);color:var(--panel-color);font-weight:bolder}.mind-elixir .mobile-menu{position:absolute;left:20px;bottom:70px;z-index:99;margin:0;padding:0;color:#333;border-radius:5px;box-shadow:0 12px 15px #0003;overflow:hidden}.mind-elixir .mobile-menu *{transition:color .4s,background-color .4s}.mind-elixir .mobile-menu div{float:left;text-align:center;width:30px;overflow:hidden;white-space:nowrap;padding:8px;background-color:#fff;border-bottom:1px solid #ecf0f1}.mind-elixir .mobile-menu div a{color:#333;text-decoration:none}.mind-elixir .mobile-menu div.disabled{color:#5e5e5e;background-color:#f7f7f7}.mind-elixir .mobile-menu div.disabled:hover{cursor:default;background-color:#f7f7f7}.mind-elixir .mobile-menu div:hover{cursor:pointer;background-color:#ecf0f1}.mind-elixir-toolbar{font-family:iconfont;position:absolute;color:var(--panel-color);background:var(--panel-bgcolor);padding:10px;border-radius:5px;box-shadow:0 1px 2px #0003}.mind-elixir-toolbar svg{display:inline-block}.mind-elixir-toolbar span:active{opacity:.5}.mind-elixir-toolbar.rb{right:20px;bottom:20px}.mind-elixir-toolbar.rb span+span{margin-left:10px}.mind-elixir-toolbar.lt{font-size:20px;left:20px;top:20px}.mind-elixir-toolbar.lt span{display:block}.mind-elixir-toolbar.lt span+span{margin-top:10px}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();(function(e){var t,n,o,i,l,a,s='<svg><symbol id="icon-edit" viewBox="0 0 1024 1024"><path d="M423.765333 128a42.666667 42.666667 0 0 1 3.2 85.205333L423.765333 213.333333H234.666667a64 64 0 0 0-63.872 60.245334L170.666667 277.333333v512a64 64 0 0 0 60.245333 63.872L234.666667 853.333333h512a64 64 0 0 0 63.872-60.245333L810.666667 789.333333v-189.098666a42.666667 42.666667 0 0 1 85.205333-3.2l0.128 3.2V789.333333a149.333333 149.333333 0 0 1-144.213333 149.248L746.666667 938.666667h-512a149.333333 149.333333 0 0 1-149.248-144.213334L85.333333 789.333333v-512a149.333333 149.333333 0 0 1 144.213334-149.248L234.666667 128h189.098666z m324.949334-53.248a42.666667 42.666667 0 0 1 60.330666 0l150.869334 150.869333a42.666667 42.666667 0 0 1 0 60.330667l-329.386667 329.386667a42.666667 42.666667 0 0 1-29.44 12.458666l-153.386667 2.517334a42.666667 42.666667 0 0 1-43.349333-43.349334l2.56-153.386666a42.666667 42.666667 0 0 1 12.458667-29.44z m30.165333 90.496L491.946667 452.266667l-1.493334 91.989333 92.032-1.493333 286.976-286.976-90.538666-90.538667z"  ></path></symbol><symbol id="icon-rising" viewBox="0 0 1024 1024"><path d="M553.173333 803.84h-64l0.021334-474.581333-224.021334 224-45.269333-45.226667L521.6 206.293333l301.717333 301.696-45.269333 45.269334-224.853333-224.896v475.477333z"  ></path></symbol><symbol id="icon-falling" viewBox="0 0 1024 1024"><path d="M553.173333 238.314667h-64l0.021334 474.602666-224.021334-224-45.269333 45.226667L521.6 835.861333l301.717333-301.717333-45.269333-45.226667-224.853333 224.853334V238.336z"  ></path></symbol><symbol id="icon-shanchu2" viewBox="0 0 1024 1024"><path d="M516.60601807 107.93026734c-82.64382935 0-149.71865844 65.51751709-152.5729065 147.77160644H171.37136841c-21.40603638 0-38.92044068 17.38504028-38.92044068 38.92126465 0 21.40686036 17.38504028 38.92208862 38.92126466 38.92208862h42.94308471v435.40136719c0 81.73498536 55.39828492 148.55026245 123.90106201 148.55026245h348.99444581c68.37341309 0 123.90106201-66.42553711 123.901062-148.55026245V333.80477906h38.92126465c21.40686036 0 38.92126464-17.38586426 38.92126465-38.92208863 0-21.40686036-17.38504028-38.92126464-38.92126465-38.92126465H668.91854859C666.45321656 173.44860839 599.24902344 107.93109131 516.60601807 107.93109131z m-79.65939331 147.77160644c2.85424805-42.16442872 37.2354126-74.85809326 79.78875732-74.85809326s76.93450927 32.82302857 79.39984131 74.85809326H436.94662476z m-98.86047364 589.01165771c-24.2611084 0-50.98754883-31.13717651-50.98754883-75.76693725V333.80477906h450.97036744V769.33551026c0 44.50039673-26.72644043 75.76776123-50.98754884 75.76776122H338.08615112v-0.38973999z m0 0"  ></path><path d="M390.37063599 751.17263794c17.77313232 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.77478027 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.27124023 40.08883667 32.43493653 40.08883667z m117.41308594 0c17.7739563 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.7739563 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.66098023 40.08883667 32.43493653 40.08883667z m123.51049804 0c17.7739563 0 32.43493653-17.7739563 32.43493652-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43493652-40.08966065-17.7739563 0-32.43411255 17.77478027-32.43411255 40.08966065v228.72875976c0 22.18469239 14.14105224 40.08883667 32.43411255 40.08883667z m0 0"  ></path></symbol><symbol id="icon-zijiedian" viewBox="0 0 1024 1024"><path d="M312.208 472c19.568-157.856 153.432-280 315.656-280 175.68 0 318.112 143.272 318.112 320S803.552 832 627.864 832c-162.224 0-296.08-122.144-315.656-280H120a40 40 0 0 1 0-80h192.208zM632 752c132.552 0 240-107.448 240-240 0-132.552-107.448-240-240-240-132.552 0-240 107.448-240 240 0 132.552 107.448 240 240 240z m-40-280v-80a40 40 0 0 1 80 0v80h80a40 40 0 0 1 0 80h-80v80a40 40 0 0 1-80 0v-80h-80a40 40 0 0 1 0-80h80z"  ></path></symbol><symbol id="icon-tongjijiedian-" viewBox="0 0 1024 1024"><path d="M803.84 131.626667H410.24A59.733333 59.733333 0 0 0 350.506667 192v45.226667H199.68a51.626667 51.626667 0 0 0-51.626667 51.626666v465.92a51.626667 51.626667 0 0 0 51.626667 51.626667h187.52v-55.466667h-162.133333a21.333333 21.333333 0 0 1-21.333334-21.333333V313.386667a21.333333 21.333333 0 0 1 21.333334-21.333334h125.653333v64a59.733333 59.733333 0 0 0 59.733333 59.733334h393.386667a59.733333 59.733333 0 0 0 59.733333-59.733334V192a59.733333 59.733333 0 0 0-59.733333-60.373333z m4.266667 224.64a4.266667 4.266667 0 0 1-4.266667 4.266666H410.24a4.266667 4.266667 0 0 1-4.266667-4.266666V192a4.266667 4.266667 0 0 1 4.266667-4.266667h393.6a4.266667 4.266667 0 0 1 4.266667 4.266667zM716.16 749.44h-81.28v-81.493333a27.733333 27.733333 0 0 0-55.466667 0v81.28h-81.493333a27.733333 27.733333 0 1 0 0 55.466666h81.28v81.28a27.733333 27.733333 0 1 0 55.466667 0v-81.066666h81.28a27.733333 27.733333 0 0 0 0-55.466667z"  ></path></symbol><symbol id="icon-close" viewBox="0 0 1024 1024"><path d="M557.312 513.248l265.28-263.904c12.544-12.48 12.608-32.704 0.128-45.248-12.512-12.576-32.704-12.608-45.248-0.128L512.128 467.904l-263.04-263.84c-12.448-12.48-32.704-12.544-45.248-0.064-12.512 12.48-12.544 32.736-0.064 45.28l262.976 263.776L201.6 776.8c-12.544 12.48-12.608 32.704-0.128 45.248a31.937 31.937 0 0 0 22.688 9.44c8.16 0 16.32-3.104 22.56-9.312l265.216-263.808 265.44 266.24c6.24 6.272 14.432 9.408 22.656 9.408a31.94 31.94 0 0 0 22.592-9.344c12.512-12.48 12.544-32.704 0.064-45.248L557.312 513.248z" fill="" ></path></symbol><symbol id="icon-menu" viewBox="0 0 1024 1024"><path d="M109.714 292.571h804.572c21.943 0 36.571-21.942 36.571-43.885 0-14.629-14.628-29.257-36.571-29.257H109.714c-21.943 0-36.571 14.628-36.571 36.571 0 14.629 14.628 36.571 36.571 36.571zM914.286 512H109.714c-21.943 0-36.571 14.629-36.571 36.571 0 14.629 14.628 36.572 36.571 36.572h804.572c21.943 0 36.571-21.943 36.571-43.886 0-14.628-14.628-29.257-36.571-29.257z m0 292.571H109.714c-21.943 0-36.571 14.629-36.571 36.572s14.628 36.571 36.571 36.571h804.572c21.943 0 36.571-21.943 36.571-36.571 0-21.943-14.628-36.572-36.571-36.572z"  ></path></symbol><symbol id="icon-right" viewBox="0 0 1024 1024"><path d="M385 560.69999999L385 738.9c0 36.90000001 26.4 68.5 61.3 68.5l150.2 0c1.5 0 3-0.1 4.5-0.3 10.2 38.7 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-42 0-77.3 28.6-87.5 67.39999999-1.4-0.3-2.9-0.4-4.5-0.39999999L446.3 760.4c-6.8 0-14.3-8.9-14.3-21.49999999l0-427.00000001c0-12.7 7.40000001-21.5 14.30000001-21.5l150.19999999 0c1.5 0 3-0.2 4.5-0.4 10.2 38.8 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.4 0-49.9-40.5-90.6-90.5-90.59999999-42 0-77.3 28.6-87.5 67.39999999-1.4-0.2-2.9-0.4-4.49999999-0.4L446.3 243.3c-34.80000001 0-61.3 31.6-61.3 68.50000001L385 513.7l-79.1 0c-10.4-38.5-45.49999999-67-87.4-67-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c41.79999999 0 77.00000001-28.4 87.4-67L385 560.69999999z" fill="" ></path></symbol><symbol id="icon-left" viewBox="0 0 1024 1024"><path d="M639 463.30000001L639 285.1c0-36.90000001-26.4-68.5-61.3-68.5l-150.2 0c-1.5 0-3 0.1-4.5 0.3-10.2-38.7-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c42 0 77.3-28.6 87.5-67.39999999 1.4 0.3 2.9 0.4 4.5 0.39999999L577.7 263.6c6.8 0 14.3 8.9 14.3 21.49999999l0 427.00000001c0 12.7-7.40000001 21.5-14.30000001 21.5l-150.19999999 0c-1.5 0-3 0.2-4.5 0.4-10.2-38.8-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.4 0 49.9 40.5 90.6 90.5 90.59999999 42 0 77.3-28.6 87.5-67.39999999 1.4 0.2 2.9 0.4 4.49999999 0.4L577.7 780.7c34.80000001 0 61.3-31.6 61.3-68.50000001L639 510.3l79.1 0c10.4 38.5 45.49999999 67 87.4 67 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-41.79999999 0-77.00000001 28.4-87.4 67L639 463.30000001z" fill="" ></path></symbol><symbol id="icon-side" viewBox="0 0 1024 1024"><path d="M851.91168 328.45312c-59.97056 0-108.6208 48.47104-108.91264 108.36992l-137.92768 38.4a109.14304 109.14304 0 0 0-63.46752-46.58688l1.39264-137.11872c47.29344-11.86816 82.31936-54.66624 82.31936-105.64096 0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.76288-108.91776 108.91776c0 49.18784 32.60928 90.75712 77.38368 104.27392l-1.41312 138.87488a109.19936 109.19936 0 0 0-63.50336 48.55808l-138.93632-39.48544 0.01024-0.72704c0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.75776-108.91776 108.91776c0 60.15488 48.76288 108.91264 108.91776 108.91264 39.3984 0 73.91232-20.92032 93.03552-52.2496l139.19232 39.552-0.00512 0.2304c0 25.8304 9.00096 49.5616 24.02816 68.23424l-90.14272 132.63872a108.7488 108.7488 0 0 0-34.2528-5.504c-60.15488 0-108.91776 48.768-108.91776 108.91776 0 60.16 48.76288 108.91776 108.91776 108.91776 60.16 0 108.92288-48.75776 108.92288-108.91776 0-27.14624-9.9328-51.968-26.36288-71.04l89.04704-131.03104a108.544 108.544 0 0 0 37.6832 6.70208 108.672 108.672 0 0 0 36.48512-6.272l93.13792 132.57216a108.48256 108.48256 0 0 0-24.69888 69.0688c0 60.16 48.768 108.92288 108.91776 108.92288 60.16 0 108.91776-48.76288 108.91776-108.92288 0-60.14976-48.75776-108.91776-108.91776-108.91776a108.80512 108.80512 0 0 0-36.69504 6.3488l-93.07136-132.48a108.48768 108.48768 0 0 0 24.79616-72.22784l136.09984-37.888c18.99008 31.93856 53.84192 53.3504 93.69088 53.3504 60.16 0 108.92288-48.75776 108.92288-108.91264-0.00512-60.15488-48.77312-108.92288-108.92288-108.92288z"  ></path></symbol><symbol id="icon-B" viewBox="0 0 1024 1024"><path d="M98.067692 65.457231H481.28c75.854769 0 132.411077 3.150769 169.668923 9.452307 37.336615 6.301538 70.656 19.534769 100.036923 39.620924 29.459692 20.007385 53.956923 46.710154 73.570462 80.029538 19.692308 33.398154 29.459692 70.734769 29.459692 112.167385 0 44.898462-12.130462 86.094769-36.233846 123.588923a224.886154 224.886154 0 0 1-98.461539 84.283077c58.368 17.092923 103.266462 46.08 134.695385 87.04 31.350154 40.96 47.025231 89.088 47.025231 144.462769 0 43.638154-10.082462 86.016-30.404923 127.212308-20.243692 41.196308-47.891692 74.043077-83.02277 98.697846-35.052308 24.654769-78.296615 39.778462-129.732923 45.449846-32.295385 3.465846-110.119385 5.671385-233.472 6.537846H98.067692V65.457231z m193.536 159.507692V446.621538h126.818462c75.460923 0 122.328615-1.024 140.603077-3.229538 33.083077-3.938462 59.155692-15.36 78.139077-34.343385 18.904615-18.904615 28.435692-43.874462 28.435692-74.830769 0-29.696-8.192-53.720615-24.497231-72.310154-16.384-18.510769-40.644923-29.696-72.940307-33.634461-19.140923-2.205538-74.279385-3.308308-165.415385-3.308308h-111.064615z m0 381.243077v256.315077h179.2c69.710769 0 113.979077-1.969231 132.726154-5.907692 28.750769-5.198769 52.145231-17.959385 70.262154-38.281847 18.116923-20.243692 27.096615-47.340308 27.096615-81.368615 0-28.750769-6.931692-53.169231-20.873846-73.255385a118.232615 118.232615 0 0 0-60.494769-43.795692c-26.387692-9.137231-83.574154-13.705846-171.638154-13.705846H291.603692z"  ></path></symbol><symbol id="icon-a" viewBox="0 0 1024 1024"><path d="M757.76 665.6q0 20.48 1.536 34.304t7.68 22.016 18.944 12.288 34.304 4.096q-3.072 25.6-15.36 44.032-11.264 16.384-33.28 29.696t-62.976 13.312q-11.264 0-20.48-0.512t-17.408-2.56l-6.144-2.048-1.024 0q-4.096-1.024-10.24-4.096-2.048-2.048-4.096-2.048-1.024-1.024-2.048-1.024-14.336-8.192-23.552-17.408t-14.336-17.408q-6.144-10.24-9.216-20.48-63.488 75.776-178.176 75.776-48.128 0-88.064-15.36t-69.12-44.032-45.056-68.096-15.872-88.576 16.896-89.088 47.616-67.584 74.24-42.496 96.768-14.848q48.128 0 88.576 17.408t66.048 49.152q0-8.192 0.512-16.384t0.512-15.36q0-71.68-39.936-104.448t-128-32.768q-43.008 0-84.992 6.656t-84.992 17.92q14.336-28.672 25.088-47.616t24.064-29.184q30.72-24.576 158.72-24.576 79.872 0 135.168 13.824t90.624 43.52 51.2 75.264 15.872 108.032l0 200.704zM487.424 743.424q50.176 0 79.872-33.28t29.696-95.744q0-61.44-28.672-93.696t-76.8-32.256q-52.224 0-82.944 33.28t-30.72 94.72q0 58.368 31.744 92.672t77.824 34.304z"  ></path></symbol><symbol id="icon-full" viewBox="0 0 1024 1024"><path d="M639.328 416c8.032 0 16.096-3.008 22.304-9.056l202.624-197.184-0.8 143.808c-0.096 17.696 14.144 32.096 31.808 32.192 0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808l1.248-222.208c0-0.672-0.352-1.248-0.384-1.92 0.032-0.512 0.288-0.896 0.288-1.408 0.032-17.664-14.272-32-31.968-32.032L671.552 96l-0.032 0c-17.664 0-31.968 14.304-32 31.968C639.488 145.632 653.824 160 671.488 160l151.872 0.224-206.368 200.8c-12.672 12.32-12.928 32.608-0.64 45.248C622.656 412.736 630.976 416 639.328 416z"  ></path><path d="M896.032 639.552 896.032 639.552c-17.696 0-32 14.304-32.032 31.968l-0.224 151.872-200.832-206.4c-12.32-12.64-32.576-12.96-45.248-0.64-12.672 12.352-12.928 32.608-0.64 45.248l197.184 202.624-143.808-0.8c-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808-0.096 17.696 14.144 32.096 31.808 32.192l222.24 1.248c0.064 0 0.128 0 0.192 0 0.64 0 1.12-0.32 1.76-0.352 0.512 0.032 0.896 0.288 1.408 0.288l0.032 0c17.664 0 31.968-14.304 32-31.968L928 671.584C928.032 653.952 913.728 639.584 896.032 639.552z"  ></path><path d="M209.76 159.744l143.808 0.8c0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808 0.096-17.696-14.144-32.096-31.808-32.192L131.68 95.328c-0.064 0-0.128 0-0.192 0-0.672 0-1.248 0.352-1.888 0.384-0.448 0-0.8-0.256-1.248-0.256 0 0-0.032 0-0.032 0-17.664 0-31.968 14.304-32 31.968L96 352.448c-0.032 17.664 14.272 32 31.968 32.032 0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968l0.224-151.936 200.832 206.4c6.272 6.464 14.624 9.696 22.944 9.696 8.032 0 16.096-3.008 22.304-9.056 12.672-12.32 12.96-32.608 0.64-45.248L209.76 159.744z"  ></path><path d="M362.368 617.056l-202.624 197.184 0.8-143.808c0.096-17.696-14.144-32.096-31.808-32.192-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808l-1.248 222.24c0 0.704 0.352 1.312 0.384 2.016 0 0.448-0.256 0.832-0.256 1.312-0.032 17.664 14.272 32 31.968 32.032L352.448 928c0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968s-14.272-32-31.968-32.032l-151.936-0.224 206.4-200.832c12.672-12.352 12.96-32.608 0.64-45.248S375.008 604.704 362.368 617.056z"  ></path></symbol><symbol id="icon-add" viewBox="0 0 1024 1024"><path d="M863.328 482.56l-317.344-1.12L545.984 162.816c0-17.664-14.336-32-32-32s-32 14.336-32 32l0 318.4L159.616 480.064c-0.032 0-0.064 0-0.096 0-17.632 0-31.936 14.24-32 31.904C127.424 529.632 141.728 544 159.392 544.064l322.592 1.152 0 319.168c0 17.696 14.336 32 32 32s32-14.304 32-32l0-318.944 317.088 1.12c0.064 0 0.096 0 0.128 0 17.632 0 31.936-14.24 32-31.904C895.264 496.992 880.96 482.624 863.328 482.56z"  ></path></symbol><symbol id="icon-move" viewBox="0 0 1024 1024"><path d="M863.744 544 163.424 544c-17.664 0-32-14.336-32-32s14.336-32 32-32l700.32 0c17.696 0 32 14.336 32 32S881.44 544 863.744 544z"  ></path></symbol><symbol id="icon-living" viewBox="0 0 1024 1024"><path d="M514.133333 488.533333m-106.666666 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z" fill="" ></path><path d="M512 64C264.533333 64 64 264.533333 64 512c0 236.8 183.466667 428.8 416 445.866667v-134.4c-53.333333-59.733333-200.533333-230.4-200.533333-334.933334 0-130.133333 104.533333-234.666667 234.666666-234.666666s234.666667 104.533333 234.666667 234.666666c0 61.866667-49.066667 153.6-145.066667 270.933334l-59.733333 68.266666V960C776.533333 942.933333 960 748.8 960 512c0-247.466667-200.533333-448-448-448z" fill="" ></path></symbol></svg>',c=(c=document.getElementsByTagName("script"))[c.length-1].getAttribute("data-injectcss");if(c&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(m){console&&console.log(m)}}function p(){l||(l=!0,o())}t=function(){var m,y,h,_;(_=document.createElement("div")).innerHTML=s,s=null,(h=_.getElementsByTagName("svg")[0])&&(h.setAttribute("aria-hidden","true"),h.style.position="absolute",h.style.width=0,h.style.height=0,h.style.overflow="hidden",m=h,(y=document.body).firstChild?(_=m,(h=y.firstChild).parentNode.insertBefore(_,h)):y.appendChild(m))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(o=t,i=e.document,l=!1,(a=function(){try{i.documentElement.doScroll("left")}catch{return void setTimeout(a,50)}p()})(),i.onreadystatechange=function(){i.readyState=="complete"&&(i.onreadystatechange=null,p())})})(window);const we=0,He=1,$t=2,Se=30,Wn={name:"Latte",palette:["#dd7878","#ea76cb","#8839ef","#e64553","#fe640b","#df8e1d","#40a02b","#209fb5","#1e66f5","#7287fd"],cssVar:{"--main-color":"#444446","--main-bgcolor":"#ffffff","--color":"#777777","--bgcolor":"#f6f6f6","--panel-color":"#444446","--panel-bgcolor":"#ffffff","--panel-border-color":"#eaeaea"}},Un={name:"Dark",palette:["#848FA0","#748BE9","#D2F9FE","#4145A5","#789AFA","#706CF4","#EF987F","#775DD5","#FCEECF","#DA7FBC"],cssVar:{"--main-color":"#ffffff","--main-bgcolor":"#4c4f69","--color":"#cccccc","--bgcolor":"#252526","--panel-color":"#ffffff","--panel-bgcolor":"#2d3748","--panel-border-color":"#696969"}};function Lt(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}const Ii=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Tt=function(e,t){if(t.id===e)return t;if(t.children&&t.children.length){for(let n=0;n<t.children.length;n++){const o=Tt(e,t.children[n]);if(o)return o}return null}else return null},ze=(e,t)=>{if(e.parent=t,e.children)for(let n=0;n<e.children.length;n++)ze(e.children[n],e)};function en(e){if(e.id=ht(),e.children)for(let t=0;t<e.children.length;t++)en(e.children[t])}const $i=(e,t)=>{let n=Date.now();return function(...o){Date.now()-n<t||(e(...o),n=Date.now())}};function Kn(e,t,n,o){const i=o-t,l=e-n;let a=Math.atan(Math.abs(i)/Math.abs(l))/3.14*180;l<0&&i>0&&(a=180-a),l<0&&i<0&&(a=180+a),l>0&&i<0&&(a=360-a);const s=15,c=30,p=a+c,m=a-c;return{x1:n+Math.cos(Math.PI*p/180)*s,y1:o-Math.sin(Math.PI*p/180)*s,x2:n+Math.cos(Math.PI*m/180)*s,y2:o-Math.sin(Math.PI*m/180)*s}}function ht(){return(new Date().getTime().toString(16)+Math.random().toString(16).substr(2)).substr(2,16)}const Oi=function(){const e=ht();return{topic:this.newTopicName,id:e}};function tn(e){return JSON.parse(JSON.stringify(e,(t,n)=>{if(t!=="parent")return n}))}const je=(e,t)=>{let n=0,o=0;for(;t&&t!==e;)n+=t.offsetLeft,o+=t.offsetTop,t=t.offsetParent;return{offsetLeft:n,offsetTop:o}},K=(e,t)=>{for(const n in t)e.setAttribute(n,t[n])},Qt=e=>e?e.tagName==="ME-TPC":!1,Ot=e=>e.filter(t=>{for(let n=0;n<e.length;n++)if(t!==e[n]&&e[n].parentElement.parentElement.contains(t))return!1;return!0}),ge={moved:!1,mousedown:!1,onMove(e,t){if(this.mousedown){this.moved=!0;const n=e.movementX,o=e.movementY;t.scrollTo(t.scrollLeft-n,t.scrollTop-o)}},clear(){this.moved=!1,this.mousedown=!1}};function Pi(e){e.map.addEventListener("click",t=>{var n,o;if(t.button!==0)return;if((n=e.helper1)!=null&&n.moved){e.helper1.clear();return}if((o=e.helper2)!=null&&o.moved){e.helper2.clear();return}if(ge.moved){ge.clear();return}e.clearSelection();const i=t.target;if(i.tagName==="ME-EPD")e.expandNode(i.previousSibling);else if(e.editable)Qt(i)?e.selectNode(i,!1,t):i.tagName==="text"?i.dataset.type==="custom-link"?e.selectArrow(i.parentElement):e.selectSummary(i.parentElement):i.className;else return}),e.map.addEventListener("dblclick",t=>{if(t.preventDefault(),!e.editable)return;const n=t.target;Qt(n)?e.beginEdit(n):n.tagName==="text"&&(n.dataset.type==="custom-link"?e.editArrowLabel(n.parentElement):e.editSummary(n.parentElement))}),e.map.addEventListener("mousemove",t=>{t.target.contentEditable!=="true"&&ge.onMove(t,e.container)}),e.map.addEventListener("mousedown",t=>{const n=e.mouseSelectionButton===0?2:0;t.button===n&&t.target.contentEditable!=="true"&&(ge.moved=!1,ge.mousedown=!0)}),e.map.addEventListener("mouseleave",t=>{const n=e.mouseSelectionButton===0?2:0;t.button===n&&ge.clear()}),e.map.addEventListener("mouseup",t=>{const n=e.mouseSelectionButton===0?2:0;t.button===n&&ge.clear()}),e.map.addEventListener("contextmenu",t=>{t.preventDefault()})}const Vi={create(){return{handlers:{},showHandler:function(){console.log(this.handlers)},addListener:function(e,t){this.handlers[e]===void 0&&(this.handlers[e]=[]),this.handlers[e].push(t)},fire:function(e,...t){if(this.handlers[e]instanceof Array){const n=this.handlers[e];for(let o=0;o<n.length;o++)n[o](...t)}},removeListener:function(e,t){if(!this.handlers[e])return;const n=this.handlers[e];if(!t)n.length=0;else if(n.length)for(let o=0;o<n.length;o++)n[o]===t&&this.handlers[e].splice(o,1)}}}},zt=document,Hi=function(){console.time("layout"),this.nodes.innerHTML="";const e=this.createTopic(this.nodeData);nn(e,this.nodeData),e.draggable=!1;const t=zt.createElement("me-root");t.appendChild(e);const n=this.nodeData.children||[];if(this.direction===$t){let o=0,i=0;n.map(l=>{l.direction===we?o+=1:l.direction===He?i+=1:o<=i?(l.direction=we,o+=1):(l.direction=He,i+=1)})}Bi(this,n,t),console.timeEnd("layout")},Bi=function(e,t,n){const o=zt.createElement("me-main");o.className="lhs";const i=zt.createElement("me-main");i.className="rhs";for(let l=0;l<t.length;l++){const a=t[l],{grp:s}=e.createWrapper(a);e.direction===$t?a.direction===we?o.appendChild(s):i.appendChild(s):e.direction===we?o.appendChild(s):i.appendChild(s)}e.nodes.appendChild(o),e.nodes.appendChild(n),e.nodes.appendChild(i),e.nodes.appendChild(e.lines)},Ri=function(e,t){const n=zt.createElement("me-children");for(let o=0;o<t.length;o++){const i=t[o],{grp:l}=e.createWrapper(i);n.appendChild(l)}return n},de=document,Z=(e,t)=>{const n=(t?t.mindElixirBox:de).querySelector(`[data-nodeid=me${e}]`);if(!n)throw new Error(`FindEle: Node ${e} not found, maybe it's collapsed.`);return n},nn=function(e,t){if(e.innerHTML="",t.style&&(e.style.color=t.style.color||"",e.style.background=t.style.background||"",e.style.fontSize=t.style.fontSize+"px",e.style.fontWeight=t.style.fontWeight||"normal"),t.dangerouslySetInnerHTML){e.innerHTML=t.dangerouslySetInnerHTML;return}if(t.image){const n=t.image;if(n.url&&n.width&&n.height){const o=de.createElement("img");o.src=n.url,o.style.width=n.width+"px",o.style.height=n.height+"px",e.appendChild(o),e.image=o}else console.warn("image url/width/height are required")}else e.image&&(e.image=void 0);{const n=de.createElement("span");n.className="text",n.textContent=t.topic,e.appendChild(n),e.text=n}if(t.hyperLink){const n=de.createElement("a");n.className="hyper-link",n.target="_blank",n.innerText="ðŸ”—",n.href=t.hyperLink,e.appendChild(n),e.linkContainer=n}else e.linkContainer&&(e.linkContainer=void 0);if(t.icons&&t.icons.length){const n=de.createElement("span");n.className="icons",n.innerHTML=t.icons.map(o=>`<span>${Lt(o)}</span>`).join(""),e.appendChild(n),e.icons=n}else e.icons&&(e.icons=void 0);if(t.tags&&t.tags.length){const n=de.createElement("div");n.className="tags",n.innerHTML=t.tags.map(o=>`<span>${Lt(o)}</span>`).join(""),e.appendChild(n),e.tags=n}else e.tags&&(e.tags=void 0)},Fi=function(e,t){const n=de.createElement("me-wrapper"),{p:o,tpc:i}=this.createParent(e);if(n.appendChild(o),!t&&e.children&&e.children.length>0){const l=on(e.expanded);if(o.appendChild(l),e.expanded!==!1){const a=Ri(this,e.children);n.appendChild(a)}}return{grp:n,top:o,tpc:i}},Yi=function(e){const t=de.createElement("me-parent"),n=this.createTopic(e);return nn(n,e),t.appendChild(n),{p:t,tpc:n}},qi=function(e){const t=de.createElement("me-children");return t.append(...e),t},Wi=function(e){const t=de.createElement("me-tpc");return t.nodeObj=e,t.dataset.nodeid="me"+e.id,t.draggable=this.draggable,t};function Xn(e){const t=de.createRange();t.selectNodeContents(e);const n=window.getSelection();n&&(n.removeAllRanges(),n.addRange(t))}const Ui=function(e){if(console.time("editTopic"),!e)return;const t=de.createElement("div"),n=e.text.textContent;e.appendChild(t),t.id="input-box",t.textContent=n,t.contentEditable="true",t.spellcheck=!1,t.style.cssText=`min-width:${e.offsetWidth-8}px;`,this.direction===we&&(t.style.right="0"),t.focus(),Xn(t),this.bus.fire("operation",{name:"beginEdit",obj:e.nodeObj}),t.addEventListener("keydown",o=>{o.stopPropagation();const i=o.key;if(i==="Enter"||i==="Tab"){if(o.shiftKey)return;o.preventDefault(),t==null||t.blur(),this.map.focus()}}),t.addEventListener("blur",()=>{var o;if(!t)return;const i=e.nodeObj,l=((o=t.textContent)==null?void 0:o.trim())||"";console.log(l),l===""?i.topic=n:i.topic=l,t.remove(),l!==n&&(e.text.textContent=i.topic,this.linkDiv(),this.bus.fire("operation",{name:"finishEdit",obj:i,origin:n}))}),console.timeEnd("editTopic")},on=function(e){const t=de.createElement("me-epd");return t.expanded=e!==!1,t.className=e!==!1?"minus":"",t},tt=document,nt="http://www.w3.org/2000/svg",Zn=function(e,t,n){const o=tt.createElementNS(nt,"path");return K(o,{d:e,stroke:t||"#666",fill:"none","stroke-width":n}),o},mt=function(e){const t=tt.createElementNS(nt,"svg");return t.setAttribute("class",e),t.setAttribute("overflow","visible"),t},Nn=function(){const e=tt.createElementNS(nt,"line");return e.setAttribute("stroke","#bbb"),e.setAttribute("fill","none"),e.setAttribute("stroke-width","2"),e},Ki=function(e,t){const n={stroke:"rgb(235, 95, 82)",fill:"none","stroke-linecap":"cap","stroke-width":"2"},o=tt.createElementNS(nt,"g"),i=tt.createElementNS(nt,"path"),l=tt.createElementNS(nt,"path");return K(l,{d:t,...n}),K(i,{d:e,...n,"stroke-dasharray":"8,2"}),o.appendChild(i),o.appendChild(l),o},Qn=function(e,t,n){if(console.time("editSummary"),!t)return;const o=document.createElement("div");e.nodes.appendChild(o);const i=t.innerHTML;o.id="input-box",o.textContent=i,o.contentEditable="true",o.spellcheck=!1;const l=t.getAttribute("x"),a=t.getAttribute("y");o.style.cssText=`min-width:88px;position:absolute;left:${l}px;top:${a}px;`;const s=t.getAttribute("text-anchor");s==="end"?o.style.cssText+="transform: translate(-100%, -100%);":s==="middle"?o.style.cssText+="transform: translate(-50%, -100%);":o.style.cssText+="transform: translate(0, -100%);",o.focus(),Xn(o),o.addEventListener("keydown",c=>{c.stopPropagation();const p=c.key;if(p==="Enter"||p==="Tab"){if(c.shiftKey)return;c.preventDefault(),o.blur(),e.map.focus()}}),o.addEventListener("blur",()=>{o&&n(o)}),console.timeEnd("editSummary")},Xi=function(e){console.time("linkDiv"),this.nodes.style.top=`${1e4-this.nodes.offsetHeight/2}px`,this.nodes.style.left=`${1e4-this.nodes.offsetWidth/2}px`;const t=this.map.querySelectorAll("me-main > me-wrapper");this.lines.innerHTML="";const n=this.map.querySelector("me-root"),o=n.offsetTop,i=n.offsetLeft,l=n.offsetWidth,a=n.offsetHeight;for(let s=0;s<t.length;s++){const c=t[s],p=c.querySelector("me-tpc"),{offsetLeft:m,offsetTop:y}=je(this.nodes,p),h=p.offsetWidth,_=p.offsetHeight,N=c.parentNode.className,C=this.generateMainBranch({pT:o,pL:i,pW:l,pH:a,cT:y,cL:m,cW:h,cH:_,direction:N,containerHeight:this.nodes.offsetHeight}),f=this.theme.palette,M=p.nodeObj.branchColor||f[s%f.length];p.style.borderColor=M,this.lines.appendChild(Zn(C,M,"3"));const z=c.children[0].children[1];if(z&&(z.style.top=(z.parentNode.offsetHeight-z.offsetHeight)/2+"px",N==="lhs"?z.style.left="-10px":z.style.right="-10px"),!(e&&e!==c)&&c.childElementCount){const L=mt("subLines"),A=c.lastChild;A.tagName==="svg"&&A.remove(),c.appendChild(L),Gn(this,L,M,c,N,!0)}}this.renderArrow(),this.renderSummary(),console.timeEnd("linkDiv")},Gn=function(e,t,n,o,i,l){const a=o.firstChild,s=o.children[1].children,c=a.offsetTop,p=a.offsetLeft,m=a.offsetWidth,y=a.offsetHeight;for(let h=0;h<s.length;h++){const _=s[h],N=_.firstChild,C=N.offsetTop,f=N.offsetLeft,M=N.offsetWidth,z=N.offsetHeight,L=N.firstChild.nodeObj.branchColor||n,A=e.generateSubBranch({pT:c,pL:p,pW:m,pH:y,cT:C,cL:f,cW:M,cH:z,direction:i,isFirst:l});t.appendChild(Zn(A,L,"2"));const P=N.children[1];if(P){if(P.style.bottom=-(P.offsetHeight/2)+"px",i==="lhs"?P.style.left="10px":i==="rhs"&&(P.style.right="10px"),!P.expanded)continue}else continue;_.children[1].children.length>0&&Gn(e,t,L,_,i)}},Mn={addChild:"æ’å…¥å­èŠ‚ç‚¹",addParent:"æ’å…¥çˆ¶èŠ‚ç‚¹",addSibling:"æ’å…¥åŒçº§èŠ‚ç‚¹",removeNode:"åˆ é™¤èŠ‚ç‚¹",focus:"ä¸“æ³¨",cancelFocus:"å–æ¶ˆä¸“æ³¨",moveUp:"ä¸Šç§»",moveDown:"ä¸‹ç§»",link:"è¿žæŽ¥",clickTips:"è¯·ç‚¹å‡»ç›®æ ‡èŠ‚ç‚¹",summary:"æ‘˜è¦"},En={cn:Mn,zh_CN:Mn,zh_TW:{addChild:"æ’å…¥å­ç¯€é»ž",addParent:"æ’å…¥çˆ¶ç¯€é»ž",addSibling:"æ’å…¥åŒç´šç¯€é»ž",removeNode:"åˆªé™¤ç¯€é»ž",focus:"å°ˆæ³¨",cancelFocus:"å–æ¶ˆå°ˆæ³¨",moveUp:"ä¸Šç§»",moveDown:"ä¸‹ç§»",link:"é€£æŽ¥",clickTips:"è«‹é»žæ“Šç›®æ¨™ç¯€é»ž",summary:"æ‘˜è¦"},en:{addChild:"Add child",addParent:"Add parent",addSibling:"Add sibling",removeNode:"Remove node",focus:"Focus Mode",cancelFocus:"Cancel Focus Mode",moveUp:"Move up",moveDown:"Move down",link:"Link",clickTips:"Please click the target node",summary:"Summary"},ru:{addChild:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð´Ð¾Ñ‡ÐµÑ€Ð½Ð¸Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",addParent:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",addSibling:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð° ÑÑ‚Ð¾Ð¼ ÑƒÑ€Ð¾Ð²Ð½Ðµ",removeNode:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÑƒÐ·ÐµÐ»",focus:"Ð ÐµÐ¶Ð¸Ð¼ Ñ„Ð¾ÐºÑƒÑÐ¸Ñ€Ð¾Ð²ÐºÐ¸",cancelFocus:"ÐžÑ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ€ÐµÐ¶Ð¸Ð¼ Ñ„Ð¾ÐºÑƒÑÐ¸Ñ€Ð¾Ð²ÐºÐ¸",moveUp:"ÐŸÐ¾Ð´Ð½ÑÑ‚ÑŒ Ð²Ñ‹ÑˆÐµ",moveDown:"ÐžÐ¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð½Ð¸Ð¶Ðµ",link:"Ð¡ÑÑ‹Ð»ÐºÐ°",clickTips:"ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð½Ð° Ñ†ÐµÐ»ÐµÐ²Ð¾Ð¹ ÑƒÐ·ÐµÐ»",summary:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ"},ja:{addChild:"å­ãƒŽãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹",addParent:"è¦ªãƒŽãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™",addSibling:"å…„å¼ŸãƒŽãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹",removeNode:"ãƒŽãƒ¼ãƒ‰ã‚’å‰Šé™¤",focus:"é›†ä¸­",cancelFocus:"é›†ä¸­è§£é™¤",moveUp:"ä¸Šã¸ç§»å‹•",moveDown:"ä¸‹ã¸ç§»å‹•",link:"ã‚³ãƒã‚¯ãƒˆ",clickTips:"ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒŽãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„",summary:"æ¦‚è¦"},pt:{addChild:"Adicionar item filho",addParent:"Adicionar item pai",addSibling:"Adicionar item irmao",removeNode:"Remover item",focus:"Modo Foco",cancelFocus:"Cancelar Modo Foco",moveUp:"Mover para cima",moveDown:"Mover para baixo",link:"Link",clickTips:"Favor clicar no item alvo",summary:"Resumo"}};function Zi(e,t){const n=L=>{const A=document.createElement("div");return A.innerText=L,A.className="tips",A},o=(L,A,P)=>{const H=document.createElement("li");return H.id=L,H.innerHTML=`<span>${Lt(A)}</span><span>${Lt(P)}</span>`,H},i=En[e.locale]?e.locale:"en",l=En[i],a=o("cm-add_child",l.addChild,"tab"),s=o("cm-add_parent",l.addParent,""),c=o("cm-add_sibling",l.addSibling,"enter"),p=o("cm-remove_child",l.removeNode,"delete"),m=o("cm-fucus",l.focus,""),y=o("cm-unfucus",l.cancelFocus,""),h=o("cm-up",l.moveUp,"PgUp"),_=o("cm-down",l.moveDown,"Pgdn"),N=o("cm-down",l.link,""),C=o("cm-down",l.summary,""),f=document.createElement("ul");if(f.className="menu-list",f.appendChild(a),f.appendChild(s),f.appendChild(c),f.appendChild(p),(!t||t.focus)&&(f.appendChild(m),f.appendChild(y)),f.appendChild(h),f.appendChild(_),f.appendChild(C),(!t||t.link)&&f.appendChild(N),t&&t.extend)for(let L=0;L<t.extend.length;L++){const A=t.extend[L],P=o(A.name,A.name,A.key||"");f.appendChild(P),P.onclick=H=>{A.onclick(H)}}const M=document.createElement("div");M.className="context-menu",M.appendChild(f),M.hidden=!0,e.container.append(M);let z=!0;e.container.oncontextmenu=function(L){if(L.preventDefault(),!e.editable)return;const A=L.target;if(Qt(A)){A.parentElement.tagName==="ME-ROOT"?z=!0:z=!1,z?(m.className="disabled",h.className="disabled",_.className="disabled",s.className="disabled",c.className="disabled",p.className="disabled"):(m.className="",h.className="",_.className="",s.className="",c.className="",p.className=""),e.currentNodes||e.selectNode(A),M.hidden=!1,ge.mousedown&&(ge.mousedown=!1),f.style.top="",f.style.bottom="",f.style.left="",f.style.right="";const P=f.getBoundingClientRect(),H=f.offsetHeight,Y=f.offsetWidth,$=L.clientY-P.top,I=L.clientX-P.left;H+$>window.innerHeight?(f.style.top="",f.style.bottom="0px"):(f.style.bottom="",f.style.top=$+15+"px"),Y+I>window.innerWidth?(f.style.left="",f.style.right="0px"):(f.style.right="",f.style.left=I+10+"px")}},M.onclick=L=>{L.target===M&&(M.hidden=!0)},a.onclick=()=>{e.addChild(),M.hidden=!0},s.onclick=()=>{e.insertParent(),M.hidden=!0},c.onclick=()=>{z||(e.insertSibling("after"),M.hidden=!0)},p.onclick=()=>{z||(e.removeNode(),M.hidden=!0)},m.onclick=()=>{z||(e.focusNode(e.currentNode),M.hidden=!0)},y.onclick=()=>{e.cancelFocus(),M.hidden=!0},h.onclick=()=>{z||(e.moveUpNode(),M.hidden=!0)},_.onclick=()=>{z||(e.moveDownNode(),M.hidden=!0)},N.onclick=()=>{M.hidden=!0;const L=e.currentNode,A=n(l.clickTips);e.container.appendChild(A),e.map.addEventListener("click",P=>{P.preventDefault(),A.remove();const H=P.target;H.parentElement.tagName==="ME-PARENT"||H.parentElement.tagName==="ME-ROOT"?e.createArrow(L,H):console.log("link cancel")},{once:!0})},C.onclick=()=>{M.hidden=!0,e.createSummary(),e.unselectNodes()}}const Qi=e=>{const t=e.map.querySelectorAll(".lhs>me-wrapper>me-parent>me-tpc");e.selectNode(t[Math.ceil(t.length/2)-1])},Gi=e=>{const t=e.map.querySelectorAll(".rhs>me-wrapper>me-parent>me-tpc");e.selectNode(t[Math.ceil(t.length/2)-1])},Ji=e=>{e.selectNode(e.map.querySelector("me-root>me-tpc"))},er=function(e,t){const n=t.parentElement.parentElement.parentElement.previousSibling;if(n){const o=n.firstChild;e.selectNode(o)}},tr=function(e,t){const n=t.parentElement.nextSibling;if(n&&n.firstChild){const o=n.firstChild.firstChild.firstChild;e.selectNode(o)}},Sn=function(e,t){var n,o;const i=e.currentNode||((n=e.currentNodes)==null?void 0:n[0]);if(!i)return;const l=i.nodeObj,a=i.offsetParent.offsetParent.parentElement;l.root?t==="lhs"?Qi(e):Gi(e):a.className===t?tr(e,i):(o=l.parent)!=null&&o.root?Ji(e):er(e,i)},Ln=function(e,t){var n;const o=e.currentNode||((n=e.currentNodes)==null?void 0:n[0]);if(!o||o.nodeObj.root)return;const i=t+"Sibling",l=o.parentElement.parentElement[i];l&&e.selectNode(l.firstChild.firstChild)};function nr(e){const t=()=>{e.currentArrow?e.removeArrow():e.currentSummary?e.removeSummary(e.currentSummary.summaryObj.id):e.currentNode?e.removeNode():e.currentNodes&&e.removeNodes(e.currentNodes)},n={13:o=>{o.shiftKey?e.insertSibling("before"):o.ctrlKey?e.insertParent():e.insertSibling("after")},9:()=>{e.addChild()},112:()=>{e.toCenter()},113:()=>{e.beginEdit()},38:o=>{if(o.altKey)e.moveUpNode();else{if(o.metaKey||o.ctrlKey)return e.initSide();Ln(e,"previous")}},40:o=>{o.altKey?e.moveDownNode():Ln(e,"next")},37:o=>{if(o.metaKey||o.ctrlKey)return e.initLeft();Sn(e,"lhs")},39:o=>{if(o.metaKey||o.ctrlKey)return e.initRight();Sn(e,"rhs")},33(){e.moveUpNode()},34(){e.moveDownNode()},67:o=>{(o.metaKey||o.ctrlKey)&&(e.currentNode?e.waitCopy=[e.currentNode]:e.currentNodes&&(e.waitCopy=e.currentNodes))},86:o=>{!e.waitCopy||!e.currentNode||(o.metaKey||o.ctrlKey)&&(e.waitCopy.length===1?e.copyNode(e.waitCopy[0],e.currentNode):e.copyNodes(e.waitCopy,e.currentNode))},187:o=>{if(o.metaKey||o.ctrlKey){if(e.scaleVal>1.6)return;e.scale(e.scaleVal+=.2)}},189:o=>{if(o.metaKey||o.ctrlKey){if(e.scaleVal<.6)return;e.scale(e.scaleVal-=.2)}},48:o=>{(o.metaKey||o.ctrlKey)&&e.scale(1)},8:t,46:t};e.map.onkeydown=o=>{if(o.preventDefault(),!e.editable||o.target!==o.currentTarget)return;const i=n[o.keyCode];i&&i(o)}}function or(e,t){const n=(h,_)=>{const N=document.createElement("div");return N.id=h,N.innerHTML=`<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-${_}"></use>
  </svg>`,N},o=n("cm-add_child","zijiedian"),i=n("cm-add_sibling","tongjijiedian-"),l=n("cm-remove_child","shanchu2"),a=n("cm-up","rising"),s=n("cm-down","falling"),c=n("cm-edit","edit"),p=document.createElement("ul");p.className="menu-list";const m=document.createElement("mmenu");m.className="mobile-menu",m.appendChild(o),m.appendChild(i),m.appendChild(l),m.appendChild(a),m.appendChild(s),m.appendChild(c),m.hidden=!0,e.container.append(m);let y=!0;e.bus.addListener("unselectNode",function(){m.hidden=!0}),e.bus.addListener("selectNode",function(h){m.hidden=!1,h.root?y=!0:y=!1}),m.onclick=h=>{h.target===m&&(m.hidden=!0)},o.onclick=()=>{e.addChild()},i.onclick=()=>{y||e.insertSibling("after")},l.onclick=()=>{y||e.removeNode()},a.onclick=h=>{y||e.moveUpNode()},s.onclick=h=>{y||e.moveDownNode()},c.onclick=h=>{e.beginEdit()}}const Gt=document,ir=function(e,t){if(!t)return Jt(e),e;let n=e.querySelector(".insert-preview");const o=`insert-preview ${t} show`;return n||(n=Gt.createElement("div"),e.appendChild(n)),n.className=o,e},Jt=function(e){if(!e)return;const t=e.querySelectorAll(".insert-preview");for(const n of t||[])n.remove()},Tn=function(e,t){for(const n of t){const o=n.parentElement.parentElement.contains(e);if(!(e&&e.tagName==="ME-TPC"&&e!==n&&!o&&e.nodeObj.root!==!0))return!1}return!0},rr=function(e){const t=document.createElement("div");return t.className="mind-elixir-ghost",e.map.appendChild(t),t};function lr(e){let t=null,n=null,o=null;const i=rr(e),l=12;e.map.addEventListener("dragstart",a=>{var s,c;const p=a.target;if((p==null?void 0:p.tagName)!=="ME-TPC"){a.preventDefault();return}(s=e.currentNodes)!=null&&s.includes(p)||(e.unselectNodes(),e.selectNode(p)),e.currentNodes?(t=e.currentNodes,i.innerHTML=e.currentNodes.length+" nodes"):(t=[p],i.innerHTML=p.innerHTML);for(const m of t)m.parentElement.parentElement.style.opacity="0.5";(c=a.dataTransfer)==null||c.setDragImage(i,0,0),ge.clear()}),e.map.addEventListener("dragend",async a=>{if(!t)return;for(const c of t)c.parentElement.parentElement.style.opacity="1";const s=a.target;s.style.opacity="",o&&(Jt(o),n==="before"?e.moveNodeBefore(t,o):n==="after"?e.moveNodeAfter(t,o):n==="in"&&e.moveNodeIn(t,o),t=null)}),e.map.addEventListener("dragover",$i(function(a){if(!t)return;Jt(o);const s=Gt.elementFromPoint(a.clientX,a.clientY-l);if(Tn(s,t)){o=s;const c=s.getBoundingClientRect().y;a.clientY>c+s.clientHeight?n="after":n="in"}else{const c=Gt.elementFromPoint(a.clientX,a.clientY+l);if(Tn(c,t)){o=c;const p=c.getBoundingClientRect().y;a.clientY<p?n="before":n="in"}else n=o=null}o&&ir(o,n)},100))}const sr=function(e){return["createSummary","removeSummary","finishEditSummary"].includes(e.name)?{type:"summary",value:e.obj.id}:["createArrow","removeArrow","finishEditArrowLabel"].includes(e.name)?{type:"arrow",value:e.obj.id}:["removeNodes","copyNodes","moveNodeBefore","moveNodeAfter","moveNodeIn"].includes(e.name)?{type:"nodes",value:e.objs.map(t=>t.id)}:{type:"node",value:e.obj.id}};function ar(e){let t=[],n=-1,o=e.getData();e.bus.addListener("operation",i=>{if(i.name==="beginEdit")return;t=t.slice(0,n+1);const l=e.getData();t.push({prev:o,currentObject:sr(i),next:l}),o=l,n=t.length-1}),e.undo=function(){if(n>-1){const i=t[n];o=i.prev,e.refresh(i.prev),i.currentObject.type==="node"?e.selectNode(Z(i.currentObject.value)):i.currentObject.type==="nodes"&&e.selectNodes(i.currentObject.value.map(l=>Z(l))),n--,console.log("current",o)}},e.redo=function(){if(n<t.length-1){n++;const i=t[n];o=i.next,e.refresh(i.next),i.currentObject.type==="node"?e.selectNode(Z(i.currentObject.value)):i.currentObject.type==="nodes"&&e.selectNodes(i.currentObject.value.map(l=>Z(l)))}},e.map.addEventListener("keydown",i=>{(i.metaKey||i.ctrlKey)&&i.shiftKey&&i.key==="Z"?e.redo():(i.metaKey||i.ctrlKey)&&i.key==="z"&&e.undo()})}const Be=(e,t)=>{const n=document.createElement("span");return n.id=e,n.innerHTML=`<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-${t}"></use>
  </svg>`,n};function dr(e){const t=document.createElement("div"),n=Be("fullscreen","full"),o=Be("toCenter","living"),i=Be("zoomout","move"),l=Be("zoomin","add"),a=document.createElement("span");return a.innerText="100%",t.appendChild(n),t.appendChild(o),t.appendChild(i),t.appendChild(l),t.className="mind-elixir-toolbar rb",n.onclick=()=>{e.container.requestFullscreen()},o.onclick=()=>{e.toCenter()},i.onclick=()=>{e.scaleVal<.6||e.scale(e.scaleVal-=.2)},l.onclick=()=>{e.scaleVal>1.6||e.scale(e.scaleVal+=.2)},t}function cr(e){const t=document.createElement("div"),n=Be("tbltl","left"),o=Be("tbltr","right"),i=Be("tblts","side");return t.appendChild(n),t.appendChild(o),t.appendChild(i),t.className="mind-elixir-toolbar lt",n.onclick=()=>{e.initLeft()},o.onclick=()=>{e.initRight()},i.onclick=()=>{e.initSide()},t}function ur(e){e.container.append(dr(e)),e.container.append(cr(e))}/*! @viselect/vanilla v3.3.1 MIT | https://github.com/Simonwep/selection/tree/master/packages/vanilla */var pr=Object.defineProperty,mr=(e,t,n)=>t in e?pr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U=(e,t,n)=>(mr(e,typeof t!="symbol"?t+"":t,n),n);class hr{constructor(){U(this,"_listeners",new Map),U(this,"on",this.addEventListener),U(this,"off",this.removeEventListener),U(this,"emit",this.dispatchEvent)}addEventListener(t,n){const o=this._listeners.get(t)??new Set;return this._listeners.set(t,o),o.add(n),this}removeEventListener(t,n){var o;return(o=this._listeners.get(t))==null||o.delete(n),this}dispatchEvent(t,...n){let o=!0;for(const i of this._listeners.get(t)??[])o=i(...n)!==!1&&o;return o}unbindAllListeners(){this._listeners.clear()}}const zn=(e,t="px")=>typeof e=="number"?e+t:e;function Me({style:e},t,n){if(typeof t=="object")for(const[o,i]of Object.entries(t))i!==void 0&&(e[o]=zn(i));else n!==void 0&&(e[t]=zn(n))}function Jn(e){return(t,n,o,i={})=>{t instanceof HTMLCollection||t instanceof NodeList?t=Array.from(t):Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);for(const l of t)for(const a of n)l[e](a,o,{capture:!1,...i});return[t,n,o,i]}}const Qe=Jn("addEventListener"),Ee=Jn("removeEventListener"),Mt=e=>{var t;const{clientX:n,clientY:o,target:i}=((t=e.touches)==null?void 0:t[0])??e;return{x:n,y:o,target:i}};function jn(e,t,n="touch"){switch(n){case"center":{const o=t.left+t.width/2,i=t.top+t.height/2;return o>=e.left&&o<=e.right&&i>=e.top&&i<=e.bottom}case"cover":return t.left>=e.left&&t.top>=e.top&&t.right<=e.right&&t.bottom<=e.bottom;case"touch":return e.right>=t.left&&e.left<=t.right&&e.bottom>=t.top&&e.top<=t.bottom}}function Ge(e,t=document){const n=Array.isArray(e)?e:[e];let o=[];for(let i=0,l=n.length;i<l;i++){const a=n[i];typeof a=="string"?o=o.concat(Array.from(t.querySelectorAll(a))):a instanceof Element&&o.push(a)}return o}const fr=()=>matchMedia("(hover: none), (pointer: coarse)").matches,vr=()=>"safari"in window,br=e=>{let t,n=-1,o=!1;return{next(...i){t=i,o||(o=!0,n=requestAnimationFrame(()=>{e(...t),o=!1}))},cancel(){cancelAnimationFrame(n),o=!1}}},{abs:Pe,max:An,min:Dn,ceil:In}=Math;class eo extends hr{constructor(t){var n,o,i,l,a;super(),U(this,"_options"),U(this,"_selection",{stored:[],selected:[],touched:[],changed:{added:[],removed:[]}}),U(this,"_area"),U(this,"_clippingElement"),U(this,"_targetElement"),U(this,"_targetRect"),U(this,"_selectables",[]),U(this,"_latestElement"),U(this,"_areaRect",new DOMRect),U(this,"_areaLocation",{y1:0,x2:0,y2:0,x1:0}),U(this,"_singleClick",!0),U(this,"_frame"),U(this,"_scrollAvailable",!0),U(this,"_scrollingActive",!1),U(this,"_scrollSpeed",{x:0,y:0}),U(this,"_scrollDelta",{x:0,y:0}),U(this,"disable",this._bindStartEvents.bind(this,!1)),U(this,"enable",this._bindStartEvents),this._options={selectionAreaClass:"selection-area",selectionContainerClass:void 0,selectables:[],document:window.document,startAreas:["html"],boundaries:["html"],container:"body",...t,behaviour:{overlap:"invert",intersect:"touch",...t.behaviour,startThreshold:(n=t.behaviour)!=null&&n.startThreshold?typeof t.behaviour.startThreshold=="number"?t.behaviour.startThreshold:{x:10,y:10,...t.behaviour.startThreshold}:{x:10,y:10},scrolling:{speedDivider:10,manualSpeed:750,...(o=t.behaviour)==null?void 0:o.scrolling,startScrollMargins:{x:0,y:0,...(l=(i=t.behaviour)==null?void 0:i.scrolling)==null?void 0:l.startScrollMargins}}},features:{range:!0,touch:!0,...t.features,singleTap:{allow:!0,intersect:"native",...(a=t.features)==null?void 0:a.singleTap}}};for(const m of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))typeof this[m]=="function"&&(this[m]=this[m].bind(this));const{document:s,selectionAreaClass:c,selectionContainerClass:p}=this._options;this._area=s.createElement("div"),this._clippingElement=s.createElement("div"),this._clippingElement.appendChild(this._area),this._area.classList.add(c),p&&this._clippingElement.classList.add(p),Me(this._area,{willChange:"top, left, bottom, right, width, height",top:0,left:0,position:"fixed"}),Me(this._clippingElement,{overflow:"hidden",position:"fixed",transform:"translate3d(0, 0, 0)",pointerEvents:"none",zIndex:"1"}),this._frame=br(m=>{this._recalculateSelectionAreaRect(),this._updateElementSelection(),this._emitEvent("move",m),this._redrawSelectionArea()}),this.enable()}_bindStartEvents(t=!0){const{document:n,features:o}=this._options,i=t?Qe:Ee;i(n,"mousedown",this._onTapStart),o.touch&&i(n,"touchstart",this._onTapStart,{passive:!1})}_onTapStart(t,n=!1){const{x:o,y:i,target:l}=Mt(t),{_options:a}=this,{document:s}=this._options,c=l.getBoundingClientRect(),p=Ge(a.startAreas,a.document),m=Ge(a.boundaries,a.document);this._targetElement=m.find(_=>jn(_.getBoundingClientRect(),c));const y=t.composedPath();if(!this._targetElement||!p.find(_=>y.includes(_))||!m.find(_=>y.includes(_))||!n&&this._emitEvent("beforestart",t)===!1)return;this._areaLocation={x1:o,y1:i,x2:0,y2:0};const h=s.scrollingElement??s.body;this._scrollDelta={x:h.scrollLeft,y:h.scrollTop},this._singleClick=!0,this.clearSelection(!1,!0),Qe(s,["touchmove","mousemove"],this._delayedTapMove,{passive:!1}),Qe(s,["mouseup","touchcancel","touchend"],this._onTapStop),Qe(s,"scroll",this._onScroll)}_onSingleTap(t){const{singleTap:{intersect:n},range:o}=this._options.features,i=Mt(t);let l;if(n==="native")l=i.target;else if(n==="touch"){this.resolveSelectables();const{x:s,y:c}=i;l=this._selectables.find(p=>{const{right:m,left:y,top:h,bottom:_}=p.getBoundingClientRect();return s<m&&s>y&&c<_&&c>h})}if(!l)return;for(this.resolveSelectables();!this._selectables.includes(l);){if(!l.parentElement)return;l=l.parentElement}const{stored:a}=this._selection;if(this._emitEvent("start",t),t.shiftKey&&o&&this._latestElement){const s=this._latestElement,[c,p]=s.compareDocumentPosition(l)&4?[l,s]:[s,l],m=[...this._selectables.filter(y=>y.compareDocumentPosition(c)&4&&y.compareDocumentPosition(p)&2),c,p];this.select(m),this._latestElement=s}else a.includes(l)&&(a.length===1||t.ctrlKey||a.every(s=>this._selection.stored.includes(s)))?this.deselect(l):(this.select(l),this._latestElement=l);this._emitEvent("stop",t)}_delayedTapMove(t){const{container:n,document:o,behaviour:{startThreshold:i}}=this._options,{x1:l,y1:a}=this._areaLocation,{x:s,y:c}=Mt(t);if(typeof i=="number"&&Pe(s+c-(l+a))>=i||typeof i=="object"&&Pe(s-l)>=i.x||Pe(c-a)>=i.y){if(Ee(o,["mousemove","touchmove"],this._delayedTapMove,{passive:!1}),this._emitEvent("beforedrag",t)===!1){Ee(o,["mouseup","touchcancel","touchend"],this._onTapStop);return}Qe(o,["mousemove","touchmove"],this._onTapMove,{passive:!1}),Me(this._area,"display","block"),Ge(n,o)[0].appendChild(this._clippingElement),this.resolveSelectables(),this._singleClick=!1,this._targetRect=this._targetElement.getBoundingClientRect(),this._scrollAvailable=this._targetElement.scrollHeight!==this._targetElement.clientHeight||this._targetElement.scrollWidth!==this._targetElement.clientWidth,this._scrollAvailable&&(Qe(o,"wheel",this._manualScroll,{passive:!1}),this._selectables=this._selectables.filter(p=>this._targetElement.contains(p))),this._setupSelectionArea(),this._emitEvent("start",t),this._onTapMove(t)}this._handleMoveEvent(t)}_setupSelectionArea(){const{_clippingElement:t,_targetElement:n,_area:o}=this,i=this._targetRect=n.getBoundingClientRect();this._scrollAvailable?(Me(t,{top:i.top,left:i.left,width:i.width,height:i.height}),Me(o,{marginTop:-i.top,marginLeft:-i.left})):(Me(t,{top:0,left:0,width:"100%",height:"100%"}),Me(o,{marginTop:0,marginLeft:0}))}_onTapMove(t){const{x:n,y:o}=Mt(t),{_scrollSpeed:i,_areaLocation:l,_options:a,_frame:s}=this,{speedDivider:c}=a.behaviour.scrolling,p=this._targetElement;if(l.x2=n,l.y2=o,this._scrollAvailable&&!this._scrollingActive&&(i.y||i.x)){this._scrollingActive=!0;const m=()=>{if(!i.x&&!i.y){this._scrollingActive=!1;return}const{scrollTop:y,scrollLeft:h}=p;i.y&&(p.scrollTop+=In(i.y/c),l.y1-=p.scrollTop-y),i.x&&(p.scrollLeft+=In(i.x/c),l.x1-=p.scrollLeft-h),s.next(t),requestAnimationFrame(m)};requestAnimationFrame(m)}else s.next(t);this._handleMoveEvent(t)}_handleMoveEvent(t){const{features:n}=this._options;(n.touch&&fr()||this._scrollAvailable&&vr())&&t.preventDefault()}_onScroll(){const{_scrollDelta:t,_options:{document:n}}=this,{scrollTop:o,scrollLeft:i}=n.scrollingElement??n.body;this._areaLocation.x1+=t.x-i,this._areaLocation.y1+=t.y-o,t.x=i,t.y=o,this._setupSelectionArea(),this._frame.next(null)}_manualScroll(t){const{manualSpeed:n}=this._options.behaviour.scrolling,o=t.deltaY?t.deltaY>0?1:-1:0,i=t.deltaX?t.deltaX>0?1:-1:0;this._scrollSpeed.y+=o*n,this._scrollSpeed.x+=i*n,this._onTapMove(t),t.preventDefault()}_recalculateSelectionAreaRect(){const{_scrollSpeed:t,_areaLocation:n,_areaRect:o,_targetElement:i,_options:l}=this,{scrollTop:a,scrollHeight:s,clientHeight:c,scrollLeft:p,scrollWidth:m,clientWidth:y}=i,h=this._targetRect,{x1:_,y1:N}=n;let{x2:C,y2:f}=n;const{behaviour:{scrolling:{startScrollMargins:M}}}=l;C<h.left+M.x?(t.x=p?-Pe(h.left-C+M.x):0,C=C<h.left?h.left:C):C>h.right-M.x?(t.x=m-p-y?Pe(h.left+h.width-C-M.x):0,C=C>h.right?h.right:C):t.x=0,f<h.top+M.y?(t.y=a?-Pe(h.top-f+M.y):0,f=f<h.top?h.top:f):f>h.bottom-M.y?(t.y=s-a-c?Pe(h.top+h.height-f-M.y):0,f=f>h.bottom?h.bottom:f):t.y=0;const z=Dn(_,C),L=Dn(N,f),A=An(_,C),P=An(N,f);o.x=z,o.y=L,o.width=A-z,o.height=P-L}_redrawSelectionArea(){const{x:t,y:n,width:o,height:i}=this._areaRect,{style:l}=this._area;l.left=`${t}px`,l.top=`${n}px`,l.width=`${o}px`,l.height=`${i}px`}_onTapStop(t,n){var o;const{document:i,features:l}=this._options,{_singleClick:a}=this;Ee(i,["mousemove","touchmove"],this._delayedTapMove),Ee(i,["touchmove","mousemove"],this._onTapMove),Ee(i,["mouseup","touchcancel","touchend"],this._onTapStop),Ee(i,"scroll",this._onScroll),this._keepSelection(),t&&a&&l.singleTap.allow?this._onSingleTap(t):!a&&!n&&(this._updateElementSelection(),this._emitEvent("stop",t)),this._scrollSpeed.x=0,this._scrollSpeed.y=0,this._scrollAvailable&&Ee(i,"wheel",this._manualScroll,{passive:!0}),this._clippingElement.remove(),(o=this._frame)==null||o.cancel(),Me(this._area,"display","none")}_updateElementSelection(){const{_selectables:t,_options:n,_selection:o,_areaRect:i}=this,{stored:l,selected:a,touched:s}=o,{intersect:c,overlap:p}=n.behaviour,m=p==="invert",y=[],h=[],_=[];for(let C=0;C<t.length;C++){const f=t[C];if(jn(i,f.getBoundingClientRect(),c)){if(a.includes(f))l.includes(f)&&!s.includes(f)&&s.push(f);else if(m&&l.includes(f)){_.push(f);continue}else h.push(f);y.push(f)}}m&&h.push(...l.filter(C=>!a.includes(C)));const N=p==="keep";for(let C=0;C<a.length;C++){const f=a[C];!y.includes(f)&&!(N&&l.includes(f))&&_.push(f)}o.selected=y,o.changed={added:h,removed:_},this._latestElement=void 0}_emitEvent(t,n){return this.emit(t,{event:n,store:this._selection,selection:this})}_keepSelection(){const{_options:t,_selection:n}=this,{selected:o,changed:i,touched:l,stored:a}=n,s=o.filter(c=>!a.includes(c));switch(t.behaviour.overlap){case"drop":{n.stored=[...s,...a.filter(c=>!l.includes(c))];break}case"invert":{n.stored=[...s,...a.filter(c=>!i.removed.includes(c))];break}case"keep":{n.stored=[...a,...o.filter(c=>!a.includes(c))];break}}}trigger(t,n=!0){this._onTapStart(t,n)}resolveSelectables(){this._selectables=Ge(this._options.selectables,this._options.document)}clearSelection(t=!0,n=!1){const{selected:o,stored:i,changed:l}=this._selection;l.added=[],l.removed.push(...o,...t?i:[]),n||(this._emitEvent("move",null),this._emitEvent("stop",null)),this._selection={stored:t?[]:i,selected:[],touched:[],changed:{added:[],removed:[]}}}getSelection(){return this._selection.stored}getSelectionArea(){return this._area}cancel(t=!1){this._onTapStop(null,!t)}destroy(){this.cancel(),this.disable(),this._clippingElement.remove(),super.unbindAllListeners()}select(t,n=!1){const{changed:o,selected:i,stored:l}=this._selection,a=Ge(t,this._options.document).filter(s=>!i.includes(s)&&!l.includes(s));return l.push(...a),i.push(...a),o.added.push(...a),o.removed=[],this._latestElement=void 0,n||(this._emitEvent("move",null),this._emitEvent("stop",null)),a}deselect(t,n=!1){const{selected:o,stored:i,changed:l}=this._selection,a=Ge(t,this._options.document).filter(s=>o.includes(s)||i.includes(s));a.length&&(this._selection.stored=i.filter(s=>!a.includes(s)),this._selection.selected=o.filter(s=>!a.includes(s)),this._selection.changed.added=[],this._selection.changed.removed.push(...a.filter(s=>!l.removed.includes(s))),this._latestElement=void 0,n||(this._emitEvent("move",null),this._emitEvent("stop",null)))}}U(eo,"version","3.3.1");function gr(e){const t=new eo({selectables:[".map-container me-tpc"],boundaries:[e.container],container:"body",behaviour:{scrolling:{speedDivider:10,manualSpeed:750,startScrollMargins:{x:10,y:10}}}}).on("beforestart",({event:n})=>{if(n.button!==e.mouseSelectionButton||n.target.tagName==="ME-TPC"||n.target.id==="input-box"||n.target.className==="circle")return!1;const o=t.getSelectionArea();return o.style.background="#4f90f22d",o.style.border="1px solid #4f90f2",o.parentElement&&(o.parentElement.style.zIndex="9999"),!0}).on("start",({event:n})=>{!n.ctrlKey&&!n.metaKey&&(e.clearSelection(),t.clearSelection(!0,!0))}).on("move",({store:{changed:{added:n,removed:o}}})=>{ge.moved=!0;for(const i of n)i.classList.add("selected");for(const i of o)i.classList.remove("selected")}).on("stop",({store:{stored:n}})=>{e.selectNodes(n)});e.selection=t}const yr=function(e,t=!0){this.theme=e;const n=this.theme.cssVar,o=Object.keys(n);for(let i=0;i<o.length;i++){const l=o[i];this.mindElixirBox.style.setProperty(l,n[l])}t&&this.refresh()};function to(e){return{nodeData:e.isFocusMode?e.nodeDataBackup:e.nodeData,arrows:e.arrows,summaries:e.summaries,direction:e.direction,theme:e.theme}}const xr=function(e,t,n){if(e){if(console.time("selectNode"),this.clearSelection(),typeof e=="string"){const o=Z(e);return o?this.selectNode(o):void 0}e.className="selected",e.scrollIntoView({block:"nearest",inline:"nearest"}),this.currentNode=e,t?this.bus.fire("selectNewNode",e.nodeObj):this.bus.fire("selectNode",e.nodeObj,n),console.timeEnd("selectNode")}},wr=function(){this.currentNode&&(this.currentNode.className=""),this.currentNode=null,this.bus.fire("unselectNode")},_r=function(e){console.time("selectNodes"),this.clearSelection();for(const t of e)t.className="selected";this.currentNodes=e,this.bus.fire("selectNodes",e.map(t=>t.nodeObj)),console.timeEnd("selectNodes")},Cr=function(){if(this.currentNodes)for(const e of this.currentNodes)e.classList.remove("selected");this.currentNodes=null,this.bus.fire("unselectNodes")},kr=function(){this.unselectNode(),this.unselectNodes(),this.unselectSummary(),this.unselectArrow()},Nr=function(){const e=to(this);return JSON.stringify(e,(t,n)=>{if(!(t==="parent"&&typeof n!="string"))return n})},Mr=function(){return JSON.parse(this.getDataString())},Er=function(){const e=to(this).nodeData;let t="# "+e.topic+`

`;function n(o,i){for(let l=0;l<o.length;l++)i<=6?t+="".padStart(i,"#")+" "+o[l].topic+`

`:t+="".padStart(i-7,"	")+"- "+o[l].topic+`
`,o[l].children&&n(o[l].children||[],i+1)}return n(e.children||[],2),t},Sr=function(){this.editable=!0},Lr=function(){this.editable=!1},Tr=function(e){this.scaleVal=e,this.map.style.transform="scale("+e+")"},zr=function(){this.container.scrollTo(1e4-this.container.offsetWidth/2,1e4-this.container.offsetHeight/2)},jr=function(e){e(this)},Ar=function(e){e.nodeObj.root||(this.tempDirection===null&&(this.tempDirection=this.direction),this.isFocusMode||(this.nodeDataBackup=this.nodeData,this.isFocusMode=!0),this.nodeData=e.nodeObj,this.nodeData.root=!0,this.initRight(),this.toCenter())},Dr=function(){this.isFocusMode=!1,this.tempDirection!==null&&(delete this.nodeData.root,this.nodeData=this.nodeDataBackup,this.direction=this.tempDirection,this.tempDirection=null,this.refresh(),this.toCenter())},Ir=function(){this.direction=0,this.refresh()},$r=function(){this.direction=1,this.refresh()},Or=function(){this.direction=2,this.refresh()},Pr=function(e){this.locale=e,this.refresh()},Vr=function(e,t){const n=e.nodeObj;typeof t=="boolean"?n.expanded=t:n.expanded!==!1?n.expanded=!1:n.expanded=!0,this.layout(),this.linkDiv(),this.bus.fire("expandNode",n)},Hr=function(e){e&&(e=JSON.parse(JSON.stringify(e)),this.nodeData=e.nodeData,this.arrows=e.arrows||[],this.summaries=e.summaries||[]),ze(this.nodeData),this.layout(),this.linkDiv()},Br=Object.freeze(Object.defineProperty({__proto__:null,cancelFocus:Dr,clearSelection:kr,disableEdit:Lr,enableEdit:Sr,expandNode:Vr,focusNode:Ar,getData:Mr,getDataMd:Er,getDataString:Nr,initLeft:Ir,initRight:$r,initSide:Or,install:jr,refresh:Hr,scale:Tr,selectNode:xr,selectNodes:_r,setLocale:Pr,toCenter:zr,unselectNode:wr,unselectNodes:Cr},Symbol.toStringTag,{value:"Module"})),it=e=>{var t;const n=(t=e.parent)==null?void 0:t.children,o=n.indexOf(e);return{siblings:n,index:o}};function Rr(e){const{siblings:t,index:n}=it(e),o=t[n];n===0?(t[n]=t[t.length-1],t[t.length-1]=o):(t[n]=t[n-1],t[n-1]=o)}function Fr(e){const{siblings:t,index:n}=it(e),o=t[n];n===t.length-1?(t[n]=t[0],t[0]=o):(t[n]=t[n+1],t[n+1]=o)}function rn(e){const{siblings:t,index:n}=it(e);return t.splice(n,1),t.length}function Yr(e,t,n){const{siblings:o,index:i}=it(n);t==="before"?o.splice(i,0,e):o.splice(i+1,0,e)}function qr(e,t){const{siblings:n,index:o}=it(e);n[o]=t,t.children=[e]}function no(e,t,n){if(rn(t),e==="in")n.children?n.children.push(t):n.children=[t];else{t.direction!==void 0&&(t.direction=n.direction);const{siblings:o,index:i}=it(n);e==="before"?o.splice(i,0,t):o.splice(i+1,0,t)}}const Wr=function(e,t){var n,o;if(e===we)return we;if(e===He)return He;if(e===$t){const i=((n=document.querySelector(".lhs"))==null?void 0:n.childElementCount)||0,l=((o=document.querySelector(".rhs"))==null?void 0:o.childElementCount)||0;return i<=l?(t.direction=we,we):(t.direction=He,He)}},oo=function(e,t,n){var o,i;const l=n.children[0].children[0],a=t.parentElement;if(a.tagName==="ME-PARENT"){if(Pt(l),a.children[1])a.nextSibling.appendChild(n);else{const s=e.createChildren([n]);a.appendChild(on(!0)),a.insertAdjacentElement("afterend",s)}e.linkDiv(n.offsetParent)}else a.tagName==="ME-ROOT"&&(Wr(e.direction,l.nodeObj)===we?(o=document.querySelector(".lhs"))==null||o.appendChild(n):(i=document.querySelector(".rhs"))==null||i.appendChild(n),e.linkDiv())},ln=function(e,t,n){if(!t)return null;const o=t.nodeObj;o.expanded===!1&&(e.expandNode(t,!0),t=Z(o.id));const i=n||e.generateNewObj();o.children?o.children.push(i):o.children=[i],ze(e.nodeData);const{grp:l,top:a}=e.createWrapper(i);return oo(e,t,l),{newTop:a,newNodeObj:i}},io=function(e,t){const n=e.parentNode;if(t===0){const o=n.parentNode.parentNode;o.tagName!=="ME-MAIN"&&o.previousSibling.children[1].remove()}n.parentNode.remove()},ro={before:"beforebegin",after:"afterend"},Pt=function(e){const t=e.parentElement.parentElement.lastElementChild;(t==null?void 0:t.tagName)==="svg"&&(t==null||t.remove())},Ur=function(e,t){const n=e.nodeObj,o=tn(n);o.style&&t.style&&(t.style=Object.assign(o.style,t.style));const i=Object.assign(n,t);nn(e,i),this.linkDiv(),this.bus.fire("operation",{name:"reshapeNode",obj:i,origin:o})},Kr=function(e,t,n){var o,i,l;const a=t||this.currentNode;if(!a)return;const s=a.nodeObj;if(s.root===!0){this.addChild();return}else if(((o=s.parent)==null?void 0:o.root)===!0&&((l=(i=s.parent)==null?void 0:i.children)==null?void 0:l.length)===1){this.addChild(Z(s.parent.id));return}const c=n||this.generateNewObj();Yr(c,e,s),ze(this.nodeData);const p=a.parentElement;console.time("insertSibling_DOM");const{grp:m,top:y}=this.createWrapper(c);p.parentElement.insertAdjacentElement(ro[e],m),this.linkDiv(m.offsetParent),n||this.editTopic(y.firstChild),this.selectNode(y.firstChild,!0),console.timeEnd("insertSibling_DOM"),this.bus.fire("operation",{name:"insertSibling",type:e,obj:c})},Xr=function(e,t){const n=e||this.currentNode;if(!n)return;Pt(n);const o=n.nodeObj;if(o.root===!0)return;const i=t||this.generateNewObj();qr(o,i),ze(this.nodeData);const l=n.parentElement.parentElement;console.time("insertParent_DOM");const{grp:a,top:s}=this.createWrapper(i,!0);s.appendChild(on(!0)),l.insertAdjacentElement("afterend",a);const c=this.createChildren([l]);s.insertAdjacentElement("afterend",c),this.linkDiv(),t||this.editTopic(s.firstChild),this.selectNode(s.firstChild,!0),console.timeEnd("insertParent_DOM"),this.bus.fire("operation",{name:"insertParent",obj:i})},Zr=function(e,t){console.time("addChild");const n=e||this.currentNode;if(!n)return;const o=ln(this,n,t);if(!o)return;const{newTop:i,newNodeObj:l}=o;this.bus.fire("operation",{name:"addChild",obj:l}),console.timeEnd("addChild"),t||this.editTopic(i.firstChild),this.selectNode(i.firstChild,!0)},Qr=function(e,t){console.time("copyNode");const n=tn(e.nodeObj);en(n);const o=ln(this,t,n);if(!o)return;const{newNodeObj:i}=o;console.timeEnd("copyNode"),this.selectNode(Z(i.id)),this.bus.fire("operation",{name:"copyNode",obj:i})},Gr=function(e,t){e=Ot(e);const n=[];for(let o=0;o<e.length;o++){const i=e[o],l=tn(i.nodeObj);en(l);const a=ln(this,t,l);if(!a)return;const{newNodeObj:s}=a;n.push(s)}this.selectNodes(n.map(o=>Z(o.id))),this.bus.fire("operation",{name:"copyNodes",objs:n})},Jr=function(e){const t=e||this.currentNode;if(!t)return;const n=t.nodeObj;Rr(n);const o=t.parentNode.parentNode;o.parentNode.insertBefore(o,o.previousSibling),this.linkDiv(),this.bus.fire("operation",{name:"moveUpNode",obj:n})},el=function(e){const t=e||this.currentNode;if(!t)return;const n=t.nodeObj;Fr(n);const o=t.parentNode.parentNode;o.nextSibling?o.nextSibling.insertAdjacentElement("afterend",o):o.parentNode.prepend(o),this.linkDiv(),this.bus.fire("operation",{name:"moveDownNode",obj:n})},tl=function(e){var t;const n=e||this.currentNode;if(!n)return;const o=n.nodeObj;if(o.root===!0)throw new Error("Can not remove root node");const i=o.parent.children,l=i.findIndex(s=>s===o),a=rn(o);if(io(n,a),i.length!==0){const s=i[l]||i[l-1];this.selectNode(Z(s.id))}else this.selectNode(Z(o.parent.id));this.linkDiv(),this.bus.fire("operation",{name:"removeNode",obj:o,originIndex:l,originParentId:(t=o==null?void 0:o.parent)==null?void 0:t.id})},nl=function(e){e=Ot(e);for(const t of e){const n=t.nodeObj;if(n.root===!0)continue;const o=rn(n);io(t,o)}this.linkDiv(),this.bus.fire("operation",{name:"removeNodes",objs:e.map(t=>t.nodeObj)})},ol=function(e,t){e=Ot(e);const n=t.nodeObj;n.expanded===!1&&(this.expandNode(t,!0),t=Z(n.id)),console.time("moveNodeIn");for(const o of e){const i=o.nodeObj;no("in",i,n),ze(this.nodeData);const l=o.parentElement;oo(this,t,l.parentElement)}this.linkDiv(),this.bus.fire("operation",{name:"moveNodeIn",objs:e.map(o=>o.nodeObj),toObj:n}),console.timeEnd("moveNodeIn")},lo=(e,t,n,o)=>{e=Ot(e),t==="after"&&(e=e.reverse());const i=n.nodeObj;for(const l of e){const a=l.nodeObj;no(t,a,i),ze(o.nodeData),Pt(l);const s=l.parentElement.parentNode;n.parentElement.parentNode.insertAdjacentElement(ro[t],s)}o.linkDiv(),o.bus.fire("operation",{name:t==="before"?"moveNodeBefore":"moveNodeAfter",objs:e.map(l=>l.nodeObj),toObj:i})},il=function(e,t){lo(e,"before",t,this)},rl=function(e,t){lo(e,"after",t,this)},ll=function(e){const t=e||this.currentNode;t&&(t.nodeObj.dangerouslySetInnerHTML||this.editTopic(t))},sl=function(e,t){e.text.textContent=t,e.nodeObj.topic=t,this.linkDiv()},so=Object.freeze(Object.defineProperty({__proto__:null,addChild:Zr,beginEdit:ll,copyNode:Qr,copyNodes:Gr,insertParent:Xr,insertSibling:Kr,mainToSub:Pt,moveDownNode:el,moveNodeAfter:rl,moveNodeBefore:il,moveNodeIn:ol,moveUpNode:Jr,removeNode:tl,removeNodes:nl,reshapeNode:Ur,setNodeTopic:sl},Symbol.toStringTag,{value:"Module"})),al=function(e){return{dom:e,moved:!1,mousedown:!1,handleMouseMove(t){this.mousedown&&(this.moved=!0,this.cb&&this.cb(t.movementX,t.movementY))},handleMouseDown(t){t.button===0&&(this.mousedown=!0)},handleClear(t){this.mousedown=!1},cb:null,init(t,n){this.cb=n,this.handleClear=this.handleClear.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),t.addEventListener("mousemove",this.handleMouseMove),t.addEventListener("mouseleave",this.handleClear),t.addEventListener("mouseup",this.handleClear),this.dom.addEventListener("mousedown",this.handleMouseDown)},destory(t){t.removeEventListener("mousemove",this.handleMouseMove),t.removeEventListener("mouseleave",this.handleClear),t.removeEventListener("mouseup",this.handleClear),this.dom.removeEventListener("mousedown",this.handleMouseDown)},clear(){this.moved=!1,this.mousedown=!1}}},$n={create:al};function jt(e,t,n){const{offsetLeft:o,offsetTop:i}=je(e.nodes,t),l=t.offsetWidth,a=t.offsetHeight,s=o+l/2,c=i+a/2,p=s+n.x,m=c+n.y;return{w:l,h:a,cx:s,cy:c,ctrlX:p,ctrlY:m}}function Je(e){let t,n;const o=(e.cy-e.ctrlY)/(e.ctrlX-e.cx);return o>e.h/e.w||o<-e.h/e.w?e.cy-e.ctrlY<0?(t=e.cx-e.h/2/o,n=e.cy+e.h/2):(t=e.cx+e.h/2/o,n=e.cy-e.h/2):e.cx-e.ctrlX<0?(t=e.cx+e.w/2,n=e.cy-e.w*o/2):(t=e.cx-e.w/2,n=e.cy+e.w*o/2),{x:t,y:n}}const dl=function(e,t,n,o){const i=document.createElementNS("http://www.w3.org/2000/svg","text");return K(i,{"text-anchor":"middle",x:t+"",y:n+"",fill:o||"#666"}),i.dataset.type="custom-link",i.innerHTML=e,i},ao=function(e,t,n,o,i){if(!t||!n)return;const l=performance.now(),a=jt(e,t,o.delta1),s=jt(e,n,o.delta2),{x:c,y:p}=Je(a),{ctrlX:m,ctrlY:y}=a,{ctrlX:h,ctrlY:_}=s,{x:N,y:C}=Je(s),f=Kn(h,_,N,C),M=Ki(`M ${c} ${p} C ${m} ${y} ${h} ${_} ${N} ${C}`,`M ${f.x1} ${f.y1} L ${N} ${C} L ${f.x2} ${f.y2}`),z=c/8+m*3/8+h*3/8+N/8,L=p/8+y*3/8+_*3/8+C/8,A=dl(o.label,z,L,e.theme.cssVar["--color"]);M.appendChild(A),M.arrowObj=o,M.dataset.linkid=o.id,e.linkSvgGroup.appendChild(M),i||(e.arrows.push(o),e.currentArrow=M,uo(e,o,a,s));const P=performance.now();console.log(`DrawArrow Execution time: ${P-l} ms`)},cl=function(e,t){const n={id:ht(),label:"Custom Link",from:e.nodeObj.id,to:t.nodeObj.id,delta1:{x:0,y:-200},delta2:{x:0,y:-200}};ao(this,e,t,n),this.bus.fire("operation",{name:"createArrow",obj:n})},ul=function(e){let t;if(e?t=e:t=this.currentArrow,!t)return;co(this);const n=t.arrowObj.id;this.arrows=this.arrows.filter(o=>o.id!==n),t.remove(),this.bus.fire("operation",{name:"removeArrow",obj:{id:n}})},pl=function(e){this.currentArrow=e;const t=e.arrowObj,n=Z(t.from),o=Z(t.to),i=jt(this,n,t.delta1),l=jt(this,o,t.delta2);uo(this,t,i,l)},ml=function(){this.currentArrow=null,co(this)},co=function(e){e.linkController.style.display="none",e.P2.style.display="none",e.P3.style.display="none"},uo=function(e,t,n,o){var i;e.linkController.style.display="initial",e.P2.style.display="initial",e.P3.style.display="initial",e.nodes.appendChild(e.linkController),e.nodes.appendChild(e.P2),e.nodes.appendChild(e.P3);let{x:l,y:a}=Je(n),{ctrlX:s,ctrlY:c}=n,{ctrlX:p,ctrlY:m}=o,{x:y,y:h}=Je(o);e.P2.style.cssText=`top:${c}px;left:${s}px;`,e.P3.style.cssText=`top:${m}px;left:${p}px;`,K(e.line1,{x1:l+"",y1:a+"",x2:s+"",y2:c+""}),K(e.line2,{x1:p+"",y1:m+"",x2:y+"",y2:h+""}),e.helper1&&(e.helper1.destory(e.map),(i=e.helper2)==null||i.destory(e.map)),e.helper1=$n.create(e.P2),e.helper2=$n.create(e.P3),e.helper1.init(e.map,(_,N)=>{var C;s=s+_/e.scaleVal,c=c+N/e.scaleVal;const f=Je({...n,ctrlX:s,ctrlY:c});l=f.x,a=f.y;const M=l/8+s*3/8+p*3/8+y/8,z=a/8+c*3/8+m*3/8+h/8;e.P2.style.top=c+"px",e.P2.style.left=s+"px",(C=e.currentArrow)==null||C.children[0].setAttribute("d",`M ${l} ${a} C ${s} ${c} ${p} ${m} ${y} ${h}`),K(e.currentArrow.children[2],{x:M+"",y:z+""}),K(e.line1,{x1:l+"",y1:a+"",x2:s+"",y2:c+""}),t.delta1.x=s-n.cx,t.delta1.y=c-n.cy}),e.helper2.init(e.map,(_,N)=>{var C,f;p=p+_/e.scaleVal,m=m+N/e.scaleVal;const M=Je({...o,ctrlX:p,ctrlY:m});y=M.x,h=M.y;const z=l/8+s*3/8+p*3/8+y/8,L=a/8+c*3/8+m*3/8+h/8,A=Kn(p,m,y,h);e.P3.style.top=m+"px",e.P3.style.left=p+"px",(C=e.currentArrow)==null||C.children[0].setAttribute("d",`M ${l} ${a} C ${s} ${c} ${p} ${m} ${y} ${h}`),(f=e.currentArrow)==null||f.children[1].setAttribute("d",`M ${A.x1} ${A.y1} L ${y} ${h} L ${A.x2} ${A.y2}`),K(e.currentArrow.children[2],{x:z+"",y:L+""}),K(e.line2,{x1:p+"",y1:m+"",x2:y+"",y2:h+""}),t.delta2.x=p-o.cx,t.delta2.y=m-o.cy})};function hl(){this.linkSvgGroup.innerHTML="";for(let e=0;e<this.arrows.length;e++){const t=this.arrows[e];try{ao(this,Z(t.from),Z(t.to),t,!0)}catch{console.warn("Node may not be expanded")}}this.nodes.appendChild(this.linkSvgGroup)}function fl(e){if(console.time("editSummary"),!e)return;const t=e.children[2];console.log(t,e),Qn(this,t,n=>{var o;const i=e.arrowObj,l=((o=n.textContent)==null?void 0:o.trim())||"";l===""?i.label=origin:i.label=l,n.remove(),l!==origin&&(t.innerHTML=i.label,this.linkDiv(),this.bus.fire("operation",{name:"finishEditArrowLabel",obj:i}))}),console.timeEnd("editSummary")}function vl(){this.arrows=this.arrows.filter(e=>Tt(e.from,this.nodeData)&&Tt(e.to,this.nodeData))}const bl=Object.freeze(Object.defineProperty({__proto__:null,createArrow:cl,editArrowLabel:fl,removeArrow:ul,renderArrow:hl,selectArrow:pl,tidyArrow:vl,unselectArrow:ml},Symbol.toStringTag,{value:"Module"})),gl=function(e){var t,n;if(e.length===0)throw new Error("No selected node.");if(e.length===1){const m=e[0].nodeObj,y=e[0].nodeObj.parent;if(!y)throw new Error("Can not select root node.");const h=y.children.findIndex(_=>m===_);return{parent:y.id,start:h,end:h}}let o=0;const i=e.map(m=>{let y=m.nodeObj;const h=[];for(;y.parent;){const _=y.parent,N=_.children,C=N==null?void 0:N.indexOf(y);y=_,h.unshift({node:y,index:C})}return h.length>o&&(o=h.length),h});let l=0;e:for(;l<o;l++){const m=(t=i[0][l])==null?void 0:t.node;for(let y=1;y<i.length;y++)if(((n=i[y][l])==null?void 0:n.node)!==m)break e}if(!l)throw new Error("Can not select root node.");const a=i.map(m=>m[l-1].index).sort(),s=a[0]||0,c=a[a.length-1]||0,p=i[0][l-1].node;if(p.root)throw new Error("Please select nodes in the same main topic.");return{parent:p.id,start:s,end:c}},yl=function(e){const t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.setAttribute("id",e),t},On=function(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","path");return K(n,{d:e,stroke:t||"#666",fill:"none","stroke-linecap":"round","stroke-width":"2"}),n},Pn=function(e,t,n,o,i){const l=document.createElementNS("http://www.w3.org/2000/svg","text");return K(l,{"text-anchor":o,x:t+"",y:n+"",fill:i||"#666"}),l.innerHTML=e,l},xl=e=>Z(e).parentElement.parentElement,wl=function({parent:e,start:t}){var n,o;const i=Z(e),l=i.nodeObj;let a;return l.root===!0?a=(n=Z(l.children[t].id).closest("me-main"))==null?void 0:n.className:a=(o=i.closest("me-main"))==null?void 0:o.className,a},po=function(e,t){var n;const{id:o,text:i,parent:l,start:a,end:s}=t,c=e.nodes,p=Z(l).nodeObj,m=wl(t);let y=1/0,h=0,_=0,N=0;for(let H=a;H<=s;H++){const Y=(n=p.children)==null?void 0:n[H];if(!Y)return console.warn("Child not found"),e.removeSummary(o),null;const $=xl(Y.id),{offsetLeft:I,offsetTop:R}=je(c,$);H===a&&(_=R),H===s&&(N=R+$.offsetHeight),I<y&&(y=I),$.offsetWidth+I>h&&(h=$.offsetWidth+I)}let C,f;const M=_+10,z=N+10,L=(M+z)/2,A=e.theme.cssVar["--color"];m==="lhs"?(C=On(`M ${y+10} ${M} c -5 0 -10 5 -10 10 L ${y} ${z-10} c 0 5 5 10 10 10 M ${y} ${L} h -10`,A),f=Pn(i,y-20,L+6,"end",A)):(C=On(`M ${h-10} ${M} c 5 0 10 5 10 10 L ${h} ${z-10} c 0 5 -5 10 -10 10 M ${h} ${L} h 10`,A),f=Pn(i,h+20,L+6,"start",A));const P=yl("s-"+o);return P.appendChild(C),P.appendChild(f),P.summaryObj=t,e.summarySvg.appendChild(P),P},_l=function(){let e=[];this.currentNode?e=[this.currentNode]:this.currentNodes&&(e=this.currentNodes);const{parent:t,start:n,end:o}=gl(e),i={id:ht(),parent:t,start:n,end:o,text:"summary"},l=po(this,i);this.summaries.push(i),this.editSummary(l),this.bus.fire("operation",{name:"createSummary",obj:i})},Cl=function(e){var t;const n=this.summaries.findIndex(o=>o.id===e);n>-1&&(this.summaries.splice(n,1),(t=document.querySelector("#s-"+e))==null||t.remove()),this.bus.fire("operation",{name:"removeSummary",obj:{id:e}})},kl=function(e){const t=e.children[1].getBBox(),n=6,o=3,i=document.createElementNS("http://www.w3.org/2000/svg","rect");K(i,{x:t.x-n+"",y:t.y-n+"",width:t.width+n*2+"",height:t.height+n*2+"",rx:o+"",stroke:this.theme.cssVar["--selected"]||"#4dc4ff","stroke-width":"2",fill:"none"}),i.classList.add("selected"),e.appendChild(i),this.currentSummary=e},Nl=function(){var e,t;(t=(e=this.currentSummary)==null?void 0:e.querySelector("rect"))==null||t.remove(),this.currentSummary=null},Ml=function(){this.summarySvg.innerHTML="",this.summaries.forEach(e=>{try{po(this,e)}catch{console.warn("Node may not be expanded")}}),this.nodes.insertAdjacentElement("beforeend",this.summarySvg)},El=function(e){if(console.time("editSummary"),!e)return;const t=e.childNodes[1];Qn(this,t,n=>{var o;const i=e.summaryObj,l=((o=n.textContent)==null?void 0:o.trim())||"";l===""?i.text=origin:i.text=l,n.remove(),l!==origin&&(t.innerHTML=i.text,this.linkDiv(),this.bus.fire("operation",{name:"finishEditSummary",obj:i}))}),console.timeEnd("editSummary")},Sl=Object.freeze(Object.defineProperty({__proto__:null,createSummary:_l,editSummary:El,removeSummary:Cl,renderSummary:Ml,selectSummary:kl,unselectSummary:Nl},Symbol.toStringTag,{value:"Module"})),ue="http://www.w3.org/2000/svg";function Ll(e,t){const n=document.createElementNS(ue,"svg");return K(n,{version:"1.1",xmlns:ue,height:e,width:t}),n}function Tl(e,t){return(parseInt(e)-parseInt(t))/2}function zl(e,t,n,o){const i=document.createElementNS(ue,"g");let l="";return e.text?l=e.text.textContent:l=e.childNodes[0].textContent,l.split(`
`).forEach((a,s)=>{const c=document.createElementNS(ue,"text");K(c,{x:n+parseInt(t.paddingLeft)+"",y:o+parseInt(t.paddingTop)+Tl(t.lineHeight,t.fontSize)*(s+1)+parseFloat(t.fontSize)*(s+1)+"","text-anchor":"start","font-family":t.fontFamily,"font-size":`${t.fontSize}`,"font-weight":`${t.fontWeight}`,fill:`${t.color}`}),c.innerHTML=a,i.appendChild(c)}),i}function jl(e,t,n,o){var i;let l="";(i=e.nodeObj)!=null&&i.dangerouslySetInnerHTML?l=e.nodeObj.dangerouslySetInnerHTML:e.text?l=e.text.textContent:l=e.childNodes[0].textContent;const a=document.createElementNS(ue,"foreignObject");K(a,{x:n+parseInt(t.paddingLeft)+"",y:o+parseInt(t.paddingTop)+"",width:t.width,height:t.height});const s=document.createElement("div");return K(s,{xmlns:"http://www.w3.org/1999/xhtml",style:`font-family: ${t.fontFamily}; font-size: ${t.fontSize}; font-weight: ${t.fontWeight}; color: ${t.color}; white-space: pre-wrap;`}),s.innerHTML=l,a.appendChild(s),a}function Al(e,t){const n=getComputedStyle(t),{offsetLeft:o,offsetTop:i}=je(e.nodes,t),l=document.createElementNS(ue,"rect");return K(l,{x:o+"",y:i+"",rx:n.borderRadius,ry:n.borderRadius,width:n.width,height:n.height,fill:n.backgroundColor,stroke:n.borderColor,"stroke-width":n.borderWidth}),l}function Et(e,t,n=!1){const o=getComputedStyle(t),{offsetLeft:i,offsetTop:l}=je(e.nodes,t),a=document.createElementNS(ue,"rect");K(a,{x:i+"",y:l+"",rx:o.borderRadius,ry:o.borderRadius,width:o.width,height:o.height,fill:o.backgroundColor,stroke:o.borderColor,"stroke-width":o.borderWidth});const s=document.createElementNS(ue,"g");s.appendChild(a);let c;return n?c=jl(t,o,i,l):c=zl(t,o,i,l),s.appendChild(c),s}function Dl(e,t){const n=getComputedStyle(t),{offsetLeft:o,offsetTop:i}=je(e.nodes,t),l=document.createElementNS(ue,"a"),a=document.createElementNS(ue,"text");return K(a,{x:o+"",y:i+parseInt(n.fontSize)+"","text-anchor":"start","font-family":n.fontFamily,"font-size":`${n.fontSize}`,"font-weight":`${n.fontWeight}`,fill:`${n.color}`}),a.innerHTML=t.textContent,l.appendChild(a),l.setAttribute("href",t.href),l}function Il(e,t){const n=getComputedStyle(t),{offsetLeft:o,offsetTop:i}=je(e.nodes,t),l=document.createElementNS(ue,"image");return K(l,{x:o+"",y:i+"",width:n.width+"",height:n.height+"",href:t.src}),l}const St=100,$l='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',Ol=(e,t=!1)=>{var n,o,i;const l=e.nodes,a=l.offsetHeight+St*2,s=l.offsetWidth+St*2,c=Ll(a+"px",s+"px"),p=document.createElementNS(ue,"svg"),m=document.createElementNS(ue,"rect");K(m,{x:"0",y:"0",width:`${s}`,height:`${a}`,fill:e.theme.cssVar["--bgcolor"]}),c.appendChild(m),l.querySelectorAll(".subLines").forEach(N=>{const C=N.cloneNode(!0),{offsetLeft:f,offsetTop:M}=je(l,N.parentElement);C.setAttribute("x",`${f}`),C.setAttribute("y",`${M}`),p.appendChild(C)});const y=(n=l.querySelector(".lines"))==null?void 0:n.cloneNode(!0);y&&p.appendChild(y);const h=(o=l.querySelector(".topiclinks"))==null?void 0:o.cloneNode(!0);h&&p.appendChild(h);const _=(i=l.querySelector(".summary"))==null?void 0:i.cloneNode(!0);return _&&p.appendChild(_),l.querySelectorAll("me-tpc").forEach(N=>{N.nodeObj.dangerouslySetInnerHTML?p.appendChild(Et(e,N,!t)):(p.appendChild(Al(e,N)),p.appendChild(Et(e,N.text,!t)))}),l.querySelectorAll(".tags > span").forEach(N=>{p.appendChild(Et(e,N))}),l.querySelectorAll(".icons > span").forEach(N=>{p.appendChild(Et(e,N))}),l.querySelectorAll(".hyper-link").forEach(N=>{p.appendChild(Dl(e,N))}),l.querySelectorAll("img").forEach(N=>{p.appendChild(Il(e,N))}),K(p,{x:St+"",y:St+"",overflow:"visible"}),c.appendChild(p),c},Pl=(e,t)=>(t&&e.insertAdjacentHTML("afterbegin","<style>"+t+"</style>"),$l+e.outerHTML);function Vl(e){return new Promise((t,n)=>{const o=new FileReader;o.onload=i=>{t(i.target.result)},o.onerror=i=>{n(i)},o.readAsDataURL(e)})}const Hl=function(e=!1,t){const n=Ol(this,e),o=Pl(n,t);return new Blob([o],{type:"image/svg+xml"})},Bl=async function(e=!1,t){const n=this.exportSvg(e,t),o=await Vl(n);return new Promise((i,l)=>{const a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=()=>{const s=document.createElement("canvas");s.width=a.width,s.height=a.height,s.getContext("2d").drawImage(a,0,0),s.toBlob(i,"image/png",1)},a.src=o,a.onerror=l})},Rl=Object.freeze(Object.defineProperty({__proto__:null,exportPng:Bl,exportSvg:Hl},Symbol.toStringTag,{value:"Module"}));function Fl(e,t){return async function(...n){const o=this.before[t];o&&!await o.apply(this,n)||e.apply(this,n)}}const Vn=Object.keys(so),mo={};for(let e=0;e<Vn.length;e++){const t=Vn[e];mo[t]=Fl(so[t],t)}const Yl={getObjById:Tt,generateNewObj:Oi,layout:Hi,linkDiv:Xi,editTopic:Ui,createWrapper:Fi,createParent:Yi,createChildren:qi,createTopic:Wi,findEle:Z,changeTheme:yr,...Br,...mo,...bl,...Sl,...Rl,init(e){if(!e||!e.nodeData)return new Error("MindElixir: `data` is required");e.direction!==void 0&&(this.direction=e.direction),this.changeTheme(e.theme||this.theme,!1),this.nodeData=e.nodeData,ze(this.nodeData),this.arrows=e.arrows||[],this.summaries=e.summaries||[],this.tidyArrow(),this.toolBar&&ur(this),this.keypress&&nr(this),this.editable&&gr(this),Ii()&&this.mobileMenu?or(this):this.contextMenu&&Zi(this,this.contextMenuOption),this.draggable&&lr(this),this.allowUndo&&ar(this),this.toCenter(),this.layout(),this.linkDiv()}};function ql({pT:e,pL:t,pW:n,pH:o,cT:i,cL:l,cW:a,cH:s,direction:c,containerHeight:p}){let m=t+n/2;const y=e+o/2;let h;c==="lhs"?h=l+a:h=l;const _=i+s/2,N=(1-Math.abs(_-y)/p)*.25*(n/2);return c==="lhs"?m=m-n/10-N:m=m+n/10+N,`M ${m} ${y} Q ${m} ${_} ${h} ${_}`}function Wl({pT:e,pL:t,pW:n,pH:o,cT:i,cL:l,cW:a,cH:s,direction:c,isFirst:p}){let m=0,y=0;p?m=e+o/2:m=e+o;const h=i+s;let _=0,N=0,C=0;const f=Math.abs(m-h)/300*Se;return c==="lhs"?(C=t,_=C+Se,N=C-Se,y=l+Se,`M ${_} ${m} C ${C} ${m} ${C+f} ${h} ${N} ${h} H ${y}`):(C=t+n,_=C-Se,N=C+Se,y=l+a-Se,`M ${_} ${m} C ${C} ${m} ${C-f} ${h} ${N} ${h} H ${y}`)}const pt=document;function _e({el:e,direction:t,locale:n,draggable:o,editable:i,contextMenu:l,contextMenuOption:a,toolBar:s,keypress:c,mouseSelectionButton:p,before:m,newTopicName:y,allowUndo:h,generateMainBranch:_,generateSubBranch:N,overflowHidden:C,mobileMenu:f,theme:M}){console.log("ME_version "+_e.version,this);let z=null;const L=Object.prototype.toString.call(e);if(L==="[object HTMLDivElement]"?z=e:L==="[object String]"&&(z=document.querySelector(e)),!z)throw new Error("MindElixir: el is not a valid element");z.className+=" mind-elixir",z.innerHTML="",z.style.setProperty("--gap",Se+"px"),this.mindElixirBox=z,this.before=m||{},this.locale=n||"en",this.contextMenuOption=a,this.contextMenu=l===void 0?!0:l,this.toolBar=s===void 0?!0:s,this.keypress=c===void 0?!0:c,this.mouseSelectionButton=p||0,this.mobileMenu=f||!1,this.direction=typeof t=="number"?t:1,this.draggable=o===void 0?!0:o,this.newTopicName=y||"new node",this.editable=i===void 0?!0:i,this.allowUndo=h===void 0?!1:h,this.currentNode=null,this.currentArrow=null,this.scaleVal=1,this.tempDirection=null,this.generateMainBranch=_||ql,this.generateSubBranch=N||Wl,this.overflowHidden=C||!1,this.bus=Vi.create(),this.container=pt.createElement("div"),this.container.className="map-container";const A=window.matchMedia("(prefers-color-scheme: dark)");this.theme=M||(A.matches?Un:Wn);const P=pt.createElement("div");P.className="map-canvas",this.map=P,this.map.setAttribute("tabindex","0"),this.container.appendChild(this.map),this.mindElixirBox.appendChild(this.container),this.nodes=pt.createElement("me-nodes"),this.nodes.className="main-node-container",this.lines=mt("lines"),this.summarySvg=mt("summary"),this.linkController=mt("linkcontroller"),this.P2=pt.createElement("div"),this.P3=pt.createElement("div"),this.P2.className=this.P3.className="circle",this.P2.style.display=this.P3.style.display="none",this.line1=Nn(),this.line2=Nn(),this.linkController.appendChild(this.line1),this.linkController.appendChild(this.line2),this.linkSvgGroup=mt("topiclinks"),this.map.appendChild(this.nodes),this.overflowHidden?this.container.style.overflow="hidden":Pi(this)}_e.prototype=Yl;_e.LEFT=we;_e.RIGHT=He;_e.SIDE=$t;_e.THEME=Wn;_e.DARK_THEME=Un;_e.version="4.0.0";_e.E=Z;_e.new=e=>({nodeData:{id:ht(),topic:e||"new topic",root:!0,children:[]}});const Ul={key:1,class:"truncate text-text-secondary opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-2 text-xs font-medium"},Kl={key:1,class:"relative w-full h-full"},Xl=["placeholder"],Zl={class:"max-h-50 overflow-y-auto"},Ql=["onMousedown"],Gl={key:1,class:"px-3 py-2 text-center text-text-secondary text-sm"},Hn=At({__name:"TableSearchCell",props:{modelValue:{},options:{default:()=>[]},placeholder:{default:"Type to search..."},disabled:{type:Boolean,default:!1},displayField:{},emptyText:{},columnName:{default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=e,o=t,i={High:"#F87171",Medium:"#FBBF24",Low:"#34D399"},l=G(()=>{if(n.columnName.toLowerCase()!=="priority")return"transparent";const S=L.value;return i[S]??"#E5E7EB"}),a=S=>n.columnName.toLowerCase()!=="priority"?"transparent":i[S]??"#E5E7EB",s=D(!1),c=D(!1),p=D(""),m=D(null),y=D(null),h=D(null),_=D({top:"0px",left:"0px",width:"100%"}),N=D(!1),C=()=>{if(!m.value||!h.value)return;const S=m.value.getBoundingClientRect(),b=h.value.offsetHeight||200,E=window.innerHeight-S.bottom;let pe=S.bottom+window.scrollY+6;E<b&&S.top>b&&(pe=S.top+window.scrollY-b-5),_.value={top:`${pe}px`,left:`${S.left+window.scrollX}px`,width:`${S.width}px`}};ye(()=>n.modelValue,S=>{L.value=S});const f=S=>typeof S=="string"?S:String(S.title??S.label??S.value??""),M=G(()=>{if(!L.value)return"";const S=n.options.find(b=>{var x,E;return typeof b=="string"?b===L.value:typeof L.value!="object"?b._id==L.value||b.value==L.value:b._id==((x=L.value)==null?void 0:x._id)||b.value==((E=L.value)==null?void 0:E.value)});return S?f(S):""}),z=G(()=>(n.options??[]).map(S=>typeof S=="string"?{value:S,label:S}:S));ye(()=>n.modelValue,S=>{const b=z.value.find(x=>x._id==S||x.value==S);p.value=b?f(b):""},{immediate:!0});const L=D(n.modelValue),A=G(()=>{if(!p.value||p.value===M.value)return z.value;const S=p.value.toLowerCase();return z.value.filter(b=>f(b).toLowerCase().includes(S))}),P=async()=>{var S,b;n.disabled||(s.value=!0,p.value=M.value,c.value=!0,await It(),(S=m.value)==null||S.focus(),(b=m.value)==null||b.select(),C(),window.addEventListener("scroll",C,!0),window.addEventListener("resize",C))},H=()=>{s.value=!1,c.value=!1,p.value="",window.removeEventListener("scroll",C,!0),window.removeEventListener("resize",C)},Y=S=>{let b;typeof S=="string"?b=S:b=S._id??S.value??S.title,L.value=b,o("update:modelValue",b),o("change",b),H()},$=()=>{if(A.value.length>0){const S=A.value.find(b=>f(b).toLowerCase()===p.value.toLowerCase());if(S){Y(S);return}}o("update:modelValue",p.value),o("change",p.value),H()},I=()=>{setTimeout(()=>{if(N.value){N.value=!1;return}s.value&&$()},150)},R=S=>{y.value&&!y.value.contains(S.target)&&h.value&&!h.value.contains(S.target)&&s.value&&$()};return Bn(()=>{document.addEventListener("mousedown",R)}),Rn(()=>{document.removeEventListener("mousedown",R),window.removeEventListener("scroll",C,!0),window.removeEventListener("resize",C)}),(S,b)=>(T(),j("div",{class:"relative w-full h-full",ref_key:"containerRef",ref:y,onClick:b[2]||(b[2]=xe(()=>{},["stop"]))},[s.value?(T(),j("div",Kl,[et(u("input",{ref_key:"inputRef",ref:m,"onUpdate:modelValue":b[0]||(b[0]=x=>p.value=x),onBlur:I,onKeydown:[ot($,["enter"]),ot(H,["esc"])],onInput:b[1]||(b[1]=x=>c.value=!0),class:"absolute left-0 top-1/2 -translate-y-1/2 min-w-[150px] w-full p-1 border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-bg-body z-50 text-[12px] h-8",placeholder:S.placeholder},null,40,Xl),[[Dt,p.value]]),(T(),Le(Fn,{to:"body"},[c.value?(T(),j("div",{key:0,ref_key:"dropdownRef",ref:h,class:"fixed z-[9999] bg-bg-dropdown border border-border rounded-md shadow-lg py-2",style:ce(_.value)},[u("div",Zl,[A.value.length>0?(T(!0),j(se,{key:0},Ne(A.value,x=>(T(),j("div",{key:x._id??x.value,onMousedown:xe(E=>Y(x),["prevent"]),class:"px-3 py-1.5 capitalize font-medium cursor-pointer hover:bg-bg-dropdown-menu-hover text-[12px] text-text-primary flex items-center gap-2"},[Kt(S.$slots,"option",{option:x},()=>{var E;return[u("span",{style:ce(((E=S.columnName)==null?void 0:E.toLowerCase())==="priority"?{backgroundColor:a(f(x)),color:"white",padding:"2px 8px",borderRadius:"10px"}:{})},oe(f(x)),5)]})],40,Ql))),128)):(T(),j("div",Gl," No match found "))])],4)):X("",!0)]))])):(T(),j("div",{key:0,onClick:P,class:Ve(["h-full flex items-center px-3 py-1.5 cursor-pointer hover:bg-bg-surface-hover rounded-md truncate transition-all duration-200 group",{"opacity-50 cursor-not-allowed":S.disabled}])},[Kt(S.$slots,"display",{},()=>{var x;return[M.value?(T(),j("span",{key:0,class:"truncate font-normal text-[12px] text-text-primary",style:ce(((x=S.columnName)==null?void 0:x.toLowerCase())==="priority"?{backgroundColor:l.value,color:"white",padding:"2px 8px",borderRadius:"10px",fontSize:"10px"}:{})},oe(M.value),5)):S.emptyText&&!S.disabled?(T(),j("span",Ul,[b[3]||(b[3]=u("i",{class:"fa-solid fa-plus text-[10px]"},null,-1)),Te(" Add "+oe(S.emptyText),1)])):X("",!0)]})],2))],512))}}),Jl={key:0,class:"flex gap-2 items-center truncate"},es=["src"],ts={key:2,class:"w-6 h-6 bg-bg-body border border-border rounded-full flex justify-center items-center flex-shrink-0"},ns={class:"text-[11px] text-text-primary truncate"},os={key:1,class:"truncate text-text-secondary opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1.5 text-xs"},is={key:1,class:"relative w-full"},rs={class:"max-h-60 overflow-y-auto"},ls=["onMousedown"],ss=["src"],as={key:2,class:"w-6 h-6 bg-bg-body border border-border rounded-full flex justify-center items-center flex-shrink-0"},ds={class:"min-w-0"},cs={class:"text-xs font-medium truncate"},us={class:"text-[10px] text-text-secondary truncate"},ps={key:1,class:"px-4 py-3 text-center text-sm text-text-secondary"},ms=At({__name:"TableAssigneeCell",props:{assigneeId:{},disabled:{type:Boolean},seat:{},workspaceId:{},name:{},emptyText:{}},emits:["update:modelValue","assign","unassign"],setup(e,{emit:t}){const n=e,o=t,{canAssignCard:i}=Yn(),{workspaceId:l}=qn(),{data:a}=Fo((n==null?void 0:n.workspaceId)??l.value),s=D(n.assigneeId??n.seat),c=D(!1),p=D(!1),m=D(""),y=D(null),h=D(null),_=D(null),N=D({top:"0px",left:"0px",width:"100%"}),C=G(()=>[{_id:null,name:"Unassign",email:""},...a.value||[]]),f=G(()=>{const $=m.value.trim().toLowerCase(),I=C.value;return $?I.filter(R=>(R.title||R.name||"").toLowerCase().includes($)||(R.email||"").toLowerCase().includes($)):I}),M=()=>{if(!y.value||!_.value)return;const $=y.value.getBoundingClientRect(),I=_.value.offsetHeight||200,S=window.innerHeight-$.bottom;let x=$.bottom+window.scrollY+6;S<I&&$.top>I&&(x=$.top+window.scrollY-I-5),N.value={top:`${x}px`,left:`${$.left+window.scrollX}px`,width:`${$.width}px`}},z=async()=>{var I,R,S,b,x;if(n.disabled||!i.value)return;c.value=!0,p.value=!0;const $=((I=s.value)==null?void 0:I.name)||((R=s.value)==null?void 0:R.title)||((S=s.value)==null?void 0:S.u_full_name);m.value=$||"",await It(),(b=y.value)==null||b.focus(),(x=y.value)==null||x.select(),M(),window.addEventListener("scroll",M,!0),window.addEventListener("resize",M)},L=()=>{c.value=!1,p.value=!1,m.value="",window.removeEventListener("scroll",M,!0),window.removeEventListener("resize",M)},A=$=>{const I=C.value.find(R=>R._id===$);I?(s.value=I,o("assign",I),o("update:modelValue",$)):$==null&&(s.value=null,o("unassign"),o("update:modelValue",null)),L()},P=()=>{f.value.length>0?A(f.value[0]._id):L()},H=()=>{setTimeout(()=>{c.value&&L()},150)},Y=$=>{h.value&&!h.value.contains($.target)&&_.value&&!_.value.contains($.target)&&c.value&&L()};return Bn(()=>{document.addEventListener("mousedown",Y)}),Rn(()=>{document.removeEventListener("mousedown",Y),window.removeEventListener("scroll",M,!0),window.removeEventListener("resize",M)}),ye(()=>n.seat,$=>{s.value=$}),($,I)=>{var R,S,b,x,E,Q,pe,B,Ae,ie,ft,vt,bt,gt,yt,xt,Re,wt,_t,De,Ie,rt,Fe,te,fe,Ct;return T(),j("div",{class:"relative w-full h-full",ref_key:"containerRef",ref:h,onClick:I[3]||(I[3]=xe(()=>{},["stop"]))},[c.value?(T(),j("div",is,[et(u("input",{ref_key:"inputRef",ref:y,"onUpdate:modelValue":I[0]||(I[0]=q=>m.value=q),onBlur:H,onKeydown:[ot(P,["enter"]),ot(L,["esc"])],onInput:I[1]||(I[1]=q=>p.value=!0),class:"absolute left-0 top-1/2 h-8 -translate-y-1/2 min-w-[200px] w-full p-1 border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-bg-body z-50 text-[12px]",placeholder:"Search people..."},null,544),[[Dt,m.value]]),(T(),Le(Fn,{to:"body"},[p.value?(T(),j("div",{key:0,ref_key:"dropdownRef",ref:_,class:"fixed z-[9999] bg-bg-dropdown border border-border rounded-md shadow-lg",style:ce(N.value),onMousedown:I[2]||(I[2]=xe(()=>{},["prevent"]))},[u("div",rs,[f.value.length>0?(T(!0),j(se,{key:0},Ne(f.value,q=>{var Ye;return T(),j("div",{key:q._id,onMousedown:xe(Vt=>A(q._id),["prevent"]),class:"px-3 py-2 cursor-pointer hover:bg-bg-dropdown-menu-hover text-[12px] text-text-primary flex items-center gap-3"},[(Ye=q==null?void 0:q.user)!=null&&Ye.avatar?(T(),j("img",{key:0,src:q.user.avatar,class:"w-6 h-6 rounded-full object-cover flex-shrink-0",alt:""},null,8,ss)):q.name?(T(),j("div",{key:1,class:"w-6 h-6 border border-border rounded-full text-xs font-semibold flex items-center justify-center flex-shrink-0",style:ce({backgroundColor:q!=null&&q.email?V(Xt)({name:q.name,email:q.email,_id:q._id}):""})},oe(V(Zt)(q.name)),5)):(T(),j("div",as,I[6]||(I[6]=[u("i",{class:"fa-regular fa-user text-xs"},null,-1)]))),u("div",ds,[u("div",cs,oe(q.name||q.title),1),u("div",us,oe(q.role_title),1)])],40,ls)}),128)):(T(),j("div",ps," No match found "))])],36)):X("",!0)]))])):(T(),j("div",{key:0,onClick:z,class:Ve(["w-full h-full flex items-center px-3 py-1.5 cursor-pointer hover:bg-bg-surface-hover rounded-md truncate transition-all duration-200 min-h-[36px] group",{"opacity-50 cursor-not-allowed":$.disabled}])},[(S=(R=s.value)==null?void 0:R.user)!=null&&S.avatar||(b=s.value)!=null&&b._id||(x=$.seat)!=null&&x._id?(T(),j("div",Jl,[(Q=(E=s.value)==null?void 0:E.avatar)!=null&&Q.src||(B=(pe=s.value)==null?void 0:pe.user)!=null&&B.avatar||(Ae=s.value)!=null&&Ae.u_profile_image?(T(),j("img",{key:0,src:((ft=(ie=s.value)==null?void 0:ie.avatar)==null?void 0:ft.src)??((vt=s.value)==null?void 0:vt.u_profile_image)??((gt=(bt=s.value)==null?void 0:bt.user)==null?void 0:gt.avatar),class:"w-5 h-5 object-cover rounded-full flex-shrink-0",alt:""},null,8,es)):(yt=s.value)!=null&&yt.u_full_name||(xt=s.value)!=null&&xt.name?(T(),j("div",{key:1,class:"w-5 h-5 aspect-square rounded-full text-[11px] bg-bg-surface text-text-primary flex items-center justify-center flex-shrink-0",style:ce({backgroundColor:((Re=s.value)==null?void 0:Re.u_full_name)??((wt=s.value)==null?void 0:wt.title)?V(Xt)({name:((_t=s.value)==null?void 0:_t.u_full_name)??((De=s.value)==null?void 0:De.title),_id:(Ie=s.value)==null?void 0:Ie._id}):""})},oe(V(Zt)(((rt=s.value)==null?void 0:rt.u_full_name)??((Fe=s.value)==null?void 0:Fe.name))),5)):(T(),j("div",ts,I[4]||(I[4]=[u("i",{class:"fa-regular fa-user text-xs"},null,-1)]))),u("span",ns,oe((((te=s.value)==null?void 0:te.name)||((fe=s.value)==null?void 0:fe.title)||((Ct=s.value)==null?void 0:Ct.u_full_name))??"Unassigned"),1)])):(T(),j("span",os,[I[5]||(I[5]=u("i",{class:"fa-solid fa-plus text-[10px]"},null,-1)),Te(" Add "+oe($.emptyText||"Assignee"),1)]))],2))],512)}}}),hs={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-[6px] shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex-col flex scrollbar-visible"},fs={class:"overflow-x-auto shrink-0"},vs={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1 min-w-max h-full"},bs={class:"flex gap-3 items-center"},gs={class:"flex items-center gap-3 bg-bg-surface/50 h-[32px] px-2 rounded-md"},ys={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible h-full"},xs={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},ws={key:0,class:"bg-bg-body rounded-lg p-4"},_s={class:"flex items-center mt-3 gap-3"},Cs=["disabled"],ks={class:"relative w-full h-full flex overflow-hidden"},Ns={key:0,class:"format-sidebar h-full py-4 px-4 w-[320px] border-l bg-white overflow-hidden flex flex-col"},Ms={class:"format-content space-y-6"},Es={class:"format-group relative mb-3"},Ss={class:"text-xs text-gray-500"},Ls={key:0,class:"absolute z-50 mt-2 p-3 bg-white rounded-lg shadow-lg border w-[240px]"},Ts={class:"grid grid-cols-10 gap-1 mb-3"},zs=["onClick"],js={class:"flex items-center gap-2"},As=["value"],Ds=["value"],Is={class:"format-group relative mb-3"},$s={class:"text-xs text-gray-500"},Os={key:0,class:"absolute z-50 mt-2 p-3 bg-white rounded-lg shadow-lg border w-[240px]"},Ps={class:"grid grid-cols-10 gap-1 mb-3"},Vs=["onClick"],Hs={class:"flex items-center gap-2"},Bs=["value"],Rs=["value"],Fs={class:"grid grid-cols-2 gap-3"},Ys=["value"],qs=["value"],Ws={class:"mt-3"},Us=["value"],Ks={class:"mt-3"},Xs=["value"],Zs={class:"grid grid-cols-2 gap-3"},Qs=["value"],Gs=["value"],Js={class:"grid grid-cols-2 gap-3 mt-3"},ea=["value"],ta=["value"],na={class:"mt-6 pt-4 border-t"},oa=["disabled"],ia={key:0,class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},ra={key:0,class:"fixed inset-0 bg-black/30 flex items-center justify-center"},la={class:"bg-white p-6 rounded-xl w-80"},sa={class:"flex justify-end gap-2 mt-4"},aa=["disabled"],da={class:"flex items-center mt-3 gap-3"},ca=At({__name:"Product",setup(e){const{canEditSheet:t,canDeleteSheet:n,canCreateVariable:o,canCreateSheet:i,canCreateCard:l,canEditCard:a,canAssignCard:s}=Yn(),c=D(!1),p=D(null),m=D(!1),y=D(null),h=D(!1),_=D("kanban"),N=D(null),C=D(null),f=D(!1),M=li(),{workspaceId:z,moduleId:L}=qn(),A=Yo(),P=D(!1),H=D(),Y=D(null),$=D(!0),I=D(!1),R=D(""),S=D(null);function b(d){R.value="",I.value=!0,S.value=d}function x(){S.value&&S.value(R.value),I.value=!1}function E(){I.value=!1}const Q=D(null),pe=d=>{Q.value=d},B=D(!1),Ae=["#FFFFFF","#F2F2F2","#D9D9D9","#BFBFBF","#A6A6A6","#808080","#404040","#000000","#FFE066","#FF9AA2","#8EE4AF","#00EAD3","#90DBF4","#4D96FF","#6C63FF","#C77DFF","#F7A1C4","#FFC300","#FF5733","#2ECC71","#00B894","#17A2B8","#0984E3","#3F51B5","#9C27B0","#E84393","#FF8C00","#E74C3C","#1E8449","#006D6F","#004C6D","#0057A8","#1A237E","#4A148C","#7D3C98"],ie=D(!1);ye(B,d=>{d&&(ie.value=!1)}),ye(ie,d=>{d&&(B.value=!1)});const ft=async()=>{if(y.value)try{h.value=!0,await ai({url:`workspace/card/${y.value}`,method:"DELETE"}),bt(y.value),await Ie(),m.value=!1,p.value=null,wn.success("Ticket deleted successfully")}catch(d){wn.error(di(d))}finally{h.value=!1}},vt=async()=>{await ft()},bt=d=>{var r,v;(v=(r=J.value)==null?void 0:r.sheets)==null||v.forEach(g=>{var w;(w=g.sheet_lists)==null||w.forEach(W=>{W.cards=W.cards.filter(O=>O._id!==d)})})},gt=Xe(()=>Ze(()=>import("./CreateTaskModal-BVlvtfv7.js"),__vite__mapDeps([0,1,2,3]))),yt=Xe(()=>Ze(()=>import("./CreateSheetModal-D18h4ivx.js"),__vite__mapDeps([4,2,3,5,6,7,8]))),xt=Xe(()=>Ze(()=>import("./CreateVariableModal-CLAq1N6y.js"),__vite__mapDeps([9,2,3]))),Re=Xe(()=>Ze(()=>import("./ConfirmDeleteModal-BMXtnf2h.js"),__vite__mapDeps([10,11,2,3]))),wt=Xe(()=>Ze(()=>import("./SidePanel-D3WfNYCN.js"),__vite__mapDeps([12,2,3,13]))),_t=Xe(()=>Ze(()=>import("./KanbanBoard-DYBHuyy-.js"),__vite__mapDeps([14,15,2,3,16,11,17]))),{data:De,refetch:Ie,isPending:rt}=qo({workspace_id:z,workspace_module_id:L}),Fe=G(()=>{var d;return De.value?(d=De.value[0])==null?void 0:d._id:""}),te=D(Fe.value),{data:fe,isPending:Ct}=Wo(z.value,L.value,te),{mutate:q,isPending:Ye}=Uo({onSuccess:()=>{A.invalidateQueries({queryKey:["sheet-list"]}),qe.value="",We.value=!1,at.value=!1,We.value=!1}}),Vt=d=>{q({workspace_id:z.value,module_id:L.value,variable_id:me.value,value:d})};ye(Fe,()=>{te.value=Fe.value});const Ht=G(()=>{var d;return fe!=null&&fe.value?(d=fe==null?void 0:fe.value[0])==null?void 0:d._id:""}),me=D(Ht.value);ye(Ht,()=>{me.value=Ht.value});const kt=Ko(),{data:J,isPending:Bt,refetch:sn}=Xo(L,te,G(()=>[...kt.selectedLaneIds]),me),lt=d=>{d._id||(d._id=d.id),H.value=d};window.selectCardHandler=lt;const st=D(!1),ho=()=>{Oe.value={},st.value=!st.value},fo=Zo(),vo=Qo();function bo(d){d.type==="column"?fo.mutate({payload:{workspace_id:z.value,workspace_module_id:L.value,variable_id:me.value,moved_value:d.meta.id,new_index:d.meta.newIndex}},{onSuccess:()=>{Ie()}}):vo.mutate({payload:{workspace_id:z.value,card_id:d.meta.moved._id,group_value:d.meta.fromColumnId,group_variable_id:me.value,new_index:d.meta.newIndex,sheet_id:te.value}},{onSuccess:()=>{Ie()}})}const go=d=>{},yo=G(()=>(De.value||[]).map(d=>({_id:d._id,title:d==null?void 0:d.variables["sheet-title"],description:d==null?void 0:d.variables["sheet-description"],icon:d.icon,status:d==null?void 0:d.generation_status})));ye(De,d=>{var r;(d==null?void 0:d.length)>0&&(te.value=(r=d[0])==null?void 0:r._id)});const at=D(!1),qe=D("");function Rt(){at.value=!at.value}function Nt(){const d=qe.value.trim();d&&Vt(d)}const xo=d=>{q({workspace_id:M.params.id,module_id:M.params.module_id,new_value:d.title,value:d.oldTitle,variable_id:me.value})},We=D(!1),$e=D(),wo=()=>{q({value:$e.value.title,workspace_id:z.value,module_id:L.value,newValue:$e.value.title,variable_id:me.value,is_trash:!0})},_o=d=>{We.value=!0,$e.value=d},Co=d=>{P.value=!0,$e.value=d},Oe=D();function ko(d){c.value=!0,Oe.value=d}const{mutate:an,isPending:No}=Go({onSuccess:()=>{Ie(),c.value=!1}});function Mo(){var d;an({sheet_id:(d=Oe.value)==null?void 0:d._id,workspace_module_id:L.value,is_trash:!0})}function Eo(d){st.value=!0,Oe.value=d}const dt=D(""),So=D("");ye(dt,fi.debounce(d=>{So.value=d},200));const Lo=G(()=>{const d=J.value.flatMap(r=>r.cards.map(v=>({...v,columnId:r.title})));return new kn(d,{keys:["card-title","card-description"],threshold:.3})}),dn=G(()=>{var d;if(_.value==="kanban"){if(!dt.value)return J.value;const r=Lo.value.search(dt.value).map(v=>v.item);return J.value.map(v=>({...v,cards:r.filter(g=>g.columnId===v.title)}))}else{const r=(d=dt.value)==null?void 0:d.trim();if(!r){let g=[];return(J.value??[]).forEach(w=>{g=[...g,...w==null?void 0:w.cards]}),g}return new kn(jo.value,{keys:["card-title","card-description"],threshold:.3}).search(r).map(g=>g.item)}}),{data:Ft}=Jo(z),cn=G(()=>((Ft==null?void 0:Ft.value)??[]).map(d=>{var r;return{_id:d._id,title:((r=d==null?void 0:d.variables)==null?void 0:r["lane-title"])??String(d._id)}})),To=G(()=>{var d;return[{key:"card-title",label:"Title",render:({row:r,value:v})=>le("div",{class:"flex items-center gap-1 w-full"},[le("a",{onClick:()=>H.value=r,class:"text-[12px] underline text-blue-500 shrink-0 overflow-ellipsis cursor-pointer"},r["card-code"]),le("div",{class:"flex-1 min-w-0"},[le("input",{onFocusout:g=>{var w;un(r==null?void 0:r._id,"card-title",(w=g==null?void 0:g.target)==null?void 0:w.value)},class:"text-[12px] w-full overflow-ellipsis capitalize p-1 w-full p-1 focus:border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-transparent focus:bg-bg-body text-[12px] h-8",defaultValue:v,disabled:!a.value})])])},{key:"end-date",label:"Due Date",render:({row:r,value:v})=>{const g=D(v);return le(ci,{class:" capitalize flex items-center gap-2 text-[12px]",placeholder:"Set start date",tableInputClass:!0,modelValue:g.value,disabled:!a.value,"onUpdate:modelValue":w=>Io(r==null?void 0:r._id,w),emptyText:"Date"})}},{key:"lane",label:"Lane",render:({row:r})=>{var v;return le(Hn,{options:cn.value??[],placeholder:"Select lane",modelValue:((v=r.lane)==null?void 0:v._id)||null,disabled:!a.value,"onUpdate:modelValue":g=>$o(r==null?void 0:r._id,g),displayField:"title",emptyText:"Lane"})}},{key:"created_by",label:"Owner",render:({value:r})=>le("div",{class:"capitalize flex items-center gap-2  px-3"},[le("div",{class:" rounded-full  "},[r!=null&&r.u_profile_image?le("img",{class:"w-6 h-6 rounded-full",src:r==null?void 0:r.u_profile_image}):le("div",{class:"w-5 h-5 rounded-full flex justify-center items-center text-[11px] ",style:`background:${r!=null&&r.u_full_name?Xt({name:r.u_full_name,email:r.u_email}):""}`},Zt(r==null?void 0:r.u_full_name))]),le("span",{class:"text-[12px]"},r?r==null?void 0:r.u_full_name:"")])},{key:"seat",label:"Assignee",render:({row:r,value:v})=>le(ms,{class:"capitalize flex items-center gap-2 ",onAssign:g=>zo(r==null?void 0:r._id,g),assigneeId:v,seat:v,name:!0,disabled:!s.value,emptyText:"Assignee"})},...((d=fe.value)==null?void 0:d.filter(r=>{var v;return((v=r==null?void 0:r.type)==null?void 0:v.title)==="Select"}).map(r=>({key:r==null?void 0:r.slug,label:r==null?void 0:r.slug,render:({row:v,value:g})=>{var W;let w=g;if(Array.isArray(v==null?void 0:v.variables)){const O=v.variables.find(F=>F.slug===r.slug);O&&(w=O.value)}else w=((W=v==null?void 0:v.variables)==null?void 0:W[r.slug])??(v==null?void 0:v[r.slug])??g;return le("div",{class:"capitalize flex items-center gap-2"},[le(Hn,{options:Ao(r.data??[]),modelValue:w,disabled:!a.value,emptyText:r.slug,"onUpdate:modelValue":O=>{un(v==null?void 0:v._id,r.slug,O)},columnName:r.slug})])},visible:r==null?void 0:r.is_visible})))??[]]}),zo=(d,r)=>{Yt(d,v=>{v.seat=r}),ct.mutate({card_id:d,seat_id:r==null?void 0:r._id})},jo=G(()=>{let d=[];return(J.value??[]).forEach(r=>{d=[...d,...r==null?void 0:r.cards]}),d}),Ao=d=>d.map(r=>({_id:r.value??r,title:r.value??r})),ct=ei({onSuccess:()=>{A.invalidateQueries({queryKey:["get-sheets"]}),A.invalidateQueries({queryKey:["sheet-list"]}),A.invalidateQueries({queryKey:["roles"]})}}),Yt=(d,r)=>{if(!J.value)return;const v=J.value.findIndex(g=>g.cards.some(w=>w._id===d));if(v!==-1){const g=J.value[v].cards.findIndex(w=>w._id===d);if(g!==-1){const w={...J.value[v].cards[g]};r(w),J.value[v].cards[g]=w,_n(J)}}},{mutate:qt}=ti({onSuccess:()=>{}});function un(d,r,v){Yt(d,g=>{if(r==="card-title"&&(g[r]=v),Array.isArray(g.variables)){const w=g.variables.find(W=>W.slug===r);w?w.value=v:g.variables.push({slug:r,value:v,type:"Select"})}else g.variables&&typeof g.variables=="object"?g.variables[r]=v:g[r]=v}),ct.mutate({card_id:d,variables:{[r]:v.trim()}})}function Do(d){if(d["card-title"]){const r={sheet_list_id:"To Do",workspace_id:z.value,sheet_id:te.value,variables:{"card-title":d["card-title"].trim()},createdAt:new Date().toISOString()};qt(r)}}const Io=(d,r)=>{const v=J.value.findIndex(g=>g.cards.some(w=>w._id===d));if(v!==-1){const g=J.value[v].cards.findIndex(w=>w._id===d);g!==-1&&(J.value[v].cards[g]["end-date"]=r)}ct.mutate({card_id:d,variables:{"start-date":r}})};function $o(d,r){Yt(d,v=>{const g=cn.value.find(w=>w._id===r);g&&(v.lane=g)}),_n(J),ct.mutate({card_id:d,workspace_lane_id:r})}const{mutate:Oo}=ni(),Po=(d,r)=>{Oo({payload:{sheet_id:te.value,workspace_id:z.value,variable_slug:d,is_visible:r}})},ne=G(()=>{var d,r;return(r=(d=Y.value)==null?void 0:d.nodeObj)!=null&&r.style?Y.value.nodeObj.style:Wt(ve)});function Ce(d,r,v){return d!==void 0?d:r!==void 0?r:v}function he(d,r){var O;if(!((O=Y.value)!=null&&O.nodeObj))return;const v=Y.value.nodeObj;v.style||(v.style={});const g=r.target,w=g.type==="number"?Number(g.value):g.value;switch(d){case"bg_color":v.style.background=w;break;case"color":v.style.color=w;break;case"font_size":v.style.fontSize=`${w}px`;break;case"font_weight":v.style.fontWeight=w;break;case"font_style":v.style.fontStyle=w;break;case"font_family":v.style.fontFamily=w;break;case"border_color":v.style.borderColor=w;break;case"border_width":v.style.borderWidth=`${w}px`;break;case"border_radius":v.style.borderRadius=`${w}px`;break;case"padding":v.style.padding=`${w}px`;break}const W=document.getElementById(v.id);W&&mn(v,W)}const ve={bg_color:"#ffffff",color:"#000000",font_size:14,font_weight:"normal",font_style:"normal",font_family:"Inter",border_color:"#cccccc",border_width:0,border_radius:0,padding:0},Ue=D(!1);async function pn(){var r;const d=(r=Y.value)==null?void 0:r.nodeObj;if(!(!d||Ue.value)){Ue.value=!0;try{const v=si(d);v._originalStyle||(v._originalStyle={});const g=v.style||{},w=v._originalStyle,W={bg_color:Ce(g.background,w.bg_color,ve.bg_color),color:Ce(g.color,w.color,ve.color),font_size:Ce(g.fontSize?parseInt(g.fontSize):void 0,w.font_size,ve.font_size),font_weight:Ce(g.fontWeight,w.font_weight,ve.font_weight),font_style:Ce(g.fontStyle,w.font_style,ve.font_style),font_family:Ce(g.fontFamily,w.font_family,ve.font_family),border_color:Ce(g.borderColor,w.border_color,ve.border_color),border_width:Ce(g.borderWidth?parseInt(g.borderWidth):void 0,w.border_width,ve.border_width),border_radius:Ce(g.borderRadius?parseInt(g.borderRadius):void 0,w.border_radius,ve.border_radius),padding:Ce(g.padding?parseInt(g.padding):void 0,w.padding,ve.padding),hyperLink:R.value||v.hyperLink||""};v._originalStyle={...W};const O=v.unique_name==="sheet"?{sheet_id:v.id,workspace_id:z.value,workspace_module_id:L.value,style:W}:{card_id:v.id,seat_id:v.seat_id,style:W};v.unique_name==="sheet"?await an(O):await ct.mutateAsync(O)}finally{Ue.value=!1}}}const Vo=D([]);function Ho(d){const r={id:"root",topic:localStorage.getItem("currentName")??"",isRoot:!0,children:[],style:{},_originalStyle:{},unique_name:"root"};if(!Array.isArray(d))return r;const v={};return d.forEach(g=>{var F,ee;const w=((F=g.variables)==null?void 0:F["sheet-title"])||"Untitled",W=((ee=g.style)==null?void 0:ee.hyperLink)||"";v[w]||(v[w]={id:g._id,topic:w,variables:g==null?void 0:g.variables,children:[],style:g==null?void 0:g.style,_originalStyle:(g==null?void 0:g.style)||{},unique_name:"sheet",hyperLink:W||""},r.children.push(v[w]));const O={id:g==null?void 0:g._id,topic:g.title,children:[],style:Wt(g==null?void 0:g.style),_originalStyle:g.style||{},unique_name:"List",hyperLink:W||""};(g.cards||[]).forEach((re,ke)=>{var ut;const k=((ut=re.style)==null?void 0:ut.hyperLink)||"",be={id:re._id||`card-${ke}`,seat_id:re.seat_id,topic:re["card-title"],style:Wt(re.style),_originalStyle:re.style||{},children:[],unique_name:"card",hyperLink:k||""};O.children.push(be),Vo.value=be}),v[w].children.push(O)}),r}const{mutateAsync:Bo}=oi({onSuccess:()=>{A.invalidateQueries({queryKey:["sheets"]}),A.invalidateQueries({queryKey:["sheet-list"]}),close()}});ii(()=>{_.value!=="mindmap"||!N.value||!J.value||It(()=>{var w,W;const d=Ho(J.value);C.value&&((W=(w=C.value).destroy)==null||W.call(w),C.value=null);const r=new _e({el:N.value,theme:void 0,draggable:!0,contextMenu:!0,contextMenuOption:{Update:!0,extend:[{name:"Update Node",onclick:()=>{var F;$.value&&($.value=!1);const O=(F=Y.value)==null?void 0:F.nodeObj;O&&lt(O)}},{name:"Add Hyperlink",onclick:()=>{b(async()=>{await pn()})}}]}});C.value=r,r.init({nodeData:d}),r.bus.addListener("selectNode",O=>{O&&(Y.value={nodeObj:O},$.value=!0)}),r.bus.addListener("renderNode",O=>{!(O!=null&&O.nodeObj)||!(O!=null&&O.element)||mn(O.nodeObj,O.element)});const v=new Set;r.bus.addListener("operation",async O=>{var re,ke,k;if(!O||O.name!=="insertSibling"&&O.name!=="addChild")return;const F=O.obj;if(!F||!F.id||v.has(F.id))return;v.add(F.id);let ee;if(O.name==="addChild"?ee=(re=r.currentNode)==null?void 0:re.nodeObj:ee=(k=(ke=r.currentNode)==null?void 0:ke.nodeObj)==null?void 0:k.parent,!(!ee||!("unique_name"in ee))&&ee.unique_name==="List")try{const be=hn({topic:F.topic??"New Card",id:F.id},ee);await qt(be),await sn()}catch(be){console.error("Error creating card or refetching sheets:",be)}});const g=new Set;r.bus.addListener("operation",async O=>{var re,ke;if(!O)return;const F=O.obj;if(!(F!=null&&F.id))return;const ee=F.parent??((ke=(re=r.currentNode)==null?void 0:re.nodeObj)==null?void 0:ke.parent);if(!(!ee||!("unique_name"in ee))){if(O.name==="addChild"&&ee.unique_name==="root"&&!g.has(F.id)){g.add(F.id);try{await Bo({variables:{"sheet-title":F.topic??"New Sheet","sheet-description":"This is custom description"},is_ai_generated:!1,workspace_id:z.value,workspace_module_id:L.value})}catch(k){console.error("Error creating workspace sheet:",k)}return}if(ee.unique_name==="List")try{const k=hn({topic:F.topic??"New Card",id:F.id},ee);await qt(k),await sn()}catch(k){console.error("Error creating card or refetching sheets:",k)}}})})});function mn(d,r){if(!d||!r||!d.style)return;const v=r.querySelector(".topic"),g=r.querySelector(".node")??r,w=d.style;w.background&&(g.style.background=w.background),w.color&&v&&(v.style.color=w.color),v&&(w.fontSize&&(v.style.fontSize=w.fontSize),w.fontFamily&&(v.style.fontFamily=w.fontFamily),w.fontWeight&&(v.style.fontWeight=w.fontWeight),w.fontStyle&&(v.style.fontStyle=w.fontStyle)),w.borderColor&&(g.style.borderColor=w.borderColor),w.borderWidth&&(g.style.borderWidth=w.borderWidth),w.borderRadius&&(g.style.borderRadius=w.borderRadius),w.padding&&(g.style.padding=w.padding)}function Wt(d={}){return{background:d.bg_color,color:d.color,fontSize:d.font_size!=null?`${d.font_size}px`:void 0,fontWeight:d.font_weight,fontStyle:d.font_style,fontFamily:d.font_family,borderColor:d.border_color,borderWidth:d.border_width!=null?`${d.border_width}px`:void 0,borderRadius:d.border_radius!=null?`${d.border_radius}px`:void 0,padding:d.padding!=null?`${d.padding}px`:void 0,hyperLink:d.hyperLink||void 0}}function hn(d,r){const v=new Date,g=v.toISOString().split("T")[0],w=new Date(v.getTime()+3*24*60*60*1e3).toISOString().split("T")[0];return{sheet_list_id:(r==null?void 0:r.topic)||"In Progress",workspace_id:z.value,sheet_id:te.value,workspace_lane_id:(d==null?void 0:d.workspace_lane_id)||null,variables:{"card-status":(r==null?void 0:r.topic)||"In Progress","card-type":null,priority:null,process:null,"card-title":d.topic||"New Card","card-description":"","start-date":g,"end-date":w},createdAt:new Date().toISOString()}}return(d,r)=>{var v,g,w,W,O,F,ee,re,ke;return T(),j(se,null,[u("div",hs,[u("div",fs,[u("div",vs,[ae(Cn,{onEditOption:Eo,modelValue:te.value,"onUpdate:modelValue":r[1]||(r[1]=k=>te.value=k),canEdit:V(t),canDelete:V(n),onDeleteOption:ko,options:yo.value,variant:"secondary",customClasses:"fixed w-auto"},{more:Ke(()=>[V(i)?(T(),j("div",{key:0,onClick:r[0]||(r[0]=k=>ho()),class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},r[41]||(r[41]=[u("i",{class:"fa-solid fa-plus"},null,-1),Te(" Add new ")]))):X("",!0)]),_:1},8,["modelValue","canEdit","canDelete","options"]),u("div",bs,[(_.value=="kanban",T(),Le(Cn,{key:0,actions:!1,modelValue:me.value,"onUpdate:modelValue":r[3]||(r[3]=k=>me.value=k),options:V(fe),variant:"secondary",customClasses:"fixed w-auto",onNestedSelect:pe},{more:Ke(()=>[V(o)?(T(),j("div",{key:0,onClick:r[2]||(r[2]=()=>{f.value=!0}),class:"sticky bottom-0 bg-bg-dropdown shadow-md shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},r[42]||(r[42]=[u("i",{class:"fa-solid fa-plus"},null,-1),Te(" Add new ")]))):X("",!0)]),_:1},8,["modelValue","options"])),ae(mi,{onOnChange:r[4]||(r[4]=k=>{dt.value=k}),placeholder:"Search in Orchit AI space"}),u("div",gs,[u("button",{class:Ve(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",_.value==="kanban"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"List view",onClick:r[5]||(r[5]=k=>_.value="kanban")},r[43]||(r[43]=[u("i",{class:"fa-solid fa-chart-kanban"},null,-1)]),2),u("button",{onClick:r[6]||(r[6]=k=>_.value="table"),class:Ve(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",_.value==="table"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gallery view"},r[44]||(r[44]=[u("i",{class:"fa-solid fa-align-left"},null,-1)]),2),u("button",{onClick:r[7]||(r[7]=k=>_.value="mindmap"),class:Ve(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",_.value==="mindmap"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"MindMap view"},r[45]||(r[45]=[u("i",{class:"fa-solid fa-chart-diagram"},null,-1)]),2)])])])]),_.value=="kanban"?(T(),j(se,{key:0},[et(ae(pi,null,null,512),[[gn,V(Bt)||V(rt)]]),et(u("div",ys,[ae(V(_t),{onOnPlus:Co,board:dn.value,"onDelete:column":r[8]||(r[8]=k=>_o(k)),"onUpdate:column":r[9]||(r[9]=k=>xo(k)),onReorder:bo,onAddColumn:Vt,"onSelect:ticket":lt,onOnBoardUpdate:go,variable_id:me.value,sheet_id:te.value},{"column-footer":Ke(k=>{var be,ut,fn,vn,bn;return[(ut=(be=V(kt))==null?void 0:be.transitions)!=null&&ut.all_allowed&&!((bn=(vn=(fn=V(kt))==null?void 0:fn.transitions)==null?void 0:vn.all_allowed)!=null&&bn.includes(k.column.title))&&V(kt).transitions.currentColumn!=k.column.title?(T(),j("div",xs," Disbale ( you can't drop here ) ")):X("",!0)]}),ticket:Ke(({ticket:k})=>[ae(hi,{selectedVar:me.value,onSelect:()=>{lt(k)},ticket:k},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"]),u("div",{class:"min-w-[328px]",onClick:r[11]||(r[11]=xe(()=>{},["stop"]))},[at.value?(T(),j("div",ws,[ae(yn,{autofocus:!0,modelValue:qe.value,"onUpdate:modelValue":r[10]||(r[10]=k=>qe.value=k),placeholder:"Add New list",onKeyup:ot(Nt,["enter"])},null,8,["modelValue"]),r[46]||(r[46]=u("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),u("div",_s,[ae(xn,{onClick:Nt,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:Ke(()=>[Te(oe(V(Ye)?"Adding...":"Add list"),1)]),_:1}),u("i",{class:"fa-solid fa-close",onClick:Rt})])])):(T(),j("button",{key:1,disabled:!V(o),class:Ve(["text-sm text-text-primary py-2.5 font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",V(o)?"cursor-pointer":"cursor-not-allowed"]),onClick:xe(Rt,["stop"])}," + Add List ",10,Cs))])],512),[[gn,!V(Bt)&&!V(rt)]])],64)):X("",!0),_.value=="table"?(T(),Le(Di,{key:1,onToggleVisibility:Po,onAddVar:r[12]||(r[12]=()=>{f.value=!0}),isPending:V(Bt)||V(Ct),columns:To.value,rows:dn.value,canCreate:V(l),canCreateVariable:V(o),onCreate:Do},null,8,["isPending","columns","rows","canCreate","canCreateVariable"])):X("",!0),_.value==="mindmap"?(T(),j(se,{key:2},[u("div",ks,[u("div",{ref_key:"mindMapRef",ref:N,class:"flex-1 h-full overflow-hidden rounded-md relative"},null,512),$.value?(T(),j("div",Ns,[r[63]||(r[63]=u("div",{class:"flex items-center justify-between pb-3 mb-4 border-b"},[u("h3",{class:"text-sm font-semibold text-gray-800"},"Format Node")],-1)),u("div",Ms,[u("div",null,[r[49]||(r[49]=u("h4",{class:"text-xs font-semibold text-gray-500 uppercase mb-3"}," Colors ",-1)),u("div",Es,[r[47]||(r[47]=u("label",{class:"block text-xs text-gray-600 mb-1"},"Background",-1)),u("div",{class:"flex items-center gap-2 cursor-pointer",onClick:r[13]||(r[13]=k=>B.value=!B.value)},[u("div",{class:"w-full h-7 rounded border",style:ce({background:ne.value.background})},null,4),u("span",Ss,oe(ne.value.background),1)]),B.value?(T(),j("div",Ls,[u("div",Ts,[(T(),j(se,null,Ne(Ae,k=>u("button",{key:k,class:"w-5 h-5 rounded border",style:ce({background:k}),onClick:be=>{he("bg_color",{target:{value:k}}),B.value=!1}},null,12,zs)),64))]),u("div",js,[u("input",{type:"color",value:ne.value.background,class:"w-8 h-8 cursor-pointer",onInput:r[14]||(r[14]=k=>he("bg_color",k))},null,40,As),u("input",{type:"text",class:"flex-1 text-xs border rounded px-2 py-1",value:ne.value.background,readonly:""},null,8,Ds)])])):X("",!0)]),u("div",Is,[r[48]||(r[48]=u("label",{class:"block text-xs text-gray-600 mb-1"},"Text",-1)),u("div",{class:"flex items-center gap-2 cursor-pointer",onClick:r[15]||(r[15]=k=>ie.value=!ie.value)},[u("div",{class:"w-full h-7 rounded border",style:ce({background:ne.value.color})},null,4),u("span",$s,oe(ne.value.color),1)]),ie.value?(T(),j("div",Os,[u("div",Ps,[(T(),j(se,null,Ne(Ae,k=>u("button",{key:k,class:"w-5 h-5 rounded border",style:ce({background:k}),onClick:be=>{he("color",{target:{value:k}}),ie.value=!1}},null,12,Vs)),64))]),u("div",Hs,[u("input",{type:"color",value:ne.value.color,class:"w-8 h-8 cursor-pointer",onInput:r[16]||(r[16]=k=>he("color",k))},null,40,Bs),u("input",{type:"text",class:"flex-1 text-xs border rounded px-2 py-1",value:ne.value.color,readonly:""},null,8,Rs)])])):X("",!0)])]),u("div",null,[r[57]||(r[57]=u("h4",{class:"text-xs font-semibold text-gray-500 uppercase mb-3"}," Typography ",-1)),u("div",Fs,[u("div",null,[r[50]||(r[50]=u("label",{class:"block text-xs text-gray-600 mb-1"},"Size",-1)),u("input",{type:"number",min:"8",max:"60",class:"w-full h-8 border rounded px-2 text-sm",value:parseInt(ne.value.fontSize||""),onInput:r[17]||(r[17]=k=>he("font_size",k))},null,40,Ys)]),u("div",null,[r[52]||(r[52]=u("label",{class:"block text-xs text-gray-600 mb-1"},"Weight",-1)),u("select",{class:"w-full h-8 border rounded px-2 text-sm",value:ne.value.fontWeight,onChange:r[18]||(r[18]=k=>he("font_weight",k))},r[51]||(r[51]=[u("option",{value:"lighter"},"Light",-1),u("option",{value:"normal"},"Normal",-1),u("option",{value:"bold"},"Bold",-1),u("option",{value:"bolder"},"Extra Bold",-1)]),40,qs)])]),u("div",Ws,[r[54]||(r[54]=u("label",{class:"block text-xs text-gray-600 mb-1"},"Style",-1)),u("select",{class:"w-full h-8 border rounded px-2 text-sm",value:ne.value.fontStyle,onChange:r[19]||(r[19]=k=>he("font_style",k))},r[53]||(r[53]=[u("option",{value:"normal"},"Normal",-1),u("option",{value:"italic"},"Italic",-1),u("option",{value:"oblique"},"Oblique",-1)]),40,Us)]),u("div",Ks,[r[56]||(r[56]=u("label",{class:"block text-xs text-gray-600 mb-1"},"Font Family",-1)),u("select",{class:"w-full h-8 border rounded px-2 text-sm",value:ne.value.fontFamily,onChange:r[20]||(r[20]=k=>he("font_family",k))},r[55]||(r[55]=[ri('<option value="Inter" data-v-99197799>Inter</option><option value="Arial" data-v-99197799>Arial</option><option value="Georgia" data-v-99197799>Georgia</option><option value="Roboto" data-v-99197799>Roboto</option><option value="Poppins" data-v-99197799>Poppins</option>',5)]),40,Xs)])]),u("div",null,[r[62]||(r[62]=u("h4",{class:"text-xs font-semibold text-gray-500 uppercase mb-3"}," Border & Spacing ",-1)),u("div",Zs,[u("div",null,[r[58]||(r[58]=u("label",{class:"block text-xs text-gray-600 mb-1"},"Border",-1)),u("input",{type:"color",class:"w-full h-10 rounded -mt-1",value:ne.value.borderColor,onInput:r[21]||(r[21]=k=>he("border_color",k))},null,40,Qs)]),u("div",null,[r[59]||(r[59]=u("label",{class:"block text-xs text-gray-600 mb-1"},"Width",-1)),u("input",{type:"number",min:"0",max:"10",class:"w-full h-8 border rounded px-2 text-sm",value:parseInt(ne.value.borderWidth||""),onInput:r[22]||(r[22]=k=>he("border_width",k))},null,40,Gs)])]),u("div",Js,[u("div",null,[r[60]||(r[60]=u("label",{class:"block text-xs text-gray-600 mb-1"},"Radius",-1)),u("input",{type:"number",min:"0",max:"50",class:"w-full h-8 border rounded px-2 text-sm",value:parseInt(ne.value.borderRadius||""),onInput:r[23]||(r[23]=k=>he("border_radius",k))},null,40,ea)]),u("div",null,[r[61]||(r[61]=u("label",{class:"block text-xs text-gray-600 mb-1"},"Padding",-1)),u("input",{type:"number",min:"0",max:"40",class:"w-full h-8 border rounded px-2 text-sm",value:parseInt(ne.value.padding||""),onInput:r[24]||(r[24]=k=>he("padding",k))},null,40,ta)])])])]),u("div",na,[u("button",{class:"w-full cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium hover:shadow-md disabled:opacity-60",disabled:Ue.value,onClick:pn},[Ue.value?(T(),j("span",ia)):X("",!0),u("span",null,oe(Ue.value?"Updating...":"Update"),1)],8,oa)])])):X("",!0)]),I.value?(T(),j("div",ra,[u("div",la,[r[64]||(r[64]=u("h3",{class:"text-lg font-semibold mb-4"},"Insert Web Link",-1)),et(u("input",{"onUpdate:modelValue":r[25]||(r[25]=k=>R.value=k),type:"text",placeholder:"Enter or paste a URL",class:"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Dt,R.value]]),u("div",sa,[u("button",{onClick:E,class:"px-4 py-2 rounded-md bg-gray-200 hover:bg-gray-300"}," Cancel "),u("button",{disabled:!R.value,onClick:x,class:Ve(["px-4 py-2 rounded-md text-white",R.value?"bg-blue-500 hover:bg-blue-600":"bg-blue-300 cursor-not-allowed"])}," Insert ",10,aa)])])])):X("",!0),at.value?(T(),j("div",{key:1,class:"absolute top-40 left-70 bg-bg-body rounded-lg p-4 shadow-lg z-100 min-w-[328px] border",onClick:r[27]||(r[27]=xe(()=>{},["stop"]))},[ae(yn,{autofocus:!0,modelValue:qe.value,"onUpdate:modelValue":r[26]||(r[26]=k=>qe.value=k),placeholder:"Add New list",onKeyup:ot(Nt,["enter"])},null,8,["modelValue"]),r[65]||(r[65]=u("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),u("div",da,[ae(xn,{onClick:Nt,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:Ke(()=>[Te(oe(V(Ye)?"Adding...":"Add list"),1)]),_:1}),u("i",{class:"fa-solid fa-close cursor-pointer",onClick:Rt})])])):X("",!0)],64)):X("",!0)]),ae(V(Re),{onClick:r[28]||(r[28]=xe(()=>{},["stop"])),modelValue:We.value,"onUpdate:modelValue":r[29]||(r[29]=k=>We.value=k),title:"Delete List",itemLabel:"list",itemName:(v=$e.value)==null?void 0:v.title,requireMatchText:(g=$e.value)==null?void 0:g.title,confirmText:"Delete List",cancelText:"Cancel",size:"md",loading:V(Ye),onConfirm:wo,onCancel:r[30]||(r[30]=()=>{We.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),P.value?(T(),Le(V(gt),{selectedVariable:me.value,listId:(w=$e.value)==null?void 0:w.title,sheet_id:te.value,key:"createTaskModalKey",modelValue:P.value,"onUpdate:modelValue":r[31]||(r[31]=k=>P.value=k),onSubmit:r[32]||(r[32]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):X("",!0),(W=H.value)!=null&&W._id?(T(),Le(V(wt),{key:1,details:H.value,onClose:r[33]||(r[33]=()=>{lt({variables:{}})}),showPanel:!!((O=H.value)!=null&&O._id)},null,8,["details","showPanel"])):X("",!0),ae(V(yt),{size:"md",sheet:Oe.value,modelValue:st.value,"onUpdate:modelValue":r[34]||(r[34]=k=>st.value=k)},null,8,["sheet","modelValue"]),f.value?(T(),Le(V(xt),{key:2,modelValue:f.value,"onUpdate:modelValue":r[35]||(r[35]=k=>f.value=k),sheetID:te.value},null,8,["modelValue","sheetID"])):X("",!0),ae(V(Re),{onClick:r[36]||(r[36]=xe(()=>{},["stop"])),modelValue:c.value,"onUpdate:modelValue":r[37]||(r[37]=k=>c.value=k),title:"Delete Sheet",itemLabel:"Sheet",itemName:(F=Oe.value)==null?void 0:F.title,requireMatchText:(ee=Oe.value)==null?void 0:ee.title,confirmText:"Delete Sheet",cancelText:"Cancel",size:"md",loading:V(No),onConfirm:Mo,onCancel:r[38]||(r[38]=()=>{c.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),ae(V(Re),{modelValue:m.value,"onUpdate:modelValue":r[39]||(r[39]=k=>m.value=k),title:"Delete Ticket",itemLabel:"Ticket",itemName:(re=p.value)==null?void 0:re.title,requireMatchText:(ke=p.value)==null?void 0:ke.title,confirmText:"Delete Ticket",cancelText:"Cancel",size:"md",loading:h.value,onConfirm:vt,onCancel:r[40]||(r[40]=()=>{m.value=!1,p.value=null})},null,8,["modelValue","itemName","requireMatchText","loading"]),r[66]||(r[66]=u("div",null,null,-1))],64)}}}),ya=ui(ca,[["__scopeId","data-v-99197799"]]);export{ya as default};
