import{d as se,c as i,l as a,o as t,m as d,F as D,y as B,E as be,h as l,M as he,I as le,r as p,an as ye,n as ge,e as R,z as n,aU as ee,t as C,k as we,aa as ke,w as _e,aV as Ce,ai as $e,j as k,a8 as ze,J as Se,i as te,bn as De,bo as Be,bp as Ne,bq as Ie,br as Ve}from"./index-ClDyDWX9.js";import{o as Ee}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-CMeMI-wD.js";const Me={class:"p-4 overflow-x-auto flex-auto flex gap-6","aria-busy":"true","aria-live":"polite"},Re={class:"flex-1 w-full overflow-y-auto space-y-3 px-2 pb-2",role:"presentation"},Ae={key:0,class:"min-w-[328px]",role:"presentation"},Pe=se({__name:"KanbanSkeleton",props:{columns:{default:3},cardsPerColumn:{default:3},showAddList:{type:Boolean,default:!0}},setup(N){const g=N,f=i(()=>Array.from({length:g.columns},(h,r)=>r)),w=i(()=>Array.from({length:g.cardsPerColumn},(h,r)=>r));return(h,r)=>(t(),a("div",Me,[(t(!0),a(D,null,B(f.value,(m,x,I,u)=>{const _=[g.cardsPerColumn];if(u&&u.key===m&&be(u,_))return u;const c=(t(),a("div",{key:m,class:"kanban-col max-w-[328px] min-w-[328px] min-h-[555px] h-full bg-bg-body rounded-lg p-2 flex flex-col",role:"presentation"},[r[4]||(r[4]=l("div",{class:"flex justify-between items-center py-3 px-4 sticky top-0 bg-bg-body rounded-xl mb-2 z-10",role:"presentation"},[l("div",{class:"flex items-center gap-2"},[l("div",{class:"h-4 w-24 rounded shimmer","aria-hidden":"true"}),l("div",{class:"h-4 w-4 rounded-full shimmer","aria-hidden":"true"})]),l("div",{class:"flex items-center gap-2"},[l("div",{class:"h-4 w-4 rounded shimmer","aria-hidden":"true"}),l("div",{class:"h-4 w-4 rounded shimmer","aria-hidden":"true"})])],-1)),l("div",Re,[(t(!0),a(D,null,B(w.value,V=>(t(),a("div",{key:V,class:"bg-bg-card rounded-xl border border-border p-3 space-y-3 shadow-sm",role:"presentation"},r[2]||(r[2]=[he('<div class="flex gap-2" data-v-b80995d1><div class="h-5 w-14 rounded-full shimmer" aria-hidden="true" data-v-b80995d1></div><div class="h-5 w-10 rounded-full shimmer" aria-hidden="true" data-v-b80995d1></div></div><div data-v-b80995d1><div class="h-4 w-3/4 rounded shimmer mb-2" aria-hidden="true" data-v-b80995d1></div><div class="h-3 w-full rounded shimmer" aria-hidden="true" data-v-b80995d1></div><div class="h-3 w-5/6 rounded shimmer mt-1" aria-hidden="true" data-v-b80995d1></div></div><div class="flex justify-between items-center" data-v-b80995d1><div class="h-4 w-20 rounded shimmer" aria-hidden="true" data-v-b80995d1></div><div class="flex -space-x-2" data-v-b80995d1><div class="w-6 h-6 rounded-full border-2 border-border shimmer" aria-hidden="true" data-v-b80995d1></div><div class="w-6 h-6 rounded-full border-2 border-border shimmer" aria-hidden="true" data-v-b80995d1></div></div></div>',3)])))),128)),r[3]||(r[3]=l("div",{class:"h-9 rounded shimmer mt-3","aria-hidden":"true"},null,-1))])]));return c.memo=_,c},r,0),128)),g.showAddList?(t(),a("div",Ae,r[5]||(r[5]=[l("div",{class:"bg-bg-body rounded-lg p-4"},[l("div",{class:"h-9 rounded shimmer","aria-hidden":"true"})],-1)]))):d("",!0)]))}}),rt=le(Pe,[["__scopeId","data-v-b80995d1"]]),je=["src"],Te={key:0,class:"font-bold"},Fe={class:"text-nowrap"},Ke=["onClick","onMouseenter"],Le={class:"flex items-center gap-2 min-w-0 flex-1"},Oe=["src"],Ue={class:"flex flex-col gap-1 max-w-40"},We={class:"overflow-hidden font-semibold overflow-ellipsis"},qe={key:0,class:"min-w-40 line-clamp-2 text-wrap text-text-secondary text-xs"},Je={key:1,class:"fa-regular text-left fa-arrows-spin animate-spin duration-250"},Ge={key:0,class:"pl-2 flex items-center relative ml-auto"},He={class:"py-1 text-sm"},Qe=["onClick"],Xe={key:1,class:"pl-2 flex items-center relative"},Ye=["onClick","aria-expanded","aria-label"],Ze={class:"rounded-md border border-border bg-bg-dropdown shadow-lg w-28 py-1 flex flex-col text-sm"},et=["onClick"],tt=["onClick"],st=se({__name:"Dropdown",props:{prefix:{},options:{default:()=>[]},modelValue:{default:""},variant:{default:"primary"},icon:{},size:{default:"md"},actions:{type:Boolean,default:!0},canEdit:{type:Boolean,default:!0},canDelete:{type:Boolean,default:!0},customClasses:{default:""}},emits:["update:modelValue","edit-option","delete-option","nested-select"],setup(N,{emit:g}){const f=N,w=g,h=p(!1),r=p(null),m=p(null),x=p(null),I=p({position:"fixed",top:"-9999px",left:"-9999px"});let u=null;const _=i({get:()=>f.modelValue,set:e=>w("update:modelValue",e)}),c=i(()=>f.options.find(e=>e._id===_.value)??null);function V(){h.value?E():(h.value=!0,$e(()=>{ae()}))}function E(){h.value=!1,$.value=null,u&&(u(),u=null)}function ae(){m.value&&x.value&&(u=De(m.value,x.value,oe))}function oe(){!m.value||!x.value||Be(m.value,x.value,{placement:"bottom-start",strategy:"fixed",middleware:[Ne(({placement:e})=>e.startsWith("top")?17:5),Ie(),Ve({padding:5})]}).then(({x:e,y:o})=>{I.value={position:"fixed",left:`${e}px`,top:`${o}px`}})}function A(e){_.value=e._id,E()}const M=p(null),$=p(null),y=p(null);function re(e){var o;(o=e.nested)!=null&&o.length?$.value=$.value===e._id?null:e._id:A(e)}function ne(e,o){w("nested-select",e),A(o)}const z=p(null);function ie(e){z.value=null,y.value=y.value===e?null:e}function de(e){w("edit-option",e),y.value=null,z.value=null}function ue(e){w("delete-option",e),y.value=null,z.value=null}Ee(r,e=>{const o=e.target;x.value&&x.value.contains(o)||(E(),y.value=null,z.value=null)}),ye(()=>{u&&u()});const b=i(()=>f.size==="sm"),ce=i(()=>b.value?"px-2 py-1 text-xs":"px-3 py-1.5 text-sm"),ve=i(()=>b.value?"text-xs":"text-sm"),pe=i(()=>b.value?"text-xs":"text-sm"),fe=i(()=>b.value?"px-3 py-1":"px-4 py-2"),P=i(()=>b.value?"w-3.5 h-3.5":"w-4 h-4"),S=i(()=>b.value?"w-3.5 h-3.5":"w-4 h-4"),j=i(()=>b.value?"text-base":"text-lg"),me=i(()=>b.value?"w-3.5 h-3.5":"w-4 h-4"),xe=i(()=>"dark:border-light-black border-border-gray");return ge(()=>f.options,()=>{},{deep:!0}),(e,o)=>{var T,F,K,L,O,U,W,q,J,G,H;return t(),a("div",{ref_key:"wrapperRef",ref:r,class:"relative inline-block text-left"},[l("button",{ref_key:"triggerRef",ref:m,onClick:V,type:"button",class:n(["text-nowrap inline-flex justify-between items-center gap-1 border rounded-[6px] font-medium cursor-pointer transition bg-bg-surface",[ce.value,e.variant==="secondary"?"!bg-bg-body border-0":"border-border"]])},[(T=c.value)!=null&&T.prefix?(t(),a("span",{key:0,class:n(P.value)},[typeof((F=c.value)==null?void 0:F.prefix)=="string"?(t(),a("img",{key:0,src:(K=c.value)==null?void 0:K.prefix,class:n(S.value)},null,10,je)):(t(),R(ee((L=c.value)==null?void 0:L.prefix),{key:1,class:n(S.value)},null,8,["class"]))],2)):d("",!0),l("i",{class:n(`${(U=(O=c.value)==null?void 0:O.icon)==null?void 0:U.prefix} ${(q=(W=c.value)==null?void 0:W.icon)!=null&&q.iconName?(G=(J=c.value)==null?void 0:J.icon)==null?void 0:G.iconName:"file"} ${j.value}`)},null,2),l("span",{class:n(ve.value)},[e.prefix?(t(),a("span",Te,C(e.prefix)+":",1)):d("",!0),l("span",Fe,C((H=c.value)==null?void 0:H.title),1)],2),(t(),a("svg",{class:n([me.value,"text-text-secondary"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o[4]||(o[4]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),(t(),R(Ce,{to:"body"},[we(ke,{name:"fade-scale","enter-active-class":"transition duration-200 ease-out","leave-active-class":"transition duration-150 ease-in","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:_e(()=>[h.value?(t(),a("div",{key:0,ref_key:"menuRef",ref:x,style:ze(I.value),class:n(["max-h-[500px] overflow-visible z-[9999] min-w-fit rounded-[6px] border border-border shadow-lg bg-bg-dropdown fixed",[xe.value,f.customClasses?f.customClasses:""]]),onClick:o[3]||(o[3]=k(()=>{},["stop"]))},[l("ul",{class:n(["py-1 z-[2]",pe.value])},[(t(!0),a(D,null,B(e.options,s=>{var Q,X,Y,Z;return t(),a("li",{key:s._id,class:n(["group cursor-pointer flex items-stretch text-nowrap hover:bg-bg-dropdown-menu-hover",fe.value]),onClick:v=>re(s),onMouseenter:v=>M.value=s._id,onMouseleave:o[2]||(o[2]=v=>M.value=null)},[l("div",Le,[s.prefix?(t(),a("span",{key:0,class:n(P.value)},[typeof s.prefix=="string"?(t(),a("img",{key:0,src:s.prefix,class:n(S.value)},null,10,Oe)):(t(),R(ee(s.prefix),{key:1,class:n(["text-text-primary",S.value])},null,8,["class"]))],2)):d("",!0),l("i",{class:n(`${(Q=s.icon)==null?void 0:Q.prefix} ${(X=s.icon)!=null&&X.iconName?(Y=s.icon)==null?void 0:Y.iconName:"file"} ${j.value}`)},null,2),l("div",Ue,[l("span",We,C(s.title),1),s.description?(t(),a("p",qe,C(s.description),1)):d("",!0)]),(s==null?void 0:s.status)=="running"?(t(),a("i",Je)):d("",!0)]),(Z=s.nested)!=null&&Z.length?(t(),a("div",Ge,[o[5]||(o[5]=l("span",{class:"text-text-secondary"},"...",-1)),M.value===s._id||$.value===s._id?(t(),a("div",{key:0,class:"absolute left-[-170px] sm:left-[30px] top-[-250px] sm:top-[-5px] ml-1 z-[30] min-w-48 bg-bg-dropdown border border-border rounded-md shadow-lg max-h-60 overflow-y-auto",onClick:o[0]||(o[0]=k(()=>{},["stop"]))},[l("ul",He,[(t(!0),a(D,null,B(s.nested,v=>(t(),a("li",{key:v._id,class:"px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer",onClick:lt=>ne(v,s)},C(v.title),9,Qe))),128))])])):d("",!0)])):e.actions&&e.canEdit&&e.canDelete?(t(),a("div",Xe,[l("button",{class:"opacity-0 cursor-pointer group-hover:opacity-100 focus:opacity-100 transition rounded-md px-1.5 py-1 text-text-secondary hover:bg-bg-dropdown-menu-hover",onClick:k(v=>ie(s._id),["stop"]),"aria-expanded":y.value===s._id?"true":"false","aria-label":`Actions for ${s.title}`}," â‹¯ ",8,Ye),y.value===s._id?(t(),a("div",{key:0,class:"absolute left-[100%] right-0 top-full mt-1 z-[20]",onClick:o[1]||(o[1]=k(()=>{},["stop"]))},[l("div",Ze,[e.canEdit?(t(),a("button",{key:0,class:"px-3 py-1.5 text-left hover:bg-bg-dropdown-menu-hover cursor-pointer",onClick:k(v=>de(s),["stop"])},o[6]||(o[6]=[l("i",{class:"fa-regular fa-edit"},null,-1),te(" Edit ")]),8,et)):d("",!0),e.canDelete?(t(),a("button",{key:1,class:"px-3 py-1.5 text-left text-red-600 cursor-pointer",onClick:k(v=>ue(s),["stop"])},o[7]||(o[7]=[l("i",{class:"fa-regular fa-trash"},null,-1),te(" Delete ")]),8,tt)):d("",!0)])])):d("",!0)])):d("",!0)],42,Ke)}),128)),Se(e.$slots,"more",{},void 0,!0)],2)],6)):d("",!0)]),_:3})]))],512)}}}),nt=le(st,[["__scopeId","data-v-e92e64a9"]]);export{nt as D,rt as K};
