const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-DuDhFaGK.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-B7RJPrEs.js","assets/index-DKq_QMoF.js","assets/index-DJQg6exV.css","assets/ConfirmDeleteModal-BmB-CETv.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-DQBlfvEi.js","assets/SidePanel-BD0CbTFZ.js","assets/SidePanel-U7OOMI6M.css","assets/KanbanBoard-BMvqeWmM.js","assets/lodash-B3d4OLnQ.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-DRhy89co.js","assets/KanbanBoard-Dffh696C.css"])))=>i.map(i=>d[i]);
import{R as Se,S as Re,p as c,T as se,c as T,r as x,n as F,K as ke,U as Ve,d as Ce,V as Ut,W as Pt,l as v,h as l,j as ie,z as G,F as de,y as ye,o,t as z,Q as Ot,J as nt,O as al,e as te,w as X,X as rt,k as O,_ as ot,I as Je,i as le,B as me,m as W,Y as Ze,D as Te,P as It,N as it,M as At,Z as nl,$ as qt,a0 as rl,a1 as Nt,a2 as ol,E as st,a3 as il,a4 as dl,u as ul,a5 as cl,a6 as pl,q as ml,a7 as Ke,A as We,v as fl,a8 as Fe,a9 as vl,aa as $t,ab as gl,ac as Vt}from"./index-DKq_QMoF.js";import{u as dt}from"./useTheme-DBvGBTXZ.js";import{_ as bl}from"./BaseTextAreaField.vue_vue_type_script_setup_true_lang-DHsDi3Xc.js";import{_ as Tt}from"./SearchBar.vue_vue_type_script_setup_true_lang-DOlLI7rS.js";import{o as ze,_ as yl}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-DQBlfvEi.js";import{K as jt}from"./KanbanSkeleton-BV7MOmGJ.js";import{K as xl}from"./KanbanTicket-BwvYzz-F.js";import{F as hl}from"./fuse-Ch1WBRTM.js";import{l as _l}from"./lodash-B3d4OLnQ.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-DRhy89co.js";const kl="data:image/svg+xml,%3csvg%20width='60'%20height='46'%20viewBox='0%200%2060%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M59.7443%2034.8967L50.5682%2025.7206C50.4457%2025.5984%2050.2897%2025.5152%2050.1199%2025.4816C49.9501%2025.4479%2049.7742%2025.4653%2049.6143%2025.5315C49.4544%2025.5976%2049.3176%2025.7097%2049.2213%2025.8535C49.125%2025.9973%2049.0734%2026.1664%2049.073%2026.3394V30.517H25.9775V40.5114H49.0755V44.689C49.0759%2044.8621%2049.1275%2045.0312%2049.2238%2045.175C49.3201%2045.3187%2049.4569%2045.4308%2049.6168%2045.497C49.7767%2045.5632%2049.9527%2045.5805%2050.1224%2045.5468C50.2922%2045.5132%2050.4482%2045.43%2050.5708%2045.3078L59.7468%2036.1318C59.9095%2035.9672%2060.0005%2035.7451%2060.0001%2035.5137C59.9996%2035.2823%2059.9076%2035.0605%2059.7443%2034.8967Z'%20fill='%23C6DBA9'/%3e%3cpath%20d='M32.3149%2030.5293C30.664%2031.5967%2028.7394%2032.1633%2026.7734%2032.1609V40.5237H34.7295C39.2829%2038.5638%2042.9649%2035.0102%2045.0851%2030.5293H32.3149Z'%20fill='url(%23paint0_linear_250_16424)'/%3e%3cpath%20d='M46.2209%2020.2832C46.2317%2015.0884%2044.2448%2010.0884%2040.6714%206.3179C37.0981%202.54738%2032.2119%200.295026%2027.024%200.0269855C21.8362%20-0.241055%2016.7439%201.49574%2012.801%204.87791C8.85809%208.26009%206.36647%2013.0287%205.84178%2018.1969L2.46233%2017.8913C2.31055%2017.8782%202.15829%2017.9103%202.02467%2017.9835C1.89106%2018.0566%201.78205%2018.1677%201.71134%2018.3026C1.64063%2018.4376%201.61138%2018.5904%201.62726%2018.7419C1.64313%2018.8934%201.70343%2019.0368%201.80058%2019.1542L9.51927%2028.406C9.79205%2028.7344%2010.277%2028.7773%2010.378%2028.5045L19.6298%2020.7833C20.3876%2020.3413%2020.1173%2019.4825%2019.4328%2019.4194L15.8008%2019.091C16.0297%2017.1283%2016.8213%2015.2735%2018.0802%2013.7503C19.3391%2012.2271%2021.0115%2011.1004%2022.8961%2010.5059C24.7806%209.9114%2026.7969%209.8745%2028.7019%2010.3996C30.6069%2010.9248%2032.3195%2011.9896%2033.6332%2013.4657C34.947%2014.9419%2035.8059%2016.7664%2036.1065%2018.7195C36.4071%2020.6726%2036.1365%2022.6709%2035.3274%2024.4738C34.5183%2026.2766%2033.2051%2027.8071%2031.5462%2028.8807C29.8872%2029.9544%2027.9531%2030.5254%2025.977%2030.5251H25.9283V40.5094C31.2249%2040.4031%2036.7093%2038.2263%2040.4202%2034.4455C44.1311%2030.6648%2046.2134%2025.5808%2046.2209%2020.2832Z'%20fill='%23D7A39E'/%3e%3cpath%20d='M25.9773%2030.5293H0V40.5237H25.9773V30.5293Z'%20fill='url(%23paint1_linear_250_16424)'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_250_16424'%20x1='6.53714'%20y1='35.5252'%20x2='47.0198'%20y2='35.5252'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%236C798F'/%3e%3cstop%20offset='1'%20stop-color='%236C798F'%20stop-opacity='0.1'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_250_16424'%20x1='0'%20y1='36'%20x2='26'%20y2='36'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23E8D4D3'%20stop-opacity='0'/%3e%3cstop%20offset='1'%20stop-color='%23E2A39F'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Sl=(p,i,D={})=>Re({queryKey:T(()=>["sprint-list",c(p),c(i)]),queryFn:({signal:C})=>se({url:`sprints/${c(p)}`,method:"GET",signal:C,params:{sprintType:c(i)}}),...D}),Cl=(p,i={})=>Re({queryKey:["sprint-cards",p],queryFn:({signal:D})=>se({url:`sprints/${c(p)}/backlog`,method:"GET",signal:D}),...i}),wl=(p,i={})=>Re({queryKey:["sprint-kanban",p],queryFn:({signal:D})=>se({url:`workspace/cards/sprintgrouped?sprint_id=${c(p)}&variable_id=68b6c96e0a95eef7d14e6981`,method:"GET",signal:D}),...i}),Dl=(p,i={})=>Se({key:["sprint-complete"]},{mutationFn:D=>se({url:`sprints/${c(p)}/complete`,method:"POST",data:D.payload}),...i}),$l=(p,i={})=>Re({queryKey:["sprint-detail",p],queryFn:({signal:D})=>se({url:`sprints/detail/${c(p)}?include_cards=true`,method:"GET",signal:D}),...i}),at=(p,i,D={})=>Re({queryKey:["backlog-list",p,c(i)],queryFn:({signal:C})=>se({url:`sprints/workspace/${c(p)}/cards`,method:"GET",signal:C,params:{include_sprint_cards:!1,sprintType:c(i)}}),...D}),Vl=(p={})=>Se({key:["add-sprint"]},{mutationFn:i=>se({url:"/sprints",method:"POST",data:i.payload}),...p}),Ft=(p={})=>Se({key:["move-card-to-sprint"]},{mutationFn:i=>se({url:`/sprints/${i.id}/cards`,method:"POST",data:i.payload}),...p}),Lt=(p={})=>Se({key:["add-sprint"]},{mutationFn:i=>se({url:`/sprints/${i.id}`,method:"PUT",data:i.payload}),...p}),Tl=(p={})=>Se({key:["start-sprint"]},{mutationFn:i=>se({url:`/sprints/${i.id}/start`,method:"POST",data:i.payload}),...p}),Ll=(p={})=>Se({key:["delete-sprint"]},{mutationFn:i=>se({url:`/sprints/${i}`,method:"DELETE"}),...p}),El=(p={})=>Se({key:["remove-card-from-sprint"]},{mutationFn:i=>se({url:`sprints/${c(i.sprintId)}/cards/remove `,method:"POST",data:{card_ids:[i.cardId]}}),...p}),zt="jira-like:";function Et(p="id"){return`${p}_${Math.random().toString(36).slice(2,9)}`}function Bt(p,i){try{localStorage.setItem(zt+p,JSON.stringify(i))}catch{}}function Mt(p,i){try{const D=localStorage.getItem(zt+p);return D?JSON.parse(D):i}catch{return i}}function Bl(p){switch(p){case"Highest":return"rounded-md bg-red-50 px-2 py-0.5 text-xs text-red-700";case"High":return"rounded-md bg-orange-50 px-2 py-0.5 text-xs text-orange-700";case"Medium":return"rounded-md bg-amber-50 px-2 py-0.5 text-xs text-amber-700";case"Low":return"rounded-md bg-gray-100 px-2 py-0.5 text-xs text-gray-600"}}function Ml(){const p=x(Mt("backlog",[])),i=x(Mt("sprints",[]));if(i.value.length===0)i.value.push({id:Et("sprint"),name:"Sprint 1",goal:"",start:"",end:"",started:!1,tickets:[]});else if(i.value.length>1){for(let r=1;r<i.value.length;r++)p.value.push(...i.value[r].tickets);i.value=[i.value[0]]}const D=x(i.value[0].id);F([p,i],()=>{Bt("backlog",p.value),Bt("sprints",i.value)},{deep:!0});const C=x([]),I=ke({}),h=T(()=>p.value.length>0&&C.value.length===p.value.length),n=r=>{var t;const e=i.value.find(s=>s.id===r);return!!e&&e.tickets.length>0&&(((t=I[r])==null?void 0:t.length)||0)===e.tickets.length};function w(r,e,t){const s=e.target.checked;if(r==="backlog")C.value=s?p.value.map(u=>u.id):[];else if(t){const u=i.value.find(k=>k.id===t);I[t]=s&&u?u.tickets.map(k=>k.id):[]}}function U(r,e,t,s){const u=t.target.checked,k=r==="backlog"?C.value:I[s]||(I[s]=[]);if(u&&!k.includes(e)&&k.push(e),!u){const M=k.indexOf(e);M>=0&&k.splice(M,1)}}function $(){return i.value.find(r=>r.id===D.value)||i.value[0]}function N(){const e=[...p.value,...i.value.flatMap(s=>s.tickets)].map(s=>Number(String(s.key).replace(/[^0-9]/g,""))).filter(s=>!Number.isNaN(s));return`PRJ-${e.length?Math.max(...e)+1:1}`}const{mutate:A}=Ft({onSuccess:()=>{Ve.success("Cards moved to sprint successfully")},onError:r=>{Ve.error("Failed to move cards: "+(r.message||"Unknown error"))}});function L(){var s,u;const r=$();if(!r||!C.value.length)return;const e=[],t=[];for(const k of p.value)(C.value.includes(k.id)?t:e).push(k);p.value=e,r.tickets.push(...t),C.value=[],t.length>0&&A({id:r.id,payload:{card_ids:t.map(k=>k.id),priority:((u=(s=t[0])==null?void 0:s.priority)==null?void 0:u.toLowerCase())||"medium",story_points:t.reduce((k,M)=>k+(M.storyPoints||0),0)}})}function P(r){const e=i.value.find(k=>k.id===r);if(!e)return;const t=I[r]||[],s=[],u=[];for(const k of e.tickets)(t.includes(k.id)?u:s).push(k);e.tickets=s,p.value.push(...u),I[r]=[]}function B(r,e){if(r==="backlog")p.value=p.value.filter(t=>!C.value.includes(t.id)),C.value=[];else if(e){const t=I[e]||[],s=i.value.find(u=>u.id===e);if(!s)return;s.tickets=s.tickets.filter(u=>!t.includes(u.id)),I[e]=[]}}function q(r,e){const t={id:Et("T"),key:N(),createdAt:new Date().toISOString(),...e};if(r==="backlog")p.value.push(t);else{const s=$();s==null||s.tickets.push(t)}}function j(r){const e=$();e&&(e.name=r.name??e.name,e.goal=r.goal??e.goal,e.start=r.start??e.start,e.end=r.end??e.end)}function R(){const r=$();r&&(r.started=!r.started)}function _(r){return r.tickets.reduce((e,t)=>e+(t.storyPoints||0),0)}return{backlog:p,sprints:i,activeSprintId:D,selectedBacklogIds:C,selectedSprintIds:I,allBacklogChecked:h,allSprintChecked:n,toggleAll:w,toggleOne:U,getActiveSprint:$,createTicket:q,saveSprintMeta:j,toggleStartSprint:R,sprintPoints:_,moveSelectedToSprint:L,moveSelectedToBacklog:P,deleteSelected:B,priorityClass:Bl}}const Ul={class:"h-full min-h-0"},Pl={key:0,class:"empty-state flex flex-col justify-center items-center h-full"},Ol=["disabled"],Il={key:1,class:"overflow-y-auto h-[calc(100%-50px)] tickets-scroll"},Al={class:"flex flex-col flex-1 gap-[4px] min-w-0 me-1"},ql=["onDragstart","onClick"],Nl=["checked","onChange"],jl={class:"flex items-center text-[14px] font-sans font-medium capitalize text-text-secondary flex-1 min-w-0"},Fl={class:"truncate"},zl={class:"flex-shrink-0"},Rl={key:0,class:"flex justify-center text-gray-500 items-center text-[11px] aspect-square w-[24px] h-[24px] bg-bg-body rounded-full border-border-input border-2"},Hl={key:1,class:"w-6 h-6 rounded-full"},Ql=["src"],Kl={key:2,class:"text-[11px] aspect-square w-24px flex justify-center items-center h-[24px] bg-accent/30 text-accent border-accent border rounded-full"},Wl=Ce({__name:"BacklogTable",props:{searchQuery:{type:String,default:""},sprintType:{type:String,default:""},checkedAll:{type:Boolean,default:!1}},emits:["ticket-dragged-to-sprint","open-ticket","ticket-moved-to-backlog","open-create-ticket"],setup(p,{emit:i}){const{theme:D}=dt(),{canCreateCard:C}=Ut(),I=i,h=p,{workspaceId:n}=Pt(),{data:w,isPending:U}=at(n,h.sprintType),$=x([]),N=x(!1),A=x([]),L=x([]);F(w,e=>{e!=null&&e.cards&&($.value=e.cards.map(t=>{var f,g,Z,fe;const s=((f=t.card)==null?void 0:f.variables)??{},u=((g=t.card)==null?void 0:g._id)??t.card_id,k=String(s["card-status"]??"").trim(),M=String(s.priority??"").trim();return{id:u,key:s["card-code"]||(u==null?void 0:u.slice(-6))||"PRJ-?",summary:s["card-title"]||"(untitled)",type:"Story",status:k,assignee:((Z=t.card)==null?void 0:Z.assigned_to)??"Unassigned",storyPoints:Number(t.story_points??0)||0,priority:B(M),createdAt:((fe=t.card)==null?void 0:fe.created_at)??new Date().toISOString(),description:s["card-description"]||""}}))},{immediate:!0}),F($,e=>{const t=new Set(e.map(s=>s.id));L.value=L.value.filter(s=>t.has(s))});const P=T(()=>{if(console.log(h.searchQuery,"this is query"),!h.searchQuery)return $.value;const e=h.searchQuery.toLowerCase();return $.value.filter(t=>{var u;const s=typeof t.assignee=="string"?t.assignee:((u=t.assignee)==null?void 0:u.u_full_name)||"";return t.key.toLowerCase().includes(e)||t.summary.toLowerCase().includes(e)||s.toLowerCase().includes(e)})});function B(e){const t=String(e??"").toLowerCase();return["highest","blocker","critical"].includes(t)?"Highest":["high","major"].includes(t)?"High":["medium","normal"].includes(t)?"Medium":"Low"}function q(e,t,s){var f;const u=L.value.includes(t.id)?[...L.value]:[t.id],k=u.map(g=>$.value.find(Z=>Z.id===g)).filter(Boolean);A.value=u;const M=JSON.stringify({id:t.id,ids:u,from:s,tickets:k});(f=e.dataTransfer)==null||f.setData("text/plain",M),e.dataTransfer&&(e.dataTransfer.effectAllowed="move")}function j(e){var t;N.value=!1,((t=e.dataTransfer)==null?void 0:t.dropEffect)!=="none"&&A.value.length&&($.value=$.value.filter(s=>!A.value.includes(s.id)),L.value=L.value.filter(s=>!A.value.includes(s))),A.value=[]}function R(e){var t;e.preventDefault(),N.value=!1;try{const s=(t=e.dataTransfer)==null?void 0:t.getData("text/plain");if(!s)return;const u=JSON.parse(s);if(u.from!=="sprint")return;const M=(u.tickets&&u.tickets.length?u.tickets:u.ticket?[u.ticket]:[]).filter(Boolean).filter(g=>!$.value.some(Z=>Z.id===g.id));M.length&&$.value.push(...M);const f=u.ids&&u.ids.length?u.ids:u.id?[u.id]:[];f.length&&I("ticket-moved-to-backlog",f,u.sprintId),console.log(u.sprintId,"sprintId ....")}catch(s){console.error("Drop error:",s)}}function _(e,t){t?L.value.includes(e)||L.value.push(e):L.value=L.value.filter(s=>s!==e)}function r(e,t){const s=t.target.checked;_(e,s)}return F(()=>h.checkedAll,e=>{e?(L.value=$.value.map(t=>t.id),console.log(L.value)):L.value=[]}),(e,t)=>(o(),v("section",Ul,[l("div",{class:G(["rounded-lg flex flex-col h-full",N.value?"ring-2 ring-blue-400":""]),onDragover:t[3]||(t[3]=ie(()=>{},["prevent"])),onDragenter:t[4]||(t[4]=s=>N.value=!0),onDragleave:t[5]||(t[5]=s=>N.value=!1),onDrop:t[6]||(t[6]=s=>R(s))},[!c(U)&&P.value.length===0?(o(),v("div",Pl,[t[7]||(t[7]=l("img",{src:kl,class:"mb-4",alt:"backlog-plan"},null,-1)),t[8]||(t[8]=l("h6",{class:"text-sm text-text-primary font-semibold mb-1"}," Get started in the backlog ",-1)),t[9]||(t[9]=l("p",{class:"text-sm text-text-primary/90 mb-4"}," Plan and start a sprint to see issues here. ",-1)),l("button",{disabled:!c(C),onClick:t[0]||(t[0]=s=>e.$emit("open-create-ticket")),class:G(["relative inline-flex items-center justify-center font-medium py-1.5 px-3 text-sm rounded-md focus:outline-none transition text-xs px-3 py-1.5 h-[34px] bg-accent text-white hover:bg-accent-hover border-border-input border",c(C)?"cursor-pointer":"cursor-not-allowed"])}," Create Ticket ",10,Ol)])):(o(),v("div",Il,[l("div",Al,[(o(!0),v(de,null,ye(P.value,s=>{var u,k;return o(),v("div",{key:s.id,draggable:"true",class:G(["flex items-center  gap-3 p-[8px] cursor-pointer transition-colors rounded-[8px]",L.value.includes(s.id)?"border-2 border-[#5a2d7f]":"border border-border-input",c(D)==="dark"?"bg-bg-body hover:bg-bg-surface":"bg-bg-charcoal hover:bg-bg-body"]),onDragstart:M=>q(M,s,"backlog"),onDragend:t[2]||(t[2]=M=>j(M)),onClick:M=>e.$emit("open-ticket",s)},[l("input",{type:"checkbox",class:"custom-checkbox bg-bg-body border border-border-input flex-shrink-0",checked:L.value.includes(s.id),onClick:t[1]||(t[1]=ie(()=>{},["stop"])),onChange:M=>r(s.id,M)},null,40,Nl),l("div",jl,[l("span",Fl,z(s.summary),1)]),l("div",zl,[(s==null?void 0:s.assignee)==="Unassigned"?(o(),v("span",Rl,"UA")):(u=s==null?void 0:s.assignee)!=null&&u.u_profile_image?(o(),v("div",Hl,[l("img",{src:s.assignee.u_profile_image,alt:""},null,8,Ql)])):(o(),v("span",Kl,z(c(Ot)((k=s==null?void 0:s.assignee)==null?void 0:k.u_full_name)),1))])],42,ql)}),128))])]))],34)]))}}),Gl=nt(Wl,[["__scopeId","data-v-f9c3c8f2"]]),Jl="data:image/svg+xml,%3csvg%20width='60'%20height='60'%20viewBox='0%200%2060%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M9.375%2030C11.6402%2030%2013.4766%2028.1637%2013.4766%2025.8984C13.4766%2023.6332%2011.6402%2021.7969%209.375%2021.7969C7.10977%2021.7969%205.27344%2023.6332%205.27344%2025.8984C5.27344%2028.1637%207.10977%2030%209.375%2030Z'%20fill='%23AE2A19'/%3e%3cpath%20d='M26.25%2024.375C28.5152%2024.375%2030.3516%2022.5387%2030.3516%2020.2734C30.3516%2018.0082%2028.5152%2016.1719%2026.25%2016.1719C23.9848%2016.1719%2022.1484%2018.0082%2022.1484%2020.2734C22.1484%2022.5387%2023.9848%2024.375%2026.25%2024.375Z'%20fill='%23BF63F3'/%3e%3cpath%20d='M15.3931%2035.8594H11.0159V33.0938C9.93587%2033.3387%208.81469%2033.3387%207.73465%2033.0938V35.8594H1.87528C1.55115%2035.8601%201.2345%2035.9568%200.965283%2036.1373C0.696064%2036.3178%200.486343%2036.574%200.362583%2036.8736C0.238824%2037.1731%200.206573%2037.5027%200.269899%2037.8205C0.333226%2038.1384%200.489292%2038.4304%200.718404%2038.6597L7.05872%2045L0.718404%2051.3403C0.489292%2051.5696%200.333226%2051.8616%200.269899%2052.1795C0.206573%2052.4973%200.238824%2052.8269%200.362583%2053.1264C0.486343%2053.426%200.696064%2053.6822%200.965283%2053.8627C1.2345%2054.0432%201.55115%2054.1399%201.87528%2054.1406H15.3931L21.7503%2045L15.3931%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M34.4562%2035.8594H27.8937V27.4688C26.8137%2027.7138%2025.6925%2027.7138%2024.6125%2027.4688V35.8594H19.3896L25.7487%2045L19.3896%2054.1406H34.4562L40.8143%2045L34.4562%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M43.8281%2019.6875H55.3125C55.7475%2019.6873%2056.1647%2019.5143%2056.4723%2019.2067C56.7799%2018.8991%2056.9529%2018.4819%2056.9531%2018.0469V9.375C56.9529%208.93996%2056.7799%208.5228%2056.4723%208.21518C56.1647%207.90755%2055.7475%207.73462%2055.3125%207.73438H43.8281V7.5C43.8281%207.06488%2043.6553%206.64758%2043.3476%206.3399C43.0399%206.03223%2042.6226%205.85938%2042.1875%205.85938C41.7524%205.85938%2041.3351%206.03223%2041.0274%206.3399C40.7197%206.64758%2040.5469%207.06488%2040.5469%207.5V32.5781H43.8281V19.6875Z'%20fill='%23FCA700'/%3e%3cpath%20d='M59.2843%2043.8403L51.7843%2036.3403C51.6322%2036.1878%2051.4514%2036.0668%2051.2524%2035.9842C51.0534%2035.9017%2050.8401%2035.8593%2050.6246%2035.8594H38.4521L44.8121%2045L38.4531%2054.1406H50.6246C50.8401%2054.1407%2051.0534%2054.0983%2051.2524%2054.0158C51.4514%2053.9332%2051.6322%2053.8122%2051.7843%2053.6597L59.2843%2046.1597C59.4368%2046.0075%2059.5577%2045.8267%2059.6402%2045.6277C59.7228%2045.4287%2059.7652%2045.2154%2059.7652%2045C59.7652%2044.7846%2059.7228%2044.5713%2059.6402%2044.3723C59.5577%2044.1733%2059.4368%2043.9925%2059.2843%2043.8403Z'%20fill='%2382B536'/%3e%3c/g%3e%3c/svg%3e",Zl={key:0,class:"overflow-y-auto h-[calc(100%-50px)] tickets-scroll"},Xl={class:"flex flex-col flex-1 gap-[4px] min-w-0 me-1"},Yl=["onDragstart","onClick"],es=["checked","onChange"],ts={class:"flex items-center text-[14px] font-sans font-medium capitalize text-text-secondary flex-1 min-w-0"},ls={class:"truncate"},ss={class:"flex-shrink-0"},as={key:0,class:"flex justify-center text-gray-500 items-center text-[11px] aspect-square w-[24px] h-[24px] bg-bg-body rounded-full border-border-input border-2"},ns={key:1,class:"w-6 h-6 rounded-full"},rs=["src"],os={key:2,class:"text-[11px] aspect-square w-[24px] flex justify-center items-center h-[24px] bg-accent/30 text-accent border-accent border rounded-full"},is={key:1,class:"empty-state flex flex-col justify-center items-center border-dashed border-3 p-2 border-border h-[calc(100%-50px)] min-h-0"},ds=Ce({__name:"SprintCard",props:{sprint:{},sprintId:{},searchQuery:{},checkedSprintAll:{}},emits:["edit-sprint","toggle-start","open-ticket","move-selected-to-backlog","delete-selected-sprint","refresh"],setup(p,{emit:i}){const{theme:D}=dt(),C=p,I=i,h=x([]),n=x([]);F(()=>C.sprint.tickets,_=>{h.value=[..._||[]];const r=new Set(h.value.map(e=>e.id));n.value=n.value.filter(e=>r.has(e))},{immediate:!0,deep:!0});const w=T(()=>{var r;const _=((r=C.searchQuery)==null?void 0:r.toLowerCase())||"";return _?h.value.filter(e=>{var s;const t=((s=e.assignee)==null?void 0:s.u_full_name)??"";return e.key.toLowerCase().includes(_)||e.summary.toLowerCase().includes(_)||t.toLowerCase().includes(_)}):h.value}),U=x(!1),$=x([]),{mutate:N}=Ft({onSuccess:()=>{Ve.success("Card moved to sprint successfully"),I("refresh")},onError:_=>{Ve.error("Failed to move card: "+(_.message||"Unknown error"))}});function A(_,r,e,t){var M;const s=n.value.includes(r.id)?[...n.value]:[r.id],u=s.map(f=>h.value.find(g=>g.id===f)).filter(Boolean);$.value=s;const k=JSON.stringify({id:r.id,ids:s,from:e,sprintId:t,ticket:r,tickets:u});(M=_.dataTransfer)==null||M.setData("text/plain",k),_.dataTransfer&&(_.dataTransfer.effectAllowed="move")}function L(_){var r;U.value=!1,((r=_.dataTransfer)==null?void 0:r.dropEffect)!=="none"&&$.value.length&&(h.value=h.value.filter(e=>!$.value.includes(e.id)),n.value=n.value.filter(e=>!$.value.includes(e))),$.value=[]}function P(){U.value=!0}function B(){U.value=!1}function q(_){var r;_.preventDefault(),U.value=!1;try{const e=(r=_.dataTransfer)==null?void 0:r.getData("text/plain");if(!e)return;const t=JSON.parse(e);if(t.from!=="backlog")return;const u=(t.tickets&&t.tickets.length?t.tickets:t.ticket?[t.ticket]:[]).filter(Boolean).filter(k=>!h.value.some(M=>M.id===k.id));if(!u.length)return;h.value.push(...u),u.forEach(k=>{N({id:C.sprintId,payload:{card_ids:[k.id],priority:(k.priority||"Medium").toLowerCase(),story_points:k.storyPoints||0}})})}catch(e){console.error("Drop error:",e)}}function j(_,r){r?n.value.includes(_)||n.value.push(_):n.value=n.value.filter(e=>e!==_)}function R(_,r){const e=r.target.checked;j(_,e)}return F(()=>C.checkedSprintAll,_=>{_?(n.value=w.value.map(r=>r.id),console.log(w.value)):n.value=[]}),(_,r)=>(o(),v("div",{class:G(["h-full min-h-0 px-2",c(D)==="dark"?"bg-bg-surface":"bg-bg-surface/30"])},[l("div",{class:G([U.value?"ring-2 ring-blue-400 rounded-lg":"","h-full box-border"]),onDragover:r[2]||(r[2]=ie(()=>{},["prevent"])),onDragenter:P,onDragleave:B,onDrop:q},[w.value.length>0?(o(),v("div",Zl,[l("div",Xl,[(o(!0),v(de,null,ye(w.value,e=>{var t,s;return o(),v("div",{key:e.id,draggable:"true",class:G(["flex items-center  gap-3 p-[8px] cursor-pointer transition-colors rounded-[8px]",n.value.includes(e.id)?"border-2 border-[#5a2d7f]":"border border-border-input",c(D)==="dark"?"bg-bg-body hover:bg-bg-surface":"bg-bg-charcoal hover:bg-bg-body"]),onDragstart:u=>A(u,e,"sprint",_.sprint.id),onDragend:r[1]||(r[1]=u=>L(u)),onClick:u=>_.$emit("open-ticket",e)},[l("input",{type:"checkbox",class:G(["custom-checkbox border border-border-input flex-shrink-0",c(D)==="dark"?"bg-bg-charcoal":"bg-bg-body "]),checked:n.value.includes(e.id),onClick:r[0]||(r[0]=ie(()=>{},["stop"])),onChange:u=>R(e.id,u)},null,42,es),l("div",ts,[l("span",ls,z(e.summary),1)]),l("div",ss,[(e==null?void 0:e.assignee)=="Unassigned"?(o(),v("span",as,"UA")):(t=e.assignee)!=null&&t.u_profile_image?(o(),v("div",ns,[l("img",{src:e.assignee.u_profile_image,alt:""},null,8,rs)])):(o(),v("span",os,z(c(Ot)(((s=e.assignee)==null?void 0:s.u_full_name)??"")),1))])],42,Yl)}),128))])])):(o(),v("div",is,r[3]||(r[3]=[al('<img src="'+Jl+'" class="mb-4" alt="backlog-plan" data-v-181800bc><h6 class="text-sm text-text-primary font-semibold mb-1 text-center" data-v-181800bc> Plan your sprint </h6><p class="text-sm text-text-primary/90 mb-3 max-w-120 text-center" data-v-181800bc> Drag work items from the <span class="font-bold" data-v-181800bc>Backlog</span> section or create new ones to plan the work for this sprint. Select <span class="font-bold" data-v-181800bc>Start sprint</span> when you&#39;re ready. </p>',3)])))],34)],2))}}),us=nt(ds,[["__scopeId","data-v-181800bc"]]),cs={class:"px-6 gap-4 bg-bg-input pt-5 pb-8"},ps={class:"mt-3"},ms={class:"flex justify-end gap-2 p-6 sticky bottom-0 bg-bg-input border-t border-border"},fs=Ce({__name:"SprintModal",props:{modelValue:{type:Boolean,default:!1},sprint:{},creatingSprint:{type:Boolean}},emits:["update:modelValue","save","close"],setup(p,{emit:i}){const D=i,C=p,I=T({get:()=>C.modelValue,set:P=>D("update:modelValue",P)}),h=ke({name:"",sprintType:"",description:""}),n=ke({name:!1}),w=T(()=>n.name&&!String(h.name||"").trim()?"Name is required":""),U=T(()=>!!String(h.name||"").trim()&&!w.value);function $(){I.value=!1,D("close")}function N(){n.name=!0,U.value&&D("save",{name:String(h.name||"").trim(),value:String(h.sprintType||"").trim(),description:String(h.description||"").trim()})}function A(){n.name=!1}F(()=>C.sprint,P=>{if(!P){h.name="";return}h.name=P.name??(P==null?void 0:P.title)??"",h.sprintType=P.sprintType??(P==null?void 0:P.sprintType)??"",h.description=P.description??"",A()},{immediate:!0});const L=[{title:"Milestone",_id:"milestone",dot:"#2e9bda"},{title:"Sprint",_id:"sprint",dot:"#7d68c8"},{title:"Huddle",_id:"huddle",dot:"#eea832"}];return(P,B)=>(o(),te(rt,{modelValue:I.value,"onUpdate:modelValue":B[5]||(B[5]=q=>I.value=q),modalClass:"!py-0",size:"md"},{default:X(()=>[B[8]||(B[8]=l("div",{class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-input pb-4"},[l("h2",{class:"text-xl font-semibold"},"Add New Sprint")],-1)),l("div",cs,[O(ot,{class:"rounded-1",modelValue:h.name,"onUpdate:modelValue":B[0]||(B[0]=q=>h.name=q),label:"Name",placeholder:"Sprint 1",error:!!w.value,message:w.value,onBlur:B[1]||(B[1]=q=>n.name=!0)},null,8,["modelValue","error","message"]),O(Je,{class:"rounded-1 mt-3",modelValue:h.sprintType,"onUpdate:modelValue":B[2]||(B[2]=q=>h.sprintType=q),label:"Sprint Type",options:L,error:!!w.value,message:w.value,onBlur:B[3]||(B[3]=q=>n.name=!0)},null,8,["modelValue","error","message"]),l("div",ps,[O(bl,{modelValue:h.description,"onUpdate:modelValue":B[4]||(B[4]=q=>h.description=q),label:"Description",placeholder:"Sprint description...",type:"textarea",rows:4},null,8,["modelValue"])]),B[6]||(B[6]=l("div",null,null,-1))]),l("div",ms,[O(me,{variant:"secondary",onClick:$},{default:X(()=>B[7]||(B[7]=[le("Cancel")])),_:1,__:[7]}),O(me,{variant:"primary",disabled:!U.value,onClick:N},{default:X(()=>[le(z(P.creatingSprint?"Saving...":"Save"),1)]),_:1},8,["disabled"])])]),_:1,__:[8]},8,["modelValue"]))}}),vs="/assets/filter-JX25xO5j.svg",gs={class:"px-6 grid grid-cols-2 gap-4 bg-bg-input pt-5"},bs={class:"flex flex-col col-span-2"},ys={class:"flex flex-col col-span-2"},xs={class:"flex gap-1 flex-col col-span-2 sm:col-span-1"},hs={key:0,class:"text-xs text-red-500"},_s={class:"flex gap-1 flex-col col-span-2 sm:col-span-1"},ks={key:0,class:"text-xs text-red-500"},Ss={class:"flex flex-col col-span-2"},Cs={class:"flex flex-col col-span-2"},ws={class:"bg-bg-body wfull px-4 py-3 rounded-lg text-xs text-text-secondary"},Ds={class:"flex justify-end gap-2 p-6 sticky bottom-0 bg-bg-input"},$s=Ce({__name:"StartSprintModal",props:{modelValue:{type:Boolean,default:!1},sprint:{},creatingSprint:{type:Boolean}},emits:["update:modelValue","save","close"],setup(p,{emit:i}){const D=i,C=p,I=[{_id:1,title:"1 Week"},{_id:2,title:"2 Weeks"},{_id:3,title:"3 Weeks"},{_id:4,title:"4 Weeks"},{_id:5,title:"Custom"}],h=T({get:()=>C.modelValue,set:e=>D("update:modelValue",e)}),n=ke({goal:"",start:new Date().toISOString().slice(0,10),end:"",sprint_name:"",duration:null}),w=ke({start:!1,end:!1}),U=T(()=>!n.start&&w.start?"Start date is required":""),$=T(()=>{if(!n.end&&w.end)return"End date is required";if(n.start&&n.end){const e=j(n.start),t=j(n.end);if(Number.isFinite(e)&&Number.isFinite(t)&&t<e)return"End date cannot be before start date"}return""}),N=T(()=>!U.value&&!$.value);function A(e){n.start=e||"",w.start=!0}function L(e){n.end=e||"",w.end=!0}function P(){h.value=!1,D("close")}function B(){w.start=!0,w.end=!0,N.value&&(D("save",{title:n.sprint_name||"new sprint",duration:String(r.value)||null,start:n.start||"",end:n.end||"",goal:n.goal??""}),h.value=!1,D("close"))}function q(){w.start=!1,w.end=!1}function j(e){return e?new Date(`${e}T00:00:00`).getTime():NaN}const R=T(()=>n.duration===5);F(()=>n.duration,e=>{if(!e)return;const t=typeof e=="object"?e._id:e;if(t!==5&&n.start){const s=_(n.start,t*7);n.end=s}}),F(()=>n.start,e=>{e&&(n.duration&&n.duration!==5&&(n.end=_(n.start,n.duration*7)),n.end&&j(n.end)<j(n.start)&&(n.end=n.start))});function _(e,t){const s=new Date(e);return s.setDate(s.getDate()+t),s.toISOString().slice(0,10)}const r=T(()=>!n.start||!n.end?0:n.duration!==5?n.duration*7:(j(n.end)-j(n.start))/864e5);return F(()=>C.sprint,e=>{if(!e){n.start=new Date().toISOString().slice(0,10),n.end="",n.sprint_name="",n.goal="",q();return}n.goal=e.goal??"",n.start=e.start??new Date().toISOString().slice(0,10),n.end=e.end??"",n.sprint_name=e.title??"",q()},{immediate:!0}),(e,t)=>(o(),te(rt,{modelValue:h.value,"onUpdate:modelValue":t[3]||(t[3]=s=>h.value=s),modalClass:"!py-0",size:"md"},{default:X(()=>[l("div",{class:"sticky top-0 z-10 flex justify-between items-center py-6 px-6 border-b border-border bg-bg-input"},[t[5]||(t[5]=l("h2",{class:"text-xl font-semibold"},"Start Sprint",-1)),l("span",{onClick:P,class:"text-sm text-text-secondary cursor-pointer"},t[4]||(t[4]=[l("i",{class:"fa-solid fa-xmark text-text-primary text-[19px]"},null,-1)]))]),l("div",gs,[l("div",bs,[O(ot,{modelValue:n.sprint_name,"onUpdate:modelValue":t[0]||(t[0]=s=>n.sprint_name=s),label:"Sprint Name",placeholder:"Enter sprint name",size:"md",class:"rounded-1"},null,8,["modelValue"])]),l("div",ys,[O(Je,{modelValue:n.duration,"onUpdate:modelValue":t[1]||(t[1]=s=>n.duration=s),options:I,label:"Duration",placeholder:"Select duration"},null,8,["modelValue"])]),l("div",xs,[t[7]||(t[7]=l("label",{class:"text-sm font-medium"},"Start date",-1)),l("div",{class:G(["border relative flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",U.value?"border-red-500":""])},[O(Ze,{placeholder:"Set start date",class:"w-full z-1","model-value":n.start,"emit-as":"ymd","onUpdate:modelValue":A},null,8,["model-value"]),t[6]||(t[6]=l("i",{class:"fa-regular fa-calendar absolute right-2 top-3 z-0"},null,-1))],2),U.value?(o(),v("p",hs,z(U.value),1)):W("",!0)]),l("div",_s,[t[8]||(t[8]=l("label",{class:"text-sm font-medium"},"End date",-1)),l("div",{class:G(["border relative flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",$.value?"border-red-500":""])},[O(Ze,{placeholder:"Set end date",class:"w-full","model-value":n.end,"emit-as":"ymd",disabled:!R.value,"onUpdate:modelValue":L,"min-date":n.start},null,8,["model-value","disabled","min-date"]),l("i",{class:G(["fa-regular fa-calendar absolute right-2 top-3 z-0",{"text-text-secondary/30 pointer-events-none":!R.value,"text-text-primary":R.value}])},null,2)],2),$.value?(o(),v("p",ks,z($.value),1)):W("",!0)]),l("div",Ss,[t[9]||(t[9]=l("label",{class:"text-sm font-medium pb-1"},"Goal (optional)",-1)),Te(l("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.goal=s),class:"w-full text-sm rounded-md border border-border px-3 py-2 bg-bg-input",rows:"2",placeholder:"Ship onboarding flow"},null,512),[[It,n.goal]])]),l("div",Cs,[l("p",ws," Duration: "+z(n.start?r.value+" days":""),1)])]),l("div",Ds,[O(me,{variant:"secondary",onClick:P},{default:X(()=>t[10]||(t[10]=[le("Cancel")])),_:1,__:[10]}),O(me,{variant:"primary",disabled:!N.value,onClick:B},{default:X(()=>[le(z(e.creatingSprint?"Starting...":"Start"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue"]))}}),Vs={class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-body pb-4 mb-4"},Ts={class:"text-sm text-text-secondary mt-1"},Ls={class:"flex items-center gap-2 mt-4 w-full"},Es={class:"flex items-center gap-2 flex-1"},Bs={class:"px-6 min-h-[400px]"},Ms={key:0},Us={key:0,class:"flex items-center justify-center py-12"},Ps={key:1,class:"text-center py-12 text-text-secondary"},Os={key:2,class:"grid grid-cols-2 gap-3"},Is=["onClick"],As={class:"flex items-center gap-3"},qs={class:"w-10 h-10 rounded-lg bg-bg-input flex items-center justify-center group-hover:bg-primary/10 transition-colors"},Ns={class:"font-medium"},js={key:1},Fs={key:0,class:"flex items-center justify-center py-12"},zs={key:1,class:"text-center py-12 text-text-secondary"},Rs={key:2,class:"grid grid-cols-2 gap-3"},Hs=["onClick"],Qs={class:"flex items-center gap-3"},Ks={class:"w-10 h-10 rounded-lg bg-bg-input flex items-center justify-center group-hover:bg-primary/10 transition-colors"},Ws={class:"font-medium"},Gs={key:2},Js={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Zs={key:0,class:"flex flex-col"},Xs={class:"flex gap-1 flex-col"},Ys={key:0,class:"text-xs text-red-500"},ea={class:"flex gap-1 flex-col"},ta={key:0,class:"text-xs text-red-500"},la={class:"mt-4"},sa={key:0,class:"text-xs text-red-500 mt-1 px-1"},aa={class:"flex justify-between gap-2 p-6 mt-8 sticky bottom-0 bg-bg-body border-t border-border"},na={key:1},ra={class:"flex gap-2"},oa=Ce({__name:"CreateBacklogTicketWithModuleSelection",props:{modelValue:{type:Boolean,default:!1},listId:{},selectedVariable:{}},emits:["update:modelValue","created"],setup(p,{emit:i}){const D=i,C=p,I=it(),{workspaceId:h}=At(),n=x(1),w=x(null),U=x(null),{data:$,isLoading:N}=nl(h.value),A=T(()=>{var m;return((m=$.value)==null?void 0:m.modules)||[]}),{data:L,isFetching:P,refetch:B}=qt({workspace_module_id:w,workspace_id:h},{enabled:T(()=>!!w.value)});F(()=>w.value,()=>{B()});const q=T(()=>L.value||[]),{data:j}=rl(h.value),{data:R}=Nt(h.value,w,{enabled:T(()=>!!w.value)}),{mutate:_,isPending:r}=ol({onSuccess:()=>{xe(),I.invalidateQueries({queryKey:["sheet-list"]}),I.invalidateQueries({queryKey:["backlog-list"]}),e.value=!1}}),e=T({get:()=>C.modelValue,set:m=>D("update:modelValue",m)}),t=T(()=>{switch(n.value){case 1:return"Select a module to create the ticket in";case 2:return"Select a sheet within the module";case 3:return"Provide the ticket details below and click Add Ticket";default:return""}}),s=T(()=>((R==null?void 0:R.value)??[]).filter(m=>{var b;return((b=m==null?void 0:m.type)==null?void 0:b.title)==="Select"})),u=m=>m.map(b=>({_id:b,title:b})),k=T(()=>((j==null?void 0:j.value)??[]).map(m=>{var b;return{_id:m._id,title:((b=m==null?void 0:m.variables)==null?void 0:b["lane-title"])??String(m._id)}})),M=m=>m.slug,f=ke({title:"",description:"",startDate:null,endDate:null,lane_id:null,variables:{}});F(s,m=>{for(const b of m){const y=M(b);y in f.variables||(f.variables[y]=null)}},{immediate:!0});const g=ke({title:!1,description:!1,startDate:!1,endDate:!1,lane:!1}),Z=T(()=>!!f.title.trim()&&!!f.lane_id&&!!f.startDate&&!!f.endDate&&!ue.value&&!ce.value&&!H.value&&!pe.value&&!S.value);function fe(m){f.startDate=m,g.startDate=!0}function Le(m){f.endDate=m,g.endDate=!0}function Ee(m){f.lane_id=m,g.lane=!0}function Be(m){w.value=m._id,n.value=2}function ae(m){U.value=m._id,n.value=3}function ne(){n.value>1&&n.value--}function ee(){e.value=!1,xe()}function xe(){n.value=1,w.value=null,U.value=null,f.title="",f.description="",f.startDate=null,f.endDate=null,f.lane_id=null,f.variables={},g.title=!1,g.description=!1,g.startDate=!1,g.endDate=!1,g.lane=!1}const Me=T(()=>{var m;return(m=R==null?void 0:R.value)==null?void 0:m.find(b=>(b==null?void 0:b._id)==C.selectedVariable)}),ue=T(()=>g.title&&!f.title.trim()?"Title is required":""),ce=T(()=>g.startDate?f.startDate?"":"Start date is required":""),H=T(()=>g.endDate?f.endDate?f.startDate&&f.endDate&&f.endDate<f.startDate?"End date cannot be before start date":"":"End date is required":""),pe=T(()=>g.lane?f.lane_id?"":"Lane is required":""),S=T(()=>g.description&&!f.description.trim()?"Description is required":""),E=new Date().toISOString().split("T")[0];function re(){var b;if(g.title=!0,g.lane=!0,g.description=!0,g.startDate=!0,g.endDate=!0,!Z.value||r.value)return;const m={sheet_list_id:C.listId,workspace_id:h.value,sheet_id:U.value,workspace_lane_id:f.lane_id,variables:{...f.variables,[`${(b=Me.value)==null?void 0:b.slug}`]:C.listId,"card-title":f.title.trim(),"card-description":f.description.trim(),"start-date":f.startDate,"end-date":f.endDate},createdAt:new Date().toISOString()};_(m)}return F(()=>f.title,m=>{m!=null&&m.trim()&&g.title&&(g.title=!1)}),F(()=>f.lane_id,m=>{m&&g.lane&&(g.lane=!1)}),F(()=>f.startDate,m=>{m&&g.startDate&&(g.startDate=!1)}),F(()=>f.endDate,m=>{m&&g.endDate&&(g.endDate=!1)}),F(()=>f.description,m=>{m!=null&&m.trim()&&g.description&&(g.description=!1)}),(m,b)=>(o(),te(rt,{modelValue:e.value,"onUpdate:modelValue":b[4]||(b[4]=y=>e.value=y),modalClass:"!py-0",size:"lg"},{default:X(()=>[l("div",Vs,[b[5]||(b[5]=l("h2",{class:"text-xl font-semibold"},"Create Backlog Ticket",-1)),l("p",Ts,z(t.value),1),l("div",Ls,[(o(),v(de,null,ye(3,y=>l("div",{key:y,class:"flex items-center flex-1"},[l("div",Es,[l("div",{class:G(["h-1 flex-1 rounded-full transition-colors",n.value>=y?"bg-primary":"bg-border"])},null,2)])])),64))])]),l("div",Bs,[n.value===1?(o(),v("div",Ms,[b[7]||(b[7]=l("h3",{class:"text-lg font-medium mb-4"},"Select Module",-1)),c(N)?(o(),v("div",Us,b[6]||(b[6]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):!A.value||A.value.length===0?(o(),v("div",Ps," No modules available ")):(o(),v("div",Os,[(o(!0),v(de,null,ye(A.value,y=>{var J,Q,ve,he,ge;return o(),v("button",{key:y._id,onClick:Ue=>Be(y),class:G(["p-4 border rounded-lg hover:border-primary transition-all text-left group",w.value===y._id?"border-primary bg-primary/5":"border-border"])},[l("div",As,[l("div",qs,[l("i",{class:G([`${(Q=(J=y==null?void 0:y.variables)==null?void 0:J["module-icon"])==null?void 0:Q.prefix} ${(he=(ve=y==null?void 0:y.variables)==null?void 0:ve["module-icon"])==null?void 0:he.iconName}`,"text-lg"])},null,2)]),l("div",null,[l("p",Ns,z(((ge=y.variables)==null?void 0:ge["module-title"])||"Untitled"),1)])])],10,Is)}),128))]))])):n.value===2?(o(),v("div",js,[b[9]||(b[9]=l("h3",{class:"text-lg font-medium mb-4"},"Select Sheet",-1)),c(P)?(o(),v("div",Fs,b[8]||(b[8]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):!q.value||q.value.length===0?(o(),v("div",zs," No sheets available for this module ")):(o(),v("div",Rs,[(o(!0),v(de,null,ye(q.value,y=>{var J,Q;return o(),v("button",{key:y._id,onClick:ve=>ae(y),class:G(["p-4 border rounded-lg hover:border-primary transition-all text-left group",U.value===y._id?"border-primary bg-primary/5":"border-border"])},[l("div",Qs,[l("div",Ks,[l("i",{class:G(`${(J=y==null?void 0:y.variables["sheet-icon"])==null?void 0:J.prefix} ${(Q=y==null?void 0:y.variables["sheet-icon"])==null?void 0:Q.iconName} text-lg`)},null,2)]),l("div",null,[l("p",Ws,z((y==null?void 0:y.variables["sheet-title"])||"Untitled Sheet"),1)])])],10,Hs)}),128))]))])):n.value===3?(o(),v("div",Gs,[b[12]||(b[12]=l("h3",{class:"text-lg font-medium mb-4"},"Ticket Details",-1)),l("div",Js,[O(ot,{modelValue:f.title,"onUpdate:modelValue":b[0]||(b[0]=y=>f.title=y),label:"Ticket Title",placeholder:"e.g., Implement real-time notifications",error:!!ue.value,message:ue.value,onBlur:b[1]||(b[1]=y=>g.title=!0)},null,8,["modelValue","error","message"]),k.value.length>0?(o(),v("div",Zs,[O(Je,{size:"md",label:"Lane",options:k.value,placeholder:"Select lane",allowCustom:!1,"model-value":f.lane_id,"onUpdate:modelValue":Ee,error:!!pe.value,message:pe.value},null,8,["options","model-value","error","message"])])):W("",!0),(o(!0),v(de,null,ye(s.value,y=>Te((o(),te(Je,{size:"md",key:M(y),modelValue:f.variables[y.slug],"onUpdate:modelValue":J=>f.variables[y.slug]=J,options:u(y.data),label:y.title,placeholder:"Select value",allowCustom:!0},null,8,["modelValue","onUpdate:modelValue","options","label"])),[[st,(y==null?void 0:y._id)!=m.selectedVariable]])),128)),l("div",Xs,[b[10]||(b[10]=l("label",{class:"text-sm"},"Start date",-1)),l("div",{class:G(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",ce.value?"border-red-500":""])},[O(Ze,{placeholder:"Set start date",class:"w-full","model-value":f.startDate,"emit-as":"ymd","onUpdate:modelValue":fe,"min-date":c(E)},null,8,["model-value","min-date"])],2),ce.value?(o(),v("p",Ys,z(ce.value),1)):W("",!0)]),l("div",ea,[b[11]||(b[11]=l("label",{class:"text-sm"},"End date",-1)),l("div",{class:G(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",H.value?"border-red-500":""])},[O(Ze,{placeholder:"Set end date",class:"w-full","model-value":f.endDate,"emit-as":"ymd","onUpdate:modelValue":Le,"min-date":f.startDate||c(E)},null,8,["model-value","min-date"])],2),H.value?(o(),v("p",ta,z(H.value),1)):W("",!0)])]),l("div",la,[O(il,{label:"Description",placeholder:"What needs to be done, acceptance criteria, links…",modelValue:f.description,"onUpdate:modelValue":b[2]||(b[2]=y=>f.description=y),onBlur:b[3]||(b[3]=y=>g.description=!0)},null,8,["modelValue"]),S.value?(o(),v("p",sa,z(S.value),1)):W("",!0)])])):W("",!0)]),l("div",aa,[n.value>1?(o(),te(me,{key:0,variant:"secondary",onClick:ne},{default:X(()=>b[13]||(b[13]=[le("Back")])),_:1,__:[13]})):(o(),v("div",na)),l("div",ra,[O(me,{variant:"secondary",onClick:ee},{default:X(()=>b[14]||(b[14]=[le("Cancel")])),_:1,__:[14]}),n.value===3?(o(),te(me,{key:0,variant:"primary",disabled:!Z.value||c(r),onClick:re},{default:X(()=>[le(z(c(r)?"Adding…":"Add Ticket"),1)]),_:1},8,["disabled"])):W("",!0)])])]),_:1},8,["modelValue"]))}}),ia={class:"flex gap-2 flex-auto overflow-y-auto"},da={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex"},ua={class:"flex overflow-x-auto gap-3 p-4"},ca={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},pa=Ce({__name:"ActiveSprint",props:{sptint_id:{},searchQuery:{}},setup(p){const i=p,D=Ke(()=>We(()=>import("./CreateTaskModal-DuDhFaGK.js"),__vite__mapDeps([0,1,2,3]))),C=Ke(()=>We(()=>import("./ConfirmDeleteModal-BmB-CETv.js"),__vite__mapDeps([4,5,2,3]))),I=Ke(()=>We(()=>import("./SidePanel-BD0CbTFZ.js"),__vite__mapDeps([6,2,3,7]))),h=Ke(()=>We(()=>import("./KanbanBoard-BMvqeWmM.js"),__vite__mapDeps([8,9,2,3,10,5,11]))),n=ml(),{workspaceId:w,moduleId:U}=At(),{data:$}=qt({workspace_id:w,workspace_module_id:U}),N=T(()=>{var S;return $.value?(S=$.value[0])==null?void 0:S._id:""}),A=x(N),{data:L}=Nt(w.value,U.value,A),P=it(),{mutate:B,isPending:q}=dl({onSuccess:()=>{P.invalidateQueries({queryKey:["sheet-list"]}),Ee.value="",ae.value=!1,Le.value=!1,ae.value=!1}}),j=S=>{B({workspace_id:w.value,module_id:U.value,variable_id:_.value,value:S})},R=T(()=>{var S;return L.value?(S=L.value[0])==null?void 0:S._id:""}),_=x(R),r=ul(),e=T(()=>i.sptint_id),{data:t,isPending:s}=wl(e),u=x(!1),k=x(),M=S=>{k.value=S},f=cl(),g=pl();function Z(S){S.type=="column"?f.mutate({payload:{workspace_id:w.value,workspace_module_id:U.value,variable_id:_.value,moved_value:S.meta.id,new_index:S.meta.newIndex}}):g.mutate({payload:{workspace_id:w.value,card_id:S.meta.moved._id,group_value:S.meta.fromColumnId,group_variable_id:_.value,new_index:S.meta.newIndex,sheet_id:A.value}})}const fe=S=>{};F($,S=>{var E;(S==null?void 0:S.length)>0&&(A.value=(E=S[0])==null?void 0:E._id)});const Le=x(!1),Ee=x(""),Be=S=>{B({workspace_id:n.params.id,module_id:n.params.module_id,new_value:S.title,value:S.oldTitle,variable_id:_.value})},ae=x(!1),ne=x(),ee=()=>{B({value:ne.value.title,workspace_id:w.value,module_id:U.value,newValue:ne.value.title,variable_id:_.value,is_trash:!0})},xe=S=>{ae.value=!0,ne.value=S},Me=S=>{u.value=!0,ne.value=S},ue=T(()=>i.searchQuery),ce=x("");F(ue,_l.debounce(S=>{ce.value=S},200));const H=T(()=>{const S=t.value.flatMap(E=>E.cards.map(re=>({...re,columnId:E.title})));return new hl(S,{keys:["card-title","card-description","card-key"],threshold:.3})}),pe=T(()=>{if(!ue.value)return t.value;const S=H.value.search(ue.value).map(E=>E.item);return t.value.map(E=>({...E,cards:S.filter(re=>re.columnId===E.title)}))});return(S,E)=>{var re,m,b,y,J;return o(),v("div",ia,[l("div",da,[Te(O(jt,null,null,512),[[st,c(s)]]),Te(l("div",ua,[O(c(h),{onOnPlus:Me,"onDelete:column":E[0]||(E[0]=Q=>xe(Q)),"onUpdate:column":E[1]||(E[1]=Q=>Be(Q)),onReorder:Z,onAddColumn:j,"onSelect:ticket":M,board:pe.value,onOnBoardUpdate:fe,variable_id:_.value,sheet_id:A.value},{"column-footer":X(Q=>{var ve,he,ge,Ue,He;return[(he=(ve=c(r))==null?void 0:ve.transitions)!=null&&he.all_allowed&&!((He=(Ue=(ge=c(r))==null?void 0:ge.transitions)==null?void 0:Ue.all_allowed)!=null&&He.includes(Q.column.title))&&c(r).transitions.currentColumn!=Q.column.title?(o(),v("div",ca," Disbale ( you can't drop here )")):W("",!0)]}),ticket:X(({ticket:Q})=>[O(xl,{selectedVar:_.value,onSelect:()=>{M(Q)},ticket:Q},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"])],512),[[st,!c(s)]])]),O(c(C),{onClick:E[2]||(E[2]=ie(()=>{},["stop"])),modelValue:ae.value,"onUpdate:modelValue":E[3]||(E[3]=Q=>ae.value=Q),title:"Delete List",itemLabel:"list",itemName:(re=ne.value)==null?void 0:re.title,requireMatchText:(m=ne.value)==null?void 0:m.title,confirmText:"Delete workspace",cancelText:"Cancel",size:"md",loading:c(q),onConfirm:ee,onCancel:E[4]||(E[4]=()=>{ae.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),u.value?(o(),te(c(D),{selectedVariable:_.value,listId:(b=ne.value)==null?void 0:b.title,sheet_id:A.value,key:"createTaskModalKey",modelValue:u.value,"onUpdate:modelValue":E[5]||(E[5]=Q=>u.value=Q),onSubmit:E[6]||(E[6]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):W("",!0),(y=k.value)!=null&&y._id?(o(),te(c(I),{key:1,details:k.value,onClose:E[7]||(E[7]=()=>{M({variables:{}})}),showPanel:!!((J=k.value)!=null&&J._id)},null,8,["details","showPanel"])):W("",!0)])}}}),ma={class:"flex-auto flex-grow h-full min-h-0 bg-bg-card rounded-[6px] border border-border overflow-x-auto flex-col flex"},fa={key:2,class:"p-4 w-full min-w-0 box-border h-full min-h-0"},va={class:"flex items-center justify-between"},ga={class:"text-sm font-semibold flex gap-2 items-center"},ba={class:"flex items-center gap-2"},ya={class:"h-8 w-22 flex items-center justify-center gap-2 rounded-md border cursor-pointer aspect-square text-sm border-border hover:bg-bg-body"},xa=["src"],ha={key:0,class:"w-full h-full min-h-[250px] flex justify-center items-center"},_a={class:"space-y-4 rounded-md relative group pt-2 ovrflow-hidden flex-1 h-full min-h-0 box-border min-w-[400px] border border-border-input bg-bg-surface overflow-x-hidden"},ka={class:"flex justify-between px-3"},Sa={class:"flex items-center gap-2 bg-transparent min-w-0 pe-2"},Ca=["onClick"],wa={class:"flex items-center gap-2 max-w-full"},Da={class:"flex items-center gap-2 max-w-full"},$a={class:"truncate max-w-[160px]"},Va={key:1,class:"absolute left-0 mt-2 w-60 bg-white border border-gray-200 rounded-xl shadow-lg z-50 max-h-64 overflow-y-auto overflow-x-hidden"},Ta={class:"relative flex-1"},La={key:0,class:"relative inline-block group w-full"},Ea=["onDblclick"],Ba=["onUpdate:modelValue"],Ma={class:"relative ml-2 inline-block group"},Ua=["onClick"],Pa={class:"flex gap-3 items-center"},Oa={class:"hidden sm:flex flex-1"},Ia={class:"gap-2 hidden lg:flex"},Aa={class:"flex gap-2 lg:hidden"},qa=["title"],Na=["disabled"],ja={key:0,class:"fixed inset-0 z-50 -top-30 flex items-center justify-center bg-black/40"},Fa={class:"bg-white rounded-lg w-11/12 max-w-md p-4"},za={class:"flex items-center gap-2"},Ra={key:0,class:"w-full h-full min-h-[250px] flex justify-center items-center"},Ge=400,Ha=Ce({__name:"Plan",setup(p){const{theme:i}=dt(),D=x(!1),C=x(""),I=x(!1),h=x(!1),{canCreateCard:n}=Ut(),w=x(null),U=x(!1),$=x(!1),N=T(()=>L.value.value),A=[{label:"Milestone",value:"milestone",dot:"#2e9bda"},{label:"Sprint",value:"sprint",dot:"#7d68c8"},{label:"Huddle",value:"huddle",dot:"#eea832"}],L=x(A[0]),P=x(null),B=x(!1);ze(P,()=>{B.value=!1});const q=()=>{D.value=!1},{workspaceId:j}=Pt(),R=x(!1),{moveSelectedToSprint:_,moveSelectedToBacklog:r,deleteSelected:e,saveSprintMeta:t,toggleStartSprint:s}=Ml(),{data:u,refetch:k}=at(j,N,{});F(()=>N.value,(d,a)=>{d!==a&&k()});const{mutate:M,isPending:f}=Ll({onSuccess:()=>{Ye.invalidateQueries({queryKey:["sprint-list"]}),Z.value=!1}}),g=x(null),Z=x(!1),fe=()=>{var d;M((d=g.value)==null?void 0:d._id)},{mutate:Le,isPending:Ee}=Lt({onSuccess:d=>{t({name:d.title}),console.log(d,"this is testing data"),Be({id:H.value,payload:{title:d.title,start_date:d.start_date,end_date:d.end_date,goal:d.goal,duration:Number(d.duration_days)}}),E.value=!1}}),{mutate:Be,isPending:ae}=Tl({onSuccess:()=>{S()}}),ne=d=>{console.log("helo",g.value,d),Le({id:H.value,payload:{title:d.title,duration:d.duration,start_date:d.start,end_date:d.end,goal:d.goal}})},{data:ee,refetch:xe}=Sl(j.value,N);F(()=>N.value,(d,a)=>{d!==a&&xe()});const{refetch:Me,isPending:ue}=at(j,N),ce=T(()=>{var d,a;return(a=(d=ee==null?void 0:ee.value)==null?void 0:d.sprints[0])==null?void 0:a._id}),H=x(ce.value);F(()=>ce.value,d=>{H.value=d}),F(()=>H.value,d=>{var a;g.value=((a=ee.value)==null?void 0:a.sprints.find(Y=>Y._id===d))||null});const{data:pe,refetch:S}=$l(H),E=x(!1),re=()=>{console.log(J.value,"this is sprint"),E.value=!0},{data:m,isPending:b,refetch:y}=Cl(H);F(()=>H.value,()=>{S()});const J=T(()=>{var Y,oe;const d=(Y=m==null?void 0:m.value)==null?void 0:Y.backlog_items;if(!d)return null;const a=(((oe=m==null?void 0:m.value)==null?void 0:oe.backlog_items)||[]).map(K=>{var Ie,Ae,qe,Ne,je;const be=((Ie=K==null?void 0:K.card)==null?void 0:Ie.variables)||{},_e=((Ae=K==null?void 0:K.card)==null?void 0:Ae._id)||K.card_id;return{id:_e,key:be["card-code"]||(_e==null?void 0:_e.slice(-6))||"PRJ-?",summary:be["card-title"]||"(untitled)",type:"Story",status:Q(String(be["card-status"]||"").trim()),assignee:((Ne=(qe=K==null?void 0:K.card)==null?void 0:qe.assigned_to)==null?void 0:Ne.name)||"Unassigned",storyPoints:Number(K.story_points||0),priority:ve(String(be.priority||"").trim()),createdAt:((je=K==null?void 0:K.card)==null?void 0:je.created_at)||new Date().toISOString(),description:be["card-description"]||""}});return{id:d._id,name:d.title||"Sprint 1",title:d.title,goal:"",start:"",end:"",started:!1,tickets:a}});function Q(d){const a=d.toLowerCase();return a.includes("progress")?"In Progress":a.includes("done")||a.includes("complete")?"Done":"Todo"}function ve(d){const a=d.toLowerCase();return a==="highest"||a==="blocker"||a==="critical"?"Highest":a==="high"||a==="major"?"High":a==="medium"||a==="normal"?"Medium":"Low"}const{mutate:he}=El({onSuccess:()=>{Ve.success("Card removed from sprint successfully"),ge()},onError:d=>{Ve.error("Failed to remove card from sprint"),console.error("Failed to remove card from sprint:",d)}});function ge(){y(),xe(),Me(),S()}function Ue(d,a){const Y=Array.isArray(d)?d:[d],oe=a||H.value;!oe||!Y.length||Y.forEach(K=>{he({sprintId:oe,cardId:K})})}const He=x(!1),Xe=x(null);function ut(){R.value=!0,Xe.value=null}function ct(d){Xe.value=d,D.value=!0,He.value=!0}const we=x(!1);function Rt(){we.value=!0}const Ye=it(),{mutate:Ht,isPending:Qt}=Vl({onSuccess:d=>{t({name:d.title}),Ye.invalidateQueries({queryKey:["sprint-list"]}),we.value=!1}}),{mutate:Kt,isPending:Wt}=Lt({onSuccess:d=>{t({name:d.title}),Ye.invalidateQueries({queryKey:["sprint-list"]}),we.value=!1}});function Gt(d){var a;g.value?Kt({id:(a=g.value)==null?void 0:a._id,payload:{workspace_id:j.value,title:d.name,sprintType:d.value,description:d.description}}):Ht({payload:{workspace_id:j.value,title:d.name,sprintType:d.value,description:d.description}})}function Jt(){g.value=null,we.value=!0}function Zt(d){g.value=d,Z.value=!0}const{mutate:Xt,isPending:pt}=Dl(H,{onSuccess:()=>{S()}}),mt=()=>{Xt({})},Pe=x(null),Oe=x(0);let et=!1;fl(()=>{if(!Pe.value)return;const d=Pe.value.offsetWidth;Oe.value=d/3});function Yt(){et=!0,document.addEventListener("mousemove",ft),document.addEventListener("mouseup",vt)}function ft(d){if(!et||!Pe.value)return;const a=Pe.value.getBoundingClientRect(),Y=d.clientX-a.left;Y<Ge?Oe.value=Ge:Y>a.width-Ge?Oe.value=a.width-Ge:Oe.value=Y}function vt(){et=!1,document.removeEventListener("mousemove",ft),document.removeEventListener("mouseup",vt)}const De=x(null);function el(d){De.value=d._id}function gt(){De.value=null}function bt(){De.value=null}ze(w,()=>{$.value=!1});const tl=d=>{L.value=d,U.value=!1};ze(P,()=>{U.value=!1});const yt=x(null),Qe=x(!1),xt=x(null);ze(yt,()=>{Qe.value=!1}),ze(xt,()=>{var d,a;De.value&&((a=(d=ee.value)==null?void 0:d.sprints)!=null&&a.find(oe=>oe._id===De.value))&&gt()});const tt=x(!1),ll=()=>{tt.value=!0},sl=()=>{tt.value=!1};return(d,a)=>{var Y,oe,K,be,_e,Ie,Ae,qe,Ne,je,ht,_t,kt,St,Ct,wt;return o(),v(de,null,[l("div",ma,[((Y=c(pe))==null?void 0:Y.status)=="active"?(o(),te(pa,{key:0,sptint_id:H.value,searchQuery:C.value},null,8,["sptint_id","searchQuery"])):c(ae)?(o(),te(jt,{key:1})):(o(),v("div",fa,[l("div",{class:"flex gap-2 h-full max-h-screen min-h-0 box-border overflow-x-auto group",ref_key:"containerRef",ref:Pe},[l("section",{class:G(["space-y-4 p-4 rounded-md relative group overflow-hidden box-border h-full min-h-0 min-w-[400px]",c(i)==="dark"?"bg-bg-surface":"bg-bg-surface/30"]),style:Fe({width:Oe.value+"px"})},[l("div",va,[l("h2",ga,[Te(l("input",{type:"checkbox",class:"custom-checkbox bg-bg-body border border-border-input flex-shrink-0","onUpdate:modelValue":a[0]||(a[0]=V=>I.value=V)},null,512),[[vl,I.value]]),le(" Backlog ("+z((K=(oe=c(u))==null?void 0:oe.cards)==null?void 0:K.length)+" "+z(((_e=(be=c(u))==null?void 0:be.cards)==null?void 0:_e.length)>1?"Tasks":"Task")+") ",1)]),l("div",ba,[l("button",ya,[l("img",{src:c(vs),alt:"icon",class:"w-[16px]"},null,8,xa),a[19]||(a[19]=le(" Filters "))]),c(n)?(o(),v("button",{key:0,class:"w-8 h-8 rounded cursor-pointer aspect-square text-sm hover:bg-bg-body",onClick:ut},a[20]||(a[20]=[l("i",{class:"text-text-primary fa-regular fa-plus"},null,-1)]))):W("",!0)])]),c(ue)?(o(),v("div",ha,a[21]||(a[21]=[l("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):(o(),te(Gl,{key:1,checkedAll:I.value,"sprint-type":N.value,searchQuery:C.value,onMoveSelectedToSprint:c(_),onDeleteSelectedBacklog:a[1]||(a[1]=V=>c(e)("backlog")),onOpenTicket:ct,onTicketMovedToBacklog:Ue,onOpenCreateTicket:ut},null,8,["checkedAll","sprint-type","searchQuery","onMoveSelectedToSprint"]))],6),l("div",{class:"h-full w-[3px] relative z-10 opacity-0 group-hover:opacity-100 bg-red hover:bg-accent cursor-col-resize transition",onMousedown:Yt},null,32),l("section",_a,[l("div",ka,[l("div",Sa,[l("div",{ref_key:"elipseWrapperSprint",ref:w,class:"relative inline-block"},[l("button",{onClick:a[2]||(a[2]=ie(V=>$.value=!$.value,["stop"])),class:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium bg-transparent rounded-lg",style:Fe({border:"1px solid "+L.value.dot})},[l("span",{class:"w-2 h-2 rounded-full",style:Fe({backgroundColor:L.value.dot})},null,4),le(" "+z(L.value.label)+" ",1),a[22]||(a[22]=l("i",{class:"fas fa-chevron-down text-xs"},null,-1))],4),O($t,{name:"fade"},{default:X(()=>[$.value?(o(),v("ul",{key:0,onClick:a[3]||(a[3]=ie(()=>{},["stop"])),class:"absolute left-0 mt-2 w-44 bg-bg-dropdown border border-border rounded-xl shadow-lg z-50"},[(o(),v(de,null,ye(A,V=>l("li",{key:V.value,onClick:lt=>tl(V),class:"flex items-center gap-3 px-4 py-2 text-sm cursor-pointer"},[l("span",{class:"w-2 h-2 rounded-full",style:Fe({backgroundColor:V.dot})},null,4),le(" "+z(V.label),1)],8,Ca)),64))])):W("",!0)]),_:1})],512),l("div",wa,[l("div",Da,[l("div",{ref_key:"sprintDropdownWrapperRef",ref:yt,class:"relative min-w-0"},[(Ie=c(ee))!=null&&Ie.sprints.length?(o(),v("button",{key:0,onClick:a[4]||(a[4]=V=>Qe.value=!Qe.value),class:G(["flex items-center gap-3 px-4 py-1.5 rounded-lg text-sm font-medium transition-all",H.value?"text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"]),style:Fe(H.value?{backgroundColor:L.value.dot}:{})},[l("span",$a,z((Ne=(qe=(Ae=c(ee))==null?void 0:Ae.sprints)==null?void 0:qe.find(V=>V._id===H.value))==null?void 0:Ne.title),1),a[23]||(a[23]=l("i",{class:"fas fa-chevron-down text-xs"},null,-1))],6)):W("",!0),Qe.value?(o(),v("div",Va,[(je=c(ee))!=null&&je.sprints.length?(o(!0),v(de,{key:0},ye((ht=c(ee))==null?void 0:ht.sprints,V=>{var lt,Dt;return o(),v("div",{key:V._id,class:"relative px-4 py-2 flex items-center justify-between text-sm cursor-pointer transition-colors hover:bg-gray-100"},[l("div",Ta,[De.value!==V._id?(o(),v("div",La,[l("button",{class:"text-left flex-1 truncate w-full",onDblclick:ie($e=>el(V),["stop"])},z(V.title),41,Ea)])):Te((o(),v("input",{key:1,ref_for:!0,ref_key:"editingInputRef",ref:xt,"onUpdate:modelValue":$e=>V.tempTitle=$e,class:"flex-1 px-1 py-1 text-sm rounded outline-none bg-white border border-[#7d68c8] text-gray-500",placeholder:"Enter new name",onBlur:a[5]||(a[5]=$e=>bt()),onKeyup:[a[6]||(a[6]=Vt($e=>bt(),["enter"])),a[7]||(a[7]=Vt($e=>gt(),["esc"]))],autofocus:""},null,40,Ba)),[[It,V.tempTitle]])]),l("div",Ma,[((Dt=(lt=c(ee))==null?void 0:lt.sprints)==null?void 0:Dt.length)>1&&!V.isEditing?(o(),v("button",{key:0,onClick:ie($e=>Zt(V),["stop"]),class:"w-4 h-4 rounded-full flex items-center justify-center text-gray-400 hover:text-red-500"},a[24]||(a[24]=[l("i",{class:"fas fa-times text-xs"},null,-1)]),8,Ua)):W("",!0)])])}),128)):W("",!0)])):W("",!0)],512)]),l("button",{onClick:a[8]||(a[8]=V=>Jt()),class:"w-8 h-8 flex items-center justify-center rounded-full bg-accent border text-white transition-colors shrink-0"},a[25]||(a[25]=[l("i",{class:"fa-solid fa-plus text-sm"},null,-1)]))])]),l("div",Pa,[l("div",Oa,[O(Tt,{placeholder:"Search in sprint",modelValue:C.value,"onUpdate:modelValue":a[9]||(a[9]=V=>C.value=V)},null,8,["modelValue"])]),l("button",{class:"sm:hidden flex items-center justify-center w-8 h-8 ms-4 rounded-lg bg-gray-100 hover:bg-gray-200",onClick:ll},a[26]||(a[26]=[l("i",{class:"fa-solid fa-magnifying-glass text-gray-600"},null,-1)])),l("div",Ia,[((_t=c(pe))==null?void 0:_t.status)==="active"?(o(),te(me,{key:0,size:"sm",onClick:mt,variant:(c(i)==="dark","primary"),class:"border-border-input border"},{default:X(()=>[le(z(c(pt)?"Ending...":"End"),1)]),_:1},8,["variant"])):(o(),te(me,{key:1,size:"sm",variant:(c(i)==="dark","primary"),class:"border-border-input border",onClick:re,disabled:!J.value||J.value.tickets.length===0},{default:X(()=>a[27]||(a[27]=[le(" Start Sprint ")])),_:1,__:[27]},8,["variant","disabled"]))]),l("div",Aa,[((kt=c(pe))==null?void 0:kt.status)==="active"?(o(),v("button",{key:0,onClick:mt,class:"w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200",title:c(pt)?"Ending...":"End Sprint"},a[28]||(a[28]=[l("i",{class:"fa-solid fa-flag-checkered text-gray-700"},null,-1)]),8,qa)):(o(),v("button",{key:1,onClick:re,disabled:!J.value||J.value.tickets.length===0,class:"w-8 h-8 flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Start Sprint"},a[29]||(a[29]=[l("i",{class:"fa-solid fa-play text-gray-700"},null,-1)]),8,Na))])]),O($t,{name:"fade"},{default:X(()=>[tt.value?(o(),v("div",ja,[l("div",Fa,[l("div",za,[O(Tt,{placeholder:"Search in sprint",modelValue:C.value,"onUpdate:modelValue":a[10]||(a[10]=V=>C.value=V),class:"flex-1"},null,8,["modelValue"]),l("button",{onClick:sl,class:"p-2 rounded hover:bg-gray-100"},a[30]||(a[30]=[l("i",{class:"fa-solid fa-xmark"},null,-1)]))])])])):W("",!0)]),_:1})]),c(b)?(o(),v("div",Ra,a[31]||(a[31]=[l("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):(o(),v(de,{key:1},[J.value?(o(),te(us,{key:0,searchQuery:C.value,sprintId:H.value,checkedSprintAll:h.value,sprint:J.value,onOpenTicket:ct,onEditSprint:Rt,onToggleStart:c(s),onMoveSelectedToBacklog:c(r),onDeleteSelectedSprint:a[11]||(a[11]=V=>c(e)("sprint",V)),onRefresh:ge},null,8,["searchQuery","sprintId","checkedSprintAll","sprint","onToggleStart","onMoveSelectedToBacklog"])):W("",!0)],64))])],512)]))]),O(yl,{onClick:a[12]||(a[12]=ie(()=>{},["stop"])),modelValue:Z.value,"onUpdate:modelValue":a[13]||(a[13]=V=>Z.value=V),title:"Delete Sprint",itemLabel:"Sprint",itemName:(St=g.value)==null?void 0:St.title,requireMatchText:(Ct=g.value)==null?void 0:Ct.title,confirmText:"Delete Sprint",cancelText:"Cancel",size:"md",loading:c(f),onConfirm:fe,onCancel:a[14]||(a[14]=()=>{g.value=null,Z.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),O(fs,{modelValue:we.value,"onUpdate:modelValue":a[15]||(a[15]=V=>we.value=V),onSave:Gt,sprint:g.value,creatingSprint:g.value?c(Wt):c(Qt)},null,8,["modelValue","sprint","creatingSprint"]),O($s,{sprint:g.value,modelValue:E.value,"onUpdate:modelValue":a[16]||(a[16]=V=>E.value=V),onSave:ne,creatingSprint:c(ae)||c(Ee)},null,8,["sprint","modelValue","creatingSprint"]),O(gl,{modelValue:D.value,"onUpdate:modelValue":a[17]||(a[17]=V=>D.value=V),cardId:(wt=Xe.value)==null?void 0:wt.id,onClose:q},null,8,["modelValue","cardId"]),O(oa,{modelValue:R.value,"onUpdate:modelValue":a[18]||(a[18]=V=>R.value=V)},null,8,["modelValue"])],64)}}}),ln=nt(Ha,[["__scopeId","data-v-24e8d885"]]);export{ln as default};
