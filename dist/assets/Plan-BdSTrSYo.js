const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-nmeV_pRh.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-CM_Q4Tck.js","assets/index-vaYjaRQi.js","assets/index-Bf9Z4tzE.css","assets/ConfirmDeleteModal-D15J2oHx.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-fLlEdAdl.js","assets/SidePanel-Dl0T4nIy.js","assets/SidePanel-D0jmQaof.css","assets/KanbanBoard-CFstC3fB.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-pV9-RJau.js","assets/index-RXaN8Wog.js","assets/workspace-CIZghkM1.js","assets/KanbanBoard-KhpXq64F.css"])))=>i.map(i=>d[i]);
import{J as ae,K as ye,L as I,n as p,r as w,m as Z,M as be,c as F,N as oe,d as ie,O as Re,i as O,e as o,g as le,y as ee,b as j,h as A,w as L,f as R,B as te,T as Ie,t as H,P as je,o as _,Q as st,R as nt,_ as rt,S as Ke,j as re,U as Oe,A as Pe,V as ot,W as lt,X as it,a as ze,Y as dt,Z as ut,$ as ct,a0 as pt,C as Ae,a1 as Te,a2 as Ve,p as mt,F as He}from"./index-vaYjaRQi.js";import{K as ft,D as gt}from"./KanbanSkeleton-BDWjJ118.js";import{_ as vt}from"./SearchBar.vue_vue_type_script_setup_true_lang-CZgZvO8j.js";import{_ as bt}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-fLlEdAdl.js";import{u as yt}from"./workspace-CIZghkM1.js";import"./index-RXaN8Wog.js";const kt="data:image/svg+xml,%3csvg%20width='60'%20height='46'%20viewBox='0%200%2060%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M59.7443%2034.8967L50.5682%2025.7206C50.4457%2025.5984%2050.2897%2025.5152%2050.1199%2025.4816C49.9501%2025.4479%2049.7742%2025.4653%2049.6143%2025.5315C49.4544%2025.5976%2049.3176%2025.7097%2049.2213%2025.8535C49.125%2025.9973%2049.0734%2026.1664%2049.073%2026.3394V30.517H25.9775V40.5114H49.0755V44.689C49.0759%2044.8621%2049.1275%2045.0312%2049.2238%2045.175C49.3201%2045.3187%2049.4569%2045.4308%2049.6168%2045.497C49.7767%2045.5632%2049.9527%2045.5805%2050.1224%2045.5468C50.2922%2045.5132%2050.4482%2045.43%2050.5708%2045.3078L59.7468%2036.1318C59.9095%2035.9672%2060.0005%2035.7451%2060.0001%2035.5137C59.9996%2035.2823%2059.9076%2035.0605%2059.7443%2034.8967Z'%20fill='%23C6DBA9'/%3e%3cpath%20d='M32.3149%2030.5293C30.664%2031.5967%2028.7394%2032.1633%2026.7734%2032.1609V40.5237H34.7295C39.2829%2038.5638%2042.9649%2035.0102%2045.0851%2030.5293H32.3149Z'%20fill='url(%23paint0_linear_250_16424)'/%3e%3cpath%20d='M46.2209%2020.2832C46.2317%2015.0884%2044.2448%2010.0884%2040.6714%206.3179C37.0981%202.54738%2032.2119%200.295026%2027.024%200.0269855C21.8362%20-0.241055%2016.7439%201.49574%2012.801%204.87791C8.85809%208.26009%206.36647%2013.0287%205.84178%2018.1969L2.46233%2017.8913C2.31055%2017.8782%202.15829%2017.9103%202.02467%2017.9835C1.89106%2018.0566%201.78205%2018.1677%201.71134%2018.3026C1.64063%2018.4376%201.61138%2018.5904%201.62726%2018.7419C1.64313%2018.8934%201.70343%2019.0368%201.80058%2019.1542L9.51927%2028.406C9.79205%2028.7344%2010.277%2028.7773%2010.378%2028.5045L19.6298%2020.7833C20.3876%2020.3413%2020.1173%2019.4825%2019.4328%2019.4194L15.8008%2019.091C16.0297%2017.1283%2016.8213%2015.2735%2018.0802%2013.7503C19.3391%2012.2271%2021.0115%2011.1004%2022.8961%2010.5059C24.7806%209.9114%2026.7969%209.8745%2028.7019%2010.3996C30.6069%2010.9248%2032.3195%2011.9896%2033.6332%2013.4657C34.947%2014.9419%2035.8059%2016.7664%2036.1065%2018.7195C36.4071%2020.6726%2036.1365%2022.6709%2035.3274%2024.4738C34.5183%2026.2766%2033.2051%2027.8071%2031.5462%2028.8807C29.8872%2029.9544%2027.9531%2030.5254%2025.977%2030.5251H25.9283V40.5094C31.2249%2040.4031%2036.7093%2038.2263%2040.4202%2034.4455C44.1311%2030.6648%2046.2134%2025.5808%2046.2209%2020.2832Z'%20fill='%23D7A39E'/%3e%3cpath%20d='M25.9773%2030.5293H0V40.5237H25.9773V30.5293Z'%20fill='url(%23paint1_linear_250_16424)'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_250_16424'%20x1='6.53714'%20y1='35.5252'%20x2='47.0198'%20y2='35.5252'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%236C798F'/%3e%3cstop%20offset='1'%20stop-color='%236C798F'%20stop-opacity='0.1'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_250_16424'%20x1='0'%20y1='36'%20x2='26'%20y2='36'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23E8D4D3'%20stop-opacity='0'/%3e%3cstop%20offset='1'%20stop-color='%23E2A39F'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Ze="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='20'%20height='20'%20rx='3.33333'%20fill='%2329BF7F'/%3e%3cpath%20d='M6.43164%2014.3018L9.29004%2012.167L9.29102%2012.166C9.47176%2012.0328%209.69053%2011.9609%209.91504%2011.9609C10.0834%2011.9609%2010.2482%2012.0017%2010.3965%2012.0781L10.5391%2012.166L10.54%2012.167L13.373%2014.291V5.91699H6.43164V14.3018ZM14.4316%2014.3789C14.4277%2014.5672%2014.3725%2014.7506%2014.2725%2014.9102C14.1723%2015.0699%2014.0303%2015.1996%2013.8623%2015.2852C13.6944%2015.3706%2013.5064%2015.4094%2013.3184%2015.3965C13.1304%2015.3835%2012.9495%2015.3196%2012.7949%2015.2119L12.79%2015.208L9.91504%2013.0518L7.01465%2015.209C6.83427%2015.3432%206.61546%2015.4161%206.39062%2015.417H6.38965C6.2298%2015.4164%206.07171%2015.38%205.92773%2015.3105V15.3096C5.75087%2015.2261%205.60123%2015.0946%205.49609%2014.9297C5.3907%2014.7642%205.33364%2014.5721%205.33301%2014.376V5.87402C5.3338%205.7361%205.36234%205.59971%205.41602%205.47266C5.46971%205.3456%205.54812%205.23049%205.64648%205.13379C5.74485%205.0371%205.86131%204.96069%205.98926%204.90918C6.1165%204.85797%206.2525%204.83272%206.38965%204.83398V4.83301H13.3906C13.6661%204.83457%2013.9302%204.94494%2014.125%205.13965C14.3198%205.33446%2014.4301%205.59852%2014.4316%205.87402V14.3789Z'%20fill='white'%20stroke='white'%20stroke-width='0.333333'/%3e%3c/svg%3e",xt=(l,n={})=>ye({queryKey:["sprint-list"],queryFn:({signal:m})=>I({url:`sprints/${l}`,method:"GET",signal:m}),...n}),St=(l,n={})=>ye({queryKey:["sprint-cards",l],queryFn:({signal:m})=>I({url:`sprints/${p(l)}/backlog`,method:"GET",signal:m}),...n}),_t=(l,n={})=>ye({queryKey:["sprint-kanban",l],queryFn:({signal:m})=>I({url:`workspace/cards/sprintgrouped?sprint_id=${p(l)}&variable_id=68b6c96e0a95eef7d14e6981`,method:"GET",signal:m}),...n}),Ct=(l,n={})=>ae({key:["sprint-complete"]},{mutationFn:m=>I({url:`sprints/${p(l)}/complete`,method:"POST",data:m.payload}),...n}),ht=(l,n={})=>ye({queryKey:["sprint-detail",l],queryFn:({signal:m})=>I({url:`sprints/detail/${p(l)}?include_cards=true`,method:"GET",signal:m}),...n}),Ee=(l,n={})=>ye({queryKey:["backlog-list",l],queryFn:({signal:m})=>I({url:`sprints/workspace/${p(l)}/cards?include_sprint_cards=false`,method:"GET",signal:m}),...n}),wt=(l={})=>ae({key:["add-sprint"]},{mutationFn:n=>I({url:"/sprints",method:"POST",data:n.payload}),...l}),Ge=(l={})=>ae({key:["move-card-to-sprint"]},{mutationFn:n=>I({url:`/sprints/${n.id}/cards`,method:"POST",data:n.payload}),...l}),Ue=(l={})=>ae({key:["add-sprint"]},{mutationFn:n=>I({url:`/sprints/${n.id}`,method:"PUT",data:n.payload}),...l}),Dt=(l={})=>ae({key:["start-sprint"]},{mutationFn:n=>I({url:`/sprints/${n.id}/start`,method:"POST",data:n.payload}),...l}),Tt=(l={})=>ae({key:["delete-sprint"]},{mutationFn:n=>I({url:`/sprints/${n}`,method:"DELETE"}),...l}),Vt=(l={})=>ae({key:["remove-card-from-sprint"]},{mutationFn:n=>I({url:`sprints/${p(n.sprintId)}/cards/remove `,method:"POST",data:{card_ids:[n.cardId]}}),...l}),Je="jira-like:";function Fe(l="id"){return`${l}_${Math.random().toString(36).slice(2,9)}`}function Ne(l,n){try{localStorage.setItem(Je+l,JSON.stringify(n))}catch{}}function qe(l,n){try{const m=localStorage.getItem(Je+l);return m?JSON.parse(m):n}catch{return n}}function Qe(l){switch(l){case"Highest":return"rounded-md bg-red-50 px-2 py-0.5 text-xs text-red-700";case"High":return"rounded-md bg-orange-50 px-2 py-0.5 text-xs text-orange-700";case"Medium":return"rounded-md bg-amber-50 px-2 py-0.5 text-xs text-amber-700";case"Low":return"rounded-md bg-gray-100 px-2 py-0.5 text-xs text-gray-600"}}function We(){const l=w(qe("backlog",[])),n=w(qe("sprints",[]));if(n.value.length===0)n.value.push({id:Fe("sprint"),name:"Sprint 1",goal:"",start:"",end:"",started:!1,tickets:[]});else if(n.value.length>1){for(let t=1;t<n.value.length;t++)l.value.push(...n.value[t].tickets);n.value=[n.value[0]]}const m=w(n.value[0].id);Z([l,n],()=>{Ne("backlog",l.value),Ne("sprints",n.value)},{deep:!0});const T=w([]),C=be({}),f=F(()=>l.value.length>0&&T.value.length===l.value.length),y=t=>{var s;const a=n.value.find(i=>i.id===t);return!!a&&a.tickets.length>0&&(((s=C[t])==null?void 0:s.length)||0)===a.tickets.length};function V(t,a,s){const i=a.target.checked;if(t==="backlog")T.value=i?l.value.map(v=>v.id):[];else if(s){const v=n.value.find(u=>u.id===s);C[s]=i&&v?v.tickets.map(u=>u.id):[]}}function M(t,a,s,i){const v=s.target.checked,u=t==="backlog"?T.value:C[i]||(C[i]=[]);if(v&&!u.includes(a)&&u.push(a),!v){const N=u.indexOf(a);N>=0&&u.splice(N,1)}}function S(){return n.value.find(t=>t.id===m.value)||n.value[0]}function B(){const a=[...l.value,...n.value.flatMap(i=>i.tickets)].map(i=>Number(String(i.key).replace(/[^0-9]/g,""))).filter(i=>!Number.isNaN(i));return`PRJ-${a.length?Math.max(...a)+1:1}`}const{mutate:k}=Ge({onSuccess:()=>{oe.success("Cards moved to sprint successfully")},onError:t=>{oe.error("Failed to move cards: "+(t.message||"Unknown error"))}});function h(){var i,v;const t=S();if(!t||!T.value.length)return;const a=[],s=[];for(const u of l.value)(T.value.includes(u.id)?s:a).push(u);l.value=a,t.tickets.push(...s),T.value=[],s.length>0&&k({id:t.id,payload:{card_ids:s.map(u=>u.id),priority:((v=(i=s[0])==null?void 0:i.priority)==null?void 0:v.toLowerCase())||"medium",story_points:s.reduce((u,N)=>u+(N.storyPoints||0),0)}})}function D(t){const a=n.value.find(u=>u.id===t);if(!a)return;const s=C[t]||[],i=[],v=[];for(const u of a.tickets)(s.includes(u.id)?v:i).push(u);a.tickets=i,l.value.push(...v),C[t]=[]}function E(t,a){if(t==="backlog")l.value=l.value.filter(s=>!T.value.includes(s.id)),T.value=[];else if(a){const s=C[a]||[],i=n.value.find(v=>v.id===a);if(!i)return;i.tickets=i.tickets.filter(v=>!s.includes(v.id)),C[a]=[]}}function x(t,a){const s={id:Fe("T"),key:B(),createdAt:new Date().toISOString(),...a};if(t==="backlog")l.value.push(s);else{const i=S();i==null||i.tickets.push(s)}}function e(t){const a=S();a&&(a.name=t.name??a.name,a.goal=t.goal??a.goal,a.start=t.start??a.start,a.end=t.end??a.end)}function r(){const t=S();t&&(t.started=!t.started)}function g(t){return t.tickets.reduce((a,s)=>a+(s.storyPoints||0),0)}return{backlog:l,sprints:n,activeSprintId:m,selectedBacklogIds:T,selectedSprintIds:C,allBacklogChecked:f,allSprintChecked:y,toggleAll:V,toggleOne:M,getActiveSprint:S,createTicket:x,saveSprintMeta:e,toggleStartSprint:r,sprintPoints:g,moveSelectedToSprint:h,moveSelectedToBacklog:D,deleteSelected:E,priorityClass:Qe}}const $t={class:"space-y-3 flex flex-col overflow-y-auto"},Lt={key:0,class:"empty-state flex flex-col justify-center items-center h-full"},Mt={class:"flex items-center gap-2 text-text-secondary float-start"},Bt={class:"inline-block rounded-full px-2 py-0.5 text-xs"},Pt={class:"truncate"},Et={key:0,class:"float-end flex justify-center text-gray-500 items-center text-xs aspect-square max-w-6 min-h-6 bg-gray-500/10 rounded-full"},Ot={key:1,class:"text-xs aspect-square max-w-6 flex justify-center items-center text-center min-h-6 bg-accent/30 text-accent border-accent border rounded-full"},At=["onDragstart"],Ht=ie({__name:"BacklogTable",props:{sorters:{}},emits:["ticket-dragged-to-sprint","open-ticket","ticket-moved-to-backlog"],setup(l,{emit:n}){const m=n,{workspaceId:T}=Re(),{data:C,isPending:f}=Ee(T),y=w([]);Z(C,x=>{x!=null&&x.cards&&(y.value=x.cards.map(e=>{var s,i,v,u,N;const r=((s=e.card)==null?void 0:s.variables)??{},g=((i=e.card)==null?void 0:i._id)??e.card_id,t=String(r["card-status"]??"").trim(),a=String(r.priority??"").trim();return{id:g,key:r["card-code"]||(g==null?void 0:g.slice(-6))||"PRJ-?",summary:r["card-title"]||"(untitled)",type:"Story",status:t,assignee:((u=(v=e.card)==null?void 0:v.assigned_to)==null?void 0:u.name)??"Unassigned",storyPoints:Number(e.story_points??0)||0,priority:M(a),createdAt:((N=e.card)==null?void 0:N.created_at)??new Date().toISOString(),description:r["card-description"]||""}}))},{immediate:!0});function V(x){const e=x.toLowerCase();switch(e.trim()){case"todo":return"bg-gray-500/10 text-gray-500";case"to do":return"bg-gray-500/10 text-gray-500";case"in progress":return"bg-gray-amber/10 text-amber-500";case"done":return"bg-green-500/10 text-green-500"}return e.includes("progress")?"In Progress":e.includes("done")||e.includes("complete")?"Done":"Todo"}function M(x){const e=String(x??"").toLowerCase();return e==="highest"||e==="blocker"||e==="critical"?"Highest":e==="high"||e==="major"?"High":e==="medium"||e==="normal"?"Medium":"Low"}const S=w(!1),B=w(null);function k(x,e,r){var t;B.value=e.id;const g=JSON.stringify({id:e.id,from:r,ticket:e});(t=x.dataTransfer)==null||t.setData("text/plain",g),x.dataTransfer&&(x.dataTransfer.effectAllowed="move")}function h(x){var e;S.value=!1,((e=x.dataTransfer)==null?void 0:e.dropEffect)!=="none"&&B.value&&(y.value=y.value.filter(r=>r.id!==B.value)),B.value=null}function D(x){var e;x.preventDefault(),S.value=!1;try{const r=(e=x.dataTransfer)==null?void 0:e.getData("text/plain");if(!r)return;const g=JSON.parse(r);if(g.from!=="sprint"||y.value.some(a=>a.id===g.id))return;y.value.push(g.ticket),m("ticket-moved-to-backlog",g.id,g.sprintId)}catch(r){console.error("Drop error:",r)}}const E=F(()=>[{key:"summary",label:"Summary",sortable:!1},{key:"status",label:"Status",width:120,sortable:!1},{key:"assignee",label:"",width:120,sortable:!1}]);return(x,e)=>(_(),O("section",$t,[o("div",{class:ee(["rounded-lg border h-[300px] border-border flex flex-col",S.value?"ring-2 ring-blue-400":""]),onDragover:e[4]||(e[4]=le(()=>{},["prevent"])),onDragenter:e[5]||(e[5]=r=>S.value=!0),onDragleave:e[6]||(e[6]=r=>S.value=!1),onDrop:e[7]||(e[7]=r=>D(r))},[!p(f)&&y.value.length===0?(_(),O("div",Lt,[e[9]||(e[9]=o("img",{src:kt,class:"mb-4",alt:"backlog-plan"},null,-1)),e[10]||(e[10]=o("h6",{class:"text-sm text-text-primary font-semibold mb-1"},"Get started in the backlog",-1)),e[11]||(e[11]=o("p",{class:"text-sm text-text-primary/90 mb-3"},"Plan and start a sprint to see issues here.",-1)),A(te,null,{default:L(()=>e[8]||(e[8]=[R("Add Task Backlog")])),_:1,__:[8]})])):(_(),j(Ie,{key:1,showHeader:!1,pagination:!1,class:"flex-grow h-full",rowDraggable:!0,onRowDragstart:e[1]||(e[1]=({row:r,$event:g})=>k(g,r,"backlog")),onRowDragend:e[2]||(e[2]=({$event:r})=>h(r)),columns:E.value,rows:y.value,"page-size":20,hover:!0,itemKey:r=>r.id,sorters:x.sorters,onRowClick:e[3]||(e[3]=({row:r})=>x.$emit("open-ticket",r))},{summary:L(({row:r})=>[o("div",Mt,[e[12]||(e[12]=o("img",{src:Ze,alt:""},null,-1)),o("span",Bt,H(r.key),1),o("span",Pt,H(r.summary),1)])]),status:L(({row:r})=>[o("span",{class:ee([V(r.status),"px-2 py-1 rounded-md"])},H(r.status),3)]),assignee:L(({row:r})=>[r.assignee=="Unassigned"?(_(),O("span",Et,"UA")):(_(),O("span",Ot,H(p(je)(r.assignee)),1))]),drag:L(({row:r})=>[o("button",{class:"cursor-grab",title:"Drag to Sprint",draggable:"",onClick:e[0]||(e[0]=le(()=>{},["stop"])),onDragstart:g=>k(g,r,"backlog"),onDragend:h},"↕",40,At)]),_:1},8,["columns","rows","itemKey","sorters"]))],34)]))}}),Ut="data:image/svg+xml,%3csvg%20width='60'%20height='60'%20viewBox='0%200%2060%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M9.375%2030C11.6402%2030%2013.4766%2028.1637%2013.4766%2025.8984C13.4766%2023.6332%2011.6402%2021.7969%209.375%2021.7969C7.10977%2021.7969%205.27344%2023.6332%205.27344%2025.8984C5.27344%2028.1637%207.10977%2030%209.375%2030Z'%20fill='%23AE2A19'/%3e%3cpath%20d='M26.25%2024.375C28.5152%2024.375%2030.3516%2022.5387%2030.3516%2020.2734C30.3516%2018.0082%2028.5152%2016.1719%2026.25%2016.1719C23.9848%2016.1719%2022.1484%2018.0082%2022.1484%2020.2734C22.1484%2022.5387%2023.9848%2024.375%2026.25%2024.375Z'%20fill='%23BF63F3'/%3e%3cpath%20d='M15.3931%2035.8594H11.0159V33.0938C9.93587%2033.3387%208.81469%2033.3387%207.73465%2033.0938V35.8594H1.87528C1.55115%2035.8601%201.2345%2035.9568%200.965283%2036.1373C0.696064%2036.3178%200.486343%2036.574%200.362583%2036.8736C0.238824%2037.1731%200.206573%2037.5027%200.269899%2037.8205C0.333226%2038.1384%200.489292%2038.4304%200.718404%2038.6597L7.05872%2045L0.718404%2051.3403C0.489292%2051.5696%200.333226%2051.8616%200.269899%2052.1795C0.206573%2052.4973%200.238824%2052.8269%200.362583%2053.1264C0.486343%2053.426%200.696064%2053.6822%200.965283%2053.8627C1.2345%2054.0432%201.55115%2054.1399%201.87528%2054.1406H15.3931L21.7503%2045L15.3931%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M34.4562%2035.8594H27.8937V27.4688C26.8137%2027.7138%2025.6925%2027.7138%2024.6125%2027.4688V35.8594H19.3896L25.7487%2045L19.3896%2054.1406H34.4562L40.8143%2045L34.4562%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M43.8281%2019.6875H55.3125C55.7475%2019.6873%2056.1647%2019.5143%2056.4723%2019.2067C56.7799%2018.8991%2056.9529%2018.4819%2056.9531%2018.0469V9.375C56.9529%208.93996%2056.7799%208.5228%2056.4723%208.21518C56.1647%207.90755%2055.7475%207.73462%2055.3125%207.73438H43.8281V7.5C43.8281%207.06488%2043.6553%206.64758%2043.3476%206.3399C43.0399%206.03223%2042.6226%205.85938%2042.1875%205.85938C41.7524%205.85938%2041.3351%206.03223%2041.0274%206.3399C40.7197%206.64758%2040.5469%207.06488%2040.5469%207.5V32.5781H43.8281V19.6875Z'%20fill='%23FCA700'/%3e%3cpath%20d='M59.2843%2043.8403L51.7843%2036.3403C51.6322%2036.1878%2051.4514%2036.0668%2051.2524%2035.9842C51.0534%2035.9017%2050.8401%2035.8593%2050.6246%2035.8594H38.4521L44.8121%2045L38.4531%2054.1406H50.6246C50.8401%2054.1407%2051.0534%2054.0983%2051.2524%2054.0158C51.4514%2053.9332%2051.6322%2053.8122%2051.7843%2053.6597L59.2843%2046.1597C59.4368%2046.0075%2059.5577%2045.8267%2059.6402%2045.6277C59.7228%2045.4287%2059.7652%2045.2154%2059.7652%2045C59.7652%2044.7846%2059.7228%2044.5713%2059.6402%2044.3723C59.5577%2044.1733%2059.4368%2043.9925%2059.2843%2043.8403Z'%20fill='%2382B536'/%3e%3c/g%3e%3c/svg%3e",Ft={class:"rounded-lg flex flex-col"},Nt=["checked"],qt=["checked","onChange"],Rt={class:"flex items-center gap-2 text-text-secondary float-start"},It={class:"inline-block rounded-full px-2 py-0.5 text-xs"},jt={class:"truncate"},Kt={key:0,class:"float-end flex justify-center text-gray-500 items-center text-xs aspect-square max-w-6 min-h-6 bg-gray-500/10 rounded-full"},zt={key:1,class:"text-xs aspect-square max-w-6 flex justify-center items-center text-center min-h-6 bg-accent/30 text-accent border-accent border rounded-full"},Zt=["onDragstart"],Gt={key:1,class:"empty-state flex flex-col h-full justify-center items-center border-dashed border border-border"},Jt=ie({__name:"SprintCard",props:{sprint:{},sprintId:{}},emits:["edit-sprint","toggle-start","open-ticket","move-selected-to-backlog","delete-selected-sprint","refresh"],setup(l,{emit:n}){const m=l;Z(m,t=>{console.log("props changes",t)});const T=n,C=We(),{selectedSprintIds:f,allSprintChecked:y,toggleAll:V,toggleOne:M}=C,S=w([]);Z(()=>m.sprint.tickets,t=>{S.value=[...t||[]]},{immediate:!0,deep:!0});const B=w(!1),k=w(null),{mutate:h}=Ge({onSuccess:()=>{oe.success("Card moved to sprint successfully"),T("refresh")},onError:t=>{oe.error("Failed to move card: "+(t.message||"Unknown error"))}});function D(t,a,s,i){var u;k.value=a.id;const v=JSON.stringify({id:a.id,from:s,sprintId:i,ticket:a});(u=t.dataTransfer)==null||u.setData("text/plain",v),t.dataTransfer&&(t.dataTransfer.effectAllowed="move")}function E(t){var a;B.value=!1,((a=t.dataTransfer)==null?void 0:a.dropEffect)!=="none"&&k.value&&(S.value=S.value.filter(s=>s.id!==k.value)),k.value=null}function x(){B.value=!0}function e(){B.value=!1}function r(t){var a;t.preventDefault(),B.value=!1;try{const s=(a=t.dataTransfer)==null?void 0:a.getData("text/plain");if(!s)return;const i=JSON.parse(s);if(i.from!=="backlog"||S.value.some(u=>u.id===i.id))return;S.value.push(i.ticket),h({id:m.sprintId,payload:{card_ids:[i.ticket.id],priority:i.ticket.priority.toLowerCase(),story_points:i.ticket.storyPoints||0}})}catch(s){console.error("Drop error:",s)}}const g=[{key:"summary",label:"Summary",sortable:!0},{key:"status",label:"Status",width:120,sortable:!0},{key:"assignee",label:"Assignee",width:120,sortable:!0}];return(t,a)=>(_(),O("div",Ft,[o("div",{class:ee(["h-[300px]",B.value?"ring-2 ring-blue-400 rounded-lg":""]),onDragover:a[5]||(a[5]=le(()=>{},["prevent"])),onDragenter:x,onDragleave:e,onDrop:r},[S.value.length>0?(_(),j(Ie,{key:0,showHeader:!1,pagination:!1,"row-draggable":!0,class:"h-full",onRowDragstart:a[2]||(a[2]=({row:s,$event:i})=>D(i,s,"sprint",t.sprint.id)),onRowDragend:a[3]||(a[3]=({$event:s})=>E(s)),columns:g,rows:S.value,"page-size":100,hover:!0,"item-key":s=>s.id,onRowClick:a[4]||(a[4]=({row:s})=>t.$emit("open-ticket",s))},{"select-header":L(()=>[o("input",{type:"checkbox",checked:p(y)(t.sprint.id),onChange:a[0]||(a[0]=s=>p(V)("sprint",s,t.sprint.id))},null,40,Nt)]),select:L(({row:s})=>[o("input",{type:"checkbox",checked:(p(f)[t.sprint.id]||[]).includes(s.id),onChange:i=>p(M)("sprint",s.id,i,t.sprint.id)},null,40,qt)]),summary:L(({row:s})=>[o("div",Rt,[a[6]||(a[6]=o("img",{src:Ze,alt:""},null,-1)),o("span",It,H(s.key),1),o("span",jt,H(s.summary),1)])]),status:L(({row:s})=>[o("span",{class:ee([p(st)(s.status),"px-2 py-1 rounded-md"])},H(s.status),3)]),assignee:L(({row:s})=>[s.assignee=="Unassigned"?(_(),O("span",Kt,"UA")):(_(),O("span",zt,H(p(je)(`${s.assignee}`)),1))]),priority:L(({row:s})=>[o("span",{class:ee(p(Qe)(s.priority))},H(s.priority),3)]),drag:L(({row:s})=>[o("button",{class:"cursor-grab",title:"Drag to Backlog",draggable:"",onClick:a[1]||(a[1]=le(()=>{},["stop"])),onDragstart:i=>D(i,s,"sprint",t.sprint.id),onDragend:E},"↕",40,Zt)]),_:1},8,["rows","item-key"])):(_(),O("div",Gt,a[7]||(a[7]=[nt('<img src="'+Ut+'" class="mb-4" alt="backlog-plan"><h6 class="text-sm text-text-primary font-semibold mb-1 text-center">Plan your sprint</h6><p class="text-sm text-text-primary/90 mb-3 max-w-120 text-center">Drag work items from the <span class="font-bold"> Backlog </span> section or create new ones to plan the work for this sprint. Select <span class="font-bold">Start sprint</span> when you&#39;re ready.</p>',3)])))],34)]))}}),Qt={class:"px-6 gap-4"},Wt={class:"flex justify-end gap-2 p-6 mt-8 sticky bottom-0 bg-bg-body border-t border-border"},Xt=ie({__name:"SprintModal",props:{modelValue:{type:Boolean,default:!1},sprint:{},creatingSprint:{type:Boolean}},emits:["update:modelValue","save","close"],setup(l,{emit:n}){const m=n,T=l,C=F({get:()=>T.modelValue,set:h=>m("update:modelValue",h)}),f=be({name:""}),y=be({name:!1}),V=F(()=>y.name&&!String(f.name||"").trim()?"Name is required":""),M=F(()=>!!String(f.name||"").trim()&&!V.value);function S(){C.value=!1,m("close")}function B(){y.name=!0,M.value&&m("save",{name:String(f.name||"").trim()})}function k(){y.name=!1}return Z(()=>T.sprint,h=>{if(!h){f.name="";return}f.name=h.name??(h==null?void 0:h.title)??"",k()},{immediate:!0}),(h,D)=>(_(),j(Ke,{modelValue:C.value,"onUpdate:modelValue":D[2]||(D[2]=E=>C.value=E),modalClass:"!py-0",size:"md"},{default:L(()=>[D[5]||(D[5]=o("div",{class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-body pb-4 mb-4"},[o("h2",{class:"text-xl font-semibold"},"Add Sprint"),o("p",{class:"text-sm text-text-secondary mt-1"},[R(" Add sprint name and then click "),o("span",{class:"font-medium"},"Save"),R(". ")])],-1)),o("div",Qt,[A(rt,{modelValue:f.name,"onUpdate:modelValue":D[0]||(D[0]=E=>f.name=E),label:"Name",placeholder:"Sprint 1",error:!!V.value,message:V.value,onBlur:D[1]||(D[1]=E=>y.name=!0)},null,8,["modelValue","error","message"]),D[3]||(D[3]=o("div",null,null,-1))]),o("div",Wt,[A(te,{variant:"secondary",onClick:S},{default:L(()=>D[4]||(D[4]=[R("Cancel")])),_:1,__:[4]}),A(te,{variant:"primary",disabled:!M.value,onClick:B},{default:L(()=>[R(H(h.creatingSprint?"Saving...":"Save"),1)]),_:1},8,["disabled"])])]),_:1,__:[5]},8,["modelValue"]))}}),Yt={class:"px-6 grid grid-cols-2 gap-4"},ea={class:"flex gap-1 flex-col"},ta={key:0,class:"text-xs text-red-500"},aa={class:"flex gap-1 flex-col"},sa={key:0,class:"text-xs text-red-500"},na={class:"flex flex-col col-span-2"},ra={class:"flex justify-end gap-2 p-6 mt-8 sticky bottom-0 bg-bg-body border-t border-border"},oa=ie({__name:"StartSprintModal",props:{modelValue:{type:Boolean,default:!1},sprint:{},creatingSprint:{type:Boolean}},emits:["update:modelValue","save","close"],setup(l,{emit:n}){const m=n,T=l,C=F({get:()=>T.modelValue,set:e=>m("update:modelValue",e)}),f=be({goal:"",start:"",end:""});Z(()=>T.sprint,e=>{e&&(f.goal=e.goal??"",f.start=e.start??"",f.end=e.end??"",E())},{immediate:!0});const y=be({start:!1,end:!1}),V=F(()=>""),M=F(()=>{if(!y.end)return"";if(f.start&&f.end){const e=x(f.start),r=x(f.end);if(Number.isFinite(e)&&Number.isFinite(r)&&r<e)return"End date cannot be before start date"}return""}),S=F(()=>!M.value);function B(e){f.start=e||"",y.start=!0}function k(e){f.end=e||"",y.end=!0}function h(){C.value=!1,m("close")}function D(){y.start=!0,y.end=!0,S.value&&m("save",{goal:f.goal??"",start:f.start||"",end:f.end||""})}function E(){y.start=!1,y.end=!1}function x(e){return e?new Date(`${e}T00:00:00`).getTime():NaN}return(e,r)=>(_(),j(Ke,{modelValue:C.value,"onUpdate:modelValue":r[1]||(r[1]=g=>C.value=g),modalClass:"!py-0",size:"md"},{default:L(()=>[r[6]||(r[6]=o("div",{class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-body pb-4 mb-4"},[o("h2",{class:"text-xl font-semibold"},"Start Sprint"),o("p",{class:"text-sm text-text-secondary mt-1"},[R(" Update sprint name, goal, and dates, then click "),o("span",{class:"font-medium"},"Start"),R(". ")])],-1)),o("div",Yt,[o("div",ea,[r[2]||(r[2]=o("label",{class:"text-sm"},"Start date",-1)),o("div",{class:ee(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",V.value?"border-red-500":""])},[A(Oe,{placeholder:"Set start date",class:"w-full","model-value":f.start,"emit-as":"ymd","onUpdate:modelValue":B},null,8,["model-value"])],2),V.value?(_(),O("p",ta,H(V.value),1)):re("",!0)]),o("div",aa,[r[3]||(r[3]=o("label",{class:"text-sm"},"End date",-1)),o("div",{class:ee(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",M.value?"border-red-500":""])},[A(Oe,{placeholder:"Set end date",class:"w-full","model-value":f.end,"emit-as":"ymd","onUpdate:modelValue":k},null,8,["model-value"])],2),M.value?(_(),O("p",sa,H(M.value),1)):re("",!0)]),o("div",na,[r[4]||(r[4]=o("label",{class:"text-sm"},"Goal (optional)",-1)),Pe(o("textarea",{"onUpdate:modelValue":r[0]||(r[0]=g=>f.goal=g),class:"w-full rounded-lg border border-border px-3 py-2 bg-bg-input",rows:"2",placeholder:"Ship onboarding flow"},null,512),[[ot,f.goal]])])]),o("div",ra,[A(te,{variant:"secondary",onClick:h},{default:L(()=>r[5]||(r[5]=[R("Cancel")])),_:1,__:[5]}),A(te,{variant:"primary",disabled:!S.value,onClick:D},{default:L(()=>[R(H(e.creatingSprint?"Starting...":"Start"),1)]),_:1},8,["disabled"])])]),_:1,__:[6]},8,["modelValue"]))}}),la={class:"flex gap-2 flex-auto overflow-y-auto"},ia={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-2xl shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex"},da={class:"flex overflow-x-auto gap-3 p-4"},ua={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},ca=ie({__name:"ActiveSprint",props:{sptint_id:{}},setup(l){const n=l,m=Te(()=>Ve(()=>import("./CreateTaskModal-nmeV_pRh.js"),__vite__mapDeps([0,1,2,3]))),T=Te(()=>Ve(()=>import("./ConfirmDeleteModal-D15J2oHx.js"),__vite__mapDeps([4,5,2,3]))),C=Te(()=>Ve(()=>import("./SidePanel-Dl0T4nIy.js"),__vite__mapDeps([6,2,3,7]))),f=Te(()=>Ve(()=>import("./KanbanBoard-CFstC3fB.js"),__vite__mapDeps([8,2,3,9,10,5,11,12]))),y=mt(),{workspaceId:V,moduleId:M}=lt(),{data:S}=it(V.value,M.value),B=ze(),{mutate:k,isPending:h}=dt({onSuccess:()=>{B.invalidateQueries({queryKey:["sheet-list"]}),ce.value="",J.value=!1,ue.value=!1,J.value=!1}}),D=b=>{k({workspace_id:V.value,module_id:M.value,variable_id:g.value,value:b})},{data:E}=ut({workspace_id:V,workspace_module_id:M}),x=F(()=>{var b;return E.value?(b=E.value[0])==null?void 0:b._id:""}),e=w(x),r=F(()=>{var b;return S.value?(b=S.value[0])==null?void 0:b._id:""}),g=w(r),t=yt(),a=F(()=>n.sptint_id),{data:s,isPending:i}=_t(a),v=w(!1),u=w(),N=b=>{u.value=b},de=ct(),se=pt();function $e(b){b.type=="column"?de.mutate({payload:{workspace_id:V.value,workspace_module_id:M.value,variable_id:g.value,moved_value:b.meta.id,new_index:b.meta.newIndex}}):se.mutate({payload:{workspace_id:V.value,card_id:b.meta.moved._id,group_value:b.meta.fromColumnId,group_variable_id:g.value,new_index:b.meta.newIndex,sheet_id:e.value}})}const G=b=>{};Z(E,b=>{var $;(b==null?void 0:b.length)>0&&(e.value=($=b[0])==null?void 0:$._id)});const ue=w(!1),ce=w(""),Le=b=>{k({workspace_id:y.params.id,module_id:y.params.module_id,new_value:b.title,value:b.oldTitle,variable_id:g.value})},J=w(!1),z=w(),ke=()=>{k({value:z.value.title,workspace_id:V.value,module_id:M.value,newValue:z.value.title,variable_id:g.value,is_trash:!0})},Me=b=>{J.value=!0,z.value=b},Be=b=>{v.value=!0,z.value=b};return(b,$)=>{var xe,pe,K,Se,ne;return _(),O("div",la,[o("div",ia,[Pe(A(ft,null,null,512),[[Ae,p(i)]]),Pe(o("div",da,[A(p(f),{onOnPlus:Be,"onDelete:column":$[0]||($[0]=q=>Me(q)),"onUpdate:column":$[1]||($[1]=q=>Le(q)),onReorder:$e,onAddColumn:D,"onSelect:ticket":N,board:p(s),onOnBoardUpdate:G,variable_id:g.value,sheet_id:e.value},{"column-footer":L(q=>{var _e,Ce,he,we,De;return[(Ce=(_e=p(t))==null?void 0:_e.transitions)!=null&&Ce.all_allowed&&!((De=(we=(he=p(t))==null?void 0:he.transitions)==null?void 0:we.all_allowed)!=null&&De.includes(q.column.title))&&p(t).transitions.currentColumn!=q.column.title?(_(),O("div",ua," Disbale ( you can't drop here )")):re("",!0)]}),_:1},8,["board","variable_id","sheet_id"])],512),[[Ae,!p(i)]])]),A(p(T),{onClick:$[2]||($[2]=le(()=>{},["stop"])),modelValue:J.value,"onUpdate:modelValue":$[3]||($[3]=q=>J.value=q),title:"Delete List",itemLabel:"list",itemName:(xe=z.value)==null?void 0:xe.title,requireMatchText:(pe=z.value)==null?void 0:pe.title,confirmText:"Delete workspace",cancelText:"Cancel",size:"md",loading:p(h),onConfirm:ke,onCancel:$[4]||($[4]=()=>{J.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),v.value?(_(),j(p(m),{selectedVariable:g.value,listId:(K=z.value)==null?void 0:K.title,sheet_id:e.value,key:"createTaskModalKey",modelValue:v.value,"onUpdate:modelValue":$[5]||($[5]=q=>v.value=q),onSubmit:$[6]||($[6]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):re("",!0),(Se=u.value)!=null&&Se._id?(_(),j(p(C),{key:1,details:u.value,onClose:$[7]||($[7]=()=>{N({variables:{}})}),showPanel:!!((ne=u.value)!=null&&ne._id)},null,8,["details","showPanel"])):re("",!0)])}}}),pa={class:"flex-auto flex-grow h-full bg-bg-card rounded-lg border border-border overflow-x-auto flex-col flex"},ma={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1"},fa={class:"flex gap-3 items-center"},ga={key:1,class:"space-y-6 p-4 w-full flex-auto overflow-y-auto"},va={class:"flex flex-col gap-6"},ba={class:"space-y-4 bg-bg-surface/30 p-4 rounded-md"},ya={class:"flex items-center justify-between"},ka={class:"text-sm font-semibold"},xa={key:0,class:"w-full h-full min-h-[250px] flex justify-center items-center"},Sa={class:"space-y-4 bg-bg-surface/30 p-4 rounded-md"},_a={class:"flex items-center justify-between"},Ca={class:"text-sm font-semibold"},ha={key:0,class:"w-full h-full min-h-[250px] flex justify-center items-center"},Ma=ie({__name:"Plan",setup(l){const{workspaceId:n}=Re(),m=w(!1),{moveSelectedToSprint:T,moveSelectedToBacklog:C,deleteSelected:f,saveSprintMeta:y,toggleStartSprint:V}=We(),{data:M}=Ee(n),{mutate:S,isPending:B}=Tt({onSuccess:()=>{ne.invalidateQueries({queryKey:["sprint-list"]}),h.value=!1}}),k=w(null),h=w(!1),D=()=>{var c;S((c=k.value)==null?void 0:c._id)},{mutate:E,isPending:x}=Ue({onSuccess:c=>{y({name:c.title}),e({id:u.value}),se.value=!1}}),{mutate:e,isPending:r}=Dt({onSuccess:()=>{de()}}),g=c=>{console.log("helo",k.value,c),E({id:u.value,payload:{goal:c.goal,start_date:c.start,end_date:c.end}})},{data:t,refetch:a}=xt(n.value),{refetch:s,isPending:i}=Ee(n),v=F(()=>{var c,d;return(d=(c=t==null?void 0:t.value)==null?void 0:c.sprints[0])==null?void 0:d._id}),u=w(v.value);Z(()=>v.value,c=>{u.value=c});const{data:N,refetch:de}=ht(v),se=w(!1),$e=()=>{se.value=!0},{data:G,isPending:ue}=St(u);Z(()=>ue.value,c=>{console.log(c,ue.value,">>>> laoding state changes")});const ce=F(()=>{var X,Q;const c=(X=G==null?void 0:G.value)==null?void 0:X.backlog_items;if(!c)return null;const d=(((Q=G==null?void 0:G.value)==null?void 0:Q.backlog_items)||[]).map(P=>{var me,fe,ge,ve,U;const W=((me=P==null?void 0:P.card)==null?void 0:me.variables)||{},Y=((fe=P==null?void 0:P.card)==null?void 0:fe._id)||P.card_id;return{id:Y,key:W["card-code"]||(Y==null?void 0:Y.slice(-6))||"PRJ-?",summary:W["card-title"]||"(untitled)",type:"Story",status:Le(String(W["card-status"]||"").trim()),assignee:((ve=(ge=P==null?void 0:P.card)==null?void 0:ge.assigned_to)==null?void 0:ve.name)||"Unassigned",storyPoints:Number(P.story_points||0),priority:J(String(W.priority||"").trim()),createdAt:((U=P==null?void 0:P.card)==null?void 0:U.created_at)||new Date().toISOString(),description:W["card-description"]||""}});return{id:c._id,name:c.title||"Sprint 1",title:c.title,goal:"",start:"",end:"",started:!1,tickets:d}});function Le(c){const d=c.toLowerCase();return d.includes("progress")?"In Progress":d.includes("done")||d.includes("complete")?"Done":"Todo"}function J(c){const d=c.toLowerCase();return d==="highest"||d==="blocker"||d==="critical"?"Highest":d==="high"||d==="major"?"High":d==="medium"||d==="normal"?"Medium":"Low"}const{mutate:z}=Vt({onSuccess:()=>{oe.success("Card removed from sprint successfully"),ke()},onError:c=>{oe.error("Failed to remove card from sprint"),console.error("Failed to remove card from sprint:",c)}});function ke(){a(),s(),de()}function Me(c){console.log(">>> moving back to backlog"),u&&z({sprintId:u,cardId:c})}const Be={createdAt:(c,d,X)=>{const Q=new Date(c.createdAt).getTime(),P=new Date(d.createdAt).getTime();return X==="asc"?Q-P:P-Q}},b=w(!1),$=w(null);function xe(){m.value=!0,$.value=null}function pe(c){$.value=c,b.value=!0}const K=w(!1);function Se(){K.value=!0}const ne=ze(),{mutate:q,isPending:_e}=wt({onSuccess:c=>{y({name:c.title}),ne.invalidateQueries({queryKey:["sprint-list"]}),K.value=!1}}),{mutate:Ce,isPending:he}=Ue({onSuccess:c=>{y({name:c.title}),ne.invalidateQueries({queryKey:["sprint-list"]}),K.value=!1}});function we(c){var d;k.value?Ce({id:(d=k.value)==null?void 0:d._id,payload:{workspace_id:n.value,title:c.name}}):q({payload:{workspace_id:n.value,title:c.name}})}function De(){k.value=null,console.log(">>> felo"),K.value=!0}function Xe(c){k.value=c,K.value=!0}function Ye(c){k.value=c,h.value=!0}const{mutate:et,isPending:tt}=Ct(u,{onSuccess:()=>{de()}}),at=()=>{et({})};return(c,d)=>{var X,Q,P,W,Y,me,fe,ge,ve;return _(),O(He,null,[o("div",pa,[o("div",ma,[A(gt,{prefix:"View By",modelValue:u.value,"onUpdate:modelValue":d[1]||(d[1]=U=>u.value=U),options:(X=p(t))==null?void 0:X.sprints,variant:"secondary",onEditOption:Xe,onDeleteOption:Ye},{more:L(()=>[o("div",{onClick:d[0]||(d[0]=U=>De()),class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},d[9]||(d[9]=[o("i",{class:"fa-solid fa-plus"},null,-1),R(" Add new ")]))]),_:1},8,["modelValue","options"]),o("div",fa,[A(vt,{placeholder:"Search in Orchit AI space"}),((Q=p(N))==null?void 0:Q.status)=="active"?(_(),j(te,{key:0,size:"sm",onClick:at},{default:L(()=>[R(H(p(tt)?"Ending...":"End"),1)]),_:1})):(_(),j(te,{key:1,size:"sm",onClick:$e},{default:L(()=>d[10]||(d[10]=[R("Start Sprint")])),_:1,__:[10]}))])]),((P=p(N))==null?void 0:P.status)=="active"?(_(),j(ca,{key:0,sptint_id:u.value},null,8,["sptint_id"])):(_(),O("div",ga,[o("div",va,[o("section",ba,[o("div",ya,[o("h2",ka,"Sprint ("+H((Y=(W=ce.value)==null?void 0:W.tickets)==null?void 0:Y.length)+" Taks)",1)]),p(ue)?(_(),O("div",xa,d[11]||(d[11]=[o("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):(_(),O(He,{key:1},[ce.value?(_(),j(Jt,{key:0,sprintId:u.value,sprint:ce.value,onOpenTicket:pe,onEditSprint:Se,onToggleStart:p(V),onMoveSelectedToBacklog:p(C),onDeleteSelectedSprint:d[2]||(d[2]=U=>p(f)("sprint",U)),onRefresh:ke},null,8,["sprintId","sprint","onToggleStart","onMoveSelectedToBacklog"])):re("",!0)],64))]),o("section",Sa,[o("div",_a,[o("h2",Ca,"Backlog ("+H((fe=(me=p(M))==null?void 0:me.cards)==null?void 0:fe.length)+" Tasks)",1),o("div",{class:"flex items-center gap-2"},[o("button",{class:"w-8 h-8 rounded-md border cursor-pointer aspect-square text-sm border-border hover:bg-gray-50",onClick:xe},d[12]||(d[12]=[o("i",{class:"text-text-primary fa-regular fa-plus"},null,-1)]))])]),p(i)?(_(),O("div",ha,d[13]||(d[13]=[o("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):(_(),j(Ht,{key:1,sorters:Be,onMoveSelectedToSprint:p(T),onDeleteSelectedBacklog:d[3]||(d[3]=U=>p(f)("backlog")),onOpenTicket:pe,onTicketMovedToBacklog:Me},null,8,["onMoveSelectedToSprint"]))])])]))]),A(bt,{onClick:d[4]||(d[4]=le(()=>{},["stop"])),modelValue:h.value,"onUpdate:modelValue":d[5]||(d[5]=U=>h.value=U),title:"Delete Sprint",itemLabel:"Sprint",itemName:(ge=k.value)==null?void 0:ge.title,requireMatchText:(ve=k.value)==null?void 0:ve.title,confirmText:"Delete Ticket",cancelText:"Cancel",size:"md",loading:p(B),onConfirm:D,onCancel:d[6]||(d[6]=()=>{k.value=null,h.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),A(Xt,{modelValue:K.value,"onUpdate:modelValue":d[7]||(d[7]=U=>K.value=U),onSave:we,sprint:k.value,creatingSprint:k.value?p(he):p(_e)},null,8,["modelValue","sprint","creatingSprint"]),A(oa,{sprint:k.value,modelValue:se.value,"onUpdate:modelValue":d[8]||(d[8]=U=>se.value=U),onSave:g,creatingSprint:p(r)||p(x)},null,8,["sprint","modelValue","creatingSprint"])],64)}}});export{Ma as default};
