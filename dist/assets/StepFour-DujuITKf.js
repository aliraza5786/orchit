import{L as R}from"./Loader-BRAOXhJu.js";import{d as q,r as B,be as H,bf as M,m as O,a5 as G,c as L,bg as I,b as J,i as n,n as W,e as t,j as u,f as p,t as r,F as C,x as E,S as K,l as Q,o as a}from"./index-QAH94Xm8.js";import{u as U}from"./workspace-yX13dVSh.js";import"./favicon-BAFXWHLW.js";const X={key:1,class:"w-full flex flex-col"},Y={class:"flex-wrap flex md:flex-nowrap gap-4 mb-6"},Z={class:"bg-bg-surface w-full text-text-primary rounded-xl p-6 flex-auto"},ee={class:"text-text-primary text-base font-semibold"},te={class:"mt-5 text-text-primary text-base font-semibold capitalize"},se={key:0,class:"mt-5 ttext-text-primary text-base font-semibold"},oe={key:0,class:"bg-bg-surface w-full text-text-primary rounded-xl p-6"},re={class:"text-4xl font-bold"},ae={class:"space-y-3"},le={class:"flex justify-between"},ne={class:"flex gap-2 items-center text-text-primary text-base font-semibold"},ie={key:0,class:"mr-2 text-lg"},ce={key:0,class:"mb-6 h-full flex-grow flec flex-col"},ue={class:"grid grid-cols-3 flex-wrap gap-4"},pe={class:"bg-bg-surface text-text-primary px-4 py-3 rounded-lg"},de={class:"flex gap-4 items-center"},me={class:"text-sm font-medium"},xe={class:"text-xs text-text-secondary line-clamp-2"},ye=q({__name:"StepFour",props:{ai:{type:Boolean}},emits:["back"],setup(N,{expose:T,emit:fe}){const x=B(!1),d=U(),f=Q(),{mutate:$,isPending:F}=H({onSuccess:s=>{f.push(`/workspace/peak/${s.workspace_id}/${s.job_id}`),d.setWorkspace(null)}}),{mutate:V,isPending:b}=M({onError:s=>console.error("Error creating workspace:",s),onSuccess:s=>{D.ai?$({workspace_id:s._id}):f.push(`/workspace/peak/${s._id}`),d.setWorkspace(null)}});O(()=>b.value,s=>{s==!0&&(x.value=!0)});const o=B({title:"",description:"",workspace_type:"",roles:[],lanes:[]});G(()=>{try{const s=d.workspace??{};s&&(o.value=s)}catch(s){console.error("Error parsing workspace from localStorage",s)}});const v=L(()=>{var s,e;return(s=o.value.variables)!=null&&s.roles?(e=o.value.variables)==null?void 0:e.roles.reduce((i,c)=>c.max_num_people+i,0):0}),z=L(()=>{var s,e;return(s=o.value.variables)!=null&&s.roles?(e=o.value.variables)==null?void 0:e.roles.reduce((i,c)=>c.people.length+i,0):0}),{data:m}=I();function A(){var s;V({company_id:(s=m==null?void 0:m.value)==null?void 0:s._id,...o.value})}T({createProjectHandler:A});const D=N;return(s,e)=>{var i,c,_,g,y,k,w,j,S,h,P;return W(b)||W(F)||x.value?(a(),J(R,{key:0})):(a(),n("div",X,[e[10]||(e[10]=t("div",{class:"text-left w-full mb-6 pt-4"},[t("h2",{class:"text-xl md:text-4xl font-semibold text-text-primary mb-1"}," Project Summary "),t("p",{class:"text-sm md:text-lg text-text-secondary"}," Review your project details before creation ")],-1)),t("div",Y,[t("div",Z,[e[6]||(e[6]=t("h3",{class:"text-xl font-semibold mb-5.5"},"Project Overview",-1)),t("p",ee,[e[0]||(e[0]=t("strong",{class:"text-text-secondary text-sm font-medium"},"Project Name",-1)),e[1]||(e[1]=t("br",null,null,-1)),p(r((c=(i=o.value)==null?void 0:i.variables)==null?void 0:c.title),1)]),t("p",te,[e[2]||(e[2]=t("strong",{class:"text-text-secondary text-sm font-medium"},"Project Type",-1)),e[3]||(e[3]=t("br",null,null,-1)),p(r((_=o.value)!=null&&_.variables?(g=o.value)==null?void 0:g.variables["workspace-type"]:"")+" Project ",1)]),(k=(y=o.value)==null?void 0:y.variables)!=null&&k.idea?(a(),n("p",se,[e[4]||(e[4]=t("strong",{class:"text-text-secondary text-sm font-medium"},"Description",-1)),e[5]||(e[5]=t("br",null,null,-1)),p(" "+r((j=(w=o.value)==null?void 0:w.variables)==null?void 0:j.idea),1)])):u("",!0)]),v.value?(a(),n("div",oe,[e[7]||(e[7]=t("h3",{class:"text-lg font-semibold mb-4"},"Team Assignment",-1)),t("p",re,r(z.value)+" / "+r(v.value),1),e[8]||(e[8]=t("p",{class:"text-sm text-text-secondary mb-4"},"Total team Assigned",-1)),t("ul",ae,[(a(!0),n(C,null,E((S=o.value.variables)==null?void 0:S.roles,l=>(a(),n("li",le,[t("span",ne,[l.role_emoji?(a(),n("span",ie,r(l.role_emoji),1)):u("",!0),p(" "+r(l.title),1)]),t("span",null,r(l.people.length)+" / "+r(l.max_num_people),1)]))),256))])])):u("",!0)]),((P=(h=o.value)==null?void 0:h.lanes)==null?void 0:P.length)>0?(a(),n("div",ce,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold text-text-primary mb-4"}," Selected Project Lanes ",-1)),t("div",ue,[(a(!0),n(C,null,E(o.value.lanes,l=>(a(),n("div",pe,[t("div",de,[t("div",{class:"w-4 h-4 rounded-full aspect-square",style:K(`background:${l.variables["lane-color"]}`)},null,4),t("div",null,[t("p",me,r(l.variables["lane-title"]),1),t("p",xe,r(l.variables["lane-description"]),1)])])]))),256))])])):u("",!0)]))}}});export{ye as default};
