import{v as b,r as i,aw as k,c as p}from"./index-DBsPnkqF.js";const c="theme",l={"--surface":"#ffffff","--surface-2":"#f3f4f6","--card":"#ffffff","--text":"#0f172a","--muted":"#6b7280","--border":"#e5e7eb","--background":"#ffffff"},m={"--surface":"#0f1115","--surface-2":"#1a1f2b","--card":"#12151d","--text":"#e5e7eb","--muted":"#9ca3af","--border":"#303948","--background":"#1b1b1b"};function w(e){let a=document.querySelector('meta[name="theme-color"]');a||(a=document.createElement("meta"),a.name="theme-color",document.head.appendChild(a)),a.content=e}function y(e){const a=document.documentElement;for(const[v,g]of Object.entries(e))a.style.setProperty(v,g)}const t=i(localStorage.getItem(c)||"system"),u=i(window.matchMedia("(prefers-color-scheme: dark)").matches),n=p(()=>t.value==="dark"||t.value==="system"&&u.value);function r(){const e=document.documentElement;e.classList.toggle("dark",n.value),e.setAttribute("data-theme",n.value?"dark":"light"),y(n.value?m:l),w(n.value?m["--background"]:l["--background"])}function h(e){if(e==="system"){t.value="system",localStorage.removeItem(c);const a=window.matchMedia("(prefers-color-scheme: dark)");u.value=a.matches,r();return}t.value=e,localStorage.setItem(c,e),r()}function S(){h(n.value?"light":"dark")}let s=0,o=null;function f(e){u.value=e.matches,t.value==="system"&&r()}function d(e){e.key===c&&e.newValue&&(t.value=e.newValue,r())}function A(){return b(()=>{if(s++,s===1){const e=document.documentElement.getAttribute("data-theme");e==="dark"||e==="light"?t.value=e:t.value=localStorage.getItem(c)||t.value,r(),o=window.matchMedia("(prefers-color-scheme: dark)"),u.value=o.matches,o.addEventListener("change",f),window.addEventListener("storage",d)}else r()}),k(()=>{s--,s===0&&(o==null||o.removeEventListener("change",f),window.removeEventListener("storage",d),o=null)}),{theme:t,isDark:n,setTheme:h,toggleTheme:S}}export{A as u};
