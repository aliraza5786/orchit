import{d as Y,W as A,be as E,r as p,i as o,e as t,n as a,R as G,t as l,f as v,h as j,w as T,B as W,j as x,bf as R,l as S,o as d}from"./index-kEjyrjW8.js";const $={class:"min-h-[100dvh] flex items-center justify-center bg-bg-body px-4"},H={class:"w-full max-w-xl"},J={class:"rounded-2xl border border-border bg-bg-card 1F2430] shadow-sm overflow-hidden"},L={key:0,class:"p-6"},O={key:1,class:"p-6"},P={class:"rounded-lg border border-red-200 bg-red-50 p-4 text-red-800 dark:border-red-900/50 dark:bg-red-950/40 red-200"},q={class:"text-sm leading-relaxed"},z={class:"mt-4 flex gap-2"},K={key:2,class:"p-6"},M={class:"rounded-lg border border-emerald-200 bg-emerald-50 p-4 text-emerald-800 emerald-200"},Q={class:"text-sm leading-relaxed"},X={class:"mt-4 flex gap-2"},Z={key:3,class:"p-6"},ee={key:4,class:"p-6"},te={class:"flex items-start gap-4"},se=["src"],ae={class:"text-lg font-medium text-text-primary"},oe={class:"text-sm text-text-secondary text-secondary-300"},de={class:"font-medium"},ie={key:0},re={class:"font-medium text-xs"},ne={key:0,class:"text-xs text-red-500 mt-1"},le={key:1,class:"text-xs text-text-secondary -500 text-secondary-400 mt-1"},ce={key:0,class:"mt-4 rounded-lg border p-3 text-sm text-text-secondary -700 text-secondary-200 dark:border-border 1F2430]"},ue={class:"mt-6 flex flex-wrap gap-2"},pe=["disabled"],ve={key:0},xe={key:1},me={key:1,class:"mt-3 text-xs text-emerald-600 emerald-400"},_e=Y({__name:"WorkspaceInvite",setup(be){const y=S(),{token:m}=A(),{data:s,refetch:B,isPending:N}=E(m.value),c=p(null),n=p(!1),u=p(null),b=p(null),g=p(!1),f=p(!1);function V(i){return i?i.replace(/[_-]+/g," ").replace(/\b\w/g,e=>e.toUpperCase()):""}async function D(){var i,e;if(!(!s.value||s.value.status=="expired")){n.value=!0,u.value="accepted",c.value=null;try{await R.post(`/workspace/invitation/accept/${encodeURIComponent(m.value)}`,{status:"accepted"}),g.value=!0}catch(r){c.value=((e=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:e.message)||"Could not accept the invitation."}finally{n.value=!1,u.value=null}}}async function F(){var i,e;if(s.value){n.value=!0,u.value="decline",c.value=null;try{await R.post(`/workspace/invitation/accept/${encodeURIComponent(m.value)}`,{status:"rejected"}),f.value=!0}catch(r){c.value=((e=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:e.message)||"Could not decline the invitation."}finally{n.value=!1,u.value=null}}}function _(){y.push({name:"home"}).catch(()=>{})}function U(){var i;(i=s.value)!=null&&i.workspace_id?y.push({name:"workspace",params:{id:s.value.workspace_id}}).catch(()=>{}):_()}return(i,e)=>{var r,h,k,w,C,I;return d(),o("div",$,[t("div",H,[t("div",J,[e[10]||(e[10]=t("div",{class:"px-6 py-5 border-b border-border"},[t("h1",{class:"text-2xl font-semibold text-text-primary"},"Workspace invitation"),t("p",{class:"text-sm text-text-secondary text-secondary-300 mt-1"}," Accept the invite to join this workspace, or decline to ignore it. ")],-1)),a(N)?(d(),o("div",L,e[1]||(e[1]=[G('<div class="animate-pulse space-y-4"><div class="h-5 w-56 bg-bg-surface"></div><div class="h-4 w-40 bg-bg-surface"></div><div class="h-24 w-full bg-bg-surface rounded-lg"></div><div class="flex gap-2"><div class="h-10 w-28 bg-bg-surface"></div><div class="h-10 w-28 bg-bg-surface"></div></div></div>',1)]))):c.value?(d(),o("div",O,[t("div",P,[e[2]||(e[2]=t("div",{class:"font-medium mb-1"},"We couldnâ€™t open this invite.",-1)),t("p",q,l(c.value),1)]),t("div",z,[t("button",{class:"px-4 py-2 rounded-md border text-sm border-border",onClick:e[0]||(e[0]=()=>a(B)())},"Try again"),t("button",{class:"px-4 py-2 rounded-md bg-black text-text-primary text-sm",onClick:_},"Go to home")])])):g.value?(d(),o("div",K,[t("div",M,[e[5]||(e[5]=t("div",{class:"font-medium mb-1"},"Youâ€™re in! ðŸŽ‰",-1)),t("p",Q,[e[3]||(e[3]=v(" Youâ€™ve joined ")),t("strong",null,l((r=a(s))==null?void 0:r.workspace_title),1),e[4]||(e[4]=v(". "))])]),t("div",X,[j(W,{onClick:U},{default:T(()=>e[6]||(e[6]=[v("Open workspace")])),_:1,__:[6]})])])):f.value?(d(),o("div",Z,[e[7]||(e[7]=t("div",{class:"rounded-lg border border-gray-200 bg-gray-50 p-4 text-text-secondary -800 dark:border-border 1F2430] dark:bg-[#171922] text-secondary-200"},[t("div",{class:"font-medium mb-1"},"Invite declined"),t("p",{class:"text-sm leading-relaxed"},"Weâ€™ve let the workspace know you wonâ€™t be joining.")],-1)),t("div",{class:"mt-4 flex gap-2"},[t("button",{class:"px-4 py-2 rounded-md bg-black text-white text-sm dark:bg-white text-primary",onClick:_},"Go to home")])])):(d(),o("div",ee,[t("div",te,[t("img",{src:a(s).workspace_logo,alt:"",class:"h-12 w-12 rounded-xl object-contain border border-border"},null,8,se),t("div",null,[t("h2",ae,l((h=a(s))==null?void 0:h.workspace_title),1),t("p",oe,[e[8]||(e[8]=v(" Invited by ")),t("span",de,l(a(s).invited_by||a(s).email),1),a(s).role_title?(d(),o("span",ie," for the "+l(V(a(s).role_title))+" Role",1)):x("",!0),e[9]||(e[9]=t("br",null,null,-1)),t("span",re,l(a(s).email),1)]),(k=a(s))!=null&&k.is_expire?(d(),o("p",ne,"This invite has expired.")):(w=a(s))!=null&&w.is_expire?(d(),o("p",le," This Invitation Link has been Expire ")):x("",!0)])]),(C=b.value)!=null&&C.message?(d(),o("div",ce," â€œ"+l(b.value.message)+"â€ ",1)):x("",!0),t("div",ue,[j(W,{disabled:a(s).is_expire||n.value,onClick:D},{default:T(()=>[v(l(n.value&&u.value==="accepted"?"Joiningâ€¦":"Accept invitation"),1)]),_:1},8,["disabled"]),t("button",{class:"px-4 py-2 rounded-md text-sm border dark:border-border 353D50] hover:bg-gray-50 dark:hover:bg-[#1a1a1f] disabled:opacity-60 disabled:cursor-not-allowed",disabled:n.value||a(s).is_expire,onClick:F},[n.value&&u.value==="decline"?(d(),o("span",ve,"Decliningâ€¦")):(d(),o("span",xe,"Decline"))],8,pe)]),((I=b.value)==null?void 0:I.status)==="accepted"&&!g.value?(d(),o("p",me," Youâ€™ve already accepted this invite. ")):x("",!0)]))]),e[11]||(e[11]=t("p",{class:"text-center text-xs text-text-secondary -500 text-secondary-400 mt-4"}," If this wasnâ€™t you, you can safely ignore this page. ",-1))])])}}});export{_e as default};
