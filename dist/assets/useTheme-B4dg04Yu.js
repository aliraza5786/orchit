import{q as b,r as i,af as k,c as w}from"./index-vaYjaRQi.js";const c="theme",d={"--surface":"#ffffff","--surface-2":"#f3f4f6","--card":"#ffffff","--text":"#0f172a","--muted":"#6b7280","--border":"#e5e7eb","--background":"#ffffff"},f={"--surface":"#0f1115","--surface-2":"#1a1f2b","--card":"#12151d","--text":"#e5e7eb","--muted":"#9ca3af","--border":"#303948","--background":"#1b1b1b"};function p(e){let t=document.querySelector('meta[name="theme-color"]');t||(t=document.createElement("meta"),t.name="theme-color",document.head.appendChild(t)),t.content=e}function E(e){const t=document.documentElement;for(const[g,v]of Object.entries(e))t.style.setProperty(g,v)}const a=i(localStorage.getItem(c)||"system"),u=i(window.matchMedia("(prefers-color-scheme: dark)").matches),n=w(()=>a.value==="dark"||a.value==="system"&&u.value);function r(){const e=document.documentElement;e.classList.toggle("dark",n.value),e.setAttribute("data-theme",n.value?"dark":"light"),E(n.value?f:d),p(n.value?f["--background"]:d["--background"])}function h(e){if(e=="system"){const t=document.documentElement.getAttribute("data-theme");t==="dark"||t==="light"?(a.value=t,console.log(">>theme",t)):a.value=localStorage.getItem(c)||a.value,r(),o=window.matchMedia("(prefers-color-scheme: dark)"),u.value=o.matches,o.addEventListener("change",l),window.addEventListener("storage",m);return}a.value=e,localStorage.setItem(c,e),r()}function y(){h(n.value?"light":"dark")}let s=0,o=null;function l(e){u.value=e.matches,a.value==="system"&&r()}function m(e){e.key===c&&e.newValue&&(a.value=e.newValue,r())}function A(){return b(()=>{if(s++,s===1){const e=document.documentElement.getAttribute("data-theme");e==="dark"||e==="light"?a.value=e:a.value=localStorage.getItem(c)||a.value,r(),o=window.matchMedia("(prefers-color-scheme: dark)"),u.value=o.matches,o.addEventListener("change",l),window.addEventListener("storage",m)}else r()}),k(()=>{s--,s===0&&(o==null||o.removeEventListener("change",l),window.removeEventListener("storage",m),o=null)}),{theme:a,isDark:n,setTheme:h,toggleTheme:y}}export{A as u};
