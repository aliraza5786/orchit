const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-DA_tKfc0.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-Dokk6JGx.js","assets/index-BiqD6_PR.js","assets/index-CloD0T9Z.css","assets/usePlan-Usm1giwl.js","assets/ConfirmDeleteModal-BV-x25yt.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-Bm1Cdi1c.js","assets/SidePanel-D1brJRZ5.js","assets/sidePanelStore-Blfbk9sd.js","assets/SidePanel-DVxqp8Jw.css","assets/KanbanBoard-D3gXUsqF.js","assets/vuedraggable.umd-iwaeKCFN.js","assets/_commonjsHelpers-_d1bhYXs.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-CtnTiRjl.js","assets/index-CDx3LcFF.js","assets/KanbanBoard-Bp34uok7.css","assets/TableSearchCell-CDEax01b.js","assets/TableAssigneeCell-DnrgTau4.js","assets/CalendarView-CKC0VCcs.js","assets/CalendarView-BkzIJC_N.css","assets/GanttChartView-B4REs8Y0.js","assets/TimelineView-Dtge58j0.js","assets/TimelineView-k1H_fj-O.css","assets/BaseTextField-DqLmewxC.js"])))=>i.map(i=>d[i]);
import{r as g,x as j,O as _t,c as V,V as nt,d as ot,a as al,W as Cl,X as os,m as v,g as e,l as we,F as X,i as b,G as be,E as Ne,o as u,t as T,U as $l,N as nl,k as G,f as ve,w as ce,Y as ol,h as U,_ as Tl,B as We,n as E,P as Zl,y as Qe,T as rl,Z as qt,M as wl,$ as ll,S as Dl,Q as rs,a0 as is,a1 as ds,a2 as us,a3 as cs,a4 as ps,J as sl,a5 as gs,a6 as bs,a7 as xs,u as ys,a8 as hs,a9 as _s,aa as ks,ab as ws,ac as Ss,ad as ke,ae as Cs,af as Ae,ag as $s,ah as Ts,ai as ge,A as Ds,aj as Jl,ak as Vs,H as Be,al as Gl,am as Xl,an as Ls,ao as Ms,C as Yl,z as Is,ap as es,aq as Es}from"./index-BiqD6_PR.js";import{u as fs,a as Sl,b as As,c as Bs,d as Ns,e as ts,f as zs,g as Ps,h as Os,i as qs,j as Us,k as js,l as Hs}from"./usePlan-Usm1giwl.js";import{_ as Rs}from"./BaseTextAreaField.vue_vue_type_script_setup_true_lang-j1GRWa1E.js";import{_ as Fs}from"./SearchBar.vue_vue_type_script_setup_true_lang-D0IYPSBu.js";import{u as vs}from"./sidePanelStore-Blfbk9sd.js";import{_ as Ws}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-Bm1Cdi1c.js";import{_ as Qs}from"./TableView.vue_vue_type_script_setup_true_lang-U7uDZCmG.js";import{k as Ot}from"./MindElixir-Ch35iPok.js";import Ks from"./KanbanSkeleton-D92aAPAT.js";import Zs from"./KanbanTicket-DN0xgL-e.js";import{F as ls}from"./fuse-Ch1WBRTM.js";import{l as Js}from"./lodash-CQYOKM_D.js";import{o as el}from"./index-CDx3LcFF.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-CtnTiRjl.js";import"./_commonjsHelpers-_d1bhYXs.js";const Gs="data:image/svg+xml,%3csvg%20width='60'%20height='46'%20viewBox='0%200%2060%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M59.7443%2034.8967L50.5682%2025.7206C50.4457%2025.5984%2050.2897%2025.5152%2050.1199%2025.4816C49.9501%2025.4479%2049.7742%2025.4653%2049.6143%2025.5315C49.4544%2025.5976%2049.3176%2025.7097%2049.2213%2025.8535C49.125%2025.9973%2049.0734%2026.1664%2049.073%2026.3394V30.517H25.9775V40.5114H49.0755V44.689C49.0759%2044.8621%2049.1275%2045.0312%2049.2238%2045.175C49.3201%2045.3187%2049.4569%2045.4308%2049.6168%2045.497C49.7767%2045.5632%2049.9527%2045.5805%2050.1224%2045.5468C50.2922%2045.5132%2050.4482%2045.43%2050.5708%2045.3078L59.7468%2036.1318C59.9095%2035.9672%2060.0005%2035.7451%2060.0001%2035.5137C59.9996%2035.2823%2059.9076%2035.0605%2059.7443%2034.8967Z'%20fill='%23C6DBA9'/%3e%3cpath%20d='M32.3149%2030.5293C30.664%2031.5967%2028.7394%2032.1633%2026.7734%2032.1609V40.5237H34.7295C39.2829%2038.5638%2042.9649%2035.0102%2045.0851%2030.5293H32.3149Z'%20fill='url(%23paint0_linear_250_16424)'/%3e%3cpath%20d='M46.2209%2020.2832C46.2317%2015.0884%2044.2448%2010.0884%2040.6714%206.3179C37.0981%202.54738%2032.2119%200.295026%2027.024%200.0269855C21.8362%20-0.241055%2016.7439%201.49574%2012.801%204.87791C8.85809%208.26009%206.36647%2013.0287%205.84178%2018.1969L2.46233%2017.8913C2.31055%2017.8782%202.15829%2017.9103%202.02467%2017.9835C1.89106%2018.0566%201.78205%2018.1677%201.71134%2018.3026C1.64063%2018.4376%201.61138%2018.5904%201.62726%2018.7419C1.64313%2018.8934%201.70343%2019.0368%201.80058%2019.1542L9.51927%2028.406C9.79205%2028.7344%2010.277%2028.7773%2010.378%2028.5045L19.6298%2020.7833C20.3876%2020.3413%2020.1173%2019.4825%2019.4328%2019.4194L15.8008%2019.091C16.0297%2017.1283%2016.8213%2015.2735%2018.0802%2013.7503C19.3391%2012.2271%2021.0115%2011.1004%2022.8961%2010.5059C24.7806%209.9114%2026.7969%209.8745%2028.7019%2010.3996C30.6069%2010.9248%2032.3195%2011.9896%2033.6332%2013.4657C34.947%2014.9419%2035.8059%2016.7664%2036.1065%2018.7195C36.4071%2020.6726%2036.1365%2022.6709%2035.3274%2024.4738C34.5183%2026.2766%2033.2051%2027.8071%2031.5462%2028.8807C29.8872%2029.9544%2027.9531%2030.5254%2025.977%2030.5251H25.9283V40.5094C31.2249%2040.4031%2036.7093%2038.2263%2040.4202%2034.4455C44.1311%2030.6648%2046.2134%2025.5808%2046.2209%2020.2832Z'%20fill='%23D7A39E'/%3e%3cpath%20d='M25.9773%2030.5293H0V40.5237H25.9773V30.5293Z'%20fill='url(%23paint1_linear_250_16424)'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_250_16424'%20x1='6.53714'%20y1='35.5252'%20x2='47.0198'%20y2='35.5252'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%236C798F'/%3e%3cstop%20offset='1'%20stop-color='%236C798F'%20stop-opacity='0.1'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_250_16424'%20x1='0'%20y1='36'%20x2='26'%20y2='36'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23E8D4D3'%20stop-opacity='0'/%3e%3cstop%20offset='1'%20stop-color='%23E2A39F'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",ms="jira-like:";function ss(z="id"){return`${z}_${Math.random().toString(36).slice(2,9)}`}function as(z,A){try{localStorage.setItem(ms+z,JSON.stringify(A))}catch{}}function ns(z,A){try{const P=localStorage.getItem(ms+z);return P?JSON.parse(P):A}catch{return A}}function Xs(z){switch(z){case"Highest":return"rounded-md bg-red-50 px-2 py-0.5 text-xs text-red-700";case"High":return"rounded-md bg-orange-50 px-2 py-0.5 text-xs text-orange-700";case"Medium":return"rounded-md bg-amber-50 px-2 py-0.5 text-xs text-amber-700";case"Low":return"rounded-md bg-gray-100 px-2 py-0.5 text-xs text-gray-600"}}function Ys(){const z=g(ns("backlog",[])),A=g(ns("sprints",[]));if(A.value.length===0)A.value.push({id:ss("sprint"),name:"Sprint 1",goal:"",start:"",end:"",started:!1,tickets:[]});else if(A.value.length>1){for(let m=1;m<A.value.length;m++)z.value.push(...A.value[m].tickets);A.value=[A.value[0]]}const P=g(A.value[0].id);j([z,A],()=>{as("backlog",z.value),as("sprints",A.value)},{deep:!0});const D=g([]),F=_t({}),M=V(()=>z.value.length>0&&D.value.length===z.value.length),d=m=>{var r;const c=A.value.find(o=>o.id===m);return!!c&&c.tickets.length>0&&(((r=F[m])==null?void 0:r.length)||0)===c.tickets.length};function K(m,c,r){const o=c.target.checked;if(m==="backlog")D.value=o?z.value.map(f=>f.id):[];else if(r){const f=A.value.find(y=>y.id===r);F[r]=o&&f?f.tickets.map(y=>y.id):[]}}function N(m,c,r,o){const f=r.target.checked,y=m==="backlog"?D.value:F[o]||(F[o]=[]);if(f&&!y.includes(c)&&y.push(c),!f){const Z=y.indexOf(c);Z>=0&&y.splice(Z,1)}}function O(){return A.value.find(m=>m.id===P.value)||A.value[0]}function W(){const c=[...z.value,...A.value.flatMap(o=>o.tickets)].map(o=>Number(String(o.key).replace(/[^0-9]/g,""))).filter(o=>!Number.isNaN(o));return`PRJ-${c.length?Math.max(...c)+1:1}`}const{mutate:ne}=fs({onSuccess:()=>{nt.success("Cards moved to sprint successfully")},onError:m=>{nt.error("Failed to move cards: "+(m.message||"Unknown error"))}});function ae(){var o,f;const m=O();if(!m||!D.value.length)return;const c=[],r=[];for(const y of z.value)(D.value.includes(y.id)?r:c).push(y);z.value=c,m.tickets.push(...r),D.value=[],r.length>0&&ne({id:m.id,payload:{card_ids:r.map(y=>y.id),priority:((f=(o=r[0])==null?void 0:o.priority)==null?void 0:f.toLowerCase())||"medium",story_points:r.reduce((y,Z)=>y+(Z.storyPoints||0),0)}})}function S(m){const c=A.value.find(y=>y.id===m);if(!c)return;const r=F[m]||[],o=[],f=[];for(const y of c.tickets)(r.includes(y.id)?f:o).push(y);c.tickets=o,z.value.push(...f),F[m]=[]}function k(m,c){if(m==="backlog")z.value=z.value.filter(r=>!D.value.includes(r.id)),D.value=[];else if(c){const r=F[c]||[],o=A.value.find(f=>f.id===c);if(!o)return;o.tickets=o.tickets.filter(f=>!r.includes(f.id)),F[c]=[]}}function q(m,c){const r={id:ss("T"),key:W(),createdAt:new Date().toISOString(),...c};if(m==="backlog")z.value.push(r);else{const o=O();o==null||o.tickets.push(r)}}function R(m){const c=O();c&&(c.name=m.name??c.name,c.goal=m.goal??c.goal,c.start=m.start??c.start,c.end=m.end??c.end)}function L(){const m=O();m&&(m.started=!m.started)}function H(m){return m.tickets.reduce((c,r)=>c+(r.storyPoints||0),0)}return{backlog:z,sprints:A,activeSprintId:P,selectedBacklogIds:D,selectedSprintIds:F,allBacklogChecked:M,allSprintChecked:d,toggleAll:K,toggleOne:N,getActiveSprint:O,createTicket:q,saveSprintMeta:R,toggleStartSprint:L,sprintPoints:H,moveSelectedToSprint:ae,moveSelectedToBacklog:S,deleteSelected:k,priorityClass:Xs}}const ea={class:"h-full min-h-0 mt-2"},ta={key:0,class:"empty-state flex flex-col justify-center items-center h-full"},la=["disabled"],sa={key:1,class:"overflow-y-auto h-[calc(100%-50px)] tickets-scroll mt-2"},aa={class:"flex flex-col flex-1 gap-[4px] min-w-0 me-1"},na={key:0,class:"flex items-center justify-center py-10"},oa=["onDragstart","onClick"],ra=["checked","onChange"],ia={class:"flex items-center text-[14px] font-sans font-medium capitalize text-text-secondary flex-1 min-w-0"},da={class:"truncate"},ua={class:"flex-shrink-0"},ca={key:0,class:"flex justify-center text-gray-500 items-center text-[11px] aspect-square w-[24px] h-[24px] bg-bg-body rounded-full border-border-input border-2"},pa={key:1,class:"w-6 h-6 rounded-full"},fa=["src"],va={key:2,class:"text-[11px] aspect-square w-[24px] h-[24px] flex justify-center items-center bg-accent/30 text-accent border-accent border rounded-full"},ma=ot({__name:"BacklogTable",props:{searchQuery:{type:String,default:""},sprintType:{type:String,default:""},checkedAll:{type:Boolean,default:!1},moduleId:{type:String,default:""}},emits:["ticket-dragged-to-sprint","open-ticket","ticket-moved-to-backlog","open-create-ticket"],setup(z,{emit:A}){const{isDark:P}=al(),{canCreateCard:D}=Cl(),F=A,M=z,{workspaceId:d}=os(),K=g(M.moduleId??null),{data:N,isPending:O}=Sl(d,M.sprintType,K,!1),W=g([]),ne=g(!1),ae=g([]),S=g([]);j(N,r=>{r!=null&&r.cards&&(W.value=r.cards.map(o=>{var h,I,xe,ee;const f=((h=o.card)==null?void 0:h.variables)??{},y=((I=o.card)==null?void 0:I._id)??o.card_id,Z=String(f["card-status"]??"").trim(),le=String(f.priority??"").trim();return{id:y,key:f["card-code"]||(y==null?void 0:y.slice(-6))||"PRJ-?",summary:f["card-title"]||"(untitled)",type:"Story",status:Z,assignee:((xe=o.card)==null?void 0:xe.assigned_to)??"Unassigned",storyPoints:Number(o.story_points??0)||0,priority:q(le),createdAt:((ee=o.card)==null?void 0:ee.created_at)??new Date().toISOString(),description:f["card-description"]||""}}))},{immediate:!0}),j(W,r=>{const o=new Set(r.map(f=>f.id));S.value=S.value.filter(f=>o.has(f))});const k=V(()=>{if(!M.searchQuery)return W.value;const r=M.searchQuery.toLowerCase();return W.value.filter(o=>{var y;const f=typeof o.assignee=="string"?o.assignee:((y=o.assignee)==null?void 0:y.u_full_name)||"";return o.key.toLowerCase().includes(r)||o.summary.toLowerCase().includes(r)||f.toLowerCase().includes(r)})});function q(r){const o=String(r??"").toLowerCase();return["highest","blocker","critical"].includes(o)?"Highest":["high","major"].includes(o)?"High":["medium","normal"].includes(o)?"Medium":"Low"}function R(r,o,f){var h;const y=S.value.includes(o.id)?[...S.value]:[o.id],Z=y.map(I=>W.value.find(xe=>xe.id===I)).filter(Boolean);ae.value=y;const le=JSON.stringify({id:o.id,ids:y,from:f,tickets:Z});(h=r.dataTransfer)==null||h.setData("text/plain",le),r.dataTransfer&&(r.dataTransfer.effectAllowed="move")}function L(r){var o;ne.value=!1,((o=r.dataTransfer)==null?void 0:o.dropEffect)!=="none"&&ae.value.length&&(W.value=W.value.filter(f=>!ae.value.includes(f.id)),S.value=S.value.filter(f=>!ae.value.includes(f))),ae.value=[]}function H(r){var o;r.preventDefault(),ne.value=!1;try{const f=(o=r.dataTransfer)==null?void 0:o.getData("text/plain");if(!f)return;const y=JSON.parse(f);if(y.from!=="sprint")return;const le=(y.tickets&&y.tickets.length?y.tickets:y.ticket?[y.ticket]:[]).filter(Boolean).filter(I=>!W.value.some(xe=>xe.id===I.id));le.length&&W.value.push(...le);const h=y.ids&&y.ids.length?y.ids:y.id?[y.id]:[];h.length&&F("ticket-moved-to-backlog",h,y.sprintId),console.log(y.sprintId,"sprintId ....")}catch(f){console.error("Drop error:",f)}}function m(r,o){o?S.value.includes(r)||S.value.push(r):S.value=S.value.filter(f=>f!==r)}function c(r,o){const f=o.target.checked;m(r,f)}return j(()=>M.checkedAll,r=>{r?(S.value=W.value.map(o=>o.id),console.log(S.value)):S.value=[]}),(r,o)=>(u(),v("section",ea,[e("div",{class:X(["rounded-lg flex flex-col h-full",ne.value?"ring-2 ring-blue-400":""]),onDragover:o[3]||(o[3]=we(()=>{},["prevent"])),onDragenter:o[4]||(o[4]=f=>ne.value=!0),onDragleave:o[5]||(o[5]=f=>ne.value=!1),onDrop:o[6]||(o[6]=f=>H(f))},[!b(O)&&k.value.length===0?(u(),v("div",ta,[o[7]||(o[7]=e("img",{src:Gs,class:"mb-4",alt:"backlog-plan"},null,-1)),o[8]||(o[8]=e("h6",{class:"text-sm text-text-primary font-semibold mb-1"}," Get started in the backlog ",-1)),o[9]||(o[9]=e("p",{class:"text-sm text-text-primary/90 mb-4"}," Plan and start a sprint to see issues here. ",-1)),e("button",{disabled:!b(D),onClick:o[0]||(o[0]=f=>r.$emit("open-create-ticket")),class:X(["relative inline-flex items-center justify-center font-medium py-1.5 px-3 text-sm rounded-md focus:outline-none transition h-[34px] bg-accent text-white hover:bg-accent-hover border-border-input border",b(D)?"cursor-pointer":"cursor-not-allowed"])}," Create Ticket ",10,la)])):(u(),v("div",sa,[e("div",aa,[b(O)?(u(),v("div",na,o[10]||(o[10]=[e("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-accent border-t-transparent animate-spin"},null,-1)]))):(u(!0),v(be,{key:1},Ne(k.value,f=>{var y,Z;return u(),v("div",{key:f.id,draggable:"true",class:X(["flex items-center gap-3 p-[8px] cursor-pointer transition-colors rounded-[8px]",S.value.includes(f.id)?"border-2 border-[#5a2d7f]":"border border-border-input",b(P)?"bg-bg-body hover:bg-bg-surface":"bg-bg-charcoal hover:bg-bg-body"]),onDragstart:le=>R(le,f,"backlog"),onDragend:o[2]||(o[2]=le=>L(le)),onClick:le=>r.$emit("open-ticket",f)},[e("input",{type:"checkbox",class:"custom-checkbox bg-bg-body border border-border-input flex-shrink-0",checked:S.value.includes(f.id),onClick:o[1]||(o[1]=we(()=>{},["stop"])),onChange:le=>c(f.id,le)},null,40,ra),e("div",ia,[e("span",da,T(f.summary),1)]),e("div",ua,[(f==null?void 0:f.assignee)==="Unassigned"?(u(),v("span",ca," UA ")):(y=f==null?void 0:f.assignee)!=null&&y.u_profile_image?(u(),v("div",pa,[e("img",{src:f.assignee.u_profile_image,alt:"",class:"rounded-full"},null,8,fa)])):(u(),v("span",va,T(b($l)((Z=f==null?void 0:f.assignee)==null?void 0:Z.u_full_name)),1))])],42,oa)}),128))])]))],34)]))}}),ga=nl(ma,[["__scopeId","data-v-11b2c9eb"]]),ba="data:image/svg+xml,%3csvg%20width='60'%20height='60'%20viewBox='0%200%2060%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M9.375%2030C11.6402%2030%2013.4766%2028.1637%2013.4766%2025.8984C13.4766%2023.6332%2011.6402%2021.7969%209.375%2021.7969C7.10977%2021.7969%205.27344%2023.6332%205.27344%2025.8984C5.27344%2028.1637%207.10977%2030%209.375%2030Z'%20fill='%23AE2A19'/%3e%3cpath%20d='M26.25%2024.375C28.5152%2024.375%2030.3516%2022.5387%2030.3516%2020.2734C30.3516%2018.0082%2028.5152%2016.1719%2026.25%2016.1719C23.9848%2016.1719%2022.1484%2018.0082%2022.1484%2020.2734C22.1484%2022.5387%2023.9848%2024.375%2026.25%2024.375Z'%20fill='%23BF63F3'/%3e%3cpath%20d='M15.3931%2035.8594H11.0159V33.0938C9.93587%2033.3387%208.81469%2033.3387%207.73465%2033.0938V35.8594H1.87528C1.55115%2035.8601%201.2345%2035.9568%200.965283%2036.1373C0.696064%2036.3178%200.486343%2036.574%200.362583%2036.8736C0.238824%2037.1731%200.206573%2037.5027%200.269899%2037.8205C0.333226%2038.1384%200.489292%2038.4304%200.718404%2038.6597L7.05872%2045L0.718404%2051.3403C0.489292%2051.5696%200.333226%2051.8616%200.269899%2052.1795C0.206573%2052.4973%200.238824%2052.8269%200.362583%2053.1264C0.486343%2053.426%200.696064%2053.6822%200.965283%2053.8627C1.2345%2054.0432%201.55115%2054.1399%201.87528%2054.1406H15.3931L21.7503%2045L15.3931%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M34.4562%2035.8594H27.8937V27.4688C26.8137%2027.7138%2025.6925%2027.7138%2024.6125%2027.4688V35.8594H19.3896L25.7487%2045L19.3896%2054.1406H34.4562L40.8143%2045L34.4562%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M43.8281%2019.6875H55.3125C55.7475%2019.6873%2056.1647%2019.5143%2056.4723%2019.2067C56.7799%2018.8991%2056.9529%2018.4819%2056.9531%2018.0469V9.375C56.9529%208.93996%2056.7799%208.5228%2056.4723%208.21518C56.1647%207.90755%2055.7475%207.73462%2055.3125%207.73438H43.8281V7.5C43.8281%207.06488%2043.6553%206.64758%2043.3476%206.3399C43.0399%206.03223%2042.6226%205.85938%2042.1875%205.85938C41.7524%205.85938%2041.3351%206.03223%2041.0274%206.3399C40.7197%206.64758%2040.5469%207.06488%2040.5469%207.5V32.5781H43.8281V19.6875Z'%20fill='%23FCA700'/%3e%3cpath%20d='M59.2843%2043.8403L51.7843%2036.3403C51.6322%2036.1878%2051.4514%2036.0668%2051.2524%2035.9842C51.0534%2035.9017%2050.8401%2035.8593%2050.6246%2035.8594H38.4521L44.8121%2045L38.4531%2054.1406H50.6246C50.8401%2054.1407%2051.0534%2054.0983%2051.2524%2054.0158C51.4514%2053.9332%2051.6322%2053.8122%2051.7843%2053.6597L59.2843%2046.1597C59.4368%2046.0075%2059.5577%2045.8267%2059.6402%2045.6277C59.7228%2045.4287%2059.7652%2045.2154%2059.7652%2045C59.7652%2044.7846%2059.7228%2044.5713%2059.6402%2044.3723C59.5577%2044.1733%2059.4368%2043.9925%2059.2843%2043.8403Z'%20fill='%2382B536'/%3e%3c/g%3e%3c/svg%3e",xa={class:"h-full min-h-0 px-2"},ya={key:0,class:"overflow-y-auto h-[calc(100%-50px)] tickets-scroll"},ha={class:"flex flex-col flex-1 gap-[4px] min-w-0 me-1"},_a=["onDragstart","onClick"],ka=["checked","onChange"],wa={class:"flex items-center text-[14px] font-sans font-medium capitalize text-text-secondary flex-1 min-w-0"},Sa={class:"truncate"},Ca={class:"flex-shrink-0"},$a=["onClick"],Ta={key:0,class:"flex justify-center text-gray-500 items-center text-[11px] aspect-square w-[24px] h-[24px] bg-bg-body rounded-full border-border-input border-2"},Da={key:1,class:"w-6 h-6 rounded-full overflow-hidden"},Va=["src"],La={key:2,class:"text-[11px] aspect-square w-[24px] h-[24px] flex justify-center items-center bg-accent/30 text-accent border-accent border rounded-full"},Ma={key:1,class:"empty-state flex flex-col justify-center items-center border-dashed border-3 p-2 border-border h-[calc(100%-50px)] min-h-0"},Ia={class:"text-sm text-text-primary font-semibold mb-1 text-center"},Ea={class:"text-sm text-text-primary/90 mb-3 max-w-120 text-center"},Aa={class:"font-bold"},Ba=ot({__name:"SprintCard",props:{sprint:{},sprintId:{},searchQuery:{},checkedSprintAll:{type:Boolean},searchedData:{},label:{}},emits:["edit-sprint","toggle-start","open-ticket","move-selected-to-backlog","delete-selected-sprint","refresh"],setup(z,{emit:A}){const{isDark:P}=al(),D=z,F=A,M=g([]),d=g([]);j(()=>D.sprint&&D.sprint.tickets,m=>{M.value=[...m||[]];const c=new Set(M.value.map(r=>r.id));d.value=d.value.filter(r=>c.has(r))},{immediate:!0,deep:!0});const K=V(()=>{var c,r;if((c=D.searchedData)!=null&&c.length)return M.value.filter(o=>D.searchedData.some(f=>f.card_id===o.id));const m=((r=D.searchQuery)==null?void 0:r.toLowerCase())||"";return m?M.value.filter(o=>{var y;const f=((y=o.assignee)==null?void 0:y.u_full_name)??"";return o.key.toLowerCase().includes(m)||o.summary.toLowerCase().includes(m)||f.toLowerCase().includes(m)}):M.value}),N=g(!1),O=g([]),{mutate:W}=fs({onSuccess:()=>{nt.success("Card moved to sprint successfully"),F("refresh")},onError:m=>{nt.error("Failed to move card: "+(m.message||"Unknown error"))}});function ne(m,c,r,o){var le;const f=d.value.includes(c.id)?[...d.value]:[c.id],y=f.map(h=>M.value.find(I=>I.id===h)).filter(Boolean);O.value=f;const Z=JSON.stringify({id:c.id,ids:f,from:r,sprintId:o,ticket:c,tickets:y});(le=m.dataTransfer)==null||le.setData("text/plain",Z),m.dataTransfer&&(m.dataTransfer.effectAllowed="move")}function ae(m){var c;N.value=!1,((c=m.dataTransfer)==null?void 0:c.dropEffect)!=="none"&&O.value.length&&(M.value=M.value.filter(r=>!O.value.includes(r.id)),d.value=d.value.filter(r=>!O.value.includes(r))),O.value=[]}function S(){N.value=!0}function k(){N.value=!1}function q(m){var c;m.preventDefault(),N.value=!1;try{const r=(c=m.dataTransfer)==null?void 0:c.getData("text/plain");if(!r)return;const o=JSON.parse(r);if(o.from!=="backlog")return;const y=(o.tickets&&o.tickets.length?o.tickets:o.ticket?[o.ticket]:[]).filter(Boolean).filter(Z=>!M.value.some(le=>le.id===Z.id));if(!y.length)return;M.value.push(...y),y.forEach(Z=>{W({id:D.sprintId,payload:{card_ids:[Z.id],priority:(Z.priority||"Medium").toLowerCase(),story_points:Z.storyPoints||0}})})}catch(r){console.error("Drop error:",r)}}function R(m,c){c?d.value.includes(m)||d.value.push(m):d.value=d.value.filter(r=>r!==m)}function L(m,c){const r=c.target.checked;R(m,r)}j(()=>D.checkedSprintAll,m=>{m?(d.value=K.value.map(c=>c.id),console.log(K.value)):d.value=[]});function H(m,c){F("delete-selected-sprint",[m],c)}return(m,c)=>(u(),v("div",xa,[e("div",{class:X([N.value?"ring-2 ring-blue-400 rounded-lg":"","h-full box-border mt-3"]),onDragover:c[2]||(c[2]=we(()=>{},["prevent"])),onDragenter:S,onDragleave:k,onDrop:q},[K.value.length>0&&m.sprint?(u(),v("div",ya,[e("div",ha,[(u(!0),v(be,null,Ne(K.value,r=>{var o,f;return u(),v("div",{key:r.id,draggable:"true",class:X(["flex items-center  gap-3 p-[8px] cursor-pointer transition-colors rounded-[8px]",d.value.includes(r.id)?"border-2 border-[#5a2d7f]":"border border-border-input",b(P)?"bg-bg-body hover:bg-bg-surface":"bg-bg-charcoal hover:bg-bg-body"]),onDragstart:y=>ne(y,r,"sprint",m.sprint.id),onDragend:c[1]||(c[1]=y=>ae(y)),onClick:y=>m.$emit("open-ticket",r)},[e("input",{type:"checkbox",class:X(["custom-checkbox border border-border-input flex-shrink-0",b(P)?"bg-bg-charcoal":"bg-bg-body "]),checked:d.value.includes(r.id),onClick:c[0]||(c[0]=we(()=>{},["stop"])),onChange:y=>L(r.id,y)},null,42,ka),e("div",wa,[e("span",Sa,T(r.summary),1)]),e("div",Ca,[d.value.includes(r.id)?(u(),v("button",{key:0,class:"w-6 h-6 flex items-center justify-center rounded-full text-red-500 hover:bg-red-500/10 transition",title:"Remove from sprint",onClick:we(y=>H(r.id,r.summary),["stop"])},c[3]||(c[3]=[e("i",{class:"fa-solid fa-xmark text-sm"},null,-1)]),8,$a)):(u(),v(be,{key:1},[(r==null?void 0:r.assignee)==="Unassigned"?(u(),v("span",Ta," UA ")):(o=r.assignee)!=null&&o.u_profile_image?(u(),v("div",Da,[e("img",{src:r.assignee.u_profile_image,alt:"",class:"w-full h-full object-cover"},null,8,Va)])):(u(),v("span",La,T(b($l)(((f=r.assignee)==null?void 0:f.u_full_name)??"")),1))],64))])],42,_a)}),128))])])):(u(),v("div",Ma,[c[7]||(c[7]=e("img",{src:ba,class:"mb-4",alt:"backlog-plan"},null,-1)),e("h6",Ia," Plan your "+T(m.label),1),e("p",Ea,[c[4]||(c[4]=G(" Drag work items from the ")),c[5]||(c[5]=e("span",{class:"font-bold"},"Backlog",-1)),G(" section or create new ones to plan the work for this "+T(m.label)+". Select ",1),e("span",Aa,"Start "+T(m.label),1),c[6]||(c[6]=G(" when you're ready. "))])]))],34)]))}}),Na=nl(Ba,[["__scopeId","data-v-742c227b"]]),za={class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-input pb-4"},Pa={class:"text-xl font-semibold"},Oa={class:"px-6 gap-4 bg-bg-input pt-5 pb-8"},qa={class:"mt-3"},Ua={class:"flex justify-end gap-2 p-6 sticky bottom-0 bg-bg-input border-t border-border"},ja=ot({__name:"SprintModal",props:{modelValue:{type:Boolean,default:!1},lable:{},sprint:{},creatingSprint:{type:Boolean},sprints:{}},emits:["update:modelValue","save","close"],setup(z,{emit:A}){const P=A,D=z,F=V(()=>D.lable?D.lable.charAt(0).toUpperCase()+D.lable.slice(1):""),M=V({get:()=>D.modelValue,set:R=>P("update:modelValue",R)}),d=_t({name:"",sprintType:"",description:""}),K=_t({name:!1,sprintType:!1,description:!1}),N=V(()=>K.name&&!String(d.name||"").trim()?"Name is required":""),O=V(()=>!!String(d.name||"").trim()&&!N.value);function W(){M.value=!1,P("close")}function ne(){K.name=!0,O.value&&P("save",{name:String(d.name||"").trim(),value:String(D.lable||"").trim(),description:String(d.description||"").trim()})}function ae(){K.name=!1,K.sprintType=!1,K.description=!1}j(()=>D.sprint,R=>{if(!R){d.name="",d.sprintType=null;return}d.name="",d.description="",d.sprintType=R.sprintType??null,ae()},{immediate:!0});const S=[{title:"Milestone",_id:"milestone",dot:"#2e9bda"},{title:"Sprint",_id:"sprint",dot:"#7d68c8"},{title:"Huddle",_id:"huddle",dot:"#eea832"}],k=V(()=>S.map(R=>({...R})));j(()=>D.lable,R=>{if(!R)return;d.description="",d.sprintType="",ae();const L=k.value.find(H=>H.title===R);d.sprintType=(L==null?void 0:L._id)??"",q()},{immediate:!0});function q(){const R=D.sprints||[],L=D.lable,H=L.charAt(0).toUpperCase()+L.slice(1);d.name=`${H} ${R.length+1}`}return j(()=>D.sprints,()=>{(!d.name||d.name.trim()==="")&&q()},{immediate:!0,deep:!0}),(R,L)=>(u(),ve(ol,{modelValue:M.value,"onUpdate:modelValue":L[3]||(L[3]=H=>M.value=H),modalClass:"!py-0",size:"md"},{default:ce(()=>[e("div",za,[e("h2",Pa,"Add New "+T(F.value),1)]),e("div",Oa,[U(Tl,{class:"rounded-1",modelValue:d.name,"onUpdate:modelValue":L[0]||(L[0]=H=>d.name=H),label:"Name",placeholder:R.lable,error:!!N.value,message:N.value,onBlur:L[1]||(L[1]=H=>K.name=!0)},null,8,["modelValue","placeholder","error","message"]),e("div",qa,[U(Rs,{modelValue:d.description,"onUpdate:modelValue":L[2]||(L[2]=H=>d.description=H),label:"Description",placeholder:`${F.value} description...`,type:"textarea",rows:4},null,8,["modelValue","placeholder"])]),L[4]||(L[4]=e("div",null,null,-1))]),e("div",Ua,[U(We,{variant:"secondary",onClick:W},{default:ce(()=>L[5]||(L[5]=[G("Cancel")])),_:1,__:[5]}),U(We,{variant:"primary",disabled:!O.value,onClick:ne},{default:ce(()=>[G(T(R.creatingSprint?"Saving...":"Save"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue"]))}}),Ha="/assets/filter-JX25xO5j.svg",Ra={class:"p-5"},Fa={class:"flex items-start gap-3"},Wa={class:"flex-1 min-w-0"},Qa={class:"text-base font-semibold text-text-primary"},Ka={class:"mt-1 text-sm text-muted"},Za={key:0,class:"mt-4"},Ja={class:"text-xs text-muted"},Ga={class:"font-medium text-body"},Xa=["placeholder"],Ya={key:1,class:"mt-4"},en={class:"mt-6 flex justify-end gap-2"},tn=["disabled"],ln=["disabled"],sn={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},an=ot({__name:"confirmDeleteTicket",props:{modelValue:{type:Boolean},title:{default:"Delete item"},itemLabel:{},itemName:{},message:{},confirmText:{default:"Delete"},cancelText:{default:"Cancel"},requireMatchText:{},loading:{type:Boolean,default:!1},size:{default:"md"},modalClass:{default:""}},emits:["update:modelValue","confirm","cancel"],setup(z,{emit:A}){const P=z,D=A,F=V({get:()=>P.modelValue,set:S=>D("update:modelValue",S)}),M=g(""),d=V(()=>P.message?P.message:`This action cannot be undone. This will permanently delete ${[P.itemLabel,P.itemName].filter(Boolean).join(" ")||"this item"}.`),K=S=>String(S??"").normalize("NFKC").toLowerCase().replace(/[\u200B-\u200D\u2060\u00AD\uFEFF]/g,"").replace(/\s+/g," ").trim(),N=V(()=>{if(!P.requireMatchText)return!0;const S=K(M.value),k=K(P.requireMatchText);return console.log({a:S,b:k,equal:S===k}),S===k}),O=V(()=>`!py-0 bg-card text-body ${P.modalClass}`.trim());function W(){M.value="",D("cancel"),F.value=!1}function ne(){!N.value||P.loading||(D("confirm"),M.value="")}function ae(){N.value&&ne()}return(S,k)=>(u(),ve(ol,{modelValue:F.value,"onUpdate:modelValue":k[1]||(k[1]=q=>F.value=q),size:S.size,modalClass:O.value},{default:ce(()=>[e("div",Ra,[e("div",Fa,[k[4]||(k[4]=e("div",{class:"h-10 w-10 rounded-full bg-red-100 text-red-600 grid place-items-center dark:bg-red-500/15"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M9 3h6a1 1 0 0 1 1 1v1h4a1 1 0 1 1 0 2h-1.077l-1.27 12.03A3 3 0 0 1 14.67 22H9.33a3 3 0 0 1-2.982-2.97L5.077 7H4a1 1 0 1 1 0-2h4V4a1 1 0 0 1 1-1Zm2 0v1h2V3h-2ZM7.08 7l1.2 11.37A1 1 0 0 0 9.33 20h5.34a1 1 0 0 0 1.05-.88L16.92 7H7.08ZM10 9a1 1 0 0 1 1 1v7a1 1 0 1 1-2 0v-7a1 1 0 0 1 1-1Zm4 0a1 1 0 0 1 1 1v7a1 1 0 1 1-2 0v-7a1 1 0 0 1 1-1Z"})])],-1)),e("div",Wa,[e("h3",Qa,T(S.title),1),e("p",Ka,[Zl(S.$slots,"message",{},()=>[G(T(d.value),1)])]),S.requireMatchText?(u(),v("div",Za,[e("label",Ja,[k[2]||(k[2]=G(" Type ")),e("span",Ga,T(S.requireMatchText),1),k[3]||(k[3]=G(" to confirm "))]),Qe(e("input",{"onUpdate:modelValue":k[0]||(k[0]=q=>M.value=q),class:"mt-1 w-full border rounded-lg px-3 py-2 text-sm border-ui bg-card text-body outline-none",placeholder:S.requireMatchText,onKeyup:qt(ae,["enter"])},null,40,Xa),[[rl,M.value]])])):E("",!0),S.$slots.extra?(u(),v("div",Ya,[Zl(S.$slots,"extra")])):E("",!0)])]),e("div",en,[e("button",{type:"button",class:"px-3 py-2 cursor-pointer text-sm rounded-md border border-ui bg-card text-body hover:bg-surface-2 disabled:opacity-50",disabled:S.loading,onClick:we(W,["stop"])},T(S.cancelText),9,tn),e("button",{type:"button",class:"px-3 py-2 text-sm rounded-md text-white bg-red-600 hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:!N.value||S.loading,onClick:ne},[S.loading?(u(),v("svg",sn,k[5]||(k[5]=[e("circle",{cx:"12",cy:"12",r:"10","stroke-width":"4",class:"opacity-25"},null,-1),e("path",{d:"M4 12a8 8 0 0 1 8-8","stroke-width":"4",class:"opacity-75"},null,-1)]))):E("",!0),G(" "+T(S.confirmText),1)],8,ln)])])]),_:3},8,["modelValue","size","modalClass"]))}}),nn={class:"sticky top-0 z-10 flex justify-between items-center py-6 px-6 border-b border-border bg-bg-input"},on={class:"text-xl font-semibold"},rn={class:"px-6 grid grid-cols-2 gap-4 bg-bg-input pt-5"},dn={class:"flex flex-col col-span-2"},un={class:"flex flex-col col-span-2"},cn={class:"flex gap-1 flex-col col-span-2 sm:col-span-1"},pn={key:0,class:"text-xs text-red-500"},fn={class:"flex gap-1 flex-col col-span-2 sm:col-span-1"},vn={key:0,class:"text-xs text-red-500"},mn={class:"flex flex-col col-span-2"},gn={class:"flex flex-col col-span-2"},bn={class:"bg-bg-body wfull px-4 py-3 rounded-lg text-xs text-text-secondary"},xn={class:"flex justify-end gap-2 p-6 sticky bottom-0 bg-bg-input"},yn=ot({__name:"StartSprintModal",props:{modelValue:{type:Boolean,default:!1},sprint:{},creatingSprint:{type:Boolean},sprintType:{}},emits:["update:modelValue","save","close"],setup(z,{emit:A}){const P=A,D=z,F=[{_id:1,title:"1 Week"},{_id:2,title:"2 Weeks"},{_id:3,title:"3 Weeks"},{_id:4,title:"4 Weeks"},{_id:5,title:"Custom"}],M=V({get:()=>D.modelValue,set:r=>P("update:modelValue",r)}),d=_t({goal:"",start:new Date().toISOString().slice(0,10),end:"",sprint_name:"",duration:null}),K=V(()=>D.sprintType?D.sprintType.charAt(0).toUpperCase()+D.sprintType.slice(1):""),N=_t({start:!1,end:!1}),O=V(()=>!d.start&&N.start?"Start date is required":""),W=V(()=>{if(!d.end&&N.end)return"End date is required";if(d.start&&d.end){const r=L(d.start),o=L(d.end);if(Number.isFinite(r)&&Number.isFinite(o)&&o<r)return"End date cannot be before start date"}return""}),ne=V(()=>!O.value&&!W.value);function ae(r){d.start=r||"",N.start=!0}function S(r){d.end=r||"",N.end=!0}function k(){M.value=!1,d.duration=null,P("close")}function q(){N.start=!0,N.end=!0,ne.value&&(P("save",{title:d.sprint_name||"new sprint",duration:String(c.value)||null,start:d.start||"",end:d.end||"",goal:d.goal??""}),d.duration=null)}function R(){N.start=!1,N.end=!1}function L(r){return r?new Date(`${r}T00:00:00`).getTime():NaN}const H=V(()=>d.duration===5);j(()=>d.duration,r=>{if(!r)return;const o=typeof r=="object"?r._id:r;if(o!==5&&d.start){const f=m(d.start,o*7);d.end=f}}),j(()=>d.start,r=>{r&&(d.duration&&d.duration!==5&&(d.end=m(d.start,d.duration*7)),d.end&&L(d.end)<L(d.start)&&(d.end=d.start))});function m(r,o){const f=new Date(r);return f.setDate(f.getDate()+o),f.toISOString().slice(0,10)}const c=V(()=>!d.start||!d.end?0:d.duration!==5?d.duration*7:(L(d.end)-L(d.start))/864e5);return j(()=>D.sprint,r=>{if(!r){d.start=new Date().toISOString().slice(0,10),d.end="",d.sprint_name="",d.goal="",R();return}d.goal=r.goal??"",d.start=r.start??new Date().toISOString().slice(0,10),d.end=r.end??"",d.sprint_name=r.title??"",R()},{immediate:!0}),(r,o)=>(u(),ve(ol,{modelValue:M.value,"onUpdate:modelValue":o[3]||(o[3]=f=>M.value=f),modalClass:"!py-0",size:"md"},{default:ce(()=>[e("div",nn,[e("h2",on,"Start "+T(r.sprintType),1),e("span",{onClick:k,class:"text-sm text-text-secondary cursor-pointer"},o[4]||(o[4]=[e("i",{class:"fa-solid fa-xmark text-text-primary text-[19px]"},null,-1)]))]),e("div",rn,[e("div",dn,[U(Tl,{modelValue:d.sprint_name,"onUpdate:modelValue":o[0]||(o[0]=f=>d.sprint_name=f),label:`${K.value} Name`,placeholder:`Enter ${r.sprintType} name`,size:"md",class:"rounded-1"},null,8,["modelValue","label","placeholder"])]),e("div",un,[U(wl,{modelValue:d.duration,"onUpdate:modelValue":o[1]||(o[1]=f=>d.duration=f),options:F,label:"Duration",placeholder:"Select duration"},null,8,["modelValue"])]),e("div",cn,[o[6]||(o[6]=e("label",{class:"text-sm font-medium"},"Start date",-1)),e("div",{class:X(["border relative flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",O.value?"border-red-500":""])},[U(ll,{placeholder:"Set start date",class:"w-full z-1","model-value":d.start,"emit-as":"ymd","onUpdate:modelValue":ae},null,8,["model-value"]),o[5]||(o[5]=e("i",{class:"fa-regular fa-calendar absolute right-2 top-3 z-0"},null,-1))],2),O.value?(u(),v("p",pn,T(O.value),1)):E("",!0)]),e("div",fn,[o[7]||(o[7]=e("label",{class:"text-sm font-medium"},"End date",-1)),e("div",{class:X(["border relative flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",W.value?"border-red-500":""])},[U(ll,{placeholder:"Set end date",class:"w-full","model-value":d.end,"emit-as":"ymd",disabled:!H.value,"onUpdate:modelValue":S,"min-date":d.start},null,8,["model-value","disabled","min-date"]),e("i",{class:X(["fa-regular fa-calendar absolute right-2 top-3 z-0",{"text-text-secondary/30 pointer-events-none":!H.value,"text-text-primary":H.value}])},null,2)],2),W.value?(u(),v("p",vn,T(W.value),1)):E("",!0)]),e("div",mn,[o[8]||(o[8]=e("label",{class:"text-sm font-medium pb-1"},"Goal (optional)",-1)),Qe(e("textarea",{"onUpdate:modelValue":o[2]||(o[2]=f=>d.goal=f),class:"w-full text-sm rounded-md border border-border px-3 py-2 bg-bg-input",rows:"2",placeholder:"Ship onboarding flow"},null,512),[[rl,d.goal]])]),e("div",gn,[e("p",bn," Duration: "+T(d.start?c.value+" days":""),1)])]),e("div",xn,[U(We,{variant:"secondary",onClick:k},{default:ce(()=>o[9]||(o[9]=[G("Cancel")])),_:1,__:[9]}),U(We,{variant:"primary",disabled:!ne.value,onClick:q},{default:ce(()=>[G(T(r.creatingSprint?"Starting...":"Start"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue"]))}}),hn={class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-body pb-4 mb-4"},_n={class:"w-full flex items-start justify-between"},kn={class:"text-sm text-text-secondary mt-1"},wn={class:"flex items-center gap-2 mt-4 w-full"},Sn={class:"flex items-center gap-2 flex-1"},Cn={class:"px-6 min-h-[400px]"},$n={key:0},Tn={key:0,class:"flex items-center justify-center py-12"},Dn={key:1,class:"text-center py-12 text-text-secondary"},Vn={key:2,class:"grid grid-cols-2 gap-3"},Ln=["onClick"],Mn={class:"flex items-center gap-3"},In={class:"w-10 h-10 rounded-lg bg-bg-input flex items-center justify-center group-hover:bg-primary/10 transition-colors"},En={class:"font-medium"},An={key:1},Bn={key:0,class:"flex items-center justify-center py-12"},Nn={key:1,class:"text-center py-12 text-text-secondary"},zn={key:2,class:"grid grid-cols-2 gap-3"},Pn=["onClick"],On={class:"flex items-center gap-3"},qn={class:"w-10 h-10 rounded-lg bg-bg-input flex items-center justify-center group-hover:bg-primary/10 transition-colors"},Un={class:"font-medium"},jn={key:2},Hn={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Rn={key:0,class:"flex flex-col"},Fn={class:"flex gap-1 flex-col"},Wn={key:0,class:"text-xs text-red-500"},Qn={class:"flex gap-1 flex-col"},Kn={key:0,class:"text-xs text-red-500"},Zn={class:"flex flex-col gap-1"},Jn={class:"mt-2"},Gn={class:"mt-4"},Xn={class:"flex justify-between gap-2 p-6 mt-8 sticky bottom-0 bg-bg-body border-t border-border"},Yn={key:1},eo={class:"flex gap-2"},to=ot({__name:"CreateBacklogTicketWithModuleSelection",props:{modelValue:{type:Boolean,default:!1},listId:{},selectedVariable:{}},emits:["update:modelValue","created"],setup(z,{emit:A}){const P=A,D=z,F=Dl(),{workspaceId:M}=rs(),d=g(1),K=g(null),N=g(null),O=g(""),{data:W,isLoading:ne}=is(M.value),ae=V(()=>{var $;return(($=W.value)==null?void 0:$.modules)||[]}),S=vs(),{data:k,isFetching:q,refetch:R}=ds({workspace_module_id:O,workspace_id:M},{enabled:V(()=>!!O)});j(()=>K.value,()=>{R()});const L=V(()=>k.value||[]),{data:H}=us(M.value);j(K,$=>{O.value=$??""});const{data:m}=cs(M,O,g("")),{mutate:c,isPending:r}=ps({onSuccess:()=>{Ve(),F.invalidateQueries({queryKey:["backlog-list"]}),o.value=!1}}),o=V({get:()=>D.modelValue,set:$=>P("update:modelValue",$)}),f=V(()=>{switch(d.value){case 1:return"Select a module to create the ticket in";case 2:return"Select a sheet within the module";case 3:return"Provide the ticket details below and click Add Ticket";default:return""}}),y=V(()=>{var $,C;return(C=(($=m==null?void 0:m.value)==null?void 0:$.variables)??[])==null?void 0:C.filter(_=>{var Q;return((Q=_==null?void 0:_.type)==null?void 0:Q.title)==="Select"&&(_==null?void 0:_.slug)!=="process"})}),Z=V(()=>((H==null?void 0:H.value)??[]).map($=>{var C;return{_id:$._id,title:((C=$==null?void 0:$.variables)==null?void 0:C["lane-title"])??String($._id)}})),le=$=>$.slug,h=_t({title:"",description:"",startDate:null,endDate:null,lane_id:null,assignee:null,variables:{}});j(y,$=>{for(const C of $){const _=le(C);_ in h.variables||(h.variables[_]=null)}},{immediate:!0});const I=_t({title:!1,description:!1,startDate:!1,endDate:!1,lane:!1}),xe=V(()=>!!h.title.trim()&&!!h.lane_id&&!!h.startDate&&!!h.endDate&&!Oe.value&&!Ze.value&&!Je.value&&!pe.value);function ee($){h.startDate=$,I.startDate=!0}function ue($){h.endDate=$,I.endDate=!0}function Te($){h.lane_id=$,I.lane=!0}function Pe($){h.assignee=$}function kt($){K.value=$._id,d.value=2}function De($){N.value=$._id,d.value=3}function wt(){d.value>1&&d.value--}function Ke(){o.value=!1,Ve()}function Ve(){d.value=1,K.value=null,N.value=null,h.title="",h.description="",h.startDate=null,h.endDate=null,h.lane_id=null,h.assignee=null,h.variables={},I.title=!1,I.description=!1,I.startDate=!1,I.endDate=!1,I.lane=!1,localStorage.removeItem("sprintType"),localStorage.removeItem("activeMilestoneId")}const rt=V(()=>{var $,C;return(C=($=m==null?void 0:m.value)==null?void 0:$.variables)==null?void 0:C.find(_=>(_==null?void 0:_._id)==D.selectedVariable)}),Oe=V(()=>I.title&&!h.title.trim()?"Title is required":""),Ze=V(()=>I.startDate?h.startDate?"":"Start date is required":""),Je=V(()=>I.endDate?h.endDate?h.startDate&&h.endDate&&h.endDate<h.startDate?"End date cannot be before start date":"":"End date is required":""),pe=V(()=>I.lane?h.lane_id?"":"Lane is required":""),qe=new Date().toISOString().split("T")[0];function it(){var C,_;if(I.title=!0,I.lane=!0,I.description=!0,I.startDate=!0,I.endDate=!0,!xe.value||r.value)return;const $={sheet_list_id:D.listId,workspace_id:M.value,sheet_id:N.value,workspace_lane_id:h.lane_id,variables:{...h.variables,[`${(C=rt.value)==null?void 0:C.slug}`]:D.listId,"card-title":h.title.trim(),"card-description":h.description.trim(),"start-date":h.startDate,"end-date":h.endDate},seat_id:((_=h.assignee)==null?void 0:_._id)??null,sprint_id:S.selectedMilestoneId||localStorage.getItem("activeMilestoneId")||null,createdAt:new Date().toISOString()};c($)}return j(()=>h.title,$=>{$!=null&&$.trim()&&I.title&&(I.title=!1)}),j(()=>h.lane_id,$=>{$&&I.lane&&(I.lane=!1)}),j(()=>h.startDate,$=>{$&&I.startDate&&(I.startDate=!1)}),j(()=>h.endDate,$=>{$&&I.endDate&&(I.endDate=!1)}),j(()=>h.description,$=>{$!=null&&$.trim()&&I.description&&(I.description=!1)}),($,C)=>(u(),ve(ol,{modelValue:o.value,"onUpdate:modelValue":C[5]||(C[5]=_=>o.value=_),modalClass:"!py-0",size:"lg"},{default:ce(()=>[e("div",hn,[e("div",_n,[e("div",null,[C[6]||(C[6]=e("h2",{class:"text-xl font-semibold"},"Create Backlog Ticket",-1)),e("p",kn,T(f.value),1)]),e("button",{class:"ml-4 p-2 rounded-md hover:bg-border transition-colors cursor-pointer",onClick:Ke,"aria-label":"Close"},C[7]||(C[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 8.586l4.95-4.95a1 1 0 111.414 1.414L11.414 10l4.95 4.95a1 1 0 01-1.414 1.414L10 11.414l-4.95 4.95a1 1 0 01-1.414-1.414L8.586 10 3.636 5.05a1 1 0 011.414-1.414L10 8.586z","clip-rule":"evenodd"})],-1)]))]),e("div",wn,[(u(),v(be,null,Ne(3,_=>e("div",{key:_,class:"flex items-center flex-1"},[e("div",Sn,[e("div",{class:X(["h-1 flex-1 rounded-full transition-colors",d.value>=_?"bg-primary":"bg-border"])},null,2)])])),64))])]),e("div",Cn,[d.value===1?(u(),v("div",$n,[C[9]||(C[9]=e("h3",{class:"text-lg font-medium mb-4"},"Select Module",-1)),b(ne)?(u(),v("div",Tn,C[8]||(C[8]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):!ae.value||ae.value.length===0?(u(),v("div",Dn," No modules available ")):(u(),v("div",Vn,[(u(!0),v(be,null,Ne(ae.value,_=>{var Q,oe,dt,ye,Ge;return u(),v("button",{key:_._id,onClick:Ut=>kt(_),class:X(["p-4 border rounded-lg hover:border-primary transition-all text-left group",K.value===_._id?"border-primary bg-primary/5":"border-border"])},[e("div",Mn,[e("div",In,[e("i",{class:X([`${(oe=(Q=_==null?void 0:_.variables)==null?void 0:Q["module-icon"])==null?void 0:oe.prefix} ${(ye=(dt=_==null?void 0:_.variables)==null?void 0:dt["module-icon"])==null?void 0:ye.iconName}`,"text-lg"])},null,2)]),e("div",null,[e("p",En,T(((Ge=_.variables)==null?void 0:Ge["module-title"])||"Untitled"),1)])])],10,Ln)}),128))]))])):d.value===2?(u(),v("div",An,[C[11]||(C[11]=e("h3",{class:"text-lg font-medium mb-4"},"Select Sheet",-1)),b(q)?(u(),v("div",Bn,C[10]||(C[10]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):!L.value||L.value.length===0?(u(),v("div",Nn," No sheets available for this module ")):(u(),v("div",zn,[(u(!0),v(be,null,Ne(L.value,_=>{var Q,oe;return u(),v("button",{key:_._id,onClick:dt=>De(_),class:X(["p-4 border rounded-lg hover:border-primary transition-all text-left group",N.value===_._id?"border-primary bg-primary/5":"border-border"])},[e("div",On,[e("div",qn,[e("i",{class:X(`fa ${(Q=_==null?void 0:_.variables["sheet-icon"])==null?void 0:Q.prefix} ${(oe=_==null?void 0:_.variables["sheet-icon"])==null?void 0:oe.iconName} text-lg`)},null,2)]),e("div",null,[e("p",Un,T((_==null?void 0:_.variables["sheet-title"])||"Untitled Sheet"),1)])])],10,Pn)}),128))]))])):d.value===3?(u(),v("div",jn,[C[15]||(C[15]=e("h3",{class:"text-lg font-medium mb-4"},"Ticket Details",-1)),e("div",Hn,[U(Tl,{modelValue:h.title,"onUpdate:modelValue":C[0]||(C[0]=_=>h.title=_),label:"Ticket Title",placeholder:"e.g., Implement real-time notifications",error:!!Oe.value,message:Oe.value,onBlur:C[1]||(C[1]=_=>I.title=!0)},null,8,["modelValue","error","message"]),Z.value.length>0?(u(),v("div",Rn,[U(wl,{size:"md",label:"Lane",options:Z.value,placeholder:"Select lane",allowCustom:!1,"model-value":h.lane_id,"onUpdate:modelValue":Te,error:!!pe.value,message:pe.value},null,8,["options","model-value","error","message"])])):E("",!0),(u(!0),v(be,null,Ne(y.value,_=>Qe((u(),ve(wl,{size:"md",key:le(_),modelValue:h.variables[_.slug],"onUpdate:modelValue":Q=>h.variables[_.slug]=Q,options:_.data.filter(Q=>Q!=="process").map(Q=>({_id:Q,title:Q})),label:_.title,placeholder:"Select value",allowCustom:!0},null,8,["modelValue","onUpdate:modelValue","options","label"])),[[sl,(_==null?void 0:_._id)!=$.selectedVariable]])),128)),e("div",Fn,[C[12]||(C[12]=e("label",{class:"text-sm"},"Start date",-1)),e("div",{class:X(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",Ze.value?"border-red-500":""])},[U(ll,{placeholder:"Set start date",class:"w-full","model-value":h.startDate,"emit-as":"ymd","onUpdate:modelValue":ee,"min-date":b(qe)},null,8,["model-value","min-date"])],2),Ze.value?(u(),v("p",Wn,T(Ze.value),1)):E("",!0)]),e("div",Qn,[C[13]||(C[13]=e("label",{class:"text-sm"},"End date",-1)),e("div",{class:X(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",Je.value?"border-red-500":""])},[U(ll,{placeholder:"Set end date",class:"w-full","model-value":h.endDate,"emit-as":"ymd","onUpdate:modelValue":ue,"min-date":h.startDate||b(qe)},null,8,["model-value","min-date"])],2),Je.value?(u(),v("p",Kn,T(Je.value),1)):E("",!0)]),e("div",Zn,[C[14]||(C[14]=e("label",{class:"text-sm"},"Assignee",-1)),e("div",Jn,[U(gs,{name:!0,workspaceId:b(M),onAssign:Pe,onUnassign:C[2]||(C[2]=_=>Pe(null)),assigneeId:h.assignee,seat:null,disabled:!1,skipPermissionCheck:!0,class:"w-full"},null,8,["workspaceId","assigneeId"])])])]),e("div",Gn,[U(bs,{label:"Description",placeholder:"What needs to be done, acceptance criteria, linksâ€¦",modelValue:h.description,"onUpdate:modelValue":C[3]||(C[3]=_=>h.description=_),onBlur:C[4]||(C[4]=_=>I.description=!0)},null,8,["modelValue"])])])):E("",!0)]),e("div",Xn,[d.value>1?(u(),ve(We,{key:0,variant:"secondary",onClick:wt},{default:ce(()=>C[16]||(C[16]=[G("Back")])),_:1,__:[16]})):(u(),v("div",Yn)),e("div",eo,[U(We,{variant:"secondary",onClick:Ke},{default:ce(()=>C[17]||(C[17]=[G("Cancel")])),_:1,__:[17]}),d.value===3?(u(),ve(We,{key:0,variant:"primary",disabled:!xe.value||b(r),onClick:it},{default:ce(()=>[G(T(b(r)?"Addingâ€¦":"Add Ticket"),1)]),_:1},8,["disabled"])):E("",!0)])])]),_:1},8,["modelValue"]))}}),lo={class:"flex flex-col h-full"},so={class:"sticky top-0 z-20 bg-bg-card overflow-x-auto shrink-0"},ao={class:"header lg:px-4 px-2 py-2 flex justify-between items-center gap-1 overflow-auto border-b border-border"},no={class:"flex lg:gap-4 gap-2 py-1"},oo={class:"hidden sm:flex"},ro={class:"flex sm:hidden"},io={class:"lg:px-4 px-2 py-1 h-8 mt-1 rounded-2xl bg-gradient-to-tr from-accent to-accent-hover text-white font-medium cursor-pointer"},uo={class:"flex gap-3 items-center"},co={class:"flex items-center gap-3 bg-bg-surface/50 h-[32px] px-2 rounded-md"},po={class:"flex gap-3 items-center"},fo={class:"flex items-center gap-3 bg-bg-surface/50 h-[32px] px-2 rounded-md"},vo={class:"flex flex-1 overflow-hidden bg-bg-card"},mo={class:"flex-1 min-w-0 flex flex-col overflow-hidden"},go={class:"flex-1 overflow-x-auto overflow-y-hidden scrollbar-visible"},bo={class:"flex gap-3 p-4 min-w-max h-full"},xo={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},yo={class:"max-h-[calc(100vh-220px)] overflow-y-auto pr-1"},ho={class:"relative w-full h-full flex overflow-hidden"},_o={key:0,class:"format-sidebar h-full py-4 px-4 w-[320px] border-l bg-bg-card overflow-x-hidden overflow-y-auto flex flex-col"},ko={class:"flex items-center justify-between pb-3 mb-4 border-b"},wo={class:"format-content space-y-6"},So={class:"format-group mb-3"},Co={class:"flex items-center gap-2"},$o=["value"],To={class:"format-group mb-3"},Do={class:"flex items-center gap-2"},Vo=["value"],Lo={class:"grid grid-cols-1 gap-3"},Mo=["value"],Io={class:"mt-6 pt-4"},Eo=["disabled"],Ao={key:0,class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},Bo={key:0,class:"fixed inset-0 bg-black/30 flex items-center justify-center"},No={class:"bg-white p-6 rounded-xl w-80"},zo={class:"flex justify-end gap-2 mt-4"},Po=["disabled"],Oo={class:"flex items-center mt-3 gap-3"},qo=ot({__name:"ActiveSprint",props:{sptint_id:{},searchQuery:{},activeSprint:{}},setup(z){const A=z,P=Ae(()=>Be(()=>import("./CreateTaskModal-DA_tKfc0.js"),__vite__mapDeps([0,1,2,3,4]))),D=Ae(()=>Be(()=>import("./ConfirmDeleteModal-BV-x25yt.js"),__vite__mapDeps([5,6,2,3]))),F=Ae(()=>Be(()=>import("./SidePanel-D1brJRZ5.js"),__vite__mapDeps([7,2,3,8,9]))),M=Ae(()=>Be(()=>import("./KanbanBoard-D3gXUsqF.js"),__vite__mapDeps([10,11,12,2,3,13,14,15]))),d=Ae(()=>Be(()=>import("./index-BiqD6_PR.js").then(s=>s.ds),__vite__mapDeps([2,3]))),K=Ae(()=>Be(()=>import("./TableSearchCell-CDEax01b.js"),__vite__mapDeps([16,2,3]))),N=Ae(()=>Be(()=>import("./TableAssigneeCell-DnrgTau4.js"),__vite__mapDeps([17,2,3]))),O=Ae(()=>Be(()=>import("./CalendarView-CKC0VCcs.js"),__vite__mapDeps([18,2,3,19]))),W=Ae(()=>Be(()=>import("./GanttChartView-B4REs8Y0.js"),__vite__mapDeps([20,2,3]))),ne=Ae(()=>Be(()=>import("./TimelineView-Dtge58j0.js"),__vite__mapDeps([21,2,3,22]))),ae=Ae(()=>Be(()=>import("./index-BiqD6_PR.js").then(s=>s.dq),__vite__mapDeps([2,3]))),S=Ae(()=>Be(()=>import("./BaseTextField-DqLmewxC.js"),__vite__mapDeps([23,2,3]))),k=g(!1),q=g(""),R=g(null),L=g(null),H=g(null),m=g(""),{isDark:c}=al(),r=g(null),o=g(!1);function f(s){q.value="",k.value=!0,R.value=s}function y(){R.value&&R.value(q.value),k.value=!1}function Z(){k.value=!1}const{mutate:le}=ps({onSuccess:()=>{pe.invalidateQueries({queryKey:["sheet-list"]})}});function h(){const s=ft.value.trim();s&&$(s)}function I(){je.value=!je.value}const xe=Ds(),ee=g("kanban"),{workspaceId:ue,moduleId:Te}=rs(),Pe=g(""),kt=g(!1),De=g(!1),{canCreateVariable:wt,canCreateCard:Ke,canEditCard:Ve,canAssignCard:rt}=Cl(),{data:Oe}=is(ue.value),Ze=g(Oe.value.modules||[]),Je=V(()=>(Ze.value||[]).map(s=>{var l,n;return{_id:s._id,title:((l=s.variables)==null?void 0:l["module-title"])??"Untitled module",description:((n=s.variables)==null?void 0:n["module-description"])??"",icon:s.icon??null,status:s.status??null}})),pe=Dl(),{mutate:qe,isPending:it}=xs({onSuccess:()=>{pe.invalidateQueries({queryKey:["sheet-list"]}),ft.value="",He.value=!1,je.value=!1,He.value=!1}}),$=s=>{qe({workspace_id:ue.value,module_id:Te.value,variable_id:ye.value,value:s})};j(Je,s=>{if(s.length&&!Pe.value){const l=s.find(n=>n.title==="Tasks")||s[0];Pe.value=l._id}},{immediate:!0});const{data:C,refetch:_}=ds({workspace_id:ue.value,workspace_module_id:Te.value});j(Pe,s=>{s&&_()});const Q=V(()=>{var s;return C.value?(s=C.value[0])==null?void 0:s._id:""}),oe=g(Q),dt=V(()=>{var s;return Le.value?(s=Le.value[0])==null?void 0:s._id:""}),ye=g(dt),Ge=ys(),Ut=V(()=>A.sptint_id),{data:ie,isPending:St,refetch:me}=As(Ut),ut=g(!1),ct=g(),Ue=s=>{ct.value=s},il=hs(),dl=_s();function jt(s){s.type=="column"?il.mutate({payload:{workspace_id:ue.value,workspace_module_id:Te.value,variable_id:ye.value,moved_value:s.meta.id,new_index:s.meta.newIndex}}):dl.mutate({payload:{workspace_id:ue.value,card_id:s.meta.moved._id,group_value:s.meta.fromColumnId,group_variable_id:ye.value,new_index:s.meta.newIndex,sheet_id:oe.value}})}const Y=s=>{},{mutate:fe}=ks({onSuccess:()=>{_(),vl.value=!1}}),pt=V(()=>!C.value||!C.value.length?[]:C.value.map(s=>{var l,n;return{_id:s._id,title:((l=s.variables)==null?void 0:l["sheet-title"])||"Untitled Sheet",description:((n=s.variables)==null?void 0:n["sheet-description"])||"",icon:s.icon||null,status:s.generation_status||null}}));j(pt,s=>{s.length>0&&!oe.value&&(oe.value=s[0]._id)},{immediate:!0}),j(pt,s=>{s.length>0?m.value=s[0].title:m.value="Backlog"},{immediate:!0}),j(C,s=>{var l;(s==null?void 0:s.length)>0&&(oe.value=(l=s[0])==null?void 0:l._id)});const je=g(!1),ft=g(""),ul=s=>{qe({workspace_id:xe.params.id,module_id:xe.params.module_id,new_value:s.title,value:s.oldTitle,variable_id:ye.value})},He=g(!1),Se=g(),Ht=()=>{qe({value:Se.value.title,workspace_id:ue.value,module_id:Te.value,newValue:Se.value.title,variable_id:ye.value,is_trash:!0})},cl=s=>{He.value=!0,Se.value=s},Re=s=>{ut.value=!0,localStorage.setItem("selectedStatusTitle",s==null?void 0:s.title),localStorage.setItem("selectedModuleId",Pe.value),Se.value=s},vt=V(()=>A.searchQuery),mt=g("");j(vt,Js.debounce(s=>{mt.value=s},200));const pl=V(()=>{var l;const s=(l=ie.value)==null?void 0:l.flatMap(n=>n.cards.map(i=>({...i,columnId:n.title})));return new ls(s,{keys:["card-title","card-description"],threshold:.3})}),gt=V(()=>{var s,l;if(ee.value==="kanban"){if(!vt.value)return ie.value;const n=pl.value.search(vt.value).map(i=>i.item);return ie.value.map(i=>({...i,cards:n.filter(p=>p.columnId===i.title)}))}else{const n=(s=vt.value)==null?void 0:s.trim();if(!n){let p=[];return(l=ie.value??[])==null||l.forEach(B=>{p=[...p,...B==null?void 0:B.cards]}),p}return new ls(fl.value,{keys:["card-title","card-description"],threshold:.3}).search(n).map(p=>p.item)}}),fl=V(()=>{let s=[];return(ie.value??[]).forEach(l=>{s=[...s,...l==null?void 0:l.cards]}),s}),vl=g(!1),{data:Le,isPending:Rt}=cs(ue,Pe,oe),{mutate:ml}=ws(),gl=(s,l)=>{ml({payload:{sheet_id:oe.value,workspace_id:ue.value,variable_slug:s,is_visible:l}})},{data:Ct}=us(ue),$t=V(()=>((Ct==null?void 0:Ct.value)??[]).map(s=>{var l;return{_id:s._id,title:((l=s==null?void 0:s.variables)==null?void 0:l["lane-title"])??String(s._id)}})),bl=s=>s.map(l=>({_id:l.value??l,title:l.value??l})),bt=Ss({onSuccess:()=>{pe.invalidateQueries({queryKey:["get-sheets"]}),pe.invalidateQueries({queryKey:["sheet-list"]}),pe.invalidateQueries({queryKey:["roles"]})}}),xt=(s,l)=>{if(!ie.value)return;const n=ie.value.findIndex(i=>i.cards.some(p=>p._id===s));if(n!==-1){const i=ie.value[n].cards.findIndex(p=>p._id===s);if(i!==-1){const p={...ie.value[n].cards[i]};l(p),ie.value[n].cards[i]=p,Jl(ie)}}};function Ft(s,l){xt(s,n=>{const i=$t.value.find(p=>p._id===l);i&&(n.lane=i)}),Jl(ie),bt.mutate({card_id:s,workspace_lane_id:l})}const Wt=(s,l)=>{xt(s,n=>{n.seat=l}),bt.mutate({card_id:s,seat_id:l==null?void 0:l._id})},Xe=V(()=>{var s,l;return[{key:"card-title",label:"Title",render:({row:n,value:i})=>ke("div",{class:"flex items-center gap-1 w-full"},[ke("a",{onClick:()=>ct.value=n,class:"text-[12px] underline text-blue-500 shrink-0 overflow-ellipsis cursor-pointer"},n["card-code"]),ke("div",{class:"flex-1 min-w-0"},[ke("input",{onFocusout:p=>{var B;Qt(n==null?void 0:n._id,"card-title",(B=p==null?void 0:p.target)==null?void 0:B.value)},class:"text-[12px] w-full overflow-ellipsis capitalize p-1 w-full p-1 focus:border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-transparent focus:bg-bg-body text-[12px] h-8",defaultValue:i,disabled:!Ve.value})])])},{key:"end-date",label:"Due Date",render:({row:n,value:i})=>{const p=g(i);return ke(d,{class:" capitalize flex items-center gap-2 text-[12px]",placeholder:"Set start date",tableInputClass:!0,modelValue:p.value,disabled:!Ve.value,"onUpdate:modelValue":B=>xl(n==null?void 0:n._id,B),emptyText:"Date"})}},{key:"lane",label:"Lane",render:({row:n})=>{var i;return ke(K,{options:$t.value??[],placeholder:"Select lane",modelValue:((i=n.lane)==null?void 0:i._id)||null,disabled:!Ve.value,"onUpdate:modelValue":p=>Ft(n==null?void 0:n._id,p),displayField:"title",emptyText:"Lane"})}},{key:"created_by",label:"Owner",render:({value:n})=>ke("div",{class:"capitalize flex items-center gap-2  px-3"},[ke("div",{class:" rounded-full  "},[n!=null&&n.u_profile_image?ke("img",{class:"w-6 h-6 rounded-full",src:n==null?void 0:n.u_profile_image}):ke("div",{class:"w-5 h-5 rounded-full flex justify-center items-center text-[11px] ",style:`background:${n!=null&&n.u_full_name?Cs({name:n.u_full_name,email:n.u_email}):""}`},$l(n==null?void 0:n.u_full_name))]),ke("span",{class:"text-[12px]"},n?n==null?void 0:n.u_full_name:"")])},{key:"seat",label:"Assignee",render:({row:n,value:i})=>ke(N,{class:"capitalize flex items-center gap-2 ",onAssign:p=>Wt(n==null?void 0:n._id,p),assigneeId:i,seat:i,name:!0,disabled:!rt.value,emptyText:"Assignee"})},...((l=(s=Le.value)==null?void 0:s.variables)==null?void 0:l.filter(n=>{var i;return((i=n==null?void 0:n.type)==null?void 0:i.title)==="Select"}).map(n=>({key:n==null?void 0:n.slug,label:n==null?void 0:n.slug,render:({row:i,value:p})=>{var de;let B=p;if(Array.isArray(i==null?void 0:i.variables)){const a=i.variables.find(t=>t.slug===n.slug);a&&(B=a.value)}else B=((de=i==null?void 0:i.variables)==null?void 0:de[n.slug])??(i==null?void 0:i[n.slug])??p;return ke("div",{class:"capitalize flex items-center gap-2"},[ke(K,{options:bl(n.data??[]),modelValue:B,disabled:!Ve.value,emptyText:n.slug,"onUpdate:modelValue":a=>{Qt(i==null?void 0:i._id,n.slug,a)},columnName:n.slug})])},visible:n==null?void 0:n.is_visible})))??[]]});function Qt(s,l,n){xt(s,i=>{if(l==="card-title"&&(i[l]=n),Array.isArray(i.variables)){const p=i.variables.find(B=>B.slug===l);p?p.value=n:i.variables.push({slug:l,value:n,type:"Select"})}else i.variables&&typeof i.variables=="object"?i.variables[l]=n:i[l]=n}),bt.mutate({card_id:s,variables:{[l]:n.trim()}})}function Tt(s){if(s["card-title"]){const l={sheet_list_id:"To Do",workspace_id:ue.value,sheet_id:oe.value,variables:{"card-title":s["card-title"].trim()},createdAt:new Date().toISOString()};le(l)}}const xl=(s,l)=>{const n=ie.value.findIndex(i=>i.cards.some(p=>p._id===s));if(n!==-1){const i=ie.value[n].cards.findIndex(p=>p._id===s);i!==-1&&(ie.value[n].cards[i]["end-date"]=l)}bt.mutate({card_id:s,variables:{"start-date":l}})},Fe=g(null),Dt=g(!1),Kt=g(!1);j(Dt,s=>{s&&(Kt.value=!1)}),j(Kt,s=>{s&&(Dt.value=!1)});const Me=V(()=>{var s,l;return(l=(s=Fe.value)==null?void 0:s.nodeObj)!=null&&l.style?Fe.value.nodeObj.style:Et(he)});function Ce(s,l,n){return s!==void 0?s:l!==void 0?l:n}function Vt(s,l){var de;if(!((de=Fe.value)!=null&&de.nodeObj))return;const n=Fe.value.nodeObj;n.style||(n.style={});const i=l.target,p=i.type==="number"?Number(i.value):i.value;switch(s){case"bg_color":n.style.background=p;break;case"color":n.style.color=p;break;case"font_size":n.style.fontSize=`${p}px`;break;case"font_weight":n.style.fontWeight=p;break;case"font_style":n.style.fontStyle=p;break;case"font_family":n.style.fontFamily=p;break;case"border_color":n.style.borderColor=p;break;case"border_width":n.style.borderWidth=`${p}px`;break;case"border_radius":n.style.borderRadius=`${p}px`;break;case"padding":n.style.padding=`${p}px`;break}const B=document.getElementById(n.id);B&&It(n,B)}const he={bg_color:"#ffffff",color:"#000000",font_size:14,font_weight:"normal",font_style:"normal",font_family:"Inter",border_color:"#cccccc",border_width:0,border_radius:0,padding:0},Ye=g(!1);async function Zt(){var l;const s=(l=Fe.value)==null?void 0:l.nodeObj;if(!(!s||Ye.value)){Ye.value=!0;try{const n=Vs(s);n._originalStyle||(n._originalStyle={});const i=n.style||{},p=n._originalStyle,B={bg_color:Ce(i.background,p.bg_color,he.bg_color),color:Ce(i.color,p.color,he.color),font_size:Ce(i.fontSize?parseInt(i.fontSize):void 0,p.font_size,he.font_size),font_weight:Ce(i.fontWeight,p.font_weight,he.font_weight),font_style:Ce(i.fontStyle,p.font_style,he.font_style),font_family:Ce(i.fontFamily,p.font_family,he.font_family),border_color:Ce(i.borderColor,p.border_color,he.border_color),border_width:Ce(i.borderWidth?parseInt(i.borderWidth):void 0,p.border_width,he.border_width),border_radius:Ce(i.borderRadius?parseInt(i.borderRadius):void 0,p.border_radius,he.border_radius),padding:Ce(i.padding?parseInt(i.padding):void 0,p.padding,he.padding),hyperLink:q.value||n.hyperLink||""};n._originalStyle={...B};const de=n.unique_name==="sheet"?{sheet_id:n.id,workspace_id:ue.value,workspace_module_id:Te.value,style:B}:{card_id:n.id,seat_id:n.seat_id,style:B};n.unique_name==="sheet"?await fe(de):await bt.mutateAsync(de)}finally{Ye.value=!1}}}const yl=g([]);function Jt(s){const l={id:"root",topic:localStorage.getItem("currentName")??"",isRoot:!0,children:[],style:{},_originalStyle:{},unique_name:"root"};if(!Array.isArray(s))return l;const n={};return s.forEach(i=>{var a;const p=m.value,B=((a=i.style)==null?void 0:a.hyperLink)||"";n[p]||(n[p]={id:i._id,topic:p,variables:i==null?void 0:i.variables,children:[],style:i==null?void 0:i.style,_originalStyle:(i==null?void 0:i.style)||{},unique_name:"sheet",hyperLink:B||""},l.children.push(n[p]));const de={id:i==null?void 0:i._id,topic:i.title,children:[],style:Et(i==null?void 0:i.style),_originalStyle:i.style||{},unique_name:"List",hyperLink:B||""};(i.cards||[]).forEach((t,x)=>{var te;const se=((te=t.style)==null?void 0:te.hyperLink)||"",re={id:t._id||`card-${x}`,seat_id:t.seat_id,topic:t["card-title"],style:Et(t.style),_originalStyle:t.style||{},children:[],unique_name:"card",hyperLink:se||""};de.children.push(re),yl.value=re}),n[p].children.push(de)}),l}const{mutateAsync:Gt}=$s({onSuccess:()=>{pe.invalidateQueries({queryKey:["sheets"]}),pe.invalidateQueries({queryKey:["sheet-list"]}),close()}}),yt=s=>{var l,n;(n=(l=ie.value)==null?void 0:l.sheets)==null||n.forEach(i=>{var p;(p=i.sheet_lists)==null||p.forEach(B=>{B.cards=B.cards.filter(de=>de._id!==s)})})},ht=g(!1),Lt=g(null),hl=async()=>{if(r.value)try{o.value=!0,await Xl({url:`workspace/card/${r.value}`,method:"DELETE"}),yt(r.value),ht.value=!1,Lt.value=null,nt.success("Ticket deleted successfully"),await _(),await me()}catch(s){nt.error(Ls(s))}finally{o.value=!1}},Xt=async s=>{try{await Xl({url:"workspace/cards/group-card-order",method:"PATCH",data:s}),_(),me()}catch(l){console.error("Failed to reorder card:",l)}};function Mt(){var n;const s=(n=L.value)==null?void 0:n.querySelector(".mind-elixir-toolbar.rb");if(!s||s.querySelector(".open-sidebar-btn"))return;const l=document.createElement("button");l.className="open-sidebar-btn me-toolbar-btn ms-2",l.title="Open Formatting Sidebar",l.innerHTML='<i class="fa-solid fa-sidebar"></i>',l.addEventListener("click",()=>{De.value=!De.value}),s.appendChild(l)}let Ie=null;function _l(){var l,n;Ie&&(Ie.disconnect(),Ie=null);const s=(n=(l=L.value)==null?void 0:l.querySelector(".mind-elixir-toolbar.rb"))==null?void 0:n.parentElement;s&&(Ie=new MutationObserver(()=>{Mt()}),Ie.observe(s,{childList:!0,subtree:!0}),Mt())}Ts(()=>{ee.value!=="mindmap"||!L.value||!ie.value||Gl(()=>{var de,a;const s=Jt(ie.value);H.value&&((a=(de=H.value).destroy)==null||a.call(de),H.value=null);const l=new Set,n=new Set,i=new Set,p=new Ot({el:L.value,theme:c.value?Ot.DARK_THEME:Ot.THEME,draggable:!0,contextMenu:!0,toolBar:!0,keypress:!0,locale:"en",overflowHidden:!1,contextMenuOption:{Update:!0,extend:[{name:"Update Node",onclick:()=>{var x;De.value&&(De.value=!1);const t=(x=Fe.value)==null?void 0:x.nodeObj;t&&Ue(t)}},{name:"Add Hyperlink",onclick:()=>{f(async()=>{await Zt()})}}]}});H.value=p,p.init({nodeData:s}),setTimeout(()=>{p.toCenter()},100),Gl(()=>{_l()}),p.bus.addListener("selectNode",t=>{t&&(Fe.value={nodeObj:t})}),p.bus.addListener("renderNode",t=>{!(t!=null&&t.nodeObj)||!(t!=null&&t.element)||It(t.nodeObj,t.element)});const B=t=>{let x=t;for(;x;){if(x.unique_name==="sheet")return x;x=x.parent}return null};p.bus.addListener("operation",async t=>{if(t){if(t.name==="moveNode"||t.name==="moveNodeBefore"||t.name==="moveNodeAfter"){const x=t.obj,se=t.target;if(!x||x.unique_name!=="card"||!se)return;const re=x._originalParent||x.parent;if(!re||re.unique_name!=="List")return;const te=se.unique_name==="List"?se:se.parent;if(!te||te.unique_name!=="List")return;const J=B(te);if(!J)return;const $e=te.children.findIndex(ze=>ze.id===x.id);if($e===-1)return;x._originalParent=te,await Xt({workspace_id:ue.value,card_id:x.id,group_value:te.topic,group_variable_id:ye.value,new_index:$e,sheet_id:J.id});return}if(t.name==="removeNode"){const x=t.obj;if(!x||!x.id||x.unique_name!=="card")return;r.value=x.id,await hl();return}if(t.name==="addChild"||t.name==="insertSibling"){const x=t.obj;if(!x||!x.id)return;l.add(x.id);return}if(t.name==="finishEdit"){const x=t.obj;if(!x||!x.id)return;const se=l.has(x.id),re=n.has(x.id);if(!se&&!re||re)return;if(se){l.delete(x.id),n.add(x.id);const te=x.parent;if(!te||!("unique_name"in te)){n.delete(x.id);return}if(te.unique_name==="root"&&!i.has(x.id)){i.add(x.id);try{await Gt({variables:{"sheet-title":x.topic??"New Sheet","sheet-description":"This is custom description"},is_ai_generated:!1,workspace_id:ue.value,workspace_module_id:Te.value})}catch{n.delete(x.id),i.delete(x.id)}return}if(te.unique_name==="List"){try{const J=Yt({topic:x.topic??"New Card",id:x.id},te);J.variables&&(J.variables["card-description"]="This is a default description"),await le(J)}catch{n.delete(x.id)}return}if(te.unique_name==="sheet"){try{console.log("Creating new list under sheet...")}catch{n.delete(x.id)}return}}}}})})}),j(c,()=>{H.value&&H.value.changeTheme(c.value?Ot.DARK_THEME:Ot.THEME)},{immediate:!0});function It(s,l){if(!s||!l||!s.style)return;const n=l.querySelector(".topic"),i=l.querySelector(".node")??l,p=s.style;p.background&&(i.style.background=p.background),p.color&&n&&(n.style.color=p.color),n&&(p.fontSize&&(n.style.fontSize=p.fontSize),p.fontFamily&&(n.style.fontFamily=p.fontFamily),p.fontWeight&&(n.style.fontWeight=p.fontWeight),p.fontStyle&&(n.style.fontStyle=p.fontStyle)),p.borderColor&&(i.style.borderColor=p.borderColor),p.borderWidth&&(i.style.borderWidth=p.borderWidth),p.borderRadius&&(i.style.borderRadius=p.borderRadius),p.padding&&(i.style.padding=p.padding)}function Et(s={}){return{background:s.bg_color,color:s.color,fontSize:s.font_size!=null?`${s.font_size}px`:void 0,fontWeight:s.font_weight,fontStyle:s.font_style,fontFamily:s.font_family,borderColor:s.border_color,borderWidth:s.border_width!=null?`${s.border_width}px`:void 0,borderRadius:s.border_radius!=null?`${s.border_radius}px`:void 0,padding:s.padding!=null?`${s.padding}px`:void 0,hyperLink:s.hyperLink||void 0}}function Yt(s,l){const n=new Date,i=n.toISOString().split("T")[0],p=new Date(n.getTime()+3*24*60*60*1e3).toISOString().split("T")[0];return{sheet_list_id:(l==null?void 0:l.topic)||"In Progress",workspace_id:ue.value,sheet_id:oe.value,workspace_lane_id:(s==null?void 0:s.workspace_lane_id)||null,variables:{"card-status":(l==null?void 0:l.topic)||"In Progress","card-type":null,priority:null,process:null,"card-title":s.topic||"New Card","card-description":"","start-date":i,"end-date":p},createdAt:new Date().toISOString()}}return(s,l)=>{var n,i,p,B,de;return u(),v("div",lo,[e("div",so,[e("div",ao,[e("div",no,[e("div",oo,[e("button",{class:"cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white items-center justify-center gap-1 px-2 rounded-md text-xs font-medium",onClick:l[0]||(l[0]=a=>s.$emit("go-back"))},l[24]||(l[24]=[e("i",{class:"fa-solid fa-chevron-left"},null,-1),G(" Go Back ")]))]),e("div",ro,[e("button",{class:"cursor-pointer bg-gradient-to-tr from-accent to-accent-hover px-2 text-white items-center justify-center py-1 rounded-md font-medium",onClick:l[1]||(l[1]=a=>s.$emit("go-back"))},l[25]||(l[25]=[e("i",{class:"fa-solid fa-chevron-left"},null,-1)]))]),e("div",io,T(s.activeSprint),1)]),e("div",uo,[e("div",co,[e("div",po,[e("div",fo,[e("button",{class:X(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",ee.value==="kanban"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"List view",onClick:l[2]||(l[2]=a=>ee.value="kanban")},l[26]||(l[26]=[e("i",{class:"fa-solid fa-chart-kanban"},null,-1)]),2),e("button",{onClick:l[3]||(l[3]=a=>ee.value="table"),class:X(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",ee.value==="table"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gallery view"},l[27]||(l[27]=[e("i",{class:"fa-solid fa-align-left"},null,-1)]),2),e("button",{onClick:l[4]||(l[4]=a=>ee.value="mindmap"),class:X(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",ee.value==="mindmap"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"MindMap view"},l[28]||(l[28]=[e("i",{class:"fa-solid fa-chart-diagram"},null,-1)]),2),e("button",{onClick:l[5]||(l[5]=a=>ee.value="calendar"),class:X(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",ee.value==="calendar"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Calendar view"},l[29]||(l[29]=[e("i",{class:"fa-regular fa-calendar"},null,-1)]),2),e("button",{onClick:l[6]||(l[6]=a=>ee.value="gantt"),class:X(["aspect-square cursor-pointer rounded-sm p-0",ee.value==="gantt"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gantt Chart view"},l[30]||(l[30]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M4 6h2v12H4V6Zm4 4h10v2H8v-2Zm0 4h10v2H8v-2Zm0-8h10v2H8V6Z"})],-1)]),2),e("button",{onClick:l[7]||(l[7]=a=>ee.value="timeline"),class:X(["aspect-square cursor-pointer rounded-sm p-0",ee.value==="timeline"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Timeline view"},l[31]||(l[31]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M4 12a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm16 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm-8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm0-16a2 2 0 1 1 0-4 2 2 0 0 1 0 4Z",opacity:"0"}),e("path",{d:"M4 12h4m8 0h4M9 12h6M9 12v-6M15 12v6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),2)])])])])])]),e("div",vo,[e("div",mo,[ee.value==="kanban"?(u(),v(be,{key:0},[Qe(U(Ks,null,null,512),[[sl,b(St)]]),Qe(e("div",go,[e("div",bo,[U(b(M),{class:"flex h-full",board:gt.value,variable_id:ye.value,sheet_id:oe.value,onOnPlus:Re,"onDelete:column":l[8]||(l[8]=a=>cl(a)),"onUpdate:column":l[9]||(l[9]=a=>ul(a)),onReorder:jt,onAddColumn:$,"onSelect:ticket":Ue,onOnBoardUpdate:Y},{"column-footer":ce(a=>{var t,x,se,re,te;return[(x=(t=b(Ge))==null?void 0:t.transitions)!=null&&x.all_allowed&&!((te=(re=(se=b(Ge))==null?void 0:se.transitions)==null?void 0:re.all_allowed)!=null&&te.includes(a.column.title))&&b(Ge).transitions.currentColumn!=a.column.title?(u(),v("div",xo," Disable ( you can't drop here ) ")):E("",!0)]}),ticket:ce(({ticket:a})=>[e("div",yo,[U(Zs,{selectedVar:ye.value,ticket:a,onSelect:()=>Ue(a)},null,8,["selectedVar","ticket","onSelect"])])]),_:1},8,["board","variable_id","sheet_id"])])],512),[[sl,!b(St)]])],64)):E("",!0),ee.value==="table"?(u(),ve(Qs,{key:1,onToggleVisibility:gl,onAddVar:l[10]||(l[10]=()=>{kt.value=!0}),isPending:b(St)||b(Rt),columns:Xe.value,rows:gt.value,canCreate:b(Ke),canCreateVariable:b(wt),onCreate:Tt},null,8,["isPending","columns","rows","canCreate","canCreateVariable"])):E("",!0),ee.value==="mindmap"?(u(),v(be,{key:2},[e("div",ho,[e("div",{ref_key:"mindMapRef",ref:L,class:"flex-1 h-full overflow-hidden rounded-md relative",style:{height:"600px",width:"100%"}},null,512),De.value&&b(rt)&&b(Ve)&&b(Ke)?(u(),v("div",_o,[e("div",ko,[l[33]||(l[33]=e("h3",{class:"text-sm font-semibold text-secondary"},"Format Node",-1)),e("button",{onClick:l[11]||(l[11]=a=>De.value=!1),class:"text-gray-400 hover:text-gray-700"},l[32]||(l[32]=[e("i",{class:"fa-solid fa-times"},null,-1)]))]),e("div",wo,[e("div",null,[l[36]||(l[36]=e("h4",{class:"text-xs font-semibold text-secondary uppercase mb-3"}," Colors ",-1)),e("div",So,[l[34]||(l[34]=e("label",{class:"block text-xs text-secondary mb-1"},"Background",-1)),e("div",Co,[e("div",{class:"h-10 w-10 rounded-md border cursor-pointer relative",style:ge({backgroundColor:Me.value.background})},[e("input",{type:"color",value:Me.value.background,class:"absolute inset-0 opacity-0 cursor-pointer",onInput:l[12]||(l[12]=a=>Vt("bg_color",a)),style:{"pointer-events":"all"}},null,40,$o)],4),U(b(S),{modelValue:Me.value.background,placeholder:"#3b82f6",class:"flex-1",readonly:""},null,8,["modelValue"])])]),e("div",To,[l[35]||(l[35]=e("label",{class:"block text-xs text-secondary mb-1"},"Text",-1)),e("div",Do,[e("div",{class:"h-10 w-10 rounded-md border cursor-pointer relative",style:ge({backgroundColor:Me.value.color})},[e("input",{type:"color",value:Me.value.color,class:"absolute inset-0 opacity-0 cursor-pointer",onInput:l[13]||(l[13]=a=>Vt("color",a)),style:{"pointer-events":"all"}},null,40,Vo)],4),U(b(S),{modelValue:Me.value.color,placeholder:"#3b82f6",class:"flex-1",readonly:""},null,8,["modelValue"])])])]),e("div",null,[e("div",Lo,[e("div",null,[l[38]||(l[38]=e("label",{class:"block text-xs text-secondary mb-1"},"Weight",-1)),e("select",{class:"w-full h-8 border rounded px-2 text-sm",value:Me.value.fontWeight,onChange:l[14]||(l[14]=a=>Vt("font_weight",a))},l[37]||(l[37]=[e("option",{value:"lighter"},"Light",-1),e("option",{value:"normal"},"Normal",-1),e("option",{value:"bold"},"Bold",-1),e("option",{value:"bolder"},"Extra Bold",-1)]),40,Mo)])])])]),e("div",Io,[e("button",{class:"w-full cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium hover:shadow-md disabled:opacity-60",disabled:Ye.value,onClick:Zt},[Ye.value?(u(),v("span",Ao)):E("",!0),e("span",null,T(Ye.value?"Updating...":"Update"),1)],8,Eo)])])):E("",!0)]),k.value&&b(rt)&&b(Ve)&&b(Ke)?(u(),v("div",Bo,[e("div",No,[l[39]||(l[39]=e("h3",{class:"text-lg font-semibold mb-4"},"Insert Web Link",-1)),Qe(e("input",{"onUpdate:modelValue":l[15]||(l[15]=a=>q.value=a),type:"text",placeholder:"Enter or paste a URL",class:"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[rl,q.value]]),e("div",zo,[e("button",{onClick:Z,class:"px-4 py-2 rounded-md bg-gray-200 hover:bg-gray-300"}," Cancel "),e("button",{disabled:!q.value,onClick:y,class:X(["px-4 py-2 rounded-md text-white",q.value?"bg-blue-500 hover:bg-blue-600":"bg-blue-300 cursor-not-allowed"])}," Insert ",10,Po)])])])):E("",!0),je.value?(u(),v("div",{key:1,class:"absolute top-40 left-70 bg-bg-body rounded-lg p-4 shadow-lg z-100 min-w-[328px] border",onClick:l[17]||(l[17]=we(()=>{},["stop"]))},[U(b(S),{autofocus:!0,modelValue:ft.value,"onUpdate:modelValue":l[16]||(l[16]=a=>ft.value=a),placeholder:"Add New list",onKeyup:qt(h,["enter"])},null,8,["modelValue"]),l[40]||(l[40]=e("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),e("div",Oo,[U(b(ae),{onClick:h,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:ce(()=>[G(T(b(it)?"Adding...":"Add list"),1)]),_:1}),e("i",{class:"fa-solid fa-close cursor-pointer",onClick:I})])])):E("",!0)],64)):E("",!0),ee.value==="calendar"?(u(),ve(b(O),{key:3,data:gt.value,"onSelect:ticket":Ue,class:"min-h-[600px]"},null,8,["data"])):E("",!0),ee.value==="gantt"?(u(),ve(b(W),{key:4,data:gt.value,"onSelect:ticket":Ue},null,8,["data"])):E("",!0),ee.value==="timeline"?(u(),ve(b(ne),{key:5,data:gt.value,"onSelect:ticket":Ue},null,8,["data"])):E("",!0),U(b(D),{onClick:l[18]||(l[18]=we(()=>{},["stop"])),modelValue:He.value,"onUpdate:modelValue":l[19]||(l[19]=a=>He.value=a),title:"Delete List",itemLabel:"list",itemName:(n=Se.value)==null?void 0:n.title,requireMatchText:(i=Se.value)==null?void 0:i.title,confirmText:"Delete workspace",cancelText:"Cancel",size:"md",loading:b(it),onConfirm:Ht,onCancel:l[20]||(l[20]=()=>{He.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),ut.value?(u(),ve(b(P),{selectedVariable:ye.value,listId:(p=Se.value)==null?void 0:p.title,sheet_id:oe.value,key:"createTaskModalKey",modelValue:ut.value,"onUpdate:modelValue":l[21]||(l[21]=a=>ut.value=a),onSubmit:l[22]||(l[22]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):E("",!0)]),(B=ct.value)!=null&&B._id?(u(),ve(b(F),{key:0,class:"w-[400px] flex-shrink-0",details:ct.value,onClose:l[23]||(l[23]=()=>Ue({variables:{}})),showPanel:!!((de=ct.value)!=null&&de._id)},null,8,["details","showPanel"])):E("",!0)])])}}}),Uo=nl(qo,[["__scopeId","data-v-f7782a79"]]),jo={class:"flex-auto min-h-0 rounded-[6px] overflow-x-auto flex-col flex backdrop-blur flex-grow h-full"},Ho={key:1,class:"flex flex-col flex-1 min-h-0"},Ro={class:"h-screen w-full flex flex-col -mt-3.5"},Fo={class:"overflow-x-auto w-full flex-1"},Wo={class:"min-w-[1200px] h-full flex flex-col"},Qo={key:0,class:"px-0.5 py-4 w-full min-w-0 flex flex-col min-h-0 overflow-x-auto h-full"},Ko={class:"flex items-center justify-between mt-2"},Zo={class:"text-sm font-semibold flex gap-2 items-center"},Jo={class:"flex items-center gap-2 relative",ref:"filterDropdownRef"},Go={class:"mt-3"},Xo={key:0,class:"flex items-center gap-2 overflow-x-auto no-scrollbar py-1"},Yo={key:0,class:"ml-2 text-xs font-normal"},er=["onClick"],tr={key:0,class:"ml-2 text-xs font-normal"},lr={key:1,class:"relative flex items-center gap-3"},sr={class:"relative flex-shrink-0"},ar={class:"flex items-center gap-2 truncate"},nr=["src"],or={class:"truncate"},rr={class:"ml-2 text-xs font-normal"},ir={key:0,class:"absolute left-0 top-full mt-1 w-44 bg-bg-card border border-gray-200 rounded-lg shadow-lg z-[9999]"},dr={class:"flex flex-col"},ur=["onClick"],cr={class:"flex gap-2 overflow-x-auto no-scrollbar flex-1"},pr=["onClick"],fr={key:0,class:"w-full h-full flex justify-center items-center"},vr={key:1,class:"flex-1 min-h-0 overflow-y-auto"},mr={class:"relative z-10 group"},gr={class:"rounded-md relative pt-2 flex flex-col flex-1 bg-bg-card min-h-0 border border-border"},br={class:"flex justify-between gap-4 px-3 pb-2 border-b border-border-input"},xr={class:"flex items-center gap-2 min-w-0 py-1"},yr=["onClick"],hr={class:"flex items-center lg:gap-2 max-w-full"},_r={class:"flex items-center lg:gap-2 max-w-full"},kr={class:"truncate max-w-[160px]"},wr={key:1,class:"absolute left-0 mt-2 w-60 bg-bg-card border-accent-hover rounded-xl shadow-lg z-50 max-h-64 overflow-y-auto overflow-x-hidden"},Sr={class:"relative flex-1"},Cr=["onClick"],$r=["onBlur","onKeyup"],Tr={class:"relative ml-2 flex gap-2"},Dr=["onClick"],Vr=["onClick"],Lr={class:"flex justify-end items-center"},Mr={class:"flex gap-2"},Ir={class:"gap-2 hidden lg:flex"},Er={key:0,class:"flex gap-2"},Ar={key:1},Br={key:0,class:"gap-2"},Nr={class:"hidden lg:fxex bg-[#E6E1F5] text-accent px-3 py-1 rounded-2xl justify-center items-center"},zr={key:0,class:"flex lg:hidden ms-2"},Pr=["title"],Or=["disabled"],qr={class:"absolute z-50 top-10 mb-2 -translate-x-2/3 bg-card border border-accent text-accent text-xs px-2 py-1 rounded whitespace-nowrap"},Ur={key:0,class:"fixed inset-0 z-50 flex items-center justify-center w-full"},jr={class:"relative bg-bg-card rounded-lg p-4 mx-3 w-full max-w-md lg:max-w-2xl xl:max-w-3xl"},Hr={class:"flex flex-col gap-2 mt-4"},Rr={class:"text-sm text-muted mb-2"},Fr={class:"flex gap-2 w-full"},Wr={key:0,class:"mt-1 w-full bg-bg-card rounded-md max-h-64 overflow-y-auto"},Qr={class:"flex items-center justify-between"},Kr={class:"font-medium"},Zr={class:"text-muted text-xs ml-2"},Jr={class:"flex gap-2 text-xs"},Gr={class:"text-muted border border-border-input rounded-md px-3 py-1"},Xr={key:1,class:"absolute top-full left-0 mt-1 w-full bg-bg-card border border-border-input rounded-md shadow-md p-4 z-50 text-center text-muted"},Yr={key:0,class:"w-full h-full min-h-[250px] flex justify-center items-center"},ei={key:1,class:"flex-1 min-h-0 overflow-y-auto"},ti={key:1,class:"bg-bg-card w-full p-6 flex flex-col justify-center h-full items-center text-center gap-4"},li={class:"text-sm text-text-primary font-semibold mb-1 text-center"},si={class:"text-sm text-text-primary/90 mb-3 max-w-120 text-center"},ai={key:2,class:"w-full h-full min-h-[250px] flex flex-col items-center justify-center text-center gap-4 p-6"},ni={class:"text-sm text-text-primary font-semibold mb-1 text-center"},oi={class:"text-sm text-text-primary/90 mb-3 max-w-120 text-center"},tl=400,ri=ot({__name:"Plan",setup(z){const{isDark:A}=al(),P=g(!1),D=g(!1),F=g(""),M=g(!1),d=g(!1),{canCreateCard:K}=Cl(),N=g(!1),O=g(null),W=g([]),ne=g(null),ae=g(!1),S=g(!1),k=V(()=>c.value.value),q=g(""),R=g(!1),L=vs(),H=[{label:"Milestone",value:"milestone",dot:"#7D68C8"},{label:"Sprint",value:"sprint",dot:"#7D68C8"},{label:"Huddle",value:"huddle",dot:"#7D68C8"}],m=V(()=>k.value?k.value.charAt(0).toUpperCase()+k.value.slice(1):""),c=g(H[0]),r=g(null),o=g(!1);el(r,()=>{o.value=!1});const f=()=>{P.value=!1},y=()=>{N.value=!0,localStorage.setItem("activeSprintId",Y.value||"")},Z=g(!1),le=()=>{Z.value=!Z.value},{workspaceId:h}=os(),I=g(!1),{moveSelectedToSprint:xe,moveSelectedToBacklog:ee,deleteSelected:ue,saveSprintMeta:Te,toggleStartSprint:Pe}=Ys();function kt(){!O.value||!W.value.length||(W.value.forEach(a=>{wt({sprintId:O.value,cardId:a})}),De())}function De(){oe.value=!1,O.value=null,W.value=[]}const{mutate:wt,isPending:Ke}=Bs({onSuccess:()=>{ue("sprint",O.value),D.value=!1,Ht(),De()}}),Ve=g("");function rt(a,t){!Y.value||!a.length||(console.log("Deleting selected sprint tickets:",a,t),O.value=Y.value,W.value=a,Ve.value=t,D.value=!0)}function Oe(a){q.value=a,L.setActiveMilestoneId(a),localStorage.setItem("activeMilestoneId",a),localStorage.setItem("sprintType","milestone"),p.value=a||"all",B.value=!1}function Ze(a){q.value=a,p.value=a,L.setActiveMilestoneId(a),localStorage.setItem("activeMilestoneId",a),localStorage.setItem("sprintType","huddle"),B.value=!1}function Je(a){q.value=a,L.setActiveMilestoneId(a),typeof window<"u"&&localStorage.setItem("activeMilestoneId",a),localStorage.setItem("sprintType","sprint"),B.value=!1}const{data:pe,refetch:qe}=Sl(h,k,q);j(q,()=>{qe()});const{data:it}=Ms(h),$=V(()=>{var a;return((a=it.value)==null?void 0:a.modules.filter(t=>{var x;return((x=t==null?void 0:t.variables)==null?void 0:x["module-title"])!=="Pin"}))||[]});j(()=>k.value,(a,t)=>{a!==t&&qe()});const{mutate:C,isPending:_}=Ns({onSuccess:()=>{Tt.invalidateQueries({queryKey:["sprint-list"]}),oe.value=!1}}),Q=g(null),oe=g(!1),dt=()=>{var a;C((a=Q.value)==null?void 0:a._id)},{mutate:ye,isPending:Ge}=ts({onSuccess:a=>{Te({name:a.title}),Ut({id:Y.value,payload:{title:a.title,start_date:a.start_date,end_date:a.end_date,goal:a.goal,duration:Number(a.duration_days)}}),je.value=!1}}),{mutate:Ut,isPending:ie}=zs({onSuccess:()=>{pt()}}),St=async a=>{R.value=!0;try{await ye({id:Y.value,payload:{title:a.title,duration:a.duration,start_date:a.start,end_date:a.end,goal:a.goal}})}finally{R.value=!1}},{data:me,refetch:ut,isLoading:ct}=Ps(h.value,k),Ue=V(()=>{var a;return((a=me.value)==null?void 0:a.sprints)??[]});j(()=>k.value,(a,t)=>{a!==t&&ut()});const{refetch:il,isPending:dl}=Sl(h,k,g("")),jt=V(()=>{var a,t;return(t=(a=me==null?void 0:me.value)==null?void 0:a.sprints[0])==null?void 0:t._id}),Y=g(jt.value);j(()=>jt.value,a=>{Y.value=a}),j(()=>Y.value,a=>{var t;Q.value=((t=me.value)==null?void 0:t.sprints.find(x=>x._id===a))||null});const{data:fe,refetch:pt}=Os(Y,{enabled:V(()=>!!Y.value)}),je=g(!1),ft=()=>{localStorage.setItem("asFirstTime",JSON.stringify(!0)),je.value=!0},ul=()=>JSON.parse(localStorage.getItem("asFirstTime")||"false"),He=()=>{var a;((a=fe.value)==null?void 0:a.status)==="active"&&ul()&&(N.value=!0,localStorage.setItem("asFirstTime",JSON.stringify(!1)))};Yl(()=>{He()}),j(()=>{var a;return(a=fe.value)==null?void 0:a.status},()=>{He()});const{data:Se,refetch:Ht,isFetching:cl}=qs(Y);j(()=>Y.value,()=>{Y.value&&pt()});const Re=g(""),vt=g(null),mt=V(()=>{const a=Se.value;if(!Re.value||!(a!=null&&a.backlog_items))return[];const t=Re.value.toLowerCase().trim();return a.backlog_items.filter(x=>{var et,tt,lt,st,at,At,Bt,Nt,zt,Pt;const se=((lt=(tt=(et=x.card)==null?void 0:et.variables)==null?void 0:tt["card-title"])==null?void 0:lt.toLowerCase())||"",re=((At=(at=(st=x.card)==null?void 0:st.variables)==null?void 0:at["card-code"])==null?void 0:At.toLowerCase())||"",te=((zt=(Nt=(Bt=x.card)==null?void 0:Bt.variables)==null?void 0:Nt["card-status"])==null?void 0:zt.toLowerCase())||"",J=((Pt=x.priority)==null?void 0:Pt.toLowerCase())||"",$e=String(x._id||"").toLowerCase(),ze=String(x.card_id||"").toLowerCase();return se.includes(t)||re.includes(t)||te.includes(t)||J.includes(t)||$e.includes(t)||ze.includes(t)})});function pl(a){Re.value=a}function gt(){mt.value.length===1&&Rt(mt.value[0])}const fl={high:"bg-red-500/20 text-red-500",medium:"bg-yellow-500/20 text-yellow-500",low:"bg-green-500/20 text-green-500"};function vl(a){const t=a==null?void 0:a.toLowerCase();return fl[t]??"bg-gray-500/20 text-gray-500"}const Le=V(()=>{var x,se,re,te;const a=(x=Se.value)==null?void 0:x.backlog_items;if(!a)return null;const t=(a||[]).map(J=>{var et,tt,lt,st,at;const $e=((et=J==null?void 0:J.card)==null?void 0:et.variables)||{},ze=((tt=J==null?void 0:J.card)==null?void 0:tt._id)||J.card_id;return{id:ze,key:$e["card-code"]||(ze==null?void 0:ze.slice(-6))||"PRJ-?",summary:$e["card-title"]||"(untitled)",type:"Story",status:ml(String($e["card-status"]||"").trim()),assignee:((st=(lt=J==null?void 0:J.card)==null?void 0:lt.assigned_to)==null?void 0:st.name)||"Unassigned",storyPoints:Number(J.story_points||0),priority:gl(String($e.priority||"").trim()),createdAt:((at=J==null?void 0:J.card)==null?void 0:at.created_at)||new Date().toISOString(),description:$e["card-description"]||""}});return{id:(se=Se.value)==null?void 0:se._id,name:((re=Se.value)==null?void 0:re.title)||"Sprint 1",title:(te=Se.value)==null?void 0:te.title,goal:"",start:"",end:"",started:!1,tickets:t}});function Rt(a){console.log("selected sprint id",a),Y.value=a._id,s.value=!1}function ml(a){const t=a.toLowerCase();return t.includes("progress")?"In Progress":t.includes("done")||t.includes("complete")?"Done":"Todo"}function gl(a){const t=a.toLowerCase();return t==="highest"||t==="blocker"||t==="critical"?"Highest":t==="high"||t==="major"?"High":t==="medium"||t==="normal"?"Medium":"Low"}const{mutate:Ct}=Us({onSuccess:()=>{nt.success("Card removed from sprint successfully"),$t()},onError:a=>{nt.error("Failed to remove card from sprint",a)}});function $t(){Ht(),ut(),il(),pt()}function bl(a,t){const x=Array.isArray(a)?a:[a],se=t||Y.value;!se||!x.length||x.forEach(re=>{Ct({sprintId:se,cardId:re})})}const bt=g(!1),xt=g(null);function Ft(){I.value=!0,xt.value=null}function Wt(a){xt.value=a,P.value=!0,bt.value=!0}const Xe=g(!1);function Qt(){Xe.value=!0}const Tt=Dl(),{mutate:xl,isPending:Fe}=js({onSuccess:a=>{Te({name:a.title}),Tt.invalidateQueries({queryKey:["sprint-list"]}),Xe.value=!1}}),{mutate:Dt,isPending:Kt}=ts({onSuccess:a=>{Te({name:a.title}),Tt.invalidateQueries({queryKey:["sprint-list"]}),Xe.value=!1}}),Me=g("");function Ce(a){const t=Me.value.trim();if(!t||t===a.title){It();return}Dt({id:a._id,payload:{workspace_id:h.value,title:t}}),Ie.value=null}function Vt(a){var t;Q.value?Dt({id:(t=Q.value)==null?void 0:t._id,payload:{workspace_id:h.value,title:a.name,sprintType:a.value,description:a.description}}):xl({payload:{workspace_id:h.value,title:a.name,sprintType:a.value,description:a.description}})}const he=g([]);function Ye(a){Q.value=null,Xe.value=!0,he.value=a}function Zt(a){Q.value=a,oe.value=!0}const{mutate:yl,isPending:Jt}=Hs(Y,{onSuccess:()=>{pt()}}),Gt=()=>{yl({})},yt=g(null),ht=g(0);let Lt=!1;Yl(()=>{if(!yt.value)return;const a=yt.value.offsetWidth;ht.value=a/3});function hl(){Lt=!0,document.addEventListener("mousemove",Xt),document.addEventListener("mouseup",Mt)}function Xt(a){if(!Lt||!yt.value)return;const t=yt.value.getBoundingClientRect(),x=a.clientX-t.left;x<tl?ht.value=tl:x>t.width-tl?ht.value=t.width-tl:ht.value=x}function Mt(){Lt=!1,document.removeEventListener("mousemove",Xt),document.removeEventListener("mouseup",Mt)}const Ie=g(null);function _l(a){Ie.value=a._id,a.tempTitle=a.title,Me.value=a.title}function It(){var t;const a=(t=me.value)==null?void 0:t.sprints.find(x=>x._id===Ie.value);a&&(a.tempTitle=a.title),Ie.value=null}el(ne,()=>{S.value=!1});const Et=a=>{console.log("selected type",a),c.value=a,ae.value=!1};el(r,()=>{ae.value=!1});const Yt=g(null),s=g(!1);el(Yt,()=>{s.value=!1});const l=g(!1),n=()=>{l.value=!0},i=()=>{l.value=!1,Re.value=""},p=g("all"),B=g(!1),de=V(()=>{var t,x,se;if(p.value==="all")return"All Milestones";const a=(x=(t=it.value)==null?void 0:t.modules)==null?void 0:x.find(re=>re._id===p.value);return((se=a==null?void 0:a.variables)==null?void 0:se["module-title"])??"All Milestones"});return(a,t)=>{var x,se,re,te,J,$e,ze,et,tt,lt,st,at,At,Bt,Nt,zt,Pt,Vl,Ll,Ml,Il,El,Al,Bl,Nl,zl,Pl,Ol,ql,Ul,jl,Hl,Rl,Fl;return u(),v("div",jo,[N.value||R.value?(u(),ve(Uo,{key:0,sptint_id:Y.value,searchQuery:F.value,"active-sprint":k.value,onGoBack:t[0]||(t[0]=w=>N.value=!1)},null,8,["sptint_id","searchQuery","active-sprint"])):(u(),v("div",Ho,[e("div",Ro,[e("div",Fo,[e("div",Wo,[b(ie)?E("",!0):(u(),v("div",Qo,[e("div",{ref_key:"containerRef",ref:yt,class:"flex gap-1 min-h-0 overflow-x-auto group h-full"},[e("section",{class:"px-4 rounded-md relative flex flex-col min-h-0 bg-bg-card h-full border border-border",style:ge({width:ht.value+"px"})},[e("div",Ko,[e("h2",Zo,[Qe(e("input",{type:"checkbox",class:"custom-checkbox bg-bg-body border border-border-input flex-shrink-0","onUpdate:modelValue":t[1]||(t[1]=w=>M.value=w)},null,512),[[Is,M.value]]),G(" Tickets ("+T((se=(x=b(pe))==null?void 0:x.cards)==null?void 0:se.length)+" "+T(((te=(re=b(pe))==null?void 0:re.cards)==null?void 0:te.length)>1?"Tasks":"Task")+") ",1)]),e("div",Jo,[b(K)?(u(),v("button",{key:0,class:"w-8 h-8 rounded cursor-pointer text-sm hover:bg-bg-body flex items-center justify-center",onClick:Ft},t[22]||(t[22]=[e("i",{class:"text-text-primary fa-regular fa-plus"},null,-1)]))):E("",!0)],512)]),e("div",Go,[k.value==="milestone"?(u(),v("div",Xo,[e("button",{onClick:t[2]||(t[2]=w=>Oe("")),class:X(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium transition-colors whitespace-nowrap",q.value===""?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])},[t[23]||(t[23]=G(" All Modules ")),q.value===""?(u(),v("span",Yo," ("+T(($e=(J=b(pe))==null?void 0:J.cards)==null?void 0:$e.length)+") ",1)):E("",!0)],2),(u(!0),v(be,null,Ne($.value,w=>{var _e,Ee;return u(),v("button",{key:w._id,onClick:kl=>Oe(w._id),class:X(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium transition-colors whitespace-nowrap cursor-pointer",q.value===w._id?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])},[G(T(w.variables["module-title"])+" ",1),q.value===w._id?(u(),v("span",tr," ("+T((Ee=(_e=b(pe))==null?void 0:_e.cards)==null?void 0:Ee.length)+") ",1)):E("",!0)],10,er)}),128))])):k.value==="huddle"||k.value==="sprint"?(u(),v("div",lr,[e("div",sr,[e("button",{class:"h-8 min-w-[160px] flex items-center justify-between px-2 rounded-md border text-sm border-border hover:bg-bg-body",onClick:t[3]||(t[3]=w=>B.value=!B.value)},[e("span",ar,[e("img",{src:b(Ha),alt:"filter",class:"w-4 h-4"},null,8,nr),e("span",or,[G(T(de.value||"All Milestones")+" ",1),e("span",rr," ("+T((et=(ze=b(pe))==null?void 0:ze.cards)==null?void 0:et.length)+") ",1)])]),t[24]||(t[24]=e("i",{class:"fas fa-chevron-down text-xs ml-2"},null,-1))]),B.value?(u(),v("div",ir,[e("ul",dr,[e("li",{class:"px-3 py-2 cursor-pointer hover:bg-bg-body hover:text-primary",onClick:t[4]||(t[4]=w=>Oe(""))}," All Milestones "),(u(!0),v(be,null,Ne($.value,w=>(u(),v("li",{key:w._id,class:"px-3 py-2 cursor-pointer hover:bg-bg-body hover:text-primary",onClick:_e=>Ze(w._id)},T(w.variables["module-title"]),9,ur))),128))])])):E("",!0)]),e("div",cr,[(u(!0),v(be,null,Ne(Ue.value,w=>(u(),v("button",{key:w._id,onClick:_e=>Je(w._id),class:X(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium whitespace-nowrap transition-colors",q.value===w._id?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])},T(w.title),11,pr))),128))])])):E("",!0)]),b(dl)?(u(),v("div",fr,t[25]||(t[25]=[e("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-accent border-t-transparent animate-spin"},null,-1)]))):(u(),v("div",vr,[U(ga,{checkedAll:M.value,"sprint-type":k.value,searchQuery:F.value,"module-id":q.value,onMoveSelectedToSprint:b(xe),onDeleteSelectedBacklog:t[5]||(t[5]=w=>b(ue)("backlog")),onOpenTicket:Wt,onTicketMovedToBacklog:bl,onOpenCreateTicket:Ft},null,8,["checkedAll","sprint-type","searchQuery","module-id","onMoveSelectedToSprint"])]))],4),e("div",mr,[(u(),v("svg",{onMousedown:hl,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-4 cursor-col-resize opacity-0 group-hover:opacity-100 transition",role:"img","aria-label":"Resize"},t[26]||(t[26]=[e("path",{fill:"currentColor",d:"M10 3h4v2h-4V3zm0 4h4v2h-4V7zm0 4h4v2h-4v-2zm0 4h4v2h-4v-2zm0 4h4v2h-4v-2z"},null,-1),e("path",{fill:"currentColor",d:"M4 2h2v20H4V2zm14 0h2v20h-2V2z",opacity:"0.4"},null,-1)]),32))]),e("section",gr,[e("div",br,[e("div",xr,[e("div",{ref_key:"elipseWrapperSprint",ref:ne,class:"relative inline-block"},[e("button",{onClick:t[6]||(t[6]=we(w=>S.value=!S.value,["stop"])),class:"flex items-center gap-2 lg:px-3 px-2 py-1.5 text-sm font-medium bg-transparent rounded-lg",style:ge({border:"1px solid "+c.value.dot})},[e("span",{class:"w-2 h-2 rounded-full hidden lg:flex",style:ge({backgroundColor:c.value.dot})},null,4),G(" "+T(c.value.label)+" ",1),t[27]||(t[27]=e("i",{class:"fas fa-chevron-down text-xs"},null,-1))],4),U(es,{name:"fade"},{default:ce(()=>[S.value?(u(),v("ul",{key:0,onClick:t[7]||(t[7]=we(()=>{},["stop"])),class:"absolute left-0 mt-2 w-44 bg-bg-dropdown border border-border rounded-xl shadow-lg z-50"},[(u(),v(be,null,Ne(H,w=>e("li",{key:w.value,onClick:_e=>(Et(w),S.value=!S.value),class:"flex items-center gap-3 px-4 py-2 text-sm cursor-pointer hover:bg-bg-body hover:text-primary"},[e("span",{class:"w-2 h-2 rounded-full",style:ge({backgroundColor:w.dot})},null,4),G(" "+T(w.label),1)],8,yr)),64))])):E("",!0)]),_:1})],512),e("div",hr,[e("div",_r,[e("div",{ref_key:"sprintDropdownWrapperRef",ref:Yt,class:"relative min-w-0"},[(tt=b(me))!=null&&tt.sprints.length?(u(),v("button",{key:0,onClick:t[8]||(t[8]=w=>s.value=!s.value),class:X(["flex items-center gap-3 lg:px-6 px-1 py-1.5 rounded-lg text-sm font-medium transition-all",Y.value?"text-white":"bg-gray-100 hover:bg-card hover:text-primary"]),style:ge(Y.value?{backgroundColor:c.value.dot}:{})},[e("span",kr,T((at=(st=(lt=b(me))==null?void 0:lt.sprints)==null?void 0:st.find(w=>w._id===Y.value))==null?void 0:at.title),1),t[28]||(t[28]=e("i",{class:"fas fa-chevron-down text-xs"},null,-1))],6)):E("",!0),s.value?(u(),v("div",wr,[(u(!0),v(be,null,Ne((At=b(me))==null?void 0:At.sprints,w=>{var _e;return u(),v("div",{key:w._id,class:"relative px-4 py-2 flex items-center justify-between text-sm cursor-pointer transition-color"},[e("div",Sr,[Ie.value!==w._id?(u(),v("button",{key:0,class:"text-left truncate w-full",onClick:Ee=>Rt(w)},T(w.title),9,Cr)):Qe((u(),v("input",{key:1,ref_for:!0,ref:"editingInputRef","onUpdate:modelValue":t[9]||(t[9]=Ee=>Me.value=Ee),class:"w-full px-1 py-1 text-sm rounded outline-none bg-bg-card border border-[#7d68c8]",placeholder:"Enter new name",onClick:t[10]||(t[10]=we(()=>{},["stop"])),onBlur:Ee=>Ce(w),onKeyup:[qt(Ee=>Ce(w),["enter"]),qt(It,["esc"])]},null,40,$r)),[[rl,Me.value]])]),e("div",Tr,[e("button",{class:"ml-2 text-xs text-gray-400 hover:text-accent",onClick:we(Ee=>_l(w),["stop"])},t[29]||(t[29]=[e("i",{class:"fas fa-pen"},null,-1)]),8,Dr),(_e=b(me))!=null&&_e.sprints.length&&Ie.value!==w._id?(u(),v("button",{key:0,onClick:we(Ee=>Zt(w),["stop"]),class:"w-4 h-4 rounded-full flex items-center justify-center text-red-500"},t[30]||(t[30]=[e("i",{class:"fas fa-times text-xs"},null,-1)]),8,Vr)):E("",!0)])])}),128))])):E("",!0)],512)])]),e("button",{onClick:t[11]||(t[11]=w=>{var _e;return Ye((_e=b(me))==null?void 0:_e.sprints)}),class:X(["w-8 h-8 lg:flex sm:hidden items-center justify-center rounded-full border text-white transition-colors shrink-0"]),style:ge({backgroundColor:c.value.dot})},t[31]||(t[31]=[e("i",{class:"fa-solid fa-plus"},null,-1)]),4)]),e("div",Lr,[e("div",Mr,[(Nt=(Bt=b(fe))==null?void 0:Bt.cards)!=null&&Nt.length?(u(),v("button",{key:0,class:"flex items-center justify-center w-8 h-8 me-2 rounded-full bg-accent",onClick:n,style:ge(Y.value?{backgroundColor:c.value.dot}:{})},t[32]||(t[32]=[e("i",{class:"fa-solid fa-magnifying-glass text-white"},null,-1)]),4)):E("",!0),((zt=b(fe))==null?void 0:zt.status)==="active"&&b(fe).cards.length?(u(),v("button",{key:1,class:"flex lg:hidden cursor-pointer text-white items-center justify-center rounded-full ms-2 w-7 h-7 text-sm font-medium mt-0.5",onClick:y,style:ge(Y.value?{backgroundColor:c.value.dot}:{})},t[33]||(t[33]=[e("i",{class:"fa-regular fa-eye text-sm"},null,-1)]),4)):E("",!0)]),e("div",Ir,[((Pt=b(fe))==null?void 0:Pt.status)==="active"?(u(),v("div",Er,[U(We,{size:"sm",onClick:Gt,variant:(b(A),"primary"),class:"border-border-input border",style:ge(Y.value?{backgroundColor:c.value.dot}:{})},{default:ce(()=>[G(T(b(Jt)?"Ending...":"End"),1)]),_:1},8,["variant","style"]),e("button",{class:"cursor-pointer text-white flex items-center justify-end gap-1 px-2 py-1 rounded-md text-sm font-medium",onClick:y,style:ge(Y.value?{backgroundColor:c.value.dot}:{})},t[34]||(t[34]=[e("i",{class:"fa-regular fa-eye text-sm"},null,-1),G(" Preview ")]),4)])):(u(),v("div",Ar,[((Vl=b(fe))==null?void 0:Vl.status)!=="completed"?(u(),ve(We,{key:0,size:"sm",variant:(b(A),"primary"),class:"border-border-input border",onClick:ft,disabled:!Le.value||Le.value.tickets.length===0||((Ll=b(fe))==null?void 0:Ll.status)==="completed",style:ge({backgroundColor:c.value.dot})},{default:ce(()=>[G(" Start "+T(c.value.label),1)]),_:1},8,["variant","disabled","style"])):E("",!0)]))]),Le.value&&Le.value.tickets.length?(u(),v("div",Br,[e("span",Nr,T((Ml=b(fe))==null?void 0:Ml.status),1),((Il=b(fe))==null?void 0:Il.status)==="active"?(u(),v("div",zr,[e("button",{onClick:Gt,class:"w-7 h-7 flex items-center justify-center rounded-full bg-accent",title:b(Jt)?"Ending...":"End Sprint",style:ge(Y.value?{backgroundColor:c.value.dot}:{})},t[35]||(t[35]=[e("i",{class:"fa-solid fa-flag-checkered text-white"},null,-1)]),12,Pr)])):(u(),v("button",{key:1,onClick:ft,disabled:!Le.value||Le.value.tickets.length===0||((El=b(fe))==null?void 0:El.status)==="completed",class:"w-7 h-7 flex items-center justify-center rounded-full text-white bg-accent disabled:opacity-50 disabled:cursor-not-allowed lg:hidden",title:"Start Sprint",style:ge(Y.value?{backgroundColor:c.value.dot}:{})},t[36]||(t[36]=[e("i",{class:"fa-solid fa-play text-sm"},null,-1)]),12,Or))])):E("",!0),((Al=b(fe))==null?void 0:Al.status)==="active"?(u(),v("div",{key:1,class:"relative inline-flex",onMouseenter:t[12]||(t[12]=w=>Z.value=!0),onMouseleave:t[13]||(t[13]=w=>Z.value=!1),onClick:le},[t[37]||(t[37]=e("span",{class:"flex lg:hidden bg-emerald-500 text-white w-7 h-7 rounded-full justify-center items-center cursor-pointer"},[e("i",{class:"fa-solid fa-check"})],-1)),Qe(e("div",qr," Sprint is active ",512),[[sl,Z.value]])],32)):E("",!0)]),U(es,{name:"fade"},{default:ce(()=>[l.value?(u(),v("div",Ur,[e("div",{class:"absolute inset-0 bg-black/10 backdrop-blur-sm",onClick:i}),e("div",jr,[e("div",{class:"flex justify-end"},[e("button",{onClick:i,class:"px-2 py-1 rounded bg-bg-input border border-border-input text-accent"},t[38]||(t[38]=[e("i",{class:"fa-solid fa-xmark"},null,-1)]))]),e("div",Hr,[e("p",Rr," Search for "+T(k.value)+" by name, status, or priority. Start typing to filter results. ",1),e("div",Fr,[U(Fs,{placeholder:`Search in ${k.value}`,onOnChange:pl,onKeyup:qt(gt,["enter"]),class:"flex-1"},null,8,["placeholder"])]),mt.value.length&&Re.value?(u(),v("div",Wr,[e("ul",null,[(u(!0),v(be,null,Ne(mt.value,w=>{var _e,Ee,kl,Wl,Ql,Kl;return u(),v("li",{key:w._id,class:"px-4 py-2 cursor-pointer hover:bg-bg-hover text-text-primary border-b border-border-input"},[e("div",Qr,[e("div",null,[e("span",Kr,T((Ee=(_e=w.card)==null?void 0:_e.variables)==null?void 0:Ee["card-title"]),1),e("span",Zr," ("+T((Wl=(kl=w.card)==null?void 0:kl.variables)==null?void 0:Wl["card-code"])+") ",1)]),e("div",Jr,[e("span",{class:X(["px-3 py-1 rounded text-md",vl(w.priority)])},T(w.priority),3),e("span",Gr,T((Kl=(Ql=w.card)==null?void 0:Ql.variables)==null?void 0:Kl["card-status"]),1)])])])}),128))])])):Re.value&&!mt.value.length?(u(),v("div",Xr," No "+T(k.value)+' found matching "'+T(Re.value)+'" ',1)):E("",!0)])])])):E("",!0)]),_:1})]),b(ct)||b(cl)?(u(),v("div",Yr,t[39]||(t[39]=[e("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-accent border-t-transparent animate-spin"},null,-1)]))):(u(),v("div",ei,[Le.value&&["planning","active"].includes((Nl=(Bl=b(fe))==null?void 0:Bl.status)==null?void 0:Nl.toLowerCase())?(u(),ve(Na,{key:0,searchQuery:F.value,sprintId:Y.value,searchedData:vt.value?[vt.value]:[],label:k.value,checkedSprintAll:d.value,sprint:Le.value,onOpenTicket:Wt,onEditSprint:Qt,onToggleStart:b(Pe),onMoveSelectedToBacklog:b(ee),onDeleteSelectedSprint:rt,onRefresh:$t},null,8,["searchQuery","sprintId","searchedData","label","checkedSprintAll","sprint","onToggleStart","onMoveSelectedToBacklog"])):E("",!0),((Pl=(zl=b(fe))==null?void 0:zl.status)==null?void 0:Pl.toString().trim().toLowerCase())==="completed"?(u(),v("div",ti,[t[42]||(t[42]=e("div",{class:"w-16 h-16 flex justify-center items-center text-white rounded-full text-3xl"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 117.72 117.72","aria-hidden":"true"},[e("path",{fill:"#42ba96",d:`M58.86,0c9.13,0,17.77,2.08,25.49,5.79c-3.16,2.5-6.09,4.9-8.82,7.21c-5.2-1.89-10.81-2.92-16.66-2.92\r
                  c-13.47,0-25.67,5.46-34.49,14.29c-8.83,8.83-14.29,21.02-14.29,34.49c0,13.47,5.46,25.66,14.29,34.49\r
                  c8.83,8.83,21.02,14.29,34.49,14.29s25.67-5.46,34.49-14.29c8.83-8.83,14.29-21.02,14.29-34.49\r
                  c0-3.2-0.31-6.34-0.9-9.37c2.53-3.3,5.12-6.59,7.77-9.85c2.08,6.02,3.21,12.49,3.21,19.22\r
                  c0,16.25-6.59,30.97-17.24,41.62c-10.65,10.65-25.37,17.24-41.62,17.24c-16.25,0-30.97-6.59-41.62-17.24\r
                  C6.59,89.83,0,75.11,0,58.86c0-16.25,6.59-30.97,17.24-41.62S42.61,0,58.86,0z\r
                  M31.44,49.19L45.8,49l1.07,0.28c2.9,1.67,5.63,3.58,8.18,5.74c1.84,1.56,3.6,3.26,5.27,5.1\r
                  c5.15-8.29,10.64-15.9,16.44-22.9c6.35-7.67,13.09-14.63,20.17-20.98l1.4-0.54H114l-3.16,3.51\r
                  C101.13,30,92.32,41.15,84.36,52.65C76.4,64.16,69.28,76.04,62.95,88.27l-1.97,3.8l-1.81-3.87\r
                  c-3.34-7.17-7.34-13.75-12.11-19.63c-4.77-5.88-10.32-11.1-16.79-15.54L31.44,49.19z`})])],-1)),e("h6",li,T(m.value)+" Completed ",1),e("p",si,[G(" This "+T(k.value)+" has been successfully completed. To continue planning work, create a new "+T(k.value)+" by clicking the ",1),t[40]||(t[40]=e("strong",null,"plus (+)",-1)),t[41]||(t[41]=G(" button and start organizing upcoming tasks. "))])])):E("",!0),((Ol=b(fe))==null?void 0:Ol.length)<1||((ql=b(me))==null?void 0:ql.sprints.length)<1?(u(),v("div",ai,[t[45]||(t[45]=e("div",{class:"w-16 h-16 flex items-center justify-center rounded-full bg-muted/10 text-accent"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-20 h-20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("h6",ni," No "+T(k.value)+"s available ",1),e("p",oi,[G(" You donâ€™t have any "+T(k.value)+"s yet. Create a new "+T(k.value)+" to start planning and organizing your work. Click the ",1),t[43]||(t[43]=e("strong",null,"plus (+)",-1)),t[44]||(t[44]=G(" button to get started. "))])])):E("",!0)]))])],512)]))])])])])),U(Ws,{onClick:t[14]||(t[14]=we(()=>{},["stop"])),modelValue:oe.value,"onUpdate:modelValue":t[15]||(t[15]=w=>oe.value=w),title:`Delete ${k.value}`,itemLabel:k.value,itemName:(Ul=Q.value)==null?void 0:Ul.title,requireMatchText:(jl=Q.value)==null?void 0:jl.title,confirmText:`Delete ${k.value}`,cancelText:"Cancel",size:"md",loading:b(_),onConfirm:dt,onCancel:t[16]||(t[16]=()=>{Q.value=null,oe.value=!1})},null,8,["modelValue","title","itemLabel","itemName","requireMatchText","confirmText","loading"]),U(an,{modelValue:D.value,"onUpdate:modelValue":t[17]||(t[17]=w=>D.value=w),title:`Delete ${Ve.value}`,itemLabel:k.value,itemName:(Hl=Q.value)==null?void 0:Hl.title,requireMatchText:(Rl=Q.value)==null?void 0:Rl.title,confirmText:"Delete Ticket",cancelText:"Cancel",size:"md",loading:b(Ke),onConfirm:kt,onCancel:De},null,8,["modelValue","title","itemLabel","itemName","requireMatchText","loading"]),U(ja,{modelValue:Xe.value,"onUpdate:modelValue":t[18]||(t[18]=w=>Xe.value=w),onSave:Vt,sprint:Q.value,lable:k.value,creatingSprint:Q.value?b(Kt):b(Fe),sprints:he.value},null,8,["modelValue","sprint","lable","creatingSprint","sprints"]),U(yn,{sprint:Q.value,modelValue:je.value,"onUpdate:modelValue":t[19]||(t[19]=w=>je.value=w),onSave:St,creatingSprint:b(ie)||b(Ge),sprintType:k.value},null,8,["sprint","modelValue","creatingSprint","sprintType"]),U(Es,{modelValue:P.value,"onUpdate:modelValue":t[20]||(t[20]=w=>P.value=w),cardId:(Fl=xt.value)==null?void 0:Fl.id,onClose:f},null,8,["modelValue","cardId"]),U(to,{modelValue:I.value,"onUpdate:modelValue":t[21]||(t[21]=w=>I.value=w)},null,8,["modelValue"])])}}}),wi=nl(ri,[["__scopeId","data-v-1621e9dc"]]);export{wi as default};
