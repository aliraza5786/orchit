const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-JxXfj-CP.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-BzPkrfKc.js","assets/index-tfagm7Um.js","assets/index-CPfkP-OU.css","assets/ConfirmDeleteModal-uP3U52dZ.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-DslWMS3t.js","assets/SidePanel-rvdeuvU6.js","assets/SidePanel-U7OOMI6M.css","assets/KanbanBoard-iqbeYbEe.js","assets/vuedraggable.umd-CgaWO4DV.js","assets/_commonjsHelpers-_d1bhYXs.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-D3eDHqZA.js","assets/KanbanBoard-Dffh696C.css"])))=>i.map(i=>d[i]);
import{R as nt,S as Lt,p as f,T as Te,c as D,r as m,n as R,K as st,U as mt,d as rt,V as ul,W as Bl,j as v,f as l,h as De,z as H,F as ce,y as be,o as d,t as N,Q as cl,J as Kt,O as il,e as re,w as ee,X as pl,i as O,_ as fl,I as Ht,g as oe,B as je,k as L,Y as Vt,D as Ze,P as vl,N as ml,M as Il,Z as Fl,$ as Nl,a0 as Ol,a1 as Ul,a2 as ql,E as Wt,a3 as jl,a4 as Rl,a5 as Hl,u as Wl,a6 as Kl,a7 as Ql,a8 as Gl,a9 as Jl,aa as Zl,ab as Xl,ac as Yl,ad as Pe,ae as Rt,q as ea,af as ta,l as rl,ag as qt,A as zt,ah as ge,ai as la,aj as $l,ak as aa,al as sa,v as na,am as ra,an as Dl,ao as oa}from"./index-tfagm7Um.js";import{u as gl}from"./useTheme-BDhYfZZZ.js";import{_ as ia}from"./BaseTextAreaField.vue_vue_type_script_setup_true_lang-ynPZsj6Q.js";import{_ as da}from"./SearchBar.vue_vue_type_script_setup_true_lang-BZCsUm2-.js";import{o as Pt,_ as ua}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-DslWMS3t.js";import{D as ol}from"./Dropdown-DMY9xz_f.js";import{_ as ca,C as pa,a as fa,b as Tl,c as va,k as ma}from"./GanttChartView.vue_vue_type_script_setup_true_lang-x3LBYijI.js";import{K as ga}from"./KanbanSkeleton-D2q6bmT8.js";import{K as ba}from"./KanbanTicket-DDQJ09Pu.js";import{F as Vl}from"./fuse-Ch1WBRTM.js";import{l as xa}from"./lodash-CQYOKM_D.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-D3eDHqZA.js";import"./_commonjsHelpers-_d1bhYXs.js";const ya="data:image/svg+xml,%3csvg%20width='60'%20height='46'%20viewBox='0%200%2060%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M59.7443%2034.8967L50.5682%2025.7206C50.4457%2025.5984%2050.2897%2025.5152%2050.1199%2025.4816C49.9501%2025.4479%2049.7742%2025.4653%2049.6143%2025.5315C49.4544%2025.5976%2049.3176%2025.7097%2049.2213%2025.8535C49.125%2025.9973%2049.0734%2026.1664%2049.073%2026.3394V30.517H25.9775V40.5114H49.0755V44.689C49.0759%2044.8621%2049.1275%2045.0312%2049.2238%2045.175C49.3201%2045.3187%2049.4569%2045.4308%2049.6168%2045.497C49.7767%2045.5632%2049.9527%2045.5805%2050.1224%2045.5468C50.2922%2045.5132%2050.4482%2045.43%2050.5708%2045.3078L59.7468%2036.1318C59.9095%2035.9672%2060.0005%2035.7451%2060.0001%2035.5137C59.9996%2035.2823%2059.9076%2035.0605%2059.7443%2034.8967Z'%20fill='%23C6DBA9'/%3e%3cpath%20d='M32.3149%2030.5293C30.664%2031.5967%2028.7394%2032.1633%2026.7734%2032.1609V40.5237H34.7295C39.2829%2038.5638%2042.9649%2035.0102%2045.0851%2030.5293H32.3149Z'%20fill='url(%23paint0_linear_250_16424)'/%3e%3cpath%20d='M46.2209%2020.2832C46.2317%2015.0884%2044.2448%2010.0884%2040.6714%206.3179C37.0981%202.54738%2032.2119%200.295026%2027.024%200.0269855C21.8362%20-0.241055%2016.7439%201.49574%2012.801%204.87791C8.85809%208.26009%206.36647%2013.0287%205.84178%2018.1969L2.46233%2017.8913C2.31055%2017.8782%202.15829%2017.9103%202.02467%2017.9835C1.89106%2018.0566%201.78205%2018.1677%201.71134%2018.3026C1.64063%2018.4376%201.61138%2018.5904%201.62726%2018.7419C1.64313%2018.8934%201.70343%2019.0368%201.80058%2019.1542L9.51927%2028.406C9.79205%2028.7344%2010.277%2028.7773%2010.378%2028.5045L19.6298%2020.7833C20.3876%2020.3413%2020.1173%2019.4825%2019.4328%2019.4194L15.8008%2019.091C16.0297%2017.1283%2016.8213%2015.2735%2018.0802%2013.7503C19.3391%2012.2271%2021.0115%2011.1004%2022.8961%2010.5059C24.7806%209.9114%2026.7969%209.8745%2028.7019%2010.3996C30.6069%2010.9248%2032.3195%2011.9896%2033.6332%2013.4657C34.947%2014.9419%2035.8059%2016.7664%2036.1065%2018.7195C36.4071%2020.6726%2036.1365%2022.6709%2035.3274%2024.4738C34.5183%2026.2766%2033.2051%2027.8071%2031.5462%2028.8807C29.8872%2029.9544%2027.9531%2030.5254%2025.977%2030.5251H25.9283V40.5094C31.2249%2040.4031%2036.7093%2038.2263%2040.4202%2034.4455C44.1311%2030.6648%2046.2134%2025.5808%2046.2209%2020.2832Z'%20fill='%23D7A39E'/%3e%3cpath%20d='M25.9773%2030.5293H0V40.5237H25.9773V30.5293Z'%20fill='url(%23paint1_linear_250_16424)'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_250_16424'%20x1='6.53714'%20y1='35.5252'%20x2='47.0198'%20y2='35.5252'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%236C798F'/%3e%3cstop%20offset='1'%20stop-color='%236C798F'%20stop-opacity='0.1'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_250_16424'%20x1='0'%20y1='36'%20x2='26'%20y2='36'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23E8D4D3'%20stop-opacity='0'/%3e%3cstop%20offset='1'%20stop-color='%23E2A39F'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",_a=(k,g,B={})=>Lt({queryKey:D(()=>["sprint-list",f(k),f(g)]),queryFn:({signal:A})=>Te({url:`sprints/${f(k)}`,method:"GET",signal:A,params:{sprintType:f(g)}}),...B}),ha=(k,g={})=>Lt({queryKey:["sprint-cards",k],queryFn:({signal:B})=>Te({url:`sprints/${f(k)}/backlog`,method:"GET",signal:B}),...g}),ka=(k,g,B={})=>Lt({queryKey:["sprint-kanban",k,g],queryFn:({signal:A})=>Te({url:"workspace/cards/sprintgrouped",method:"GET",signal:A,params:{sprint_id:f(k),variable_id:"68b6c96e0a95eef7d14e6981",sheet_id:f(g)}}),...B}),wa=(k,g={})=>nt({key:["sprint-complete"]},{mutationFn:B=>Te({url:`sprints/${f(k)}/complete`,method:"POST",data:B.payload}),...g}),Sa=(k,g={})=>Lt({queryKey:["sprint-detail",k],queryFn:({signal:B})=>Te({url:`sprints/detail/${f(k)}?include_cards=true`,method:"GET",signal:B}),...g}),dl=(k,g,B=null,A={})=>Lt({queryKey:["backlog-list",k,f(g),f(B)],queryFn:({signal:P})=>Te({url:`sprints/workspace/${f(k)}/cards`,method:"GET",signal:P,params:{include_sprint_cards:!1,sprintType:f(g),module_id:f(B)}}),...A}),Ca=(k={})=>nt({key:["add-sprint"]},{mutationFn:g=>Te({url:"/sprints",method:"POST",data:g.payload}),...k}),zl=(k={})=>nt({key:["move-card-to-sprint"]},{mutationFn:g=>Te({url:`/sprints/${g.id}/cards`,method:"POST",data:g.payload}),...k}),Ll=(k={})=>nt({key:["add-sprint"]},{mutationFn:g=>Te({url:`/sprints/${g.id}`,method:"PUT",data:g.payload}),...k}),$a=(k={})=>nt({key:["start-sprint"]},{mutationFn:g=>Te({url:`/sprints/${g.id}/start`,method:"POST",data:g.payload}),...k}),Da=(k={})=>nt({key:["delete-sprint"]},{mutationFn:g=>Te({url:`/sprints/${g}`,method:"DELETE"}),...k}),Ta=(k={})=>nt({key:["remove-card-from-sprint"]},{mutationFn:g=>Te({url:`sprints/${f(g.sprintId)}/cards/remove `,method:"POST",data:{card_ids:[g.cardId]}}),...k}),Pl="jira-like:";function El(k="id"){return`${k}_${Math.random().toString(36).slice(2,9)}`}function Ml(k,g){try{localStorage.setItem(Pl+k,JSON.stringify(g))}catch{}}function Al(k,g){try{const B=localStorage.getItem(Pl+k);return B?JSON.parse(B):g}catch{return g}}function Va(k){switch(k){case"Highest":return"rounded-md bg-red-50 px-2 py-0.5 text-xs text-red-700";case"High":return"rounded-md bg-orange-50 px-2 py-0.5 text-xs text-orange-700";case"Medium":return"rounded-md bg-amber-50 px-2 py-0.5 text-xs text-amber-700";case"Low":return"rounded-md bg-gray-100 px-2 py-0.5 text-xs text-gray-600"}}function La(){const k=m(Al("backlog",[])),g=m(Al("sprints",[]));if(g.value.length===0)g.value.push({id:El("sprint"),name:"Sprint 1",goal:"",start:"",end:"",started:!1,tickets:[]});else if(g.value.length>1){for(let u=1;u<g.value.length;u++)k.value.push(...g.value[u].tickets);g.value=[g.value[0]]}const B=m(g.value[0].id);R([k,g],()=>{Ml("backlog",k.value),Ml("sprints",g.value)},{deep:!0});const A=m([]),P=st({}),$=D(()=>k.value.length>0&&A.value.length===k.value.length),c=u=>{var o;const r=g.value.find(n=>n.id===u);return!!r&&r.tickets.length>0&&(((o=P[u])==null?void 0:o.length)||0)===r.tickets.length};function V(u,r,o){const n=r.target.checked;if(u==="backlog")A.value=n?k.value.map(p=>p.id):[];else if(o){const p=g.value.find(y=>y.id===o);P[o]=n&&p?p.tickets.map(y=>y.id):[]}}function W(u,r,o,n){const p=o.target.checked,y=u==="backlog"?A.value:P[n]||(P[n]=[]);if(p&&!y.includes(r)&&y.push(r),!p){const Z=y.indexOf(r);Z>=0&&y.splice(Z,1)}}function K(){return g.value.find(u=>u.id===B.value)||g.value[0]}function q(){const r=[...k.value,...g.value.flatMap(n=>n.tickets)].map(n=>Number(String(n.key).replace(/[^0-9]/g,""))).filter(n=>!Number.isNaN(n));return`PRJ-${r.length?Math.max(...r)+1:1}`}const{mutate:j}=zl({onSuccess:()=>{mt.success("Cards moved to sprint successfully")},onError:u=>{mt.error("Failed to move cards: "+(u.message||"Unknown error"))}});function G(){var n,p;const u=K();if(!u||!A.value.length)return;const r=[],o=[];for(const y of k.value)(A.value.includes(y.id)?o:r).push(y);k.value=r,u.tickets.push(...o),A.value=[],o.length>0&&j({id:u.id,payload:{card_ids:o.map(y=>y.id),priority:((p=(n=o[0])==null?void 0:n.priority)==null?void 0:p.toLowerCase())||"medium",story_points:o.reduce((y,Z)=>y+(Z.storyPoints||0),0)}})}function E(u){const r=g.value.find(y=>y.id===u);if(!r)return;const o=P[u]||[],n=[],p=[];for(const y of r.tickets)(o.includes(y.id)?p:n).push(y);r.tickets=n,k.value.push(...p),P[u]=[]}function I(u,r){if(u==="backlog")k.value=k.value.filter(o=>!A.value.includes(o.id)),A.value=[];else if(r){const o=P[r]||[],n=g.value.find(p=>p.id===r);if(!n)return;n.tickets=n.tickets.filter(p=>!o.includes(p.id)),P[r]=[]}}function Q(u,r){const o={id:El("T"),key:q(),createdAt:new Date().toISOString(),...r};if(u==="backlog")k.value.push(o);else{const n=K();n==null||n.tickets.push(o)}}function Y(u){const r=K();r&&(r.name=u.name??r.name,r.goal=u.goal??r.goal,r.start=u.start??r.start,r.end=u.end??r.end)}function te(){const u=K();u&&(u.started=!u.started)}function M(u){return u.tickets.reduce((r,o)=>r+(o.storyPoints||0),0)}return{backlog:k,sprints:g,activeSprintId:B,selectedBacklogIds:A,selectedSprintIds:P,allBacklogChecked:$,allSprintChecked:c,toggleAll:V,toggleOne:W,getActiveSprint:K,createTicket:Q,saveSprintMeta:Y,toggleStartSprint:te,sprintPoints:M,moveSelectedToSprint:G,moveSelectedToBacklog:E,deleteSelected:I,priorityClass:Va}}const Ea={class:"h-full min-h-0"},Ma={key:0,class:"empty-state flex flex-col justify-center items-center h-full"},Aa=["disabled"],Ba={key:1,class:"overflow-y-auto h-[calc(100%-50px)] tickets-scroll"},Ia={class:"flex flex-col flex-1 gap-[4px] min-w-0 me-1"},Fa=["onDragstart","onClick"],Na=["checked","onChange"],Oa={class:"flex items-center text-[14px] font-sans font-medium capitalize text-text-secondary flex-1 min-w-0"},Ua={class:"truncate"},qa={class:"flex-shrink-0"},za={key:0,class:"flex justify-center text-gray-500 items-center text-[11px] aspect-square w-[24px] h-[24px] bg-bg-body rounded-full border-border-input border-2"},Pa={key:1,class:"w-6 h-6 rounded-full"},ja=["src"],Ra={key:2,class:"text-[11px] aspect-square w-24px flex justify-center items-center h-[24px] bg-accent/30 text-accent border-accent border rounded-full"},Ha=rt({__name:"BacklogTable",props:{searchQuery:{type:String,default:""},sprintType:{type:String,default:""},checkedAll:{type:Boolean,default:!1},moduleId:[String,Number,null]},emits:["ticket-dragged-to-sprint","open-ticket","ticket-moved-to-backlog","open-create-ticket"],setup(k,{emit:g}){const{theme:B}=gl(),{canCreateCard:A}=ul(),P=g,$=k,{workspaceId:c}=Bl(),V=m($.moduleId??null),{data:W,isPending:K}=dl(c,$.sprintType,V),q=m([]),j=m(!1),G=m([]),E=m([]);R(W,o=>{o!=null&&o.cards&&(q.value=o.cards.map(n=>{var T,pe,xe,Ve;const p=((T=n.card)==null?void 0:T.variables)??{},y=((pe=n.card)==null?void 0:pe._id)??n.card_id,Z=String(p["card-status"]??"").trim(),x=String(p.priority??"").trim();return{id:y,key:p["card-code"]||(y==null?void 0:y.slice(-6))||"PRJ-?",summary:p["card-title"]||"(untitled)",type:"Story",status:Z,assignee:((xe=n.card)==null?void 0:xe.assigned_to)??"Unassigned",storyPoints:Number(n.story_points??0)||0,priority:Q(x),createdAt:((Ve=n.card)==null?void 0:Ve.created_at)??new Date().toISOString(),description:p["card-description"]||""}}))},{immediate:!0}),R(q,o=>{const n=new Set(o.map(p=>p.id));E.value=E.value.filter(p=>n.has(p))});const I=D(()=>{if(console.log($.searchQuery,"this is query"),!$.searchQuery)return q.value;const o=$.searchQuery.toLowerCase();return q.value.filter(n=>{var y;const p=typeof n.assignee=="string"?n.assignee:((y=n.assignee)==null?void 0:y.u_full_name)||"";return n.key.toLowerCase().includes(o)||n.summary.toLowerCase().includes(o)||p.toLowerCase().includes(o)})});function Q(o){const n=String(o??"").toLowerCase();return["highest","blocker","critical"].includes(n)?"Highest":["high","major"].includes(n)?"High":["medium","normal"].includes(n)?"Medium":"Low"}function Y(o,n,p){var T;const y=E.value.includes(n.id)?[...E.value]:[n.id],Z=y.map(pe=>q.value.find(xe=>xe.id===pe)).filter(Boolean);G.value=y;const x=JSON.stringify({id:n.id,ids:y,from:p,tickets:Z});(T=o.dataTransfer)==null||T.setData("text/plain",x),o.dataTransfer&&(o.dataTransfer.effectAllowed="move")}function te(o){var n;j.value=!1,((n=o.dataTransfer)==null?void 0:n.dropEffect)!=="none"&&G.value.length&&(q.value=q.value.filter(p=>!G.value.includes(p.id)),E.value=E.value.filter(p=>!G.value.includes(p))),G.value=[]}function M(o){var n;o.preventDefault(),j.value=!1;try{const p=(n=o.dataTransfer)==null?void 0:n.getData("text/plain");if(!p)return;const y=JSON.parse(p);if(y.from!=="sprint")return;const x=(y.tickets&&y.tickets.length?y.tickets:y.ticket?[y.ticket]:[]).filter(Boolean).filter(pe=>!q.value.some(xe=>xe.id===pe.id));x.length&&q.value.push(...x);const T=y.ids&&y.ids.length?y.ids:y.id?[y.id]:[];T.length&&P("ticket-moved-to-backlog",T,y.sprintId),console.log(y.sprintId,"sprintId ....")}catch(p){console.error("Drop error:",p)}}function u(o,n){n?E.value.includes(o)||E.value.push(o):E.value=E.value.filter(p=>p!==o)}function r(o,n){const p=n.target.checked;u(o,p)}return R(()=>$.checkedAll,o=>{o?(E.value=q.value.map(n=>n.id),console.log(E.value)):E.value=[]}),(o,n)=>(d(),v("section",Ea,[l("div",{class:H(["rounded-lg flex flex-col h-full",j.value?"ring-2 ring-blue-400":""]),onDragover:n[3]||(n[3]=De(()=>{},["prevent"])),onDragenter:n[4]||(n[4]=p=>j.value=!0),onDragleave:n[5]||(n[5]=p=>j.value=!1),onDrop:n[6]||(n[6]=p=>M(p))},[!f(K)&&I.value.length===0?(d(),v("div",Ma,[n[7]||(n[7]=l("img",{src:ya,class:"mb-4",alt:"backlog-plan"},null,-1)),n[8]||(n[8]=l("h6",{class:"text-sm text-text-primary font-semibold mb-1"}," Get started in the backlog ",-1)),n[9]||(n[9]=l("p",{class:"text-sm text-text-primary/90 mb-4"}," Plan and start a sprint to see issues here. ",-1)),l("button",{disabled:!f(A),onClick:n[0]||(n[0]=p=>o.$emit("open-create-ticket")),class:H(["relative inline-flex items-center justify-center font-medium py-1.5 px-3 text-sm rounded-md focus:outline-none transition h-[34px] bg-accent text-white hover:bg-accent-hover border-border-input border",f(A)?"cursor-pointer":"cursor-not-allowed"])}," Create Ticket ",10,Aa)])):(d(),v("div",Ba,[l("div",Ia,[(d(!0),v(ce,null,be(I.value,p=>{var y,Z;return d(),v("div",{key:p.id,draggable:"true",class:H(["flex items-center  gap-3 p-[8px] cursor-pointer transition-colors rounded-[8px]",E.value.includes(p.id)?"border-2 border-[#5a2d7f]":"border border-border-input",f(B)==="dark"?"bg-bg-body hover:bg-bg-surface":"bg-bg-charcoal hover:bg-bg-body"]),onDragstart:x=>Y(x,p,"backlog"),onDragend:n[2]||(n[2]=x=>te(x)),onClick:x=>o.$emit("open-ticket",p)},[l("input",{type:"checkbox",class:"custom-checkbox bg-bg-body border border-border-input flex-shrink-0",checked:E.value.includes(p.id),onClick:n[1]||(n[1]=De(()=>{},["stop"])),onChange:x=>r(p.id,x)},null,40,Na),l("div",Oa,[l("span",Ua,N(p.summary),1)]),l("div",qa,[(p==null?void 0:p.assignee)==="Unassigned"?(d(),v("span",za,"UA")):(y=p==null?void 0:p.assignee)!=null&&y.u_profile_image?(d(),v("div",Pa,[l("img",{src:p.assignee.u_profile_image,alt:""},null,8,ja)])):(d(),v("span",Ra,N(f(cl)((Z=p==null?void 0:p.assignee)==null?void 0:Z.u_full_name)),1))])],42,Fa)}),128))])]))],34)]))}}),Wa=Kt(Ha,[["__scopeId","data-v-9c72be33"]]),Ka="data:image/svg+xml,%3csvg%20width='60'%20height='60'%20viewBox='0%200%2060%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M9.375%2030C11.6402%2030%2013.4766%2028.1637%2013.4766%2025.8984C13.4766%2023.6332%2011.6402%2021.7969%209.375%2021.7969C7.10977%2021.7969%205.27344%2023.6332%205.27344%2025.8984C5.27344%2028.1637%207.10977%2030%209.375%2030Z'%20fill='%23AE2A19'/%3e%3cpath%20d='M26.25%2024.375C28.5152%2024.375%2030.3516%2022.5387%2030.3516%2020.2734C30.3516%2018.0082%2028.5152%2016.1719%2026.25%2016.1719C23.9848%2016.1719%2022.1484%2018.0082%2022.1484%2020.2734C22.1484%2022.5387%2023.9848%2024.375%2026.25%2024.375Z'%20fill='%23BF63F3'/%3e%3cpath%20d='M15.3931%2035.8594H11.0159V33.0938C9.93587%2033.3387%208.81469%2033.3387%207.73465%2033.0938V35.8594H1.87528C1.55115%2035.8601%201.2345%2035.9568%200.965283%2036.1373C0.696064%2036.3178%200.486343%2036.574%200.362583%2036.8736C0.238824%2037.1731%200.206573%2037.5027%200.269899%2037.8205C0.333226%2038.1384%200.489292%2038.4304%200.718404%2038.6597L7.05872%2045L0.718404%2051.3403C0.489292%2051.5696%200.333226%2051.8616%200.269899%2052.1795C0.206573%2052.4973%200.238824%2052.8269%200.362583%2053.1264C0.486343%2053.426%200.696064%2053.6822%200.965283%2053.8627C1.2345%2054.0432%201.55115%2054.1399%201.87528%2054.1406H15.3931L21.7503%2045L15.3931%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M34.4562%2035.8594H27.8937V27.4688C26.8137%2027.7138%2025.6925%2027.7138%2024.6125%2027.4688V35.8594H19.3896L25.7487%2045L19.3896%2054.1406H34.4562L40.8143%2045L34.4562%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M43.8281%2019.6875H55.3125C55.7475%2019.6873%2056.1647%2019.5143%2056.4723%2019.2067C56.7799%2018.8991%2056.9529%2018.4819%2056.9531%2018.0469V9.375C56.9529%208.93996%2056.7799%208.5228%2056.4723%208.21518C56.1647%207.90755%2055.7475%207.73462%2055.3125%207.73438H43.8281V7.5C43.8281%207.06488%2043.6553%206.64758%2043.3476%206.3399C43.0399%206.03223%2042.6226%205.85938%2042.1875%205.85938C41.7524%205.85938%2041.3351%206.03223%2041.0274%206.3399C40.7197%206.64758%2040.5469%207.06488%2040.5469%207.5V32.5781H43.8281V19.6875Z'%20fill='%23FCA700'/%3e%3cpath%20d='M59.2843%2043.8403L51.7843%2036.3403C51.6322%2036.1878%2051.4514%2036.0668%2051.2524%2035.9842C51.0534%2035.9017%2050.8401%2035.8593%2050.6246%2035.8594H38.4521L44.8121%2045L38.4531%2054.1406H50.6246C50.8401%2054.1407%2051.0534%2054.0983%2051.2524%2054.0158C51.4514%2053.9332%2051.6322%2053.8122%2051.7843%2053.6597L59.2843%2046.1597C59.4368%2046.0075%2059.5577%2045.8267%2059.6402%2045.6277C59.7228%2045.4287%2059.7652%2045.2154%2059.7652%2045C59.7652%2044.7846%2059.7228%2044.5713%2059.6402%2044.3723C59.5577%2044.1733%2059.4368%2043.9925%2059.2843%2043.8403Z'%20fill='%2382B536'/%3e%3c/g%3e%3c/svg%3e",Qa={key:0,class:"overflow-y-auto h-[calc(100%-50px)] tickets-scroll pt-4"},Ga={class:"flex flex-col flex-1 gap-[4px] min-w-0 me-1"},Ja=["onDragstart","onClick"],Za=["checked","onChange"],Xa={class:"flex items-center text-[14px] font-sans font-medium capitalize text-text-secondary flex-1 min-w-0"},Ya={class:"truncate"},es={class:"flex-shrink-0"},ts={key:0,class:"flex justify-center text-gray-500 items-center text-[11px] aspect-square w-[24px] h-[24px] bg-bg-body rounded-full border-border-input border-2"},ls={key:1,class:"w-6 h-6 rounded-full"},as=["src"],ss={key:2,class:"text-[11px] aspect-square w-[24px] flex justify-center items-center h-[24px] bg-accent/30 text-accent border-accent border rounded-full"},ns={key:1,class:"empty-state flex flex-col justify-center items-center border-dashed border-3 p-2 border-border h-[calc(100%-50px)] min-h-0"},rs=rt({__name:"SprintCard",props:{sprint:{},sprintId:{},searchQuery:{},checkedSprintAll:{type:Boolean},searchedData:{}},emits:["edit-sprint","toggle-start","open-ticket","move-selected-to-backlog","delete-selected-sprint","refresh"],setup(k,{emit:g}){const{theme:B}=gl(),A=k,P=g,$=m([]),c=m([]);R(()=>A.sprint&&A.sprint.tickets,M=>{$.value=[...M||[]];const u=new Set($.value.map(r=>r.id));c.value=c.value.filter(r=>u.has(r))},{immediate:!0,deep:!0});const V=D(()=>{var u,r;if((u=A.searchedData)!=null&&u.length)return $.value.filter(o=>A.searchedData.some(n=>n.card_id===o.id));const M=((r=A.searchQuery)==null?void 0:r.toLowerCase())||"";return M?$.value.filter(o=>{var p;const n=((p=o.assignee)==null?void 0:p.u_full_name)??"";return o.key.toLowerCase().includes(M)||o.summary.toLowerCase().includes(M)||n.toLowerCase().includes(M)}):$.value}),W=m(!1),K=m([]),{mutate:q}=zl({onSuccess:()=>{mt.success("Card moved to sprint successfully"),P("refresh")},onError:M=>{mt.error("Failed to move card: "+(M.message||"Unknown error"))}});function j(M,u,r,o){var Z;const n=c.value.includes(u.id)?[...c.value]:[u.id],p=n.map(x=>$.value.find(T=>T.id===x)).filter(Boolean);K.value=n;const y=JSON.stringify({id:u.id,ids:n,from:r,sprintId:o,ticket:u,tickets:p});(Z=M.dataTransfer)==null||Z.setData("text/plain",y),M.dataTransfer&&(M.dataTransfer.effectAllowed="move")}function G(M){var u;W.value=!1,((u=M.dataTransfer)==null?void 0:u.dropEffect)!=="none"&&K.value.length&&($.value=$.value.filter(r=>!K.value.includes(r.id)),c.value=c.value.filter(r=>!K.value.includes(r))),K.value=[]}function E(){W.value=!0}function I(){W.value=!1}function Q(M){var u;M.preventDefault(),W.value=!1;try{const r=(u=M.dataTransfer)==null?void 0:u.getData("text/plain");if(!r)return;const o=JSON.parse(r);if(o.from!=="backlog")return;const p=(o.tickets&&o.tickets.length?o.tickets:o.ticket?[o.ticket]:[]).filter(Boolean).filter(y=>!$.value.some(Z=>Z.id===y.id));if(!p.length)return;$.value.push(...p),p.forEach(y=>{q({id:A.sprintId,payload:{card_ids:[y.id],priority:(y.priority||"Medium").toLowerCase(),story_points:y.storyPoints||0}})})}catch(r){console.error("Drop error:",r)}}function Y(M,u){u?c.value.includes(M)||c.value.push(M):c.value=c.value.filter(r=>r!==M)}function te(M,u){const r=u.target.checked;Y(M,r)}return R(()=>A.checkedSprintAll,M=>{M?(c.value=V.value.map(u=>u.id),console.log(V.value)):c.value=[]}),(M,u)=>(d(),v("div",{class:H(["h-full min-h-0 px-2",f(B)==="dark"?"bg-bg-surface":"bg-bg-surface/30"])},[l("div",{class:H([W.value?"ring-2 ring-blue-400 rounded-lg":"","h-full box-border mt-3"]),onDragover:u[2]||(u[2]=De(()=>{},["prevent"])),onDragenter:E,onDragleave:I,onDrop:Q},[V.value.length>0&&M.sprint?(d(),v("div",Qa,[l("div",Ga,[(d(!0),v(ce,null,be(V.value,r=>{var o,n;return d(),v("div",{key:r.id,draggable:"true",class:H(["flex items-center  gap-3 p-[8px] cursor-pointer transition-colors rounded-[8px]",c.value.includes(r.id)?"border-2 border-[#5a2d7f]":"border border-border-input",f(B)==="dark"?"bg-bg-body hover:bg-bg-surface":"bg-bg-charcoal hover:bg-bg-body"]),onDragstart:p=>j(p,r,"sprint",M.sprint.id),onDragend:u[1]||(u[1]=p=>G(p)),onClick:p=>M.$emit("open-ticket",r)},[l("input",{type:"checkbox",class:H(["custom-checkbox border border-border-input flex-shrink-0",f(B)==="dark"?"bg-bg-charcoal":"bg-bg-body "]),checked:c.value.includes(r.id),onClick:u[0]||(u[0]=De(()=>{},["stop"])),onChange:p=>te(r.id,p)},null,42,Za),l("div",Xa,[l("span",Ya,N(r.summary),1)]),l("div",es,[(r==null?void 0:r.assignee)=="Unassigned"?(d(),v("span",ts,"UA")):(o=r.assignee)!=null&&o.u_profile_image?(d(),v("div",ls,[l("img",{src:r.assignee.u_profile_image,alt:""},null,8,as)])):(d(),v("span",ss,N(f(cl)(((n=r.assignee)==null?void 0:n.u_full_name)??"")),1))])],42,Ja)}),128))])])):(d(),v("div",ns,u[3]||(u[3]=[il('<img src="'+Ka+'" class="mb-4" alt="backlog-plan" data-v-0b8217c7><h6 class="text-sm text-text-primary font-semibold mb-1 text-center" data-v-0b8217c7> Plan your sprint </h6><p class="text-sm text-text-primary/90 mb-3 max-w-120 text-center" data-v-0b8217c7> Drag work items from the <span class="font-bold" data-v-0b8217c7>Backlog</span> section or create new ones to plan the work for this sprint. Select <span class="font-bold" data-v-0b8217c7>Start sprint</span> when you&#39;re ready. </p>',3)])))],34)],2))}}),os=Kt(rs,[["__scopeId","data-v-0b8217c7"]]),is={class:"px-6 gap-4 bg-bg-input pt-5 pb-8"},ds={class:"mt-3"},us={class:"flex justify-end gap-2 p-6 sticky bottom-0 bg-bg-input border-t border-border"},cs=rt({__name:"SprintModal",props:{modelValue:{type:Boolean,default:!1},sprint:{},creatingSprint:{type:Boolean}},emits:["update:modelValue","save","close"],setup(k,{emit:g}){const B=g,A=k,P=D({get:()=>A.modelValue,set:E=>B("update:modelValue",E)}),$=st({name:"",sprintType:"",description:""}),c=st({name:!1,sprintType:!1,description:!1}),V=D(()=>c.name&&!String($.name||"").trim()?"Name is required":""),W=D(()=>!!String($.name||"").trim()&&!V.value);function K(){P.value=!1,B("close")}function q(){c.name=!0,W.value&&B("save",{name:String($.name||"").trim(),value:String($.sprintType||"").trim(),description:String($.description||"").trim()})}function j(){c.name=!1,c.sprintType=!1,c.description=!1}R(()=>A.sprint,E=>{if(!E){$.name="";return}$.name=E.name??(E==null?void 0:E.title)??"",$.sprintType=E.sprintType??(E==null?void 0:E.sprintType)??"",$.description=E.description??"",j()},{immediate:!0});const G=[{title:"Milestone",_id:"milestone",dot:"#2e9bda"},{title:"Sprint",_id:"sprint",dot:"#7d68c8"},{title:"Huddle",_id:"huddle",dot:"#eea832"}];return(E,I)=>(d(),re(pl,{modelValue:P.value,"onUpdate:modelValue":I[5]||(I[5]=Q=>P.value=Q),modalClass:"!py-0",size:"md"},{default:ee(()=>[I[8]||(I[8]=l("div",{class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-input pb-4"},[l("h2",{class:"text-xl font-semibold"},"Add New Sprint")],-1)),l("div",is,[O(fl,{class:"rounded-1",modelValue:$.name,"onUpdate:modelValue":I[0]||(I[0]=Q=>$.name=Q),label:"Name",placeholder:"Sprint 1",error:!!V.value,message:V.value,onBlur:I[1]||(I[1]=Q=>c.name=!0)},null,8,["modelValue","error","message"]),O(Ht,{class:"rounded-1 mt-3",modelValue:$.sprintType,"onUpdate:modelValue":I[2]||(I[2]=Q=>$.sprintType=Q),label:"Sprint Type",options:G,error:!!V.value,message:V.value,onBlur:I[3]||(I[3]=Q=>c.name=!0)},null,8,["modelValue","error","message"]),l("div",ds,[O(ia,{modelValue:$.description,"onUpdate:modelValue":I[4]||(I[4]=Q=>$.description=Q),label:"Description",placeholder:"Sprint description...",type:"textarea",rows:4},null,8,["modelValue"])]),I[6]||(I[6]=l("div",null,null,-1))]),l("div",us,[O(je,{variant:"secondary",onClick:K},{default:ee(()=>I[7]||(I[7]=[oe("Cancel")])),_:1,__:[7]}),O(je,{variant:"primary",disabled:!W.value,onClick:q},{default:ee(()=>[oe(N(E.creatingSprint?"Saving...":"Save"),1)]),_:1},8,["disabled"])])]),_:1,__:[8]},8,["modelValue"]))}}),ps="/assets/filter-JX25xO5j.svg",fs={class:"px-6 grid grid-cols-2 gap-4 bg-bg-input pt-5"},vs={class:"flex flex-col col-span-2"},ms={class:"flex flex-col col-span-2"},gs={class:"flex gap-1 flex-col col-span-2 sm:col-span-1"},bs={key:0,class:"text-xs text-red-500"},xs={class:"flex gap-1 flex-col col-span-2 sm:col-span-1"},ys={key:0,class:"text-xs text-red-500"},_s={class:"flex flex-col col-span-2"},hs={class:"flex flex-col col-span-2"},ks={class:"bg-bg-body wfull px-4 py-3 rounded-lg text-xs text-text-secondary"},ws={class:"flex justify-end gap-2 p-6 sticky bottom-0 bg-bg-input"},Ss=rt({__name:"StartSprintModal",props:{modelValue:{type:Boolean,default:!1},sprint:{},creatingSprint:{type:Boolean}},emits:["update:modelValue","save","close"],setup(k,{emit:g}){const B=g,A=k,P=[{_id:1,title:"1 Week"},{_id:2,title:"2 Weeks"},{_id:3,title:"3 Weeks"},{_id:4,title:"4 Weeks"},{_id:5,title:"Custom"}],$=D({get:()=>A.modelValue,set:r=>B("update:modelValue",r)}),c=st({goal:"",start:new Date().toISOString().slice(0,10),end:"",sprint_name:"",duration:null}),V=st({start:!1,end:!1}),W=D(()=>!c.start&&V.start?"Start date is required":""),K=D(()=>{if(!c.end&&V.end)return"End date is required";if(c.start&&c.end){const r=Y(c.start),o=Y(c.end);if(Number.isFinite(r)&&Number.isFinite(o)&&o<r)return"End date cannot be before start date"}return""}),q=D(()=>!W.value&&!K.value);function j(r){c.start=r||"",V.start=!0}function G(r){c.end=r||"",V.end=!0}function E(){$.value=!1,c.duration=null,B("close")}function I(){V.start=!0,V.end=!0,q.value&&(B("save",{title:c.sprint_name||"new sprint",duration:String(u.value)||null,start:c.start||"",end:c.end||"",goal:c.goal??""}),$.value=!1,B("close"))}function Q(){V.start=!1,V.end=!1}function Y(r){return r?new Date(`${r}T00:00:00`).getTime():NaN}const te=D(()=>c.duration===5);R(()=>c.duration,r=>{if(!r)return;const o=typeof r=="object"?r._id:r;if(o!==5&&c.start){const n=M(c.start,o*7);c.end=n}}),R(()=>c.start,r=>{r&&(c.duration&&c.duration!==5&&(c.end=M(c.start,c.duration*7)),c.end&&Y(c.end)<Y(c.start)&&(c.end=c.start))});function M(r,o){const n=new Date(r);return n.setDate(n.getDate()+o),n.toISOString().slice(0,10)}const u=D(()=>!c.start||!c.end?0:c.duration!==5?c.duration*7:(Y(c.end)-Y(c.start))/864e5);return R(()=>A.sprint,r=>{if(!r){c.start=new Date().toISOString().slice(0,10),c.end="",c.sprint_name="",c.goal="",Q();return}c.goal=r.goal??"",c.start=r.start??new Date().toISOString().slice(0,10),c.end=r.end??"",c.sprint_name=r.title??"",Q()},{immediate:!0}),(r,o)=>(d(),re(pl,{modelValue:$.value,"onUpdate:modelValue":o[3]||(o[3]=n=>$.value=n),modalClass:"!py-0",size:"md"},{default:ee(()=>[l("div",{class:"sticky top-0 z-10 flex justify-between items-center py-6 px-6 border-b border-border bg-bg-input"},[o[5]||(o[5]=l("h2",{class:"text-xl font-semibold"},"Start Sprint",-1)),l("span",{onClick:E,class:"text-sm text-text-secondary cursor-pointer"},o[4]||(o[4]=[l("i",{class:"fa-solid fa-xmark text-text-primary text-[19px]"},null,-1)]))]),l("div",fs,[l("div",vs,[O(fl,{modelValue:c.sprint_name,"onUpdate:modelValue":o[0]||(o[0]=n=>c.sprint_name=n),label:"Sprint Name",placeholder:"Enter sprint name",size:"md",class:"rounded-1"},null,8,["modelValue"])]),l("div",ms,[O(Ht,{modelValue:c.duration,"onUpdate:modelValue":o[1]||(o[1]=n=>c.duration=n),options:P,label:"Duration",placeholder:"Select duration"},null,8,["modelValue"])]),l("div",gs,[o[7]||(o[7]=l("label",{class:"text-sm font-medium"},"Start date",-1)),l("div",{class:H(["border relative flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",W.value?"border-red-500":""])},[O(Vt,{placeholder:"Set start date",class:"w-full z-1","model-value":c.start,"emit-as":"ymd","onUpdate:modelValue":j},null,8,["model-value"]),o[6]||(o[6]=l("i",{class:"fa-regular fa-calendar absolute right-2 top-3 z-0"},null,-1))],2),W.value?(d(),v("p",bs,N(W.value),1)):L("",!0)]),l("div",xs,[o[8]||(o[8]=l("label",{class:"text-sm font-medium"},"End date",-1)),l("div",{class:H(["border relative flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",K.value?"border-red-500":""])},[O(Vt,{placeholder:"Set end date",class:"w-full","model-value":c.end,"emit-as":"ymd",disabled:!te.value,"onUpdate:modelValue":G,"min-date":c.start},null,8,["model-value","disabled","min-date"]),l("i",{class:H(["fa-regular fa-calendar absolute right-2 top-3 z-0",{"text-text-secondary/30 pointer-events-none":!te.value,"text-text-primary":te.value}])},null,2)],2),K.value?(d(),v("p",ys,N(K.value),1)):L("",!0)]),l("div",_s,[o[9]||(o[9]=l("label",{class:"text-sm font-medium pb-1"},"Goal (optional)",-1)),Ze(l("textarea",{"onUpdate:modelValue":o[2]||(o[2]=n=>c.goal=n),class:"w-full text-sm rounded-md border border-border px-3 py-2 bg-bg-input",rows:"2",placeholder:"Ship onboarding flow"},null,512),[[vl,c.goal]])]),l("div",hs,[l("p",ks," Duration: "+N(c.start?u.value+" days":""),1)])]),l("div",ws,[O(je,{variant:"secondary",onClick:E},{default:ee(()=>o[10]||(o[10]=[oe("Cancel")])),_:1,__:[10]}),O(je,{variant:"primary",disabled:!q.value,onClick:I},{default:ee(()=>[oe(N(r.creatingSprint?"Starting...":"Start"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue"]))}}),Cs={class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-body pb-4 mb-4"},$s={class:"text-sm text-text-secondary mt-1"},Ds={class:"flex items-center gap-2 mt-4 w-full"},Ts={class:"flex items-center gap-2 flex-1"},Vs={class:"px-6 min-h-[400px]"},Ls={key:0},Es={key:0,class:"flex items-center justify-center py-12"},Ms={key:1,class:"text-center py-12 text-text-secondary"},As={key:2,class:"grid grid-cols-2 gap-3"},Bs=["onClick"],Is={class:"flex items-center gap-3"},Fs={class:"w-10 h-10 rounded-lg bg-bg-input flex items-center justify-center group-hover:bg-primary/10 transition-colors"},Ns={class:"font-medium"},Os={key:1},Us={key:0,class:"flex items-center justify-center py-12"},qs={key:1,class:"text-center py-12 text-text-secondary"},zs={key:2,class:"grid grid-cols-2 gap-3"},Ps=["onClick"],js={class:"flex items-center gap-3"},Rs={class:"w-10 h-10 rounded-lg bg-bg-input flex items-center justify-center group-hover:bg-primary/10 transition-colors"},Hs={class:"font-medium"},Ws={key:2},Ks={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Qs={key:0,class:"flex flex-col"},Gs={class:"flex gap-1 flex-col"},Js={key:0,class:"text-xs text-red-500"},Zs={class:"flex gap-1 flex-col"},Xs={key:0,class:"text-xs text-red-500"},Ys={class:"flex flex-col gap-1"},en={class:"mt-2"},tn={class:"mt-4"},ln={key:0,class:"text-xs text-red-500 mt-1 px-1"},an={class:"flex justify-between gap-2 p-6 mt-8 sticky bottom-0 bg-bg-body border-t border-border"},sn={key:1},nn={class:"flex gap-2"},rn=rt({__name:"CreateBacklogTicketWithModuleSelection",props:{modelValue:{type:Boolean,default:!1},listId:{},selectedVariable:{}},emits:["update:modelValue","created"],setup(k,{emit:g}){const B=g,A=k,P=ml(),{workspaceId:$}=Il(),c=m(1),V=m(null),W=m(null),{data:K,isLoading:q}=Fl($.value),j=D(()=>{var S;return((S=K.value)==null?void 0:S.modules)||[]}),{data:G,isFetching:E,refetch:I}=Nl({workspace_module_id:V,workspace_id:$},{enabled:D(()=>!!V.value)});R(()=>V.value,()=>{I()});const Q=D(()=>G.value||[]),{data:Y}=Ol($.value),{data:te}=Ul($.value,V,{enabled:D(()=>!!V.value)}),{mutate:M,isPending:u}=ql({onSuccess:()=>{ae(),P.invalidateQueries({queryKey:["sheet-list"]}),P.invalidateQueries({queryKey:["backlog-list"]}),r.value=!1}}),r=D({get:()=>A.modelValue,set:S=>B("update:modelValue",S)}),o=D(()=>{switch(c.value){case 1:return"Select a module to create the ticket in";case 2:return"Select a sheet within the module";case 3:return"Provide the ticket details below and click Add Ticket";default:return""}}),n=D(()=>((te==null?void 0:te.value)??[]).filter(S=>{var b;return((b=S==null?void 0:S.type)==null?void 0:b.title)==="Select"})),p=S=>S.map(b=>({_id:b,title:b})),y=D(()=>((Y==null?void 0:Y.value)??[]).map(S=>{var b;return{_id:S._id,title:((b=S==null?void 0:S.variables)==null?void 0:b["lane-title"])??String(S._id)}})),Z=S=>S.slug,x=st({title:"",description:"",startDate:null,endDate:null,lane_id:null,assignee:null,variables:{}});R(n,S=>{for(const b of S){const C=Z(b);C in x.variables||(x.variables[C]=null)}},{immediate:!0});const T=st({title:!1,description:!1,startDate:!1,endDate:!1,lane:!1}),pe=D(()=>!!x.title.trim()&&!!x.lane_id&&!!x.startDate&&!!x.endDate&&!ke.value&&!Ie.value&&!Re.value&&!le.value&&!He.value);function xe(S){x.startDate=S,T.startDate=!0}function Ve(S){x.endDate=S,T.endDate=!0}function ot(S){x.lane_id=S,T.lane=!0}function Xe(S){x.assignee=S}function it(S){V.value=S._id,c.value=2}function Ye(S){W.value=S._id,c.value=3}function Ae(){c.value>1&&c.value--}function et(){r.value=!1,ae()}function ae(){c.value=1,V.value=null,W.value=null,x.title="",x.description="",x.startDate=null,x.endDate=null,x.lane_id=null,x.assignee=null,x.variables={},T.title=!1,T.description=!1,T.startDate=!1,T.endDate=!1,T.lane=!1}const Be=D(()=>{var S;return(S=te==null?void 0:te.value)==null?void 0:S.find(b=>(b==null?void 0:b._id)==A.selectedVariable)}),ke=D(()=>T.title&&!x.title.trim()?"Title is required":""),Ie=D(()=>T.startDate?x.startDate?"":"Start date is required":""),Re=D(()=>T.endDate?x.endDate?x.startDate&&x.endDate&&x.endDate<x.startDate?"End date cannot be before start date":"":"End date is required":""),le=D(()=>T.lane?x.lane_id?"":"Lane is required":""),He=D(()=>T.description&&!x.description.trim()?"Description is required":""),ue=new Date().toISOString().split("T")[0];function ie(){var b,C;if(T.title=!0,T.lane=!0,T.description=!0,T.startDate=!0,T.endDate=!0,!pe.value||u.value)return;const S={sheet_list_id:A.listId,workspace_id:$.value,sheet_id:W.value,workspace_lane_id:x.lane_id,variables:{...x.variables,[`${(b=Be.value)==null?void 0:b.slug}`]:A.listId,"card-title":x.title.trim(),"card-description":x.description.trim(),"start-date":x.startDate,"end-date":x.endDate},seat_id:((C=x.assignee)==null?void 0:C._id)??null,createdAt:new Date().toISOString()};M(S)}return R(()=>x.title,S=>{S!=null&&S.trim()&&T.title&&(T.title=!1)}),R(()=>x.lane_id,S=>{S&&T.lane&&(T.lane=!1)}),R(()=>x.startDate,S=>{S&&T.startDate&&(T.startDate=!1)}),R(()=>x.endDate,S=>{S&&T.endDate&&(T.endDate=!1)}),R(()=>x.description,S=>{S!=null&&S.trim()&&T.description&&(T.description=!1)}),(S,b)=>(d(),re(pl,{modelValue:r.value,"onUpdate:modelValue":b[5]||(b[5]=C=>r.value=C),modalClass:"!py-0",size:"lg"},{default:ee(()=>[l("div",Cs,[b[6]||(b[6]=l("h2",{class:"text-xl font-semibold"},"Create Backlog Ticket",-1)),l("p",$s,N(o.value),1),l("div",Ds,[(d(),v(ce,null,be(3,C=>l("div",{key:C,class:"flex items-center flex-1"},[l("div",Ts,[l("div",{class:H(["h-1 flex-1 rounded-full transition-colors",c.value>=C?"bg-primary":"bg-border"])},null,2)])])),64))])]),l("div",Vs,[c.value===1?(d(),v("div",Ls,[b[8]||(b[8]=l("h3",{class:"text-lg font-medium mb-4"},"Select Module",-1)),f(q)?(d(),v("div",Es,b[7]||(b[7]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):!j.value||j.value.length===0?(d(),v("div",Ms," No modules available ")):(d(),v("div",As,[(d(!0),v(ce,null,be(j.value,C=>{var fe,ve,J,de,Fe;return d(),v("button",{key:C._id,onClick:tt=>it(C),class:H(["p-4 border rounded-lg hover:border-primary transition-all text-left group",V.value===C._id?"border-primary bg-primary/5":"border-border"])},[l("div",Is,[l("div",Fs,[l("i",{class:H([`${(ve=(fe=C==null?void 0:C.variables)==null?void 0:fe["module-icon"])==null?void 0:ve.prefix} ${(de=(J=C==null?void 0:C.variables)==null?void 0:J["module-icon"])==null?void 0:de.iconName}`,"text-lg"])},null,2)]),l("div",null,[l("p",Ns,N(((Fe=C.variables)==null?void 0:Fe["module-title"])||"Untitled"),1)])])],10,Bs)}),128))]))])):c.value===2?(d(),v("div",Os,[b[10]||(b[10]=l("h3",{class:"text-lg font-medium mb-4"},"Select Sheet",-1)),f(E)?(d(),v("div",Us,b[9]||(b[9]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):!Q.value||Q.value.length===0?(d(),v("div",qs," No sheets available for this module ")):(d(),v("div",zs,[(d(!0),v(ce,null,be(Q.value,C=>{var fe,ve;return d(),v("button",{key:C._id,onClick:J=>Ye(C),class:H(["p-4 border rounded-lg hover:border-primary transition-all text-left group",W.value===C._id?"border-primary bg-primary/5":"border-border"])},[l("div",js,[l("div",Rs,[l("i",{class:H(`${(fe=C==null?void 0:C.variables["sheet-icon"])==null?void 0:fe.prefix} ${(ve=C==null?void 0:C.variables["sheet-icon"])==null?void 0:ve.iconName} text-lg`)},null,2)]),l("div",null,[l("p",Hs,N((C==null?void 0:C.variables["sheet-title"])||"Untitled Sheet"),1)])])],10,Ps)}),128))]))])):c.value===3?(d(),v("div",Ws,[b[14]||(b[14]=l("h3",{class:"text-lg font-medium mb-4"},"Ticket Details",-1)),l("div",Ks,[O(fl,{modelValue:x.title,"onUpdate:modelValue":b[0]||(b[0]=C=>x.title=C),label:"Ticket Title",placeholder:"e.g., Implement real-time notifications",error:!!ke.value,message:ke.value,onBlur:b[1]||(b[1]=C=>T.title=!0)},null,8,["modelValue","error","message"]),y.value.length>0?(d(),v("div",Qs,[O(Ht,{size:"md",label:"Lane",options:y.value,placeholder:"Select lane",allowCustom:!1,"model-value":x.lane_id,"onUpdate:modelValue":ot,error:!!le.value,message:le.value},null,8,["options","model-value","error","message"])])):L("",!0),(d(!0),v(ce,null,be(n.value,C=>Ze((d(),re(Ht,{size:"md",key:Z(C),modelValue:x.variables[C.slug],"onUpdate:modelValue":fe=>x.variables[C.slug]=fe,options:p(C.data),label:C.title,placeholder:"Select value",allowCustom:!0},null,8,["modelValue","onUpdate:modelValue","options","label"])),[[Wt,(C==null?void 0:C._id)!=S.selectedVariable]])),128)),l("div",Gs,[b[11]||(b[11]=l("label",{class:"text-sm"},"Start date",-1)),l("div",{class:H(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",Ie.value?"border-red-500":""])},[O(Vt,{placeholder:"Set start date",class:"w-full","model-value":x.startDate,"emit-as":"ymd","onUpdate:modelValue":xe,"min-date":f(ue)},null,8,["model-value","min-date"])],2),Ie.value?(d(),v("p",Js,N(Ie.value),1)):L("",!0)]),l("div",Zs,[b[12]||(b[12]=l("label",{class:"text-sm"},"End date",-1)),l("div",{class:H(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",Re.value?"border-red-500":""])},[O(Vt,{placeholder:"Set end date",class:"w-full","model-value":x.endDate,"emit-as":"ymd","onUpdate:modelValue":Ve,"min-date":x.startDate||f(ue)},null,8,["model-value","min-date"])],2),Re.value?(d(),v("p",Xs,N(Re.value),1)):L("",!0)]),l("div",Ys,[b[13]||(b[13]=l("label",{class:"text-sm"},"Assignee",-1)),l("div",en,[O(jl,{name:!0,workspaceId:f($),onAssign:Xe,onUnassign:b[2]||(b[2]=C=>Xe(null)),assigneeId:x.assignee,seat:null,disabled:!1,skipPermissionCheck:!0,class:"w-full"},null,8,["workspaceId","assigneeId"])])])]),l("div",tn,[O(Rl,{label:"Description",placeholder:"What needs to be done, acceptance criteria, links…",modelValue:x.description,"onUpdate:modelValue":b[3]||(b[3]=C=>x.description=C),onBlur:b[4]||(b[4]=C=>T.description=!0)},null,8,["modelValue"]),He.value?(d(),v("p",ln,N(He.value),1)):L("",!0)])])):L("",!0)]),l("div",an,[c.value>1?(d(),re(je,{key:0,variant:"secondary",onClick:Ae},{default:ee(()=>b[15]||(b[15]=[oe("Back")])),_:1,__:[15]})):(d(),v("div",sn)),l("div",nn,[O(je,{variant:"secondary",onClick:et},{default:ee(()=>b[16]||(b[16]=[oe("Cancel")])),_:1,__:[16]}),c.value===3?(d(),re(je,{key:0,variant:"primary",disabled:!pe.value||f(u),onClick:ie},{default:ee(()=>[oe(N(f(u)?"Adding…":"Add Ticket"),1)]),_:1},8,["disabled"])):L("",!0)])])]),_:1},8,["modelValue"]))}}),on={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-[6px] shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full border border-border flex flex-col overflow-x-auto overflow-y-auto scrollbar-visible pb-4"},dn={class:"header px-4 py-3 flex items-center justify-between gap-1 w-[100%]"},un={class:"flex gap-4"},cn={class:"flex gap-3 items-center"},pn={class:"flex items-center gap-3 bg-bg-surface/50 h-[32px] px-2 rounded-md"},fn={class:"overflow-x-auto"},vn={key:0,class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex scrollbar-visible"},mn={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible"},gn={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},bn={class:"relative w-full h-full flex overflow-hidden"},xn={key:0,class:"format-sidebar h-full py-4 px-4 w-[320px] border-l bg-bg-card overflow-hidden flex flex-col"},yn={class:"flex items-center justify-between pb-3 mb-4 border-b"},_n={class:"format-content space-y-6"},hn={class:"format-group relative mb-3"},kn={class:"text-xs text-secondary"},wn={key:0,class:"absolute z-50 mt-2 p-3 bg-bg-card rounded-lg shadow-lg border w-[240px]"},Sn={class:"grid grid-cols-10 gap-1 mb-3"},Cn=["onClick"],$n={class:"flex items-center gap-2"},Dn=["value"],Tn=["value"],Vn={class:"format-group relative mb-3"},Ln={class:"text-xs text-secondary"},En={key:0,class:"absolute z-50 mt-2 p-3 bg-bg-card rounded-lg shadow-lg border w-[240px]"},Mn={class:"grid grid-cols-10 gap-1 mb-3"},An=["onClick"],Bn={class:"flex items-center gap-2"},In=["value"],Fn=["value"],Nn={class:"grid grid-cols-1 gap-3"},On=["value"],Un={class:"mt-6 pt-4"},qn=["disabled"],zn={key:0,class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},Pn={key:0,class:"fixed inset-0 bg-black/30 flex items-center justify-center"},jn={class:"bg-white p-6 rounded-xl w-80"},Rn={class:"flex justify-end gap-2 mt-4"},Hn=["disabled"],Wn={class:"flex items-center mt-3 gap-3"},Kn=rt({__name:"ActiveSprint",props:{sptint_id:{},searchQuery:{}},setup(k){const g=k,B=qt(()=>zt(()=>import("./CreateTaskModal-JxXfj-CP.js"),__vite__mapDeps([0,1,2,3]))),A=qt(()=>zt(()=>import("./ConfirmDeleteModal-uP3U52dZ.js"),__vite__mapDeps([4,5,2,3]))),P=qt(()=>zt(()=>import("./SidePanel-rvdeuvU6.js"),__vite__mapDeps([6,2,3,7]))),$=qt(()=>zt(()=>import("./KanbanBoard-iqbeYbEe.js"),__vite__mapDeps([8,9,10,2,3,11,5,12]))),c=m(!1),V=m(""),W=m(null),K=m(null),q=m(null),j=m("");function G(s){V.value="",c.value=!0,W.value=s}function E(){W.value&&W.value(V.value),c.value=!1}function I(){c.value=!1}const{mutate:Q}=ql({onSuccess:()=>{}});function Y(){const s=We.value.trim();s&&Be(s)}function te(){we.value=!we.value}const M=ea(),u=m("kanban"),{workspaceId:r,moduleId:o}=Il(),n=m(""),p=m(!1),y=m(!0),{canEditSheet:Z,canDeleteSheet:x,canCreateVariable:T,canCreateSheet:pe,canCreateCard:xe,canEditCard:Ve,canAssignCard:ot}=ul(),{data:Xe}=Fl(r.value),it=m(Xe.value.modules||[]),Ye=D(()=>(it.value||[]).map(s=>{var e,a;return{_id:s._id,title:((e=s.variables)==null?void 0:e["module-title"])??"Untitled module",description:((a=s.variables)==null?void 0:a["module-description"])??"",icon:s.icon??null,status:s.status??null}})),Ae=ml(),{mutate:et,isPending:ae}=Hl({onSuccess:()=>{Ae.invalidateQueries({queryKey:["sheet-list"]}),We.value="",Ke.value=!1,we.value=!1,Ke.value=!1}}),Be=s=>{et({workspace_id:r.value,module_id:o.value,variable_id:ue.value,value:s})};R(Ye,s=>{if(s.length&&!n.value){const e=s.find(a=>a.title==="Tasks")||s[0];n.value=e._id}},{immediate:!0});const{data:ke,refetch:Ie}=Nl({workspace_id:r.value,workspace_module_id:D(()=>n.value)});R(n,s=>{s&&Ie()});const Re=D(()=>{var s;return ke.value?(s=ke.value[0])==null?void 0:s._id:""}),le=m(Re),He=D(()=>{var s;return Ee.value?(s=Ee.value[0])==null?void 0:s._id:""}),ue=m(He),ie=Wl(),S=D(()=>g.sptint_id),{data:b,isPending:C}=ka(S,le),fe=m(!1),ve=m(),J=s=>{ve.value=s},de=Kl(),Fe=Ql();function tt(s){s.type=="column"?de.mutate({payload:{workspace_id:r.value,workspace_module_id:o.value,variable_id:ue.value,moved_value:s.meta.id,new_index:s.meta.newIndex}}):Fe.mutate({payload:{workspace_id:r.value,card_id:s.meta.moved._id,group_value:s.meta.fromColumnId,group_variable_id:ue.value,new_index:s.meta.newIndex,sheet_id:le.value}})}const Et=s=>{},{mutate:Le}=Gl({onSuccess:()=>{Ie(),bt.value=!1}}),gt=D(()=>!ke.value||!ke.value.length?[]:ke.value.map(s=>{var e,a;return{_id:s._id,title:((e=s.variables)==null?void 0:e["sheet-title"])||"Untitled Sheet",description:((a=s.variables)==null?void 0:a["sheet-description"])||"",icon:s.icon||null,status:s.generation_status||null}}));R(gt,s=>{s.length>0&&!le.value&&(le.value=s[0]._id)},{immediate:!0}),R(gt,s=>{s.length>0?j.value=s[0].title:j.value=""},{immediate:!0}),R(ke,s=>{var e;(s==null?void 0:s.length)>0&&(le.value=(e=s[0])==null?void 0:e._id)});const we=m(!1),We=m(""),lt=s=>{et({workspace_id:M.params.id,module_id:M.params.module_id,new_value:s.title,value:s.oldTitle,variable_id:ue.value})},Ke=m(!1),Ne=m(),Qt=()=>{et({value:Ne.value.title,workspace_id:r.value,module_id:o.value,newValue:Ne.value.title,variable_id:ue.value,is_trash:!0})},Gt=s=>{Ke.value=!0,Ne.value=s},Jt=s=>{fe.value=!0,Ne.value=s},me=D(()=>g.searchQuery),Mt=m("");R(me,xa.debounce(s=>{Mt.value=s},200));const Zt=D(()=>{const s=b.value.flatMap(e=>e.cards.map(a=>({...a,columnId:e.title})));return new Vl(s,{keys:["card-title","card-description"],threshold:.3})}),dt=D(()=>{var s;if(u.value==="kanban"){if(!me.value)return b.value;const e=Zt.value.search(me.value).map(a=>a.item);return b.value.map(a=>({...a,cards:e.filter(t=>t.columnId===a.title)}))}else{const e=(s=me.value)==null?void 0:s.trim();if(!e){let t=[];return(b.value??[]).forEach(i=>{t=[...t,...i==null?void 0:i.cards]}),t}return new Vl(Xt.value,{keys:["card-title","card-description"],threshold:.3}).search(e).map(t=>t.item)}}),Xt=D(()=>{let s=[];return(b.value??[]).forEach(e=>{s=[...s,...e==null?void 0:e.cards]}),s}),bt=m(!1);function Yt(s){ut.value=!0,xt.value=s}const xt=m();function yt(s){bt.value=!0,xt.value=s}const ut=m(!1),At=()=>{xt.value={},ut.value=!ut.value},{data:Ee,isPending:el}=Ul(r.value,n,le),{mutate:_t}=Jl(),tl=(s,e)=>{_t({payload:{sheet_id:le.value,workspace_id:r.value,variable_slug:s,is_visible:e}})},{data:ht}=Ol(r),kt=D(()=>((ht==null?void 0:ht.value)??[]).map(s=>{var e;return{_id:s._id,title:((e=s==null?void 0:s.variables)==null?void 0:e["lane-title"])??String(s._id)}})),ll=s=>s.map(e=>({_id:e.value??e,title:e.value??e})),Oe=Zl({onSuccess:()=>{Ae.invalidateQueries({queryKey:["get-sheets"]}),Ae.invalidateQueries({queryKey:["sheet-list"]}),Ae.invalidateQueries({queryKey:["roles"]})}}),ct=(s,e)=>{if(!b.value)return;const a=b.value.findIndex(t=>t.cards.some(i=>i._id===s));if(a!==-1){const t=b.value[a].cards.findIndex(i=>i._id===s);if(t!==-1){const i={...b.value[a].cards[t]};e(i),b.value[a].cards[t]=i,$l(b)}}};function al(s,e){ct(s,a=>{const t=kt.value.find(i=>i._id===e);t&&(a.lane=t)}),$l(b),Oe.mutate({card_id:s,workspace_lane_id:e})}const sl=(s,e)=>{ct(s,a=>{a.seat=e}),Oe.mutate({card_id:s,seat_id:e==null?void 0:e._id})},nl=D(()=>{var s;return[{key:"card-title",label:"Title",render:({row:e,value:a})=>ge("div",{class:"flex items-center gap-1 w-full"},[ge("a",{onClick:()=>ve.value=e,class:"text-[12px] underline text-blue-500 shrink-0 overflow-ellipsis cursor-pointer"},e["card-code"]),ge("div",{class:"flex-1 min-w-0"},[ge("input",{onFocusout:t=>{var i;Bt(e==null?void 0:e._id,"card-title",(i=t==null?void 0:t.target)==null?void 0:i.value)},class:"text-[12px] w-full overflow-ellipsis capitalize p-1 w-full p-1 focus:border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-transparent focus:bg-bg-body text-[12px] h-8",defaultValue:a,disabled:!Ve.value})])])},{key:"end-date",label:"Due Date",render:({row:e,value:a})=>{const t=m(a);return ge(Vt,{class:" capitalize flex items-center gap-2 text-[12px]",placeholder:"Set start date",tableInputClass:!0,modelValue:t.value,disabled:!Ve.value,"onUpdate:modelValue":i=>Ft(e==null?void 0:e._id,i),emptyText:"Date"})}},{key:"lane",label:"Lane",render:({row:e})=>{var a;return ge(Tl,{options:kt.value??[],placeholder:"Select lane",modelValue:((a=e.lane)==null?void 0:a._id)||null,disabled:!Ve.value,"onUpdate:modelValue":t=>al(e==null?void 0:e._id,t),displayField:"title",emptyText:"Lane"})}},{key:"created_by",label:"Owner",render:({value:e})=>ge("div",{class:"capitalize flex items-center gap-2  px-3"},[ge("div",{class:" rounded-full  "},[e!=null&&e.u_profile_image?ge("img",{class:"w-6 h-6 rounded-full",src:e==null?void 0:e.u_profile_image}):ge("div",{class:"w-5 h-5 rounded-full flex justify-center items-center text-[11px] ",style:`background:${e!=null&&e.u_full_name?la({name:e.u_full_name,email:e.u_email}):""}`},cl(e==null?void 0:e.u_full_name))]),ge("span",{class:"text-[12px]"},e?e==null?void 0:e.u_full_name:"")])},{key:"seat",label:"Assignee",render:({row:e,value:a})=>ge(va,{class:"capitalize flex items-center gap-2 ",onAssign:t=>sl(e==null?void 0:e._id,t),assigneeId:a,seat:a,name:!0,disabled:!ot.value,emptyText:"Assignee"})},...((s=Ee.value)==null?void 0:s.filter(e=>{var a;return((a=e==null?void 0:e.type)==null?void 0:a.title)==="Select"}).map(e=>({key:e==null?void 0:e.slug,label:e==null?void 0:e.slug,render:({row:a,value:t})=>{var U;let i=t;if(Array.isArray(a==null?void 0:a.variables)){const h=a.variables.find(F=>F.slug===e.slug);h&&(i=h.value)}else i=((U=a==null?void 0:a.variables)==null?void 0:U[e.slug])??(a==null?void 0:a[e.slug])??t;return ge("div",{class:"capitalize flex items-center gap-2"},[ge(Tl,{options:ll(e.data??[]),modelValue:i,disabled:!Ve.value,emptyText:e.slug,"onUpdate:modelValue":h=>{Bt(a==null?void 0:a._id,e.slug,h)},columnName:e.slug})])},visible:e==null?void 0:e.is_visible})))??[]]});function Bt(s,e,a){ct(s,t=>{if(e==="card-title"&&(t[e]=a),Array.isArray(t.variables)){const i=t.variables.find(U=>U.slug===e);i?i.value=a:t.variables.push({slug:e,value:a,type:"Select"})}else t.variables&&typeof t.variables=="object"?t.variables[e]=a:t[e]=a}),Oe.mutate({card_id:s,variables:{[e]:a.trim()}})}function It(s){if(s["card-title"]){const e={sheet_list_id:"To Do",workspace_id:r.value,sheet_id:le.value,variables:{"card-title":s["card-title"].trim()},createdAt:new Date().toISOString()};Q(e)}}const Ft=(s,e)=>{const a=b.value.findIndex(t=>t.cards.some(i=>i._id===s));if(a!==-1){const t=b.value[a].cards.findIndex(i=>i._id===s);t!==-1&&(b.value[a].cards[t]["end-date"]=e)}Oe.mutate({card_id:s,variables:{"start-date":e}})},ye=m(null),Se=m(!1),pt=["#FFFFFF","#F2F2F2","#D9D9D9","#BFBFBF","#A6A6A6","#808080","#404040","#000000","#FFE066","#FF9AA2","#8EE4AF","#00EAD3","#90DBF4","#4D96FF","#6C63FF","#C77DFF","#F7A1C4","#FFC300","#FF5733","#2ECC71","#00B894","#17A2B8","#0984E3","#3F51B5","#9C27B0","#E84393","#FF8C00","#E74C3C","#1E8449","#006D6F","#004C6D","#0057A8","#1A237E","#4A148C","#7D3C98"],Qe=m(!1);R(Se,s=>{s&&(Qe.value=!1)}),R(Qe,s=>{s&&(Se.value=!1)});const Ce=D(()=>{var s,e;return(e=(s=ye.value)==null?void 0:s.nodeObj)!=null&&e.style?ye.value.nodeObj.style:vt(he)});function _e(s,e,a){return s!==void 0?s:e!==void 0?e:a}function $e(s,e){var h;if(!((h=ye.value)!=null&&h.nodeObj))return;const a=ye.value.nodeObj;a.style||(a.style={});const t=e.target,i=t.type==="number"?Number(t.value):t.value;switch(s){case"bg_color":a.style.background=i;break;case"color":a.style.color=i;break;case"font_size":a.style.fontSize=`${i}px`;break;case"font_weight":a.style.fontWeight=i;break;case"font_style":a.style.fontStyle=i;break;case"font_family":a.style.fontFamily=i;break;case"border_color":a.style.borderColor=i;break;case"border_width":a.style.borderWidth=`${i}px`;break;case"border_radius":a.style.borderRadius=`${i}px`;break;case"padding":a.style.padding=`${i}px`;break}const U=document.getElementById(a.id);U&&Ut(a,U)}const he={bg_color:"#ffffff",color:"#000000",font_size:14,font_weight:"normal",font_style:"normal",font_family:"Inter",border_color:"#cccccc",border_width:0,border_radius:0,padding:0},Ue=m(!1);async function Nt(){var e;const s=(e=ye.value)==null?void 0:e.nodeObj;if(!(!s||Ue.value)){Ue.value=!0;try{const a=ta(s);a._originalStyle||(a._originalStyle={});const t=a.style||{},i=a._originalStyle,U={bg_color:_e(t.background,i.bg_color,he.bg_color),color:_e(t.color,i.color,he.color),font_size:_e(t.fontSize?parseInt(t.fontSize):void 0,i.font_size,he.font_size),font_weight:_e(t.fontWeight,i.font_weight,he.font_weight),font_style:_e(t.fontStyle,i.font_style,he.font_style),font_family:_e(t.fontFamily,i.font_family,he.font_family),border_color:_e(t.borderColor,i.border_color,he.border_color),border_width:_e(t.borderWidth?parseInt(t.borderWidth):void 0,i.border_width,he.border_width),border_radius:_e(t.borderRadius?parseInt(t.borderRadius):void 0,i.border_radius,he.border_radius),padding:_e(t.padding?parseInt(t.padding):void 0,i.padding,he.padding),hyperLink:V.value||a.hyperLink||""};a._originalStyle={...U};const h=a.unique_name==="sheet"?{sheet_id:a.id,workspace_id:r.value,workspace_module_id:o.value,style:U}:{card_id:a.id,seat_id:a.seat_id,style:U};a.unique_name==="sheet"?await Le(h):await Oe.mutateAsync(h)}finally{Ue.value=!1}}}const Ot=m([]);function at(s){const e={id:"root",topic:localStorage.getItem("currentName")??"",isRoot:!0,children:[],style:{},_originalStyle:{},unique_name:"root"};if(!Array.isArray(s))return e;const a={};return s.forEach(t=>{var F;const i=j.value,U=((F=t.style)==null?void 0:F.hyperLink)||"";a[i]||(a[i]={id:t._id,topic:i,variables:t==null?void 0:t.variables,children:[],style:t==null?void 0:t.style,_originalStyle:(t==null?void 0:t.style)||{},unique_name:"sheet",hyperLink:U||""},e.children.push(a[i]));const h={id:t==null?void 0:t._id,topic:t.title,children:[],style:vt(t==null?void 0:t.style),_originalStyle:t.style||{},unique_name:"List",hyperLink:U||""};(t.cards||[]).forEach((z,se)=>{var ne;const _=((ne=z.style)==null?void 0:ne.hyperLink)||"",X={id:z._id||`card-${se}`,seat_id:z.seat_id,topic:z["card-title"],style:vt(z.style),_originalStyle:z.style||{},children:[],unique_name:"card",hyperLink:_||""};h.children.push(X),Ot.value=X}),a[i].children.push(h)}),e}const{mutateAsync:ft}=Xl({onSuccess:()=>{Ae.invalidateQueries({queryKey:["sheets"]}),Ae.invalidateQueries({queryKey:["sheet-list"]}),close()}});Yl(()=>{u.value!=="mindmap"||!K.value||!b.value||aa(()=>{var i,U;const s=at(b.value);q.value&&((U=(i=q.value).destroy)==null||U.call(i),q.value=null);const e=new ma({el:K.value,theme:void 0,draggable:!0,contextMenu:!0,contextMenuOption:{Update:!0,extend:[{name:"Update Node",onclick:()=>{var F;y.value&&(y.value=!1);const h=(F=ye.value)==null?void 0:F.nodeObj;h&&J(h)}},{name:"Add Hyperlink",onclick:()=>{G(async()=>{await Nt()})}}]}});q.value=e,e.init({nodeData:s}),e.bus.addListener("selectNode",h=>{h&&(ye.value={nodeObj:h},y.value=!0)}),e.bus.addListener("renderNode",h=>{!(h!=null&&h.nodeObj)||!(h!=null&&h.element)||Ut(h.nodeObj,h.element)});const a=new Set;e.bus.addListener("operation",async h=>{var se,_,X;if(!h||h.name!=="insertSibling"&&h.name!=="addChild")return;const F=h.obj;if(!F||!F.id||a.has(F.id))return;a.add(F.id);let z;if(h.name==="addChild"?z=(se=e.currentNode)==null?void 0:se.nodeObj:z=(X=(_=e.currentNode)==null?void 0:_.nodeObj)==null?void 0:X.parent,!(!z||!("unique_name"in z))&&z.unique_name==="List")try{const ne=wt({topic:F.topic??"New Card",id:F.id},z);await Q(ne)}catch(ne){console.error("Error creating card or refetching sheets:",ne)}});const t=new Set;e.bus.addListener("operation",async h=>{var se,_;if(!h)return;const F=h.obj;if(!(F!=null&&F.id))return;const z=F.parent??((_=(se=e.currentNode)==null?void 0:se.nodeObj)==null?void 0:_.parent);if(!(!z||!("unique_name"in z))){if(h.name==="addChild"&&z.unique_name==="root"&&!t.has(F.id)){t.add(F.id);try{await ft({variables:{"sheet-title":F.topic??"New Sheet","sheet-description":"This is custom description"},is_ai_generated:!1,workspace_id:r.value,workspace_module_id:o.value})}catch(X){console.error("Error creating workspace sheet:",X)}return}if(z.unique_name==="List")try{const X=wt({topic:F.topic??"New Card",id:F.id},z);await Q(X)}catch(X){console.error("Error creating card or refetching sheets:",X)}}})})});function Ut(s,e){if(!s||!e||!s.style)return;const a=e.querySelector(".topic"),t=e.querySelector(".node")??e,i=s.style;i.background&&(t.style.background=i.background),i.color&&a&&(a.style.color=i.color),a&&(i.fontSize&&(a.style.fontSize=i.fontSize),i.fontFamily&&(a.style.fontFamily=i.fontFamily),i.fontWeight&&(a.style.fontWeight=i.fontWeight),i.fontStyle&&(a.style.fontStyle=i.fontStyle)),i.borderColor&&(t.style.borderColor=i.borderColor),i.borderWidth&&(t.style.borderWidth=i.borderWidth),i.borderRadius&&(t.style.borderRadius=i.borderRadius),i.padding&&(t.style.padding=i.padding)}function vt(s={}){return{background:s.bg_color,color:s.color,fontSize:s.font_size!=null?`${s.font_size}px`:void 0,fontWeight:s.font_weight,fontStyle:s.font_style,fontFamily:s.font_family,borderColor:s.border_color,borderWidth:s.border_width!=null?`${s.border_width}px`:void 0,borderRadius:s.border_radius!=null?`${s.border_radius}px`:void 0,padding:s.padding!=null?`${s.padding}px`:void 0,hyperLink:s.hyperLink||void 0}}function wt(s,e){const a=new Date,t=a.toISOString().split("T")[0],i=new Date(a.getTime()+3*24*60*60*1e3).toISOString().split("T")[0];return{sheet_list_id:(e==null?void 0:e.topic)||"In Progress",workspace_id:r.value,sheet_id:le.value,workspace_lane_id:(s==null?void 0:s.workspace_lane_id)||null,variables:{"card-status":(e==null?void 0:e.topic)||"In Progress","card-type":null,priority:null,process:null,"card-title":s.topic||"New Card","card-description":"","start-date":t,"end-date":i},createdAt:new Date().toISOString()}}return(s,e)=>{var U,h,F,z,se;const a=rl("Button"),t=rl("Searchbar"),i=rl("BaseTextField");return d(),v("div",on,[l("div",dn,[l("div",un,[O(a,{class:"lg:flex hidden cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white items-center justify-center gap-1 px-2 rounded-md text-xs font-medium",onClick:e[0]||(e[0]=_=>s.$emit("go-back"))},{default:ee(()=>e[31]||(e[31]=[l("i",{class:"fa-solid fa-chevron-left text-xs"},null,-1),oe(" Go Back")])),_:1,__:[31]}),O(a,{class:"flex sm:hidden cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white items-center justify-center px-2 rounded-md text-xs font-medium",onClick:e[1]||(e[1]=_=>s.$emit("go-back"))},{default:ee(()=>e[32]||(e[32]=[l("i",{class:"fa-solid fa-chevron-left text-xs"},null,-1)])),_:1,__:[32]}),O(ol,{modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=_=>n.value=_),options:Ye.value,variant:"secondary",customClasses:"fixed w-auto"},null,8,["modelValue","options"]),n.value?(d(),re(ol,{key:0,onEditOption:Yt,modelValue:le.value,"onUpdate:modelValue":e[4]||(e[4]=_=>le.value=_),canEdit:f(Z),canDelete:f(x),onDeleteOption:yt,options:gt.value,variant:"secondary",customClasses:"fixed w-auto"},{more:ee(()=>[f(pe)?(d(),v("div",{key:0,onClick:e[3]||(e[3]=_=>At()),class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[33]||(e[33]=[l("i",{class:"fa-solid fa-plus"},null,-1),oe(" Add new ")]))):L("",!0)]),_:1},8,["modelValue","canEdit","canDelete","options"])):L("",!0)]),l("div",cn,[n.value?(d(),re(ol,{key:0,actions:!1,modelValue:ue.value,"onUpdate:modelValue":e[6]||(e[6]=_=>ue.value=_),options:f(Ee),variant:"secondary",customClasses:"fixed w-auto"},{more:ee(()=>[f(T)?(d(),v("div",{key:0,onClick:e[5]||(e[5]=()=>{p.value=!0}),class:"sticky bottom-0 bg-bg-dropdown shadow-md shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[34]||(e[34]=[l("i",{class:"fa-solid fa-plus"},null,-1),oe(" Add new ")]))):L("",!0)]),_:1},8,["modelValue","options"])):L("",!0),O(t,{onOnChange:e[7]||(e[7]=_=>{me.value=_}),placeholder:"Search in Orchit AI space"}),l("div",pn,[l("button",{class:H(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",u.value==="kanban"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"List view",onClick:e[8]||(e[8]=_=>u.value="kanban")},e[35]||(e[35]=[l("i",{class:"fa-solid fa-chart-kanban"},null,-1)]),2),l("button",{onClick:e[9]||(e[9]=_=>u.value="table"),class:H(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",u.value==="table"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gallery view"},e[36]||(e[36]=[l("i",{class:"fa-solid fa-align-left"},null,-1)]),2),l("button",{onClick:e[10]||(e[10]=_=>u.value="mindmap"),class:H(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",u.value==="mindmap"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"MindMap view"},e[37]||(e[37]=[l("i",{class:"fa-solid fa-chart-diagram"},null,-1)]),2),l("button",{onClick:e[11]||(e[11]=_=>u.value="calendar"),class:H(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",u.value==="calendar"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Calendar view"},e[38]||(e[38]=[l("i",{class:"fa-regular fa-calendar"},null,-1)]),2),l("button",{onClick:e[12]||(e[12]=_=>u.value="gantt"),class:H(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",u.value==="gantt"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gantt Chart view"},e[39]||(e[39]=[l("i",{class:"fa-solid fa-chart-gantt"},null,-1)]),2)])])]),l("div",fn,[u.value=="kanban"?(d(),v("div",vn,[Ze(O(ga,null,null,512),[[Wt,f(C)]]),Ze(l("div",mn,[O(f($),{onOnPlus:Jt,"onDelete:column":e[13]||(e[13]=_=>Gt(_)),"onUpdate:column":e[14]||(e[14]=_=>lt(_)),onReorder:tt,onAddColumn:Be,"onSelect:ticket":J,board:dt.value,onOnBoardUpdate:Et,variable_id:ue.value,sheet_id:le.value},{"column-footer":ee(_=>{var X,ne,Me,Ge,Je;return[(ne=(X=f(ie))==null?void 0:X.transitions)!=null&&ne.all_allowed&&!((Je=(Ge=(Me=f(ie))==null?void 0:Me.transitions)==null?void 0:Ge.all_allowed)!=null&&Je.includes(_.column.title))&&f(ie).transitions.currentColumn!=_.column.title?(d(),v("div",gn," Disbale ( you can't drop here ) ")):L("",!0)]}),ticket:ee(({ticket:_})=>[O(ba,{selectedVar:ue.value,onSelect:()=>{J(_)},ticket:_},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"])],512),[[Wt,!f(C)]])])):L("",!0),u.value=="table"?(d(),re(ca,{key:1,onToggleVisibility:tl,onAddVar:e[15]||(e[15]=()=>{p.value=!0}),isPending:f(C)||f(el),columns:nl.value,rows:dt.value,canCreate:f(xe),canCreateVariable:f(T),onCreate:It},null,8,["isPending","columns","rows","canCreate","canCreateVariable"])):L("",!0),u.value==="mindmap"?(d(),v(ce,{key:2},[l("div",bn,[l("div",{ref_key:"mindMapRef",ref:K,class:"flex-1 h-full overflow-y-hidden rounded-md relative"},null,512),y.value?(d(),v("div",xn,[l("div",yn,[e[41]||(e[41]=l("h3",{class:"text-sm font-semibold text-secondary"},"Format Node",-1)),l("button",{onClick:e[16]||(e[16]=_=>y.value=!1),class:"text-gray-400 hover:text-gray-700"},e[40]||(e[40]=[l("i",{class:"fa-solid fa-times"},null,-1)]))]),l("div",_n,[l("div",null,[e[44]||(e[44]=l("h4",{class:"text-xs font-semibold text-secondary uppercase mb-3"}," Colors ",-1)),l("div",hn,[e[42]||(e[42]=l("label",{class:"block text-xs text-secondary mb-1"},"Background",-1)),l("div",{class:"flex items-center gap-2 cursor-pointer",onClick:e[17]||(e[17]=_=>Se.value=!Se.value)},[l("div",{class:"w-full h-7 rounded border",style:Pe({background:Ce.value.background})},null,4),l("span",kn,N(Ce.value.background),1)]),Se.value?(d(),v("div",wn,[l("div",Sn,[(d(),v(ce,null,be(pt,_=>l("button",{key:_,class:"w-5 h-5 rounded border",style:Pe({background:_}),onClick:X=>{$e("bg_color",{target:{value:_}}),Se.value=!1}},null,12,Cn)),64))]),l("div",$n,[l("input",{type:"color",value:Ce.value.background,class:"w-8 h-8 cursor-pointer",onInput:e[18]||(e[18]=_=>$e("bg_color",_))},null,40,Dn),l("input",{type:"text",class:"flex-1 text-xs border rounded px-2 py-1",value:Ce.value.background,readonly:""},null,8,Tn)])])):L("",!0)]),l("div",Vn,[e[43]||(e[43]=l("label",{class:"block text-xs text-secondary mb-1"},"Text",-1)),l("div",{class:"flex items-center gap-2 cursor-pointer",onClick:e[19]||(e[19]=_=>Qe.value=!Qe.value)},[l("div",{class:"w-full h-7 rounded border",style:Pe({background:Ce.value.color})},null,4),l("span",Ln,N(Ce.value.color),1)]),Qe.value?(d(),v("div",En,[l("div",Mn,[(d(),v(ce,null,be(pt,_=>l("button",{key:_,class:"w-5 h-5 rounded border",style:Pe({background:_}),onClick:X=>{$e("color",{target:{value:_}}),Qe.value=!1}},null,12,An)),64))]),l("div",Bn,[l("input",{type:"color",value:Ce.value.color,class:"w-8 h-8 cursor-pointer",onInput:e[20]||(e[20]=_=>$e("color",_))},null,40,In),l("input",{type:"text",class:"flex-1 text-xs border rounded px-2 py-1",value:Ce.value.color,readonly:""},null,8,Fn)])])):L("",!0)])]),l("div",null,[l("div",Nn,[l("div",null,[e[46]||(e[46]=l("label",{class:"block text-xs text-secondary mb-1"},"Weight",-1)),l("select",{class:"w-full h-8 border rounded px-2 text-sm",value:Ce.value.fontWeight,onChange:e[21]||(e[21]=_=>$e("font_weight",_))},e[45]||(e[45]=[l("option",{value:"lighter"},"Light",-1),l("option",{value:"normal"},"Normal",-1),l("option",{value:"bold"},"Bold",-1),l("option",{value:"bolder"},"Extra Bold",-1)]),40,On)])])])]),l("div",Un,[l("button",{class:"w-full cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium hover:shadow-md disabled:opacity-60",disabled:Ue.value,onClick:Nt},[Ue.value?(d(),v("span",zn)):L("",!0),l("span",null,N(Ue.value?"Updating...":"Update"),1)],8,qn)])])):L("",!0)]),c.value?(d(),v("div",Pn,[l("div",jn,[e[47]||(e[47]=l("h3",{class:"text-lg font-semibold mb-4"},"Insert Web Link",-1)),Ze(l("input",{"onUpdate:modelValue":e[22]||(e[22]=_=>V.value=_),type:"text",placeholder:"Enter or paste a URL",class:"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[vl,V.value]]),l("div",Rn,[l("button",{onClick:I,class:"px-4 py-2 rounded-md bg-gray-200 hover:bg-gray-300"}," Cancel "),l("button",{disabled:!V.value,onClick:E,class:H(["px-4 py-2 rounded-md text-white",V.value?"bg-blue-500 hover:bg-blue-600":"bg-blue-300 cursor-not-allowed"])}," Insert ",10,Hn)])])])):L("",!0),we.value?(d(),v("div",{key:1,class:"absolute top-40 left-70 bg-bg-body rounded-lg p-4 shadow-lg z-100 min-w-[328px] border",onClick:e[24]||(e[24]=De(()=>{},["stop"]))},[O(i,{autofocus:!0,modelValue:We.value,"onUpdate:modelValue":e[23]||(e[23]=_=>We.value=_),placeholder:"Add New list",onKeyup:Rt(Y,["enter"])},null,8,["modelValue"]),e[48]||(e[48]=l("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),l("div",Wn,[O(a,{onClick:Y,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:ee(()=>[oe(N(f(ae)?"Adding...":"Add list"),1)]),_:1}),l("i",{class:"fa-solid fa-close cursor-pointer",onClick:te})])])):L("",!0)],64)):L("",!0),u.value==="calendar"?(d(),re(pa,{key:3,data:dt.value,"onSelect:ticket":J,class:"min-h-[600px]"},null,8,["data"])):L("",!0),u.value==="gantt"?(d(),re(fa,{key:4,data:dt.value,"onSelect:ticket":J},null,8,["data"])):L("",!0),O(f(A),{onClick:e[25]||(e[25]=De(()=>{},["stop"])),modelValue:Ke.value,"onUpdate:modelValue":e[26]||(e[26]=_=>Ke.value=_),title:"Delete List",itemLabel:"list",itemName:(U=Ne.value)==null?void 0:U.title,requireMatchText:(h=Ne.value)==null?void 0:h.title,confirmText:"Delete workspace",cancelText:"Cancel",size:"md",loading:f(ae),onConfirm:Qt,onCancel:e[27]||(e[27]=()=>{Ke.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),fe.value?(d(),re(f(B),{selectedVariable:ue.value,listId:(F=Ne.value)==null?void 0:F.title,sheet_id:le.value,key:"createTaskModalKey",modelValue:fe.value,"onUpdate:modelValue":e[28]||(e[28]=_=>fe.value=_),onSubmit:e[29]||(e[29]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):L("",!0),(z=ve.value)!=null&&z._id?(d(),re(f(P),{key:6,details:ve.value,onClose:e[30]||(e[30]=()=>{J({variables:{}})}),showPanel:!!((se=ve.value)!=null&&se._id)},null,8,["details","showPanel"])):L("",!0)])])}}}),Qn=Kt(Kn,[["__scopeId","data-v-cdfc82b9"]]),Gn={class:"flex-auto flex-grow h-full min-h-0 bg-bg-card rounded-[6px] border border-border overflow-x-auto flex-col flex"},Jn={key:1},Zn={key:0,class:"p-4 w-full min-w-0 box-border h-full min-h-0"},Xn={class:"flex items-center justify-between"},Yn={class:"text-sm font-semibold flex gap-2 items-center"},er={class:"flex items-center gap-2 relative",ref:"filterDropdownRef"},tr={key:0,class:"flex items-center gap-2 overflow-x-auto no-scrollbar py-1"},lr=["onClick"],ar={key:1,class:"relative flex items-center gap-3"},sr={class:"relative flex-shrink-0"},nr={class:"flex items-center gap-2 truncate"},rr=["src"],or={class:"truncate"},ir={key:0,class:"absolute left-0 top-full mt-1 w-44 bg-bg-card border border-gray-200 rounded-lg shadow-lg z-[9999]"},dr={class:"flex flex-col"},ur=["onClick"],cr={class:"flex gap-2 overflow-x-auto no-scrollbar flex-1"},pr=["onClick"],fr={key:0,class:"w-full h-full min-h-[250px] flex justify-center items-center"},vr={class:"flex justify-between gap-4 px-3 pb-2 border-b border-border-input"},mr={class:"flex items-center gap-2 bg-bg-card min-w-0"},gr=["onClick"],br={class:"flex items-center lg:gap-2 max-w-full"},xr={class:"flex items-center lg:gap-2 max-w-full"},yr={class:"truncate max-w-[160px]"},_r={key:1,class:"absolute left-0 mt-2 w-60 bg-bg-card border-accent-hover rounded-xl shadow-lg z-50 max-h-64 overflow-y-auto overflow-x-hidden"},hr={class:"relative flex-1"},kr=["onClick"],wr=["onBlur","onKeyup"],Sr={class:"relative ml-2 flex gap-2"},Cr=["onClick"],$r=["onClick"],Dr={class:"ms-2 flex gap-2 items-center"},Tr={class:"flex"},Vr={class:"gap-2 hidden lg:flex"},Lr={key:0,class:"flex gap-2"},Er={key:0,class:"gap-2"},Mr={class:"hidden lg:fxex bg-[#E6E1F5] text-accent px-3 py-1 rounded-2xl justify-center items-center"},Ar={key:0,class:"flex lg:hidden"},Br=["title"],Ir=["disabled"],Fr={class:"absolute z-50 top-10 mb-2 -translate-x-2/3 bg-card border border-accent text-accent text-xs px-2 py-1 rounded whitespace-nowrap"},Nr={key:0,class:"fixed inset-0 z-50 flex items-center justify-center w-full"},Or={class:"relative bg-bg-card rounded-lg p-4 mx-3 w-full max-w-md lg:max-w-2xl xl:max-w-3xl"},Ur={class:"flex flex-col gap-2 mt-4"},qr={class:"flex gap-2 w-full"},zr={key:0,class:"mt-1 w-full bg-bg-card rounded-md max-h-64 overflow-y-auto"},Pr=["onClick"],jr={class:"flex items-center justify-between"},Rr={class:"font-medium"},Hr={class:"text-muted text-xs ml-2"},Wr={class:"flex gap-2 text-xs"},Kr={class:"text-muted border border-border-input rounded-md px-3 py-1"},Qr={key:1,class:"absolute top-full left-0 mt-1 w-full bg-bg-card border border-border-input rounded-md shadow-md p-4 z-50 text-center text-muted"},Gr={key:0,class:"w-full h-full min-h-[250px] flex justify-center items-center"},Jr={class:"flex-1 min-h-0"},Zr={key:1,class:"bg-bg-card w-full p-6 flex flex-col items-center justify-center text-center gap-4 h-[100%] mt-3"},Xr={key:2,class:"w-full h-full min-h-[250px] flex flex-col items-center justify-center text-center gap-4 p-6"},jt=400,Yr=rt({__name:"Plan",setup(k){const{theme:g}=gl(),B=m(!1),A=m(""),P=m(!1),$=m(!1),{canCreateCard:c}=ul(),V=m(!1),W=m(null),K=m(!1),q=m(!1),j=D(()=>I.value.value),G=m(null),E=[{label:"Milestone",value:"milestone",dot:"#2e9bda"},{label:"Sprint",value:"sprint",dot:"#7d68c8"},{label:"Huddle",value:"huddle",dot:"#eea832"}],I=m(E[0]),Q=m(null),Y=m(!1);Pt(Q,()=>{Y.value=!1});const te=()=>{B.value=!1},M=()=>{V.value=!0},u=m(!1),r=()=>{u.value=!u.value},{workspaceId:o}=Bl(),n=m(!1),{moveSelectedToSprint:p,moveSelectedToBacklog:y,deleteSelected:Z,saveSprintMeta:x,toggleStartSprint:T}=La();function pe(a){G.value=a}function xe(a){G.value=a}function Ve(a){G.value=a}const{data:ot,refetch:Xe}=dl(o,j,G);R(G,()=>{Xe()});const{data:it}=sa(o),Ye=D(()=>{var a;return((a=it.value)==null?void 0:a.modules.filter(t=>{var i;return((i=t==null?void 0:t.variables)==null?void 0:i["module-title"])!=="Pin"}))||[]});R(()=>j.value,(a,t)=>{a!==t&&Xe()});const{mutate:Ae,isPending:et}=Da({onSuccess:()=>{_t.invalidateQueries({queryKey:["sprint-list"]}),Be.value=!1}}),ae=m(null),Be=m(!1),ke=()=>{var a;Ae((a=ae.value)==null?void 0:a._id)},{mutate:Ie,isPending:Re}=Ll({onSuccess:a=>{x({name:a.title}),le({id:J.value,payload:{title:a.title,start_date:a.start_date,end_date:a.end_date,goal:a.goal,duration:Number(a.duration_days)}}),tt.value=!1}}),{mutate:le,isPending:He}=$a({onSuccess:()=>{Fe()}}),ue=a=>{Ie({id:J.value,payload:{title:a.title,duration:a.duration,start_date:a.start,end_date:a.end,goal:a.goal}})},{data:ie,refetch:S,isLoading:b}=_a(o.value,j);R(()=>j.value,(a,t)=>{a!==t&&S()});const{refetch:C,isPending:fe}=dl(o,j),ve=D(()=>{var a,t;return(t=(a=ie==null?void 0:ie.value)==null?void 0:a.sprints[0])==null?void 0:t._id}),J=m(ve.value);R(()=>ve.value,a=>{J.value=a}),R(()=>J.value,a=>{var t;ae.value=((t=ie.value)==null?void 0:t.sprints.find(i=>i._id===a))||null});const{data:de,refetch:Fe}=Sa(J),tt=m(!1),Et=()=>{tt.value=!0},{data:Le,refetch:gt}=ha(J);R(()=>J.value,()=>{Fe()}),console.log("sprint data",Le.value);const we=m(""),We=m(null),lt=D(()=>{var t;if(!we.value||!((t=Le.value)!=null&&t.backlog_items))return[];const a=we.value.toLowerCase().trim();return Le.value.backlog_items.filter(i=>{var X,ne,Me,Ge,Je,St,Ct,$t,Dt,Tt;const U=((Me=(ne=(X=i.card)==null?void 0:X.variables)==null?void 0:ne["card-title"])==null?void 0:Me.toLowerCase())||"",h=((St=(Je=(Ge=i.card)==null?void 0:Ge.variables)==null?void 0:Je["card-code"])==null?void 0:St.toLowerCase())||"",F=((Dt=($t=(Ct=i.card)==null?void 0:Ct.variables)==null?void 0:$t["card-status"])==null?void 0:Dt.toLowerCase())||"",z=((Tt=i.priority)==null?void 0:Tt.toLowerCase())||"",se=String(i._id||"").toLowerCase(),_=String(i.card_id||"").toLowerCase();return U.includes(a)||h.includes(a)||F.includes(a)||z.includes(a)||se.includes(a)||_.includes(a)})});function Ke(a){we.value=a}function Ne(){lt.value.length===1&&Mt(lt.value[0])}const Qt={high:"bg-red-500/20 text-red-500",medium:"bg-yellow-500/20 text-yellow-500",low:"bg-green-500/20 text-green-500"};function Gt(a){const t=a==null?void 0:a.toLowerCase();return Qt[t]??"bg-gray-500/20 text-gray-500"}function Jt(a){We.value=a,ft.value=!1}const me=D(()=>{var i,U;const a=(i=Le==null?void 0:Le.value)==null?void 0:i.backlog_items;if(!a)return null;const t=(((U=Le==null?void 0:Le.value)==null?void 0:U.backlog_items)||[]).map(h=>{var se,_,X,ne,Me;const F=((se=h==null?void 0:h.card)==null?void 0:se.variables)||{},z=((_=h==null?void 0:h.card)==null?void 0:_._id)||h.card_id;return{id:z,key:F["card-code"]||(z==null?void 0:z.slice(-6))||"PRJ-?",summary:F["card-title"]||"(untitled)",type:"Story",status:Zt(String(F["card-status"]||"").trim()),assignee:((ne=(X=h==null?void 0:h.card)==null?void 0:X.assigned_to)==null?void 0:ne.name)||"Unassigned",storyPoints:Number(h.story_points||0),priority:dt(String(F.priority||"").trim()),createdAt:((Me=h==null?void 0:h.card)==null?void 0:Me.created_at)||new Date().toISOString(),description:F["card-description"]||""}});return{id:a._id,name:a.title||"Sprint 1",title:a.title,goal:"",start:"",end:"",started:!1,tickets:t}});function Mt(a){J.value=a._id,at.value=!1}function Zt(a){const t=a.toLowerCase();return t.includes("progress")?"In Progress":t.includes("done")||t.includes("complete")?"Done":"Todo"}function dt(a){const t=a.toLowerCase();return t==="highest"||t==="blocker"||t==="critical"?"Highest":t==="high"||t==="major"?"High":t==="medium"||t==="normal"?"Medium":"Low"}const{mutate:Xt}=Ta({onSuccess:()=>{mt.success("Card removed from sprint successfully"),bt()},onError:a=>{mt.error("Failed to remove card from sprint",a)}});function bt(){gt(),S(),C(),Fe()}function Yt(a,t){const i=Array.isArray(a)?a:[a],U=t||J.value;!U||!i.length||i.forEach(h=>{Xt({sprintId:U,cardId:h})})}const xt=m(!1),yt=m(null);function ut(){n.value=!0,yt.value=null}function At(a){yt.value=a,B.value=!0,xt.value=!0}const Ee=m(!1);function el(){Ee.value=!0}const _t=ml(),{mutate:tl,isPending:ht}=Ca({onSuccess:a=>{x({name:a.title}),_t.invalidateQueries({queryKey:["sprint-list"]}),Ee.value=!1}}),{mutate:kt,isPending:ll}=Ll({onSuccess:a=>{x({name:a.title}),_t.invalidateQueries({queryKey:["sprint-list"]}),Ee.value=!1}}),Oe=m("");function ct(a){const t=Oe.value.trim();if(!t||t===a.title){Ue();return}kt({id:a._id,payload:{workspace_id:o.value,title:t}}),$e.value=null}function al(a){var t;ae.value?kt({id:(t=ae.value)==null?void 0:t._id,payload:{workspace_id:o.value,title:a.name,sprintType:a.value,description:a.description}}):tl({payload:{workspace_id:o.value,title:a.name,sprintType:a.value,description:a.description}})}function sl(){ae.value=null,Ee.value=!0}function nl(a){ae.value=a,Be.value=!0}const{mutate:Bt,isPending:It}=wa(J,{onSuccess:()=>{Fe()}}),Ft=()=>{Bt({})},ye=m(null),Se=m(0);let pt=!1;na(()=>{if(!ye.value)return;const a=ye.value.offsetWidth;Se.value=a/3});function Qe(){pt=!0,document.addEventListener("mousemove",Ce),document.addEventListener("mouseup",_e)}function Ce(a){if(!pt||!ye.value)return;const t=ye.value.getBoundingClientRect(),i=a.clientX-t.left;i<jt?Se.value=jt:i>t.width-jt?Se.value=t.width-jt:Se.value=i}function _e(){pt=!1,document.removeEventListener("mousemove",Ce),document.removeEventListener("mouseup",_e)}const $e=m(null);function he(a){$e.value=a._id,a.tempTitle=a.title}function Ue(){var t;const a=(t=ie.value)==null?void 0:t.sprints.find(i=>i._id===$e.value);a&&(a.tempTitle=a.title),$e.value=null}Pt(W,()=>{q.value=!1});const Nt=a=>{I.value=a,K.value=!1};Pt(Q,()=>{K.value=!1});const Ot=m(null),at=m(!1);Pt(Ot,()=>{at.value=!1});const ft=m(!1),Ut=()=>{ft.value=!0},vt=()=>{ft.value=!1,we.value=""},wt=m("all"),s=m(!1),e=D(()=>{var t,i,U;if(wt.value==="all")return"All Milestones";const a=(i=(t=it.value)==null?void 0:t.modules)==null?void 0:i.find(h=>h._id===wt.value);return((U=a==null?void 0:a.variables)==null?void 0:U["module-title"])||"Select Module"});return(a,t)=>{var i,U,h,F,z,se,_,X,ne,Me,Ge,Je,St,Ct,$t,Dt,Tt,bl,xl,yl,_l,hl;return d(),v("div",Gn,[V.value?(d(),re(Qn,{key:0,sptint_id:J.value,searchQuery:A.value,onGoBack:t[0]||(t[0]=w=>V.value=!1)},null,8,["sptint_id","searchQuery"])):L("",!0),V.value?L("",!0):(d(),v("div",Jn,[f(He)?L("",!0):(d(),v("div",Zn,[l("div",{class:"flex gap-2 h-full max-h-screen min-h-0 box-border overflow-x-auto group",ref_key:"containerRef",ref:ye},[l("section",{class:H(["space-y-4 p-4 rounded-md relative group box-border h-full min-h-0 min-w-[400px]",f(g)==="dark"?"bg-bg-surface":"bg-bg-surface/30"]),style:Pe({width:Se.value+"px"})},[l("div",Xn,[l("h2",Yn,[Ze(l("input",{type:"checkbox",class:"custom-checkbox bg-bg-body border border-border-input flex-shrink-0","onUpdate:modelValue":t[1]||(t[1]=w=>P.value=w)},null,512),[[ra,P.value]]),oe(" Tickets ("+N((U=(i=f(ot))==null?void 0:i.cards)==null?void 0:U.length)+" "+N(((F=(h=f(ot))==null?void 0:h.cards)==null?void 0:F.length)>1?"Tasks":"Task")+") ",1)]),l("div",er,[f(c)?(d(),v("button",{key:0,class:"w-7 h-7 rounded cursor-pointer text-sm hover:bg-bg-body flex items-center justify-center",onClick:ut},t[22]||(t[22]=[l("i",{class:"text-text-primary fa-regular fa-plus"},null,-1)]))):L("",!0)],512)]),l("div",null,[j.value==="milestone"?(d(),v("div",tr,[l("button",{onClick:t[2]||(t[2]=w=>pe("all")),class:H(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium transition-colors whitespace-nowrap",G.value==="all"?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])}," All Modules ",2),(d(!0),v(ce,null,be(Ye.value,w=>(d(),v("button",{key:w._id,onClick:qe=>pe(w._id),class:H(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium transition-colors whitespace-nowrap cursor-pointer",G.value===w._id?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])},N(w.variables["module-title"]),11,lr))),128))])):j.value==="huddle"||j.value==="sprint"?(d(),v("div",ar,[l("div",sr,[l("button",{class:"h-8 min-w-[160px] flex items-center justify-between px-2 rounded-md border text-sm border-border hover:bg-bg-body",onClick:t[3]||(t[3]=w=>s.value=!s.value)},[l("span",nr,[l("img",{src:f(ps),alt:"filter",class:"w-4 h-4"},null,8,rr),l("span",or,N(e.value||"All Milestones"),1)]),t[23]||(t[23]=l("i",{class:"fas fa-chevron-down text-xs ml-2"},null,-1))]),s.value?(d(),v("div",ir,[l("ul",dr,[l("li",{class:"px-3 py-2 cursor-pointer hover:bg-gray-100",onClick:t[4]||(t[4]=w=>xe("all"))}," All Milestones "),(d(!0),v(ce,null,be(Ye.value,w=>(d(),v("li",{key:w._id,class:"px-3 py-2 cursor-pointer hover:bg-gray-100",onClick:qe=>xe(w._id)},N(w.variables["module-title"]),9,ur))),128))])])):L("",!0)]),l("div",cr,[(d(!0),v(ce,null,be((z=f(ie))==null?void 0:z.sprints,w=>(d(),v("button",{key:w._id,onClick:qe=>Ve(w._id),class:H(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium whitespace-nowrap transition-colors",G.value===w._id?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])},N(w.title),11,pr))),128))])])):L("",!0)]),f(fe)?(d(),v("div",fr,t[24]||(t[24]=[l("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):(d(),re(Wa,{key:1,checkedAll:P.value,"sprint-type":j.value,searchQuery:A.value,"module-id":G.value,onMoveSelectedToSprint:f(p),onDeleteSelectedBacklog:t[5]||(t[5]=w=>f(Z)("backlog")),onOpenTicket:At,onTicketMovedToBacklog:Yt,onOpenCreateTicket:ut},null,8,["checkedAll","sprint-type","searchQuery","module-id","onMoveSelectedToSprint"]))],6),l("div",{class:"h-full w-[3px] relative z-10 opacity-0 group-hover:opacity-100 bg-red hover:bg-accent cursor-col-resize transition",onMousedown:Qe},null,32),l("section",{class:H(["rounded-md relative group pt-2 flex flex-col flex-1 h-full min-h-0 box-border min-w-[400px] border border-border-input overflow-x-hidden",(f(g)==="dark","bg-bg-card")])},[l("div",vr,[l("div",mr,[l("div",{ref_key:"elipseWrapperSprint",ref:W,class:"relative inline-block"},[l("button",{onClick:t[6]||(t[6]=De(w=>q.value=!q.value,["stop"])),class:"flex items-center gap-2 lg:px-3 px-2 py-1.5 text-sm font-medium bg-transparent rounded-lg",style:Pe({border:"1px solid "+I.value.dot})},[l("span",{class:"w-2 h-2 rounded-full hidden lg:flex",style:Pe({backgroundColor:I.value.dot})},null,4),oe(" "+N(I.value.label)+" ",1),t[25]||(t[25]=l("i",{class:"fas fa-chevron-down text-xs"},null,-1))],4),O(Dl,{name:"fade"},{default:ee(()=>[q.value?(d(),v("ul",{key:0,onClick:t[7]||(t[7]=De(()=>{},["stop"])),class:"absolute left-0 mt-2 w-44 bg-bg-dropdown border border-border rounded-xl shadow-lg z-50"},[(d(),v(ce,null,be(E,w=>l("li",{key:w.value,onClick:qe=>(Nt(w),q.value=!q.value),class:"flex items-center gap-3 px-4 py-2 text-sm cursor-pointer"},[l("span",{class:"w-2 h-2 rounded-full",style:Pe({backgroundColor:w.dot})},null,4),oe(" "+N(w.label),1)],8,gr)),64))])):L("",!0)]),_:1})],512),l("div",br,[l("div",xr,[l("div",{ref_key:"sprintDropdownWrapperRef",ref:Ot,class:"relative min-w-0"},[(se=f(ie))!=null&&se.sprints.length?(d(),v("button",{key:0,onClick:t[8]||(t[8]=w=>at.value=!at.value),class:H(["flex items-center gap-3 lg:px-6 px-1 py-1.5 rounded-lg text-sm font-medium transition-all",J.value?"text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"]),style:Pe(J.value?{backgroundColor:I.value.dot}:{})},[l("span",yr,N((ne=(X=(_=f(ie))==null?void 0:_.sprints)==null?void 0:X.find(w=>w._id===J.value))==null?void 0:ne.title),1),t[26]||(t[26]=l("i",{class:"fas fa-chevron-down text-xs"},null,-1))],6)):L("",!0),at.value?(d(),v("div",_r,[(d(!0),v(ce,null,be((Me=f(ie))==null?void 0:Me.sprints,w=>{var qe;return d(),v("div",{key:w._id,class:"relative px-4 py-2 flex items-center justify-between text-sm cursor-pointer transition-color"},[l("div",hr,[$e.value!==w._id?(d(),v("button",{key:0,class:"text-left truncate w-full",onClick:ze=>Mt(w)},N(w.title),9,kr)):Ze((d(),v("input",{key:1,ref_for:!0,ref:"editingInputRef","onUpdate:modelValue":t[9]||(t[9]=ze=>Oe.value=ze),class:"w-full px-1 py-1 text-sm rounded outline-none bg-bg-card border border-[#7d68c8]",placeholder:"Enter new name",onClick:t[10]||(t[10]=De(()=>{},["stop"])),onBlur:ze=>ct(w),onKeyup:[Rt(ze=>ct(w),["enter"]),Rt(Ue,["esc"])]},null,40,wr)),[[vl,Oe.value]])]),l("div",Sr,[l("button",{class:"ml-2 text-xs text-gray-400 hover:text-accent",onClick:De(ze=>he(w),["stop"])},t[27]||(t[27]=[l("i",{class:"fas fa-pen"},null,-1)]),8,Cr),(qe=f(ie))!=null&&qe.sprints.length&&$e.value!==w._id?(d(),v("button",{key:0,onClick:De(ze=>nl(w),["stop"]),class:"w-4 h-4 rounded-full flex items-center justify-center text-red-500"},t[28]||(t[28]=[l("i",{class:"fas fa-times text-xs"},null,-1)]),8,$r)):L("",!0)])])}),128))])):L("",!0)],512)])]),l("button",{onClick:t[11]||(t[11]=w=>sl()),class:"w-7 h-7 lg:flex sm:hidden items-center justify-center rounded-full bg-accent border text-white transition-colors shrink-0"},t[29]||(t[29]=[l("i",{class:"fa-solid fa-plus text-xs"},null,-1)]))]),l("div",Dr,[l("div",Tr,[l("button",{class:"flex items-center justify-center w-7 h-7 rounded-full bg-accent",onClick:Ut},t[30]||(t[30]=[l("i",{class:"fa-solid fa-magnifying-glass text-white text-xs"},null,-1)])),((Ge=f(de))==null?void 0:Ge.status)==="active"?(d(),v("button",{key:0,class:"flex lg:hidden cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white items-center justify-center rounded-full ms-2 w-7 h-7 text-sm font-medium",onClick:M},t[31]||(t[31]=[l("i",{class:"fa-regular fa-eye text-sm"},null,-1)]))):L("",!0)]),l("div",Vr,[((Je=f(de))==null?void 0:Je.status)==="active"?(d(),v("div",Lr,[O(je,{size:"sm",onClick:Ft,variant:(f(g)==="dark","primary"),class:"border-border-input border"},{default:ee(()=>[oe(N(f(It)?"Ending...":"End"),1)]),_:1},8,["variant"]),l("button",{class:"cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white flex items-center justify-center gap-1 px-2 py-1 rounded-md text-sm font-medium",onClick:M},t[32]||(t[32]=[l("i",{class:"fa-regular fa-eye text-sm"},null,-1),oe(" Preview ")]))])):(d(),re(je,{key:1,size:"sm",variant:(f(g)==="dark","primary"),class:"border-border-input border",onClick:Et,disabled:!me.value||me.value.tickets.length===0||f(de).status==="completed"},{default:ee(()=>t[33]||(t[33]=[oe(" Start Sprint ")])),_:1,__:[33]},8,["variant","disabled"]))]),me.value&&me.value.tickets.length?(d(),v("div",Er,[l("span",Mr,N((St=f(de))==null?void 0:St.status),1),((Ct=f(de))==null?void 0:Ct.status)==="active"?(d(),v("div",Ar,[l("button",{onClick:Ft,class:"w-7 h-7 flex items-center justify-center rounded-full bg-accent",title:f(It)?"Ending...":"End Sprint"},t[34]||(t[34]=[l("i",{class:"fa-solid fa-flag-checkered text-white"},null,-1)]),8,Br)])):(d(),v("button",{key:1,onClick:Et,disabled:!me.value||me.value.tickets.length===0,class:"w-7 h-7 flex items-center justify-center rounded-full text-white bg-accent disabled:opacity-50 disabled:cursor-not-allowed lg:hidden",title:"Start Sprint"},t[35]||(t[35]=[l("i",{class:"fa-solid fa-play text-sm"},null,-1)]),8,Ir))])):L("",!0),(($t=f(de))==null?void 0:$t.status)==="active"?(d(),v("div",{key:1,class:"relative inline-flex",onMouseenter:t[12]||(t[12]=w=>u.value=!0),onMouseleave:t[13]||(t[13]=w=>u.value=!1),onClick:r},[t[36]||(t[36]=l("span",{class:"flex lg:hidden bg-emerald-500 text-white w-7 h-7 rounded-full justify-center items-center cursor-pointer"},[l("i",{class:"fa-solid fa-check"})],-1)),Ze(l("div",Fr," Sprint is active ",512),[[Wt,u.value]])],32)):L("",!0)]),O(Dl,{name:"fade"},{default:ee(()=>[ft.value?(d(),v("div",Nr,[l("div",{class:"absolute inset-0 bg-black/10 backdrop-blur-sm",onClick:vt}),l("div",Or,[l("div",{class:"flex justify-end"},[l("button",{onClick:vt,class:"px-2 py-1 rounded bg-bg-input border border-border-input text-accent"},t[37]||(t[37]=[l("i",{class:"fa-solid fa-xmark"},null,-1)]))]),l("div",Ur,[t[38]||(t[38]=l("p",{class:"text-sm text-muted mb-2"}," Search for sprints by name, status, or priority. Start typing to filter results. ",-1)),l("div",qr,[O(da,{placeholder:"Search in sprint",onOnChange:Ke,onKeyup:Rt(Ne,["enter"]),class:"flex-1"})]),lt.value.length&&we.value?(d(),v("div",zr,[l("ul",null,[(d(!0),v(ce,null,be(lt.value,w=>{var qe,ze,kl,wl,Sl,Cl;return d(),v("li",{key:w._id,onClick:eo=>Jt(w),class:"px-4 py-2 cursor-pointer hover:bg-bg-hover text-text-primary border-b border-border-input"},[l("div",jr,[l("div",null,[l("span",Rr,N((ze=(qe=w.card)==null?void 0:qe.variables)==null?void 0:ze["card-title"]),1),l("span",Hr," ("+N((wl=(kl=w.card)==null?void 0:kl.variables)==null?void 0:wl["card-code"])+") ",1)]),l("div",Wr,[l("span",{class:H(["px-3 py-1 rounded text-md",Gt(w.priority)])},N(w.priority),3),l("span",Kr,N((Cl=(Sl=w.card)==null?void 0:Sl.variables)==null?void 0:Cl["card-status"]),1)])])],8,Pr)}),128))])])):we.value&&!lt.value.length?(d(),v("div",Qr,' No sprints found matching "'+N(we.value)+'" ',1)):L("",!0)])])])):L("",!0)]),_:1})]),f(b)?(d(),v("div",Gr,t[39]||(t[39]=[l("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):L("",!0),l("div",Jr,[me.value&&f(de)&&((Dt=f(de))==null?void 0:Dt.status)==="planning"||((Tt=f(de))==null?void 0:Tt.status)==="active"?(d(),re(os,{key:0,searchQuery:A.value,sprintId:J.value,searchedData:We.value?[We.value]:[],checkedSprintAll:$.value,sprint:me.value,onOpenTicket:At,onEditSprint:el,onToggleStart:f(T),onMoveSelectedToBacklog:f(y),onDeleteSelectedSprint:t[14]||(t[14]=w=>f(Z)("sprint",w)),onRefresh:bt},null,8,["searchQuery","sprintId","searchedData","checkedSprintAll","sprint","onToggleStart","onMoveSelectedToBacklog"])):L("",!0),((bl=f(de))==null?void 0:bl.status)==="completed"?(d(),v("div",Zr,t[40]||(t[40]=[il(`<div class="w-20 h-20 flex justify-center items-center text-white rounded-full text-3xl" data-v-d9f2a57b><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 117.72 117.72" aria-hidden="true" data-v-d9f2a57b><path fill="#42ba96" d="M58.86,0c9.13,0,17.77,2.08,25.49,5.79c-3.16,2.5-6.09,4.9-8.82,7.21c-5.2-1.89-10.81-2.92-16.66-2.92\r
                  c-13.47,0-25.67,5.46-34.49,14.29c-8.83,8.83-14.29,21.02-14.29,34.49c0,13.47,5.46,25.66,14.29,34.49\r
                  c8.83,8.83,21.02,14.29,34.49,14.29s25.67-5.46,34.49-14.29c8.83-8.83,14.29-21.02,14.29-34.49\r
                  c0-3.2-0.31-6.34-0.9-9.37c2.53-3.3,5.12-6.59,7.77-9.85c2.08,6.02,3.21,12.49,3.21,19.22\r
                  c0,16.25-6.59,30.97-17.24,41.62c-10.65,10.65-25.37,17.24-41.62,17.24c-16.25,0-30.97-6.59-41.62-17.24\r
                  C6.59,89.83,0,75.11,0,58.86c0-16.25,6.59-30.97,17.24-41.62S42.61,0,58.86,0z\r
                  M31.44,49.19L45.8,49l1.07,0.28c2.9,1.67,5.63,3.58,8.18,5.74c1.84,1.56,3.6,3.26,5.27,5.1\r
                  c5.15-8.29,10.64-15.9,16.44-22.9c6.35-7.67,13.09-14.63,20.17-20.98l1.4-0.54H114l-3.16,3.51\r
                  C101.13,30,92.32,41.15,84.36,52.65C76.4,64.16,69.28,76.04,62.95,88.27l-1.97,3.8l-1.81-3.87\r
                  c-3.34-7.17-7.34-13.75-12.11-19.63c-4.77-5.88-10.32-11.1-16.79-15.54L31.44,49.19z" data-v-d9f2a57b></path></svg></div><h4 class="text-lg font-semibold text-accent" data-v-d9f2a57b> Sprint Completed </h4><p class="text-sm text-muted max-w-md" data-v-d9f2a57b> This sprint has been successfully completed. To continue planning work, create a new sprint by clicking the <strong data-v-d9f2a57b>plus (+)</strong> button and start organizing upcoming tasks. </p>`,3)]))):L("",!0),(xl=f(de))!=null&&xl.length?L("",!0):(d(),v("div",Xr,t[41]||(t[41]=[il('<div class="w-20 h-20 flex items-center justify-center rounded-full bg-muted/10 text-accent" data-v-d9f2a57b><svg xmlns="http://www.w3.org/2000/svg" class="w-20 h-20" fill="none" viewBox="0 0 24 24" stroke="#ff3333" stroke-width="1.5" data-v-d9f2a57b><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-d9f2a57b></path></svg></div><h4 class="text-xl font-semibold text-accent" data-v-d9f2a57b> No sprints available </h4><p class="text-sm text-muted max-w-md" data-v-d9f2a57b> You don’t have any sprints yet. Create a new sprint to start planning and organizing your work. Click the <strong data-v-d9f2a57b>plus (+)</strong> button to get started. </p>',3)])))])],2)],512)]))])),O(ua,{onClick:t[15]||(t[15]=De(()=>{},["stop"])),modelValue:Be.value,"onUpdate:modelValue":t[16]||(t[16]=w=>Be.value=w),title:"Delete Sprint",itemLabel:"Sprint",itemName:(yl=ae.value)==null?void 0:yl.title,requireMatchText:(_l=ae.value)==null?void 0:_l.title,confirmText:"Delete Sprint",cancelText:"Cancel",size:"md",loading:f(et),onConfirm:ke,onCancel:t[17]||(t[17]=()=>{ae.value=null,Be.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),O(cs,{modelValue:Ee.value,"onUpdate:modelValue":t[18]||(t[18]=w=>Ee.value=w),onSave:al,sprint:ae.value,creatingSprint:ae.value?f(ll):f(ht)},null,8,["modelValue","sprint","creatingSprint"]),O(Ss,{sprint:ae.value,modelValue:tt.value,"onUpdate:modelValue":t[19]||(t[19]=w=>tt.value=w),onSave:ue,creatingSprint:f(He)||f(Re)},null,8,["sprint","modelValue","creatingSprint"]),O(oa,{modelValue:B.value,"onUpdate:modelValue":t[20]||(t[20]=w=>B.value=w),cardId:(hl=yt.value)==null?void 0:hl.id,onClose:te},null,8,["modelValue","cardId"]),O(rn,{modelValue:n.value,"onUpdate:modelValue":t[21]||(t[21]=w=>n.value=w)},null,8,["modelValue"])])}}}),mo=Kt(Yr,[["__scopeId","data-v-d9f2a57b"]]);export{mo as default};
