import{d as re,a as ue,W as ce,r as n,m as ve,bp as me,ae as pe,c as K,bq as he,b as U,w as h,e as s,t as u,i as d,F as I,x as M,y as T,f as C,j as R,h as c,_ as E,B as j,n as V,A as L,V as N,a8 as W,S as fe,o as i,H as be}from"./index-DblamYeD.js";import{I as ge}from"./IconPicker-DudM0tXP.js";import{_ as _e}from"./AudioRecorder.vue_vue_type_script_setup_true_lang-DGhVpS7m.js";const xe={class:"flex justify-between items-start px-6 border-b border-border pb-4"},ye={class:"text-xl font-semibold"},ke={class:"px-6 pt-4 border-b border-border flex gap-6 text-sm font-medium"},we=["onClick"],Ce={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-accent"},Ve={class:"px-6 py-6 space-y-6"},Se={key:0,class:"space-y-4"},Ae={class:"flex justify-end gap-2 pt-2"},Pe={key:1,class:"space-y-6"},Ue={class:"relative w-full"},Ie={class:"absolute bottom-4 right-4"},Me={key:2,class:"space-y-4"},Te={class:"flex flex-wrap gap-2 text-xs"},je=["onClick"],qe={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},Be=["onClick"],De=["src"],Qe={class:"p-3 py-4"},$e={class:"text-base font-medium"},ze={class:"text-sm opacity-75 mt-1 line-clamp-1"},Ke={class:"flex justify-end gap-2 pt-2"},Re=re({__name:"CreateSheetModal",props:{modelValue:{type:Boolean},sheet:{}},emits:["update:modelValue"],setup(F,{emit:G}){var D,Q,$;const o=F,O=G,v=ue(),{workspaceId:_,moduleId:x}=ce(),l=n({title:(D=o==null?void 0:o.sheet)==null?void 0:D.title,description:(Q=o==null?void 0:o.sheet)==null?void 0:Q.description,icon:($=o==null?void 0:o.sheet)==null?void 0:$.icon}),m=n({});ve(o,()=>{l.value=o.sheet});function H(){const a={};return l.value.title.trim()||(a.title="Please enter a sheet name."),l.value.description.trim()||(a.description="Please enter a description."),m.value=a,Object.keys(a).length===0}const{mutate:q,isPending:B}=me({onSuccess:()=>{v.invalidateQueries({queryKey:["sheets"]}),v.invalidateQueries({queryKey:["sheet-list"]}),f()}}),{mutate:J,isPending:X}=pe({onSuccess:()=>{v.invalidateQueries({queryKey:["sheets"]}),v.invalidateQueries({queryKey:["sheet-list"]}),f()}});function Y(){var a;H()&&((a=o.sheet)!=null&&a._id?J({sheet_id:o.sheet._id,icon:l.value.icon,variables:{"sheet-title":l.value.title,"sheet-description":l.value.description},is_ai_generated:!1,workspace_id:_.value,workspace_module_id:x.value}):q({icon:l.value.icon,variables:{"sheet-title":l.value.title,"sheet-description":l.value.description},is_ai_generated:!1,workspace_id:_.value,workspace_module_id:x.value}))}function f(){l.value={title:"",description:"",icon:null},m.value={},S.value=!1}const S=K({get:()=>o.modelValue,set:a=>O("update:modelValue",a)}),A=n(!1),P=n(null),r=n(""),y=n(!1),{mutate:Z,isPending:ee}=he({onSuccess:()=>{v.invalidateQueries({queryKey:["sheets"]}),v.invalidateQueries({queryKey:["sheet-list"]}),f(),y.value=!1},onError:()=>{y.value=!1}});function te(){r.value.trim()&&(y.value=!0,Z({module_id:x.value,idea:r.value,workspace_id:_.value}))}const ae=[{label:"Manual",value:"manual"},{label:"Generate with AI",value:"ai"}],b=n("manual"),se=n([{id:"concept",title:"Product Concept",subtitle:"Early stage ideation board.",cover:"https://placehold.co/600x300",tags:["Experience Design","Development"]},{id:"launch",title:"Launch Prep",subtitle:"Prepare assets for product launch.",cover:"https://placehold.co/600x300",tags:["Marketing","Project Management"]}]),k=n(""),le=n([{name:"Experience Design"},{name:"Development"},{name:"Marketing"},{name:"Project Management"}]),p=n(new Set);function oe(a){p.value.has(a)?p.value.delete(a):p.value.add(a)}const ie=K(()=>se.value.filter(a=>(!k.value||a.title.toLowerCase().includes(k.value.toLowerCase()))&&(p.value.size===0||a.tags.some(t=>p.value.has(t))))),g=n(null);function ne(a){g.value=a}function de(){g.value&&q({icon:null,variables:{"sheet-title":g.value.title,"sheet-description":g.value.subtitle},is_ai_generated:!1,workspace_id:_.value,workspace_module_id:x.value})}return(a,t)=>(i(),U(fe,{modelValue:S.value,"onUpdate:modelValue":t[9]||(t[9]=w=>S.value=w),size:"lg"},{default:h(()=>{var w;return[s("div",xe,[s("h2",ye,u((w=a.sheet)!=null&&w._id?"Update Sheet":"Add a new Sheet"),1)]),s("div",ke,[(i(),d(I,null,M(ae,e=>s("button",{key:e.value,onClick:z=>b.value=e.value,class:T(["pb-3 relative",b.value===e.value?"text-text-primary":"text-text-secondary"])},[C(u(e.label)+" ",1),b.value===e.value?(i(),d("div",Ce)):R("",!0)],10,we)),64))]),s("div",Ve,[b.value==="manual"?(i(),d("section",Se,[c(ge,{modelValue:l.value.icon,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value.icon=e)},null,8,["modelValue"]),c(E,{modelValue:l.value.title,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value.title=e),label:"Sheet name",size:"lg",placeholder:"Design Ideas",error:!!m.value.title,message:m.value.title},null,8,["modelValue","error","message"]),c(E,{modelValue:l.value.description,"onUpdate:modelValue":t[2]||(t[2]=e=>l.value.description=e),label:"Description",size:"lg",textarea:"",placeholder:"A short description",error:!!m.value.description,message:m.value.description},null,8,["modelValue","error","message"]),s("div",Ae,[s("button",{class:"px-4 py-2 rounded-md text-sm text-text-secondary border",onClick:f},"Cancel"),c(j,{class:"px-4",onClick:Y},{default:h(()=>[C(u(V(B)||V(X)?"Saving...":"Save"),1)]),_:1})])])):b.value==="ai"?(i(),d("section",Pe,[s("div",Ue,[s("div",{class:T(`${V(ee)||y.value?"neon-flow-border":""} bg-bg-input flex h-[200px] p-4 rounded-2xl relative`)},[!A.value&&!P.value?L((i(),d("textarea",{key:0,"onUpdate:modelValue":t[3]||(t[3]=e=>r.value=e),placeholder:"Ask Orchit AI to create a sheet...",class:"w-full h-full resize-none outline-none bg-transparent text-sm"},null,512)),[[N,r.value]]):R("",!0),r.value?(i(),U(W,{key:2,name:"rotate-fade",appear:""},{default:h(()=>[s("div",{onClick:t[7]||(t[7]=e=>te()),class:"absolute bottom-4 right-4 w-9 h-9 bg-accent rounded-md flex items-center justify-center cursor-pointer shadow"},t[10]||(t[10]=[s("i",{class:"text-white fa-solid fa-arrow-right"},null,-1)]))]),_:1})):(i(),U(W,{key:1,name:"fade-slide",appear:""},{default:h(()=>[s("div",Ie,[c(_e,{modelValue:r.value,"onUpdate:modelValue":t[4]||(t[4]=e=>r.value=e),isRecording:A.value,"onUpdate:isRecording":t[5]||(t[5]=e=>A.value=e),hasAudio:P.value,"onUpdate:hasAudio":t[6]||(t[6]=e=>P.value=e)},null,8,["modelValue","isRecording","hasAudio"])])]),_:1}))],2)])])):(i(),d("section",Me,[L(s("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>k.value=e),class:"w-full border rounded-lg p-2 text-sm border-border",placeholder:"Search"},null,512),[[N,k.value]]),s("div",Te,[(i(!0),d(I,null,M(le.value,e=>(i(),d("button",{key:e.name,class:T(["px-3.5 py-1.5 rounded-md",p.value.has(e.name)?"bg-black text-white":"bg-bg-body text-text-secondary"]),onClick:z=>oe(e.name)},u(e.name),11,je))),128))]),s("div",qe,[(i(!0),d(I,null,M(ie.value,e=>(i(),d("button",{key:e.id,class:"border border-border rounded-xl overflow-hidden text-left hover:shadow-sm",onClick:z=>ne(e)},[s("img",{src:e.cover,class:"w-full h-36 object-cover"},null,8,De),s("div",Qe,[s("div",$e,u(e.title),1),s("div",ze,u(e.subtitle),1)])],8,Be))),128))]),s("div",Ke,[c(j,{variant:"secondary",onClick:f},{default:h(()=>t[11]||(t[11]=[C("Cancel")])),_:1,__:[11]}),c(j,{disabled:!g.value,onClick:de},{default:h(()=>[C(u(V(B)?"Adding...":"Add board"),1)]),_:1},8,["disabled"])])]))])]}),_:1},8,["modelValue"]))}}),We=be(Re,[["__scopeId","data-v-76037207"]]);export{We as default};
