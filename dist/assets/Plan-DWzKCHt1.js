const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-GpnLG5sz.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-DLdMNkvf.js","assets/index-CRUDRZ7-.js","assets/index-DAllc1h-.css","assets/ConfirmDeleteModal-4rCVA3of.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-Dd9T_lvd.js","assets/SidePanel-UXeiIAND.js","assets/SidePanel-U7OOMI6M.css","assets/KanbanBoard-BwQOo3WW.js","assets/lodash-B3d4OLnQ.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-u55aGUWx.js","assets/KanbanBoard-Dffh696C.css"])))=>i.map(i=>d[i]);
import{R as we,S as Qe,p as c,T as ne,c as V,r as _,n as z,K as Se,U as Ee,d as Ce,V as Nt,W as Ht,l as p,h as l,j as ie,z as R,F as se,y as de,o as i,t as q,Q as jt,J as ut,O as pl,e as te,w as X,X as ct,k as A,_ as pt,I as Ye,i as ae,B as ve,m as G,Y as et,D as Be,P as zt,N as ft,M as Ft,Z as fl,$ as Rt,a0 as vl,a1 as Qt,a2 as ml,E as it,a3 as gl,a4 as bl,a5 as xl,u as yl,a6 as _l,a7 as hl,q as kl,a8 as Ge,A as Je,a9 as Sl,v as wl,aa as Re,ab as Cl,ac as Bt,ad as $l,ae as It}from"./index-CRUDRZ7-.js";import{u as vt}from"./useTheme-DSKtgfpB.js";import{_ as Dl}from"./BaseTextAreaField.vue_vue_type_script_setup_true_lang-DkhJSeXj.js";import{_ as Pt}from"./SearchBar.vue_vue_type_script_setup_true_lang-D8fPGPZ2.js";import{o as Ze,_ as Tl}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-Dd9T_lvd.js";import{K as Kt}from"./KanbanSkeleton-DruybbjU.js";import{K as Vl}from"./KanbanTicket-cyJn1sz2.js";import{F as Ml}from"./fuse-Ch1WBRTM.js";import{l as Ll}from"./lodash-B3d4OLnQ.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-u55aGUWx.js";const El="data:image/svg+xml,%3csvg%20width='60'%20height='46'%20viewBox='0%200%2060%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M59.7443%2034.8967L50.5682%2025.7206C50.4457%2025.5984%2050.2897%2025.5152%2050.1199%2025.4816C49.9501%2025.4479%2049.7742%2025.4653%2049.6143%2025.5315C49.4544%2025.5976%2049.3176%2025.7097%2049.2213%2025.8535C49.125%2025.9973%2049.0734%2026.1664%2049.073%2026.3394V30.517H25.9775V40.5114H49.0755V44.689C49.0759%2044.8621%2049.1275%2045.0312%2049.2238%2045.175C49.3201%2045.3187%2049.4569%2045.4308%2049.6168%2045.497C49.7767%2045.5632%2049.9527%2045.5805%2050.1224%2045.5468C50.2922%2045.5132%2050.4482%2045.43%2050.5708%2045.3078L59.7468%2036.1318C59.9095%2035.9672%2060.0005%2035.7451%2060.0001%2035.5137C59.9996%2035.2823%2059.9076%2035.0605%2059.7443%2034.8967Z'%20fill='%23C6DBA9'/%3e%3cpath%20d='M32.3149%2030.5293C30.664%2031.5967%2028.7394%2032.1633%2026.7734%2032.1609V40.5237H34.7295C39.2829%2038.5638%2042.9649%2035.0102%2045.0851%2030.5293H32.3149Z'%20fill='url(%23paint0_linear_250_16424)'/%3e%3cpath%20d='M46.2209%2020.2832C46.2317%2015.0884%2044.2448%2010.0884%2040.6714%206.3179C37.0981%202.54738%2032.2119%200.295026%2027.024%200.0269855C21.8362%20-0.241055%2016.7439%201.49574%2012.801%204.87791C8.85809%208.26009%206.36647%2013.0287%205.84178%2018.1969L2.46233%2017.8913C2.31055%2017.8782%202.15829%2017.9103%202.02467%2017.9835C1.89106%2018.0566%201.78205%2018.1677%201.71134%2018.3026C1.64063%2018.4376%201.61138%2018.5904%201.62726%2018.7419C1.64313%2018.8934%201.70343%2019.0368%201.80058%2019.1542L9.51927%2028.406C9.79205%2028.7344%2010.277%2028.7773%2010.378%2028.5045L19.6298%2020.7833C20.3876%2020.3413%2020.1173%2019.4825%2019.4328%2019.4194L15.8008%2019.091C16.0297%2017.1283%2016.8213%2015.2735%2018.0802%2013.7503C19.3391%2012.2271%2021.0115%2011.1004%2022.8961%2010.5059C24.7806%209.9114%2026.7969%209.8745%2028.7019%2010.3996C30.6069%2010.9248%2032.3195%2011.9896%2033.6332%2013.4657C34.947%2014.9419%2035.8059%2016.7664%2036.1065%2018.7195C36.4071%2020.6726%2036.1365%2022.6709%2035.3274%2024.4738C34.5183%2026.2766%2033.2051%2027.8071%2031.5462%2028.8807C29.8872%2029.9544%2027.9531%2030.5254%2025.977%2030.5251H25.9283V40.5094C31.2249%2040.4031%2036.7093%2038.2263%2040.4202%2034.4455C44.1311%2030.6648%2046.2134%2025.5808%2046.2209%2020.2832Z'%20fill='%23D7A39E'/%3e%3cpath%20d='M25.9773%2030.5293H0V40.5237H25.9773V30.5293Z'%20fill='url(%23paint1_linear_250_16424)'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_250_16424'%20x1='6.53714'%20y1='35.5252'%20x2='47.0198'%20y2='35.5252'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%236C798F'/%3e%3cstop%20offset='1'%20stop-color='%236C798F'%20stop-opacity='0.1'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_250_16424'%20x1='0'%20y1='36'%20x2='26'%20y2='36'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23E8D4D3'%20stop-opacity='0'/%3e%3cstop%20offset='1'%20stop-color='%23E2A39F'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Bl=(v,d,T={})=>Qe({queryKey:V(()=>["sprint-list",c(v),c(d)]),queryFn:({signal:w})=>ne({url:`sprints/${c(v)}`,method:"GET",signal:w,params:{sprintType:c(d)}}),...T}),Il=(v,d={})=>Qe({queryKey:["sprint-cards",v],queryFn:({signal:T})=>ne({url:`sprints/${c(v)}/backlog`,method:"GET",signal:T}),...d}),Pl=(v,d={})=>Qe({queryKey:["sprint-kanban",v],queryFn:({signal:T})=>ne({url:`workspace/cards/sprintgrouped?sprint_id=${c(v)}&variable_id=68b6c96e0a95eef7d14e6981`,method:"GET",signal:T}),...d}),Al=(v,d={})=>we({key:["sprint-complete"]},{mutationFn:T=>ne({url:`sprints/${c(v)}/complete`,method:"POST",data:T.payload}),...d}),Ul=(v,d={})=>Qe({queryKey:["sprint-detail",v],queryFn:({signal:T})=>ne({url:`sprints/detail/${c(v)}?include_cards=true`,method:"GET",signal:T}),...d}),dt=(v,d,T={})=>Qe({queryKey:["backlog-list",v,c(d)],queryFn:({signal:w})=>ne({url:`sprints/workspace/${c(v)}/cards`,method:"GET",signal:w,params:{include_sprint_cards:!1,sprintType:c(d)}}),...T}),Ol=(v={})=>we({key:["add-sprint"]},{mutationFn:d=>ne({url:"/sprints",method:"POST",data:d.payload}),...v}),Wt=(v={})=>we({key:["move-card-to-sprint"]},{mutationFn:d=>ne({url:`/sprints/${d.id}/cards`,method:"POST",data:d.payload}),...v}),At=(v={})=>we({key:["add-sprint"]},{mutationFn:d=>ne({url:`/sprints/${d.id}`,method:"PUT",data:d.payload}),...v}),ql=(v={})=>we({key:["start-sprint"]},{mutationFn:d=>ne({url:`/sprints/${d.id}/start`,method:"POST",data:d.payload}),...v}),Nl=(v={})=>we({key:["delete-sprint"]},{mutationFn:d=>ne({url:`/sprints/${d}`,method:"DELETE"}),...v}),Hl=(v={})=>we({key:["remove-card-from-sprint"]},{mutationFn:d=>ne({url:`sprints/${c(d.sprintId)}/cards/remove `,method:"POST",data:{card_ids:[d.cardId]}}),...v}),Gt="jira-like:";function Ut(v="id"){return`${v}_${Math.random().toString(36).slice(2,9)}`}function Ot(v,d){try{localStorage.setItem(Gt+v,JSON.stringify(d))}catch{}}function qt(v,d){try{const T=localStorage.getItem(Gt+v);return T?JSON.parse(T):d}catch{return d}}function jl(v){switch(v){case"Highest":return"rounded-md bg-red-50 px-2 py-0.5 text-xs text-red-700";case"High":return"rounded-md bg-orange-50 px-2 py-0.5 text-xs text-orange-700";case"Medium":return"rounded-md bg-amber-50 px-2 py-0.5 text-xs text-amber-700";case"Low":return"rounded-md bg-gray-100 px-2 py-0.5 text-xs text-gray-600"}}function zl(){const v=_(qt("backlog",[])),d=_(qt("sprints",[]));if(d.value.length===0)d.value.push({id:Ut("sprint"),name:"Sprint 1",goal:"",start:"",end:"",started:!1,tickets:[]});else if(d.value.length>1){for(let o=1;o<d.value.length;o++)v.value.push(...d.value[o].tickets);d.value=[d.value[0]]}const T=_(d.value[0].id);z([v,d],()=>{Ot("backlog",v.value),Ot("sprints",d.value)},{deep:!0});const w=_([]),U=Se({}),h=V(()=>v.value.length>0&&w.value.length===v.value.length),n=o=>{var t;const e=d.value.find(a=>a.id===o);return!!e&&e.tickets.length>0&&(((t=U[o])==null?void 0:t.length)||0)===e.tickets.length};function $(o,e,t){const a=e.target.checked;if(o==="backlog")w.value=a?v.value.map(u=>u.id):[];else if(t){const u=d.value.find(S=>S.id===t);U[t]=a&&u?u.tickets.map(S=>S.id):[]}}function I(o,e,t,a){const u=t.target.checked,S=o==="backlog"?w.value:U[a]||(U[a]=[]);if(u&&!S.includes(e)&&S.push(e),!u){const B=S.indexOf(e);B>=0&&S.splice(B,1)}}function D(){return d.value.find(o=>o.id===T.value)||d.value[0]}function O(){const e=[...v.value,...d.value.flatMap(a=>a.tickets)].map(a=>Number(String(a.key).replace(/[^0-9]/g,""))).filter(a=>!Number.isNaN(a));return`PRJ-${e.length?Math.max(...e)+1:1}`}const{mutate:N}=Wt({onSuccess:()=>{Ee.success("Cards moved to sprint successfully")},onError:o=>{Ee.error("Failed to move cards: "+(o.message||"Unknown error"))}});function M(){var a,u;const o=D();if(!o||!w.value.length)return;const e=[],t=[];for(const S of v.value)(w.value.includes(S.id)?t:e).push(S);v.value=e,o.tickets.push(...t),w.value=[],t.length>0&&N({id:o.id,payload:{card_ids:t.map(S=>S.id),priority:((u=(a=t[0])==null?void 0:a.priority)==null?void 0:u.toLowerCase())||"medium",story_points:t.reduce((S,B)=>S+(B.storyPoints||0),0)}})}function P(o){const e=d.value.find(S=>S.id===o);if(!e)return;const t=U[o]||[],a=[],u=[];for(const S of e.tickets)(t.includes(S.id)?u:a).push(S);e.tickets=a,v.value.push(...u),U[o]=[]}function E(o,e){if(o==="backlog")v.value=v.value.filter(t=>!w.value.includes(t.id)),w.value=[];else if(e){const t=U[e]||[],a=d.value.find(u=>u.id===e);if(!a)return;a.tickets=a.tickets.filter(u=>!t.includes(u.id)),U[e]=[]}}function H(o,e){const t={id:Ut("T"),key:O(),createdAt:new Date().toISOString(),...e};if(o==="backlog")v.value.push(t);else{const a=D();a==null||a.tickets.push(t)}}function j(o){const e=D();e&&(e.name=o.name??e.name,e.goal=o.goal??e.goal,e.start=o.start??e.start,e.end=o.end??e.end)}function Q(){const o=D();o&&(o.started=!o.started)}function k(o){return o.tickets.reduce((e,t)=>e+(t.storyPoints||0),0)}return{backlog:v,sprints:d,activeSprintId:T,selectedBacklogIds:w,selectedSprintIds:U,allBacklogChecked:h,allSprintChecked:n,toggleAll:$,toggleOne:I,getActiveSprint:D,createTicket:H,saveSprintMeta:j,toggleStartSprint:Q,sprintPoints:k,moveSelectedToSprint:M,moveSelectedToBacklog:P,deleteSelected:E,priorityClass:jl}}const Fl={class:"h-full min-h-0"},Rl={key:0,class:"empty-state flex flex-col justify-center items-center h-full"},Ql=["disabled"],Kl={key:1,class:"overflow-y-auto h-[calc(100%-50px)] tickets-scroll"},Wl={class:"flex flex-col flex-1 gap-[4px] min-w-0 me-1"},Gl=["onDragstart","onClick"],Jl=["checked","onChange"],Zl={class:"flex items-center text-[14px] font-sans font-medium capitalize text-text-secondary flex-1 min-w-0"},Xl={class:"truncate"},Yl={class:"flex-shrink-0"},es={key:0,class:"flex justify-center text-gray-500 items-center text-[11px] aspect-square w-[24px] h-[24px] bg-bg-body rounded-full border-border-input border-2"},ts={key:1,class:"w-6 h-6 rounded-full"},ls=["src"],ss={key:2,class:"text-[11px] aspect-square w-24px flex justify-center items-center h-[24px] bg-accent/30 text-accent border-accent border rounded-full"},as=Ce({__name:"BacklogTable",props:{searchQuery:{type:String,default:""},sprintType:{type:String,default:""},checkedAll:{type:Boolean,default:!1}},emits:["ticket-dragged-to-sprint","open-ticket","ticket-moved-to-backlog","open-create-ticket"],setup(v,{emit:d}){const{theme:T}=vt(),{canCreateCard:w}=Nt(),U=d,h=v,{workspaceId:n}=Ht(),{data:$,isPending:I}=dt(n,h.sprintType),D=_([]),O=_(!1),N=_([]),M=_([]);z($,e=>{e!=null&&e.cards&&(D.value=e.cards.map(t=>{var f,C,le,J;const a=((f=t.card)==null?void 0:f.variables)??{},u=((C=t.card)==null?void 0:C._id)??t.card_id,S=String(a["card-status"]??"").trim(),B=String(a.priority??"").trim();return{id:u,key:a["card-code"]||(u==null?void 0:u.slice(-6))||"PRJ-?",summary:a["card-title"]||"(untitled)",type:"Story",status:S,assignee:((le=t.card)==null?void 0:le.assigned_to)??"Unassigned",storyPoints:Number(t.story_points??0)||0,priority:E(B),createdAt:((J=t.card)==null?void 0:J.created_at)??new Date().toISOString(),description:a["card-description"]||""}}))},{immediate:!0}),z(D,e=>{const t=new Set(e.map(a=>a.id));M.value=M.value.filter(a=>t.has(a))});const P=V(()=>{if(console.log(h.searchQuery,"this is query"),!h.searchQuery)return D.value;const e=h.searchQuery.toLowerCase();return D.value.filter(t=>{var u;const a=typeof t.assignee=="string"?t.assignee:((u=t.assignee)==null?void 0:u.u_full_name)||"";return t.key.toLowerCase().includes(e)||t.summary.toLowerCase().includes(e)||a.toLowerCase().includes(e)})});function E(e){const t=String(e??"").toLowerCase();return["highest","blocker","critical"].includes(t)?"Highest":["high","major"].includes(t)?"High":["medium","normal"].includes(t)?"Medium":"Low"}function H(e,t,a){var f;const u=M.value.includes(t.id)?[...M.value]:[t.id],S=u.map(C=>D.value.find(le=>le.id===C)).filter(Boolean);N.value=u;const B=JSON.stringify({id:t.id,ids:u,from:a,tickets:S});(f=e.dataTransfer)==null||f.setData("text/plain",B),e.dataTransfer&&(e.dataTransfer.effectAllowed="move")}function j(e){var t;O.value=!1,((t=e.dataTransfer)==null?void 0:t.dropEffect)!=="none"&&N.value.length&&(D.value=D.value.filter(a=>!N.value.includes(a.id)),M.value=M.value.filter(a=>!N.value.includes(a))),N.value=[]}function Q(e){var t;e.preventDefault(),O.value=!1;try{const a=(t=e.dataTransfer)==null?void 0:t.getData("text/plain");if(!a)return;const u=JSON.parse(a);if(u.from!=="sprint")return;const B=(u.tickets&&u.tickets.length?u.tickets:u.ticket?[u.ticket]:[]).filter(Boolean).filter(C=>!D.value.some(le=>le.id===C.id));B.length&&D.value.push(...B);const f=u.ids&&u.ids.length?u.ids:u.id?[u.id]:[];f.length&&U("ticket-moved-to-backlog",f,u.sprintId),console.log(u.sprintId,"sprintId ....")}catch(a){console.error("Drop error:",a)}}function k(e,t){t?M.value.includes(e)||M.value.push(e):M.value=M.value.filter(a=>a!==e)}function o(e,t){const a=t.target.checked;k(e,a)}return z(()=>h.checkedAll,e=>{e?(M.value=D.value.map(t=>t.id),console.log(M.value)):M.value=[]}),(e,t)=>(i(),p("section",Fl,[l("div",{class:R(["rounded-lg flex flex-col h-full",O.value?"ring-2 ring-blue-400":""]),onDragover:t[3]||(t[3]=ie(()=>{},["prevent"])),onDragenter:t[4]||(t[4]=a=>O.value=!0),onDragleave:t[5]||(t[5]=a=>O.value=!1),onDrop:t[6]||(t[6]=a=>Q(a))},[!c(I)&&P.value.length===0?(i(),p("div",Rl,[t[7]||(t[7]=l("img",{src:El,class:"mb-4",alt:"backlog-plan"},null,-1)),t[8]||(t[8]=l("h6",{class:"text-sm text-text-primary font-semibold mb-1"}," Get started in the backlog ",-1)),t[9]||(t[9]=l("p",{class:"text-sm text-text-primary/90 mb-4"}," Plan and start a sprint to see issues here. ",-1)),l("button",{disabled:!c(w),onClick:t[0]||(t[0]=a=>e.$emit("open-create-ticket")),class:R(["relative inline-flex items-center justify-center font-medium py-1.5 px-3 text-sm rounded-md focus:outline-none transition text-xs px-3 py-1.5 h-[34px] bg-accent text-white hover:bg-accent-hover border-border-input border",c(w)?"cursor-pointer":"cursor-not-allowed"])}," Create Ticket ",10,Ql)])):(i(),p("div",Kl,[l("div",Wl,[(i(!0),p(se,null,de(P.value,a=>{var u,S;return i(),p("div",{key:a.id,draggable:"true",class:R(["flex items-center  gap-3 p-[8px] cursor-pointer transition-colors rounded-[8px]",M.value.includes(a.id)?"border-2 border-[#5a2d7f]":"border border-border-input",c(T)==="dark"?"bg-bg-body hover:bg-bg-surface":"bg-bg-charcoal hover:bg-bg-body"]),onDragstart:B=>H(B,a,"backlog"),onDragend:t[2]||(t[2]=B=>j(B)),onClick:B=>e.$emit("open-ticket",a)},[l("input",{type:"checkbox",class:"custom-checkbox bg-bg-body border border-border-input flex-shrink-0",checked:M.value.includes(a.id),onClick:t[1]||(t[1]=ie(()=>{},["stop"])),onChange:B=>o(a.id,B)},null,40,Jl),l("div",Zl,[l("span",Xl,q(a.summary),1)]),l("div",Yl,[(a==null?void 0:a.assignee)==="Unassigned"?(i(),p("span",es,"UA")):(u=a==null?void 0:a.assignee)!=null&&u.u_profile_image?(i(),p("div",ts,[l("img",{src:a.assignee.u_profile_image,alt:""},null,8,ls)])):(i(),p("span",ss,q(c(jt)((S=a==null?void 0:a.assignee)==null?void 0:S.u_full_name)),1))])],42,Gl)}),128))])]))],34)]))}}),ns=ut(as,[["__scopeId","data-v-f9c3c8f2"]]),rs="data:image/svg+xml,%3csvg%20width='60'%20height='60'%20viewBox='0%200%2060%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20d='M9.375%2030C11.6402%2030%2013.4766%2028.1637%2013.4766%2025.8984C13.4766%2023.6332%2011.6402%2021.7969%209.375%2021.7969C7.10977%2021.7969%205.27344%2023.6332%205.27344%2025.8984C5.27344%2028.1637%207.10977%2030%209.375%2030Z'%20fill='%23AE2A19'/%3e%3cpath%20d='M26.25%2024.375C28.5152%2024.375%2030.3516%2022.5387%2030.3516%2020.2734C30.3516%2018.0082%2028.5152%2016.1719%2026.25%2016.1719C23.9848%2016.1719%2022.1484%2018.0082%2022.1484%2020.2734C22.1484%2022.5387%2023.9848%2024.375%2026.25%2024.375Z'%20fill='%23BF63F3'/%3e%3cpath%20d='M15.3931%2035.8594H11.0159V33.0938C9.93587%2033.3387%208.81469%2033.3387%207.73465%2033.0938V35.8594H1.87528C1.55115%2035.8601%201.2345%2035.9568%200.965283%2036.1373C0.696064%2036.3178%200.486343%2036.574%200.362583%2036.8736C0.238824%2037.1731%200.206573%2037.5027%200.269899%2037.8205C0.333226%2038.1384%200.489292%2038.4304%200.718404%2038.6597L7.05872%2045L0.718404%2051.3403C0.489292%2051.5696%200.333226%2051.8616%200.269899%2052.1795C0.206573%2052.4973%200.238824%2052.8269%200.362583%2053.1264C0.486343%2053.426%200.696064%2053.6822%200.965283%2053.8627C1.2345%2054.0432%201.55115%2054.1399%201.87528%2054.1406H15.3931L21.7503%2045L15.3931%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M34.4562%2035.8594H27.8937V27.4688C26.8137%2027.7138%2025.6925%2027.7138%2024.6125%2027.4688V35.8594H19.3896L25.7487%2045L19.3896%2054.1406H34.4562L40.8143%2045L34.4562%2035.8594Z'%20fill='%2382B536'/%3e%3cpath%20d='M43.8281%2019.6875H55.3125C55.7475%2019.6873%2056.1647%2019.5143%2056.4723%2019.2067C56.7799%2018.8991%2056.9529%2018.4819%2056.9531%2018.0469V9.375C56.9529%208.93996%2056.7799%208.5228%2056.4723%208.21518C56.1647%207.90755%2055.7475%207.73462%2055.3125%207.73438H43.8281V7.5C43.8281%207.06488%2043.6553%206.64758%2043.3476%206.3399C43.0399%206.03223%2042.6226%205.85938%2042.1875%205.85938C41.7524%205.85938%2041.3351%206.03223%2041.0274%206.3399C40.7197%206.64758%2040.5469%207.06488%2040.5469%207.5V32.5781H43.8281V19.6875Z'%20fill='%23FCA700'/%3e%3cpath%20d='M59.2843%2043.8403L51.7843%2036.3403C51.6322%2036.1878%2051.4514%2036.0668%2051.2524%2035.9842C51.0534%2035.9017%2050.8401%2035.8593%2050.6246%2035.8594H38.4521L44.8121%2045L38.4531%2054.1406H50.6246C50.8401%2054.1407%2051.0534%2054.0983%2051.2524%2054.0158C51.4514%2053.9332%2051.6322%2053.8122%2051.7843%2053.6597L59.2843%2046.1597C59.4368%2046.0075%2059.5577%2045.8267%2059.6402%2045.6277C59.7228%2045.4287%2059.7652%2045.2154%2059.7652%2045C59.7652%2044.7846%2059.7228%2044.5713%2059.6402%2044.3723C59.5577%2044.1733%2059.4368%2043.9925%2059.2843%2043.8403Z'%20fill='%2382B536'/%3e%3c/g%3e%3c/svg%3e",os={key:0,class:"overflow-y-auto h-[calc(100%-50px)] tickets-scroll"},is={class:"flex flex-col flex-1 gap-[4px] min-w-0 me-1"},ds=["onDragstart","onClick"],us=["checked","onChange"],cs={class:"flex items-center text-[14px] font-sans font-medium capitalize text-text-secondary flex-1 min-w-0"},ps={class:"truncate"},fs={class:"flex-shrink-0"},vs={key:0,class:"flex justify-center text-gray-500 items-center text-[11px] aspect-square w-[24px] h-[24px] bg-bg-body rounded-full border-border-input border-2"},ms={key:1,class:"w-6 h-6 rounded-full"},gs=["src"],bs={key:2,class:"text-[11px] aspect-square w-[24px] flex justify-center items-center h-[24px] bg-accent/30 text-accent border-accent border rounded-full"},xs={key:1,class:"empty-state flex flex-col justify-center items-center border-dashed border-3 p-2 border-border h-[calc(100%-50px)] min-h-0"},ys=Ce({__name:"SprintCard",props:{sprint:{},sprintId:{},searchQuery:{},checkedSprintAll:{type:Boolean}},emits:["edit-sprint","toggle-start","open-ticket","move-selected-to-backlog","delete-selected-sprint","refresh"],setup(v,{emit:d}){const{theme:T}=vt(),w=v,U=d,h=_([]),n=_([]);z(()=>w.sprint&&w.sprint.tickets,k=>{h.value=[...k||[]];const o=new Set(h.value.map(e=>e.id));n.value=n.value.filter(e=>o.has(e))},{immediate:!0,deep:!0});const $=V(()=>{var o;const k=((o=w.searchQuery)==null?void 0:o.toLowerCase())||"";return k?h.value.filter(e=>{var a;const t=((a=e.assignee)==null?void 0:a.u_full_name)??"";return e.key.toLowerCase().includes(k)||e.summary.toLowerCase().includes(k)||t.toLowerCase().includes(k)}):h.value}),I=_(!1),D=_([]),{mutate:O}=Wt({onSuccess:()=>{Ee.success("Card moved to sprint successfully"),U("refresh")},onError:k=>{Ee.error("Failed to move card: "+(k.message||"Unknown error"))}});function N(k,o,e,t){var B;const a=n.value.includes(o.id)?[...n.value]:[o.id],u=a.map(f=>h.value.find(C=>C.id===f)).filter(Boolean);D.value=a;const S=JSON.stringify({id:o.id,ids:a,from:e,sprintId:t,ticket:o,tickets:u});(B=k.dataTransfer)==null||B.setData("text/plain",S),k.dataTransfer&&(k.dataTransfer.effectAllowed="move")}function M(k){var o;I.value=!1,((o=k.dataTransfer)==null?void 0:o.dropEffect)!=="none"&&D.value.length&&(h.value=h.value.filter(e=>!D.value.includes(e.id)),n.value=n.value.filter(e=>!D.value.includes(e))),D.value=[]}function P(){I.value=!0}function E(){I.value=!1}function H(k){var o;k.preventDefault(),I.value=!1;try{const e=(o=k.dataTransfer)==null?void 0:o.getData("text/plain");if(!e)return;const t=JSON.parse(e);if(t.from!=="backlog")return;const u=(t.tickets&&t.tickets.length?t.tickets:t.ticket?[t.ticket]:[]).filter(Boolean).filter(S=>!h.value.some(B=>B.id===S.id));if(!u.length)return;h.value.push(...u),u.forEach(S=>{O({id:w.sprintId,payload:{card_ids:[S.id],priority:(S.priority||"Medium").toLowerCase(),story_points:S.storyPoints||0}})})}catch(e){console.error("Drop error:",e)}}function j(k,o){o?n.value.includes(k)||n.value.push(k):n.value=n.value.filter(e=>e!==k)}function Q(k,o){const e=o.target.checked;j(k,e)}return z(()=>w.checkedSprintAll,k=>{k?(n.value=$.value.map(o=>o.id),console.log($.value)):n.value=[]}),(k,o)=>(i(),p("div",{class:R(["h-full min-h-0 px-2",c(T)==="dark"?"bg-bg-surface":"bg-bg-surface/30"])},[l("div",{class:R([I.value?"ring-2 ring-blue-400 rounded-lg":"","h-full box-border"]),onDragover:o[2]||(o[2]=ie(()=>{},["prevent"])),onDragenter:P,onDragleave:E,onDrop:H},[$.value.length>0&&k.sprint?(i(),p("div",os,[l("div",is,[(i(!0),p(se,null,de($.value,e=>{var t,a;return i(),p("div",{key:e.id,draggable:"true",class:R(["flex items-center  gap-3 p-[8px] cursor-pointer transition-colors rounded-[8px]",n.value.includes(e.id)?"border-2 border-[#5a2d7f]":"border border-border-input",c(T)==="dark"?"bg-bg-body hover:bg-bg-surface":"bg-bg-charcoal hover:bg-bg-body"]),onDragstart:u=>N(u,e,"sprint",k.sprint.id),onDragend:o[1]||(o[1]=u=>M(u)),onClick:u=>k.$emit("open-ticket",e)},[l("input",{type:"checkbox",class:R(["custom-checkbox border border-border-input flex-shrink-0",c(T)==="dark"?"bg-bg-charcoal":"bg-bg-body "]),checked:n.value.includes(e.id),onClick:o[0]||(o[0]=ie(()=>{},["stop"])),onChange:u=>Q(e.id,u)},null,42,us),l("div",cs,[l("span",ps,q(e.summary),1)]),l("div",fs,[(e==null?void 0:e.assignee)=="Unassigned"?(i(),p("span",vs,"UA")):(t=e.assignee)!=null&&t.u_profile_image?(i(),p("div",ms,[l("img",{src:e.assignee.u_profile_image,alt:""},null,8,gs)])):(i(),p("span",bs,q(c(jt)(((a=e.assignee)==null?void 0:a.u_full_name)??"")),1))])],42,ds)}),128))])])):(i(),p("div",xs,o[3]||(o[3]=[pl('<img src="'+rs+'" class="mb-4" alt="backlog-plan" data-v-f3c6afa6><h6 class="text-sm text-text-primary font-semibold mb-1 text-center" data-v-f3c6afa6> Plan your sprint </h6><p class="text-sm text-text-primary/90 mb-3 max-w-120 text-center" data-v-f3c6afa6> Drag work items from the <span class="font-bold" data-v-f3c6afa6>Backlog</span> section or create new ones to plan the work for this sprint. Select <span class="font-bold" data-v-f3c6afa6>Start sprint</span> when you&#39;re ready. </p>',3)])))],34)],2))}}),_s=ut(ys,[["__scopeId","data-v-f3c6afa6"]]),hs={class:"px-6 gap-4 bg-bg-input pt-5 pb-8"},ks={class:"mt-3"},Ss={class:"flex justify-end gap-2 p-6 sticky bottom-0 bg-bg-input border-t border-border"},ws=Ce({__name:"SprintModal",props:{modelValue:{type:Boolean,default:!1},sprint:{},creatingSprint:{type:Boolean}},emits:["update:modelValue","save","close"],setup(v,{emit:d}){const T=d,w=v,U=V({get:()=>w.modelValue,set:P=>T("update:modelValue",P)}),h=Se({name:"",sprintType:"",description:""}),n=Se({name:!1,sprintType:!1,description:!1}),$=V(()=>n.name&&!String(h.name||"").trim()?"Name is required":""),I=V(()=>!!String(h.name||"").trim()&&!$.value);function D(){U.value=!1,T("close")}function O(){n.name=!0,I.value&&T("save",{name:String(h.name||"").trim(),value:String(h.sprintType||"").trim(),description:String(h.description||"").trim()})}function N(){n.name=!1,n.sprintType=!1,n.description=!1}z(()=>w.sprint,P=>{if(!P){h.name="";return}h.name=P.name??(P==null?void 0:P.title)??"",h.sprintType=P.sprintType??(P==null?void 0:P.sprintType)??"",h.description=P.description??"",N()},{immediate:!0});const M=[{title:"Milestone",_id:"milestone",dot:"#2e9bda"},{title:"Sprint",_id:"sprint",dot:"#7d68c8"},{title:"Huddle",_id:"huddle",dot:"#eea832"}];return(P,E)=>(i(),te(ct,{modelValue:U.value,"onUpdate:modelValue":E[5]||(E[5]=H=>U.value=H),modalClass:"!py-0",size:"md"},{default:X(()=>[E[8]||(E[8]=l("div",{class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-input pb-4"},[l("h2",{class:"text-xl font-semibold"},"Add New Sprint")],-1)),l("div",hs,[A(pt,{class:"rounded-1",modelValue:h.name,"onUpdate:modelValue":E[0]||(E[0]=H=>h.name=H),label:"Name",placeholder:"Sprint 1",error:!!$.value,message:$.value,onBlur:E[1]||(E[1]=H=>n.name=!0)},null,8,["modelValue","error","message"]),A(Ye,{class:"rounded-1 mt-3",modelValue:h.sprintType,"onUpdate:modelValue":E[2]||(E[2]=H=>h.sprintType=H),label:"Sprint Type",options:M,error:!!$.value,message:$.value,onBlur:E[3]||(E[3]=H=>n.name=!0)},null,8,["modelValue","error","message"]),l("div",ks,[A(Dl,{modelValue:h.description,"onUpdate:modelValue":E[4]||(E[4]=H=>h.description=H),label:"Description",placeholder:"Sprint description...",type:"textarea",rows:4},null,8,["modelValue"])]),E[6]||(E[6]=l("div",null,null,-1))]),l("div",Ss,[A(ve,{variant:"secondary",onClick:D},{default:X(()=>E[7]||(E[7]=[ae("Cancel")])),_:1,__:[7]}),A(ve,{variant:"primary",disabled:!I.value,onClick:O},{default:X(()=>[ae(q(P.creatingSprint?"Saving...":"Save"),1)]),_:1},8,["disabled"])])]),_:1,__:[8]},8,["modelValue"]))}}),Cs="/assets/filter-JX25xO5j.svg",$s={class:"px-6 grid grid-cols-2 gap-4 bg-bg-input pt-5"},Ds={class:"flex flex-col col-span-2"},Ts={class:"flex flex-col col-span-2"},Vs={class:"flex gap-1 flex-col col-span-2 sm:col-span-1"},Ms={key:0,class:"text-xs text-red-500"},Ls={class:"flex gap-1 flex-col col-span-2 sm:col-span-1"},Es={key:0,class:"text-xs text-red-500"},Bs={class:"flex flex-col col-span-2"},Is={class:"flex flex-col col-span-2"},Ps={class:"bg-bg-body wfull px-4 py-3 rounded-lg text-xs text-text-secondary"},As={class:"flex justify-end gap-2 p-6 sticky bottom-0 bg-bg-input"},Us=Ce({__name:"StartSprintModal",props:{modelValue:{type:Boolean,default:!1},sprint:{},creatingSprint:{type:Boolean}},emits:["update:modelValue","save","close"],setup(v,{emit:d}){const T=d,w=v,U=[{_id:1,title:"1 Week"},{_id:2,title:"2 Weeks"},{_id:3,title:"3 Weeks"},{_id:4,title:"4 Weeks"},{_id:5,title:"Custom"}],h=V({get:()=>w.modelValue,set:e=>T("update:modelValue",e)}),n=Se({goal:"",start:new Date().toISOString().slice(0,10),end:"",sprint_name:"",duration:null}),$=Se({start:!1,end:!1}),I=V(()=>!n.start&&$.start?"Start date is required":""),D=V(()=>{if(!n.end&&$.end)return"End date is required";if(n.start&&n.end){const e=j(n.start),t=j(n.end);if(Number.isFinite(e)&&Number.isFinite(t)&&t<e)return"End date cannot be before start date"}return""}),O=V(()=>!I.value&&!D.value);function N(e){n.start=e||"",$.start=!0}function M(e){n.end=e||"",$.end=!0}function P(){h.value=!1,T("close")}function E(){$.start=!0,$.end=!0,O.value&&(T("save",{title:n.sprint_name||"new sprint",duration:String(o.value)||null,start:n.start||"",end:n.end||"",goal:n.goal??""}),h.value=!1,T("close"))}function H(){$.start=!1,$.end=!1}function j(e){return e?new Date(`${e}T00:00:00`).getTime():NaN}const Q=V(()=>n.duration===5);z(()=>n.duration,e=>{if(!e)return;const t=typeof e=="object"?e._id:e;if(t!==5&&n.start){const a=k(n.start,t*7);n.end=a}}),z(()=>n.start,e=>{e&&(n.duration&&n.duration!==5&&(n.end=k(n.start,n.duration*7)),n.end&&j(n.end)<j(n.start)&&(n.end=n.start))});function k(e,t){const a=new Date(e);return a.setDate(a.getDate()+t),a.toISOString().slice(0,10)}const o=V(()=>!n.start||!n.end?0:n.duration!==5?n.duration*7:(j(n.end)-j(n.start))/864e5);return z(()=>w.sprint,e=>{if(!e){n.start=new Date().toISOString().slice(0,10),n.end="",n.sprint_name="",n.goal="",H();return}n.goal=e.goal??"",n.start=e.start??new Date().toISOString().slice(0,10),n.end=e.end??"",n.sprint_name=e.title??"",H()},{immediate:!0}),(e,t)=>(i(),te(ct,{modelValue:h.value,"onUpdate:modelValue":t[3]||(t[3]=a=>h.value=a),modalClass:"!py-0",size:"md"},{default:X(()=>[l("div",{class:"sticky top-0 z-10 flex justify-between items-center py-6 px-6 border-b border-border bg-bg-input"},[t[5]||(t[5]=l("h2",{class:"text-xl font-semibold"},"Start Sprint",-1)),l("span",{onClick:P,class:"text-sm text-text-secondary cursor-pointer"},t[4]||(t[4]=[l("i",{class:"fa-solid fa-xmark text-text-primary text-[19px]"},null,-1)]))]),l("div",$s,[l("div",Ds,[A(pt,{modelValue:n.sprint_name,"onUpdate:modelValue":t[0]||(t[0]=a=>n.sprint_name=a),label:"Sprint Name",placeholder:"Enter sprint name",size:"md",class:"rounded-1"},null,8,["modelValue"])]),l("div",Ts,[A(Ye,{modelValue:n.duration,"onUpdate:modelValue":t[1]||(t[1]=a=>n.duration=a),options:U,label:"Duration",placeholder:"Select duration"},null,8,["modelValue"])]),l("div",Vs,[t[7]||(t[7]=l("label",{class:"text-sm font-medium"},"Start date",-1)),l("div",{class:R(["border relative flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",I.value?"border-red-500":""])},[A(et,{placeholder:"Set start date",class:"w-full z-1","model-value":n.start,"emit-as":"ymd","onUpdate:modelValue":N},null,8,["model-value"]),t[6]||(t[6]=l("i",{class:"fa-regular fa-calendar absolute right-2 top-3 z-0"},null,-1))],2),I.value?(i(),p("p",Ms,q(I.value),1)):G("",!0)]),l("div",Ls,[t[8]||(t[8]=l("label",{class:"text-sm font-medium"},"End date",-1)),l("div",{class:R(["border relative flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",D.value?"border-red-500":""])},[A(et,{placeholder:"Set end date",class:"w-full","model-value":n.end,"emit-as":"ymd",disabled:!Q.value,"onUpdate:modelValue":M,"min-date":n.start},null,8,["model-value","disabled","min-date"]),l("i",{class:R(["fa-regular fa-calendar absolute right-2 top-3 z-0",{"text-text-secondary/30 pointer-events-none":!Q.value,"text-text-primary":Q.value}])},null,2)],2),D.value?(i(),p("p",Es,q(D.value),1)):G("",!0)]),l("div",Bs,[t[9]||(t[9]=l("label",{class:"text-sm font-medium pb-1"},"Goal (optional)",-1)),Be(l("textarea",{"onUpdate:modelValue":t[2]||(t[2]=a=>n.goal=a),class:"w-full text-sm rounded-md border border-border px-3 py-2 bg-bg-input",rows:"2",placeholder:"Ship onboarding flow"},null,512),[[zt,n.goal]])]),l("div",Is,[l("p",Ps," Duration: "+q(n.start?o.value+" days":""),1)])]),l("div",As,[A(ve,{variant:"secondary",onClick:P},{default:X(()=>t[10]||(t[10]=[ae("Cancel")])),_:1,__:[10]}),A(ve,{variant:"primary",disabled:!O.value,onClick:E},{default:X(()=>[ae(q(e.creatingSprint?"Starting...":"Start"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue"]))}}),Os={class:"sticky top-0 z-10 flex flex-col items-start pt-6 px-6 border-b border-border bg-bg-body pb-4 mb-4"},qs={class:"text-sm text-text-secondary mt-1"},Ns={class:"flex items-center gap-2 mt-4 w-full"},Hs={class:"flex items-center gap-2 flex-1"},js={class:"px-6 min-h-[400px]"},zs={key:0},Fs={key:0,class:"flex items-center justify-center py-12"},Rs={key:1,class:"text-center py-12 text-text-secondary"},Qs={key:2,class:"grid grid-cols-2 gap-3"},Ks=["onClick"],Ws={class:"flex items-center gap-3"},Gs={class:"w-10 h-10 rounded-lg bg-bg-input flex items-center justify-center group-hover:bg-primary/10 transition-colors"},Js={class:"font-medium"},Zs={key:1},Xs={key:0,class:"flex items-center justify-center py-12"},Ys={key:1,class:"text-center py-12 text-text-secondary"},ea={key:2,class:"grid grid-cols-2 gap-3"},ta=["onClick"],la={class:"flex items-center gap-3"},sa={class:"w-10 h-10 rounded-lg bg-bg-input flex items-center justify-center group-hover:bg-primary/10 transition-colors"},aa={class:"font-medium"},na={key:2},ra={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},oa={key:0,class:"flex flex-col"},ia={class:"flex gap-1 flex-col"},da={key:0,class:"text-xs text-red-500"},ua={class:"flex gap-1 flex-col"},ca={key:0,class:"text-xs text-red-500"},pa={class:"flex flex-col gap-1"},fa={class:"mt-2"},va={class:"mt-4"},ma={key:0,class:"text-xs text-red-500 mt-1 px-1"},ga={class:"flex justify-between gap-2 p-6 mt-8 sticky bottom-0 bg-bg-body border-t border-border"},ba={key:1},xa={class:"flex gap-2"},ya=Ce({__name:"CreateBacklogTicketWithModuleSelection",props:{modelValue:{type:Boolean,default:!1},listId:{},selectedVariable:{}},emits:["update:modelValue","created"],setup(v,{emit:d}){const T=d,w=v,U=ft(),{workspaceId:h}=Ft(),n=_(1),$=_(null),I=_(null),{data:D,isLoading:O}=fl(h.value),N=V(()=>{var g;return((g=D.value)==null?void 0:g.modules)||[]}),{data:M,isFetching:P,refetch:E}=Rt({workspace_module_id:$,workspace_id:h},{enabled:V(()=>!!$.value)});z(()=>$.value,()=>{E()});const H=V(()=>M.value||[]),{data:j}=vl(h.value),{data:Q}=Qt(h.value,$,{enabled:V(()=>!!$.value)}),{mutate:k,isPending:o}=ml({onSuccess:()=>{Y(),U.invalidateQueries({queryKey:["sheet-list"]}),U.invalidateQueries({queryKey:["backlog-list"]}),e.value=!1}}),e=V({get:()=>w.modelValue,set:g=>T("update:modelValue",g)}),t=V(()=>{switch(n.value){case 1:return"Select a module to create the ticket in";case 2:return"Select a sheet within the module";case 3:return"Provide the ticket details below and click Add Ticket";default:return""}}),a=V(()=>((Q==null?void 0:Q.value)??[]).filter(g=>{var m;return((m=g==null?void 0:g.type)==null?void 0:m.title)==="Select"})),u=g=>g.map(m=>({_id:m,title:m})),S=V(()=>((j==null?void 0:j.value)??[]).map(g=>{var m;return{_id:g._id,title:((m=g==null?void 0:g.variables)==null?void 0:m["lane-title"])??String(g._id)}})),B=g=>g.slug,f=Se({title:"",description:"",startDate:null,endDate:null,lane_id:null,assignee:null,variables:{}});z(a,g=>{for(const m of g){const x=B(m);x in f.variables||(f.variables[x]=null)}},{immediate:!0});const C=Se({title:!1,description:!1,startDate:!1,endDate:!1,lane:!1}),le=V(()=>!!f.title.trim()&&!!f.lane_id&&!!f.startDate&&!!f.endDate&&!ye.value&&!ge.value&&!pe.value&&!b.value&&!L.value);function J(g){f.startDate=g,C.startDate=!0}function ce(g){f.endDate=g,C.endDate=!0}function Ie(g){f.lane_id=g,C.lane=!0}function $e(g){f.assignee=g}function ue(g){$.value=g._id,n.value=2}function re(g){I.value=g._id,n.value=3}function De(){n.value>1&&n.value--}function Pe(){e.value=!1,Y()}function Y(){n.value=1,$.value=null,I.value=null,f.title="",f.description="",f.startDate=null,f.endDate=null,f.lane_id=null,f.assignee=null,f.variables={},C.title=!1,C.description=!1,C.startDate=!1,C.endDate=!1,C.lane=!1}const me=V(()=>{var g;return(g=Q==null?void 0:Q.value)==null?void 0:g.find(m=>(m==null?void 0:m._id)==w.selectedVariable)}),ye=V(()=>C.title&&!f.title.trim()?"Title is required":""),ge=V(()=>C.startDate?f.startDate?"":"Start date is required":""),pe=V(()=>C.endDate?f.endDate?f.startDate&&f.endDate&&f.endDate<f.startDate?"End date cannot be before start date":"":"End date is required":""),b=V(()=>C.lane?f.lane_id?"":"Lane is required":""),L=V(()=>C.description&&!f.description.trim()?"Description is required":""),ee=new Date().toISOString().split("T")[0];function fe(){var m,x;if(C.title=!0,C.lane=!0,C.description=!0,C.startDate=!0,C.endDate=!0,!le.value||o.value)return;const g={sheet_list_id:w.listId,workspace_id:h.value,sheet_id:I.value,workspace_lane_id:f.lane_id,variables:{...f.variables,[`${(m=me.value)==null?void 0:m.slug}`]:w.listId,"card-title":f.title.trim(),"card-description":f.description.trim(),"start-date":f.startDate,"end-date":f.endDate},seat_id:((x=f.assignee)==null?void 0:x._id)??null,createdAt:new Date().toISOString()};k(g)}return z(()=>f.title,g=>{g!=null&&g.trim()&&C.title&&(C.title=!1)}),z(()=>f.lane_id,g=>{g&&C.lane&&(C.lane=!1)}),z(()=>f.startDate,g=>{g&&C.startDate&&(C.startDate=!1)}),z(()=>f.endDate,g=>{g&&C.endDate&&(C.endDate=!1)}),z(()=>f.description,g=>{g!=null&&g.trim()&&C.description&&(C.description=!1)}),(g,m)=>(i(),te(ct,{modelValue:e.value,"onUpdate:modelValue":m[5]||(m[5]=x=>e.value=x),modalClass:"!py-0",size:"lg"},{default:X(()=>[l("div",Os,[m[6]||(m[6]=l("h2",{class:"text-xl font-semibold"},"Create Backlog Ticket",-1)),l("p",qs,q(t.value),1),l("div",Ns,[(i(),p(se,null,de(3,x=>l("div",{key:x,class:"flex items-center flex-1"},[l("div",Hs,[l("div",{class:R(["h-1 flex-1 rounded-full transition-colors",n.value>=x?"bg-primary":"bg-border"])},null,2)])])),64))])]),l("div",js,[n.value===1?(i(),p("div",zs,[m[8]||(m[8]=l("h3",{class:"text-lg font-medium mb-4"},"Select Module",-1)),c(O)?(i(),p("div",Fs,m[7]||(m[7]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):!N.value||N.value.length===0?(i(),p("div",Rs," No modules available ")):(i(),p("div",Qs,[(i(!0),p(se,null,de(N.value,x=>{var F,Z,be,_e,he;return i(),p("button",{key:x._id,onClick:Ae=>ue(x),class:R(["p-4 border rounded-lg hover:border-primary transition-all text-left group",$.value===x._id?"border-primary bg-primary/5":"border-border"])},[l("div",Ws,[l("div",Gs,[l("i",{class:R([`${(Z=(F=x==null?void 0:x.variables)==null?void 0:F["module-icon"])==null?void 0:Z.prefix} ${(_e=(be=x==null?void 0:x.variables)==null?void 0:be["module-icon"])==null?void 0:_e.iconName}`,"text-lg"])},null,2)]),l("div",null,[l("p",Js,q(((he=x.variables)==null?void 0:he["module-title"])||"Untitled"),1)])])],10,Ks)}),128))]))])):n.value===2?(i(),p("div",Zs,[m[10]||(m[10]=l("h3",{class:"text-lg font-medium mb-4"},"Select Sheet",-1)),c(P)?(i(),p("div",Xs,m[9]||(m[9]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1)]))):!H.value||H.value.length===0?(i(),p("div",Ys," No sheets available for this module ")):(i(),p("div",ea,[(i(!0),p(se,null,de(H.value,x=>{var F,Z;return i(),p("button",{key:x._id,onClick:be=>re(x),class:R(["p-4 border rounded-lg hover:border-primary transition-all text-left group",I.value===x._id?"border-primary bg-primary/5":"border-border"])},[l("div",la,[l("div",sa,[l("i",{class:R(`${(F=x==null?void 0:x.variables["sheet-icon"])==null?void 0:F.prefix} ${(Z=x==null?void 0:x.variables["sheet-icon"])==null?void 0:Z.iconName} text-lg`)},null,2)]),l("div",null,[l("p",aa,q((x==null?void 0:x.variables["sheet-title"])||"Untitled Sheet"),1)])])],10,ta)}),128))]))])):n.value===3?(i(),p("div",na,[m[14]||(m[14]=l("h3",{class:"text-lg font-medium mb-4"},"Ticket Details",-1)),l("div",ra,[A(pt,{modelValue:f.title,"onUpdate:modelValue":m[0]||(m[0]=x=>f.title=x),label:"Ticket Title",placeholder:"e.g., Implement real-time notifications",error:!!ye.value,message:ye.value,onBlur:m[1]||(m[1]=x=>C.title=!0)},null,8,["modelValue","error","message"]),S.value.length>0?(i(),p("div",oa,[A(Ye,{size:"md",label:"Lane",options:S.value,placeholder:"Select lane",allowCustom:!1,"model-value":f.lane_id,"onUpdate:modelValue":Ie,error:!!b.value,message:b.value},null,8,["options","model-value","error","message"])])):G("",!0),(i(!0),p(se,null,de(a.value,x=>Be((i(),te(Ye,{size:"md",key:B(x),modelValue:f.variables[x.slug],"onUpdate:modelValue":F=>f.variables[x.slug]=F,options:u(x.data),label:x.title,placeholder:"Select value",allowCustom:!0},null,8,["modelValue","onUpdate:modelValue","options","label"])),[[it,(x==null?void 0:x._id)!=g.selectedVariable]])),128)),l("div",ia,[m[11]||(m[11]=l("label",{class:"text-sm"},"Start date",-1)),l("div",{class:R(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",ge.value?"border-red-500":""])},[A(et,{placeholder:"Set start date",class:"w-full","model-value":f.startDate,"emit-as":"ymd","onUpdate:modelValue":J,"min-date":c(ee)},null,8,["model-value","min-date"])],2),ge.value?(i(),p("p",da,q(ge.value),1)):G("",!0)]),l("div",ua,[m[12]||(m[12]=l("label",{class:"text-sm"},"End date",-1)),l("div",{class:R(["border flex items-center border-border h-10 px-2 bg-bg-input rounded-lg",pe.value?"border-red-500":""])},[A(et,{placeholder:"Set end date",class:"w-full","model-value":f.endDate,"emit-as":"ymd","onUpdate:modelValue":ce,"min-date":f.startDate||c(ee)},null,8,["model-value","min-date"])],2),pe.value?(i(),p("p",ca,q(pe.value),1)):G("",!0)]),l("div",pa,[m[13]||(m[13]=l("label",{class:"text-sm"},"Assignee",-1)),l("div",fa,[A(gl,{name:!0,workspaceId:c(h),onAssign:$e,onUnassign:m[2]||(m[2]=x=>$e(null)),assigneeId:f.assignee,seat:null,disabled:!1,skipPermissionCheck:!0,class:"w-full"},null,8,["workspaceId","assigneeId"])])])]),l("div",va,[A(bl,{label:"Description",placeholder:"What needs to be done, acceptance criteria, links…",modelValue:f.description,"onUpdate:modelValue":m[3]||(m[3]=x=>f.description=x),onBlur:m[4]||(m[4]=x=>C.description=!0)},null,8,["modelValue"]),L.value?(i(),p("p",ma,q(L.value),1)):G("",!0)])])):G("",!0)]),l("div",ga,[n.value>1?(i(),te(ve,{key:0,variant:"secondary",onClick:De},{default:X(()=>m[15]||(m[15]=[ae("Back")])),_:1,__:[15]})):(i(),p("div",ba)),l("div",xa,[A(ve,{variant:"secondary",onClick:Pe},{default:X(()=>m[16]||(m[16]=[ae("Cancel")])),_:1,__:[16]}),n.value===3?(i(),te(ve,{key:0,variant:"primary",disabled:!le.value||c(o),onClick:fe},{default:X(()=>[ae(q(c(o)?"Adding…":"Add Ticket"),1)]),_:1},8,["disabled"])):G("",!0)])])]),_:1},8,["modelValue"]))}}),_a={class:"flex gap-2 flex-auto overflow-y-auto"},ha={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex"},ka={class:"flex overflow-x-auto gap-3 p-4"},Sa={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},wa=Ce({__name:"ActiveSprint",props:{sptint_id:{},searchQuery:{}},setup(v){const d=v,T=Ge(()=>Je(()=>import("./CreateTaskModal-GpnLG5sz.js"),__vite__mapDeps([0,1,2,3]))),w=Ge(()=>Je(()=>import("./ConfirmDeleteModal-4rCVA3of.js"),__vite__mapDeps([4,5,2,3]))),U=Ge(()=>Je(()=>import("./SidePanel-UXeiIAND.js"),__vite__mapDeps([6,2,3,7]))),h=Ge(()=>Je(()=>import("./KanbanBoard-BwQOo3WW.js"),__vite__mapDeps([8,9,2,3,10,5,11]))),n=kl(),{workspaceId:$,moduleId:I}=Ft(),{data:D}=Rt({workspace_id:$,workspace_module_id:I}),O=V(()=>{var b;return D.value?(b=D.value[0])==null?void 0:b._id:""}),N=_(O),{data:M}=Qt($.value,I.value,N),P=ft(),{mutate:E,isPending:H}=xl({onSuccess:()=>{P.invalidateQueries({queryKey:["sheet-list"]}),Ie.value="",ue.value=!1,ce.value=!1,ue.value=!1}}),j=b=>{E({workspace_id:$.value,module_id:I.value,variable_id:k.value,value:b})},Q=V(()=>{var b;return M.value?(b=M.value[0])==null?void 0:b._id:""}),k=_(Q),o=yl(),e=V(()=>d.sptint_id),{data:t,isPending:a}=Pl(e),u=_(!1),S=_(),B=b=>{S.value=b},f=_l(),C=hl();function le(b){b.type=="column"?f.mutate({payload:{workspace_id:$.value,workspace_module_id:I.value,variable_id:k.value,moved_value:b.meta.id,new_index:b.meta.newIndex}}):C.mutate({payload:{workspace_id:$.value,card_id:b.meta.moved._id,group_value:b.meta.fromColumnId,group_variable_id:k.value,new_index:b.meta.newIndex,sheet_id:N.value}})}const J=b=>{};z(D,b=>{var L;(b==null?void 0:b.length)>0&&(N.value=(L=b[0])==null?void 0:L._id)});const ce=_(!1),Ie=_(""),$e=b=>{E({workspace_id:n.params.id,module_id:n.params.module_id,new_value:b.title,value:b.oldTitle,variable_id:k.value})},ue=_(!1),re=_(),De=()=>{E({value:re.value.title,workspace_id:$.value,module_id:I.value,newValue:re.value.title,variable_id:k.value,is_trash:!0})},Pe=b=>{ue.value=!0,re.value=b},Y=b=>{u.value=!0,re.value=b},me=V(()=>d.searchQuery),ye=_("");z(me,Ll.debounce(b=>{ye.value=b},200));const ge=V(()=>{const b=t.value.flatMap(L=>L.cards.map(ee=>({...ee,columnId:L.title})));return new Ml(b,{keys:["card-title","card-description","card-key"],threshold:.3})}),pe=V(()=>{if(!me.value)return t.value;const b=ge.value.search(me.value).map(L=>L.item);return t.value.map(L=>({...L,cards:b.filter(ee=>ee.columnId===L.title)}))});return(b,L)=>{var ee,fe,g,m,x;return i(),p("div",_a,[l("div",ha,[Be(A(Kt,null,null,512),[[it,c(a)]]),Be(l("div",ka,[A(c(h),{onOnPlus:Y,"onDelete:column":L[0]||(L[0]=F=>Pe(F)),"onUpdate:column":L[1]||(L[1]=F=>$e(F)),onReorder:le,onAddColumn:j,"onSelect:ticket":B,board:pe.value,onOnBoardUpdate:J,variable_id:k.value,sheet_id:N.value},{"column-footer":X(F=>{var Z,be,_e,he,Ae;return[(be=(Z=c(o))==null?void 0:Z.transitions)!=null&&be.all_allowed&&!((Ae=(he=(_e=c(o))==null?void 0:_e.transitions)==null?void 0:he.all_allowed)!=null&&Ae.includes(F.column.title))&&c(o).transitions.currentColumn!=F.column.title?(i(),p("div",Sa," Disbale ( you can't drop here )")):G("",!0)]}),ticket:X(({ticket:F})=>[A(Vl,{selectedVar:k.value,onSelect:()=>{B(F)},ticket:F},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"])],512),[[it,!c(a)]])]),A(c(w),{onClick:L[2]||(L[2]=ie(()=>{},["stop"])),modelValue:ue.value,"onUpdate:modelValue":L[3]||(L[3]=F=>ue.value=F),title:"Delete List",itemLabel:"list",itemName:(ee=re.value)==null?void 0:ee.title,requireMatchText:(fe=re.value)==null?void 0:fe.title,confirmText:"Delete workspace",cancelText:"Cancel",size:"md",loading:c(H),onConfirm:De,onCancel:L[4]||(L[4]=()=>{ue.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),u.value?(i(),te(c(T),{selectedVariable:k.value,listId:(g=re.value)==null?void 0:g.title,sheet_id:N.value,key:"createTaskModalKey",modelValue:u.value,"onUpdate:modelValue":L[5]||(L[5]=F=>u.value=F),onSubmit:L[6]||(L[6]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):G("",!0),(m=S.value)!=null&&m._id?(i(),te(c(U),{key:1,details:S.value,onClose:L[7]||(L[7]=()=>{B({variables:{}})}),showPanel:!!((x=S.value)!=null&&x._id)},null,8,["details","showPanel"])):G("",!0)])}}}),Ca={class:"flex-auto flex-grow h-full min-h-0 bg-bg-card rounded-[6px] border border-border overflow-x-auto flex-col flex"},$a={key:2,class:"p-4 w-full min-w-0 box-border h-full min-h-0"},Da={class:"flex items-center justify-between"},Ta={class:"text-sm font-semibold flex gap-2 items-center"},Va={class:"flex items-center gap-2 relative",ref:"filterDropdownRef"},Ma={key:0,class:"flex items-center gap-2 overflow-x-auto no-scrollbar py-1"},La=["onClick"],Ea={key:1,class:"relative flex items-center gap-3"},Ba={class:"relative flex-shrink-0"},Ia={class:"flex items-center gap-2 truncate"},Pa=["src"],Aa={class:"truncate"},Ua={key:0,class:"absolute left-0 top-full mt-1 w-44 bg-white border border-gray-200 rounded-lg shadow-lg z-[9999]"},Oa={class:"flex flex-col"},qa=["onClick"],Na={class:"flex gap-2 overflow-x-auto no-scrollbar flex-1"},Ha=["onClick"],ja={key:0,class:"w-full h-full min-h-[250px] flex justify-center items-center"},za={class:"flex justify-between px-3"},Fa={class:"flex items-center gap-2 bg-transparent min-w-0 pe-2"},Ra=["onClick"],Qa={class:"flex items-center gap-2 max-w-full"},Ka={class:"flex items-center gap-2 max-w-full"},Wa={class:"truncate max-w-[160px]"},Ga={key:1,class:"absolute left-0 mt-2 w-60 bg-white border border-gray-200 rounded-xl shadow-lg z-50 max-h-64 overflow-y-auto overflow-x-hidden"},Ja={class:"relative flex-1"},Za=["onClick"],Xa=["onBlur","onKeyup"],Ya={class:"relative ml-2 flex gap-2"},en=["onClick"],tn=["onClick"],ln={class:"flex gap-3 items-center"},sn={class:"hidden sm:flex flex-1"},an={class:"gap-2 hidden lg:flex"},nn={key:0,class:"flex gap-2 lg:hidden"},rn=["title"],on=["disabled"],dn={key:0,class:"fixed inset-0 z-50 -top-30 flex items-center justify-center"},un={class:"bg-white rounded-lg w-11/12 max-w-md p-4"},cn={class:"flex items-center gap-2"},pn={key:0,class:"w-full h-full min-h-[250px] flex justify-center items-center"},Xe=400,fn=Ce({__name:"Plan",setup(v){const{theme:d}=vt(),T=_(!1),w=_(""),U=_(!1),h=_(!1),{canCreateCard:n}=Nt(),$=_(null),I=_(!1),D=_(!1),O=V(()=>M.value.value),N=[{label:"Milestone",value:"milestone",dot:"#2e9bda"},{label:"Sprint",value:"sprint",dot:"#7d68c8"},{label:"Huddle",value:"huddle",dot:"#eea832"}],M=_(N[0]),P=_(null),E=_(!1);Ze(P,()=>{E.value=!1});const H=()=>{T.value=!1},{workspaceId:j}=Ht(),Q=_(!1),{moveSelectedToSprint:k,moveSelectedToBacklog:o,deleteSelected:e,saveSprintMeta:t,toggleStartSprint:a}=zl(),{data:u,refetch:S}=dt(j,O,{}),{data:B}=Sl(j),f=V(()=>{var r;return((r=B.value)==null?void 0:r.modules.filter(s=>{var K;return((K=s==null?void 0:s.variables)==null?void 0:K["module-title"])!=="Pin"}))||[]});z(()=>O.value,(r,s)=>{r!==s&&S()});const{mutate:C,isPending:le}=Nl({onSuccess:()=>{lt.invalidateQueries({queryKey:["sprint-list"]}),ce.value=!1}}),J=_(null),ce=_(!1),Ie=()=>{var r;C((r=J.value)==null?void 0:r._id)},{mutate:$e,isPending:ue}=At({onSuccess:r=>{t({name:r.title}),console.log(r,"this is testing data"),re({id:b.value,payload:{title:r.title,start_date:r.start_date,end_date:r.end_date,goal:r.goal,duration:Number(r.duration_days)}}),fe.value=!1}}),{mutate:re,isPending:De}=ql({onSuccess:()=>{ee()}}),Pe=r=>{console.log("helo",J.value,r),$e({id:b.value,payload:{title:r.title,duration:r.duration,start_date:r.start,end_date:r.end,goal:r.goal}})},{data:Y,refetch:me}=Bl(j.value,O);z(()=>O.value,(r,s)=>{r!==s&&me()});const{refetch:ye,isPending:ge}=dt(j,O),pe=V(()=>{var r,s;return(s=(r=Y==null?void 0:Y.value)==null?void 0:r.sprints[0])==null?void 0:s._id}),b=_(pe.value);z(()=>pe.value,r=>{b.value=r}),z(()=>b.value,r=>{var s;J.value=((s=Y.value)==null?void 0:s.sprints.find(K=>K._id===r))||null});const{data:L,refetch:ee}=Ul(b),fe=_(!1),g=()=>{console.log(Z.value,"this is sprint"),fe.value=!0},{data:m,isPending:x,refetch:F}=Il(b);z(()=>b.value,()=>{ee()});const Z=V(()=>{var K,oe;const r=(K=m==null?void 0:m.value)==null?void 0:K.backlog_items;if(!r)return null;const s=(((oe=m==null?void 0:m.value)==null?void 0:oe.backlog_items)||[]).map(W=>{var Ne,He,je,ze,Fe;const xe=((Ne=W==null?void 0:W.card)==null?void 0:Ne.variables)||{},ke=((He=W==null?void 0:W.card)==null?void 0:He._id)||W.card_id;return{id:ke,key:xe["card-code"]||(ke==null?void 0:ke.slice(-6))||"PRJ-?",summary:xe["card-title"]||"(untitled)",type:"Story",status:_e(String(xe["card-status"]||"").trim()),assignee:((ze=(je=W==null?void 0:W.card)==null?void 0:je.assigned_to)==null?void 0:ze.name)||"Unassigned",storyPoints:Number(W.story_points||0),priority:he(String(xe.priority||"").trim()),createdAt:((Fe=W==null?void 0:W.card)==null?void 0:Fe.created_at)||new Date().toISOString(),description:xe["card-description"]||""}});return{id:r._id,name:r.title||"Sprint 1",title:r.title,goal:"",start:"",end:"",started:!1,tickets:s}});function be(r){b.value=r._id,qe.value=!1}function _e(r){const s=r.toLowerCase();return s.includes("progress")?"In Progress":s.includes("done")||s.includes("complete")?"Done":"Todo"}function he(r){const s=r.toLowerCase();return s==="highest"||s==="blocker"||s==="critical"?"Highest":s==="high"||s==="major"?"High":s==="medium"||s==="normal"?"Medium":"Low"}const{mutate:Ae}=Hl({onSuccess:()=>{Ee.success("Card removed from sprint successfully"),mt()},onError:r=>{Ee.error("Failed to remove card from sprint"),console.error("Failed to remove card from sprint:",r)}});function mt(){F(),me(),ye(),ee()}function Jt(r,s){const K=Array.isArray(r)?r:[r],oe=s||b.value;!oe||!K.length||K.forEach(W=>{Ae({sprintId:oe,cardId:W})})}const Zt=_(!1),tt=_(null);function gt(){Q.value=!0,tt.value=null}function bt(r){tt.value=r,T.value=!0,Zt.value=!0}const Te=_(!1);function Xt(){Te.value=!0}const lt=ft(),{mutate:Yt,isPending:el}=Ol({onSuccess:r=>{t({name:r.title}),lt.invalidateQueries({queryKey:["sprint-list"]}),Te.value=!1}}),{mutate:xt,isPending:tl}=At({onSuccess:r=>{t({name:r.title}),lt.invalidateQueries({queryKey:["sprint-list"]}),Te.value=!1}}),st=_("");function yt(r){const s=st.value.trim();if(!s||s===r.title){wt();return}xt({id:r._id,payload:{workspace_id:j.value,title:s}}),Ve.value=null}function ll(r){var s;J.value?xt({id:(s=J.value)==null?void 0:s._id,payload:{workspace_id:j.value,title:r.name,sprintType:r.value,description:r.description}}):Yt({payload:{workspace_id:j.value,title:r.name,sprintType:r.value,description:r.description}})}function sl(){J.value=null,Te.value=!0}function al(r){J.value=r,ce.value=!0}const{mutate:nl,isPending:_t}=Al(b,{onSuccess:()=>{ee()}}),ht=()=>{nl({})},Ue=_(null),Oe=_(0);let at=!1;wl(()=>{if(!Ue.value)return;const r=Ue.value.offsetWidth;Oe.value=r/3});function rl(){at=!0,document.addEventListener("mousemove",kt),document.addEventListener("mouseup",St)}function kt(r){if(!at||!Ue.value)return;const s=Ue.value.getBoundingClientRect(),K=r.clientX-s.left;K<Xe?Oe.value=Xe:K>s.width-Xe?Oe.value=s.width-Xe:Oe.value=K}function St(){at=!1,document.removeEventListener("mousemove",kt),document.removeEventListener("mouseup",St)}const Ve=_(null);function ol(r){Ve.value=r._id,r.tempTitle=r.title}function wt(){var s;const r=(s=Y.value)==null?void 0:s.sprints.find(K=>K._id===Ve.value);r&&(r.tempTitle=r.title),Ve.value=null}Ze($,()=>{D.value=!1});const il=r=>{M.value=r,I.value=!1};Ze(P,()=>{I.value=!1});const Ct=_(null),qe=_(!1);Ze(Ct,()=>{qe.value=!1});const nt=_(!1),dl=()=>{nt.value=!0},ul=()=>{nt.value=!1},rt=_("all"),Ke=_(!1);function $t(r){rt.value=r,Ke.value=!1,console.log("Selected Huddle Module:",r)}const cl=V(()=>{var s,K,oe;if(rt.value==="all")return"All Milestones";const r=(K=(s=B.value)==null?void 0:s.modules)==null?void 0:K.find(W=>W._id===rt.value);return((oe=r==null?void 0:r.variables)==null?void 0:oe["module-title"])||"Select Module"}),We=_("all");function ot(r){We.value=r}return(r,s)=>{var K,oe,W,xe,ke,Ne,He,je,ze,Fe,Dt,Tt,Vt,Mt,Lt,Et;return i(),p(se,null,[l("div",Ca,[((K=c(L))==null?void 0:K.status)=="active"?(i(),te(wa,{key:0,sptint_id:b.value,searchQuery:w.value},null,8,["sptint_id","searchQuery"])):c(De)?(i(),te(Kt,{key:1})):(i(),p("div",$a,[l("div",{class:"flex gap-2 h-full max-h-screen min-h-0 box-border overflow-x-auto group",ref_key:"containerRef",ref:Ue},[l("section",{class:R(["space-y-4 p-4 rounded-md relative group overflow-hidden box-border h-full min-h-0 min-w-[400px]",c(d)==="dark"?"bg-bg-surface":"bg-bg-surface/30"]),style:Re({width:Oe.value+"px"})},[l("div",Da,[l("h2",Ta,[Be(l("input",{type:"checkbox",class:"custom-checkbox bg-bg-body border border-border-input flex-shrink-0","onUpdate:modelValue":s[0]||(s[0]=y=>U.value=y)},null,512),[[Cl,U.value]]),ae(" Tickets ("+q((W=(oe=c(u))==null?void 0:oe.cards)==null?void 0:W.length)+" "+q(((ke=(xe=c(u))==null?void 0:xe.cards)==null?void 0:ke.length)>1?"Tasks":"Task")+") ",1)]),l("div",Va,[c(n)?(i(),p("button",{key:0,class:"w-8 h-8 rounded cursor-pointer text-sm hover:bg-bg-body flex items-center justify-center",onClick:gt},s[21]||(s[21]=[l("i",{class:"text-text-primary fa-regular fa-plus"},null,-1)]))):G("",!0)],512)]),l("div",null,[O.value==="milestone"?(i(),p("div",Ma,[l("button",{onClick:s[1]||(s[1]=y=>ot("all")),class:R(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium transition-colors whitespace-nowrap",We.value==="all"?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])}," All Modules ",2),(i(!0),p(se,null,de(f.value,y=>(i(),p("button",{key:y._id,onClick:Me=>ot(y._id),class:R(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium transition-colors whitespace-nowrap cursor-pointer",We.value===y._id?"bg-accent text-white border-none":"bg-transparent text-accent border border-accent"])},q(y.variables["module-title"]),11,La))),128))])):O.value==="huddle"||O.value==="sprint"?(i(),p("div",Ea,[l("div",Ba,[l("button",{class:"h-8 min-w-[160px] flex items-center justify-between px-2 rounded-md border text-sm border-border hover:bg-bg-body",onClick:s[2]||(s[2]=y=>Ke.value=!Ke.value)},[l("span",Ia,[l("img",{src:c(Cs),alt:"filter",class:"w-4 h-4"},null,8,Pa),l("span",Aa,q(cl.value||"All Milestones"),1)]),s[22]||(s[22]=l("i",{class:"fas fa-chevron-down text-xs ml-2"},null,-1))]),Ke.value?(i(),p("div",Ua,[l("ul",Oa,[l("li",{class:"px-3 py-2 cursor-pointer hover:bg-gray-100",onClick:s[3]||(s[3]=y=>$t("all"))}," All Milestones "),(i(!0),p(se,null,de(f.value,y=>(i(),p("li",{key:y._id,class:"px-3 py-2 cursor-pointer hover:bg-gray-100",onClick:Me=>$t(y._id)},q(y.variables["module-title"]),9,qa))),128))])])):G("",!0)]),l("div",Na,[(i(!0),p(se,null,de((Ne=c(Y))==null?void 0:Ne.sprints,y=>(i(),p("button",{key:y._id,onClick:Me=>ot(y._id),class:R(["flex-shrink-0 px-4 py-1 rounded-2xl text-sm font-medium whitespace-nowrap transition-colors",We.value===y._id?"bg-accent text-white":"bg-transparent text-accent border border-accent"])},q(y.title),11,Ha))),128))])])):G("",!0)]),c(ge)?(i(),p("div",ja,s[23]||(s[23]=[l("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):(i(),te(ns,{key:1,checkedAll:U.value,"sprint-type":O.value,searchQuery:w.value,onMoveSelectedToSprint:c(k),onDeleteSelectedBacklog:s[4]||(s[4]=y=>c(e)("backlog")),onOpenTicket:bt,onTicketMovedToBacklog:Jt,onOpenCreateTicket:gt},null,8,["checkedAll","sprint-type","searchQuery","onMoveSelectedToSprint"]))],6),l("div",{class:"h-full w-[3px] relative z-10 opacity-0 group-hover:opacity-100 bg-red hover:bg-accent cursor-col-resize transition",onMousedown:rl},null,32),l("section",{class:R(["space-y-4 rounded-md relative group pt-2 ovrflow-hidden flex-1 h-full min-h-0 box-border min-w-[400px] border border-border-input overflow-x-hidden",c(d)==="dark"?"bg-bg-surface":"bg-bg-surface/30"])},[l("div",za,[l("div",Fa,[l("div",{ref_key:"elipseWrapperSprint",ref:$,class:"relative inline-block"},[l("button",{onClick:s[5]||(s[5]=ie(y=>D.value=!D.value,["stop"])),class:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium bg-transparent rounded-lg",style:Re({border:"1px solid "+M.value.dot})},[l("span",{class:"w-2 h-2 rounded-full",style:Re({backgroundColor:M.value.dot})},null,4),ae(" "+q(M.value.label)+" ",1),s[24]||(s[24]=l("i",{class:"fas fa-chevron-down text-xs"},null,-1))],4),A(Bt,{name:"fade"},{default:X(()=>[D.value?(i(),p("ul",{key:0,onClick:s[6]||(s[6]=ie(()=>{},["stop"])),class:"absolute left-0 mt-2 w-44 bg-bg-dropdown border border-border rounded-xl shadow-lg z-50"},[(i(),p(se,null,de(N,y=>l("li",{key:y.value,onClick:Me=>(il(y),D.value=!D.value),class:"flex items-center gap-3 px-4 py-2 text-sm cursor-pointer"},[l("span",{class:"w-2 h-2 rounded-full",style:Re({backgroundColor:y.dot})},null,4),ae(" "+q(y.label),1)],8,Ra)),64))])):G("",!0)]),_:1})],512),l("div",Qa,[l("div",Ka,[l("div",{ref_key:"sprintDropdownWrapperRef",ref:Ct,class:"relative min-w-0"},[(He=c(Y))!=null&&He.sprints.length?(i(),p("button",{key:0,onClick:s[7]||(s[7]=y=>qe.value=!qe.value),class:R(["flex items-center gap-3 lg:px-6 px-2 py-1.5 rounded-lg text-sm font-medium transition-all",b.value?"text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"]),style:Re(b.value?{backgroundColor:M.value.dot}:{})},[l("span",Wa,q((Fe=(ze=(je=c(Y))==null?void 0:je.sprints)==null?void 0:ze.find(y=>y._id===b.value))==null?void 0:Fe.title),1),s[25]||(s[25]=l("i",{class:"fas fa-chevron-down text-xs"},null,-1))],6)):G("",!0),qe.value?(i(),p("div",Ga,[(i(!0),p(se,null,de((Dt=c(Y))==null?void 0:Dt.sprints,y=>{var Me;return i(),p("div",{key:y._id,class:"relative px-4 py-2 flex items-center justify-between text-sm cursor-pointer transition-colors hover:bg-gray-100"},[l("div",Ja,[Ve.value!==y._id?(i(),p("button",{key:0,class:"text-left truncate w-full",onClick:Le=>be(y)},q(y.title),9,Za)):Be((i(),p("input",{key:1,ref_for:!0,ref:"editingInputRef","onUpdate:modelValue":s[8]||(s[8]=Le=>st.value=Le),class:"w-full px-1 py-1 text-sm rounded outline-none bg-white border border-[#7d68c8]",placeholder:"Enter new name",onClick:s[9]||(s[9]=ie(()=>{},["stop"])),onBlur:Le=>yt(y),onKeyup:[It(Le=>yt(y),["enter"]),It(wt,["esc"])]},null,40,Xa)),[[zt,st.value]])]),l("div",Ya,[l("button",{class:"ml-2 text-xs text-gray-400 hover:text-accent",onClick:ie(Le=>ol(y),["stop"])},s[26]||(s[26]=[l("i",{class:"fas fa-pen"},null,-1)]),8,en),((Me=c(Y))==null?void 0:Me.sprints.length)>1&&Ve.value!==y._id?(i(),p("button",{key:0,onClick:ie(Le=>al(y),["stop"]),class:"w-4 h-4 rounded-full flex items-center justify-center text-gray-400 hover:text-red-500"},s[27]||(s[27]=[l("i",{class:"fas fa-times text-xs"},null,-1)]),8,tn)):G("",!0)])])}),128))])):G("",!0)],512)]),l("button",{onClick:s[10]||(s[10]=y=>sl()),class:"w-7 h-7 flex items-center justify-center rounded-full bg-accent border text-white transition-colors shrink-0"},s[28]||(s[28]=[l("i",{class:"fa-solid fa-plus text-xs"},null,-1)]))])]),l("div",ln,[l("div",sn,[A(Pt,{placeholder:"Search in sprint",modelValue:w.value,"onUpdate:modelValue":s[11]||(s[11]=y=>w.value=y)},null,8,["modelValue"])]),l("button",{class:"sm:hidden flex items-center justify-center w-7 h-7 ms-10 rounded-full bg-accent border",onClick:dl},s[29]||(s[29]=[l("i",{class:"fa-solid fa-magnifying-glass text-white"},null,-1)])),l("div",an,[((Tt=c(L))==null?void 0:Tt.status)==="active"?(i(),te(ve,{key:0,size:"sm",onClick:ht,variant:(c(d)==="dark","primary"),class:"border-border-input border"},{default:X(()=>[ae(q(c(_t)?"Ending...":"End"),1)]),_:1},8,["variant"])):(i(),te(ve,{key:1,size:"sm",variant:(c(d)==="dark","primary"),class:"border-border-input border",onClick:g,disabled:!Z.value||Z.value.tickets.length===0},{default:X(()=>s[30]||(s[30]=[ae(" Start Sprint ")])),_:1,__:[30]},8,["variant","disabled"]))]),Z.value&&Z.value.tickets.length?(i(),p("div",nn,[((Vt=c(L))==null?void 0:Vt.status)==="active"?(i(),p("button",{key:0,onClick:ht,class:"w-8 h-8 flex items-center justify-center rounded-full bg-accent border",title:c(_t)?"Ending...":"End Sprint"},s[31]||(s[31]=[l("i",{class:"fa-solid fa-flag-checkered text-gray-700"},null,-1)]),8,rn)):(i(),p("button",{key:1,onClick:g,disabled:!Z.value||Z.value.tickets.length===0,class:"w-7 h-7 flex items-center justify-center rounded-full bg-accent border disabled:opacity-50 disabled:cursor-not-allowed",title:"Start Sprint"},s[32]||(s[32]=[l("i",{class:"fa-solid fa-play"},null,-1)]),8,on))])):G("",!0)]),A(Bt,{name:"fade"},{default:X(()=>[nt.value?(i(),p("div",dn,[l("div",un,[l("div",cn,[A(Pt,{placeholder:"Search in sprint",modelValue:w.value,"onUpdate:modelValue":s[12]||(s[12]=y=>w.value=y),class:"flex-1"},null,8,["modelValue"]),l("button",{onClick:ul,class:"p-2 rounded hover:bg-gray-100 text-accent"},s[33]||(s[33]=[l("i",{class:"fa-solid fa-xmark"},null,-1)]))])])])):G("",!0)]),_:1})]),c(x)?(i(),p("div",pn,s[34]||(s[34]=[l("div",{role:"status","aria-label":"Loading",class:"h-10 w-10 rounded-full border-4 border-neutral-700 border-t-transparent animate-spin"},null,-1)]))):(i(),p(se,{key:1},[Z.value?(i(),te(_s,{key:0,searchQuery:w.value,sprintId:b.value,checkedSprintAll:h.value,sprint:Z.value,onOpenTicket:bt,onEditSprint:Xt,onToggleStart:c(a),onMoveSelectedToBacklog:c(o),onDeleteSelectedSprint:s[13]||(s[13]=y=>c(e)("sprint",y)),onRefresh:mt},null,8,["searchQuery","sprintId","checkedSprintAll","sprint","onToggleStart","onMoveSelectedToBacklog"])):G("",!0)],64))],2)],512)]))]),A(Tl,{onClick:s[14]||(s[14]=ie(()=>{},["stop"])),modelValue:ce.value,"onUpdate:modelValue":s[15]||(s[15]=y=>ce.value=y),title:"Delete Sprint",itemLabel:"Sprint",itemName:(Mt=J.value)==null?void 0:Mt.title,requireMatchText:(Lt=J.value)==null?void 0:Lt.title,confirmText:"Delete Sprint",cancelText:"Cancel",size:"md",loading:c(le),onConfirm:Ie,onCancel:s[16]||(s[16]=()=>{J.value=null,ce.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),A(ws,{modelValue:Te.value,"onUpdate:modelValue":s[17]||(s[17]=y=>Te.value=y),onSave:ll,sprint:J.value,creatingSprint:J.value?c(tl):c(el)},null,8,["modelValue","sprint","creatingSprint"]),A(Us,{sprint:J.value,modelValue:fe.value,"onUpdate:modelValue":s[18]||(s[18]=y=>fe.value=y),onSave:Pe,creatingSprint:c(De)||c(ue)},null,8,["sprint","modelValue","creatingSprint"]),A($l,{modelValue:T.value,"onUpdate:modelValue":s[19]||(s[19]=y=>T.value=y),cardId:(Et=tt.value)==null?void 0:Et.id,onClose:H},null,8,["modelValue","cardId"]),A(ya,{modelValue:Q.value,"onUpdate:modelValue":s[20]||(s[20]=y=>Q.value=y)},null,8,["modelValue"])],64)}}}),wn=ut(fn,[["__scopeId","data-v-8cf200ec"]]);export{wn as default};
