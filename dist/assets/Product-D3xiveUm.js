const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-CcQem4Ao.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-CnZw-cXv.js","assets/index-CpoWQO0F.js","assets/index-D65ES9QX.css","assets/CreateSheetModal-BPOC9ucX.js","assets/IconPicker-CvqUbzTo.js","assets/IconPicker-BPf3BB8o.css","assets/AudioRecorder.vue_vue_type_script_setup_true_lang-C6vfiDup.js","assets/CreateSheetModal-CEob18WV.css","assets/CreateVariableModal-DPAzKGUy.js","assets/ConfirmDeleteModal-CtXIewaC.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-BkoYS2hk.js","assets/SidePanel-CH7kVrVE.js","assets/SidePanel-M_FgJti0.css","assets/KanbanBoard-BYtMGPjm.js","assets/lodash-7on_8XTD.js","assets/lodash-B_VDCJnj.css","assets/DropMenu.vue_vue_type_script_setup_true_lang-D6Z2jqrC.js","assets/workspace-DUghSNgy.js","assets/KanbanBoard-DlFwUlEB.css"])))=>i.map(i=>d[i]);
import{d as Pe,r as o,W as Oe,$ as Ue,a as Be,a2 as Re,Y as Ke,c as _,m as T,ad as Ne,a3 as qe,a4 as ze,ae as je,i as I,e as d,h as r,b as N,j as E,A as de,w as C,f as q,n as a,C as re,a5 as b,g as M,a9 as Fe,_ as He,t as Qe,B as $e,F as We,a6 as w,p as Ye,o as c,H as Ge}from"./index-CpoWQO0F.js";import{u as Je}from"./workspace-DUghSNgy.js";import{l as Xe,F as Ze,D as ne,K as et}from"./lodash-7on_8XTD.js";import{_ as tt}from"./SearchBar.vue_vue_type_script_setup_true_lang-NmXq6Dxv.js";import{K as lt}from"./KanbanTicket-DvEoF8S5.js";import"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-BkoYS2hk.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-D6Z2jqrC.js";const at={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-2xl shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex-col flex scrollbar-visible"},ot={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1"},st={class:"flex gap-3 items-center"},dt={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible"},rt={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},nt={key:0,class:"bg-bg-body rounded-lg p-4"},it={class:"flex items-center mt-3 gap-3"},ut=Pe({__name:"Product",setup(vt){const ie=b(()=>w(()=>import("./CreateTaskModal-CcQem4Ao.js"),__vite__mapDeps([0,1,2,3]))),ue=b(()=>w(()=>import("./CreateSheetModal-BPOC9ucX.js"),__vite__mapDeps([4,2,3,5,6,7,8]))),ve=b(()=>w(()=>import("./CreateVariableModal-DPAzKGUy.js"),__vite__mapDeps([9,2,3]))),z=b(()=>w(()=>import("./ConfirmDeleteModal-CtXIewaC.js"),__vite__mapDeps([10,11,2,3]))),ce=b(()=>w(()=>import("./SidePanel-CH7kVrVE.js"),__vite__mapDeps([12,2,3,13]))),me=b(()=>w(()=>import("./KanbanBoard-BYtMGPjm.js"),__vite__mapDeps([14,15,2,3,11,16,17,18,19]))),V=o(!1),j=Ye(),{workspaceId:m,moduleId:i}=Oe(),{data:P}=Ue(m.value,i.value),pe=Be(),{mutate:O,isPending:F}=Re({onSuccess:()=>{pe.invalidateQueries({queryKey:["sheet-list"]}),S.value="",p.value=!1,A.value=!1,p.value=!1}}),H=t=>{O({workspace_id:m.value,module_id:i.value,variable_id:s.value,value:t})},{data:y,refetch:fe}=Ke({workspace_id:m,workspace_module_id:i}),U=_(()=>{var t;return y.value?(t=y.value[0])==null?void 0:t._id:""}),n=o(U.value);T(U,()=>{n.value=U.value});const B=_(()=>{var t;return P.value?(t=P.value[0])==null?void 0:t._id:""}),s=o(B.value);T(B,()=>{s.value=B.value});const k=Je(),{data:R,isPending:Q}=Ne(i,n,_(()=>[...k.selectedLaneIds]),s),h=o(!1),D=o(),K=t=>{console.log(">> click ",t),D.value=t},x=o(!1),_e=()=>{v.value={},x.value=!x.value},be=qe(),we=ze();function xe(t){t.type=="column"?be.mutate({payload:{workspace_id:m.value,workspace_module_id:i.value,variable_id:s.value,moved_value:t.meta.id,new_index:t.meta.newIndex}}):we.mutate({payload:{workspace_id:m.value,card_id:t.meta.moved._id,group_value:t.meta.fromColumnId,group_variable_id:s.value,new_index:t.meta.newIndex,sheet_id:n.value}})}const ge=t=>{},Ce=_(()=>(y.value||[]).map(t=>({_id:t._id,title:t.variables["sheet-title"],description:t.variables["sheet-description"],icon:t.icon,status:t==null?void 0:t.generation_status})));T(y,t=>{var e;(t==null?void 0:t.length)>0&&(n.value=(e=t[0])==null?void 0:e._id)});const A=o(!1),S=o("");function $(){A.value=!A.value}function W(){const t=S.value.trim();t&&H(t)}const Ve=t=>{O({workspace_id:j.params.id,module_id:j.params.module_id,new_value:t.title,value:t.oldTitle,variable_id:s.value})},p=o(!1),u=o(),ye=()=>{O({value:u.value.title,workspace_id:m.value,module_id:i.value,newValue:u.value.title,variable_id:s.value,is_trash:!0})},ke=t=>{p.value=!0,u.value=t},he=t=>{h.value=!0,u.value=t},g=o(!1),v=o();function De(t){g.value=!0,v.value=t}const{mutate:Ae,isPending:Se}=je({onSuccess:()=>{fe(),g.value=!1}});function Le(){var t;Ae({sheet_id:(t=v.value)==null?void 0:t._id,workspace_module_id:i.value,is_trash:!0})}function Te(t){x.value=!0,v.value=t}const L=o(""),Ie=o("");T(L,Xe.debounce(t=>{Ie.value=t},200));const Ee=_(()=>{const t=R.value.flatMap(e=>e.cards.map(f=>({...f,columnId:e.title})));return new Ze(t,{keys:["card-title","card-description"],threshold:.3})}),Me=_(()=>{if(!L.value)return R.value;const t=Ee.value.search(L.value).map(e=>e.item);return R.value.map(e=>({...e,cards:t.filter(f=>f.columnId===e.title)}))});return(t,e)=>{var f,Y,G,J,X,Z,ee;return c(),I(We,null,[d("div",at,[d("div",ot,[r(ne,{onEditOption:Te,modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=l=>n.value=l),onDeleteOption:De,options:Ce.value,variant:"secondary"},{more:C(()=>[d("div",{onClick:e[0]||(e[0]=l=>_e()),class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[20]||(e[20]=[d("i",{class:"fa-solid fa-plus"},null,-1),q(" Add new ")]))]),_:1},8,["modelValue","options"]),d("div",st,[r(ne,{actions:!1,prefix:"View by",modelValue:s.value,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value=l),options:a(P),variant:"secondary"},{more:C(()=>[d("div",{onClick:e[2]||(e[2]=()=>{V.value=!0}),class:"sticky bottom-0 bg-bg-dropdown shadow-md shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[21]||(e[21]=[d("i",{class:"fa-solid fa-plus"},null,-1),q(" Add new ")]))]),_:1},8,["modelValue","options"]),r(tt,{onOnChange:e[4]||(e[4]=l=>{L.value=l}),placeholder:"Search in Orchit AI space"})])]),de(r(et,null,null,512),[[re,a(Q)]]),de(d("div",dt,[r(a(me),{onOnPlus:he,board:Me.value,"onDelete:column":e[5]||(e[5]=l=>ke(l)),"onUpdate:column":e[6]||(e[6]=l=>Ve(l)),onReorder:xe,onAddColumn:H,"onSelect:ticket":K,onOnBoardUpdate:ge,variable_id:s.value,sheet_id:n.value},{"column-footer":C(l=>{var te,le,ae,oe,se;return[(le=(te=a(k))==null?void 0:te.transitions)!=null&&le.all_allowed&&!((se=(oe=(ae=a(k))==null?void 0:ae.transitions)==null?void 0:oe.all_allowed)!=null&&se.includes(l.column.title))&&a(k).transitions.currentColumn!=l.column.title?(c(),I("div",rt," Disbale ( you can't drop here )")):E("",!0)]}),ticket:C(({ticket:l})=>[r(lt,{selectedVar:s.value,onSelect:()=>{K(l)},ticket:l},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"]),d("div",{class:"min-w-[328px]",onClick:e[8]||(e[8]=M(()=>{},["stop"]))},[A.value?(c(),I("div",nt,[r(He,{autofocus:!0,modelValue:S.value,"onUpdate:modelValue":e[7]||(e[7]=l=>S.value=l),placeholder:"Add New list",onKeyup:Fe(W,["enter"])},null,8,["modelValue"]),e[22]||(e[22]=d("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),d("div",it,[r($e,{onClick:W,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:C(()=>[q(Qe(a(F)?"Adding...":"Add list"),1)]),_:1}),d("i",{class:"fa-solid fa-close",onClick:$})])])):(c(),I("button",{key:1,class:"text-sm text-text-primary py-2.5 cursor-pointer font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",onClick:M($,["stop"])}," + Add List "))])],512),[[re,!a(Q)]])]),r(a(z),{onClick:e[9]||(e[9]=M(()=>{},["stop"])),modelValue:p.value,"onUpdate:modelValue":e[10]||(e[10]=l=>p.value=l),title:"Delete List",itemLabel:"list",itemName:(f=u.value)==null?void 0:f.title,requireMatchText:(Y=u.value)==null?void 0:Y.title,confirmText:"Delete List",cancelText:"Cancel",size:"md",loading:a(F),onConfirm:ye,onCancel:e[11]||(e[11]=()=>{p.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),h.value?(c(),N(a(ie),{selectedVariable:s.value,listId:(G=u.value)==null?void 0:G.title,sheet_id:n.value,key:"createTaskModalKey",modelValue:h.value,"onUpdate:modelValue":e[12]||(e[12]=l=>h.value=l),onSubmit:e[13]||(e[13]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):E("",!0),(J=D.value)!=null&&J._id?(c(),N(a(ce),{key:1,details:D.value,onClose:e[14]||(e[14]=()=>{K({variables:{}})}),showPanel:!!((X=D.value)!=null&&X._id)},null,8,["details","showPanel"])):E("",!0),r(a(ue),{size:"md",sheet:v.value,modelValue:x.value,"onUpdate:modelValue":e[15]||(e[15]=l=>x.value=l)},null,8,["sheet","modelValue"]),V.value?(c(),N(a(ve),{key:2,modelValue:V.value,"onUpdate:modelValue":e[16]||(e[16]=l=>V.value=l),sheetID:n.value},null,8,["modelValue","sheetID"])):E("",!0),r(a(z),{onClick:e[17]||(e[17]=M(()=>{},["stop"])),modelValue:g.value,"onUpdate:modelValue":e[18]||(e[18]=l=>g.value=l),title:"Delete Sheet",itemLabel:"Sheet",itemName:(Z=v.value)==null?void 0:Z.title,requireMatchText:(ee=v.value)==null?void 0:ee.title,confirmText:"Delete Sheet",cancelText:"Cancel",size:"md",loading:a(Se),onConfirm:Le,onCancel:e[19]||(e[19]=()=>{g.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"])],64)}}}),xt=Ge(ut,[["__scopeId","data-v-709c9a67"]]);export{xt as default};
