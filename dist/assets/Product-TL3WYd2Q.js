const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-BEjlWIEU.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-CNTSkaG6.js","assets/index-i4SqLuDO.js","assets/index-BurmEED8.css","assets/CreateSheetModal-OK8PlCHU.js","assets/IconPicker-nJypGASQ.js","assets/IconPicker-CIMr_3tu.css","assets/AudioRecorder.vue_vue_type_script_setup_true_lang-iG_TbbUm.js","assets/CreateSheetModal--7RYCgy-.css","assets/CreateVariableModal-QQYjsoZU.js","assets/ConfirmDeleteModal-C-gy5J8R.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-CPolpig3.js","assets/SidePanel-CTBv9t_H.js","assets/SidePanel-U7OOMI6M.css","assets/KanbanBoard-CtcK7_s2.js","assets/vuedraggable.umd-BWzkY_1G.js","assets/lodash-B3d4OLnQ.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-cQL_9AOM.js","assets/KanbanBoard-Dffh696C.css"])))=>i.map(i=>d[i]);
import{d as ll,W as al,r,M as ol,N as nl,n as j,a0 as sl,c as V,a2 as il,a6 as rl,u as dl,ar as ul,a7 as cl,a8 as vl,a9 as pl,a1 as fl,ac as _,Z as bl,ad as ml,Q as gl,ab as yl,a3 as _l,aa as xl,ae as kl,af as hl,j as y,f as n,i as k,e as F,k as m,w as H,p as u,z as I,F as se,D as Me,E as Je,h as ie,ah as Ze,_ as Xe,B as et,ag as xe,t as re,y as tt,P as wl,q as Cl,ai as lt,aj as Sl,o as c,g as ke,ak as Q,A as Y,T as Dl,U as at,bn as Vl,al as Tl,J as Al}from"./index-i4SqLuDO.js";import{D as ot}from"./Dropdown-DPjtVdGc.js";import{_ as El}from"./SearchBar.vue_vue_type_script_setup_true_lang-BOs5gwpH.js";import{K as Ll}from"./KanbanSkeleton-BvUxLauX.js";import{K as Fl}from"./KanbanTicket-CEYkdd_6.js";import{F as nt}from"./fuse-Ch1WBRTM.js";import{l as Il}from"./lodash-B3d4OLnQ.js";import{_ as st,a as Nl,b as ql,C as Ml,c as zl,T as Pl,k as $l}from"./TimelineView-BP3zIQfK.js";import"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-CPolpig3.js";import"./DropMenu.vue_vue_type_script_setup_true_lang-cQL_9AOM.js";const Bl={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-[6px] shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex-col flex scrollbar-visible"},Ul={class:"overflow-x-auto shrink-0 sticky top-0 z-20 bg-bg-card"},Ol={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1 min-w-max h-full"},Rl={class:"flex gap-3 items-center"},Wl={class:"flex items-center gap-3 bg-bg-surface/50 h-[32px] px-2 rounded-md"},Kl={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible h-full"},jl={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},Hl={key:0,class:"bg-bg-body rounded-lg p-4"},Ql={class:"flex items-center mt-3 gap-3"},Yl=["disabled"],Gl={class:"relative w-full h-full flex overflow-hidden"},Jl={key:0,class:"format-sidebar h-full py-4 px-4 w-[320px] border-l bg-bg-card overflow-x-hidden overflow-y-auto flex flex-col"},Zl={class:"flex items-center justify-between pb-3 mb-4 border-b"},Xl={class:"format-content space-y-6"},ea={class:"format-group relative mb-3"},ta={class:"text-xs text-secondary"},la={key:0,class:"absolute z-50 mt-2 p-3 bg-bg-card rounded-lg shadow-lg border w-[240px]"},aa={class:"grid grid-cols-10 gap-1 mb-3"},oa=["onClick"],na={class:"flex items-center gap-2"},sa=["value"],ia=["value"],ra={class:"format-group relative mb-3"},da={class:"text-xs text-secondary"},ua={key:0,class:"absolute z-50 mt-2 p-3 bg-bg-card rounded-lg shadow-lg border w-[240px]"},ca={class:"grid grid-cols-10 gap-1 mb-3"},va=["onClick"],pa={class:"flex items-center gap-2"},fa=["value"],ba=["value"],ma={class:"grid grid-cols-1 gap-3"},ga=["value"],ya={class:"mt-6 pt-4"},_a=["disabled"],xa={key:0,class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},ka={key:0,class:"fixed inset-0 bg-black/30 flex items-center justify-center"},ha={class:"bg-white p-6 rounded-xl w-80"},wa={class:"flex justify-end gap-2 mt-4"},Ca=["disabled"],Sa={class:"flex items-center mt-3 gap-3"},Da=ll({__name:"Product",setup(Va){const{canEditSheet:it,canDeleteSheet:rt,canCreateVariable:de,canCreateSheet:dt,canCreateCard:ut,canEditCard:ue,canAssignCard:ct}=al(),G=r(!1),ce=r(null),ve=r(!1),he=r(null),we=r(!1),p=r("kanban"),Ce=r(null),pe=r(null),J=r(!1),ze=Cl(),{workspaceId:h,moduleId:T}=ol(),B=nl(),fe=r(!1),Z=r(),N=r(null),q=r(!0),be=r(!1),M=r(""),Se=r(null);function vt(t){M.value="",be.value=!0,Se.value=t}function pt(){Se.value&&Se.value(M.value),be.value=!1}function ft(){be.value=!1}const bt=r(null),mt=t=>{bt.value=t},U=r(!1),Pe=["#FFFFFF","#F2F2F2","#D9D9D9","#BFBFBF","#A6A6A6","#808080","#404040","#000000","#FFE066","#FF9AA2","#8EE4AF","#00EAD3","#90DBF4","#4D96FF","#6C63FF","#C77DFF","#F7A1C4","#FFC300","#FF5733","#2ECC71","#00B894","#17A2B8","#0984E3","#3F51B5","#9C27B0","#E84393","#FF8C00","#E74C3C","#1E8449","#006D6F","#004C6D","#0057A8","#1A237E","#4A148C","#7D3C98"],O=r(!1);j(U,t=>{t&&(O.value=!1)}),j(O,t=>{t&&(U.value=!1)});const gt=async()=>{if(he.value)try{we.value=!0,await Dl({url:`workspace/card/${he.value}`,method:"DELETE"}),_t(he.value),await ge(),ve.value=!1,ce.value=null,at.success("Ticket deleted successfully")}catch(t){at.error(Vl(t))}finally{we.value=!1}},yt=async()=>{await gt()},_t=t=>{var e,l;(l=(e=b.value)==null?void 0:e.sheets)==null||l.forEach(a=>{var o;(o=a.sheet_lists)==null||o.forEach(v=>{v.cards=v.cards.filter(f=>f._id!==t)})})},xt=Q(()=>Y(()=>import("./CreateTaskModal-BEjlWIEU.js"),__vite__mapDeps([0,1,2,3]))),kt=Q(()=>Y(()=>import("./CreateSheetModal-OK8PlCHU.js"),__vite__mapDeps([4,2,3,5,6,7,8]))),ht=Q(()=>Y(()=>import("./CreateVariableModal-QQYjsoZU.js"),__vite__mapDeps([9,2,3]))),De=Q(()=>Y(()=>import("./ConfirmDeleteModal-C-gy5J8R.js"),__vite__mapDeps([10,11,2,3]))),wt=Q(()=>Y(()=>import("./SidePanel-CTBv9t_H.js"),__vite__mapDeps([12,2,3,13]))),Ct=Q(()=>Y(()=>import("./KanbanBoard-CtcK7_s2.js"),__vite__mapDeps([14,15,16,2,3,17,11,18]))),{data:me,refetch:ge,isPending:$e}=sl({workspace_id:h,workspace_module_id:T}),Ve=V(()=>{var t;return me.value?(t=me.value[0])==null?void 0:t._id:""}),x=r(Ve.value),{data:E,isPending:St}=il(h.value,T.value,x),{mutate:Te,isPending:Ae}=rl({onSuccess:()=>{B.invalidateQueries({queryKey:["sheet-list"]}),R.value="",W.value=!1,ee.value=!1,W.value=!1}}),Be=t=>{Te({workspace_id:h.value,module_id:T.value,variable_id:w.value,value:t})};j(Ve,()=>{x.value=Ve.value});const Ee=V(()=>{var t;return E!=null&&E.value?(t=E==null?void 0:E.value[0])==null?void 0:t._id:""}),w=r(Ee.value);j(Ee,()=>{w.value=Ee.value});const ye=dl(),{data:b,isPending:Le,refetch:Dt}=ul(T,x,V(()=>[...ye.selectedLaneIds]),w),L=t=>{t._id||(t._id=t.id),Z.value=t};window.selectCardHandler=L;const X=r(!1),Vt=()=>{P.value={},X.value=!X.value},Tt=cl(),At=vl();function Et(t){t.type==="column"?Tt.mutate({payload:{workspace_id:h.value,workspace_module_id:T.value,variable_id:w.value,moved_value:t.meta.id,new_index:t.meta.newIndex}},{onSuccess:()=>{ge()}}):At.mutate({payload:{workspace_id:h.value,card_id:t.meta.moved._id,group_value:t.meta.fromColumnId,group_variable_id:w.value,new_index:t.meta.newIndex,sheet_id:x.value}},{onSuccess:()=>{ge()}})}const Lt=t=>{},Ft=V(()=>(me.value||[]).map(t=>({_id:t._id,title:t==null?void 0:t.variables["sheet-title"],description:t==null?void 0:t.variables["sheet-description"],icon:t.icon,status:t==null?void 0:t.generation_status})));j(me,t=>{var e;(t==null?void 0:t.length)>0&&(x.value=(e=t[0])==null?void 0:e._id)});const ee=r(!1),R=r("");function Fe(){ee.value=!ee.value}function _e(){const t=R.value.trim();t&&Be(t)}const It=t=>{Te({workspace_id:ze.params.id,module_id:ze.params.module_id,new_value:t.title,value:t.oldTitle,variable_id:w.value})},W=r(!1),z=r(),Nt=()=>{Te({value:z.value.title,workspace_id:h.value,module_id:T.value,newValue:z.value.title,variable_id:w.value,is_trash:!0})},qt=t=>{W.value=!0,z.value=t},Mt=t=>{fe.value=!0,z.value=t},P=r();function zt(t){G.value=!0,P.value=t}const{mutate:Ue,isPending:Pt}=pl({onSuccess:()=>{ge(),G.value=!1}});function $t(){var t;Ue({sheet_id:(t=P.value)==null?void 0:t._id,workspace_module_id:T.value,is_trash:!0})}function Bt(t){X.value=!0,P.value=t}const te=r(""),Ut=r("");j(te,Il.debounce(t=>{Ut.value=t},200));const Ot=V(()=>{const t=b.value.flatMap(e=>e.cards.map(l=>({...l,columnId:e.title})));return new nt(t,{keys:["card-title","card-description"],threshold:.3})}),le=V(()=>{var t;if(p.value==="kanban"){if(!te.value)return b.value;const e=Ot.value.search(te.value).map(l=>l.item);return b.value.map(l=>({...l,cards:e.filter(a=>a.columnId===l.title)}))}else{const e=(t=te.value)==null?void 0:t.trim();if(!e){let a=[];return(b.value??[]).forEach(o=>{a=[...a,...o==null?void 0:o.cards]}),a}return new nt(Kt.value,{keys:["card-title","card-description"],threshold:.3}).search(e).map(a=>a.item)}}),{data:Ie}=fl(h),Oe=V(()=>((Ie==null?void 0:Ie.value)??[]).map(t=>{var e;return{_id:t._id,title:((e=t==null?void 0:t.variables)==null?void 0:e["lane-title"])??String(t._id)}})),Rt=V(()=>{var t;return[{key:"card-title",label:"Title",render:({row:e,value:l})=>_("div",{class:"flex items-center gap-1 w-full"},[_("a",{onClick:()=>Z.value=e,class:"text-[12px] underline text-blue-500 shrink-0 overflow-ellipsis cursor-pointer"},e["card-code"]),_("div",{class:"flex-1 min-w-0"},[_("input",{onFocusout:a=>{var o;We(e==null?void 0:e._id,"card-title",(o=a==null?void 0:a.target)==null?void 0:o.value)},class:"text-[12px] w-full overflow-ellipsis capitalize p-1 w-full p-1 focus:border border-accent/60 rounded-sm focus:outline-none focus:ring-1 focus:ring-accent bg-transparent focus:bg-bg-body text-[12px] h-8",defaultValue:l,disabled:!ue.value})])])},{key:"end-date",label:"Due Date",render:({row:e,value:l})=>{const a=r(l);return _(bl,{class:" capitalize flex items-center gap-2 text-[12px]",placeholder:"Set start date",tableInputClass:!0,modelValue:a.value,disabled:!ue.value,"onUpdate:modelValue":o=>Qt(e==null?void 0:e._id,o),emptyText:"Date"})}},{key:"lane",label:"Lane",render:({row:e})=>{var l;return _(st,{options:Oe.value??[],placeholder:"Select lane",modelValue:((l=e.lane)==null?void 0:l._id)||null,disabled:!ue.value,"onUpdate:modelValue":a=>Yt(e==null?void 0:e._id,a),displayField:"title",emptyText:"Lane"})}},{key:"created_by",label:"Owner",render:({value:e})=>_("div",{class:"capitalize flex items-center gap-2  px-3"},[_("div",{class:" rounded-full  "},[e!=null&&e.u_profile_image?_("img",{class:"w-6 h-6 rounded-full",src:e==null?void 0:e.u_profile_image}):_("div",{class:"w-5 h-5 rounded-full flex justify-center items-center text-[11px] ",style:`background:${e!=null&&e.u_full_name?ml({name:e.u_full_name,email:e.u_email}):""}`},gl(e==null?void 0:e.u_full_name))]),_("span",{class:"text-[12px]"},e?e==null?void 0:e.u_full_name:"")])},{key:"seat",label:"Assignee",render:({row:e,value:l})=>_(Nl,{class:"capitalize flex items-center gap-2 ",onAssign:a=>Wt(e==null?void 0:e._id,a),assigneeId:l,seat:l,name:!0,disabled:!ct.value,emptyText:"Assignee"})},...((t=E.value)==null?void 0:t.filter(e=>{var l;return((l=e==null?void 0:e.type)==null?void 0:l.title)==="Select"}).map(e=>({key:e==null?void 0:e.slug,label:e==null?void 0:e.slug,render:({row:l,value:a})=>{var v;let o=a;if(Array.isArray(l==null?void 0:l.variables)){const f=l.variables.find(d=>d.slug===e.slug);f&&(o=f.value)}else o=((v=l==null?void 0:l.variables)==null?void 0:v[e.slug])??(l==null?void 0:l[e.slug])??a;return _("div",{class:"capitalize flex items-center gap-2"},[_(st,{options:jt(e.data??[]),modelValue:o,disabled:!ue.value,emptyText:e.slug,"onUpdate:modelValue":f=>{We(l==null?void 0:l._id,e.slug,f)},columnName:e.slug})])},visible:e==null?void 0:e.is_visible})))??[]]}),Wt=(t,e)=>{Ne(t,l=>{l.seat=e}),ae.mutate({card_id:t,seat_id:e==null?void 0:e._id})},Kt=V(()=>{let t=[];return(b.value??[]).forEach(e=>{t=[...t,...e==null?void 0:e.cards]}),t}),jt=t=>t.map(e=>({_id:e.value??e,title:e.value??e})),ae=yl({onSuccess:()=>{B.invalidateQueries({queryKey:["get-sheets"]}),B.invalidateQueries({queryKey:["sheet-list"]}),B.invalidateQueries({queryKey:["roles"]})}}),Ne=(t,e)=>{if(!b.value)return;const l=b.value.findIndex(a=>a.cards.some(o=>o._id===t));if(l!==-1){const a=b.value[l].cards.findIndex(o=>o._id===t);if(a!==-1){const o={...b.value[l].cards[a]};e(o),b.value[l].cards[a]=o,lt(b)}}},{mutate:Re}=_l({onSuccess:()=>{}});function We(t,e,l){Ne(t,a=>{if(e==="card-title"&&(a[e]=l),Array.isArray(a.variables)){const o=a.variables.find(v=>v.slug===e);o?o.value=l:a.variables.push({slug:e,value:l,type:"Select"})}else a.variables&&typeof a.variables=="object"?a.variables[e]=l:a[e]=l}),ae.mutate({card_id:t,variables:{[e]:l.trim()}})}function Ht(t){if(t["card-title"]){const e={sheet_list_id:"To Do",workspace_id:h.value,sheet_id:x.value,variables:{"card-title":t["card-title"].trim()},createdAt:new Date().toISOString()};Re(e)}}const Qt=(t,e)=>{const l=b.value.findIndex(a=>a.cards.some(o=>o._id===t));if(l!==-1){const a=b.value[l].cards.findIndex(o=>o._id===t);a!==-1&&(b.value[l].cards[a]["end-date"]=e)}ae.mutate({card_id:t,variables:{"start-date":e}})};function Yt(t,e){Ne(t,l=>{const a=Oe.value.find(o=>o._id===e);a&&(l.lane=a)}),lt(b),ae.mutate({card_id:t,workspace_lane_id:e})}const{mutate:Gt}=xl(),Jt=(t,e)=>{Gt({payload:{sheet_id:x.value,workspace_id:h.value,variable_slug:t,is_visible:e}})},A=V(()=>{var t,e;return(e=(t=N.value)==null?void 0:t.nodeObj)!=null&&e.style?N.value.nodeObj.style:qe(S)});function D(t,e,l){return t!==void 0?t:e!==void 0?e:l}function oe(t,e){var f;if(!((f=N.value)!=null&&f.nodeObj))return;const l=N.value.nodeObj;l.style||(l.style={});const a=e.target,o=a.type==="number"?Number(a.value):a.value;switch(t){case"bg_color":l.style.background=o;break;case"color":l.style.color=o;break;case"font_size":l.style.fontSize=`${o}px`;break;case"font_weight":l.style.fontWeight=o;break;case"font_style":l.style.fontStyle=o;break;case"font_family":l.style.fontFamily=o;break;case"border_color":l.style.borderColor=o;break;case"border_width":l.style.borderWidth=`${o}px`;break;case"border_radius":l.style.borderRadius=`${o}px`;break;case"padding":l.style.padding=`${o}px`;break}const v=document.getElementById(l.id);v&&He(l,v)}const S={bg_color:"#ffffff",color:"#000000",font_size:14,font_weight:"normal",font_style:"normal",font_family:"Inter",border_color:"#cccccc",border_width:0,border_radius:0,padding:0},K=r(!1);async function Ke(){var e;const t=(e=N.value)==null?void 0:e.nodeObj;if(!(!t||K.value)){K.value=!0;try{const l=Sl(t);l._originalStyle||(l._originalStyle={});const a=l.style||{},o=l._originalStyle,v={bg_color:D(a.background,o.bg_color,S.bg_color),color:D(a.color,o.color,S.color),font_size:D(a.fontSize?parseInt(a.fontSize):void 0,o.font_size,S.font_size),font_weight:D(a.fontWeight,o.font_weight,S.font_weight),font_style:D(a.fontStyle,o.font_style,S.font_style),font_family:D(a.fontFamily,o.font_family,S.font_family),border_color:D(a.borderColor,o.border_color,S.border_color),border_width:D(a.borderWidth?parseInt(a.borderWidth):void 0,o.border_width,S.border_width),border_radius:D(a.borderRadius?parseInt(a.borderRadius):void 0,o.border_radius,S.border_radius),padding:D(a.padding?parseInt(a.padding):void 0,o.padding,S.padding),hyperLink:M.value||l.hyperLink||""};l._originalStyle={...v};const f=l.unique_name==="sheet"?{sheet_id:l.id,workspace_id:h.value,workspace_module_id:T.value,style:v}:{card_id:l.id,seat_id:l.seat_id,style:v};l.unique_name==="sheet"?await Ue(f):await ae.mutateAsync(f)}finally{K.value=!1}}}const Zt=r([]);function Xt(t){const e={id:"root",topic:localStorage.getItem("currentName")??"",isRoot:!0,children:[],style:{},_originalStyle:{},unique_name:"root"};if(!Array.isArray(t))return e;const l={};return t.forEach(a=>{var d,i;const o=((d=a.variables)==null?void 0:d["sheet-title"])||"Untitled",v=((i=a.style)==null?void 0:i.hyperLink)||"";l[o]||(l[o]={id:a._id,topic:o,variables:a==null?void 0:a.variables,children:[],style:a==null?void 0:a.style,_originalStyle:(a==null?void 0:a.style)||{},unique_name:"sheet",hyperLink:v||""},e.children.push(l[o]));const f={id:a==null?void 0:a._id,topic:a.title,children:[],style:qe(a==null?void 0:a.style),_originalStyle:a.style||{},unique_name:"List",hyperLink:v||""};(a.cards||[]).forEach((C,$)=>{var ne;const s=((ne=C.style)==null?void 0:ne.hyperLink)||"",g={id:C._id||`card-${$}`,seat_id:C.seat_id,topic:C["card-title"],style:qe(C.style),_originalStyle:C.style||{},children:[],unique_name:"card",hyperLink:s||""};f.children.push(g),Zt.value=g}),l[o].children.push(f)}),e}const{mutateAsync:el}=kl({onSuccess:()=>{B.invalidateQueries({queryKey:["sheets"]}),B.invalidateQueries({queryKey:["sheet-list"]}),close()}});hl(()=>{p.value!=="mindmap"||!Ce.value||!b.value||Tl(()=>{var v,f;const t=Xt(b.value);pe.value&&((f=(v=pe.value).destroy)==null||f.call(v),pe.value=null);const e=new Set,l=new Set,a=new Set,o=new $l({el:Ce.value,theme:void 0,draggable:!0,contextMenu:!0,toolBar:!0,keypress:!0,locale:"en",overflowHidden:!1,contextMenuOption:{Update:!0,extend:[{name:"Update Node",onclick:()=>{var i;q.value&&(q.value=!1);const d=(i=N.value)==null?void 0:i.nodeObj;d&&L(d)}},{name:"Add Hyperlink",onclick:()=>{vt(async()=>{await Ke()})}}]}});pe.value=o,o.init({nodeData:t}),setTimeout(()=>{o.toCenter()},100),o.bus.addListener("selectNode",d=>{d&&(N.value={nodeObj:d},q.value=!0)}),o.bus.addListener("renderNode",d=>{!(d!=null&&d.nodeObj)||!(d!=null&&d.element)||He(d.nodeObj,d.element)}),o.bus.addListener("operation",async d=>{if(d){if(d.name==="addChild"||d.name==="insertSibling"){const i=d.obj;if(!i||!i.id)return;e.add(i.id);return}if(d.name==="beginEdit"){const i=d.obj;console.log("editing node",i);return}if(d.name==="finishEdit"){const i=d.obj;if(!i||!i.id)return;const C=e.has(i.id),$=l.has(i.id);if(!C&&!$||$)return;if(C){e.delete(i.id),l.add(i.id);const s=i.parent;if(!s||!("unique_name"in s)){l.delete(i.id);return}if(s.unique_name==="root"&&!a.has(i.id)){a.add(i.id);try{await el({variables:{"sheet-title":i.topic??"New Sheet","sheet-description":"This is custom description"},is_ai_generated:!1,workspace_id:h.value,workspace_module_id:T.value})}catch(g){console.error("Error creating workspace sheet:",g),l.delete(i.id),a.delete(i.id)}return}if(s.unique_name==="List"){try{const g=tl({topic:i.topic??"New Card",id:i.id},s);g.variables&&(g.variables["card-description"]="This is a default description"),await Re(g),await Dt()}catch(g){console.error("Error creating card:",g),l.delete(i.id)}return}if(s.unique_name==="sheet"){try{console.log("Creating new list under sheet..."),console.log("List creation logic would go here")}catch(g){console.error("Error creating list:",g),l.delete(i.id)}return}}}}})})});function je(){const t=document.querySelector(".mind-elixir-toolbar.rb");if(!t){requestAnimationFrame(je);return}if(t.querySelector(".open-sidebar-btn"))return;const e=document.createElement("button");e.className="open-sidebar-btn me-toolbar-btn ms-2",e.title="Open Formatting Sidebar",e.innerHTML='<i class="fa-solid fa-sidebar"></i> ',e.addEventListener("click",()=>{q.value=!q.value}),t.appendChild(e)}je();function He(t,e){if(!t||!e||!t.style)return;const l=e.querySelector(".topic"),a=e.querySelector(".node")??e,o=t.style;o.background&&(a.style.background=o.background),o.color&&l&&(l.style.color=o.color),l&&(o.fontSize&&(l.style.fontSize=o.fontSize),o.fontFamily&&(l.style.fontFamily=o.fontFamily),o.fontWeight&&(l.style.fontWeight=o.fontWeight),o.fontStyle&&(l.style.fontStyle=o.fontStyle)),o.borderColor&&(a.style.borderColor=o.borderColor),o.borderWidth&&(a.style.borderWidth=o.borderWidth),o.borderRadius&&(a.style.borderRadius=o.borderRadius),o.padding&&(a.style.padding=o.padding)}function qe(t={}){return{background:t.bg_color,color:t.color,fontSize:t.font_size!=null?`${t.font_size}px`:void 0,fontWeight:t.font_weight,fontStyle:t.font_style,fontFamily:t.font_family,borderColor:t.border_color,borderWidth:t.border_width!=null?`${t.border_width}px`:void 0,borderRadius:t.border_radius!=null?`${t.border_radius}px`:void 0,padding:t.padding!=null?`${t.padding}px`:void 0,hyperLink:t.hyperLink||void 0}}function tl(t,e){const l=new Date,a=l.toISOString().split("T")[0],o=new Date(l.getTime()+3*24*60*60*1e3).toISOString().split("T")[0];return{sheet_list_id:(e==null?void 0:e.topic)||"In Progress",workspace_id:h.value,sheet_id:x.value,workspace_lane_id:(t==null?void 0:t.workspace_lane_id)||null,variables:{"card-status":(e==null?void 0:e.topic)||"In Progress","card-type":null,priority:null,process:null,"card-title":t.topic||"New Card","card-description":"","start-date":a,"end-date":o},createdAt:new Date().toISOString()}}return(t,e)=>{var l,a,o,v,f,d,i,C,$;return c(),y(se,null,[n("div",Bl,[n("div",Ul,[n("div",Ol,[k(ot,{onEditOption:Bt,modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=s=>x.value=s),canEdit:u(it),canDelete:u(rt),onDeleteOption:zt,options:Ft.value,variant:"secondary",customClasses:"fixed w-auto"},{more:H(()=>[u(dt)?(c(),y("div",{key:0,onClick:e[0]||(e[0]=s=>Vt()),class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[38]||(e[38]=[n("i",{class:"fa-solid fa-plus"},null,-1),ke(" Add new ")]))):m("",!0)]),_:1},8,["modelValue","canEdit","canDelete","options"]),n("div",Rl,[(p.value=="kanban",c(),F(ot,{key:0,actions:!1,modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=s=>w.value=s),options:u(E),variant:"secondary",customClasses:"fixed w-auto",onNestedSelect:mt},{more:H(()=>[u(de)?(c(),y("div",{key:0,onClick:e[2]||(e[2]=()=>{J.value=!0}),class:"sticky bottom-0 bg-bg-dropdown shadow-md shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[39]||(e[39]=[n("i",{class:"fa-solid fa-plus"},null,-1),ke(" Add new ")]))):m("",!0)]),_:1},8,["modelValue","options"])),k(El,{onOnChange:e[4]||(e[4]=s=>{te.value=s}),placeholder:"Search in Orchit AI space"}),n("div",Wl,[n("button",{class:I(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",p.value==="kanban"?"text-accent bg-accent-text":" hover:bg-border/50 backdrop-blur-2xl  transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"List view",onClick:e[5]||(e[5]=s=>p.value="kanban")},e[40]||(e[40]=[n("i",{class:"fa-solid fa-chart-kanban"},null,-1)]),2),n("button",{onClick:e[6]||(e[6]=s=>p.value="table"),class:I(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",p.value==="table"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gallery view"},e[41]||(e[41]=[n("i",{class:"fa-solid fa-align-left"},null,-1)]),2),n("button",{onClick:e[7]||(e[7]=s=>p.value="mindmap"),class:I(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",p.value==="mindmap"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"MindMap view"},e[42]||(e[42]=[n("i",{class:"fa-solid fa-chart-diagram"},null,-1)]),2),n("button",{onClick:e[8]||(e[8]=s=>p.value="calendar"),class:I(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",p.value==="calendar"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Calendar view"},e[43]||(e[43]=[n("i",{class:"fa-regular fa-calendar"},null,-1)]),2),n("button",{onClick:e[9]||(e[9]=s=>p.value="gantt"),class:I(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",p.value==="gantt"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Gantt Chart view"},e[44]||(e[44]=[n("i",{class:"fa-solid fa-chart-gantt"},null,-1)]),2),n("button",{onClick:e[10]||(e[10]=s=>p.value="timeline"),class:I(["aspect-square cursor-pointer rounded-sm p-0 px-0.5",p.value==="timeline"?"text-accent bg-accent-text":"hover:bg-border/50 backdrop-blur-2xl transition-all duration-75 hover:outline-border hover:outline hover:text-accent"]),title:"Timeline view"},e[45]||(e[45]=[n("i",{class:"fa-solid fa-timeline"},null,-1)]),2)])])])]),p.value=="kanban"?(c(),y(se,{key:0},[Me(k(Ll,null,null,512),[[Je,u(Le)||u($e)]]),Me(n("div",Kl,[k(u(Ct),{onOnPlus:Mt,board:le.value,"onDelete:column":e[11]||(e[11]=s=>qt(s)),"onUpdate:column":e[12]||(e[12]=s=>It(s)),onReorder:Et,onAddColumn:Be,"onSelect:ticket":L,onOnBoardUpdate:Lt,variable_id:w.value,sheet_id:x.value},{"column-footer":H(s=>{var g,ne,Qe,Ye,Ge;return[(ne=(g=u(ye))==null?void 0:g.transitions)!=null&&ne.all_allowed&&!((Ge=(Ye=(Qe=u(ye))==null?void 0:Qe.transitions)==null?void 0:Ye.all_allowed)!=null&&Ge.includes(s.column.title))&&u(ye).transitions.currentColumn!=s.column.title?(c(),y("div",jl," Disbale ( you can't drop here ) ")):m("",!0)]}),ticket:H(({ticket:s})=>[k(Fl,{selectedVar:w.value,onSelect:()=>{L(s)},ticket:s},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"]),n("div",{class:"min-w-[270px] sm:min-w-[328px]",onClick:e[14]||(e[14]=ie(()=>{},["stop"]))},[ee.value?(c(),y("div",Hl,[k(Xe,{autofocus:!0,modelValue:R.value,"onUpdate:modelValue":e[13]||(e[13]=s=>R.value=s),placeholder:"Add New list",onKeyup:Ze(_e,["enter"])},null,8,["modelValue"]),e[46]||(e[46]=n("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),n("div",Ql,[k(et,{onClick:_e,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:H(()=>[ke(re(u(Ae)?"Adding...":"Add list"),1)]),_:1}),n("i",{class:"fa-solid fa-close",onClick:Fe})])])):(c(),y("button",{key:1,disabled:!u(de),class:I(["text-sm text-text-primary py-2.5 font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",u(de)?"cursor-pointer":"cursor-not-allowed"]),onClick:ie(Fe,["stop"])}," + Add List ",10,Yl))])],512),[[Je,!u(Le)&&!u($e)]])],64)):m("",!0),p.value=="table"?(c(),F(ql,{key:1,onToggleVisibility:Jt,onAddVar:e[15]||(e[15]=()=>{J.value=!0}),isPending:u(Le)||u(St),columns:Rt.value,rows:le.value,canCreate:u(ut),canCreateVariable:u(de),onCreate:Ht},null,8,["isPending","columns","rows","canCreate","canCreateVariable"])):m("",!0),p.value==="mindmap"?(c(),y(se,{key:2},[n("div",Gl,[n("div",{ref_key:"mindMapRef",ref:Ce,class:"flex-1 h-full overflow-hidden rounded-md relative"},null,512),q.value?(c(),y("div",Jl,[n("div",Zl,[e[48]||(e[48]=n("h3",{class:"text-sm font-semibold text-secondary"},"Format Node",-1)),n("button",{onClick:e[16]||(e[16]=s=>q.value=!1),class:"text-gray-400 hover:text-gray-700"},e[47]||(e[47]=[n("i",{class:"fa-solid fa-times"},null,-1)]))]),n("div",Xl,[n("div",null,[e[51]||(e[51]=n("h4",{class:"text-xs font-semibold text-secondary uppercase mb-3"}," Colors ",-1)),n("div",ea,[e[49]||(e[49]=n("label",{class:"block text-xs text-secondary mb-1"},"Background",-1)),n("div",{class:"flex items-center gap-2 cursor-pointer",onClick:e[17]||(e[17]=s=>U.value=!U.value)},[n("div",{class:"w-full h-7 rounded border",style:xe({background:A.value.background})},null,4),n("span",ta,re(A.value.background),1)]),U.value?(c(),y("div",la,[n("div",aa,[(c(),y(se,null,tt(Pe,s=>n("button",{key:s,class:"w-5 h-5 rounded border",style:xe({background:s}),onClick:g=>{oe("bg_color",{target:{value:s}}),U.value=!1}},null,12,oa)),64))]),n("div",na,[n("input",{type:"color",value:A.value.background,class:"w-8 h-8 cursor-pointer",onInput:e[18]||(e[18]=s=>oe("bg_color",s))},null,40,sa),n("input",{type:"text",class:"flex-1 text-xs border rounded px-2 py-1",value:A.value.background,readonly:""},null,8,ia)])])):m("",!0)]),n("div",ra,[e[50]||(e[50]=n("label",{class:"block text-xs text-secondary mb-1"},"Text",-1)),n("div",{class:"flex items-center gap-2 cursor-pointer",onClick:e[19]||(e[19]=s=>O.value=!O.value)},[n("div",{class:"w-full h-7 rounded border",style:xe({background:A.value.color})},null,4),n("span",da,re(A.value.color),1)]),O.value?(c(),y("div",ua,[n("div",ca,[(c(),y(se,null,tt(Pe,s=>n("button",{key:s,class:"w-5 h-5 rounded border",style:xe({background:s}),onClick:g=>{oe("color",{target:{value:s}}),O.value=!1}},null,12,va)),64))]),n("div",pa,[n("input",{type:"color",value:A.value.color,class:"w-8 h-8 cursor-pointer",onInput:e[20]||(e[20]=s=>oe("color",s))},null,40,fa),n("input",{type:"text",class:"flex-1 text-xs border rounded px-2 py-1",value:A.value.color,readonly:""},null,8,ba)])])):m("",!0)])]),n("div",null,[n("div",ma,[n("div",null,[e[53]||(e[53]=n("label",{class:"block text-xs text-secondary mb-1"},"Weight",-1)),n("select",{class:"w-full h-8 border rounded px-2 text-sm",value:A.value.fontWeight,onChange:e[21]||(e[21]=s=>oe("font_weight",s))},e[52]||(e[52]=[n("option",{value:"lighter"},"Light",-1),n("option",{value:"normal"},"Normal",-1),n("option",{value:"bold"},"Bold",-1),n("option",{value:"bolder"},"Extra Bold",-1)]),40,ga)])])])]),n("div",ya,[n("button",{class:"w-full cursor-pointer bg-gradient-to-tr from-accent to-accent-hover text-white flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium hover:shadow-md disabled:opacity-60",disabled:K.value,onClick:Ke},[K.value?(c(),y("span",xa)):m("",!0),n("span",null,re(K.value?"Updating...":"Update"),1)],8,_a)])])):m("",!0)]),be.value?(c(),y("div",ka,[n("div",ha,[e[54]||(e[54]=n("h3",{class:"text-lg font-semibold mb-4"},"Insert Web Link",-1)),Me(n("input",{"onUpdate:modelValue":e[22]||(e[22]=s=>M.value=s),type:"text",placeholder:"Enter or paste a URL",class:"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[wl,M.value]]),n("div",wa,[n("button",{onClick:ft,class:"px-4 py-2 rounded-md bg-gray-200 hover:bg-gray-300"}," Cancel "),n("button",{disabled:!M.value,onClick:pt,class:I(["px-4 py-2 rounded-md text-white",M.value?"bg-blue-500 hover:bg-blue-600":"bg-blue-300 cursor-not-allowed"])}," Insert ",10,Ca)])])])):m("",!0),ee.value?(c(),y("div",{key:1,class:"absolute top-40 left-70 bg-bg-body rounded-lg p-4 shadow-lg z-100 min-w-[328px] border",onClick:e[24]||(e[24]=ie(()=>{},["stop"]))},[k(Xe,{autofocus:!0,modelValue:R.value,"onUpdate:modelValue":e[23]||(e[23]=s=>R.value=s),placeholder:"Add New list",onKeyup:Ze(_e,["enter"])},null,8,["modelValue"]),e[55]||(e[55]=n("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),n("div",Sa,[k(et,{onClick:_e,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:H(()=>[ke(re(u(Ae)?"Adding...":"Add list"),1)]),_:1}),n("i",{class:"fa-solid fa-close cursor-pointer",onClick:Fe})])])):m("",!0)],64)):m("",!0),p.value==="calendar"?(c(),F(Ml,{key:3,data:le.value,"onSelect:ticket":L},null,8,["data"])):m("",!0),p.value==="gantt"?(c(),F(zl,{key:4,data:le.value,"onSelect:ticket":L},null,8,["data"])):m("",!0),p.value==="timeline"?(c(),F(Pl,{key:5,data:le.value,"onSelect:ticket":L},null,8,["data"])):m("",!0)]),k(u(De),{onClick:e[25]||(e[25]=ie(()=>{},["stop"])),modelValue:W.value,"onUpdate:modelValue":e[26]||(e[26]=s=>W.value=s),title:"Delete List",itemLabel:"list",itemName:(l=z.value)==null?void 0:l.title,requireMatchText:(a=z.value)==null?void 0:a.title,confirmText:"Delete List",cancelText:"Cancel",size:"md",loading:u(Ae),onConfirm:Nt,onCancel:e[27]||(e[27]=()=>{W.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),fe.value?(c(),F(u(xt),{selectedVariable:w.value,listId:(o=z.value)==null?void 0:o.title,sheet_id:x.value,key:"createTaskModalKey",modelValue:fe.value,"onUpdate:modelValue":e[28]||(e[28]=s=>fe.value=s),onSubmit:e[29]||(e[29]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):m("",!0),(v=Z.value)!=null&&v._id?(c(),F(u(wt),{key:1,details:Z.value,onClose:e[30]||(e[30]=()=>{L({variables:{}})}),showPanel:!!((f=Z.value)!=null&&f._id)},null,8,["details","showPanel"])):m("",!0),k(u(kt),{size:"md",sheet:P.value,modelValue:X.value,"onUpdate:modelValue":e[31]||(e[31]=s=>X.value=s)},null,8,["sheet","modelValue"]),J.value?(c(),F(u(ht),{key:2,modelValue:J.value,"onUpdate:modelValue":e[32]||(e[32]=s=>J.value=s),sheetID:x.value},null,8,["modelValue","sheetID"])):m("",!0),k(u(De),{onClick:e[33]||(e[33]=ie(()=>{},["stop"])),modelValue:G.value,"onUpdate:modelValue":e[34]||(e[34]=s=>G.value=s),title:"Delete Sheet",itemLabel:"Sheet",itemName:(d=P.value)==null?void 0:d.title,requireMatchText:(i=P.value)==null?void 0:i.title,confirmText:"Delete Sheet",cancelText:"Cancel",size:"md",loading:u(Pt),onConfirm:$t,onCancel:e[35]||(e[35]=()=>{G.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),k(u(De),{modelValue:ve.value,"onUpdate:modelValue":e[36]||(e[36]=s=>ve.value=s),title:"Delete Ticket",itemLabel:"Ticket",itemName:(C=ce.value)==null?void 0:C.title,requireMatchText:($=ce.value)==null?void 0:$.title,confirmText:"Delete Ticket",cancelText:"Cancel",size:"md",loading:we.value,onConfirm:yt,onCancel:e[37]||(e[37]=()=>{ve.value=!1,ce.value=null})},null,8,["modelValue","itemName","requireMatchText","loading"]),e[56]||(e[56]=n("div",null,null,-1))],64)}}}),Pa=Al(Da,[["__scopeId","data-v-a251ad58"]]);export{Pa as default};
