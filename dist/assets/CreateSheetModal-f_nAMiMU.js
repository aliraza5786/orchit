import{d as K,r as c,q as ne,c as D,i as u,j as N,h as b,e as a,B as M,w as x,f as $,A as F,V as H,F as T,x as B,y as z,t as v,aw as ie,o as r,H as X,a as ce,W as ue,bs as de,ae as pe,bt as me,b as O,_ as G,n as W,a8 as Q,S as ve}from"./index-DM66MJAo.js";import{_ as fe}from"./AudioRecorder.vue_vue_type_script_setup_true_lang-Gq8sxN7f.js";const he=["home","user","cog","calendar","search","bell","check","times","plus","minus","trash","pencil","info","question","lock","unlock","star","heart","bookmark","camera","cloud","download","upload","eye","envelope","file","globe","key","map","power-off","edit","save","print","users","bars","mobile","tablet","laptop","desktop","clock","clipboard","flag","comment","comments","share-alt","github","twitter","facebook","linkedin","google","instagram","youtube","whatsapp","chat","cloud-upload","cloud-download","shield","trophy","wrench","tools","rocket","book","map-marker","location","wifi","battery-full","battery-half","battery-empty","volume-up","volume-down","volume-mute","signal","gift","car","truck","bicycle","plane","boat","heart-o","star-o","angle-left","angle-right","angle-double-left","angle-double-right","check-circle","times-circle","exclamation-circle","question-circle","info-circle","circle","circle-thin","square","square-o","circle-o","circle-check","circle-times","circle-info","circle-question","circle-exclamation","play","pause","stop","fast-forward","fast-backward","rewind","forward","backward","eject","volume-off","play-circle","pause-circle","stop-circle","fast-forward-circle","fast-backward-circle","rewind-circle","forward-circle","backward-circle","check-square","times-square","check-circle-o","times-circle-o","pause-circle-o","play-circle-o","search-minus","search-plus","map-pin","share","thumbs-up","thumbs-down","flag-checkered","flag-o","crosshairs","list-ul","list-ol","th-large","th","th-list","th-minus","th-plus","th-x","th-check","th-clock","calendar-minus","calendar-plus","calendar-check","calendar-alt","calendar-day","calendar-week","calendar-times","calendar-range","calendar-week-o","calendar-times-o","circle-thin-o","ellipsis-v","ellipsis-h","forward-fast","backward-fast","ban","lock-open","unlock-alt","lightbulb","eye-slash","clipboard-list","user-plus","user-times","user-lock","user-secret","user-edit","user-circle","user-alt","user-shield","users-cog","users-slash","user-minus","user-check","user-friends","users","user-group","people-carry","user-tag","user-md","user-nurse","user-astronaut","user-tie","user-graduate","user-clock","user-alt-slash","phone","phone-alt","phone-square","phone-square-alt","phone-volume","phone-call","phone-in","phone-out","comment-alt","comments-alt","comment-dots","comments-dots","comments-alt-regular","comment-alt-regular","comments-regular","user-regular","heart-regular","check-regular","times-regular","star-regular","info-regular","question-regular","home-regular","bell-regular","envelope-regular","envelope-open","power-off-regular","arrow-right","arrow-left","arrow-down","arrow-up","arrow-circle-left","arrow-circle-right","arrow-circle-up","arrow-circle-down","arrow-alt-left","arrow-alt-right","arrow-alt-up","arrow-alt-down","chevron-left","chevron-right","chevron-up","chevron-down","caret-left","caret-right","caret-up","caret-down"],ge={key:0,class:"border border-dashed bg-bg-input border-border rounded-xl p-6 flex flex-col items-center text-center"},be={key:1,class:"mt-6"},ke={class:"grid gap-3 w-full"},_e=["onClick","aria-label","title"],xe={class:"max-w-[84px] text-[11px] text-text-secondary truncate"},we={key:0,class:"text-sm text-neutral-400"},ye={key:2,class:"mt-4 p-3 bg-bg-input rounded-lg flex items-center gap-2"},Ce={class:"min-w-0"},Ve={class:"font-medium truncate"},Se=120,$e=K({__name:"IconPicker",props:{modelValue:{}},emits:["update:modelValue"],setup(I,{emit:f}){const g=f,q=c([]),k=c(!1),p=c(""),h=c(1),i=c(["fa"]);ne(()=>{const o=he.map(s=>{const d=`fa-${s}`;return{prefix:"fa",iconName:d,renderClasses:["fa-regular",d],label:s}});o.sort((s,d)=>s.iconName.localeCompare(d.iconName)),q.value=o});const m=D(()=>{const o=p.value.trim().toLowerCase();return q.value.filter(({label:s,iconName:d,prefix:n})=>i.value.includes(n)?o?s.includes(o)||d.includes(o):!0:!1)}),P=D(()=>m.value.slice(0,h.value*Se));function y(o){const s=o.target;s.scrollTop+s.clientHeight>=s.scrollHeight-24&&P.value.length<m.value.length&&(h.value+=1)}function C(o){o?g("update:modelValue",{prefix:o.renderClasses[0],iconName:o.iconName}):g("update:modelValue",null),k.value=!1}function L(){h.value=1,k.value=!k.value}return(o,s)=>{var d;return r(),u("div",null,[!k.value&&!((d=o.modelValue)!=null&&d.iconName)?(r(),u("div",ge,[b(M,{variant:"primary",onClick:L},{default:x(()=>s[2]||(s[2]=[$("Select Icon")])),_:1,__:[2]}),s[3]||(s[3]=a("p",{class:"text-xs text-text-secondary mt-2"},"Browse PrimeIcons",-1))])):k.value?(r(),u("div",be,[a("div",ke,[F(a("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>p.value=n),placeholder:"Search icons…",class:"px-3 py-2 rounded-lg border col-span-full border-border bg-bg-card text-sm placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-accent focus:border-border",type:"text"},null,512),[[H,p.value]]),a("div",{class:"grid gap-2 col-span-full grid-cols-[repeat(auto-fill,minmax(90px,1fr))] max-h-[360px] overflow-auto pr-1 rounded-lg border-border",onScroll:y},[(r(!0),u(T,null,B(P.value,n=>(r(),u("button",{key:n.prefix+n.iconName,type:"button",onClick:U=>C(n),"aria-label":`${n.prefix} ${n.iconName}`,title:`${n.prefix} ${n.iconName}`,class:"group grid place-items-center gap-1.5 p-2 bg-bg-body cursor-pointer border border-transparent rounded-lg text-text-secondary hover:border-border focus:outline-none focus:ring-2 focus:ring-accent"},[a("i",{class:z([n.renderClasses,"text-base"])},null,2),a("small",xe,v(n.iconName),1)],8,_e))),128))],32),m.value.length?N("",!0):(r(),u("p",we," No icons match “"+v(p.value)+"”. ",1))])])):N("",!0),o.modelValue?(r(),u("div",ye,[a("i",{class:z([[o.modelValue.prefix,o.modelValue.iconName],"text-xl"])},null,2),a("div",Ce,[a("p",Ve,v(o.modelValue.iconName),1)]),a("img",{src:ie,onClick:s[1]||(s[1]=n=>C(null)),class:"ml-auto cursor-pointer",alt:"Clear icon"})])):N("",!0)])}}}),Ne=X($e,[["__scopeId","data-v-1ec65acb"]]);function Ie(I){try{const f=I.match(/```json\s*([\s\S]*?)\s*```|({[\s\S]*})/);if(f){const g=f[1]||f[2];return JSON.parse(g)}}catch(f){console.error("JSON parsing failed:",f)}return null}const qe={class:"flex justify-between items-start px-6 border-b border-border pb-4"},Pe={class:"text-xl font-semibold"},Ue={class:"px-6 pt-4 border-b border-border flex gap-6 text-sm font-medium"},Ae=["onClick"],je={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-accent"},Me={class:"px-6 py-6 space-y-6"},Te={key:0,class:"space-y-4"},Be={class:"flex justify-end gap-2 pt-2"},De={key:1,class:"space-y-6"},ze={class:"relative w-full"},Le={class:"neon-flow-border bg-bg-input flex h-[200px] p-4 rounded-2xl relative"},Re={class:"absolute bottom-4 right-4"},Ee={key:2,class:"space-y-4"},Oe={class:"flex flex-wrap gap-2 text-xs"},We=["onClick"],Fe={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},He=["onClick"],Je=["src"],Ge={class:"p-3 py-4"},Qe={class:"text-base font-medium"},Ke={class:"text-sm opacity-75 mt-1 line-clamp-1"},Xe={class:"flex justify-end gap-2 pt-2"},Ye=K({__name:"CreateSheetModal",props:{modelValue:{type:Boolean},sheet:{}},emits:["update:modelValue"],setup(I,{emit:f}){const g=I,q=f,k=ce(),{workspaceId:p,moduleId:h}=ue(),i=c({title:"",description:"",icon:null}),m=c({});function P(){const l={};return i.value.title.trim()||(l.title="Please enter a sheet name."),i.value.description.trim()||(l.description="Please enter a description."),m.value=l,Object.keys(l).length===0}const{mutate:y,isPending:C}=de({onSuccess:()=>{k.invalidateQueries({queryKey:["sheets"]}),d()}}),{mutate:L,isPending:o}=pe({onSuccess:()=>d()});function s(){var l;P()&&((l=g.sheet)!=null&&l._id?L({sheet_id:g.sheet._id,icon:i.value.icon,variables:{"sheet-title":i.value.title,"sheet-description":i.value.description},is_ai_generated:!1,workspace_id:p.value,workspace_module_id:h.value}):y({icon:i.value.icon,variables:{"sheet-title":i.value.title,"sheet-description":i.value.description},is_ai_generated:!1,workspace_id:p.value,workspace_module_id:h.value}))}function d(){i.value={title:"",description:"",icon:null},m.value={},n.value=!1}const n=D({get:()=>g.modelValue,set:l=>q("update:modelValue",l)}),U=c(!1),R=c(null),_=c(""),E=c(!1),{mutate:Y}=me({onSuccess:l=>{const e=Ie(l)??{};y({icon:(e==null?void 0:e.icon)??"",variables:{"sheet-title":(e==null?void 0:e.title)??"","sheet-description":(e==null?void 0:e.description)??""},is_ai_generated:!0,workspace_id:p.value,workspace_module_id:h.value}),E.value=!1},onError:()=>{E.value=!1}});function Z(){_.value.trim()&&(E.value=!0,Y({module_id:h.value,idea:_.value,workspace_id:p.value}))}const ee=[{label:"Manual",value:"manual"},{label:"Generate with AI",value:"ai"},{label:"Templates",value:"templates"}],V=c("manual"),te=c([{id:"concept",title:"Product Concept",subtitle:"Early stage ideation board.",cover:"https://placehold.co/600x300",tags:["Experience Design","Development"]},{id:"launch",title:"Launch Prep",subtitle:"Prepare assets for product launch.",cover:"https://placehold.co/600x300",tags:["Marketing","Project Management"]}]),A=c(""),ae=c([{name:"Experience Design"},{name:"Development"},{name:"Marketing"},{name:"Project Management"}]),w=c(new Set);function le(l){w.value.has(l)?w.value.delete(l):w.value.add(l)}const se=D(()=>te.value.filter(l=>(!A.value||l.title.toLowerCase().includes(A.value.toLowerCase()))&&(w.value.size===0||l.tags.some(e=>w.value.has(e))))),S=c(null);function oe(l){S.value=l}function re(){S.value&&y({icon:null,variables:{"sheet-title":S.value.title,"sheet-description":S.value.subtitle},is_ai_generated:!1,workspace_id:p.value,workspace_module_id:h.value})}return(l,e)=>(r(),O(ve,{modelValue:n.value,"onUpdate:modelValue":e[9]||(e[9]=j=>n.value=j),size:"lg"},{default:x(()=>{var j;return[a("div",qe,[a("h2",Pe,v((j=l.sheet)!=null&&j._id?"Update Sheet":"Add a new Sheet"),1)]),a("div",Ue,[(r(),u(T,null,B(ee,t=>a("button",{key:t.value,onClick:J=>V.value=t.value,class:z(["pb-3 relative",V.value===t.value?"text-text-primary":"text-text-secondary"])},[$(v(t.label)+" ",1),V.value===t.value?(r(),u("div",je)):N("",!0)],10,Ae)),64))]),a("div",Me,[V.value==="manual"?(r(),u("section",Te,[b(Ne,{modelValue:i.value.icon,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value.icon=t)},null,8,["modelValue"]),b(G,{modelValue:i.value.title,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value.title=t),label:"Sheet name",size:"lg",placeholder:"Design Ideas",error:!!m.value.title,message:m.value.title},null,8,["modelValue","error","message"]),b(G,{modelValue:i.value.description,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value.description=t),label:"Description",size:"lg",textarea:"",placeholder:"A short description",error:!!m.value.description,message:m.value.description},null,8,["modelValue","error","message"]),a("div",Be,[a("button",{class:"px-4 py-2 rounded-md text-sm text-text-secondary border",onClick:d},"Cancel"),b(M,{class:"px-4",onClick:s},{default:x(()=>[$(v(W(C)||W(o)?"Saving...":"Save"),1)]),_:1})])])):V.value==="ai"?(r(),u("section",De,[a("div",ze,[a("div",Le,[!U.value&&!R.value?F((r(),u("textarea",{key:0,"onUpdate:modelValue":e[3]||(e[3]=t=>_.value=t),placeholder:"Ask Orchit AI to create a sheet...",class:"w-full h-full resize-none outline-none bg-transparent text-sm"},null,512)),[[H,_.value]]):N("",!0),_.value?(r(),O(Q,{key:2,name:"rotate-fade",appear:""},{default:x(()=>[a("div",{onClick:e[7]||(e[7]=t=>Z()),class:"absolute bottom-4 right-4 w-9 h-9 bg-accent rounded-md flex items-center justify-center cursor-pointer shadow"},e[10]||(e[10]=[a("i",{class:"text-white fa-solid fa-arrow-right"},null,-1)]))]),_:1})):(r(),O(Q,{key:1,name:"fade-slide",appear:""},{default:x(()=>[a("div",Re,[b(fe,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=t=>_.value=t),isRecording:U.value,"onUpdate:isRecording":e[5]||(e[5]=t=>U.value=t),hasAudio:R.value,"onUpdate:hasAudio":e[6]||(e[6]=t=>R.value=t)},null,8,["modelValue","isRecording","hasAudio"])])]),_:1}))])])])):(r(),u("section",Ee,[F(a("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>A.value=t),class:"w-full border rounded-lg p-2 text-sm border-border",placeholder:"Search"},null,512),[[H,A.value]]),a("div",Oe,[(r(!0),u(T,null,B(ae.value,t=>(r(),u("button",{key:t.name,class:z(["px-3.5 py-1.5 rounded-md",w.value.has(t.name)?"bg-black text-white":"bg-bg-body text-text-secondary"]),onClick:J=>le(t.name)},v(t.name),11,We))),128))]),a("div",Fe,[(r(!0),u(T,null,B(se.value,t=>(r(),u("button",{key:t.id,class:"border border-border rounded-xl overflow-hidden text-left hover:shadow-sm",onClick:J=>oe(t)},[a("img",{src:t.cover,class:"w-full h-36 object-cover"},null,8,Je),a("div",Ge,[a("div",Qe,v(t.title),1),a("div",Ke,v(t.subtitle),1)])],8,He))),128))]),a("div",Xe,[b(M,{variant:"secondary",onClick:d},{default:x(()=>e[11]||(e[11]=[$("Cancel")])),_:1,__:[11]}),b(M,{disabled:!S.value,onClick:re},{default:x(()=>[$(v(W(C)?"Adding...":"Add board"),1)]),_:1},8,["disabled"])])]))])]}),_:1},8,["modelValue"]))}}),tt=X(Ye,[["__scopeId","data-v-8a62aaa2"]]);export{tt as default};
