import{d as X,c as d,l as a,o as s,m as i,F as S,y as D,E as ue,h as l,M as ce,I as Y,r as g,n as ve,k as pe,z as n,e as G,aU as H,t as C,aa as me,w as fe,j as k,J as xe,i as Q}from"./index-C1NcSBTl.js";import{o as be}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-BFUR35j8.js";const he={class:"p-4 overflow-x-auto flex-auto flex gap-6","aria-busy":"true","aria-live":"polite"},ye={class:"flex-1 w-full overflow-y-auto space-y-3 px-2 pb-2",role:"presentation"},we={key:0,class:"min-w-[328px]",role:"presentation"},ge=X({__name:"KanbanSkeleton",props:{columns:{default:3},cardsPerColumn:{default:3},showAddList:{type:Boolean,default:!0}},setup(N){const h=N,p=d(()=>Array.from({length:h.columns},(m,o)=>o)),y=d(()=>Array.from({length:h.cardsPerColumn},(m,o)=>o));return(m,o)=>(s(),a("div",he,[(s(!0),a(S,null,D(p.value,(_,u,B,x)=>{const w=[h.cardsPerColumn];if(x&&x.key===_&&ue(x,w))return x;const b=(s(),a("div",{key:_,class:"kanban-col max-w-[328px] min-w-[328px] min-h-[555px] h-full bg-bg-body rounded-lg p-2 flex flex-col",role:"presentation"},[o[4]||(o[4]=l("div",{class:"flex justify-between items-center py-3 px-4 sticky top-0 bg-bg-body rounded-xl mb-2 z-10",role:"presentation"},[l("div",{class:"flex items-center gap-2"},[l("div",{class:"h-4 w-24 rounded shimmer","aria-hidden":"true"}),l("div",{class:"h-4 w-4 rounded-full shimmer","aria-hidden":"true"})]),l("div",{class:"flex items-center gap-2"},[l("div",{class:"h-4 w-4 rounded shimmer","aria-hidden":"true"}),l("div",{class:"h-4 w-4 rounded shimmer","aria-hidden":"true"})])],-1)),l("div",ye,[(s(!0),a(S,null,D(y.value,c=>(s(),a("div",{key:c,class:"bg-bg-card rounded-xl border border-border p-3 space-y-3 shadow-sm",role:"presentation"},o[2]||(o[2]=[ce('<div class="flex gap-2" data-v-b80995d1><div class="h-5 w-14 rounded-full shimmer" aria-hidden="true" data-v-b80995d1></div><div class="h-5 w-10 rounded-full shimmer" aria-hidden="true" data-v-b80995d1></div></div><div data-v-b80995d1><div class="h-4 w-3/4 rounded shimmer mb-2" aria-hidden="true" data-v-b80995d1></div><div class="h-3 w-full rounded shimmer" aria-hidden="true" data-v-b80995d1></div><div class="h-3 w-5/6 rounded shimmer mt-1" aria-hidden="true" data-v-b80995d1></div></div><div class="flex justify-between items-center" data-v-b80995d1><div class="h-4 w-20 rounded shimmer" aria-hidden="true" data-v-b80995d1></div><div class="flex -space-x-2" data-v-b80995d1><div class="w-6 h-6 rounded-full border-2 border-border shimmer" aria-hidden="true" data-v-b80995d1></div><div class="w-6 h-6 rounded-full border-2 border-border shimmer" aria-hidden="true" data-v-b80995d1></div></div></div>',3)])))),128)),o[3]||(o[3]=l("div",{class:"h-9 rounded shimmer mt-3","aria-hidden":"true"},null,-1))])]));return b.memo=w,b},o,0),128)),h.showAddList?(s(),a("div",we,o[5]||(o[5]=[l("div",{class:"bg-bg-body rounded-lg p-4"},[l("div",{class:"h-9 rounded shimmer","aria-hidden":"true"})],-1)]))):i("",!0)]))}}),Je=Y(ge,[["__scopeId","data-v-b80995d1"]]),ke=["src"],_e={key:0,class:"font-bold"},Ce={class:"text-nowrap"},$e=["onClick","onMouseenter"],ze={class:"flex items-center gap-2 min-w-0 flex-1"},Se=["src"],De={class:"flex flex-col gap-1 max-w-40"},Ne={class:"overflow-hidden font-semibold overflow-ellipsis"},Be={key:0,class:"min-w-40 line-clamp-2 text-wrap text-text-secondary text-xs"},Ie={key:1,class:"fa-regular text-left fa-arrows-spin animate-spin duration-250"},Ve={key:0,class:"pl-2 flex items-center relative ml-auto"},Ee={class:"py-1 text-sm"},Me=["onClick"],Ae={key:1,class:"pl-2 flex items-center relative"},je=["onClick","aria-expanded","aria-label"],Pe={class:"rounded-md border border-border bg-bg-dropdown shadow-lg w-28 py-1 flex flex-col text-sm"},Ke=["onClick"],Le=["onClick"],Oe=X({__name:"Dropdown",props:{prefix:{},options:{default:()=>[]},modelValue:{default:""},variant:{default:"primary"},icon:{},size:{default:"md"},actions:{type:Boolean,default:!0},canEdit:{type:Boolean,default:!0},canDelete:{type:Boolean,default:!0},customClasses:{default:""}},emits:["update:modelValue","edit-option","delete-option","nested-select"],setup(N,{emit:h}){const p=N,y=h,m=g(!1),o=g(null),_=d({get:()=>p.modelValue,set:e=>y("update:modelValue",e)}),u=d(()=>p.options.find(e=>e._id===_.value)??null);function B(){m.value=!m.value}function x(e){_.value=e._id,m.value=!1,b.value=null}const w=g(null),b=g(null),c=g(null);function Z(e){var r;(r=e.nested)!=null&&r.length?b.value=b.value===e._id?null:e._id:x(e)}function ee(e,r){y("nested-select",e),x(r)}const $=g(null);function se(e){$.value=null,c.value=c.value===e?null:e}function te(e){y("edit-option",e),c.value=null,$.value=null}function le(e){y("delete-option",e),c.value=null,$.value=null}be(o,()=>{m.value=!1,c.value=null,$.value=null});const f=d(()=>p.size==="sm"),ae=d(()=>f.value?"px-2 py-1 text-xs":"px-3 py-1.5 text-sm"),re=d(()=>f.value?"text-xs":"text-sm"),oe=d(()=>f.value?"text-xs":"text-sm"),ne=d(()=>f.value?"px-3 py-1":"px-4 py-2"),I=d(()=>f.value?"w-3.5 h-3.5":"w-4 h-4"),z=d(()=>f.value?"w-3.5 h-3.5":"w-4 h-4"),V=d(()=>f.value?"text-base":"text-lg"),de=d(()=>f.value?"w-3.5 h-3.5":"w-4 h-4"),ie=d(()=>"dark:border-light-black border-border-gray");return ve(()=>p.options,()=>{},{deep:!0}),(e,r)=>{var E,M,A,j,P,K,L,O,R,T,F;return s(),a("div",{ref_key:"dropdownRef",ref:o,class:"relative inline-block text-left"},[l("button",{onClick:B,type:"button",class:n(["text-nowrap inline-flex justify-between items-center gap-1 border rounded-[6px] font-medium cursor-pointer transition bg-bg-surface",[ae.value,e.variant==="secondary"?"!bg-bg-body border-0":"border-border"]])},[(E=u.value)!=null&&E.prefix?(s(),a("span",{key:0,class:n(I.value)},[typeof((M=u.value)==null?void 0:M.prefix)=="string"?(s(),a("img",{key:0,src:(A=u.value)==null?void 0:A.prefix,class:n(z.value)},null,10,ke)):(s(),G(H((j=u.value)==null?void 0:j.prefix),{key:1,class:n(z.value)},null,8,["class"]))],2)):i("",!0),l("i",{class:n(`${(K=(P=u.value)==null?void 0:P.icon)==null?void 0:K.prefix} ${(O=(L=u.value)==null?void 0:L.icon)!=null&&O.iconName?(T=(R=u.value)==null?void 0:R.icon)==null?void 0:T.iconName:"file"} ${V.value}`)},null,2),l("span",{class:n(re.value)},[e.prefix?(s(),a("span",_e,C(e.prefix)+":",1)):i("",!0),l("span",Ce,C((F=u.value)==null?void 0:F.title),1)],2),(s(),a("svg",{class:n([de.value,"text-text-secondary"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},r[4]||(r[4]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),pe(me,{name:"fade-scale","enter-active-class":"transition duration-200 ease-out","leave-active-class":"transition duration-150 ease-in","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:fe(()=>[m.value?(s(),a("div",{key:0,class:n(["max-h-[500px] overflow-visible z-12 mt-1 min-w-fit rounded-[6px] border border-border shadow-lg bg-bg-dropdown",[ie.value,p.customClasses?p.customClasses:"absolute w-full"]]),onClick:r[3]||(r[3]=k(()=>{},["stop"]))},[l("ul",{class:n(["py-1 z-[2]",oe.value])},[(s(!0),a(S,null,D(e.options,t=>{var J,U,W,q;return s(),a("li",{key:t._id,class:n(["group cursor-pointer flex items-stretch text-nowrap hover:bg-bg-dropdown-menu-hover",ne.value]),onClick:v=>Z(t),onMouseenter:v=>w.value=t._id,onMouseleave:r[2]||(r[2]=v=>w.value=null)},[l("div",ze,[t.prefix?(s(),a("span",{key:0,class:n(I.value)},[typeof t.prefix=="string"?(s(),a("img",{key:0,src:t.prefix,class:n(z.value)},null,10,Se)):(s(),G(H(t.prefix),{key:1,class:n(["text-text-primary",z.value])},null,8,["class"]))],2)):i("",!0),l("i",{class:n(`${(J=t.icon)==null?void 0:J.prefix} ${(U=t.icon)!=null&&U.iconName?(W=t.icon)==null?void 0:W.iconName:"file"} ${V.value}`)},null,2),l("div",De,[l("span",Ne,C(t.title),1),t.description?(s(),a("p",Be,C(t.description),1)):i("",!0)]),(t==null?void 0:t.status)=="running"?(s(),a("i",Ie)):i("",!0)]),(q=t.nested)!=null&&q.length?(s(),a("div",Ve,[r[5]||(r[5]=l("span",{class:"text-text-secondary"},"...",-1)),w.value===t._id||b.value===t._id?(s(),a("div",{key:0,class:"absolute left-[30px] top-[-5px] ml-1 z-[30] min-w-48 bg-bg-dropdown border border-border rounded-md shadow-lg max-h-60 overflow-y-auto",onClick:r[0]||(r[0]=k(()=>{},["stop"]))},[l("ul",Ee,[(s(!0),a(S,null,D(t.nested,v=>(s(),a("li",{key:v._id,class:"px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer",onClick:Re=>ee(v,t)},C(v.title),9,Me))),128))])])):i("",!0)])):e.actions&&e.canEdit&&e.canDelete?(s(),a("div",Ae,[l("button",{class:"opacity-0 cursor-pointer group-hover:opacity-100 focus:opacity-100 transition rounded-md px-1.5 py-1 text-text-secondary hover:bg-bg-dropdown-menu-hover",onClick:k(v=>se(t._id),["stop"]),"aria-expanded":c.value===t._id?"true":"false","aria-label":`Actions for ${t.title}`}," â‹¯ ",8,je),c.value===t._id?(s(),a("div",{key:0,class:"absolute left-[100%] right-0 top-full mt-1 z-[20]",onClick:r[1]||(r[1]=k(()=>{},["stop"]))},[l("div",Pe,[e.canEdit?(s(),a("button",{key:0,class:"px-3 py-1.5 text-left hover:bg-bg-dropdown-menu-hover cursor-pointer",onClick:k(v=>te(t),["stop"])},r[6]||(r[6]=[l("i",{class:"fa-regular fa-edit"},null,-1),Q(" Edit ")]),8,Ke)):i("",!0),e.canDelete?(s(),a("button",{key:1,class:"px-3 py-1.5 text-left text-red-600 cursor-pointer",onClick:k(v=>le(t),["stop"])},r[7]||(r[7]=[l("i",{class:"fa-regular fa-trash"},null,-1),Q(" Delete ")]),8,Le)):i("",!0)])])):i("",!0)])):i("",!0)],42,$e)}),128)),xe(e.$slots,"more",{},void 0,!0)],2)],2)):i("",!0)]),_:3})],512)}}}),Ue=Y(Oe,[["__scopeId","data-v-8321361d"]]);export{Ue as D,Je as K};
