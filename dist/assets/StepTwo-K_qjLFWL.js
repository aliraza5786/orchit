import{d as W,u as Y,r as f,c as b,O as G,x as h,m as c,o as u,g as a,t as r,n as k,G as T,E as O,ak as V,y as S,l as P,z as X,aB as J,h as x,_ as K,T as Q,w as $,k as L,B as N,N as R}from"./index-BMHMOIQE.js";import{_ as Z}from"./whitePlus-Cs_P7rE9.js";import{_ as ee}from"./BaseTextAreaField.vue_vue_type_script_setup_true_lang-u64Ir6gr.js";const te={class:"w-full"},ae={class:"text-2xl md:text-4xl font-semibold text-text-primary text-left m-0"},le={class:"text-sm md:text-base text-text-secondary text-left mt-3 sm:mt-5.5 mb-0"},se={class:"flex flex-col items-start gap-4 w-full pb-[60px]"},oe=["for"],re={class:"flex gap-3 flex-1 min-w-0"},ne={class:"flex flex-col gap-1 min-w-0"},ie={class:"font-medium capitalize text-sm text-text-primary"},de={class:"text-[11px] text-text-secondary text-start line-clamp-1"},ce={class:"flex gap-3 items-center"},ue=["onClick"],pe=["name","id","value"],me={key:1,class:"bg-bg-surface border border-border w-full px-4 pt-4 rounded-lg"},fe={class:"text-lg text-text-primary mb-3 font-semibold"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},be={class:""},xe={key:0,class:"text-red-500 text-sm -mt-2 mb-2"},ge={class:"flex items-center gap-3"},ye={class:"relative block w-10 h-10 rounded-full border border-border cursor-pointer"},_e={class:"flex flex-col"},we={class:"text-xs text-text-secondary"},he={class:"flex gap-2 mt-4 justify-end border-t border-border bg-bg-surface py-4"},ke=W({__name:"StepTwo",props:{ai:{type:Boolean}},emits:["next"],setup(Ce,{expose:A,emit:B}){const p=Y(),E=p.workspace||{},n=f({lanes:E.lanes||[]}),s=f({id:"","lane-title":"","lane-description":"","lane-color":"#4169E1"}),j=b(()=>{try{const t=p.workspace;if(!t)return[];const e=t;return!e.lanes||!Array.isArray(e.lanes)?[]:e.lanes.map(l=>{var m;return(m=l.variables)==null?void 0:m.id}).filter(Boolean)}catch(t){return console.warn("Failed to parse workspace from localStorage:",t),[]}}),v=f(j.value??[]),i=f(!1),d=f(!1),o=G({title:!1,description:!1,color:!1}),g=b(()=>{if(!o.title)return"";const t=(s.value["lane-title"]||"").trim();return t?t.length<3?"Lane Name must be at least 3 characters":"":"Lane Name is required"}),y=b(()=>o.description?(s.value["lane-description"]||"").trim()?"":"Description is required":""),_=b(()=>o.color?/^#([0-9A-Fa-f]{6})$/.test(s.value["lane-color"]||"")?"":"Pick a valid 6-digit HEX color":"");function z(){i.value=!0,d.value=!1}function F(){i.value=!1,d.value=!1,w()}function U(){if(!C())return;const t=`lane${n.value.lanes.length+1}`;v.value.push(t),n.value.lanes.push({variables:{...s.value,id:t}}),i.value=!1,w()}function I(){if(!C())return;const t=n.value.lanes.findIndex(e=>e.variables.id===s.value.id);t!==-1&&(n.value.lanes[t]={variables:{...s.value}}),i.value=!1,d.value=!1,w()}function w(){s.value={id:"","lane-title":"","lane-description":"","lane-color":"#4169E1"},o.title=!1,o.description=!1,o.color=!1}function D(t){s.value={...t.variables},i.value=!0,d.value=!0}const M=()=>{const t=n.value.lanes.filter(e=>v.value.some(l=>l==e.variables.id));p.setWorkspace({...p.workspace,variables:{...p.workspace.variables},lanes:[...t]})};function q(){n.value.lanes.length>0&&(M(),H("next"))}function C(){return o.title=!0,o.description=!0,o.color=!0,!g.value&&!y.value&&!_.value}A({continueHandler:q});const H=B;return h(()=>s.value["lane-title"],t=>{t!=null&&t.trim()&&o.title&&(o.title=!1)}),h(()=>s.value["lane-description"],t=>{t!=null&&t.trim()&&o.description&&(o.description=!1)}),h(()=>s.value["lane-color"],t=>{/^#([0-9A-Fa-f]{6})$/.test(t)&&o.color&&(o.color=!1)}),(t,e)=>(u(),c(T,null,[a("div",te,[a("h2",ae,r(t.ai?" Choose Your Tabes":"Create Your Tabes"),1),a("p",le,r(t.ai?" Select the components you want to include in your project":" Create the components you want to include in your project"),1)]),a("div",se,[(u(!0),c(T,null,O(n.value.lanes,l=>(u(),c("label",{key:l.variables.id,for:`lane-${l.variables.id}`,class:"rounded-lg relative flex justify-between gap-4 lg:gap-5 items-center w-full p-4 cursor-pointer transition-all bg-bg-surface border border-border"},[a("div",re,[a("div",{class:"w-9 h-9 shrink-0 text-text-primary rounded-lg",style:V({background:l.variables["lane-color"]})},null,4),a("div",ne,[a("h3",ie,r(l.variables["lane-title"]),1),a("p",de,r(l.variables["lane-description"]),1)])]),a("div",ce,[a("button",{class:"w-5 h-5 text-base aspect-square flex justify-center items-center rounded cursor-pointer text-accent",onClick:P(m=>D(l),["stop"])},e[8]||(e[8]=[a("i",{class:"fa-solid fa-edit text-text-primary text-[20px]"},null,-1)]),8,ue),S(a("input",{type:"checkbox",class:"sr-only peer",name:`lane-${l.variables.id}`,id:`lane-${l.variables.id}`,"onUpdate:modelValue":e[0]||(e[0]=m=>v.value=m),value:l.variables.id},null,8,pe),[[X,v.value]]),e[9]||(e[9]=a("div",{class:"w-[20px] h-[20px] flex justify-center items-center border border-border bg-bg-card p-0.5 rounded cursor-pointer peer-checked:bg-accent peer-checked:border-none transition-all"},[a("i",{class:"w-4 text-bg-card fa-solid fa-check peer-checked:text-white"})],-1))])],8,oe))),128)),i.value?k("",!0):(u(),c("label",{key:0,class:"rounded-lg w-full relative p-4 cursor-pointer transition-all bg-bg-surface border border-border",onClick:z},e[10]||(e[10]=[J('<div class="flex gap-2 items-center justify-center" data-v-26bcb24e><div class="p-2.5 bg-accent rounded-full" data-v-26bcb24e><img class="w-3" src="'+Z+'" alt="" data-v-26bcb24e></div><div class="flex flex-col justify-center" data-v-26bcb24e><h3 class="font-medium capitalize text-sm text-text-primary" data-v-26bcb24e>Add Custom Tabs</h3><p class="text-[11px] text-text-secondary mt-1 line-clamp-1" data-v-26bcb24e>Create your own component</p></div></div>',1)]))),i.value?(u(),c("div",me,[a("h1",fe,r(d.value?"Update Tab":"Add Custom Tab"),1),a("div",ve,[x(K,{label:"Tab Name",placeholder:"Tab Name",size:"lg",modelValue:s.value["lane-title"],"onUpdate:modelValue":e[1]||(e[1]=l=>s.value["lane-title"]=l),error:!!g.value,message:g.value,onBlur:e[2]||(e[2]=l=>o.title=!0)},null,8,["modelValue","error","message"]),a("div",be,[e[12]||(e[12]=a("label",{class:"block text-base font-medium text-text-primary mb-2"},"Set Tab Color",-1)),_.value?(u(),c("p",xe,"("+r(_.value)+")",1)):k("",!0),a("div",ge,[a("label",ye,[S(a("input",{type:"color","onUpdate:modelValue":e[3]||(e[3]=l=>s.value["lane-color"]=l),class:"absolute inset-0 opacity-0 cursor-pointer",onInput:e[4]||(e[4]=l=>o.color=!0)},null,544),[[Q,s.value["lane-color"]]]),a("div",{class:"w-full h-full rounded-full",style:V({backgroundColor:s.value["lane-color"]})},null,4)]),a("div",_e,[e[11]||(e[11]=a("span",{class:"text-sm text-text-primary"},"Set Color",-1)),a("span",we,r(s.value["lane-color"]),1)])])]),x(ee,{class:"col-span-full",modelValue:s.value["lane-description"],"onUpdate:modelValue":e[5]||(e[5]=l=>s.value["lane-description"]=l),label:"Description",placeholder:"This tab will track support tickets.",error:!!y.value,message:y.value,onBlur:e[6]||(e[6]=l=>o.description=!0)},null,8,["modelValue","error","message"])]),a("div",he,[x(N,{size:"md",variant:"primary",onClick:e[7]||(e[7]=l=>d.value?I():U())},{default:$(()=>[L(r(d.value?"Update Tab":"Add Tab"),1)]),_:1}),x(N,{size:"md",variant:"secondary",onClick:F},{default:$(()=>e[13]||(e[13]=[L("Cancel")])),_:1,__:[13]})])])):k("",!0)])],64))}}),$e=R(ke,[["__scopeId","data-v-26bcb24e"]]);export{$e as default};
