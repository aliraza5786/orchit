const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-B6iBTewf.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-Bsais22G.js","assets/index-CEH2ONcs.js","assets/index-BerHL6iJ.css","assets/CreateSheetModal-Cia-8QGi.js","assets/useOpenAIGeneration-BCw9zJYR.js","assets/CreateSheetModal-BPf3BB8o.css","assets/CreateVariableModal-dELTIDWK.js","assets/ConfirmDeleteModal-DQqHUOCH.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-C95vBMmk.js","assets/SidePanel-jswCuen-.js","assets/SidePanel-CIc_IcPK.css","assets/KanbanBoard-Cd2e-cRD.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-CxyUhKMa.js","assets/workspace-CUUCyNhW.js","assets/KanbanBoard-CJVPdV8K.css"])))=>i.map(i=>d[i]);
import{d as _e,W as ke,aD as Be,c as M,r as d,m as K,a as ye,aa as Oe,ab as Re,$ as we,i as y,F as Ce,e as s,ac as Ne,y as ze,j as I,t as A,h as r,g as m,w as L,s as fe,bd as je,n as i,U as He,o as p,H as Ve,a2 as Qe,Y as We,ad as Fe,a3 as Ye,a4 as Ge,ae as Je,b as X,A as be,f as Z,C as ge,a5 as T,a9 as Xe,_ as Ze,B as et,a6 as S,p as tt}from"./index-CEH2ONcs.js";import{u as at}from"./workspace-CUUCyNhW.js";import{D as xe,K as lt}from"./KanbanSkeleton-LlNSYaki.js";import{_ as st}from"./SearchBar.vue_vue_type_script_setup_true_lang-Du4uCMx9.js";import{_ as ot}from"./DropMenu.vue_vue_type_script_setup_true_lang-CxyUhKMa.js";import{_ as it}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-C95vBMmk.js";const dt={class:"flex justify-between gap-2 items-start mb-3"},rt={class:"flex gap-2 flex-wrap items-center"},nt={key:0,class:"text-[10px] px-2 py-1 h-6 rounded bg-bg-surface/60 text-text-secondary font-medium uppercase"},ut={key:1,class:"text-[10px] px-2 py-1 h-6 rounded bg-accent/20 text-accent font-medium"},ct={class:"product-menu-icon transition-all w-6 py-1 px-2 h-6 flex justify-center items-center duration-100 ease-in-out bg-bg-surface/40 rounded-md"},mt={class:"text-sm font-medium text-card-foreground leading-tight mb-2 capitalize"},vt={class:"flex justify-between items-center mt-3 pt-3 border-t border-border/50"},pt={class:"flex items-center gap-3 flex-1"},ft={class:"flex items-center gap-2"},bt={class:"flex items-center gap-1 text-xs text-text-secondary"},gt={class:"flex items-center gap-1 text-xs text-text-secondary"},xt=_e({__name:"KanbanTicket",props:{ticket:{},selectedVar:{}},emits:["click"],setup(ee){const{workspaceId:B,moduleId:Q}=ke(),{data:W}=Be(B.value),u=ee,F={critical:"border-l-priority-critical",high:"border-l-priority-high",medium:"border-l-priority-medium",low:"border-l-priority-low"},Y=M(()=>F[u.ticket.priority]??"border-l-gray-300"),v=d(!1),P=d(u.ticket["end-date"]??null),f=d(u.ticket["start-date"]??null);K(()=>{var l;return(l=u.ticket)==null?void 0:l["end-date"]},l=>{P.value=l??null}),K(()=>{var l;return(l=u.ticket)==null?void 0:l["start-date"]},l=>{f.value=l??null});const n=ye(),w=Oe({onSuccess:()=>{n.invalidateQueries({queryKey:["people-lists"]}),n.invalidateQueries({queryKey:["get-sheets"]}),n.invalidateQueries({queryKey:["sheet-list"]}),n.invalidateQueries({queryKey:["roles"]})}}),{mutate:G,isPending:$}=Re(u.ticket._id,{onSuccess:()=>{n.invalidateQueries({queryKey:["sheet-list"]}),v.value=!1}});function O(){return[{label:"Delete",danger:!0,action:()=>{v.value=!0}}]}const R=()=>{G({})},C=l=>{const a={card_id:u.ticket._id,seat_id:l==null?void 0:l._id};w.mutate(a)},J=l=>{w.mutate({card_id:u.ticket._id,variables:{"end-date":l}})},{data:U}=we(B.value,Q.value),c=M(()=>U.value.filter(l=>l._id==u.selectedVar));return(l,a)=>{var g,N,E,x,_,V,b;return p(),y(Ce,null,[s("div",{onClick:a[4]||(a[4]=z=>l.$emit("click")),class:ze(["product-ticket relative bg-bg-card rounded-lg p-4 shadow-sm cursor-grab border-t-4 hover:shadow-md transition-all duration-200 active:cursor-grabbing",Y.value]),style:Ne({borderColor:(N=(g=l.ticket)==null?void 0:g.lane)==null?void 0:N.variables["lane-color"]})},[s("div",dt,[s("div",rt,[l.ticket["card-type"]&&((E=c.value[0])==null?void 0:E.slug)!="card-type"?(p(),y("span",nt,A(l.ticket["card-type"]),1)):I("",!0),l.ticket["card-status"]&&((x=c.value[0])==null?void 0:x.slug)!="card-status"?(p(),y("span",ut,A(l.ticket["card-status"]),1)):I("",!0)]),s("div",ct,[r(ot,{onClick:a[0]||(a[0]=m(()=>{},["stop"])),items:O()},{trigger:L(()=>a[11]||(a[11]=[s("i",{class:"cursor-pointer text-sm fa-solid fa-ellipsis"},null,-1)])),_:1},8,["items"])])]),s("h3",mt,A(l.ticket["card-title"]),1),a[1]||(fe(-1,!0),(a[1]=s("p",{innerHTML:l.ticket["card-description"],class:"text-xs text-muted-foreground mb-3 text-text-secondary line-clamp-2"},null,8,["innerHTML"])).cacheIndex=1,fe(1),a[1]),s("div",vt,[s("div",pt,[s("div",{onClick:a[2]||(a[2]=m(()=>{},["stop"]))},[r(je,{users:i(W),onAssign:C,assigneeId:l.ticket.assigned_to,seat:(_=l.ticket)==null?void 0:_.seat},null,8,["users","assigneeId","seat"])]),s("div",{onClick:a[3]||(a[3]=m(()=>{},["stop"])),class:"flex items-center gap-2 text-nowrap overflow-ellipsis text-xs text-text-secondary"},[r(He,{placeholder:"end date","model-value":P.value,theme:"dark","emit-as":"ymd","onUpdate:modelValue":J},null,8,["model-value"])])]),s("div",ft,[s("div",bt,[a[12]||(a[12]=s("i",{class:"fa-regular fa-message text-[10px]"},null,-1)),s("span",null,A((V=l.ticket)==null?void 0:V.comments_count),1)]),s("div",gt,[a[13]||(a[13]=s("i",{class:"fa-regular fa-file text-[10px]"},null,-1)),s("span",null,A((b=l.ticket)==null?void 0:b.attachments.length),1)])])])],6),s("div",{class:"no-drag-zone",draggable:"false",onMousedown:a[8]||(a[8]=m(()=>{},["stop"])),onTouchstart:a[9]||(a[9]=m(()=>{},["stop"])),onPointerdown:a[10]||(a[10]=m(()=>{},["stop"]))},[r(it,{onClick:a[5]||(a[5]=m(()=>{},["stop"])),modelValue:v.value,"onUpdate:modelValue":a[6]||(a[6]=z=>v.value=z),title:"Delete Ticket",itemLabel:"Ticket",itemName:l.ticket.title,requireMatchText:l.ticket.title,confirmText:"Delete Ticket",cancelText:"Cancel",size:"md",loading:i($),onConfirm:R,onCancel:a[7]||(a[7]=()=>{v.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"])],32)],64)}}}),_t=Ve(xt,[["__scopeId","data-v-c3acfa1d"]]),kt={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-2xl shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex-col flex scrollbar-visible"},yt={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1"},wt={class:"flex gap-3 items-center"},Ct={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible"},Vt={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},ht={key:0,class:"bg-bg-body rounded-lg p-4"},Dt={class:"flex items-center mt-3 gap-3"},Tt=_e({__name:"Product",setup(ee){const B=T(()=>S(()=>import("./CreateTaskModal-B6iBTewf.js"),__vite__mapDeps([0,1,2,3]))),Q=T(()=>S(()=>import("./CreateSheetModal-Cia-8QGi.js"),__vite__mapDeps([4,2,3,5,6]))),W=T(()=>S(()=>import("./CreateVariableModal-dELTIDWK.js"),__vite__mapDeps([7,2,3]))),u=T(()=>S(()=>import("./ConfirmDeleteModal-DQqHUOCH.js"),__vite__mapDeps([8,9,2,3]))),F=T(()=>S(()=>import("./SidePanel-jswCuen-.js"),__vite__mapDeps([10,2,3,11]))),Y=T(()=>S(()=>import("./KanbanBoard-Cd2e-cRD.js"),__vite__mapDeps([12,2,3,13,9,14,15]))),v=d(!1),P=tt(),{workspaceId:f,moduleId:n}=ke(),{data:w}=we(f.value,n.value),G=ye(),{mutate:$,isPending:O}=Qe({onSuccess:()=>{G.invalidateQueries({queryKey:["sheet-list"]}),H.value="",h.value=!1,j.value=!1,h.value=!1}}),R=t=>{$({workspace_id:f.value,module_id:n.value,variable_id:a.value,value:t})},{data:C,refetch:J}=We({workspace_id:f,workspace_module_id:n}),U=M(()=>{var t;return C.value?(t=C.value[0])==null?void 0:t._id:""}),c=d(U.value);K(U,()=>{c.value=U.value});const l=M(()=>{var t;return w.value?(t=w.value[0])==null?void 0:t._id:""}),a=d(l.value);K(l,()=>{a.value=l.value});const g=at(),{data:N,isPending:E}=Fe(n,c,M(()=>[...g.selectedLaneIds]),a),x=d(!1),_=d(),V=t=>{_.value=t},b=d(!1),z=()=>{b.value=!b.value},he=Ye(),De=Ge();function Te(t){t.type=="column"?he.mutate({payload:{workspace_id:f.value,workspace_module_id:n.value,variable_id:a.value,moved_value:t.meta.id,new_index:t.meta.newIndex}}):De.mutate({payload:{workspace_id:f.value,card_id:t.meta.moved._id,group_value:t.meta.fromColumnId,group_variable_id:a.value,new_index:t.meta.newIndex,sheet_id:c.value}})}const Se=t=>{},Ae=M(()=>(C.value||[]).map(t=>({_id:t._id,title:t.variables["sheet-title"],description:t.variables["sheet-description"],icon:t.icon})));K(C,t=>{var e;(t==null?void 0:t.length)>0&&(c.value=(e=t[0])==null?void 0:e._id)});const j=d(!1),H=d("");function te(){j.value=!j.value}function ae(){const t=H.value.trim();t&&R(t)}const Le=t=>{$({workspace_id:P.params.id,module_id:P.params.module_id,new_value:t.title,value:t.oldTitle,variable_id:a.value})},h=d(!1),k=d(),Me=()=>{$({value:k.value.title,workspace_id:f.value,module_id:n.value,newValue:k.value.title,variable_id:a.value,is_trash:!0})},Ie=t=>{h.value=!0,k.value=t},Pe=t=>{x.value=!0,k.value=t},q=d(!1),D=d();function $e(t){q.value=!0,D.value=t}const{mutate:Ue,isPending:Ee}=Je({onSuccess:()=>{J(),q.value=!1}});function qe(){var t;Ue({sheet_id:(t=D.value)==null?void 0:t._id,workspace_module_id:n.value,is_trash:!0})}function Ke(t){b.value=!0,D.value=t}return(t,e)=>{var le,se,oe,ie,de,re,ne;return p(),y(Ce,null,[s("div",kt,[s("div",yt,[r(xe,{onEditOption:Ke,modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=o=>c.value=o),onDeleteOption:$e,options:Ae.value,variant:"secondary"},{more:L(()=>[s("div",{onClick:e[0]||(e[0]=o=>z()),class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[19]||(e[19]=[s("i",{class:"fa-solid fa-plus"},null,-1),Z(" Add new ")]))]),_:1},8,["modelValue","options"]),s("div",wt,[r(xe,{actions:!1,prefix:"View by",modelValue:a.value,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value=o),options:i(w),variant:"secondary"},{more:L(()=>[s("div",{onClick:e[2]||(e[2]=o=>v.value=!0),class:"sticky bottom-0 bg-bg-dropdown shadow-md shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[20]||(e[20]=[s("i",{class:"fa-solid fa-plus"},null,-1),Z(" Add new ")]))]),_:1},8,["modelValue","options"]),r(st,{placeholder:"Search in Orchit AI space"})])]),be(r(lt,null,null,512),[[ge,i(E)]]),be(s("div",Ct,[r(i(Y),{onOnPlus:Pe,"onDelete:column":e[4]||(e[4]=o=>Ie(o)),"onUpdate:column":e[5]||(e[5]=o=>Le(o)),onReorder:Te,onAddColumn:R,"onSelect:ticket":V,board:i(N),onOnBoardUpdate:Se,variable_id:a.value,sheet_id:c.value},{"column-footer":L(o=>{var ue,ce,me,ve,pe;return[(ce=(ue=i(g))==null?void 0:ue.transitions)!=null&&ce.all_allowed&&!((pe=(ve=(me=i(g))==null?void 0:me.transitions)==null?void 0:ve.all_allowed)!=null&&pe.includes(o.column.title))&&i(g).transitions.currentColumn!=o.column.title?(p(),y("div",Vt," Disbale ( you can't drop here )")):I("",!0)]}),ticket:L(({ticket:o})=>[r(_t,{selectedVar:a.value,onClick:V,ticket:o},null,8,["selectedVar","ticket"])]),_:1},8,["board","variable_id","sheet_id"]),s("div",{class:"min-w-[328px]",onClick:e[7]||(e[7]=m(()=>{},["stop"]))},[j.value?(p(),y("div",ht,[r(Ze,{autofocus:!0,modelValue:H.value,"onUpdate:modelValue":e[6]||(e[6]=o=>H.value=o),placeholder:"Add New list",onKeyup:Xe(ae,["enter"])},null,8,["modelValue"]),e[21]||(e[21]=s("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),s("div",Dt,[r(et,{onClick:ae,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:L(()=>[Z(A(i(O)?"Adding...":"Add list"),1)]),_:1}),s("i",{class:"fa-solid fa-close",onClick:te})])])):(p(),y("button",{key:1,class:"text-sm text-text-primary py-2.5 cursor-pointer font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",onClick:m(te,["stop"])}," + Add List "))])],512),[[ge,!i(E)]])]),r(i(u),{onClick:e[8]||(e[8]=m(()=>{},["stop"])),modelValue:h.value,"onUpdate:modelValue":e[9]||(e[9]=o=>h.value=o),title:"Delete List",itemLabel:"list",itemName:(le=k.value)==null?void 0:le.title,requireMatchText:(se=k.value)==null?void 0:se.title,confirmText:"Delete List",cancelText:"Cancel",size:"md",loading:i(O),onConfirm:Me,onCancel:e[10]||(e[10]=()=>{h.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),x.value?(p(),X(i(B),{selectedVariable:a.value,listId:(oe=k.value)==null?void 0:oe.title,sheet_id:c.value,key:"createTaskModalKey",modelValue:x.value,"onUpdate:modelValue":e[11]||(e[11]=o=>x.value=o),onSubmit:e[12]||(e[12]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):I("",!0),(ie=_.value)!=null&&ie._id?(p(),X(i(F),{key:1,details:_.value,onClose:e[13]||(e[13]=()=>{V({variables:{}})}),showPanel:!!((de=_.value)!=null&&de._id)},null,8,["details","showPanel"])):I("",!0),r(i(Q),{size:"md",sheet:D.value,modelValue:b.value,"onUpdate:modelValue":e[14]||(e[14]=o=>b.value=o)},null,8,["sheet","modelValue"]),v.value?(p(),X(i(W),{key:2,modelValue:v.value,"onUpdate:modelValue":e[15]||(e[15]=o=>v.value=o),sheetID:c.value},null,8,["modelValue","sheetID"])):I("",!0),r(i(u),{onClick:e[16]||(e[16]=m(()=>{},["stop"])),modelValue:q.value,"onUpdate:modelValue":e[17]||(e[17]=o=>q.value=o),title:"Delete Sheet",itemLabel:"Sheet",itemName:(re=D.value)==null?void 0:re.title,requireMatchText:(ne=D.value)==null?void 0:ne.title,confirmText:"Delete Sheet",cancelText:"Cancel",size:"md",loading:i(Ee),onConfirm:qe,onCancel:e[18]||(e[18]=()=>{q.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"])],64)}}}),$t=Ve(Tt,[["__scopeId","data-v-9b7d7eb4"]]);export{$t as default};
