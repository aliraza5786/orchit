<<<<<<<< HEAD:dist/assets/Product-DOQQcDD8.js
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-CI5od3NU.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-CkjTGyhX.js","assets/index-C0EDYk9O.js","assets/index-KjqEc-Z4.css","assets/CreateSheetModal-DxaLOCOK.js","assets/AudioRecorder.vue_vue_type_script_setup_true_lang-L2HwwJ8E.js","assets/CreateSheetModal-A2wJRiuN.css","assets/CreateVariableModal-XGkBsIFf.js","assets/ConfirmDeleteModal-DAnGLiGH.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-Dz-2Hxax.js","assets/SidePanel-cqZwO_1h.js","assets/SidePanel-DoroZ0j-.css","assets/KanbanBoard-pbBDeQuN.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-BL-uUAfD.js","assets/workspace-BUeTPCZz.js","assets/KanbanBoard-CdMCEOAX.css"])))=>i.map(i=>d[i]);
import{d as ye,W as we,aF as Be,c as P,r as n,m as B,a as Ce,aa as Oe,ab as Re,$ as Ve,i as w,F as he,e as s,ac as Ne,y as ze,j as U,t as M,h as r,g as m,w as I,s as ge,bf as je,n as i,U as He,o as v,H as De,a2 as Qe,Y as We,ad as Fe,a3 as Ye,a4 as Ge,ae as Je,b as ee,A as xe,f as te,C as _e,a5 as A,a9 as Xe,_ as Ze,B as et,a6 as L,p as tt}from"./index-C0EDYk9O.js";import{u as lt}from"./workspace-BUeTPCZz.js";import{D as ke,K as at}from"./KanbanSkeleton-BFVJ0qh_.js";import{_ as st}from"./SearchBar.vue_vue_type_script_setup_true_lang-g_1_La82.js";import{_ as ot}from"./DropMenu.vue_vue_type_script_setup_true_lang-BL-uUAfD.js";import{_ as it}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-Dz-2Hxax.js";const nt={class:"flex justify-between gap-2 items-start mb-3"},rt={class:"flex gap-2 flex-wrap items-center"},dt={key:0,class:"text-[10px] px-2 py-1 h-6 rounded bg-bg-surface/60 text-text-secondary font-medium uppercase"},ut={key:1,class:"text-[10px] px-2 py-1 h-6 rounded bg-accent/20 text-accent font-medium"},ct={class:"product-menu-icon transition-all w-6 py-1 px-2 h-6 flex justify-center items-center duration-100 ease-in-out bg-bg-surface/40 rounded-md"},mt={class:"text-sm font-medium text-card-foreground leading-tight mb-2 capitalize"},vt={class:"flex justify-between items-center mt-3 pt-3 border-t border-border/50"},pt={class:"flex items-center gap-3 flex-1"},ft={class:"flex items-center gap-2"},bt={class:"flex items-center gap-1 text-xs text-text-secondary"},gt={class:"flex items-center gap-1 text-xs text-text-secondary"},xt=ye({__name:"KanbanTicket",props:{ticket:{},selectedVar:{}},emits:["select"],setup(le,{emit:Y}){const{workspaceId:O,moduleId:G}=we(),{data:R}=Be(O.value),u=le,J={critical:"border-l-priority-critical",high:"border-l-priority-high",medium:"border-l-priority-medium",low:"border-l-priority-low"},C=P(()=>J[u.ticket.priority]??"border-l-gray-300"),g=n(!1),p=n(u.ticket["end-date"]??null),f=n(u.ticket["start-date"]??null);B(()=>{var l;return(l=u.ticket)==null?void 0:l["end-date"]},l=>{p.value=l??null}),B(()=>{var l;return(l=u.ticket)==null?void 0:l["start-date"]},l=>{f.value=l??null});const b=Ce(),N=Oe({onSuccess:()=>{b.invalidateQueries({queryKey:["people-lists"]}),b.invalidateQueries({queryKey:["get-sheets"]}),b.invalidateQueries({queryKey:["sheet-list"]}),b.invalidateQueries({queryKey:["roles"]})}}),{mutate:$,isPending:z}=Re(u.ticket._id,{onSuccess:()=>{b.invalidateQueries({queryKey:["sheet-list"]}),g.value=!1}});function j(){return[{label:"Delete",danger:!0,action:()=>{g.value=!0}}]}const V=()=>{$({})},X=l=>{const a={card_id:u.ticket._id,seat_id:l==null?void 0:l._id};N.mutate(a)},E=l=>{N.mutate({card_id:u.ticket._id,variables:{"end-date":l}})},{data:c}=Ve(O.value,G.value),h=P(()=>c.value.filter(l=>l._id==u.selectedVar)),d=Y;return(l,a)=>{var q,_,k,D,x,H,Q;return v(),w(he,null,[s("div",{onClick:a[4]||(a[4]=()=>{console.log(">>> clicking >>> "),d("select")}),class:ze(["product-ticket relative bg-bg-card rounded-lg p-4 shadow-sm cursor-grab border-t-4 hover:shadow-md transition-all duration-200 active:cursor-grabbing",C.value]),style:Ne({borderColor:(_=(q=l.ticket)==null?void 0:q.lane)==null?void 0:_.variables["lane-color"]})},[s("div",nt,[s("div",rt,[l.ticket["card-type"]&&((k=h.value[0])==null?void 0:k.slug)!="card-type"?(v(),w("span",dt,M(l.ticket["card-type"]),1)):U("",!0),l.ticket["card-status"]&&((D=h.value[0])==null?void 0:D.slug)!="card-status"?(v(),w("span",ut,M(l.ticket["card-status"]),1)):U("",!0)]),s("div",ct,[r(ot,{onClick:a[0]||(a[0]=m(()=>{},["stop"])),items:j()},{trigger:I(()=>a[11]||(a[11]=[s("i",{class:"cursor-pointer text-sm fa-solid fa-ellipsis"},null,-1)])),_:1},8,["items"])])]),s("h3",mt,M(l.ticket["card-title"]),1),a[1]||(ge(-1,!0),(a[1]=s("p",{innerHTML:l.ticket["card-description"],class:"text-xs text-muted-foreground mb-3 text-text-secondary line-clamp-2"},null,8,["innerHTML"])).cacheIndex=1,ge(1),a[1]),s("div",vt,[s("div",pt,[s("div",{onClick:a[2]||(a[2]=m(()=>{},["stop"]))},[r(je,{users:i(R),onAssign:X,assigneeId:l.ticket.assigned_to,seat:(x=l.ticket)==null?void 0:x.seat},null,8,["users","assigneeId","seat"])]),s("div",{onClick:a[3]||(a[3]=m(()=>{},["stop"])),class:"flex items-center gap-2 text-nowrap overflow-ellipsis text-xs text-text-secondary"},[r(He,{placeholder:"end date","model-value":p.value,theme:"dark","emit-as":"ymd","onUpdate:modelValue":E},null,8,["model-value"])])]),s("div",ft,[s("div",bt,[a[12]||(a[12]=s("i",{class:"fa-regular fa-message text-[10px]"},null,-1)),s("span",null,M((H=l.ticket)==null?void 0:H.comments_count),1)]),s("div",gt,[a[13]||(a[13]=s("i",{class:"fa-regular fa-file text-[10px]"},null,-1)),s("span",null,M((Q=l.ticket)==null?void 0:Q.attachments.length),1)])])])],6),s("div",{class:"no-drag-zone",draggable:"false",onMousedown:a[8]||(a[8]=m(()=>{},["stop"])),onTouchstart:a[9]||(a[9]=m(()=>{},["stop"])),onPointerdown:a[10]||(a[10]=m(()=>{},["stop"]))},[r(it,{onClick:a[5]||(a[5]=m(()=>{},["stop"])),modelValue:g.value,"onUpdate:modelValue":a[6]||(a[6]=Z=>g.value=Z),title:"Delete Ticket",itemLabel:"Ticket",itemName:l.ticket.title,requireMatchText:l.ticket.title,confirmText:"Delete Ticket",cancelText:"Cancel",size:"md",loading:i(z),onConfirm:V,onCancel:a[7]||(a[7]=()=>{g.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"])],32)],64)}}}),_t=De(xt,[["__scopeId","data-v-f950e79f"]]),kt={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-2xl shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex-col flex scrollbar-visible"},yt={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1"},wt={class:"flex gap-3 items-center"},Ct={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible"},Vt={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},ht={key:0,class:"bg-bg-body rounded-lg p-4"},Dt={class:"flex items-center mt-3 gap-3"},Tt=ye({__name:"Product",setup(le){const Y=A(()=>L(()=>import("./CreateTaskModal-CI5od3NU.js"),__vite__mapDeps([0,1,2,3]))),O=A(()=>L(()=>import("./CreateSheetModal-DxaLOCOK.js"),__vite__mapDeps([4,2,3,5,6]))),G=A(()=>L(()=>import("./CreateVariableModal-XGkBsIFf.js"),__vite__mapDeps([7,2,3]))),R=A(()=>L(()=>import("./ConfirmDeleteModal-DAnGLiGH.js"),__vite__mapDeps([8,9,2,3]))),u=A(()=>L(()=>import("./SidePanel-cqZwO_1h.js"),__vite__mapDeps([10,2,3,11]))),J=A(()=>L(()=>import("./KanbanBoard-pbBDeQuN.js"),__vite__mapDeps([12,2,3,13,9,14,15]))),C=n(!1),g=tt(),{workspaceId:p,moduleId:f}=we(),{data:b}=Ve(p.value,f.value),N=Ce(),{mutate:$,isPending:z}=Qe({onSuccess:()=>{N.invalidateQueries({queryKey:["sheet-list"]}),F.value="",T.value=!1,W.value=!1,T.value=!1}}),j=t=>{$({workspace_id:p.value,module_id:f.value,variable_id:d.value,value:t})},{data:V,refetch:X}=We({workspace_id:p,workspace_module_id:f}),E=P(()=>{var t;return V.value?(t=V.value[0])==null?void 0:t._id:""}),c=n(E.value);B(E,()=>{c.value=E.value});const h=P(()=>{var t;return b.value?(t=b.value[0])==null?void 0:t._id:""}),d=n(h.value);B(h,()=>{d.value=h.value});const l=lt(),{data:a,isPending:q}=Fe(f,c,P(()=>[...l.selectedLaneIds]),d),_=n(!1),k=n(),D=t=>{console.log(">> click ",t),k.value=t},x=n(!1),H=()=>{x.value=!x.value},Q=Ye(),Z=Ge();function Te(t){t.type=="column"?Q.mutate({payload:{workspace_id:p.value,workspace_module_id:f.value,variable_id:d.value,moved_value:t.meta.id,new_index:t.meta.newIndex}}):Z.mutate({payload:{workspace_id:p.value,card_id:t.meta.moved._id,group_value:t.meta.fromColumnId,group_variable_id:d.value,new_index:t.meta.newIndex,sheet_id:c.value}})}const Se=t=>{},Ae=P(()=>(V.value||[]).map(t=>({_id:t._id,title:t.variables["sheet-title"],description:t.variables["sheet-description"],icon:t.icon})));B(V,t=>{var e;(t==null?void 0:t.length)>0&&(c.value=(e=t[0])==null?void 0:e._id)});const W=n(!1),F=n("");function ae(){W.value=!W.value}function se(){const t=F.value.trim();t&&j(t)}const Le=t=>{$({workspace_id:g.params.id,module_id:g.params.module_id,new_value:t.title,value:t.oldTitle,variable_id:d.value})},T=n(!1),y=n(),Me=()=>{$({value:y.value.title,workspace_id:p.value,module_id:f.value,newValue:y.value.title,variable_id:d.value,is_trash:!0})},Ie=t=>{T.value=!0,y.value=t},Pe=t=>{_.value=!0,y.value=t},K=n(!1),S=n();function Ue(t){K.value=!0,S.value=t}const{mutate:$e,isPending:Ee}=Je({onSuccess:()=>{X(),K.value=!1}});function qe(){var t;$e({sheet_id:(t=S.value)==null?void 0:t._id,workspace_module_id:f.value,is_trash:!0})}function Ke(t){x.value=!0,S.value=t}return(t,e)=>{var oe,ie,ne,re,de,ue,ce;return v(),w(he,null,[s("div",kt,[s("div",yt,[r(ke,{onEditOption:Ke,modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=o=>c.value=o),onDeleteOption:Ue,options:Ae.value,variant:"secondary"},{more:I(()=>[s("div",{onClick:e[0]||(e[0]=o=>H()),class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[19]||(e[19]=[s("i",{class:"fa-solid fa-plus"},null,-1),te(" Add new ")]))]),_:1},8,["modelValue","options"]),s("div",wt,[r(ke,{actions:!1,prefix:"View by",modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=o=>d.value=o),options:i(b),variant:"secondary"},{more:I(()=>[s("div",{onClick:e[2]||(e[2]=o=>C.value=!0),class:"sticky bottom-0 bg-bg-dropdown shadow-md shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[20]||(e[20]=[s("i",{class:"fa-solid fa-plus"},null,-1),te(" Add new ")]))]),_:1},8,["modelValue","options"]),r(st,{placeholder:"Search in Orchit AI space"})])]),xe(r(at,null,null,512),[[_e,i(q)]]),xe(s("div",Ct,[r(i(J),{onOnPlus:Pe,"onDelete:column":e[4]||(e[4]=o=>Ie(o)),"onUpdate:column":e[5]||(e[5]=o=>Le(o)),onReorder:Te,onAddColumn:j,"onSelect:ticket":D,board:i(a),onOnBoardUpdate:Se,variable_id:d.value,sheet_id:c.value},{"column-footer":I(o=>{var me,ve,pe,fe,be;return[(ve=(me=i(l))==null?void 0:me.transitions)!=null&&ve.all_allowed&&!((be=(fe=(pe=i(l))==null?void 0:pe.transitions)==null?void 0:fe.all_allowed)!=null&&be.includes(o.column.title))&&i(l).transitions.currentColumn!=o.column.title?(v(),w("div",Vt," Disbale ( you can't drop here )")):U("",!0)]}),ticket:I(({ticket:o})=>[r(_t,{selectedVar:d.value,onSelect:()=>{D(o)},ticket:o},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"]),s("div",{class:"min-w-[328px]",onClick:e[7]||(e[7]=m(()=>{},["stop"]))},[W.value?(v(),w("div",ht,[r(Ze,{autofocus:!0,modelValue:F.value,"onUpdate:modelValue":e[6]||(e[6]=o=>F.value=o),placeholder:"Add New list",onKeyup:Xe(se,["enter"])},null,8,["modelValue"]),e[21]||(e[21]=s("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),s("div",Dt,[r(et,{onClick:se,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:I(()=>[te(M(i(z)?"Adding...":"Add list"),1)]),_:1}),s("i",{class:"fa-solid fa-close",onClick:ae})])])):(v(),w("button",{key:1,class:"text-sm text-text-primary py-2.5 cursor-pointer font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",onClick:m(ae,["stop"])}," + Add List "))])],512),[[_e,!i(q)]])]),r(i(R),{onClick:e[8]||(e[8]=m(()=>{},["stop"])),modelValue:T.value,"onUpdate:modelValue":e[9]||(e[9]=o=>T.value=o),title:"Delete List",itemLabel:"list",itemName:(oe=y.value)==null?void 0:oe.title,requireMatchText:(ie=y.value)==null?void 0:ie.title,confirmText:"Delete List",cancelText:"Cancel",size:"md",loading:i(z),onConfirm:Me,onCancel:e[10]||(e[10]=()=>{T.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),_.value?(v(),ee(i(Y),{selectedVariable:d.value,listId:(ne=y.value)==null?void 0:ne.title,sheet_id:c.value,key:"createTaskModalKey",modelValue:_.value,"onUpdate:modelValue":e[11]||(e[11]=o=>_.value=o),onSubmit:e[12]||(e[12]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):U("",!0),(re=k.value)!=null&&re._id?(v(),ee(i(u),{key:1,details:k.value,onClose:e[13]||(e[13]=()=>{D({variables:{}})}),showPanel:!!((de=k.value)!=null&&de._id)},null,8,["details","showPanel"])):U("",!0),r(i(O),{size:"md",sheet:S.value,modelValue:x.value,"onUpdate:modelValue":e[14]||(e[14]=o=>x.value=o)},null,8,["sheet","modelValue"]),C.value?(v(),ee(i(G),{key:2,modelValue:C.value,"onUpdate:modelValue":e[15]||(e[15]=o=>C.value=o),sheetID:c.value},null,8,["modelValue","sheetID"])):U("",!0),r(i(R),{onClick:e[16]||(e[16]=m(()=>{},["stop"])),modelValue:K.value,"onUpdate:modelValue":e[17]||(e[17]=o=>K.value=o),title:"Delete Sheet",itemLabel:"Sheet",itemName:(ue=S.value)==null?void 0:ue.title,requireMatchText:(ce=S.value)==null?void 0:ce.title,confirmText:"Delete Sheet",cancelText:"Cancel",size:"md",loading:i(Ee),onConfirm:qe,onCancel:e[18]||(e[18]=()=>{K.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"])],64)}}}),Ut=De(Tt,[["__scopeId","data-v-0f8f3964"]]);export{Ut as default};
========
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateTaskModal-BchBWzfK.js","assets/CreateTaskModal.vue_vue_type_script_setup_true_lang-CYZ2prqW.js","assets/index-BRH08Fos.js","assets/index-C0s04Wdo.css","assets/CreateSheetModal-CA3m080e.js","assets/useOpenAIGeneration-DJmPISR9.js","assets/CreateSheetModal-BPf3BB8o.css","assets/CreateVariableModal-CU6RB3km.js","assets/ConfirmDeleteModal-4xZiSddb.js","assets/ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-eM9vyR1J.js","assets/SidePanel-C_sz7BHO.js","assets/SidePanel-DoroZ0j-.css","assets/KanbanBoard-DxQNpVM6.js","assets/DropMenu.vue_vue_type_script_setup_true_lang-pn0o7ueS.js","assets/workspace-DawcxeSw.js","assets/KanbanBoard-CJVPdV8K.css"])))=>i.map(i=>d[i]);
import{d as ye,W as we,aD as Be,c as P,r as n,m as B,a as Ce,aa as Oe,ab as Re,$ as Ve,i as w,F as he,e as s,ac as Ne,y as ze,j as U,t as M,h as d,g as m,w as I,s as ge,bd as je,n as i,U as He,o as v,H as De,a2 as Qe,Y as We,ad as Fe,a3 as Ye,a4 as Ge,ae as Je,b as ee,A as xe,f as te,C as _e,a5 as A,a9 as Xe,_ as Ze,B as et,a6 as L,p as tt}from"./index-BRH08Fos.js";import{u as lt}from"./workspace-DawcxeSw.js";import{D as ke,K as at}from"./KanbanSkeleton-CT7ScBya.js";import{_ as st}from"./SearchBar.vue_vue_type_script_setup_true_lang-CK4Qrmz-.js";import{_ as ot}from"./DropMenu.vue_vue_type_script_setup_true_lang-pn0o7ueS.js";import{_ as it}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-eM9vyR1J.js";const nt={class:"flex justify-between gap-2 items-start mb-3"},dt={class:"flex gap-2 flex-wrap items-center"},rt={key:0,class:"text-[10px] px-2 py-1 h-6 rounded bg-bg-surface/60 text-text-secondary font-medium uppercase"},ut={key:1,class:"text-[10px] px-2 py-1 h-6 rounded bg-accent/20 text-accent font-medium"},ct={class:"product-menu-icon transition-all w-6 py-1 px-2 h-6 flex justify-center items-center duration-100 ease-in-out bg-bg-surface/40 rounded-md"},mt={class:"text-sm font-medium text-card-foreground leading-tight mb-2 capitalize"},vt={class:"flex justify-between items-center mt-3 pt-3 border-t border-border/50"},pt={class:"flex items-center gap-3 flex-1"},ft={class:"flex items-center gap-2"},bt={class:"flex items-center gap-1 text-xs text-text-secondary"},gt={class:"flex items-center gap-1 text-xs text-text-secondary"},xt=ye({__name:"KanbanTicket",props:{ticket:{},selectedVar:{}},emits:["select"],setup(le,{emit:Y}){const{workspaceId:O,moduleId:G}=we(),{data:R}=Be(O.value),u=le,J={critical:"border-l-priority-critical",high:"border-l-priority-high",medium:"border-l-priority-medium",low:"border-l-priority-low"},C=P(()=>J[u.ticket.priority]??"border-l-gray-300"),g=n(!1),p=n(u.ticket["end-date"]??null),f=n(u.ticket["start-date"]??null);B(()=>{var l;return(l=u.ticket)==null?void 0:l["end-date"]},l=>{p.value=l??null}),B(()=>{var l;return(l=u.ticket)==null?void 0:l["start-date"]},l=>{f.value=l??null});const b=Ce(),N=Oe({onSuccess:()=>{b.invalidateQueries({queryKey:["people-lists"]}),b.invalidateQueries({queryKey:["get-sheets"]}),b.invalidateQueries({queryKey:["sheet-list"]}),b.invalidateQueries({queryKey:["roles"]})}}),{mutate:$,isPending:z}=Re(u.ticket._id,{onSuccess:()=>{b.invalidateQueries({queryKey:["sheet-list"]}),g.value=!1}});function j(){return[{label:"Delete",danger:!0,action:()=>{g.value=!0}}]}const V=()=>{$({})},X=l=>{const a={card_id:u.ticket._id,seat_id:l==null?void 0:l._id};N.mutate(a)},E=l=>{N.mutate({card_id:u.ticket._id,variables:{"end-date":l}})},{data:c}=Ve(O.value,G.value),h=P(()=>c.value.filter(l=>l._id==u.selectedVar)),r=Y;return(l,a)=>{var q,_,k,D,x,H,Q;return v(),w(he,null,[s("div",{onClick:a[4]||(a[4]=()=>{console.log(">>> clicking >>> "),r("select")}),class:ze(["product-ticket relative bg-bg-card rounded-lg p-4 shadow-sm cursor-grab border-t-4 hover:shadow-md transition-all duration-200 active:cursor-grabbing",C.value]),style:Ne({borderColor:(_=(q=l.ticket)==null?void 0:q.lane)==null?void 0:_.variables["lane-color"]})},[s("div",nt,[s("div",dt,[l.ticket["card-type"]&&((k=h.value[0])==null?void 0:k.slug)!="card-type"?(v(),w("span",rt,M(l.ticket["card-type"]),1)):U("",!0),l.ticket["card-status"]&&((D=h.value[0])==null?void 0:D.slug)!="card-status"?(v(),w("span",ut,M(l.ticket["card-status"]),1)):U("",!0)]),s("div",ct,[d(ot,{onClick:a[0]||(a[0]=m(()=>{},["stop"])),items:j()},{trigger:I(()=>a[11]||(a[11]=[s("i",{class:"cursor-pointer text-sm fa-solid fa-ellipsis"},null,-1)])),_:1},8,["items"])])]),s("h3",mt,M(l.ticket["card-title"]),1),a[1]||(ge(-1,!0),(a[1]=s("p",{innerHTML:l.ticket["card-description"],class:"text-xs text-muted-foreground mb-3 text-text-secondary line-clamp-2"},null,8,["innerHTML"])).cacheIndex=1,ge(1),a[1]),s("div",vt,[s("div",pt,[s("div",{onClick:a[2]||(a[2]=m(()=>{},["stop"]))},[d(je,{users:i(R),onAssign:X,assigneeId:l.ticket.assigned_to,seat:(x=l.ticket)==null?void 0:x.seat},null,8,["users","assigneeId","seat"])]),s("div",{onClick:a[3]||(a[3]=m(()=>{},["stop"])),class:"flex items-center gap-2 text-nowrap overflow-ellipsis text-xs text-text-secondary"},[d(He,{placeholder:"end date","model-value":p.value,theme:"dark","emit-as":"ymd","onUpdate:modelValue":E},null,8,["model-value"])])]),s("div",ft,[s("div",bt,[a[12]||(a[12]=s("i",{class:"fa-regular fa-message text-[10px]"},null,-1)),s("span",null,M((H=l.ticket)==null?void 0:H.comments_count),1)]),s("div",gt,[a[13]||(a[13]=s("i",{class:"fa-regular fa-file text-[10px]"},null,-1)),s("span",null,M((Q=l.ticket)==null?void 0:Q.attachments.length),1)])])])],6),s("div",{class:"no-drag-zone",draggable:"false",onMousedown:a[8]||(a[8]=m(()=>{},["stop"])),onTouchstart:a[9]||(a[9]=m(()=>{},["stop"])),onPointerdown:a[10]||(a[10]=m(()=>{},["stop"]))},[d(it,{onClick:a[5]||(a[5]=m(()=>{},["stop"])),modelValue:g.value,"onUpdate:modelValue":a[6]||(a[6]=Z=>g.value=Z),title:"Delete Ticket",itemLabel:"Ticket",itemName:l.ticket.title,requireMatchText:l.ticket.title,confirmText:"Delete Ticket",cancelText:"Cancel",size:"md",loading:i(z),onConfirm:V,onCancel:a[7]||(a[7]=()=>{g.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"])],32)],64)}}}),_t=De(xt,[["__scopeId","data-v-f950e79f"]]),kt={class:"flex-auto bg-gradient-to-b from-bg-card/95 to-bg-card/90 backdrop-blur rounded-2xl shadow-[0_10px_40px_-10px_rgba(0,0,0,.5)] flex-grow h-full bg-bg-card border border-border overflow-x-auto flex-col flex scrollbar-visible"},yt={class:"header px-4 py-3 border-b border-border flex items-center justify-between gap-1"},wt={class:"flex gap-3 items-center"},Ct={class:"flex overflow-x-auto gap-3 p-4 scrollbar-visible"},Vt={key:0,class:"mx-auto text-text-secondary/80 m-2 w-[90%] h-full justify-center flex items-center border border-dashed border-border"},ht={key:0,class:"bg-bg-body rounded-lg p-4"},Dt={class:"flex items-center mt-3 gap-3"},Tt=ye({__name:"Product",setup(le){const Y=A(()=>L(()=>import("./CreateTaskModal-BchBWzfK.js"),__vite__mapDeps([0,1,2,3]))),O=A(()=>L(()=>import("./CreateSheetModal-CA3m080e.js"),__vite__mapDeps([4,2,3,5,6]))),G=A(()=>L(()=>import("./CreateVariableModal-CU6RB3km.js"),__vite__mapDeps([7,2,3]))),R=A(()=>L(()=>import("./ConfirmDeleteModal-4xZiSddb.js"),__vite__mapDeps([8,9,2,3]))),u=A(()=>L(()=>import("./SidePanel-C_sz7BHO.js"),__vite__mapDeps([10,2,3,11]))),J=A(()=>L(()=>import("./KanbanBoard-DxQNpVM6.js"),__vite__mapDeps([12,2,3,13,9,14,15]))),C=n(!1),g=tt(),{workspaceId:p,moduleId:f}=we(),{data:b}=Ve(p.value,f.value),N=Ce(),{mutate:$,isPending:z}=Qe({onSuccess:()=>{N.invalidateQueries({queryKey:["sheet-list"]}),F.value="",T.value=!1,W.value=!1,T.value=!1}}),j=t=>{$({workspace_id:p.value,module_id:f.value,variable_id:r.value,value:t})},{data:V,refetch:X}=We({workspace_id:p,workspace_module_id:f}),E=P(()=>{var t;return V.value?(t=V.value[0])==null?void 0:t._id:""}),c=n(E.value);B(E,()=>{c.value=E.value});const h=P(()=>{var t;return b.value?(t=b.value[0])==null?void 0:t._id:""}),r=n(h.value);B(h,()=>{r.value=h.value});const l=lt(),{data:a,isPending:q}=Fe(f,c,P(()=>[...l.selectedLaneIds]),r),_=n(!1),k=n(),D=t=>{console.log(">> click ",t),k.value=t},x=n(!1),H=()=>{x.value=!x.value},Q=Ye(),Z=Ge();function Te(t){t.type=="column"?Q.mutate({payload:{workspace_id:p.value,workspace_module_id:f.value,variable_id:r.value,moved_value:t.meta.id,new_index:t.meta.newIndex}}):Z.mutate({payload:{workspace_id:p.value,card_id:t.meta.moved._id,group_value:t.meta.fromColumnId,group_variable_id:r.value,new_index:t.meta.newIndex,sheet_id:c.value}})}const Se=t=>{},Ae=P(()=>(V.value||[]).map(t=>({_id:t._id,title:t.variables["sheet-title"],description:t.variables["sheet-description"],icon:t.icon})));B(V,t=>{var e;(t==null?void 0:t.length)>0&&(c.value=(e=t[0])==null?void 0:e._id)});const W=n(!1),F=n("");function ae(){W.value=!W.value}function se(){const t=F.value.trim();t&&j(t)}const Le=t=>{$({workspace_id:g.params.id,module_id:g.params.module_id,new_value:t.title,value:t.oldTitle,variable_id:r.value})},T=n(!1),y=n(),Me=()=>{$({value:y.value.title,workspace_id:p.value,module_id:f.value,newValue:y.value.title,variable_id:r.value,is_trash:!0})},Ie=t=>{T.value=!0,y.value=t},Pe=t=>{_.value=!0,y.value=t},K=n(!1),S=n();function Ue(t){K.value=!0,S.value=t}const{mutate:$e,isPending:Ee}=Je({onSuccess:()=>{X(),K.value=!1}});function qe(){var t;$e({sheet_id:(t=S.value)==null?void 0:t._id,workspace_module_id:f.value,is_trash:!0})}function Ke(t){x.value=!0,S.value=t}return(t,e)=>{var oe,ie,ne,de,re,ue,ce;return v(),w(he,null,[s("div",kt,[s("div",yt,[d(ke,{onEditOption:Ke,modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=o=>c.value=o),onDeleteOption:Ue,options:Ae.value,variant:"secondary"},{more:I(()=>[s("div",{onClick:e[0]||(e[0]=o=>H()),class:"capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[19]||(e[19]=[s("i",{class:"fa-solid fa-plus"},null,-1),te(" Add new ")]))]),_:1},8,["modelValue","options"]),s("div",wt,[d(ke,{actions:!1,prefix:"View by",modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=o=>r.value=o),options:i(b),variant:"secondary"},{more:I(()=>[s("div",{onClick:e[2]||(e[2]=o=>C.value=!0),class:"sticky bottom-0 bg-bg-dropdown shadow-md shadow-border capitalize border-t border-border px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer flex items-center gap-1 overflow-hidden overflow-ellipsis text-nowrap"},e[20]||(e[20]=[s("i",{class:"fa-solid fa-plus"},null,-1),te(" Add new ")]))]),_:1},8,["modelValue","options"]),d(st,{placeholder:"Search in Orchit AI space"})])]),xe(d(at,null,null,512),[[_e,i(q)]]),xe(s("div",Ct,[d(i(J),{onOnPlus:Pe,"onDelete:column":e[4]||(e[4]=o=>Ie(o)),"onUpdate:column":e[5]||(e[5]=o=>Le(o)),onReorder:Te,onAddColumn:j,"onSelect:ticket":D,board:i(a),onOnBoardUpdate:Se,variable_id:r.value,sheet_id:c.value},{"column-footer":I(o=>{var me,ve,pe,fe,be;return[(ve=(me=i(l))==null?void 0:me.transitions)!=null&&ve.all_allowed&&!((be=(fe=(pe=i(l))==null?void 0:pe.transitions)==null?void 0:fe.all_allowed)!=null&&be.includes(o.column.title))&&i(l).transitions.currentColumn!=o.column.title?(v(),w("div",Vt," Disbale ( you can't drop here )")):U("",!0)]}),ticket:I(({ticket:o})=>[d(_t,{selectedVar:r.value,onSelect:()=>{D(o)},ticket:o},null,8,["selectedVar","onSelect","ticket"])]),_:1},8,["board","variable_id","sheet_id"]),s("div",{class:"min-w-[328px]",onClick:e[7]||(e[7]=m(()=>{},["stop"]))},[W.value?(v(),w("div",ht,[d(Ze,{autofocus:!0,modelValue:F.value,"onUpdate:modelValue":e[6]||(e[6]=o=>F.value=o),placeholder:"Add New list",onKeyup:Xe(se,["enter"])},null,8,["modelValue"]),e[21]||(e[21]=s("p",{class:"text-xs mt-1.5"},"You can add details while editing",-1)),s("div",Dt,[d(et,{onClick:se,varaint:"primary",class:"px-3 py-1 bg-accent cursor-pointer text-white rounded"},{default:I(()=>[te(M(i(z)?"Adding...":"Add list"),1)]),_:1}),s("i",{class:"fa-solid fa-close",onClick:ae})])])):(v(),w("button",{key:1,class:"text-sm text-text-primary py-2.5 cursor-pointer font-medium flex items-center justify-center w-full gap-2 bg-bg-body rounded-lg",onClick:m(ae,["stop"])}," + Add List "))])],512),[[_e,!i(q)]])]),d(i(R),{onClick:e[8]||(e[8]=m(()=>{},["stop"])),modelValue:T.value,"onUpdate:modelValue":e[9]||(e[9]=o=>T.value=o),title:"Delete List",itemLabel:"list",itemName:(oe=y.value)==null?void 0:oe.title,requireMatchText:(ie=y.value)==null?void 0:ie.title,confirmText:"Delete List",cancelText:"Cancel",size:"md",loading:i(z),onConfirm:Me,onCancel:e[10]||(e[10]=()=>{T.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"]),_.value?(v(),ee(i(Y),{selectedVariable:r.value,listId:(ne=y.value)==null?void 0:ne.title,sheet_id:c.value,key:"createTaskModalKey",modelValue:_.value,"onUpdate:modelValue":e[11]||(e[11]=o=>_.value=o),onSubmit:e[12]||(e[12]=()=>{})},null,8,["selectedVariable","listId","sheet_id","modelValue"])):U("",!0),(de=k.value)!=null&&de._id?(v(),ee(i(u),{key:1,details:k.value,onClose:e[13]||(e[13]=()=>{D({variables:{}})}),showPanel:!!((re=k.value)!=null&&re._id)},null,8,["details","showPanel"])):U("",!0),d(i(O),{size:"md",sheet:S.value,modelValue:x.value,"onUpdate:modelValue":e[14]||(e[14]=o=>x.value=o)},null,8,["sheet","modelValue"]),C.value?(v(),ee(i(G),{key:2,modelValue:C.value,"onUpdate:modelValue":e[15]||(e[15]=o=>C.value=o),sheetID:c.value},null,8,["modelValue","sheetID"])):U("",!0),d(i(R),{onClick:e[16]||(e[16]=m(()=>{},["stop"])),modelValue:K.value,"onUpdate:modelValue":e[17]||(e[17]=o=>K.value=o),title:"Delete Sheet",itemLabel:"Sheet",itemName:(ue=S.value)==null?void 0:ue.title,requireMatchText:(ce=S.value)==null?void 0:ce.title,confirmText:"Delete Sheet",cancelText:"Cancel",size:"md",loading:i(Ee),onConfirm:qe,onCancel:e[18]||(e[18]=()=>{K.value=!1})},null,8,["modelValue","itemName","requireMatchText","loading"])],64)}}}),Ut=De(Tt,[["__scopeId","data-v-0f8f3964"]]);export{Ut as default};
>>>>>>>> origin/prod:dist/assets/Product-T5sJzUUX.js
