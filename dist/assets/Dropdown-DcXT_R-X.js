import{d as me,r as d,c as r,an as xe,n as ye,l as a,h as o,e as S,z as n,m as i,aU as J,t as b,k as ge,aa as be,w as ke,aV as we,ai as he,o as l,j as y,a8 as _e,K as Ce,F as Q,y as X,i as Y,bn as $e,bo as ze,bp as Se,bq as De,br as Be,I as Ne}from"./index-B62t0aFy.js";import{o as Ve}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-Cu5KqiiA.js";const Ie=["src"],Re={key:0,class:"font-bold"},Ee={class:"text-nowrap"},Me=["onClick","onMouseenter"],Te={class:"flex items-center gap-2 min-w-0 flex-1"},Fe=["src"],je={class:"flex flex-col gap-1 max-w-40"},Oe={class:"overflow-hidden font-semibold overflow-ellipsis"},Pe={key:0,class:"min-w-40 line-clamp-2 text-wrap text-text-secondary text-xs"},Ue={key:1,class:"fa-regular text-left fa-arrows-spin animate-spin duration-250"},Ae={key:0,class:"pl-2 flex items-center relative ml-auto"},We={class:"py-1 text-sm"},qe=["onClick"],Ke={key:1,class:"pl-2 flex items-center relative"},Le=["onClick","aria-expanded","aria-label"],Ge={class:"rounded-md border border-border bg-bg-dropdown shadow-lg w-28 py-1 flex flex-col text-sm"},He=["onClick"],Je=["onClick"],Qe=me({__name:"Dropdown",props:{prefix:{},options:{default:()=>[]},modelValue:{default:""},variant:{default:"primary"},icon:{},size:{default:"md"},actions:{type:Boolean,default:!0},canEdit:{type:Boolean,default:!0},canDelete:{type:Boolean,default:!0},customClasses:{default:""}},emits:["update:modelValue","edit-option","delete-option","nested-select"],setup(Z,{emit:ee}){const m=Z,k=ee,w=d(!1),D=d(null),g=d(null),f=d(null),B=d({position:"fixed",top:"-9999px",left:"-9999px"});let x=null;const N=r({get:()=>m.modelValue,set:e=>k("update:modelValue",e)}),c=r(()=>m.options.find(e=>e._id===N.value)??null);function te(){w.value?$():(w.value=!0,he(()=>{se()}))}function $(){w.value=!1,h.value=null,x&&(x(),x=null)}function se(){g.value&&f.value&&(x=$e(g.value,f.value,le))}function le(){!g.value||!f.value||ze(g.value,f.value,{placement:"bottom-start",strategy:"fixed",middleware:[Se(({placement:e})=>e.startsWith("top")?17:5),De(),Be({padding:5})]}).then(({x:e,y:s})=>{B.value={position:"fixed",left:`${e}px`,top:`${s}px`}})}function V(e){N.value=e._id,$()}const z=d(null),h=d(null),v=d(null);function ae(e){var s;(s=e.nested)!=null&&s.length?h.value=h.value===e._id?null:e._id:V(e)}function oe(e,s){k("nested-select",e),V(s)}const _=d(null);function ne(e){_.value=null,v.value=v.value===e?null:e}function re(e){k("edit-option",e),v.value=null,_.value=null}function ie(e){k("delete-option",e),v.value=null,_.value=null}Ve(D,e=>{const s=e.target;f.value&&f.value.contains(s)||($(),v.value=null,_.value=null)}),xe(()=>{x&&x()});const p=r(()=>m.size==="sm"),ue=r(()=>p.value?"px-2 py-1 text-xs":"px-3 py-1.5 text-sm"),de=r(()=>p.value?"text-xs":"text-sm"),ce=r(()=>p.value?"text-xs":"text-sm"),pe=r(()=>p.value?"px-3 py-1":"px-4 py-2"),I=r(()=>p.value?"w-3.5 h-3.5":"w-4 h-4"),C=r(()=>p.value?"w-3.5 h-3.5":"w-4 h-4"),R=r(()=>p.value?"text-base":"text-lg"),fe=r(()=>p.value?"w-3.5 h-3.5":"w-4 h-4"),ve=r(()=>"dark:border-light-black border-border-gray");return ye(()=>m.options,()=>{},{deep:!0}),(e,s)=>{var E,M,T,F,j,O,P,U,A,W,q;return l(),a("div",{ref_key:"wrapperRef",ref:D,class:"relative inline-block text-left"},[o("button",{ref_key:"triggerRef",ref:g,onClick:te,type:"button",class:n(["text-nowrap inline-flex justify-between items-center gap-1 border rounded-[6px] font-medium cursor-pointer transition bg-bg-surface",[ue.value,e.variant==="secondary"?"!bg-bg-body border-0":"border-border"]])},[(E=c.value)!=null&&E.prefix?(l(),a("span",{key:0,class:n(I.value)},[typeof((M=c.value)==null?void 0:M.prefix)=="string"?(l(),a("img",{key:0,src:(T=c.value)==null?void 0:T.prefix,class:n(C.value)},null,10,Ie)):(l(),S(J((F=c.value)==null?void 0:F.prefix),{key:1,class:n(C.value)},null,8,["class"]))],2)):i("",!0),o("i",{class:n(`${(O=(j=c.value)==null?void 0:j.icon)==null?void 0:O.prefix} ${(U=(P=c.value)==null?void 0:P.icon)!=null&&U.iconName?(W=(A=c.value)==null?void 0:A.icon)==null?void 0:W.iconName:"file"} ${R.value}`)},null,2),o("span",{class:n(de.value)},[e.prefix?(l(),a("span",Re,b(e.prefix)+":",1)):i("",!0),o("span",Ee,b((q=c.value)==null?void 0:q.title),1)],2),(l(),a("svg",{class:n([fe.value,"text-text-secondary"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[4]||(s[4]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),(l(),S(we,{to:"body"},[ge(be,{name:"fade-scale","enter-active-class":"transition duration-200 ease-out","leave-active-class":"transition duration-150 ease-in","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:ke(()=>[w.value?(l(),a("div",{key:0,ref_key:"menuRef",ref:f,style:_e(B.value),class:n(["max-h-[500px] overflow-visible z-[9999] min-w-fit rounded-[6px] border border-border shadow-lg bg-bg-dropdown fixed",[ve.value,m.customClasses?m.customClasses:""]]),onClick:s[3]||(s[3]=y(()=>{},["stop"]))},[o("ul",{class:n(["py-1 z-[2]",ce.value])},[(l(!0),a(Q,null,X(e.options,t=>{var K,L,G,H;return l(),a("li",{key:t._id,class:n(["group cursor-pointer flex items-stretch text-nowrap hover:bg-bg-dropdown-menu-hover",pe.value]),onClick:u=>ae(t),onMouseenter:u=>z.value=t._id,onMouseleave:s[2]||(s[2]=u=>z.value=null)},[o("div",Te,[t.prefix?(l(),a("span",{key:0,class:n(I.value)},[typeof t.prefix=="string"?(l(),a("img",{key:0,src:t.prefix,class:n(C.value)},null,10,Fe)):(l(),S(J(t.prefix),{key:1,class:n(["text-text-primary",C.value])},null,8,["class"]))],2)):i("",!0),o("i",{class:n(`${(K=t.icon)==null?void 0:K.prefix} ${(L=t.icon)!=null&&L.iconName?(G=t.icon)==null?void 0:G.iconName:"file"} ${R.value}`)},null,2),o("div",je,[o("span",Oe,b(t.title),1),t.description?(l(),a("p",Pe,b(t.description),1)):i("",!0)]),(t==null?void 0:t.status)=="running"?(l(),a("i",Ue)):i("",!0)]),(H=t.nested)!=null&&H.length?(l(),a("div",Ae,[s[5]||(s[5]=o("span",{class:"text-text-secondary"},"...",-1)),z.value===t._id||h.value===t._id?(l(),a("div",{key:0,class:"absolute left-[-170px] sm:left-[30px] top-[-250px] sm:top-[-5px] ml-1 z-[30] min-w-48 bg-bg-dropdown border border-border rounded-md shadow-lg max-h-60 overflow-y-auto",onClick:s[0]||(s[0]=y(()=>{},["stop"]))},[o("ul",We,[(l(!0),a(Q,null,X(t.nested,u=>(l(),a("li",{key:u._id,class:"px-4 py-2 hover:bg-bg-dropdown-menu-hover cursor-pointer",onClick:Xe=>oe(u,t)},b(u.title),9,qe))),128))])])):i("",!0)])):e.actions&&e.canEdit&&e.canDelete?(l(),a("div",Ke,[o("button",{class:"opacity-0 cursor-pointer group-hover:opacity-100 focus:opacity-100 transition rounded-md px-1.5 py-1 text-text-secondary hover:bg-bg-dropdown-menu-hover",onClick:y(u=>ne(t._id),["stop"]),"aria-expanded":v.value===t._id?"true":"false","aria-label":`Actions for ${t.title}`}," â‹¯ ",8,Le),v.value===t._id?(l(),a("div",{key:0,class:"absolute left-[100%] right-0 top-full mt-1 z-[20]",onClick:s[1]||(s[1]=y(()=>{},["stop"]))},[o("div",Ge,[e.canEdit?(l(),a("button",{key:0,class:"px-3 py-1.5 text-left hover:bg-bg-dropdown-menu-hover cursor-pointer",onClick:y(u=>re(t),["stop"])},s[6]||(s[6]=[o("i",{class:"fa-regular fa-edit"},null,-1),Y(" Edit ")]),8,He)):i("",!0),e.canDelete?(l(),a("button",{key:1,class:"px-3 py-1.5 text-left text-red-600 cursor-pointer",onClick:y(u=>ie(t),["stop"])},s[7]||(s[7]=[o("i",{class:"fa-regular fa-trash"},null,-1),Y(" Delete ")]),8,Je)):i("",!0)])])):i("",!0)])):i("",!0)],42,Me)}),128)),Ce(e.$slots,"more",{},void 0,!0)],2)],6)):i("",!0)]),_:3})]))],512)}}}),et=Ne(Qe,[["__scopeId","data-v-fdf7f4ec"]]);export{et as D};
