import{d as p,a as T,r as x,c as E,x as i,m as C,o as w,h as o,w as m,j as l}from"./index-BMMiwVpy.js";const v={class:"max-h-[calc(100vh-100px)]"},j=p({__name:"GanttChartView",props:{data:{}},emits:["select:ticket"],setup(h,{emit:u}){const g=h,{isDark:s}=T(),D={taskLabel:"TaskName"},r=x(null),c=["#DBEAFE","#DCFCE7","#FEF3C7","#FCE7F3","#EDE9FE","#ECFEFF","#FFE4E6"],f={id:"TaskID",name:"TaskName",startDate:"StartDate",endDate:"EndDate",duration:"Duration",progress:"Progress",child:"subtasks"},k=E(()=>g.data.map((e,a)=>{const t=new Date(e["start-date"]),n=e["end-date"]?new Date(e["end-date"]):t,d=Math.ceil((n.getTime()-t.getTime())/(1e3*60*60*24))||1;return{TaskID:e["card-code"],TaskName:e["card-title"],StartDate:t,EndDate:n,Duration:d,Progress:0,barColor:c[a%c.length],taskLabelColor:s.value?"#FFFFFF":"#1F2937",extendedProps:{card:e}}})),F=u,_=e=>{const a=e.data.extendedProps.card;F("select:ticket",a)};return i(s,()=>{var a;const e=(a=r.value)==null?void 0:a.ej2Instances;e&&(console.log("ejgantt chart",e),e.theme=s.value?"Material3Dark":"Material3",e.refresh())},{immediate:!0}),i(s,()=>{var n;const e=document.getElementById("light-theme"),a=document.getElementById("dark-theme");e&&a&&(e.disabled=s.value,a.disabled=!s.value);const t=(n=r.value)==null?void 0:n.ej2Instances;t&&t.refresh()},{immediate:!0}),(e,a)=>{const t=l("e-column"),n=l("e-columns"),d=l("ejs-gantt");return w(),C("div",v,[o(d,{ref_key:"ganttRef",ref:r,dataSource:k.value,treeColumnIndex:1,taskFields:f,height:"100%",labelSettings:D,onRowSelected:_},{default:m(()=>[o(n,null,{default:m(()=>[o(t,{field:"TaskID",headerText:"Task ID",textAlign:"Right",width:"70"}),o(t,{field:"TaskName",headerText:"Task Name",textAlign:"Left",width:"200"}),o(t,{field:"StartDate",headerText:"Start Date",textAlign:"Right",format:"yMd",width:"90"}),o(t,{field:"Duration",headerText:"Duration",textAlign:"Right",width:"80"})]),_:1})]),_:1},8,["dataSource"])])}}});export{j as default};
