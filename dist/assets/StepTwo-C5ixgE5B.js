import{d as q,r as c,c as g,M as P,i as u,e as t,t as n,j as h,F as k,x as W,a7 as C,A as L,g as Y,b7 as R,R as X,h as y,_ as G,V as J,w as V,f as S,B as $,o as p,H as K}from"./index-CGmi0vIW.js";import{_ as O}from"./whitePlus-Cs_P7rE9.js";import{_ as Q}from"./BaseTextAreaField.vue_vue_type_script_setup_true_lang-BoPaisGb.js";import{u as Z}from"./workspace-CFws1Fb9.js";const ee={class:"w-full"},te={class:"text-2xl md:text-5xl font-semibold text-text-primary text-left m-0"},ae={class:"text-sm md:text-base text-text-secondary text-left mt-3 sm:mt-5.5 mb-0 md:mb-6"},le={class:"flex flex-col items-start gap-4 w-full pb-[80px]"},se=["for"],oe={class:"flex gap-3 flex-1 min-w-0"},re={class:"flex flex-col gap-1 min-w-0"},ne={class:"font-medium capitalize text-sm text-text-primary"},ie={class:"text-[11px] text-text-secondary text-start line-clamp-1"},de={class:"flex gap-3 items-center"},ce=["onClick"],ue=["name","id","value"],pe={key:1,class:"bg-bg-surface border border-border w-full px-4 pt-4 rounded-lg"},ve={class:"text-lg text-text-primary mb-3 font-semibold"},me={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},fe={class:""},xe={key:0,class:"text-red-500 text-sm -mt-2 mb-2"},be={class:"flex items-center gap-3"},ge={class:"relative block w-10 h-10 rounded-full border border-border cursor-pointer"},ye={class:"flex flex-col"},_e={class:"text-xs text-text-secondary"},he={class:"flex gap-2 mt-4 justify-end border-t border-border bg-bg-surface py-4"},we=q({__name:"StepTwo",props:{ai:{type:Boolean}},emits:["next"],setup(ke,{expose:A,emit:N}){const v=Z(),j=v.workspace||{},o=c({lanes:j.lanes||[]}),s=c({id:"","lane-title":"","lane-description":"","lane-color":"#4169E1"}),B=c([]),E=g(()=>{try{const l=v.workspace;if(!l)return[];const e=l;return!e.lanes||!Array.isArray(e.lanes)?[]:e.lanes.map(a=>{var f;return(f=a.variables)==null?void 0:f.id}).filter(Boolean)}catch(l){return console.warn("Failed to parse workspace from localStorage:",l),[]}}),m=c(E.value??[]),i=c(!1),d=c(!1),r=P({title:!1,description:!1,color:!1}),x=g(()=>{if(!r.title)return"";const l=(s.value["lane-title"]||"").trim();return l?l.length<3?"Lane Name must be at least 3 characters":"":"Lane Name is required"}),b=g(()=>r.description?(s.value["lane-description"]||"").trim()?"":"Description is required":""),w=g(()=>r.color?/^#([0-9A-Fa-f]{6})$/.test(s.value["lane-color"]||"")?"":"Pick a valid 6-digit HEX color":"");function U(){i.value=!0,d.value=!1}function z(){i.value=!1,d.value=!1,_()}function F(){!x.value&&!b.value&&(m.value=[...m.value,`lane${o.value.lanes.length+1}`],o.value.lanes.push({variables:{...s.value,id:`lane${o.value.lanes.length+1}`}}),i.value=!1,_())}function T(){if(!x.value&&!b.value){const l=o.value.lanes.findIndex(e=>e.variables.id===s.value.id);l!==-1&&(o.value.lanes[l]={variables:{...s.value}}),i.value=!1,d.value=!1}_()}function _(){B.value=[],s.value={id:"","lane-title":"","lane-description":"","lane-color":"#4169E1"},r.title=!1,r.description=!1}function M(l){s.value={...l.variables},i.value=!0,d.value=!0}const D=()=>{const l=o.value.lanes.filter(e=>m.value.some(a=>a==e.variables.id));v.setWorkspace({...v.workspace,variables:{...v.workspace.variables},lanes:[...l]})};function H(){o.value.lanes.length>0&&(D(),I("next"))}A({continueHandler:H});const I=N;return(l,e)=>(p(),u(k,null,[t("div",ee,[t("h2",te,n(l.ai?" Choose Your Lanes":"Create Your Lanes"),1),t("p",ae,n(l.ai?" Select the components you want to include in your project":" Create the components you want to include in your project"),1)]),t("div",le,[(p(!0),u(k,null,W(o.value.lanes,a=>(p(),u("label",{key:a.variables.id,for:`lane-${a.variables.id}`,class:"rounded-lg relative flex justify-between gap-4 lg:gap-5 items-center w-full p-4 cursor-pointer transition-all bg-bg-surface border border-border"},[t("div",oe,[t("div",{class:"w-9 h-9 shrink-0 text-text-primary rounded-lg",style:C({background:a.variables["lane-color"]})},null,4),t("div",re,[t("h3",ne,n(a.variables["lane-title"]),1),t("p",ie,n(a.variables["lane-description"]),1)])]),t("div",de,[t("button",{class:"w-5 h-5 text-base aspect-square flex justify-center items-center rounded cursor-pointer text-accent",onClick:Y(f=>M(a),["stop"])},e[8]||(e[8]=[t("i",{class:"fa-solid fa-edit text-text-primary text-[20px]"},null,-1)]),8,ce),L(t("input",{type:"checkbox",class:"sr-only peer",name:`lane-${a.variables.id}`,id:`lane-${a.variables.id}`,"onUpdate:modelValue":e[0]||(e[0]=f=>m.value=f),value:a.variables.id},null,8,ue),[[R,m.value]]),e[9]||(e[9]=t("div",{class:"w-[20px] h-[20px] flex justify-center items-center border border-border bg-bg-card p-0.5 rounded cursor-pointer peer-checked:bg-accent peer-checked:border-none transition-all"},[t("i",{class:"w-4 text-bg-card fa-solid fa-check peer-checked:text-white"})],-1))])],8,se))),128)),i.value?h("",!0):(p(),u("label",{key:0,class:"rounded-lg w-full relative p-4 cursor-pointer transition-all bg-bg-surface border border-border",onClick:U},e[10]||(e[10]=[X('<div class="flex gap-2 items-center justify-center" data-v-946da356><div class="p-2.5 bg-accent rounded-full" data-v-946da356><img class="w-3" src="'+O+'" alt="" data-v-946da356></div><div class="flex flex-col justify-center" data-v-946da356><h3 class="font-medium capitalize text-sm text-text-primary" data-v-946da356>Add Custom Lane</h3><p class="text-[11px] text-text-secondary mt-1 line-clamp-1" data-v-946da356>Create your own component</p></div></div>',1)]))),i.value?(p(),u("div",pe,[t("h1",ve,n(d.value?"Update Lane":"Add Custom Lane"),1),t("div",me,[y(G,{label:"Lane Name",placeholder:"Lane Name",size:"lg",modelValue:s.value["lane-title"],"onUpdate:modelValue":e[1]||(e[1]=a=>s.value["lane-title"]=a),error:!!x.value,message:x.value,onBlur:e[2]||(e[2]=a=>r.title=!0)},null,8,["modelValue","error","message"]),t("div",fe,[e[12]||(e[12]=t("label",{class:"block text-base font-medium text-text-primary mb-2"},"Set Lane Color",-1)),w.value?(p(),u("p",xe,"("+n(w.value)+")",1)):h("",!0),t("div",be,[t("label",ge,[L(t("input",{type:"color","onUpdate:modelValue":e[3]||(e[3]=a=>s.value["lane-color"]=a),class:"absolute inset-0 opacity-0 cursor-pointer",onInput:e[4]||(e[4]=a=>r.color=!0)},null,544),[[J,s.value["lane-color"]]]),t("div",{class:"w-full h-full rounded-full",style:C({backgroundColor:s.value["lane-color"]})},null,4)]),t("div",ye,[e[11]||(e[11]=t("span",{class:"text-sm text-text-primary"},"Set Color",-1)),t("span",_e,n(s.value["lane-color"]),1)])])]),y(Q,{class:"col-span-full",modelValue:s.value["lane-description"],"onUpdate:modelValue":e[5]||(e[5]=a=>s.value["lane-description"]=a),label:"Description",placeholder:"This lane will track support tickets.",error:!!b.value,message:b.value,onBlur:e[6]||(e[6]=a=>r.description=!0)},null,8,["modelValue","error","message"])]),t("div",he,[y($,{size:"md",variant:"primary",onClick:e[7]||(e[7]=a=>d.value?T():F())},{default:V(()=>[S(n(d.value?"Update Lane":"Add Lane"),1)]),_:1}),y($,{size:"md",variant:"secondary",onClick:z},{default:V(()=>e[13]||(e[13]=[S("Cancel")])),_:1,__:[13]})])])):h("",!0)])],64))}}),$e=K(we,[["__scopeId","data-v-946da356"]]);export{$e as default};
